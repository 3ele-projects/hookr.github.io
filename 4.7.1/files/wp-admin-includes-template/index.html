<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.1" data-type="file" data-id="4515"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-includes-template | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.11"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=efd457ccc244b05f883fcd9c86bb0210' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.11' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-includes-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.1-file-wp-admin-includes-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-includes-template" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.1." href="http://hookr.io/4.7.1/" class="H_VERSION"><span property="name">4.7.1</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-includes-template</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6308"><a href="http://hookr.io/4.7.1/all/" title="All">All <span class="count badge">6308</span></a></li><li class="" data-id="new" data-count="1"><a href="http://hookr.io/4.7.1/new/" title="New">New <span class="count badge">1</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7.1/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.1/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7.1/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.1/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.1/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2852"><a href="http://hookr.io/4.7.1/functions/" title="Functions">Functions <span class="count badge">2852</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/includes/template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Template WordPress Administration API.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * A Big Mess. Also some neat functions that are nicely written.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Walker_Category_Checklist class */</span>&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/includes/class-walker-category-checklist.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WP_Internal_Pointers class */</span>&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/includes/class-wp-internal-pointers.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">//</span>&nbsp;</div></li><li><div><span class="comment">// Category Checklists</span>&nbsp;</div></li><li><div><span class="comment">//</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output an unordered list of checkbox input elements labeled with category names.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_terms_checklist()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $post_id              Optional. Post to generate a categories checklist for. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     $selected_cats must not be an array. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $descendants_and_self Optional. ID of the category to output along with its descendants.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $selected_cats        Optional. List of categories to mark as checked. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $popular_cats         Optional. List of categories to receive the &quot;popular-category&quot; class.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $walker               Optional. Walker object to use to build the output.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default is a Walker_Category_Checklist instance.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $checked_ontop        Optional. Whether to move checked items out of the hierarchy and to</span>&nbsp;</div></li><li><div><span class="comment"> *                                     the top of the list. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_category_checklist( $post_id = 0, $descendants_and_self = 0, $selected_cats = false, $popular_cats = false, $walker = null, $checked_ontop = true ) {&nbsp;</div></li><li><div>  wp_terms_checklist( $post_id, array(&nbsp;</div></li><li><div>      'taxonomy' =&gt; 'category', &nbsp;</div></li><li><div>      'descendants_and_self' =&gt; $descendants_and_self, &nbsp;</div></li><li><div>      'selected_cats' =&gt; $selected_cats, &nbsp;</div></li><li><div>      'popular_cats' =&gt; $popular_cats, &nbsp;</div></li><li><div>      'walker' =&gt; $walker, &nbsp;</div></li><li><div>      'checked_ontop' =&gt; $checked_ontop&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output an unordered list of checkbox input elements labelled with term names.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Taxonomy-independent version of wp_category_checklist().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Introduced the `$echo` argument.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int          $post_id Optional. Post ID. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Array or string of arguments for generating a terms checklist. Default empty array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $descendants_and_self ID of the category to output along with its descendants.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array  $selected_cats        List of categories to mark as checked. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array  $popular_cats         List of categories to receive the &quot;popular-category&quot; class.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type object $walker               Walker object to use to build the output.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default is a Walker_Category_Checklist instance.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $taxonomy             Taxonomy to generate the checklist for. Default 'category'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $checked_ontop        Whether to move checked items out of the hierarchy and to</span>&nbsp;</div></li><li><div><span class="comment"> *                                        the top of the list. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $echo                 Whether to echo the generated markup. False to return the markup instead</span>&nbsp;</div></li><li><div><span class="comment"> *                                        of echoing it. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_terms_checklist( $post_id = 0, $args = array() ) {&nbsp;</div></li><li><div>   $defaults = array(&nbsp;</div></li><li><div>      'descendants_and_self' =&gt; 0, &nbsp;</div></li><li><div>      'selected_cats' =&gt; false, &nbsp;</div></li><li><div>      'popular_cats' =&gt; false, &nbsp;</div></li><li><div>      'walker' =&gt; null, &nbsp;</div></li><li><div>      'taxonomy' =&gt; 'category', &nbsp;</div></li><li><div>      'checked_ontop' =&gt; true, &nbsp;</div></li><li><div>      'echo' =&gt; true, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the taxonomy terms checklist arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.4.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see wp_terms_checklist()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args    An array of arguments.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int   $post_id The post ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $params = apply_filters( 'wp_terms_checklist_args', $args, $post_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r = wp_parse_args( $params, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $r['walker'] ) || ! ( $r['walker'] instanceof Walker ) ) {&nbsp;</div></li><li><div>      $walker = new Walker_Category_Checklist;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $walker = $r['walker'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $taxonomy = $r['taxonomy'];&nbsp;</div></li><li><div>  $descendants_and_self = (int) $r['descendants_and_self'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = array( 'taxonomy' =&gt; $taxonomy );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tax = get_taxonomy( $taxonomy );&nbsp;</div></li><li><div>  $args['disabled'] = ! current_user_can( $tax-&gt;cap-&gt;assign_terms );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['list_only'] = ! empty( $r['list_only'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $r['selected_cats'] ) ) {&nbsp;</div></li><li><div>      $args['selected_cats'] = $r['selected_cats'];&nbsp;</div></li><li><div>  } elseif ( $post_id ) {&nbsp;</div></li><li><div>      $args['selected_cats'] = wp_get_object_terms( $post_id, $taxonomy, array_merge( $args, array( 'fields' =&gt; 'ids' ) ) );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $args['selected_cats'] = array();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( is_array( $r['popular_cats'] ) ) {&nbsp;</div></li><li><div>      $args['popular_cats'] = $r['popular_cats'];&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $args['popular_cats'] = get_terms( $taxonomy, array(&nbsp;</div></li><li><div>          'fields' =&gt; 'ids', &nbsp;</div></li><li><div>          'orderby' =&gt; 'count', &nbsp;</div></li><li><div>          'order' =&gt; 'DESC', &nbsp;</div></li><li><div>          'number' =&gt; 10, &nbsp;</div></li><li><div>          'hierarchical' =&gt; false&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( $descendants_and_self ) {&nbsp;</div></li><li><div>      $categories = (array) get_terms( $taxonomy, array(&nbsp;</div></li><li><div>          'child_of' =&gt; $descendants_and_self, &nbsp;</div></li><li><div>          'hierarchical' =&gt; 0, &nbsp;</div></li><li><div>          'hide_empty' =&gt; 0&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>      $self = get_term( $descendants_and_self, $taxonomy );&nbsp;</div></li><li><div>      array_unshift( $categories, $self );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $categories = (array) get_terms( $taxonomy, array( 'get' =&gt; 'all' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['checked_ontop'] ) {&nbsp;</div></li><li><div>      <span class="comment">// Post process $categories rather than adding an exclude to the get_terms() query to keep the query the same across all posts (for any query cache)</span>&nbsp;</div></li><li><div>      $checked_categories = array();&nbsp;</div></li><li><div>      $keys = array_keys( $categories );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $keys as $k ) {&nbsp;</div></li><li><div>          if ( in_array( $categories[$k]-&gt;term_id, $args['selected_cats'] ) ) {&nbsp;</div></li><li><div>              $checked_categories[] = $categories[$k];&nbsp;</div></li><li><div>              unset( $categories[$k] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Put checked cats on top</span>&nbsp;</div></li><li><div>      $output .= call_user_func_array( array( $walker, 'walk' ), array( $checked_categories, 0, $args ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Then the rest of them</span>&nbsp;</div></li><li><div>  $output .= call_user_func_array( array( $walker, 'walk' ), array( $categories, 0, $args ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['echo'] ) {&nbsp;</div></li><li><div>      echo $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve a list of the most popular terms from the specified taxonomy.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the $echo argument is true then the elements for a list of checkbox</span>&nbsp;</div></li><li><div><span class="comment"> * `&lt;input&gt;` elements labelled with the names of the selected terms is output.</span>&nbsp;</div></li><li><div><span class="comment"> * If the $post_ID global isn't empty then the terms associated with that</span>&nbsp;</div></li><li><div><span class="comment"> * post will be marked as checked.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $taxonomy Taxonomy to retrieve terms from.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $default Not used.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $number Number of terms to retrieve. Defaults to 10.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $echo Optionally output the list as well. Defaults to true.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array List of popular term IDs.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_popular_terms_checklist( $taxonomy, $default = 0, $number = 10, $echo = true ) {&nbsp;</div></li><li><div>  $post = get_post();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $post && $post-&gt;ID )&nbsp;</div></li><li><div>      $checked_terms = wp_get_object_terms($post-&gt;ID, $taxonomy, array('fields'=&gt;'ids'));&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $checked_terms = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $terms = get_terms( $taxonomy, array( 'orderby' =&gt; 'count', 'order' =&gt; 'DESC', 'number' =&gt; $number, 'hierarchical' =&gt; false ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tax = get_taxonomy($taxonomy);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $popular_ids = array();&nbsp;</div></li><li><div>  foreach ( (array) $terms as $term ) {&nbsp;</div></li><li><div>      $popular_ids[] = $term-&gt;term_id;&nbsp;</div></li><li><div>      if ( !$echo ) <span class="comment">// Hack for Ajax use.</span>&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      $id = &quot;popular-$taxonomy-$term-&gt;term_id&quot;;&nbsp;</div></li><li><div>      $checked = in_array( $term-&gt;term_id, $checked_terms ) ? 'checked=&quot;checked&quot;' : '';&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;li id=&quot;&lt;?php echo $id; ?&gt;&quot; class=&quot;popular-category&quot;&gt;&nbsp;</div></li><li><div>          &lt;label class=&quot;selectit&quot;&gt;&nbsp;</div></li><li><div>              &lt;input id=&quot;in-&lt;?php echo $id; ?&gt;&quot; type=&quot;checkbox&quot; &lt;?php echo $checked; ?&gt; value=&quot;&lt;?php echo (int) $term-&gt;term_id; ?&gt;&quot; &lt;?php disabled( ! current_user_can( $tax-&gt;cap-&gt;assign_terms ) ); ?&gt; /&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">/** This filter is documented in wp-includes/category-template.php */</span></span>&nbsp;</div></li><li><div>              echo esc_html( apply_filters( 'the_category', $term-&gt;name ) );&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $popular_ids;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a link category checklist element.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $link_id</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_link_category_checklist( $link_id = 0 ) {&nbsp;</div></li><li><div>  $default = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $checked_categories = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $link_id ) {&nbsp;</div></li><li><div>      $checked_categories = wp_get_link_cats( $link_id );&nbsp;</div></li><li><div>      <span class="comment">// No selected categories, strange</span>&nbsp;</div></li><li><div>      if ( ! count( $checked_categories ) ) {&nbsp;</div></li><li><div>          $checked_categories[] = $default;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $checked_categories[] = $default;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $categories = get_terms( 'link_category', array( 'orderby' =&gt; 'name', 'hide_empty' =&gt; 0 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $categories ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $categories as $category ) {&nbsp;</div></li><li><div>      $cat_id = $category-&gt;term_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">/** This filter is documented in wp-includes/category-template.php */</span></span>&nbsp;</div></li><li><div>      $name = esc_html( apply_filters( 'the_category', $category-&gt;name ) );&nbsp;</div></li><li><div>      $checked = in_array( $cat_id, $checked_categories ) ? ' checked=&quot;checked&quot;' : '';&nbsp;</div></li><li><div>      echo '&lt;li id=&quot;link-category-', $cat_id, '&quot;&gt;&lt;label for=&quot;in-link-category-', $cat_id, '&quot; class=&quot;selectit&quot;&gt;&lt;input value=&quot;', $cat_id, '&quot; type=&quot;checkbox&quot; name=&quot;link_category[]&quot; id=&quot;in-link-category-', $cat_id, '&quot;', $checked, '/&gt; ', $name, &quot;&lt;/label&gt;&lt;/li&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Adds hidden fields with the data for use in the inline editor for posts and pages.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_Post $post Post object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_inline_data($post) {&nbsp;</div></li><li><div>  $post_type_object = get_post_type_object($post-&gt;post_type);&nbsp;</div></li><li><div>  if ( ! current_user_can( 'edit_post', $post-&gt;ID ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $title = esc_textarea( trim( $post-&gt;post_title ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** This filter is documented in wp-admin/edit-tag-form.php */</span></span>&nbsp;</div></li><li><div>  echo '&nbsp;</div></li><li><div>&lt;div class=&quot;hidden&quot; id=&quot;inline_' . $post-&gt;ID . '&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;post_title&quot;&gt;' . $title . '&lt;/div&gt;' .&nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** This filter is documented in wp-admin/edit-tag-form.php */</span></span>&nbsp;</div></li><li><div>  '&lt;div class=&quot;post_name&quot;&gt;' . apply_filters( 'editable_slug', $post-&gt;post_name, $post ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;post_author&quot;&gt;' . $post-&gt;post_author . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;comment_status&quot;&gt;' . esc_html( $post-&gt;comment_status ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;ping_status&quot;&gt;' . esc_html( $post-&gt;ping_status ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;_status&quot;&gt;' . esc_html( $post-&gt;post_status ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;jj&quot;&gt;' . mysql2date( 'd', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;mm&quot;&gt;' . mysql2date( 'm', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;aa&quot;&gt;' . mysql2date( 'Y', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;hh&quot;&gt;' . mysql2date( 'H', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;mn&quot;&gt;' . mysql2date( 'i', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;ss&quot;&gt;' . mysql2date( 's', $post-&gt;post_date, false ) . '&lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;post_password&quot;&gt;' . esc_html( $post-&gt;post_password ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $post_type_object-&gt;hierarchical ) {&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;post_parent&quot;&gt;' . $post-&gt;post_parent . '&lt;/div&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;div class=&quot;page_template&quot;&gt;' . ( $post-&gt;page_template ? esc_html( $post-&gt;page_template ) : 'default' ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( post_type_supports( $post-&gt;post_type, 'page-attributes' ) ) {&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;menu_order&quot;&gt;' . $post-&gt;menu_order . '&lt;/div&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $taxonomy_names = get_object_taxonomies( $post-&gt;post_type );&nbsp;</div></li><li><div>  foreach ( $taxonomy_names as $taxonomy_name) {&nbsp;</div></li><li><div>      $taxonomy = get_taxonomy( $taxonomy_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $taxonomy-&gt;hierarchical && $taxonomy-&gt;show_ui ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $terms = get_object_term_cache( $post-&gt;ID, $taxonomy_name );&nbsp;</div></li><li><div>          if ( false === $terms ) {&nbsp;</div></li><li><div>              $terms = wp_get_object_terms( $post-&gt;ID, $taxonomy_name );&nbsp;</div></li><li><div>              wp_cache_add( $post-&gt;ID, wp_list_pluck( $terms, 'term_id' ), $taxonomy_name . '_relationships' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $term_ids = empty( $terms ) ? array() : wp_list_pluck( $terms, 'term_id' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;post_category&quot; id=&quot;' . $taxonomy_name . '_' . $post-&gt;ID . '&quot;&gt;' . implode( ', ', $term_ids ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      } elseif ( $taxonomy-&gt;show_ui ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $terms_to_edit = get_terms_to_edit( $post-&gt;ID, $taxonomy_name );&nbsp;</div></li><li><div>          if ( ! is_string( $terms_to_edit ) ) {&nbsp;</div></li><li><div>              $terms_to_edit = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;tags_input&quot; id=&quot;'.$taxonomy_name.'_'.$post-&gt;ID.'&quot;&gt;'&nbsp;</div></li><li><div>              . esc_html( str_replace( ', ', ', ', $terms_to_edit ) ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$post_type_object-&gt;hierarchical )&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;sticky&quot;&gt;' . (is_sticky($post-&gt;ID) ? 'sticky' : '') . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( post_type_supports( $post-&gt;post_type, 'post-formats' ) )&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;post_format&quot;&gt;' . esc_html( get_post_format( $post-&gt;ID ) ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;/div&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the in-line comment reply-to form in the Comments list table.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_List_Table $wp_list_table</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $position</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $checkbox</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $mode</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $table_row</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_comment_reply( $position = 1, $checkbox = false, $mode = 'single', $table_row = true ) {&nbsp;</div></li><li><div>  global $wp_list_table;&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the in-line comment reply-to form output in the Comments</span>&nbsp;</div></li><li><div><span class="comment">   * list table.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Returning a non-empty value here will short-circuit display</span>&nbsp;</div></li><li><div><span class="comment">   * of the in-line comment-reply form in the Comments list table, </span>&nbsp;</div></li><li><div><span class="comment">   * echoing the returned value instead.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see wp_comment_reply()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $content The reply-to form content.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $args    An array of default args.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $content = apply_filters( 'wp_comment_reply', '', array( 'position' =&gt; $position, 'checkbox' =&gt; $checkbox, 'mode' =&gt; $mode ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty($content) ) {&nbsp;</div></li><li><div>      echo $content;&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $wp_list_table ) {&nbsp;</div></li><li><div>      if ( $mode == 'single' ) {&nbsp;</div></li><li><div>          $wp_list_table = _get_list_table('WP_Post_Comments_List_Table');&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $wp_list_table = _get_list_table('WP_Comments_List_Table');&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;get&quot;&gt;&nbsp;</div></li><li><div>&lt;?php if ( $table_row ) : ?&gt;&nbsp;</div></li><li><div>&lt;table style=&quot;display:none;&quot;&gt;&lt;tbody id=&quot;com-reply&quot;&gt;&lt;tr id=&quot;replyrow&quot; class=&quot;inline-edit-row&quot; style=&quot;display:none;&quot;&gt;&lt;td colspan=&quot;&lt;?php echo $wp_list_table-&gt;get_column_count(); ?&gt;&quot; class=&quot;colspanchange&quot;&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;com-reply&quot; style=&quot;display:none;&quot;&gt;&lt;div id=&quot;replyrow&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>  &lt;fieldset class=&quot;comment-reply&quot;&gt;&nbsp;</div></li><li><div>  &lt;legend&gt;&nbsp;</div></li><li><div>      &lt;span class=&quot;hidden&quot; id=&quot;editlegend&quot;&gt;&lt;?php _e( 'Edit Comment' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;span class=&quot;hidden&quot; id=&quot;replyhead&quot;&gt;&lt;?php _e( 'Reply to Comment' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;span class=&quot;hidden&quot; id=&quot;addhead&quot;&gt;&lt;?php _e( 'Add new Comment' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;/legend&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div id=&quot;replycontainer&quot;&gt;&nbsp;</div></li><li><div>  &lt;label for=&quot;replycontent&quot; class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Comment' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  $quicktags_settings = array( 'buttons' =&gt; 'strong, em, link, block, del, ins, img, ul, ol, li, code, close' );&nbsp;</div></li><li><div>  wp_editor( '', 'replycontent', array( 'media_buttons' =&gt; false, 'tinymce' =&gt; false, 'quicktags' =&gt; $quicktags_settings ) );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div id=&quot;edithead&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;author-name&quot;&gt;&lt;?php _e( 'Name' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;text&quot; name=&quot;newcomment_author&quot; size=&quot;50&quot; value=&quot;&quot; id=&quot;author-name&quot; /&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;author-email&quot;&gt;&lt;?php _e('Email') ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;text&quot; name=&quot;newcomment_author_email&quot; size=&quot;50&quot; value=&quot;&quot; id=&quot;author-email&quot; /&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;author-url&quot;&gt;&lt;?php _e('URL') ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;text&quot; id=&quot;author-url&quot; name=&quot;newcomment_author_url&quot; class=&quot;code&quot; size=&quot;103&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;p id=&quot;replysubmit&quot; class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;#comments-form&quot; class=&quot;save button button-primary alignright&quot;&gt;&nbsp;</div></li><li><div>  &lt;span id=&quot;addbtn&quot; style=&quot;display:none;&quot;&gt;&lt;?php _e('Add Comment'); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;span id=&quot;savebtn&quot; style=&quot;display:none;&quot;&gt;&lt;?php _e('Update Comment'); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;span id=&quot;replybtn&quot; style=&quot;display:none;&quot;&gt;&lt;?php _e('Submit Reply'); ?&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;#comments-form&quot; class=&quot;cancel button alignleft&quot;&gt;&lt;?php _e('Cancel'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>  &lt;span class=&quot;waiting spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;span class=&quot;error&quot; style=&quot;display:none;&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;action&quot; id=&quot;action&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;comment_ID&quot; id=&quot;comment_ID&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;comment_post_ID&quot; id=&quot;comment_post_ID&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;status&quot; id=&quot;status&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;position&quot; id=&quot;position&quot; value=&quot;&lt;?php echo $position; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;checkbox&quot; id=&quot;checkbox&quot; value=&quot;&lt;?php echo $checkbox ? 1 : 0; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;mode&quot; id=&quot;mode&quot; value=&quot;&lt;?php echo esc_attr($mode); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>      wp_nonce_field( 'replyto-comment', '_ajax_nonce-replyto-comment', false );&nbsp;</div></li><li><div>      if ( current_user_can( 'unfiltered_html' ) )&nbsp;</div></li><li><div>          wp_nonce_field( 'unfiltered-html-comment', '_wp_unfiltered_html_comment', false );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/fieldset&gt;&nbsp;</div></li><li><div>&lt;?php if ( $table_row ) : ?&gt;&nbsp;</div></li><li><div>&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output 'undo move to trash' text for comments</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_comment_trashnotice() {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;hidden&quot; id=&quot;trash-undo-holder&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;trash-undo-inside&quot;&gt;&lt;?php printf(__('Comment by %s moved to the trash.'), '&lt;strong&gt;&lt;/strong&gt;'); ?&gt; &lt;span class=&quot;undo untrash&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;?php _e('Undo'); ?&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;hidden&quot; id=&quot;spam-undo-holder&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;spam-undo-inside&quot;&gt;&lt;?php printf(__('Comment by %s marked as spam.'), '&lt;strong&gt;&lt;/strong&gt;'); ?&gt; &lt;span class=&quot;undo unspam&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;?php _e('Undo'); ?&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a post's public meta data in the Custom Fields meta box.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $meta</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function list_meta( $meta ) {&nbsp;</div></li><li><div>  <span class="comment">// Exit if no meta</span>&nbsp;</div></li><li><div>  if ( ! $meta ) {&nbsp;</div></li><li><div>      echo '&nbsp;</div></li><li><div>&lt;table id=&quot;list-table&quot; style=&quot;display: none;&quot;&gt;&nbsp;</div></li><li><div>  &lt;thead&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;th class=&quot;left&quot;&gt;' . _x( 'Name', 'meta name' ) . '&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;th&gt;' . __( 'Value' ) . '&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/thead&gt;&nbsp;</div></li><li><div>  &lt;tbody id=&quot;the-list&quot; data-wp-lists=&quot;list:meta&quot;&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/tbody&gt;&nbsp;</div></li><li><div>&lt;/table&gt;'; <span class="comment">//TBODY needed for list-manipulation JS</span>&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $count = 0;&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;table id=&quot;list-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;thead&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;th class=&quot;left&quot;&gt;&lt;?php _ex( 'Name', 'meta name' ) ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;?php _e( 'Value' ) ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/thead&gt;&nbsp;</div></li><li><div>  &lt;tbody id='the-list' data-wp-lists='list:meta'&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  foreach ( $meta as $entry )&nbsp;</div></li><li><div>      echo _list_meta_row( $entry, $count );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/tbody&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a single row of public meta data in the Custom Fields meta box.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @staticvar string $update_nonce</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $entry</span>&nbsp;</div></li><li><div><span class="comment"> * @param int   $count</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _list_meta_row( $entry, &$count ) {&nbsp;</div></li><li><div>  static $update_nonce = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_protected_meta( $entry['meta_key'], 'post' ) )&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $update_nonce )&nbsp;</div></li><li><div>      $update_nonce = wp_create_nonce( 'add-meta' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r = '';&nbsp;</div></li><li><div>  ++ $count;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_serialized( $entry['meta_value'] ) ) {&nbsp;</div></li><li><div>      if ( is_serialized_string( $entry['meta_value'] ) ) {&nbsp;</div></li><li><div>          <span class="comment">// This is a serialized string, so we should display it.</span>&nbsp;</div></li><li><div>          $entry['meta_value'] = maybe_unserialize( $entry['meta_value'] );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// This is a serialized array/object so we should NOT display it.</span>&nbsp;</div></li><li><div>          --$count;&nbsp;</div></li><li><div>          return '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $entry['meta_key'] = esc_attr($entry['meta_key']);&nbsp;</div></li><li><div>  $entry['meta_value'] = esc_textarea( $entry['meta_value'] ); <span class="comment">// using a &lt;textarea /&gt;</span>&nbsp;</div></li><li><div>  $entry['meta_id'] = (int) $entry['meta_id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $delete_nonce = wp_create_nonce( 'delete-meta_' . $entry['meta_id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r .= &quot;\n\t&lt;tr id='meta-{$entry['meta_id']}'&gt;&quot;;&nbsp;</div></li><li><div>  $r .= &quot;\n\t\t&lt;td class='left'&gt;&lt;label class='screen-reader-text' for='meta-{$entry['meta_id']}-key'&gt;&quot; . __( 'Key' ) . &quot;&lt;/label&gt;&lt;input name='meta[{$entry['meta_id']}][key]' id='meta-{$entry['meta_id']}-key' type='text' size='20' value='{$entry['meta_key']}' /&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r .= &quot;\n\t\t&lt;div class='submit'&gt;&quot;;&nbsp;</div></li><li><div>  $r .= get_submit_button( __( 'Delete' ), 'deletemeta small', &quot;deletemeta[{$entry['meta_id']}]&quot;, false, array( 'data-wp-lists' =&gt; &quot;delete:the-list:meta-{$entry['meta_id']}::_ajax_nonce=$delete_nonce&quot; ) );&nbsp;</div></li><li><div>  $r .= &quot;\n\t\t&quot;;&nbsp;</div></li><li><div>  $r .= get_submit_button( __( 'Update' ), 'updatemeta small', &quot;meta-{$entry['meta_id']}-submit&quot;, false, array( 'data-wp-lists' =&gt; &quot;add:the-list:meta-{$entry['meta_id']}::_ajax_nonce-add-meta=$update_nonce&quot; ) );&nbsp;</div></li><li><div>  $r .= &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>  $r .= wp_nonce_field( 'change-meta', '_ajax_nonce', false, false );&nbsp;</div></li><li><div>  $r .= &quot;&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r .= &quot;\n\t\t&lt;td&gt;&lt;label class='screen-reader-text' for='meta-{$entry['meta_id']}-value'&gt;&quot; . __( 'Value' ) . &quot;&lt;/label&gt;&lt;textarea name='meta[{$entry['meta_id']}][value]' id='meta-{$entry['meta_id']}-value' rows='2' cols='30'&gt;{$entry['meta_value']}&lt;/textarea&gt;&lt;/td&gt;\n\t&lt;/tr&gt;&quot;;&nbsp;</div></li><li><div>  return $r;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Prints the form in the Custom Fields meta box.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb $wpdb WordPress database abstraction object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_Post $post Optional. The post being edited.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function meta_form( $post = null ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>  $post = get_post( $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters values for the meta key dropdown in the Custom Fields meta box.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Returning a non-null value will effectively short-circuit and avoid a</span>&nbsp;</div></li><li><div><span class="comment">   * potentially expensive query against postmeta.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|null $keys Pre-defined meta keys to be used in place of a postmeta query. Default null.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Post    $post The current post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $keys = apply_filters( 'postmeta_form_keys', null, $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $keys ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the number of custom fields to retrieve for the drop-down</span>&nbsp;</div></li><li><div><span class="comment">       * in the Custom Fields meta box.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $limit Number of custom fields to retrieve. Default 30.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $limit = apply_filters( 'postmeta_form_limit', 30 );&nbsp;</div></li><li><div>      $sql = &quot;SELECT DISTINCT meta_key&nbsp;</div></li><li><div>          FROM $wpdb-&gt;postmeta&nbsp;</div></li><li><div>          WHERE meta_key NOT BETWEEN '_' AND '_z'&nbsp;</div></li><li><div>          HAVING meta_key NOT LIKE %s&nbsp;</div></li><li><div>          ORDER BY meta_key&nbsp;</div></li><li><div>          LIMIT %d&quot;;&nbsp;</div></li><li><div>      $keys = $wpdb-&gt;get_col( $wpdb-&gt;prepare( $sql, $wpdb-&gt;esc_like( '_' ) . '%', $limit ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $keys ) {&nbsp;</div></li><li><div>      natcasesort( $keys );&nbsp;</div></li><li><div>      $meta_key_input_id = 'metakeyselect';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $meta_key_input_id = 'metakeyinput';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;strong&gt;&lt;?php _e( 'Add New Custom Field:' ) ?&gt;&lt;/strong&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;table id=&quot;newmeta&quot;&gt;&nbsp;</div></li><li><div>&lt;thead&gt;&nbsp;</div></li><li><div>&lt;tr&gt;&nbsp;</div></li><li><div>&lt;th class=&quot;left&quot;&gt;&lt;label for=&quot;&lt;?php echo $meta_key_input_id; ?&gt;&quot;&gt;&lt;?php _ex( 'Name', 'meta name' ) ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;th&gt;&lt;label for=&quot;metavalue&quot;&gt;&lt;?php _e( 'Value' ) ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;/thead&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tbody&gt;&nbsp;</div></li><li><div>&lt;tr&gt;&nbsp;</div></li><li><div>&lt;td id=&quot;newmetaleft&quot; class=&quot;left&quot;&gt;&nbsp;</div></li><li><div>&lt;?php if ( $keys ) { ?&gt;&nbsp;</div></li><li><div>&lt;select id=&quot;metakeyselect&quot; name=&quot;metakeyselect&quot;&gt;&nbsp;</div></li><li><div>&lt;option value=&quot;#NONE#&quot;&gt;&lt;?php _e( '&mdash; Select &mdash;' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $keys as $key ) {&nbsp;</div></li><li><div>      if ( is_protected_meta( $key, 'post' ) || ! current_user_can( 'add_post_meta', $post-&gt;ID, $key ) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      echo &quot;\n&lt;option value='&quot; . esc_attr($key) . &quot;'&gt;&quot; . esc_html($key) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/select&gt;&nbsp;</div></li><li><div>&lt;input class=&quot;hide-if-js&quot; type=&quot;text&quot; id=&quot;metakeyinput&quot; name=&quot;metakeyinput&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>&lt;a href=&quot;#postcustomstuff&quot; class=&quot;hide-if-no-js&quot; onclick=&quot;jQuery('#metakeyinput, #metakeyselect, #enternew, #cancelnew').toggle();return false;&quot;&gt;&nbsp;</div></li><li><div>&lt;span id=&quot;enternew&quot;&gt;&lt;?php _e('Enter new'); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>&lt;span id=&quot;cancelnew&quot; class=&quot;hidden&quot;&gt;&lt;?php _e('Cancel'); ?&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;?php } else { ?&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;text&quot; id=&quot;metakeyinput&quot; name=&quot;metakeyinput&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&lt;/td&gt;&nbsp;</div></li><li><div>&lt;td&gt;&lt;textarea id=&quot;metavalue&quot; name=&quot;metavalue&quot; rows=&quot;2&quot; cols=&quot;25&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>&lt;?php submit_button( __( 'Add Custom Field' ), '', 'addmeta', false, array( 'id' =&gt; 'newmeta-submit', 'data-wp-lists' =&gt; 'add:the-list:newmeta' ) ); ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field( 'add-meta', '_ajax_nonce-add-meta', false ); ?&gt;&nbsp;</div></li><li><div>&lt;/td&gt;&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;/tbody&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Print out HTML form date elements for editing post or comment publish date.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Converted to use get_comment() instead of the global `$comment`.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale  $wp_locale</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $edit      Accepts 1|true for editing the date, 0|false for adding the date.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $for_post  Accepts 1|true for applying the date to a post, 0|false for a comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int      $tab_index The tabindex attribute to add. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $multi     Optional. Whether the additional fields and buttons should be added.</span>&nbsp;</div></li><li><div><span class="comment"> *                            Default 0|false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function touch_time( $edit = 1, $for_post = 1, $tab_index = 0, $multi = 0 ) {&nbsp;</div></li><li><div>  global $wp_locale;&nbsp;</div></li><li><div>  $post = get_post();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $for_post )&nbsp;</div></li><li><div>      $edit = ! ( in_array($post-&gt;post_status, array('draft', 'pending') ) && (!$post-&gt;post_date_gmt || '0000-00-00 00:00:00' == $post-&gt;post_date_gmt ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tab_index_attribute = '';&nbsp;</div></li><li><div>  if ( (int) $tab_index &gt; 0 )&nbsp;</div></li><li><div>      $tab_index_attribute = &quot; tabindex=\&quot;$tab_index\&quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// todo: Remove this?</span>&nbsp;</div></li><li><div>  <span class="comment">// echo '&lt;label for=&quot;timestamp&quot; style=&quot;display: block;&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;checkbox&quot; name=&quot;edit_date&quot; value=&quot;1&quot; id=&quot;timestamp&quot;'.$tab_index_attribute.' /&gt; '.__( 'Edit timestamp' ).'&lt;/label&gt;&lt;br /&gt;';</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $time_adj = current_time('timestamp');&nbsp;</div></li><li><div>  $post_date = ($for_post) ? $post-&gt;post_date : get_comment()-&gt;comment_date;&nbsp;</div></li><li><div>  $jj = ($edit) ? mysql2date( 'd', $post_date, false ) : gmdate( 'd', $time_adj );&nbsp;</div></li><li><div>  $mm = ($edit) ? mysql2date( 'm', $post_date, false ) : gmdate( 'm', $time_adj );&nbsp;</div></li><li><div>  $aa = ($edit) ? mysql2date( 'Y', $post_date, false ) : gmdate( 'Y', $time_adj );&nbsp;</div></li><li><div>  $hh = ($edit) ? mysql2date( 'H', $post_date, false ) : gmdate( 'H', $time_adj );&nbsp;</div></li><li><div>  $mn = ($edit) ? mysql2date( 'i', $post_date, false ) : gmdate( 'i', $time_adj );&nbsp;</div></li><li><div>  $ss = ($edit) ? mysql2date( 's', $post_date, false ) : gmdate( 's', $time_adj );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $cur_jj = gmdate( 'd', $time_adj );&nbsp;</div></li><li><div>  $cur_mm = gmdate( 'm', $time_adj );&nbsp;</div></li><li><div>  $cur_aa = gmdate( 'Y', $time_adj );&nbsp;</div></li><li><div>  $cur_hh = gmdate( 'H', $time_adj );&nbsp;</div></li><li><div>  $cur_mn = gmdate( 'i', $time_adj );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $month = '&lt;label&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;' . __( 'Month' ) . '&lt;/span&gt;&lt;select ' . ( $multi ? '' : 'id=&quot;mm&quot; ' ) . 'name=&quot;mm&quot;' . $tab_index_attribute . &quot;&gt;\n&quot;;&nbsp;</div></li><li><div>  for ( $i = 1; $i &lt; 13; $i = $i +1 ) {&nbsp;</div></li><li><div>      $monthnum = zeroise($i, 2);&nbsp;</div></li><li><div>      $monthtext = $wp_locale-&gt;get_month_abbrev( $wp_locale-&gt;get_month( $i ) );&nbsp;</div></li><li><div>      $month .= &quot;\t\t\t&quot; . '&lt;option value=&quot;' . $monthnum . '&quot; data-text=&quot;' . $monthtext . '&quot; ' . selected( $monthnum, $mm, false ) . '&gt;';&nbsp;</div></li><li><div>      <span class="comment">/** translators: 1: month number (01, 02, etc.), 2: month abbreviation */</span>&nbsp;</div></li><li><div>      $month .= sprintf( __( '%1$s-%2$s' ), $monthnum, $monthtext ) . &quot;&lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $month .= '&lt;/select&gt;&lt;/label&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $day = '&lt;label&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;' . __( 'Day' ) . '&lt;/span&gt;&lt;input type=&quot;text&quot; ' . ( $multi ? '' : 'id=&quot;jj&quot; ' ) . 'name=&quot;jj&quot; value=&quot;' . $jj . '&quot; size=&quot;2&quot; maxlength=&quot;2&quot;' . $tab_index_attribute . ' autocomplete=&quot;off&quot; /&gt;&lt;/label&gt;';&nbsp;</div></li><li><div>  $year = '&lt;label&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;' . __( 'Year' ) . '&lt;/span&gt;&lt;input type=&quot;text&quot; ' . ( $multi ? '' : 'id=&quot;aa&quot; ' ) . 'name=&quot;aa&quot; value=&quot;' . $aa . '&quot; size=&quot;4&quot; maxlength=&quot;4&quot;' . $tab_index_attribute . ' autocomplete=&quot;off&quot; /&gt;&lt;/label&gt;';&nbsp;</div></li><li><div>  $hour = '&lt;label&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;' . __( 'Hour' ) . '&lt;/span&gt;&lt;input type=&quot;text&quot; ' . ( $multi ? '' : 'id=&quot;hh&quot; ' ) . 'name=&quot;hh&quot; value=&quot;' . $hh . '&quot; size=&quot;2&quot; maxlength=&quot;2&quot;' . $tab_index_attribute . ' autocomplete=&quot;off&quot; /&gt;&lt;/label&gt;';&nbsp;</div></li><li><div>  $minute = '&lt;label&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;' . __( 'Minute' ) . '&lt;/span&gt;&lt;input type=&quot;text&quot; ' . ( $multi ? '' : 'id=&quot;mn&quot; ' ) . 'name=&quot;mn&quot; value=&quot;' . $mn . '&quot; size=&quot;2&quot; maxlength=&quot;2&quot;' . $tab_index_attribute . ' autocomplete=&quot;off&quot; /&gt;&lt;/label&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;div class=&quot;timestamp-wrap&quot;&gt;';&nbsp;</div></li><li><div>  <span class="comment">/** translators: 1: month, 2: day, 3: year, 4: hour, 5: minute */</span>&nbsp;</div></li><li><div>  printf( __( '%1$s %2$s, %3$s @ %4$s:%5$s' ), $month, $day, $year, $hour, $minute );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;/div&gt;&lt;input type=&quot;hidden&quot; id=&quot;ss&quot; name=&quot;ss&quot; value=&quot;' . $ss . '&quot; /&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $multi ) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $map = array(&nbsp;</div></li><li><div>      'mm' =&gt; array( $mm, $cur_mm ), &nbsp;</div></li><li><div>      'jj' =&gt; array( $jj, $cur_jj ), &nbsp;</div></li><li><div>      'aa' =&gt; array( $aa, $cur_aa ), &nbsp;</div></li><li><div>      'hh' =&gt; array( $hh, $cur_hh ), &nbsp;</div></li><li><div>      'mn' =&gt; array( $mn, $cur_mn ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  foreach ( $map as $timeunit =&gt; $value ) {&nbsp;</div></li><li><div>      list( $unit, $curr ) = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo '&lt;input type=&quot;hidden&quot; id=&quot;hidden_' . $timeunit . '&quot; name=&quot;hidden_' . $timeunit . '&quot; value=&quot;' . $unit . '&quot; /&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>      $cur_timeunit = 'cur_' . $timeunit;&nbsp;</div></li><li><div>      echo '&lt;input type=&quot;hidden&quot; id=&quot;' . $cur_timeunit . '&quot; name=&quot;' . $cur_timeunit . '&quot; value=&quot;' . $curr . '&quot; /&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;p&gt;&nbsp;</div></li><li><div>&lt;a href=&quot;#edit_timestamp&quot; class=&quot;save-timestamp hide-if-no-js button&quot;&gt;&lt;?php _e('OK'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;a href=&quot;#edit_timestamp&quot; class=&quot;cancel-timestamp hide-if-no-js button-cancel&quot;&gt;&lt;?php _e('Cancel'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Print out option HTML elements for the page templates drop-down.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0 Added the `$post_type` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $default   Optional. The template file name. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $post_type Optional. Post type to get templates for. Default 'post'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function page_template_dropdown( $default = '', $post_type = 'page' ) {&nbsp;</div></li><li><div>  $templates = get_page_templates( null, $post_type );&nbsp;</div></li><li><div>  ksort( $templates );&nbsp;</div></li><li><div>  foreach ( array_keys( $templates ) as $template ) {&nbsp;</div></li><li><div>      $selected = selected( $default, $templates[ $template ], false );&nbsp;</div></li><li><div>      echo &quot;\n\t&lt;option value='&quot; . $templates[ $template ] . &quot;' $selected&gt;$template&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Print out option HTML elements for the page parents drop-down.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 `$post` argument was added.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb $wpdb WordPress database abstraction object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int         $default Optional. The default page ID to be pre-selected. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int         $parent  Optional. The parent page ID. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int         $level   Optional. Page depth level. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post    Post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return null|false Boolean False if page has no children, otherwise print out html elements</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function parent_dropdown( $default = 0, $parent = 0, $level = 0, $post = null ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>  $post = get_post( $post );&nbsp;</div></li><li><div>  $items = $wpdb-&gt;get_results( $wpdb-&gt;prepare(&quot;SELECT ID, post_parent, post_title FROM $wpdb-&gt;posts WHERE post_parent = %d AND post_type = 'page' ORDER BY menu_order&quot;, $parent) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $items ) {&nbsp;</div></li><li><div>      foreach ( $items as $item ) {&nbsp;</div></li><li><div>          <span class="comment">// A page cannot be its own parent.</span>&nbsp;</div></li><li><div>          if ( $post && $post-&gt;ID && $item-&gt;ID == $post-&gt;ID )&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $pad = str_repeat( '&nbsp;', $level * 3 );&nbsp;</div></li><li><div>          $selected = selected( $default, $item-&gt;ID, false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo &quot;\n\t&lt;option class='level-$level' value='$item-&gt;ID' $selected&gt;$pad &quot; . esc_html($item-&gt;post_title) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>          parent_dropdown( $default, $item-&gt;ID, $level +1 );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Print out option html elements for role selectors.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $selected Slug for the role that should be already selected.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_dropdown_roles( $selected = '' ) {&nbsp;</div></li><li><div>  $p = '';&nbsp;</div></li><li><div>  $r = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $editable_roles = array_reverse( get_editable_roles() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $editable_roles as $role =&gt; $details ) {&nbsp;</div></li><li><div>      $name = translate_user_role($details['name'] );&nbsp;</div></li><li><div>      if ( $selected == $role ) <span class="comment">// preselect specified role</span>&nbsp;</div></li><li><div>          $p = &quot;\n\t&lt;option selected='selected' value='&quot; . esc_attr($role) . &quot;'&gt;$name&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $r .= &quot;\n\t&lt;option value='&quot; . esc_attr($role) . &quot;'&gt;$name&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo $p . $r;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the form used by the importers to accept the data to be imported</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $action The action attribute for the form.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_import_upload_form( $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the maximum allowed upload size for import files.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see wp_max_upload_size()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $max_upload_size Allowed upload size. Default 1 MB.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $bytes = apply_filters( 'import_upload_size_limit', wp_max_upload_size() );&nbsp;</div></li><li><div>  $size = size_format( $bytes );&nbsp;</div></li><li><div>  $upload_dir = wp_upload_dir();&nbsp;</div></li><li><div>  if ( ! empty( $upload_dir['error'] ) ) :&nbsp;</div></li><li><div>      ?&gt;&lt;div class=&quot;error&quot;&gt;&lt;p&gt;&lt;?php _e('Before you can upload your import file, you will need to fix the following error:'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&lt;strong&gt;&lt;?php echo $upload_dir['error']; ?&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;&lt;?php&nbsp;</div></li><li><div>  else :&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;form enctype=&quot;multipart/form-data&quot; id=&quot;import-upload-form&quot; method=&quot;post&quot; class=&quot;wp-upload-form&quot; action=&quot;&lt;?php echo esc_url( wp_nonce_url( $action, 'import-upload' ) ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>&lt;p&gt;&nbsp;</div></li><li><div>&lt;label for=&quot;upload&quot;&gt;&lt;?php _e( 'Choose a file from your computer:' ); ?&gt;&lt;/label&gt; (&lt;?php printf( __('Maximum size: %s' ), $size ); ?&gt;)&nbsp;</div></li><li><div>&lt;input type=&quot;file&quot; id=&quot;upload&quot; name=&quot;import&quot; size=&quot;25&quot; /&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;save&quot; /&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;max_file_size&quot; value=&quot;&lt;?php echo $bytes; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php submit_button( __('Upload file and import'), 'primary' ); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  endif;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Adds a meta box to one or more screens.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 The `$screen` parameter now accepts an array of screen IDs.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $wp_meta_boxes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $id            Meta box ID (used in the 'id' attribute for the meta box).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $title         Title of the meta box.</span>&nbsp;</div></li><li><div><span class="comment"> * @param callable               $callback      Function that fills the box with the desired content.</span>&nbsp;</div></li><li><div><span class="comment"> *                                              The function should echo its output.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|WP_Screen $screen        Optional. The screen or screens on which to show the box</span>&nbsp;</div></li><li><div><span class="comment"> *                                              (such as a post type, 'link', or 'comment'). Accepts a single</span>&nbsp;</div></li><li><div><span class="comment"> *                                              screen ID, WP_Screen object, or array of screen IDs. Default</span>&nbsp;</div></li><li><div><span class="comment"> *                                              is the current screen.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $context       Optional. The context within the screen where the boxes</span>&nbsp;</div></li><li><div><span class="comment"> *                                              should display. Available contexts vary from screen to</span>&nbsp;</div></li><li><div><span class="comment"> *                                              screen. Post edit screen contexts include 'normal', 'side', </span>&nbsp;</div></li><li><div><span class="comment"> *                                              and 'advanced'. Comments screen contexts include 'normal'</span>&nbsp;</div></li><li><div><span class="comment"> *                                              and 'side'. Menus meta boxes (accordion sections) all use</span>&nbsp;</div></li><li><div><span class="comment"> *                                              the 'side' context. Global default is 'advanced'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $priority      Optional. The priority within the context where the boxes</span>&nbsp;</div></li><li><div><span class="comment"> *                                              should show ('high', 'low'). Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array                  $callback_args Optional. Data that should be set as the $args property</span>&nbsp;</div></li><li><div><span class="comment"> *                                              of the box array (which is the second parameter passed</span>&nbsp;</div></li><li><div><span class="comment"> *                                              to your callback). Default null.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function add_meta_box( $id, $title, $callback, $screen = null, $context = 'advanced', $priority = 'default', $callback_args = null ) {&nbsp;</div></li><li><div>  global $wp_meta_boxes;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $screen ) ) {&nbsp;</div></li><li><div>      $screen = get_current_screen();&nbsp;</div></li><li><div>  } elseif ( is_string( $screen ) ) {&nbsp;</div></li><li><div>      $screen = convert_to_screen( $screen );&nbsp;</div></li><li><div>  } elseif ( is_array( $screen ) ) {&nbsp;</div></li><li><div>      foreach ( $screen as $single_screen ) {&nbsp;</div></li><li><div>          add_meta_box( $id, $title, $callback, $single_screen, $context, $priority, $callback_args );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $screen-&gt;id ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $page = $screen-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes) )&nbsp;</div></li><li><div>      $wp_meta_boxes = array();&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes[$page]) )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page] = array();&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes[$page][$context]) )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page][$context] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( array_keys($wp_meta_boxes[$page]) as $a_context ) {&nbsp;</div></li><li><div>      foreach ( array('high', 'core', 'default', 'low') as $a_priority ) {&nbsp;</div></li><li><div>          if ( !isset($wp_meta_boxes[$page][$a_context][$a_priority][$id]) )&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If a core box was previously added or removed by a plugin, don't add.</span>&nbsp;</div></li><li><div>          if ( 'core' == $priority ) {&nbsp;</div></li><li><div>              <span class="comment">// If core box previously deleted, don't add</span>&nbsp;</div></li><li><div>              if ( false === $wp_meta_boxes[$page][$a_context][$a_priority][$id] )&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * If box was added with default priority, give it core priority to</span>&nbsp;</div></li><li><div><span class="comment">               * maintain sort order.</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              if ( 'default' == $a_priority ) {&nbsp;</div></li><li><div>                  $wp_meta_boxes[$page][$a_context]['core'][$id] = $wp_meta_boxes[$page][$a_context]['default'][$id];&nbsp;</div></li><li><div>                  unset($wp_meta_boxes[$page][$a_context]['default'][$id]);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// If no priority given and id already present, use existing priority.</span>&nbsp;</div></li><li><div>          if ( empty($priority) ) {&nbsp;</div></li><li><div>              $priority = $a_priority;&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Else, if we're adding to the sorted priority, we don't know the title</span>&nbsp;</div></li><li><div><span class="comment">           * or callback. Grab them from the previously added context/priority.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          } elseif ( 'sorted' == $priority ) {&nbsp;</div></li><li><div>              $title = $wp_meta_boxes[$page][$a_context][$a_priority][$id]['title'];&nbsp;</div></li><li><div>              $callback = $wp_meta_boxes[$page][$a_context][$a_priority][$id]['callback'];&nbsp;</div></li><li><div>              $callback_args = $wp_meta_boxes[$page][$a_context][$a_priority][$id]['args'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// An id can be in only one priority and one context.</span>&nbsp;</div></li><li><div>          if ( $priority != $a_priority || $context != $a_context )&nbsp;</div></li><li><div>              unset($wp_meta_boxes[$page][$a_context][$a_priority][$id]);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($priority) )&nbsp;</div></li><li><div>      $priority = 'low';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes[$page][$context][$priority]) )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page][$context][$priority] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_meta_boxes[$page][$context][$priority][$id] = array('id' =&gt; $id, 'title' =&gt; $title, 'callback' =&gt; $callback, 'args' =&gt; $callback_args);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Meta-Box template function</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $wp_meta_boxes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @staticvar bool $already_sorted</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|WP_Screen $screen  Screen identifier</span>&nbsp;</div></li><li><div><span class="comment"> * @param string           $context box context</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed            $object  gets passed to the box callback function as first parameter</span>&nbsp;</div></li><li><div><span class="comment"> * @return int number of meta_boxes</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_meta_boxes( $screen, $context, $object ) {&nbsp;</div></li><li><div>  global $wp_meta_boxes;&nbsp;</div></li><li><div>  static $already_sorted = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $screen ) )&nbsp;</div></li><li><div>      $screen = get_current_screen();&nbsp;</div></li><li><div>  elseif ( is_string( $screen ) )&nbsp;</div></li><li><div>      $screen = convert_to_screen( $screen );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $page = $screen-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $hidden = get_hidden_meta_boxes( $screen );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  printf('&lt;div id=&quot;%s-sortables&quot; class=&quot;meta-box-sortables&quot;&gt;', htmlspecialchars($context));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Grab the ones the user has manually sorted. Pull them out of their previous context/priority and into the one the user chose</span>&nbsp;</div></li><li><div>  if ( ! $already_sorted && $sorted = get_user_option( &quot;meta-box-order_$page&quot; ) ) {&nbsp;</div></li><li><div>      foreach ( $sorted as $box_context =&gt; $ids ) {&nbsp;</div></li><li><div>          foreach ( explode( ', ', $ids ) as $id ) {&nbsp;</div></li><li><div>              if ( $id && 'dashboard_browser_nag' !== $id ) {&nbsp;</div></li><li><div>                  add_meta_box( $id, null, null, $screen, $box_context, 'sorted' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $already_sorted = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $i = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $wp_meta_boxes[ $page ][ $context ] ) ) {&nbsp;</div></li><li><div>      foreach ( array( 'high', 'sorted', 'core', 'default', 'low' ) as $priority ) {&nbsp;</div></li><li><div>          if ( isset( $wp_meta_boxes[ $page ][ $context ][ $priority ]) ) {&nbsp;</div></li><li><div>              foreach ( (array) $wp_meta_boxes[ $page ][ $context ][ $priority ] as $box ) {&nbsp;</div></li><li><div>                  if ( false == $box || ! $box['title'] )&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  $i++;&nbsp;</div></li><li><div>                  $hidden_class = in_array($box['id'], $hidden) ? ' hide-if-js' : '';&nbsp;</div></li><li><div>                  echo '&lt;div id=&quot;' . $box['id'] . '&quot; class=&quot;postbox ' . postbox_classes($box['id'], $page) . $hidden_class . '&quot; ' . '&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>                  if ( 'dashboard_browser_nag' != $box['id'] ) {&nbsp;</div></li><li><div>                      $widget_title = $box[ 'title' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( is_array( $box[ 'args' ] ) && isset( $box[ 'args' ][ '__widget_basename' ] ) ) {&nbsp;</div></li><li><div>                          $widget_title = $box[ 'args' ][ '__widget_basename' ];&nbsp;</div></li><li><div>                          <span class="comment">// Do not pass this parameter to the user callback function.</span>&nbsp;</div></li><li><div>                          unset( $box[ 'args' ][ '__widget_basename' ] );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      echo '&lt;button type=&quot;button&quot; class=&quot;handlediv button-link&quot; aria-expanded=&quot;true&quot;&gt;';&nbsp;</div></li><li><div>                      echo '&lt;span class=&quot;screen-reader-text&quot;&gt;' . sprintf( __( 'Toggle panel: %s' ), $widget_title ) . '&lt;/span&gt;';&nbsp;</div></li><li><div>                      echo '&lt;span class=&quot;toggle-indicator&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>                      echo '&lt;/button&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  echo &quot;&lt;h2 class='hndle'&gt;&lt;span&gt;{$box['title']}&lt;/span&gt;&lt;/h2&gt;\n&quot;;&nbsp;</div></li><li><div>                  echo '&lt;div class=&quot;inside&quot;&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>                  call_user_func($box['callback'], $object, $box);&nbsp;</div></li><li><div>                  echo &quot;&lt;/div&gt;\n&quot;;&nbsp;</div></li><li><div>                  echo &quot;&lt;/div&gt;\n&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $i;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Removes a meta box from one or more screens.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 The `$screen` parameter now accepts an array of screen IDs.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $wp_meta_boxes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $id      Meta box ID (used in the 'id' attribute for the meta box).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|WP_Screen $screen  The screen or screens on which the meta box is shown (such as a</span>&nbsp;</div></li><li><div><span class="comment"> *                                        post type, 'link', or 'comment'). Accepts a single screen ID, </span>&nbsp;</div></li><li><div><span class="comment"> *                                        WP_Screen object, or array of screen IDs.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string                 $context The context within the screen where the box is set to display.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Contexts vary from screen to screen. Post edit screen contexts</span>&nbsp;</div></li><li><div><span class="comment"> *                                        include 'normal', 'side', and 'advanced'. Comments screen contexts</span>&nbsp;</div></li><li><div><span class="comment"> *                                        include 'normal' and 'side'. Menus meta boxes (accordion sections)</span>&nbsp;</div></li><li><div><span class="comment"> *                                        all use the 'side' context.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function remove_meta_box( $id, $screen, $context ) {&nbsp;</div></li><li><div>  global $wp_meta_boxes;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $screen ) ) {&nbsp;</div></li><li><div>      $screen = get_current_screen();&nbsp;</div></li><li><div>  } elseif ( is_string( $screen ) ) {&nbsp;</div></li><li><div>      $screen = convert_to_screen( $screen );&nbsp;</div></li><li><div>  } elseif ( is_array( $screen ) ) {&nbsp;</div></li><li><div>      foreach ( $screen as $single_screen ) {&nbsp;</div></li><li><div>          remove_meta_box( $id, $single_screen, $context );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $screen-&gt;id ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $page = $screen-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes) )&nbsp;</div></li><li><div>      $wp_meta_boxes = array();&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes[$page]) )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page] = array();&nbsp;</div></li><li><div>  if ( !isset($wp_meta_boxes[$page][$context]) )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page][$context] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( array('high', 'core', 'default', 'low') as $priority )&nbsp;</div></li><li><div>      $wp_meta_boxes[$page][$context][$priority][$id] = false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Meta Box Accordion Template Function</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Largely made up of abstracted code from do_meta_boxes(), this</span>&nbsp;</div></li><li><div><span class="comment"> * function serves to build meta boxes as list items for display as</span>&nbsp;</div></li><li><div><span class="comment"> * a collapsible accordion.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @uses global $wp_meta_boxes Used to retrieve registered meta boxes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|object $screen  The screen identifier.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string        $context The meta box context.</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed         $object  gets passed to the section callback function as first parameter.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int number of meta boxes as accordion sections.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_accordion_sections( $screen, $context, $object ) {&nbsp;</div></li><li><div>  global $wp_meta_boxes;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_enqueue_script( 'accordion' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $screen ) )&nbsp;</div></li><li><div>      $screen = get_current_screen();&nbsp;</div></li><li><div>  elseif ( is_string( $screen ) )&nbsp;</div></li><li><div>      $screen = convert_to_screen( $screen );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $page = $screen-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $hidden = get_hidden_meta_boxes( $screen );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;side-sortables&quot; class=&quot;accordion-container&quot;&gt;&nbsp;</div></li><li><div>      &lt;ul class=&quot;outer-border&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  $i = 0;&nbsp;</div></li><li><div>  $first_open = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $wp_meta_boxes[ $page ][ $context ] ) ) {&nbsp;</div></li><li><div>      foreach ( array( 'high', 'core', 'default', 'low' ) as $priority ) {&nbsp;</div></li><li><div>          if ( isset( $wp_meta_boxes[ $page ][ $context ][ $priority ] ) ) {&nbsp;</div></li><li><div>              foreach ( $wp_meta_boxes[ $page ][ $context ][ $priority ] as $box ) {&nbsp;</div></li><li><div>                  if ( false == $box || ! $box['title'] )&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  $i++;&nbsp;</div></li><li><div>                  $hidden_class = in_array( $box['id'], $hidden ) ? 'hide-if-js' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $open_class = '';&nbsp;</div></li><li><div>                  if ( ! $first_open && empty( $hidden_class ) ) {&nbsp;</div></li><li><div>                      $first_open = true;&nbsp;</div></li><li><div>                      $open_class = 'open';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>                  &lt;li class=&quot;control-section accordion-section &lt;?php echo $hidden_class; ?&gt; &lt;?php echo $open_class; ?&gt; &lt;?php echo esc_attr( $box['id'] ); ?&gt;&quot; id=&quot;&lt;?php echo esc_attr( $box['id'] ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;h3 class=&quot;accordion-section-title hndle&quot; tabindex=&quot;0&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php echo esc_html( $box['title'] ); ?&gt;&nbsp;</div></li><li><div>                          &lt;span class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Press return or enter to open this section' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;/h3&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;accordion-section-content &lt;?php postbox_classes( $box['id'], $page ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php call_user_func( $box['callback'], $object, $box ); ?&gt;&nbsp;</div></li><li><div>                          &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&lt;!-- .accordion-section-content --&gt;&nbsp;</div></li><li><div>                  &lt;/li&gt;&lt;!-- .accordion-section --&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>      &lt;/ul&gt;&lt;!-- .outer-border --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .accordion-container --&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  return $i;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a new section to a settings page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Use this to define new settings sections for an admin page.</span>&nbsp;</div></li><li><div><span class="comment"> * Show settings sections in your admin page callback function with do_settings_sections().</span>&nbsp;</div></li><li><div><span class="comment"> * Add settings fields to your section with add_settings_field()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The $callback argument should be the name of a function that echoes out any</span>&nbsp;</div></li><li><div><span class="comment"> * content you want to show at the top of the settings section before the actual</span>&nbsp;</div></li><li><div><span class="comment"> * fields. It can output nothing if you want.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global $wp_settings_sections Storage array of all settings sections added to admin pages</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $id       Slug-name to identify the section. Used in the 'id' attribute of tags.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $title    Formatted title of the section. Shown as the heading for the section.</span>&nbsp;</div></li><li><div><span class="comment"> * @param callable $callback Function that echos out any content at the top of the section (between heading and fields).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $page     The slug-name of the settings page on which to show the section. Built-in pages include</span>&nbsp;</div></li><li><div><span class="comment"> *                           'general', 'reading', 'writing', 'discussion', 'media', etc. Create your own using</span>&nbsp;</div></li><li><div><span class="comment"> *                           add_options_page();</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function add_settings_section($id, $title, $callback, $page) {&nbsp;</div></li><li><div>  global $wp_settings_sections;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'misc' == $page ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '3.0.0', sprintf( __( 'The &quot;%s&quot; options group has been removed. Use another settings group.' ), 'misc' ) );&nbsp;</div></li><li><div>      $page = 'general';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'privacy' == $page ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '3.5.0', sprintf( __( 'The &quot;%s&quot; options group has been removed. Use another settings group.' ), 'privacy' ) );&nbsp;</div></li><li><div>      $page = 'reading';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_settings_sections[$page][$id] = array('id' =&gt; $id, 'title' =&gt; $title, 'callback' =&gt; $callback);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a new field to a section of a settings page</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Use this to define a settings field that will show</span>&nbsp;</div></li><li><div><span class="comment"> * as part of a settings section inside a settings page. The fields are shown using</span>&nbsp;</div></li><li><div><span class="comment"> * do_settings_fields() in do_settings-sections()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The $callback argument should be the name of a function that echoes out the</span>&nbsp;</div></li><li><div><span class="comment"> * html input tags for this setting field. Use get_option() to retrieve existing</span>&nbsp;</div></li><li><div><span class="comment"> * values to show.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.2.0 The `$class` argument was added.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global $wp_settings_fields Storage array of settings fields and info about their pages/sections</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $id       Slug-name to identify the field. Used in the 'id' attribute of tags.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $title    Formatted title of the field. Shown as the label for the field</span>&nbsp;</div></li><li><div><span class="comment"> *                           during output.</span>&nbsp;</div></li><li><div><span class="comment"> * @param callable $callback Function that fills the field with the desired form inputs. The</span>&nbsp;</div></li><li><div><span class="comment"> *                           function should echo its output.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $page     The slug-name of the settings page on which to show the section</span>&nbsp;</div></li><li><div><span class="comment"> *                           (general, reading, writing, ...).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $section  Optional. The slug-name of the section of the settings page</span>&nbsp;</div></li><li><div><span class="comment"> *                           in which to show the box. Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array    $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Extra arguments used when outputting the field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $label_for When supplied, the setting title will be wrapped</span>&nbsp;</div></li><li><div><span class="comment"> *                             in a `&lt;label&gt;` element, its `for` attribute populated</span>&nbsp;</div></li><li><div><span class="comment"> *                             with this value.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $class     CSS Class to be added to the `&lt;tr&gt;` element when the</span>&nbsp;</div></li><li><div><span class="comment"> *                             field is output.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function add_settings_field($id, $title, $callback, $page, $section = 'default', $args = array()) {&nbsp;</div></li><li><div>  global $wp_settings_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'misc' == $page ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '3.0.0', __( 'The miscellaneous options group has been removed. Use another settings group.' ) );&nbsp;</div></li><li><div>      $page = 'general';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'privacy' == $page ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '3.5.0', __( 'The privacy options group has been removed. Use another settings group.' ) );&nbsp;</div></li><li><div>      $page = 'reading';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_settings_fields[$page][$section][$id] = array('id' =&gt; $id, 'title' =&gt; $title, 'callback' =&gt; $callback, 'args' =&gt; $args);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Prints out all settings sections added to a particular settings page</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Use this in a settings page callback function</span>&nbsp;</div></li><li><div><span class="comment"> * to output all the sections and fields that were added to that $page with</span>&nbsp;</div></li><li><div><span class="comment"> * add_settings_section() and add_settings_field()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global $wp_settings_sections Storage array of all settings sections added to admin pages</span>&nbsp;</div></li><li><div><span class="comment"> * @global $wp_settings_fields Storage array of settings fields and info about their pages/sections</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $page The slug name of the page whose settings sections you want to output</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_settings_sections( $page ) {&nbsp;</div></li><li><div>  global $wp_settings_sections, $wp_settings_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $wp_settings_sections[$page] ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( (array) $wp_settings_sections[$page] as $section ) {&nbsp;</div></li><li><div>      if ( $section['title'] )&nbsp;</div></li><li><div>          echo &quot;&lt;h2&gt;{$section['title']}&lt;/h2&gt;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $section['callback'] )&nbsp;</div></li><li><div>          call_user_func( $section['callback'], $section );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $wp_settings_fields ) || !isset( $wp_settings_fields[$page] ) || !isset( $wp_settings_fields[$page][$section['id']] ) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      echo '&lt;table class=&quot;form-table&quot;&gt;';&nbsp;</div></li><li><div>      do_settings_fields( $page, $section['id'] );&nbsp;</div></li><li><div>      echo '&lt;/table&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Print out the settings fields for a particular settings section</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Use this in a settings page to output</span>&nbsp;</div></li><li><div><span class="comment"> * a specific section. Should normally be called by do_settings_sections()</span>&nbsp;</div></li><li><div><span class="comment"> * rather than directly.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global $wp_settings_fields Storage array of settings fields and their pages/sections</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $page Slug title of the admin page who's settings fields you want to show.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $section Slug title of the settings section who's fields you want to show.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_settings_fields($page, $section) {&nbsp;</div></li><li><div>  global $wp_settings_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $wp_settings_fields[$page][$section] ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( (array) $wp_settings_fields[$page][$section] as $field ) {&nbsp;</div></li><li><div>      $class = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $field['args']['class'] ) ) {&nbsp;</div></li><li><div>          $class = ' class=&quot;' . esc_attr( $field['args']['class'] ) . '&quot;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo &quot;&lt;tr{$class}&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $field['args']['label_for'] ) ) {&nbsp;</div></li><li><div>          echo '&lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;' . esc_attr( $field['args']['label_for'] ) . '&quot;&gt;' . $field['title'] . '&lt;/label&gt;&lt;/th&gt;';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          echo '&lt;th scope=&quot;row&quot;&gt;' . $field['title'] . '&lt;/th&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo '&lt;td&gt;';&nbsp;</div></li><li><div>      call_user_func($field['callback'], $field['args']);&nbsp;</div></li><li><div>      echo '&lt;/td&gt;';&nbsp;</div></li><li><div>      echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Register a settings error to be displayed to the user</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Use this to show messages to users about settings validation</span>&nbsp;</div></li><li><div><span class="comment"> * problems, missing settings or anything else.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Settings errors should be added inside the $sanitize_callback function defined in</span>&nbsp;</div></li><li><div><span class="comment"> * register_setting() for a given setting to give feedback about the submission.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * By default messages will show immediately after the submission that generated the error.</span>&nbsp;</div></li><li><div><span class="comment"> * Additional calls to settings_errors() can be used to show errors even when the settings</span>&nbsp;</div></li><li><div><span class="comment"> * page is first accessed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $wp_settings_errors Storage array of errors registered during this pageload</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $setting Slug title of the setting to which this error applies</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $code    Slug-name to identify the error. Used as part of 'id' attribute in HTML output.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $message The formatted message text to display to the user (will be shown inside styled</span>&nbsp;</div></li><li><div><span class="comment"> *                        `&lt;div&gt;` and `&lt;p&gt;` tags).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type    Optional. Message type, controls HTML class. Accepts 'error' or 'updated'.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'error'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function add_settings_error( $setting, $code, $message, $type = 'error' ) {&nbsp;</div></li><li><div>  global $wp_settings_errors;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_settings_errors[] = array(&nbsp;</div></li><li><div>      'setting' =&gt; $setting, &nbsp;</div></li><li><div>      'code' =&gt; $code, &nbsp;</div></li><li><div>      'message' =&gt; $message, &nbsp;</div></li><li><div>      'type' =&gt; $type&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fetch settings errors registered by add_settings_error()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Checks the $wp_settings_errors array for any errors declared during the current</span>&nbsp;</div></li><li><div><span class="comment"> * pageload and returns them.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If changes were just submitted ($_GET['settings-updated']) and settings errors were saved</span>&nbsp;</div></li><li><div><span class="comment"> * to the 'settings_errors' transient then those errors will be returned instead. This</span>&nbsp;</div></li><li><div><span class="comment"> * is used to pass errors back across pageloads.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Use the $sanitize argument to manually re-sanitize the option before returning errors.</span>&nbsp;</div></li><li><div><span class="comment"> * This is useful if you have errors or notices you want to show even when the user</span>&nbsp;</div></li><li><div><span class="comment"> * hasn't submitted data (i.e. when they first load an options page, or in the {@see 'admin_notices'}</span>&nbsp;</div></li><li><div><span class="comment"> * action hook).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $wp_settings_errors Storage array of errors registered during this pageload</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $setting Optional slug title of a specific setting who's errors you want.</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $sanitize Whether to re-sanitize the setting value before returning errors.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Array of settings errors</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_settings_errors( $setting = '', $sanitize = false ) {&nbsp;</div></li><li><div>  global $wp_settings_errors;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * If $sanitize is true, manually re-run the sanitization for this option</span>&nbsp;</div></li><li><div><span class="comment">   * This allows the $sanitize_callback from register_setting() to run, adding</span>&nbsp;</div></li><li><div><span class="comment">   * any settings errors you want to show by default.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( $sanitize )&nbsp;</div></li><li><div>      sanitize_option( $setting, get_option( $setting ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If settings were passed back from options.php then use them.</span>&nbsp;</div></li><li><div>  if ( isset( $_GET['settings-updated'] ) && $_GET['settings-updated'] && get_transient( 'settings_errors' ) ) {&nbsp;</div></li><li><div>      $wp_settings_errors = array_merge( (array) $wp_settings_errors, get_transient( 'settings_errors' ) );&nbsp;</div></li><li><div>      delete_transient( 'settings_errors' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check global in case errors have been added on this pageload.</span>&nbsp;</div></li><li><div>  if ( ! count( $wp_settings_errors ) )&nbsp;</div></li><li><div>      return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Filter the results to those of a specific setting if one was set.</span>&nbsp;</div></li><li><div>  if ( $setting ) {&nbsp;</div></li><li><div>      $setting_errors = array();&nbsp;</div></li><li><div>      foreach ( (array) $wp_settings_errors as $key =&gt; $details ) {&nbsp;</div></li><li><div>          if ( $setting == $details['setting'] )&nbsp;</div></li><li><div>              $setting_errors[] = $wp_settings_errors[$key];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return $setting_errors;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_settings_errors;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display settings errors registered by add_settings_error().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Part of the Settings API. Outputs a div for each error retrieved by</span>&nbsp;</div></li><li><div><span class="comment"> * get_settings_errors().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is called automatically after a settings page based on the</span>&nbsp;</div></li><li><div><span class="comment"> * Settings API is submitted. Errors should be added during the validation</span>&nbsp;</div></li><li><div><span class="comment"> * callback function for a setting defined in register_setting().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The $sanitize option is passed into get_settings_errors() and will</span>&nbsp;</div></li><li><div><span class="comment"> * re-run the setting sanitization</span>&nbsp;</div></li><li><div><span class="comment"> * on its current value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The $hide_on_update option will cause errors to only show when the settings</span>&nbsp;</div></li><li><div><span class="comment"> * page is first loaded. if the user has already saved new values it will be</span>&nbsp;</div></li><li><div><span class="comment"> * hidden to avoid repeating messages already shown in the default error</span>&nbsp;</div></li><li><div><span class="comment"> * reporting after submission. This is useful to show general errors like</span>&nbsp;</div></li><li><div><span class="comment"> * missing settings when the user arrives at the settings page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $setting        Optional slug title of a specific setting who's errors you want.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $sanitize       Whether to re-sanitize the setting value before returning errors.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $hide_on_update If set to true errors will not be shown if the settings page has</span>&nbsp;</div></li><li><div><span class="comment"> *                               already been submitted.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function settings_errors( $setting = '', $sanitize = false, $hide_on_update = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $hide_on_update && ! empty( $_GET['settings-updated'] ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $settings_errors = get_settings_errors( $setting, $sanitize );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $settings_errors ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = '';&nbsp;</div></li><li><div>  foreach ( $settings_errors as $key =&gt; $details ) {&nbsp;</div></li><li><div>      $css_id = 'setting-error-' . $details['code'];&nbsp;</div></li><li><div>      $css_class = $details['type'] . ' settings-error notice is-dismissible';&nbsp;</div></li><li><div>      $output .= &quot;&lt;div id='$css_id' class='$css_class'&gt; \n&quot;;&nbsp;</div></li><li><div>      $output .= &quot;&lt;p&gt;&lt;strong&gt;{$details['message']}&lt;/strong&gt;&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>      $output .= &quot;&lt;/div&gt; \n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo $output;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the modal window used for attaching media to posts or pages in the media-listing screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $found_action</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function find_posts_div($found_action = '') {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;find-posts&quot; class=&quot;find-box&quot; style=&quot;display: none;&quot;&gt;&nbsp;</div></li><li><div>      &lt;div id=&quot;find-posts-head&quot; class=&quot;find-box-head&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php _e( 'Attach to existing content' ); ?&gt;&nbsp;</div></li><li><div>          &lt;button type=&quot;button&quot; id=&quot;find-posts-close&quot;&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Close media attachment panel' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;find-box-inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;find-box-search&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php if ( $found_action ) { ?&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;found_action&quot; value=&quot;&lt;?php echo esc_attr($found_action); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;?php } ?&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;hidden&quot; name=&quot;affected&quot; id=&quot;affected&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;?php wp_nonce_field( 'find-posts', '_ajax_nonce', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;label class=&quot;screen-reader-text&quot; for=&quot;find-posts-input&quot;&gt;&lt;?php _e( 'Search' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;text&quot; id=&quot;find-posts-input&quot; name=&quot;ps&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;button&quot; id=&quot;find-posts-search&quot; value=&quot;&lt;?php esc_attr_e( 'Search' ); ?&gt;&quot; class=&quot;button&quot; /&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div id=&quot;find-posts-response&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;find-box-buttons&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php submit_button( __( 'Select' ), 'primary alignright', 'find-posts-submit', false ); ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the post password.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The password is passed through esc_attr() to ensure that it is safe for placing in an html attribute.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function the_post_password() {&nbsp;</div></li><li><div>  $post = get_post();&nbsp;</div></li><li><div>  if ( isset( $post-&gt;post_password ) )&nbsp;</div></li><li><div>      echo esc_attr( $post-&gt;post_password );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the post title.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The post title is fetched and if it is blank then a default string is</span>&nbsp;</div></li><li><div><span class="comment"> * returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post Optional. Post ID or WP_Post object. Default is global $post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The post title if set.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _draft_or_post_title( $post = 0 ) {&nbsp;</div></li><li><div>  $title = get_the_title( $post );&nbsp;</div></li><li><div>  if ( empty( $title ) )&nbsp;</div></li><li><div>      $title = __( '(no title)' );&nbsp;</div></li><li><div>  return esc_html( $title );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the search query.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * A simple wrapper to display the &quot;s&quot; parameter in a `GET` URI. This function</span>&nbsp;</div></li><li><div><span class="comment"> * should only be used when the_search_query() cannot.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _admin_search_query() {&nbsp;</div></li><li><div>  echo isset($_REQUEST['s']) ? esc_attr( wp_unslash( $_REQUEST['s'] ) ) : '';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generic Iframe header for use with Thickbox</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string    $hook_suffix</span>&nbsp;</div></li><li><div><span class="comment"> * @global string    $admin_body_class</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale $wp_locale</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $title      Optional. Title of the Iframe page. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $deprecated Not used.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function iframe_header( $title = '', $deprecated = false ) {&nbsp;</div></li><li><div>  show_admin_bar( false );&nbsp;</div></li><li><div>  global $hook_suffix, $admin_body_class, $wp_locale;&nbsp;</div></li><li><div>  $admin_body_class = preg_replace('/[^a-z0-9_-]+/i', '-', $hook_suffix);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $current_screen = get_current_screen();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  @header( 'Content-Type: ' . get_option( 'html_type' ) . '; charset=' . get_option( 'blog_charset' ) );&nbsp;</div></li><li><div>  _wp_admin_html_begin();&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;title&gt;&lt;?php bloginfo('name') ?&gt; &rsaquo; &lt;?php echo $title ?&gt; &#8212; &lt;?php _e('WordPress'); ?&gt;&lt;/title&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>wp_enqueue_style( 'colors' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>addLoadEvent = function(func) {if(typeof jQuery!=&quot;undefined&quot;)jQuery(document).ready(func);else if(typeof wpOnload!='function') {wpOnload=func;}else{var oldonload=wpOnload;wpOnload=function() {oldonload();func();}}};&nbsp;</div></li><li><div>function tb_close() {var win=window.dialogArguments||opener||parent||top;win.tb_remove();}&nbsp;</div></li><li><div>var ajaxurl = '&lt;?php echo admin_url( 'admin-ajax.php', 'relative' ); ?&gt;', &nbsp;</div></li><li><div>  pagenow = '&lt;?php echo $current_screen-&gt;id; ?&gt;', &nbsp;</div></li><li><div>  typenow = '&lt;?php echo $current_screen-&gt;post_type; ?&gt;', &nbsp;</div></li><li><div>  adminpage = '&lt;?php echo $admin_body_class; ?&gt;', &nbsp;</div></li><li><div>  thousandsSeparator = '&lt;?php echo addslashes( $wp_locale-&gt;number_format['thousands_sep'] ); ?&gt;', &nbsp;</div></li><li><div>  decimalPoint = '&lt;?php echo addslashes( $wp_locale-&gt;number_format['decimal_point'] ); ?&gt;', &nbsp;</div></li><li><div>  isRtl = &lt;?php echo (int) is_rtl(); ?&gt;;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( 'admin_enqueue_scripts', $hook_suffix );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( &quot;admin_print_styles-$hook_suffix&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( 'admin_print_styles' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( &quot;admin_print_scripts-$hook_suffix&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( 'admin_print_scripts' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( &quot;admin_head-$hook_suffix&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-header.php */</span></span></span></span></span></span></span>&nbsp;</div></li><li><div>do_action( 'admin_head' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$admin_body_class .= ' locale-' . sanitize_html_class( strtolower( str_replace( '_', '-', get_user_locale() ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_rtl() )&nbsp;</div></li><li><div>  $admin_body_class .= ' rtl';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/head&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/** This filter is documented in wp-admin/admin-header.php */</span>&nbsp;</div></li><li><div>$admin_body_classes = apply_filters( 'admin_body_class', '' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;body&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $body_id</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( isset($GLOBALS['body_id']) ) echo ' id=&quot;' . $GLOBALS['body_id'] . '&quot;'; ?&gt; class=&quot;wp-admin wp-core-ui no-js iframe &lt;?php echo $admin_body_classes . ' ' . $admin_body_class; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>(function() {&nbsp;</div></li><li><div>var c = document.body.className;&nbsp;</div></li><li><div>c = c.replace(/no-js/, 'js');&nbsp;</div></li><li><div>document.body.className = c;&nbsp;</div></li><li><div>})();&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generic Iframe footer for use with Thickbox</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function iframe_footer() {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * We're going to hide any footer output on iFrame pages, </span>&nbsp;</div></li><li><div><span class="comment">   * but run the hooks anyway since they output JavaScript</span>&nbsp;</div></li><li><div><span class="comment">   * or other needed content.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * @global string $hook_suffix</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  global $hook_suffix;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;hidden&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-footer.php */</span></span></span>&nbsp;</div></li><li><div>  do_action( 'admin_footer', $hook_suffix );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-footer.php */</span></span></span>&nbsp;</div></li><li><div>  do_action( &quot;admin_print_footer_scripts-$hook_suffix&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">/** This action is documented in wp-admin/admin-footer.php */</span></span></span>&nbsp;</div></li><li><div>  do_action( 'admin_print_footer_scripts' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;if(typeof wpOnload==&quot;function&quot;)wpOnload();&lt;/script&gt;&nbsp;</div></li><li><div>&lt;/body&gt;&nbsp;</div></li><li><div>&lt;/html&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_Post $post</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _post_states($post) {&nbsp;</div></li><li><div>  $post_states = array();&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['post_status'] ) )&nbsp;</div></li><li><div>      $post_status = $_REQUEST['post_status'];&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $post_status = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty($post-&gt;post_password) )&nbsp;</div></li><li><div>      $post_states['protected'] = __('Password protected');&nbsp;</div></li><li><div>  if ( 'private' == $post-&gt;post_status && 'private' != $post_status )&nbsp;</div></li><li><div>      $post_states['private'] = __('Private');&nbsp;</div></li><li><div>  if ( 'draft' == $post-&gt;post_status && 'draft' != $post_status )&nbsp;</div></li><li><div>      $post_states['draft'] = __('Draft');&nbsp;</div></li><li><div>  if ( 'pending' == $post-&gt;post_status && 'pending' != $post_status )&nbsp;</div></li><li><div>      $post_states['pending'] = _x('Pending', 'post status');&nbsp;</div></li><li><div>  if ( is_sticky($post-&gt;ID) )&nbsp;</div></li><li><div>      $post_states['sticky'] = __('Sticky');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'future' === $post-&gt;post_status ) {&nbsp;</div></li><li><div>      $post_states['scheduled'] = __( 'Scheduled' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'page' === get_option( 'show_on_front' ) ) {&nbsp;</div></li><li><div>      if ( intval( get_option( 'page_on_front' ) ) === $post-&gt;ID ) {&nbsp;</div></li><li><div>          $post_states['page_on_front'] = __( 'Front Page' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( intval( get_option( 'page_for_posts' ) ) === $post-&gt;ID ) {&nbsp;</div></li><li><div>          $post_states['page_for_posts'] = __( 'Posts Page' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the default post display states used in the posts list table.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array   $post_states An array of post display states.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Post $post        The current post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $post_states = apply_filters( 'display_post_states', $post_states, $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty($post_states) ) {&nbsp;</div></li><li><div>      $state_count = count($post_states);&nbsp;</div></li><li><div>      $i = 0;&nbsp;</div></li><li><div>      echo ' &mdash; ';&nbsp;</div></li><li><div>      foreach ( $post_states as $state ) {&nbsp;</div></li><li><div>          ++$i;&nbsp;</div></li><li><div>          ( $i == $state_count ) ? $sep = '' : $sep = ', ';&nbsp;</div></li><li><div>          echo &quot;&lt;span class='post-state'&gt;$state$sep&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_Post $post</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _media_states( $post ) {&nbsp;</div></li><li><div>  $media_states = array();&nbsp;</div></li><li><div>  $stylesheet = get_option('stylesheet');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( current_theme_supports( 'custom-header') ) {&nbsp;</div></li><li><div>      $meta_header = get_post_meta($post-&gt;ID, '_wp_attachment_is_custom_header', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_random_header_image() ) {&nbsp;</div></li><li><div>          $header_images = wp_list_pluck( get_uploaded_header_images(), 'attachment_id' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $meta_header == $stylesheet && in_array( $post-&gt;ID, $header_images ) ) {&nbsp;</div></li><li><div>              $media_states[] = __( 'Header Image' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $header_image = get_header_image();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Display &quot;Header Image&quot; if the image was ever used as a header image</span>&nbsp;</div></li><li><div>          if ( ! empty( $meta_header ) && $meta_header == $stylesheet && $header_image !== wp_get_attachment_url( $post-&gt;ID ) ) {&nbsp;</div></li><li><div>              $media_states[] = __( 'Header Image' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Display &quot;Current Header Image&quot; if the image is currently the header image</span>&nbsp;</div></li><li><div>          if ( $header_image && $header_image == wp_get_attachment_url( $post-&gt;ID ) ) {&nbsp;</div></li><li><div>              $media_states[] = __( 'Current Header Image' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( current_theme_supports( 'custom-background') ) {&nbsp;</div></li><li><div>      $meta_background = get_post_meta($post-&gt;ID, '_wp_attachment_is_custom_background', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $meta_background ) && $meta_background == $stylesheet ) {&nbsp;</div></li><li><div>          $media_states[] = __( 'Background Image' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $background_image = get_background_image();&nbsp;</div></li><li><div>          if ( $background_image && $background_image == wp_get_attachment_url( $post-&gt;ID ) ) {&nbsp;</div></li><li><div>              $media_states[] = __( 'Current Background Image' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $post-&gt;ID == get_option( 'site_icon' ) ) {&nbsp;</div></li><li><div>      $media_states[] = __( 'Site Icon' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $post-&gt;ID == get_theme_mod( 'site_logo' ) ) {&nbsp;</div></li><li><div>      $media_states[] = __( 'Logo' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the default media display states for items in the Media list table.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $media_states An array of media states. Default 'Header Image', </span>&nbsp;</div></li><li><div><span class="comment">   *                            'Background Image', 'Site Icon', 'Logo'.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $media_states = apply_filters( 'display_media_states', $media_states );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $media_states ) ) {&nbsp;</div></li><li><div>      $state_count = count( $media_states );&nbsp;</div></li><li><div>      $i = 0;&nbsp;</div></li><li><div>      echo ' &mdash; ';&nbsp;</div></li><li><div>      foreach ( $media_states as $state ) {&nbsp;</div></li><li><div>          ++$i;&nbsp;</div></li><li><div>          ( $i == $state_count ) ? $sep = '' : $sep = ', ';&nbsp;</div></li><li><div>          echo &quot;&lt;span class='post-state'&gt;$state$sep&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Test support for compressing JavaScript from PHP</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs JavaScript that tests if compression from PHP works as expected</span>&nbsp;</div></li><li><div><span class="comment"> * and sets an option with the result. Has no effect when the current user</span>&nbsp;</div></li><li><div><span class="comment"> * is not an administrator. To run the test again the option 'can_compress_scripts'</span>&nbsp;</div></li><li><div><span class="comment"> * has to be deleted.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function compression_test() {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>  var compressionNonce = &lt;?php echo wp_json_encode( wp_create_nonce( 'update_can_compress_scripts' ) ); ?&gt;;&nbsp;</div></li><li><div>  var testCompression = {&nbsp;</div></li><li><div>      get : function(test) {&nbsp;</div></li><li><div>          var x;&nbsp;</div></li><li><div>          if ( window.XMLHttpRequest ) {&nbsp;</div></li><li><div>              x = new XMLHttpRequest();&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              try{x=new ActiveXObject('Msxml2.XMLHTTP');}catch(e) {try{x=new ActiveXObject('Microsoft.XMLHTTP');}catch(e) {};}&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (x) {&nbsp;</div></li><li><div>              x.onreadystatechange = function() {&nbsp;</div></li><li><div>                  var r, h;&nbsp;</div></li><li><div>                  if ( x.readyState == 4 ) {&nbsp;</div></li><li><div>                      r = x.responseText.substr(0, 18);&nbsp;</div></li><li><div>                      h = x.getResponseHeader('Content-Encoding');&nbsp;</div></li><li><div>                      testCompression.check(r, h, test);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              };&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              x.open('GET', ajaxurl + '?action=wp-compression-test&test='+test+'&_ajax_nonce='+compressionNonce+'&'+(new Date()).getTime(), true);&nbsp;</div></li><li><div>              x.send('');&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      check : function(r, h, test) {&nbsp;</div></li><li><div>          if ( ! r && ! test )&nbsp;</div></li><li><div>              this.get(1);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 1 == test ) {&nbsp;</div></li><li><div>              if ( h && ( h.match(/deflate/i) || h.match(/gzip/i) ) )&nbsp;</div></li><li><div>                  this.get('no');&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  this.get(2);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 2 == test ) {&nbsp;</div></li><li><div>              if ( '&quot;wpCompressionTest' == r )&nbsp;</div></li><li><div>                  this.get('yes');&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  this.get('no');&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  };&nbsp;</div></li><li><div>  testCompression.check();&nbsp;</div></li><li><div>  &lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Echoes a submit button, with provided text and appropriate class(es).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_submit_button()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $text             The text of the button (defaults to 'Save Changes')</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $type             Optional. The type and CSS class(es) of the button. Core values</span>&nbsp;</div></li><li><div><span class="comment"> *                                       include 'primary', 'secondary', 'delete'. Default 'primary'</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $name             The HTML name of the submit button. Defaults to &quot;submit&quot;. If no</span>&nbsp;</div></li><li><div><span class="comment"> *                                       id attribute is given in $other_attributes below, $name will be</span>&nbsp;</div></li><li><div><span class="comment"> *                                       used as the button's id.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool         $wrap             True if the output button should be wrapped in a paragraph tag, </span>&nbsp;</div></li><li><div><span class="comment"> *                                       false otherwise. Defaults to true</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $other_attributes Other attributes that should be output with the button, mapping</span>&nbsp;</div></li><li><div><span class="comment"> *                                       attributes to their values, such as setting tabindex to 1, etc.</span>&nbsp;</div></li><li><div><span class="comment"> *                                       These key/value attribute pairs will be output as attribute=&quot;value&quot;, </span>&nbsp;</div></li><li><div><span class="comment"> *                                       where attribute is the key. Other attributes can also be provided</span>&nbsp;</div></li><li><div><span class="comment"> *                                       as a string such as 'tabindex=&quot;1&quot;', though the array format is</span>&nbsp;</div></li><li><div><span class="comment"> *                                       preferred. Default null.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function submit_button( $text = null, $type = 'primary', $name = 'submit', $wrap = true, $other_attributes = null ) {&nbsp;</div></li><li><div>  echo get_submit_button( $text, $type, $name, $wrap, $other_attributes );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Returns a submit button, with provided text and appropriate class</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $text             Optional. The text of the button. Default 'Save Changes'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $type             Optional. The type of button. Accepts 'primary', 'secondary', </span>&nbsp;</div></li><li><div><span class="comment"> *                                       or 'delete'. Default 'primary large'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string       $name             Optional. The HTML name of the submit button. Defaults to &quot;submit&quot;.</span>&nbsp;</div></li><li><div><span class="comment"> *                                       If no id attribute is given in $other_attributes below, `$name` will</span>&nbsp;</div></li><li><div><span class="comment"> *                                       be used as the button's id. Default 'submit'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool         $wrap             Optional. True if the output button should be wrapped in a paragraph</span>&nbsp;</div></li><li><div><span class="comment"> *                                       tag, false otherwise. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $other_attributes Optional. Other attributes that should be output with the button, </span>&nbsp;</div></li><li><div><span class="comment"> *                                       mapping attributes to their values, such as `array( 'tabindex' =&gt; '1' )`.</span>&nbsp;</div></li><li><div><span class="comment"> *                                       These attributes will be output as `attribute=&quot;value&quot;`, such as</span>&nbsp;</div></li><li><div><span class="comment"> *                                       `tabindex=&quot;1&quot;`. Other attributes can also be provided as a string such</span>&nbsp;</div></li><li><div><span class="comment"> *                                       as `tabindex=&quot;1&quot;`, though the array format is typically cleaner.</span>&nbsp;</div></li><li><div><span class="comment"> *                                       Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Submit button HTML.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_submit_button( $text = '', $type = 'primary large', $name = 'submit', $wrap = true, $other_attributes = '' ) {&nbsp;</div></li><li><div>  if ( ! is_array( $type ) )&nbsp;</div></li><li><div>      $type = explode( ' ', $type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $button_shorthand = array( 'primary', 'small', 'large' );&nbsp;</div></li><li><div>  $classes = array( 'button' );&nbsp;</div></li><li><div>  foreach ( $type as $t ) {&nbsp;</div></li><li><div>      if ( 'secondary' === $t || 'button-secondary' === $t )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      $classes[] = in_array( $t, $button_shorthand ) ? 'button-' . $t : $t;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Remove empty items, remove duplicate items, and finally build a string.</span>&nbsp;</div></li><li><div>  $class = implode( ' ', array_unique( array_filter( $classes ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $text = $text ? $text : __( 'Save Changes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Default the id attribute to $name unless an id was specifically provided in $other_attributes</span>&nbsp;</div></li><li><div>  $id = $name;&nbsp;</div></li><li><div>  if ( is_array( $other_attributes ) && isset( $other_attributes['id'] ) ) {&nbsp;</div></li><li><div>      $id = $other_attributes['id'];&nbsp;</div></li><li><div>      unset( $other_attributes['id'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $attributes = '';&nbsp;</div></li><li><div>  if ( is_array( $other_attributes ) ) {&nbsp;</div></li><li><div>      foreach ( $other_attributes as $attribute =&gt; $value ) {&nbsp;</div></li><li><div>          $attributes .= $attribute . '=&quot;' . esc_attr( $value ) . '&quot; '; <span class="comment">// Trailing space is important</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( ! empty( $other_attributes ) ) { <span class="comment">// Attributes provided as a string</span>&nbsp;</div></li><li><div>      $attributes = $other_attributes;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Don't output empty name and id attributes.</span>&nbsp;</div></li><li><div>  $name_attr = $name ? ' name=&quot;' . esc_attr( $name ) . '&quot;' : '';&nbsp;</div></li><li><div>  $id_attr = $id ? ' id=&quot;' . esc_attr( $id ) . '&quot;' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $button = '&lt;input type=&quot;submit&quot;' . $name_attr . $id_attr . ' class=&quot;' . esc_attr( $class );&nbsp;</div></li><li><div>  $button    .= '&quot; value=&quot;' . esc_attr( $text ) . '&quot; ' . $attributes . ' /&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $wrap ) {&nbsp;</div></li><li><div>      $button = '&lt;p class=&quot;submit&quot;&gt;' . $button . '&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $button;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool $is_IE</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _wp_admin_html_begin() {&nbsp;</div></li><li><div>  global $is_IE;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $admin_html_class = ( is_admin_bar_showing() ) ? 'wp-toolbar' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $is_IE )&nbsp;</div></li><li><div>      @header('X-UA-Compatible: IE=edge');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;!DOCTYPE html&gt;&nbsp;</div></li><li><div>&lt;!--[if IE 8]&gt;&nbsp;</div></li><li><div>&lt;html xmlns=&quot;http:<span class="comment">//www.w3.org/1999/xhtml&quot; class=&quot;ie8 &lt;?php echo $admin_html_class; ?&gt;&quot; &lt;?php</span>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires inside the HTML tag in the admin header.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'admin_xml_ns' );&nbsp;</div></li><li><div>?&gt; &lt;?php language_attributes(); ?&gt;&gt;&nbsp;</div></li><li><div>&lt;![endif]--&gt;&nbsp;</div></li><li><div>&lt;!--[if !(IE 8) ]&gt;&lt;!--&gt;&nbsp;</div></li><li><div>&lt;html xmlns=&quot;http:<span class="comment">//www.w3.org/1999/xhtml&quot; class=&quot;&lt;?php echo $admin_html_class; ?&gt;&quot; &lt;?php</span>&nbsp;</div></li><li><div>  <span class="comment">/** This action is documented in wp-admin/includes/template.php */</span>&nbsp;</div></li><li><div>  do_action( 'admin_xml_ns' );&nbsp;</div></li><li><div>?&gt; &lt;?php language_attributes(); ?&gt;&gt;&nbsp;</div></li><li><div>&lt;!--&lt;![endif]--&gt;&nbsp;</div></li><li><div>&lt;head&gt;&nbsp;</div></li><li><div>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;&lt;?php bloginfo('html_type'); ?&gt;; charset=&lt;?php echo get_option('blog_charset'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Convert a screen string to a screen object</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $hook_name The hook name (also known as the hook suffix) used to determine the screen.</span>&nbsp;</div></li><li><div><span class="comment"> * @return WP_Screen Screen object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function convert_to_screen( $hook_name ) {&nbsp;</div></li><li><div>  if ( ! class_exists( 'WP_Screen' ) ) {&nbsp;</div></li><li><div>      _doing_it_wrong( 'convert_to_screen(), add_meta_box()', __( &quot;Likely direct inclusion of wp-admin/includes/template.php in order to use add_meta_box(). This is very wrong. Hook the add_meta_box() call into the add_meta_boxes action instead.&quot; ), '3.3.0' );&nbsp;</div></li><li><div>      return (object) array( 'id' =&gt; '_invalid', 'base' =&gt; '_are_belong_to_us' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return WP_Screen::get( $hook_name );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the HTML for restoring the post data from DOM storage</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _local_storage_notice() {&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;local-storage-notice&quot; class=&quot;hidden notice is-dismissible&quot;&gt;&nbsp;</div></li><li><div>  &lt;p class=&quot;local-restore&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php _e( 'The backup of this post in your browser is different from the version below.' ); ?&gt;&nbsp;</div></li><li><div>      &lt;button type=&quot;button&quot; class=&quot;button restore-backup&quot;&gt;&lt;?php _e('Restore the backup'); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>  &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;p class=&quot;help&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php _e( 'This will replace the current editor content with the last backup version. You can use undo and redo in the editor to get the old content back or to return to the restored version.' ); ?&gt;&nbsp;</div></li><li><div>  &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a HTML element with a star rating for a given rating.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a HTML element with the star rating exposed on a 0..5 scale in</span>&nbsp;</div></li><li><div><span class="comment"> * half star increments (ie. 1, 1.5, 2 stars). Optionally, if specified, the</span>&nbsp;</div></li><li><div><span class="comment"> * number of ratings may also be displayed by passing the $number parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.8.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Introduced the `echo` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Array of star ratings arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $rating The rating to display, expressed in either a 0.5 rating increment, </span>&nbsp;</div></li><li><div><span class="comment"> *                          or percentage. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $type   Format that the $rating is in. Valid values are 'rating' (default), </span>&nbsp;</div></li><li><div><span class="comment"> *                          or, 'percent'. Default 'rating'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $number The number of ratings that makes up this rating. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $echo   Whether to echo the generated markup. False to return the markup instead</span>&nbsp;</div></li><li><div><span class="comment"> *                          of echoing it. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_star_rating( $args = array() ) {&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'rating' =&gt; 0, &nbsp;</div></li><li><div>      'type' =&gt; 'rating', &nbsp;</div></li><li><div>      'number' =&gt; 0, &nbsp;</div></li><li><div>      'echo' =&gt; true, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Non-english decimal places when the $rating is coming from a string</span>&nbsp;</div></li><li><div>  $rating = str_replace( ', ', '.', $r['rating'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Convert Percentage to star rating, 0..5 in .5 increments</span>&nbsp;</div></li><li><div>  if ( 'percent' == $r['type'] ) {&nbsp;</div></li><li><div>      $rating = round( $rating / 10, 0 ) / 2;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Calculate the number of each type of star needed</span>&nbsp;</div></li><li><div>  $full_stars = floor( $rating );&nbsp;</div></li><li><div>  $half_stars = ceil( $rating - $full_stars );&nbsp;</div></li><li><div>  $empty_stars = 5 - $full_stars - $half_stars;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['number'] ) {&nbsp;</div></li><li><div>      <span class="comment">/** translators: 1: The rating, 2: The number of ratings */</span>&nbsp;</div></li><li><div>      $format = _n( '%1$s rating based on %2$s rating', '%1$s rating based on %2$s ratings', $r['number'] );&nbsp;</div></li><li><div>      $title = sprintf( $format, number_format_i18n( $rating, 1 ), number_format_i18n( $r['number'] ) );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">/** translators: 1: The rating */</span>&nbsp;</div></li><li><div>      $title = sprintf( __( '%s rating' ), number_format_i18n( $rating, 1 ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = '&lt;div class=&quot;star-rating&quot;&gt;';&nbsp;</div></li><li><div>  $output .= '&lt;span class=&quot;screen-reader-text&quot;&gt;' . $title . '&lt;/span&gt;';&nbsp;</div></li><li><div>  $output .= str_repeat( '&lt;div class=&quot;star star-full&quot; aria-hidden=&quot;true&quot;&gt;&lt;/div&gt;', $full_stars );&nbsp;</div></li><li><div>  $output .= str_repeat( '&lt;div class=&quot;star star-half&quot; aria-hidden=&quot;true&quot;&gt;&lt;/div&gt;', $half_stars );&nbsp;</div></li><li><div>  $output .= str_repeat( '&lt;div class=&quot;star star-empty&quot; aria-hidden=&quot;true&quot;&gt;&lt;/div&gt;', $empty_stars );&nbsp;</div></li><li><div>  $output .= '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['echo'] ) {&nbsp;</div></li><li><div>      echo $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a notice when editing the page for posts (internal use only).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @ignore</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _wp_posts_page_notice() {&nbsp;</div></li><li><div>  echo '&lt;div class=&quot;notice notice-warning inline&quot;&gt;&lt;p&gt;' . __( 'You are currently editing the page that shows your latest posts.' ) . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>