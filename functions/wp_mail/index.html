<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr function lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr function lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr function lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr function ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr function gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr function" data-site="wordpress" data-type="function" data-id="5853"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp_mail | function | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="wp_mail, function, wordpress, 4.7.4" /><meta name="description" content="Send mail, similar to PHP's mail" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.24"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=737dd5efb22d3ad12a4ec4044647706f' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.24' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/functions/wp_mail/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fwp_mail%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fwp_mail%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-function-wp_mail","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp_mail" class="single single-function single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to functions." href="http://hookr.io/4.7.4/functions/" class=""><span property="name">functions</span></a><meta property="position" content="3"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp_mail</span><meta property="position" content="4"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="function"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="active" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>wp_mail</strong></h1><p>Send mail, similar to PHP's mail.</p> </section> <section id="description"><h2>Description</h2><pre><div>wp_mail( <span class="param">(string|array)</span> <a href="#" class="param" data-type="(string|array) " data-desc="Array or comma-separated<br />list of email addresses to<br />send message." data-depr="" data-opt="" title="Array or comma-separated<br />list of email addresses to<br />send message.">$to</a>, <span class="param">(string)</span> <a href="#" class="param" data-type="(string) " data-desc="Email subject." data-depr="" data-opt="" title="Email subject.">$subject</a>, <span class="param">(string)</span> <a href="#" class="param" data-type="(string) " data-desc="Message contents." data-depr="" data-opt="" title="Message contents.">$message</a>, <span class="param">(string)</span> <a href="#" class="param" data-type="(string) " data-desc="Additional headers." data-depr="" data-opt="1" title="Additional headers.">$headers = ''</a>, <span class="param">(array)</span> <a href="#" class="param" data-type="(array) " data-desc="Files to attach." data-depr="" data-opt="1" title="Files to attach.">$attachments = array()</a> );&nbsp;</div></pre><p>A true return value does not automatically mean that the user received the email successfully. It just only means that the method used was able to process the request without any errors.</p><p> Using the two wp_mail_from  and wp_mail_from_name hooks allow from creating a from address like Name <email@address.com> when both are set. If just wp_mail_from  is set, then just the email address will be used with no name.</p><p> The default content type is text/plain which does not allow using HTML. However, you can set the content type of the email by using the filter.</p><p> The default charset is based on the charset used on the blog. The charset can be set using the  filter.</p> </section> <section id="params"><h2>Parameters <span class="count">(5)</span></h2><dl><dt> <span class="index">0.</span> <span class="param"> $to </span> <span class="type">(string|array)</span></dt><dd> Array or comma-separated list of email addresses to send message.</dd><dt> <span class="index">1.</span> <span class="param"> $subject </span> <span class="type">(string)</span></dt><dd> Email subject</dd><dt> <span class="index">2.</span> <span class="param"> $message </span> <span class="type">(string)</span></dt><dd> Message contents</dd><dt> <span class="index">3.</span> <span class="param"> $headers </span> &mdash; Optional. <span class="type">(string)</span> => <code>''</code></dt><dd> Additional headers.</dd><dt> <span class="index">4.</span> <span class="param"> $attachments </span> &mdash; Optional. <span class="type">(array)</span> => <code>array()</code></dt><dd> Files to attach.</dd></dl> </section><hr /> <section id="usage"><h2>Usage</h2><pre><ol><li><div>if ( !function_exists( '<span class="func">wp_mail</span>' ) ) {&nbsp;</div></li><li><div>    require_once ABSPATH . WPINC . '/pluggable.php';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Array or comma-separated list of email addresses to send message.</span>&nbsp;</div></li><li><div><span class="param">$to</span> = null;&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Email subject</span>&nbsp;</div></li><li><div><span class="param">$subject</span> = '';&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Message contents</span>&nbsp;</div></li><li><div><span class="param">$message</span> = '';&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Optional. Additional headers.</span>&nbsp;</div></li><li><div><span class="param">$headers</span> = '';&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Optional. Files to attach.</span>&nbsp;</div></li><li><div><span class="param">$attachments</span> = array();&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// NOTICE! Understand what this does before running.</span>&nbsp;</div></li><li><div><span class="param">$result</span> = <span class="func">wp_mail</span>(<span class="param">$to</span>, <span class="param">$subject</span>, <span class="param">$message</span>, <span class="param">$headers</span>, <span class="param">$attachments</span>);&nbsp;</div></li><li><div>   &nbsp;</div></li></ol></pre></section><hr /> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The function is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/4.7.4/files/wp-includes-pluggable/" class="file">/wp-includes/pluggable.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="26" class="block" start="173"><li><div>function wp_mail( $to, $subject, $message, $headers = '', $attachments = array() ) {&nbsp;</div></li><li><div>    // Compact the input, apply the filters, and extract them back out&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the wp_mail() arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.2.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $args A compacted array of wp_mail() arguments, including the &quot;to&quot; email, &nbsp;</div></li><li><div>     *                    subject, message, headers, and attachments values.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $atts = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/wp_mail/" data-id="1421735" title="wp_mail" class="filter">'wp_mail'</a>, compact( 'to', 'subject', 'message', 'headers', 'attachments' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( isset( $atts['to'] ) ) {&nbsp;</div></li><li><div>        $to = $atts['to'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( isset( $atts['subject'] ) ) {&nbsp;</div></li><li><div>        $subject = $atts['subject'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( isset( $atts['message'] ) ) {&nbsp;</div></li><li><div>        $message = $atts['message'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( isset( $atts['headers'] ) ) {&nbsp;</div></li><li><div>        $headers = $atts['headers'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( isset( $atts['attachments'] ) ) {&nbsp;</div></li><li><div>        $attachments = $atts['attachments'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( ! is_array( $attachments ) ) {&nbsp;</div></li><li><div>        $attachments = explode( &quot;\n&quot;, str_replace( &quot;\r\n&quot;, &quot;\n&quot;, $attachments ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    global $phpmailer;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // (Re)create it, if it's gone missing&nbsp;</div></li><li><div>    if ( ! ( $phpmailer instanceof <a href="http://hookr.io/4.7.4/classes/phpmailer/" data-id="1418017" title="PHPMailer" class="class">PHPMailer</a> ) ) {&nbsp;</div></li><li><div>        require_once <a href="http://hookr.io/4.7.4/constants/abspath/" data-id="1423150" title="ABSPATH" class="constant">ABSPATH</a> . <a href="http://hookr.io/4.7.4/constants/wpinc/" data-id="1423195" title="WPINC" class="constant">WPINC</a> . '/class-phpmailer.php';&nbsp;</div></li><li><div>        require_once <a href="http://hookr.io/4.7.4/constants/abspath/" data-id="1423150" title="ABSPATH" class="constant">ABSPATH</a> . <a href="http://hookr.io/4.7.4/constants/wpinc/" data-id="1423195" title="WPINC" class="constant">WPINC</a> . '/class-smtp.php';&nbsp;</div></li><li><div>        $phpmailer = new <a href="http://hookr.io/4.7.4/classes/phpmailer/" data-id="1418017" title="PHPMailer" class="class">PHPMailer</a>( true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Headers&nbsp;</div></li><li><div>    $cc = $bcc = $reply_to = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( empty( $headers ) ) {&nbsp;</div></li><li><div>        $headers = array();&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        if ( !is_array( $headers ) ) {&nbsp;</div></li><li><div>            // Explode the headers out, so this function can take both&nbsp;</div></li><li><div>            // string headers and an array of headers.&nbsp;</div></li><li><div>            $tempheaders = explode( &quot;\n&quot;, str_replace( &quot;\r\n&quot;, &quot;\n&quot;, $headers ) );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $tempheaders = $headers;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $headers = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If it's actually got contents&nbsp;</div></li><li><div>        if ( !empty( $tempheaders ) ) {&nbsp;</div></li><li><div>            // Iterate through the raw headers&nbsp;</div></li><li><div>            foreach ( (array) $tempheaders as $header ) {&nbsp;</div></li><li><div>                if ( strpos($header, ':') === false ) {&nbsp;</div></li><li><div>                    if ( false !== <a href="http://hookr.io/4.7.4/functions/stripos/" data-id="1418000" title="stripos" class="function">stripos</a>( $header, 'boundary=' ) ) {&nbsp;</div></li><li><div>                        $parts = preg_split('/boundary=/i', trim( $header ) );&nbsp;</div></li><li><div>                        $boundary = trim( str_replace( array( &quot;'&quot;, '&quot;' ), '', $parts[1] ) );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // Explode them out&nbsp;</div></li><li><div>                list( $name, $content ) = explode( ':', trim( $header ), 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Cleanup crew&nbsp;</div></li><li><div>                $name = trim( $name );&nbsp;</div></li><li><div>                $content = trim( $content );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch ( strtolower( $name ) ) {&nbsp;</div></li><li><div>                    // Mainly for legacy -- process a From: header if it's there&nbsp;</div></li><li><div>                    case 'from':&nbsp;</div></li><li><div>                        $bracket_pos = strpos( $content, '&lt;' );&nbsp;</div></li><li><div>                        if ( $bracket_pos !== false ) {&nbsp;</div></li><li><div>                            // Text before the bracketed email is the &quot;From&quot; name.&nbsp;</div></li><li><div>                            if ( $bracket_pos &gt; 0 ) {&nbsp;</div></li><li><div>                                $from_name = substr( $content, 0, $bracket_pos - 1 );&nbsp;</div></li><li><div>                                $from_name = str_replace( '&quot;', '', $from_name );&nbsp;</div></li><li><div>                                $from_name = trim( $from_name );&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $from_email = substr( $content, $bracket_pos + 1 );&nbsp;</div></li><li><div>                            $from_email = str_replace( '&gt;', '', $from_email );&nbsp;</div></li><li><div>                            $from_email = trim( $from_email );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // Avoid setting an empty $from_email.&nbsp;</div></li><li><div>                        } elseif ( '' !== trim( $content ) ) {&nbsp;</div></li><li><div>                            $from_email = trim( $content );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'content-type':&nbsp;</div></li><li><div>                        if ( strpos( $content, ';' ) !== false ) {&nbsp;</div></li><li><div>                            list( $type, $charset_content ) = explode( ';', $content );&nbsp;</div></li><li><div>                            $content_type = trim( $type );&nbsp;</div></li><li><div>                            if ( false !== <a href="http://hookr.io/4.7.4/functions/stripos/" data-id="1418000" title="stripos" class="function">stripos</a>( $charset_content, 'charset=' ) ) {&nbsp;</div></li><li><div>                                $charset = trim( str_replace( array( 'charset=', '&quot;' ), '', $charset_content ) );&nbsp;</div></li><li><div>                            } elseif ( false !== <a href="http://hookr.io/4.7.4/functions/stripos/" data-id="1418000" title="stripos" class="function">stripos</a>( $charset_content, 'boundary=' ) ) {&nbsp;</div></li><li><div>                                $boundary = trim( str_replace( array( 'BOUNDARY=', 'boundary=', '&quot;' ), '', $charset_content ) );&nbsp;</div></li><li><div>                                $charset = '';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // Avoid setting an empty $content_type.&nbsp;</div></li><li><div>                        } elseif ( '' !== trim( $content ) ) {&nbsp;</div></li><li><div>                            $content_type = trim( $content );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'cc':&nbsp;</div></li><li><div>                        $cc = array_merge( (array) $cc, explode( ', ', $content ) );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'bcc':&nbsp;</div></li><li><div>                        $bcc = array_merge( (array) $bcc, explode( ', ', $content ) );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'reply-to':&nbsp;</div></li><li><div>                        $reply_to = array_merge( (array) $reply_to, explode( ', ', $content ) );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    default:&nbsp;</div></li><li><div>                        // Add it to our grand headers array&nbsp;</div></li><li><div>                        $headers[trim( $name )] = trim( $content );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Empty out the values that may be set&nbsp;</div></li><li><div>    $phpmailer-&gt;ClearAllRecipients();&nbsp;</div></li><li><div>    $phpmailer-&gt;ClearAttachments();&nbsp;</div></li><li><div>    $phpmailer-&gt;ClearCustomHeaders();&nbsp;</div></li><li><div>    $phpmailer-&gt;ClearReplyTos();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // From email and name&nbsp;</div></li><li><div>    // If we don't have a name from the input headers&nbsp;</div></li><li><div>    if ( !isset( $from_name ) )&nbsp;</div></li><li><div>        $from_name = 'WordPress';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /** If we don't have an email from the input headers default to wordpress@$sitename&nbsp;</div></li><li><div>     * Some hosts will block outgoing mail from this address if it doesn't exist but&nbsp;</div></li><li><div>     * there's no easy alternative. Defaulting to admin_email might appear to be another&nbsp;</div></li><li><div>     * option but some hosts may refuse to relay mail from an unknown domain. See&nbsp;</div></li><li><div>     * https://core.trac.wordpress.org/ticket/5007.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( !isset( $from_email ) ) {&nbsp;</div></li><li><div>        // Get the site domain and get rid of www.&nbsp;</div></li><li><div>        $sitename = strtolower( $_SERVER['SERVER_NAME'] );&nbsp;</div></li><li><div>        if ( substr( $sitename, 0, 4 ) == 'www.' ) {&nbsp;</div></li><li><div>            $sitename = substr( $sitename, 4 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $from_email = 'wordpress@' . $sitename;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the email address to send from.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.2.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $from_email Email address to send from.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $from_email = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/wp_mail_from/" data-id="1421736" title="wp_mail_from" class="filter">'wp_mail_from'</a>, $from_email );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the name to associate with the &quot;from&quot; email address.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.3.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $from_name Name associated with the &quot;from&quot; email address.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $from_name = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/wp_mail_from_name/" data-id="1421738" title="wp_mail_from_name" class="filter">'wp_mail_from_name'</a>, $from_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $phpmailer-&gt;setFrom( $from_email, $from_name, false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set destination addresses&nbsp;</div></li><li><div>    if ( !is_array( $to ) )&nbsp;</div></li><li><div>        $to = explode( ', ', $to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set mail's subject and body&nbsp;</div></li><li><div>    $phpmailer-&gt;Subject = $subject;&nbsp;</div></li><li><div>    $phpmailer-&gt;Body = $message;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Use appropriate methods for handling addresses, rather than treating them as generic headers&nbsp;</div></li><li><div>    $address_headers = compact( 'to', 'cc', 'bcc', 'reply_to' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    foreach ( $address_headers as $address_header =&gt; $addresses ) {&nbsp;</div></li><li><div>        if ( empty( $addresses ) ) {&nbsp;</div></li><li><div>            continue;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( (array) $addresses as $address ) {&nbsp;</div></li><li><div>            try {&nbsp;</div></li><li><div>                // Break $recipient into name and address parts if in the format &quot;Foo &lt;bar@baz.com&gt;&quot;&nbsp;</div></li><li><div>                $recipient_name = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( preg_match( '/(.*)&lt;(.+)&gt;/', $address, $matches ) ) {&nbsp;</div></li><li><div>                    if ( count( $matches ) == 3 ) {&nbsp;</div></li><li><div>                        $recipient_name = $matches[1];&nbsp;</div></li><li><div>                        $address = $matches[2];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch ( $address_header ) {&nbsp;</div></li><li><div>                    case 'to':&nbsp;</div></li><li><div>                        $phpmailer-&gt;addAddress( $address, $recipient_name );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'cc':&nbsp;</div></li><li><div>                        $phpmailer-&gt;addCc( $address, $recipient_name );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'bcc':&nbsp;</div></li><li><div>                        $phpmailer-&gt;addBcc( $address, $recipient_name );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'reply_to':&nbsp;</div></li><li><div>                        $phpmailer-&gt;addReplyTo( $address, $recipient_name );&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } catch ( <a href="http://hookr.io/4.7.4/classes/phpmailer_exception/" data-id="1418019" title="phpmailerException" class="class">phpmailerException</a> $e ) {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set to use PHP's mail()&nbsp;</div></li><li><div>    $phpmailer-&gt;IsMail();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set Content-Type and charset&nbsp;</div></li><li><div>    // If we don't have a content-type from the input headers&nbsp;</div></li><li><div>    if ( !isset( $content_type ) )&nbsp;</div></li><li><div>        $content_type = 'text/plain';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the wp_mail() content type.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.3.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $content_type Default wp_mail() content type.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $content_type = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/wp_mail_content_type/" data-id="1421740" title="wp_mail_content_type" class="filter">'wp_mail_content_type'</a>, $content_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $phpmailer-&gt;ContentType = $content_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set whether it's plaintext, depending on $content_type&nbsp;</div></li><li><div>    if ( 'text/html' == $content_type )&nbsp;</div></li><li><div>        $phpmailer-&gt;IsHTML( true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // If we don't have a charset from the input headers&nbsp;</div></li><li><div>    if ( !isset( $charset ) )&nbsp;</div></li><li><div>        $charset = <a href="http://hookr.io/4.7.4/functions/get_bloginfo/" data-id="1419922" title="get_bloginfo" class="function">get_bloginfo</a>( 'charset' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set the content-type and charset&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the default wp_mail() charset.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.3.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $charset Default email charset.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $phpmailer-&gt;CharSet = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/wp_mail_charset/" data-id="1421741" title="wp_mail_charset" class="filter">'wp_mail_charset'</a>, $charset );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Set custom headers&nbsp;</div></li><li><div>    if ( !empty( $headers ) ) {&nbsp;</div></li><li><div>        foreach ( (array) $headers as $name =&gt; $content ) {&nbsp;</div></li><li><div>            $phpmailer-&gt;AddCustomHeader( sprintf( '%1$s: %2$s', $name, $content ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false !== <a href="http://hookr.io/4.7.4/functions/stripos/" data-id="1418000" title="stripos" class="function">stripos</a>( $content_type, 'multipart' ) && ! empty($boundary) )&nbsp;</div></li><li><div>            $phpmailer-&gt;AddCustomHeader( sprintf( &quot;Content-Type: %s;\n\t boundary=\&quot;%s\&quot;&quot;, $content_type, $boundary ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( !empty( $attachments ) ) {&nbsp;</div></li><li><div>        foreach ( $attachments as $attachment ) {&nbsp;</div></li><li><div>            try {&nbsp;</div></li><li><div>                $phpmailer-&gt;AddAttachment($attachment);&nbsp;</div></li><li><div>            } catch ( <a href="http://hookr.io/4.7.4/classes/phpmailer_exception/" data-id="1418019" title="phpmailerException" class="class">phpmailerException</a> $e ) {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Fires after <a href="http://hookr.io/4.7.4/classes/phpmailer/" data-id="1418017" title="PHPMailer" class="class">PHPMailer</a> is initialized.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.2.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param <a href="http://hookr.io/4.7.4/classes/phpmailer/" data-id="1418017" title="PHPMailer" class="class">PHPMailer</a> &$phpmailer The <a href="http://hookr.io/4.7.4/classes/phpmailer/" data-id="1418017" title="PHPMailer" class="class">PHPMailer</a> instance, passed by reference.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    <a href="http://hookr.io/4.7.4/functions/do_action_ref_array/" data-id="1421376" title="do_action_ref_array" class="function">do_action_ref_array</a>( <a href="http://hookr.io/4.7.4/actions/phpmailer_init/" data-id="1421743" title="phpmailer_init" class="action">'phpmailer_init'</a>, array( &$phpmailer ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Send!&nbsp;</div></li><li><div>    try {&nbsp;</div></li><li><div>        return $phpmailer-&gt;Send();&nbsp;</div></li><li><div>    } catch ( <a href="http://hookr.io/4.7.4/classes/phpmailer_exception/" data-id="1418019" title="phpmailerException" class="class">phpmailerException</a> $e ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $mail_error_data = compact( 'to', 'subject', 'message', 'headers', 'attachments' );&nbsp;</div></li><li><div>        $mail_error_data['phpmailer_exception_code'] = $e-&gt;getCode();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires after a <a href="http://hookr.io/4.7.4/classes/phpmailer_exception/" data-id="1418019" title="phpmailerException" class="class">phpmailerException</a> is caught.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 4.4.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param <a href="http://hookr.io/4.7.4/classes/wp_error/" data-id="1418158" title="WP_Error" class="class">WP_Error</a> $error A <a href="http://hookr.io/4.7.4/classes/wp_error/" data-id="1418158" title="WP_Error" class="class">WP_Error</a> object with the <a href="http://hookr.io/4.7.4/classes/phpmailer_exception/" data-id="1418019" title="phpmailerException" class="class">phpmailerException</a> message, and an array&nbsp;</div></li><li><div>         *                        containing the mail recipient, subject, message, headers, and attachments.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/4.7.4/functions/do_action/" data-id="1421373" title="do_action" class="function">do_action</a>( <a href="http://hookr.io/4.7.4/actions/wp_mail_failed/" data-id="1421745" title="wp_mail_failed" class="action">'wp_mail_failed'</a>, new <a href="http://hookr.io/4.7.4/classes/wp_error/" data-id="1418158" title="WP_Error" class="class">WP_Error</a>( 'wp_mail_failed', $e-&gt;getMessage(), $mail_error_data ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.2.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/4.7.4/functions/wp_mail/" class="active">4.7.4</a></li><li><a href="http://hookr.io/4.7.3/functions/wp_mail/" class="">4.7.3</a></li><li><a href="http://hookr.io/4.7.2/functions/wp_mail/" class="">4.7.2</a></li><li><a href="http://hookr.io/4.7.1/functions/wp_mail/" class="">4.7.1</a></li><li><a href="http://hookr.io/4.7/functions/wp_mail/" class="">4.7</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>function</li><li><span></span>wp_mail</li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>