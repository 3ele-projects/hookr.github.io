<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr function lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr function lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr function lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr function ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr function gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr function" data-site="wordpress" data-type="function" data-id="2464"><head xmlns="http://www.w3.org/1999/xhtml"><title> map_meta_cap | function | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="map_meta_cap, function, wordpress, 4.7.4" /><meta name="description" content="Map meta capabilities to primitive capabilities." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=b1c0caf0fd92e9b8cb5099caf8225b10' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/functions/map_meta_cap/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fmap_meta_cap%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fmap_meta_cap%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-function-map_meta_cap","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="map_meta_cap" class="single single-function single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to functions." href="http://hookr.io/4.7.4/functions/" class=""><span property="name">functions</span></a><meta property="position" content="3"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">map_meta_cap</span><meta property="position" content="4"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="function"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="active" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>map_meta_cap</strong></h1><p>Map meta capabilities to primitive capabilities.</p> </section> <section id="description"><h2>Description</h2><pre><div><em>(array)</em> map_meta_cap( <span class="param">(string)</span> <a href="#" class="param" data-type="(string) " data-desc="Capability name." data-depr="" data-opt="" title="Capability name.">$cap</a>, <span class="param">(int)</span> <a href="#" class="param" data-type="(int) " data-desc="The user id." data-depr="" data-opt="" title="The user id.">$user_id</a> );&nbsp;</div></pre><p>This does not actually compare whether the user ID has the actual capability, just what the capability or capabilities are. Meta capability list value can be delete_user,, edit_user., remove_user, promote_user, delete_post, 'delete_page', edit_post, edit_page, read_post, or read_page.</p> </section> <section id="returns"><h2>Returns <span class="count">(array)</span></h2><p>Actual capabilities for meta capability.</p> </section> <section id="params"><h2>Parameters <span class="count">(2)</span></h2><dl><dt> <span class="index">0.</span> <span class="param"> $cap </span> <span class="type">(string)</span></dt><dd> Capability name.</dd><dt> <span class="index">1.</span> <span class="param"> $user_id </span> <span class="type">(int)</span></dt><dd> The user id.</dd></dl> </section><hr /> <section id="usage"><h2>Usage</h2><pre><ol><li><div>if ( !function_exists( '<span class="func">map_meta_cap</span>' ) ) {&nbsp;</div></li><li><div>    require_once ABSPATH . WPINC . '/capabilities.php';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Capability name.</span>&nbsp;</div></li><li><div><span class="param">$cap</span> = '';&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// The user id.</span>&nbsp;</div></li><li><div><span class="param">$user_id</span> = -1;&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// NOTICE! Understand what this does before running.</span>&nbsp;</div></li><li><div><span class="param">$result</span> = <span class="func">map_meta_cap</span>(<span class="param">$cap</span>, <span class="param">$user_id</span>);&nbsp;</div></li><li><div>   &nbsp;</div></li></ol></pre></section><hr /> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The function is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/4.7.4/files/wp-includes-capabilities/" class="file">/wp-includes/capabilities.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="26" class="block" start="29"><li><div>function map_meta_cap( $cap, $user_id ) {&nbsp;</div></li><li><div>    $args = array_slice( func_get_args(), 2 );&nbsp;</div></li><li><div>    $caps = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    switch ( $cap ) {&nbsp;</div></li><li><div>    case 'remove_user':&nbsp;</div></li><li><div>        $caps[] = 'remove_users';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'promote_user':&nbsp;</div></li><li><div>    case 'add_users':&nbsp;</div></li><li><div>        $caps[] = 'promote_users';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/edit_user/" data-id="1417292" title="edit_user" class="function">edit_user</a>':&nbsp;</div></li><li><div>    case 'edit_users':&nbsp;</div></li><li><div>        // Allow user to edit itself&nbsp;</div></li><li><div>        if ( '<a href="http://hookr.io/4.7.4/functions/edit_user/" data-id="1417292" title="edit_user" class="function">edit_user</a>' == $cap && isset( $args[0] ) && $user_id == $args[0] )&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // In multisite the user must have manage_network_users caps. If editing a super admin, the user must be a super admin.&nbsp;</div></li><li><div>        if ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() && ( ( ! <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) && '<a href="http://hookr.io/4.7.4/functions/edit_user/" data-id="1417292" title="edit_user" class="function">edit_user</a>' === $cap && <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $args[0] ) ) || ! <a href="http://hookr.io/4.7.4/functions/user_can/" data-id="1417895" title="user_can" class="function">user_can</a>( $user_id, 'manage_network_users' ) ) ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $caps[] = 'edit_users'; // edit_user maps to edit_users.&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'delete_post':&nbsp;</div></li><li><div>    case 'delete_page':&nbsp;</div></li><li><div>        $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $args[0] );&nbsp;</div></li><li><div>        if ( ! $post ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'revision' == $post-&gt;post_type ) {&nbsp;</div></li><li><div>            $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $post-&gt;post_parent );&nbsp;</div></li><li><div>            if ( ! $post ) {&nbsp;</div></li><li><div>                $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ( <a href="http://hookr.io/4.7.4/functions/get_option/" data-id="1421280" title="get_option" class="function">get_option</a>( 'page_for_posts' ) == $post-&gt;ID ) || ( <a href="http://hookr.io/4.7.4/functions/get_option/" data-id="1421280" title="get_option" class="function">get_option</a>( 'page_on_front' ) == $post-&gt;ID ) ) {&nbsp;</div></li><li><div>            $caps[] = 'manage_options';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_type = <a href="http://hookr.io/4.7.4/functions/get_post_type_object/" data-id="1422544" title="get_post_type_object" class="function">get_post_type_object</a>( $post-&gt;post_type );&nbsp;</div></li><li><div>        if ( ! $post_type ) {&nbsp;</div></li><li><div>            /** translators: 1: post type, 2: capability name */&nbsp;</div></li><li><div>            <a href="http://hookr.io/4.7.4/functions/doing_it_wrong/" data-id="1420375" title="_doing_it_wrong" class="function">_doing_it_wrong</a>( __FUNCTION__, sprintf( <a href="http://hookr.io/4.7.4/functions/__/" data-id="1420645" title="__" class="function">__</a>( 'The post type %1$s is not registered, so it may not be reliable to check the capability &quot;%2$s&quot; against a post of that type.' ), $post-&gt;post_type, $cap ), '4.4.0' );&nbsp;</div></li><li><div>            $caps[] = 'edit_others_posts';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $post_type-&gt;map_meta_cap ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            // Prior to 3.1 we would re-call map_meta_cap here.&nbsp;</div></li><li><div>            if ( 'delete_post' == $cap )&nbsp;</div></li><li><div>                $cap = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If the post author is set and the user is the author...&nbsp;</div></li><li><div>        if ( $post-&gt;post_author && $user_id == $post-&gt;post_author ) {&nbsp;</div></li><li><div>            // If the post is published or scheduled...&nbsp;</div></li><li><div>            if ( in_array( $post-&gt;post_status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;delete_published_posts;&nbsp;</div></li><li><div>            } elseif ( 'trash' == $post-&gt;post_status ) {&nbsp;</div></li><li><div>                $status = <a href="http://hookr.io/4.7.4/functions/get_post_meta/" data-id="1422566" title="get_post_meta" class="function">get_post_meta</a>( $post-&gt;ID, '_wp_trash_meta_status', true );&nbsp;</div></li><li><div>                if ( in_array( $status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                    $caps[] = $post_type-&gt;cap-&gt;delete_published_posts;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $caps[] = $post_type-&gt;cap-&gt;delete_posts;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                // If the post is draft...&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;delete_posts;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            // The user is trying to edit someone else's post.&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;delete_others_posts;&nbsp;</div></li><li><div>            // The post is published or scheduled, extra cap required.&nbsp;</div></li><li><div>            if ( in_array( $post-&gt;post_status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;delete_published_posts;&nbsp;</div></li><li><div>            } elseif ( 'private' == $post-&gt;post_status ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;delete_private_posts;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>        // edit_post breaks down to edit_posts, edit_published_posts, or&nbsp;</div></li><li><div>        // edit_others_posts&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/edit_post/" data-id="1417085" title="edit_post" class="function">edit_post</a>':&nbsp;</div></li><li><div>    case 'edit_page':&nbsp;</div></li><li><div>        $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $args[0] );&nbsp;</div></li><li><div>        if ( ! $post ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'revision' == $post-&gt;post_type ) {&nbsp;</div></li><li><div>            $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $post-&gt;post_parent );&nbsp;</div></li><li><div>            if ( ! $post ) {&nbsp;</div></li><li><div>                $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_type = <a href="http://hookr.io/4.7.4/functions/get_post_type_object/" data-id="1422544" title="get_post_type_object" class="function">get_post_type_object</a>( $post-&gt;post_type );&nbsp;</div></li><li><div>        if ( ! $post_type ) {&nbsp;</div></li><li><div>            /** translators: 1: post type, 2: capability name */&nbsp;</div></li><li><div>            <a href="http://hookr.io/4.7.4/functions/doing_it_wrong/" data-id="1420375" title="_doing_it_wrong" class="function">_doing_it_wrong</a>( __FUNCTION__, sprintf( <a href="http://hookr.io/4.7.4/functions/__/" data-id="1420645" title="__" class="function">__</a>( 'The post type %1$s is not registered, so it may not be reliable to check the capability &quot;%2$s&quot; against a post of that type.' ), $post-&gt;post_type, $cap ), '4.4.0' );&nbsp;</div></li><li><div>            $caps[] = 'edit_others_posts';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $post_type-&gt;map_meta_cap ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            // Prior to 3.1 we would re-call map_meta_cap here.&nbsp;</div></li><li><div>            if ( '<a href="http://hookr.io/4.7.4/functions/edit_post/" data-id="1417085" title="edit_post" class="function">edit_post</a>' == $cap )&nbsp;</div></li><li><div>                $cap = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If the post author is set and the user is the author...&nbsp;</div></li><li><div>        if ( $post-&gt;post_author && $user_id == $post-&gt;post_author ) {&nbsp;</div></li><li><div>            // If the post is published or scheduled...&nbsp;</div></li><li><div>            if ( in_array( $post-&gt;post_status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;edit_published_posts;&nbsp;</div></li><li><div>            } elseif ( 'trash' == $post-&gt;post_status ) {&nbsp;</div></li><li><div>                $status = <a href="http://hookr.io/4.7.4/functions/get_post_meta/" data-id="1422566" title="get_post_meta" class="function">get_post_meta</a>( $post-&gt;ID, '_wp_trash_meta_status', true );&nbsp;</div></li><li><div>                if ( in_array( $status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                    $caps[] = $post_type-&gt;cap-&gt;edit_published_posts;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $caps[] = $post_type-&gt;cap-&gt;edit_posts;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                // If the post is draft...&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;edit_posts;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            // The user is trying to edit someone else's post.&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;edit_others_posts;&nbsp;</div></li><li><div>            // The post is published or scheduled, extra cap required.&nbsp;</div></li><li><div>            if ( in_array( $post-&gt;post_status, array( 'publish', 'future' ), true ) ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;edit_published_posts;&nbsp;</div></li><li><div>            } elseif ( 'private' == $post-&gt;post_status ) {&nbsp;</div></li><li><div>                $caps[] = $post_type-&gt;cap-&gt;edit_private_posts;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'read_post':&nbsp;</div></li><li><div>    case 'read_page':&nbsp;</div></li><li><div>        $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $args[0] );&nbsp;</div></li><li><div>        if ( ! $post ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'revision' == $post-&gt;post_type ) {&nbsp;</div></li><li><div>            $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $post-&gt;post_parent );&nbsp;</div></li><li><div>            if ( ! $post ) {&nbsp;</div></li><li><div>                $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_type = <a href="http://hookr.io/4.7.4/functions/get_post_type_object/" data-id="1422544" title="get_post_type_object" class="function">get_post_type_object</a>( $post-&gt;post_type );&nbsp;</div></li><li><div>        if ( ! $post_type ) {&nbsp;</div></li><li><div>            /** translators: 1: post type, 2: capability name */&nbsp;</div></li><li><div>            <a href="http://hookr.io/4.7.4/functions/doing_it_wrong/" data-id="1420375" title="_doing_it_wrong" class="function">_doing_it_wrong</a>( __FUNCTION__, sprintf( <a href="http://hookr.io/4.7.4/functions/__/" data-id="1420645" title="__" class="function">__</a>( 'The post type %1$s is not registered, so it may not be reliable to check the capability &quot;%2$s&quot; against a post of that type.' ), $post-&gt;post_type, $cap ), '4.4.0' );&nbsp;</div></li><li><div>            $caps[] = 'edit_others_posts';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $post_type-&gt;map_meta_cap ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            // Prior to 3.1 we would re-call map_meta_cap here.&nbsp;</div></li><li><div>            if ( 'read_post' == $cap )&nbsp;</div></li><li><div>                $cap = $post_type-&gt;cap-&gt;$cap;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $status_obj = <a href="http://hookr.io/4.7.4/functions/get_post_status_object/" data-id="1422539" title="get_post_status_object" class="function">get_post_status_object</a>( $post-&gt;post_status );&nbsp;</div></li><li><div>        if ( $status_obj-&gt;public ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;read;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $post-&gt;post_author && $user_id == $post-&gt;post_author ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;read;&nbsp;</div></li><li><div>        } elseif ( $status_obj-&gt;private ) {&nbsp;</div></li><li><div>            $caps[] = $post_type-&gt;cap-&gt;read_private_posts;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $caps = map_meta_cap( '<a href="http://hookr.io/4.7.4/functions/edit_post/" data-id="1417085" title="edit_post" class="function">edit_post</a>', $user_id, $post-&gt;ID );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'publish_post':&nbsp;</div></li><li><div>        $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $args[0] );&nbsp;</div></li><li><div>        if ( ! $post ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_type = <a href="http://hookr.io/4.7.4/functions/get_post_type_object/" data-id="1422544" title="get_post_type_object" class="function">get_post_type_object</a>( $post-&gt;post_type );&nbsp;</div></li><li><div>        if ( ! $post_type ) {&nbsp;</div></li><li><div>            /** translators: 1: post type, 2: capability name */&nbsp;</div></li><li><div>            <a href="http://hookr.io/4.7.4/functions/doing_it_wrong/" data-id="1420375" title="_doing_it_wrong" class="function">_doing_it_wrong</a>( __FUNCTION__, sprintf( <a href="http://hookr.io/4.7.4/functions/__/" data-id="1420645" title="__" class="function">__</a>( 'The post type %1$s is not registered, so it may not be reliable to check the capability &quot;%2$s&quot; against a post of that type.' ), $post-&gt;post_type, $cap ), '4.4.0' );&nbsp;</div></li><li><div>            $caps[] = 'edit_others_posts';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $caps[] = $post_type-&gt;cap-&gt;publish_posts;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'edit_post_meta':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/delete_post_meta/" data-id="1422565" title="delete_post_meta" class="function">delete_post_meta</a>':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/add_post_meta/" data-id="1422564" title="add_post_meta" class="function">add_post_meta</a>':&nbsp;</div></li><li><div>    case 'edit_comment_meta':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/delete_comment_meta/" data-id="1418838" title="delete_comment_meta" class="function">delete_comment_meta</a>':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/add_comment_meta/" data-id="1418837" title="add_comment_meta" class="function">add_comment_meta</a>':&nbsp;</div></li><li><div>    case 'edit_term_meta':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/delete_term_meta/" data-id="1422902" title="delete_term_meta" class="function">delete_term_meta</a>':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/add_term_meta/" data-id="1422901" title="add_term_meta" class="function">add_term_meta</a>':&nbsp;</div></li><li><div>    case 'edit_user_meta':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/delete_user_meta/" data-id="1422830" title="delete_user_meta" class="function">delete_user_meta</a>':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/add_user_meta/" data-id="1422828" title="add_user_meta" class="function">add_user_meta</a>':&nbsp;</div></li><li><div>        list( $_, $object_type, $_ ) = explode( '<a href="http://hookr.io/4.7.4/functions/_/" data-id="1418633" title="_" class="function">_</a>', $cap );&nbsp;</div></li><li><div>        $object_id = (int) $args[0];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $object_type ) {&nbsp;</div></li><li><div>            case 'post':&nbsp;</div></li><li><div>                $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $object_id );&nbsp;</div></li><li><div>                if ( ! $post ) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $sub_type = <a href="http://hookr.io/4.7.4/functions/get_post_type/" data-id="1422543" title="get_post_type" class="function">get_post_type</a>( $post );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'comment':&nbsp;</div></li><li><div>                $comment = <a href="http://hookr.io/4.7.4/functions/get_comment/" data-id="1418830" title="get_comment" class="function">get_comment</a>( $object_id );&nbsp;</div></li><li><div>                if ( ! $comment ) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $sub_type = empty( $comment-&gt;comment_type ) ? 'comment' : $comment-&gt;comment_type;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'term':&nbsp;</div></li><li><div>                $term = <a href="http://hookr.io/4.7.4/functions/get_term/" data-id="1422894" title="get_term" class="function">get_term</a>( $object_id );&nbsp;</div></li><li><div>                if ( ! $term ) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $sub_type = $term-&gt;taxonomy;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'user':&nbsp;</div></li><li><div>                $user = <a href="http://hookr.io/4.7.4/functions/get_user_by/" data-id="1421538" title="get_user_by" class="function">get_user_by</a>( 'id', $object_id );&nbsp;</div></li><li><div>                if ( ! $user ) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $sub_type = 'user';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $sub_type ) ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $caps = map_meta_cap( &quot;edit_{$object_type}&quot;, $user_id, $object_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $meta_key = isset( $args[1] ) ? $args[1] : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $has_filter = <a href="http://hookr.io/4.7.4/functions/has_filter/" data-id="1421357" title="has_filter" class="function">has_filter</a>( &quot;auth_{$object_type}_meta_{$meta_key}&quot; ) || <a href="http://hookr.io/4.7.4/functions/has_filter/" data-id="1421357" title="has_filter" class="function">has_filter</a>( &quot;auth_{$object_type}_{$sub_type}_meta_{$meta_key}&quot; );&nbsp;</div></li><li><div>        if ( $meta_key && $has_filter ) {&nbsp;</div></li><li><div>            /** This filter is documented in wp-includes/meta.php */&nbsp;</div></li><li><div>            $allowed = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( &quot;auth_{$object_type}_meta_{$meta_key}&quot;, false, $meta_key, $object_id, $user_id, $cap, $caps );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** This filter is documented in wp-includes/meta.php */&nbsp;</div></li><li><div>            $allowed = <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( &quot;auth_{$object_type}_{$sub_type}_meta_{$meta_key}&quot;, $allowed, $meta_key, $object_id, $user_id, $cap, $caps );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! $allowed ) {&nbsp;</div></li><li><div>                $caps[] = $cap;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( $meta_key && <a href="http://hookr.io/4.7.4/functions/is_protected_meta/" data-id="1420972" title="is_protected_meta" class="function">is_protected_meta</a>( $meta_key, $object_type ) ) {&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/edit_comment/" data-id="1416473" title="edit_comment" class="function">edit_comment</a>':&nbsp;</div></li><li><div>        $comment = <a href="http://hookr.io/4.7.4/functions/get_comment/" data-id="1418830" title="get_comment" class="function">get_comment</a>( $args[0] );&nbsp;</div></li><li><div>        if ( ! $comment ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post = <a href="http://hookr.io/4.7.4/functions/get_post/" data-id="1422530" title="get_post" class="function">get_post</a>( $comment-&gt;comment_post_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * If the post doesn't exist, we have an orphaned comment.&nbsp;</div></li><li><div>         * Fall back to the edit_posts capability, instead.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        if ( $post ) {&nbsp;</div></li><li><div>            $caps = map_meta_cap( '<a href="http://hookr.io/4.7.4/functions/edit_post/" data-id="1417085" title="edit_post" class="function">edit_post</a>', $user_id, $post-&gt;ID );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $caps = map_meta_cap( 'edit_posts', $user_id );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'unfiltered_upload':&nbsp;</div></li><li><div>        if ( defined('ALLOW_UNFILTERED_UPLOADS') && ALLOW_UNFILTERED_UPLOADS && ( !is_multisite() || <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) ) )&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'edit_css' :&nbsp;</div></li><li><div>    case 'unfiltered_html' :&nbsp;</div></li><li><div>        // Disallow unfiltered_html for all users, even admins and super admins.&nbsp;</div></li><li><div>        if ( defined( 'DISALLOW_UNFILTERED_HTML' ) && DISALLOW_UNFILTERED_HTML )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        elseif ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() && ! <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = 'unfiltered_html';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'edit_files':&nbsp;</div></li><li><div>    case 'edit_plugins':&nbsp;</div></li><li><div>    case 'edit_themes':&nbsp;</div></li><li><div>        // Disallow the file editors.&nbsp;</div></li><li><div>        if ( defined( 'DISALLOW_FILE_EDIT' ) && DISALLOW_FILE_EDIT )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        elseif ( defined( 'DISALLOW_FILE_MODS' ) && DISALLOW_FILE_MODS )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        elseif ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() && ! <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'update_plugins':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/delete_plugins/" data-id="1417159" title="delete_plugins" class="function">delete_plugins</a>':&nbsp;</div></li><li><div>    case 'install_plugins':&nbsp;</div></li><li><div>    case 'upload_plugins':&nbsp;</div></li><li><div>    case 'update_themes':&nbsp;</div></li><li><div>    case 'delete_themes':&nbsp;</div></li><li><div>    case 'install_themes':&nbsp;</div></li><li><div>    case 'upload_themes':&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/update_core/" data-id="1417247" title="update_core" class="function">update_core</a>':&nbsp;</div></li><li><div>        // Disallow anything that creates, deletes, or updates core, plugin, or theme files.&nbsp;</div></li><li><div>        // Files in uploads are excepted.&nbsp;</div></li><li><div>        if ( defined( 'DISALLOW_FILE_MODS' ) && DISALLOW_FILE_MODS ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        } elseif ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() && ! <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        } elseif ( 'upload_themes' === $cap ) {&nbsp;</div></li><li><div>            $caps[] = 'install_themes';&nbsp;</div></li><li><div>        } elseif ( 'upload_plugins' === $cap ) {&nbsp;</div></li><li><div>            $caps[] = 'install_plugins';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case '<a href="http://hookr.io/4.7.4/functions/activate_plugins/" data-id="1417158" title="activate_plugins" class="function">activate_plugins</a>':&nbsp;</div></li><li><div>        $caps[] = $cap;&nbsp;</div></li><li><div>        if ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() ) {&nbsp;</div></li><li><div>            // update_, install_, and delete_ are handled above with <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>().&nbsp;</div></li><li><div>            $menu_perms = <a href="http://hookr.io/4.7.4/functions/get_site_option/" data-id="1421306" title="get_site_option" class="function">get_site_option</a>( 'menu_items', array() );&nbsp;</div></li><li><div>            if ( empty( $menu_perms['plugins'] ) )&nbsp;</div></li><li><div>                $caps[] = 'manage_network_plugins';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'delete_user':&nbsp;</div></li><li><div>    case 'delete_users':&nbsp;</div></li><li><div>        // If multisite only super admins can delete users.&nbsp;</div></li><li><div>        if ( <a href="http://hookr.io/4.7.4/functions/is_multisite/" data-id="1420717" title="is_multisite" class="function">is_multisite</a>() && ! <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) )&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = 'delete_users'; // delete_user maps to delete_users.&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'create_users':&nbsp;</div></li><li><div>        if ( !is_multisite() )&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        elseif ( <a href="http://hookr.io/4.7.4/functions/is_super_admin/" data-id="1417902" title="is_super_admin" class="function">is_super_admin</a>( $user_id ) || <a href="http://hookr.io/4.7.4/functions/get_site_option/" data-id="1421306" title="get_site_option" class="function">get_site_option</a>( 'add_new_users' ) )&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'manage_links' :&nbsp;</div></li><li><div>        if ( <a href="http://hookr.io/4.7.4/functions/get_option/" data-id="1421280" title="get_option" class="function">get_option</a>( 'link_manager_enabled' ) )&nbsp;</div></li><li><div>            $caps[] = $cap;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'customize' :&nbsp;</div></li><li><div>        $caps[] = 'edit_theme_options';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'delete_site':&nbsp;</div></li><li><div>        $caps[] = 'manage_options';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'edit_term':&nbsp;</div></li><li><div>    case 'delete_term':&nbsp;</div></li><li><div>    case 'assign_term':&nbsp;</div></li><li><div>        $term_id = (int) $args[0];&nbsp;</div></li><li><div>        $term = <a href="http://hookr.io/4.7.4/functions/get_term/" data-id="1422894" title="get_term" class="function">get_term</a>( $term_id );&nbsp;</div></li><li><div>        if ( ! $term || <a href="http://hookr.io/4.7.4/functions/is_wp_error/" data-id="1420728" title="is_wp_error" class="function">is_wp_error</a>( $term ) ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tax = <a href="http://hookr.io/4.7.4/functions/get_taxonomy/" data-id="1422883" title="get_taxonomy" class="function">get_taxonomy</a>( $term-&gt;taxonomy );&nbsp;</div></li><li><div>        if ( ! $tax ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'delete_term' === $cap && ( $term-&gt;term_id == <a href="http://hookr.io/4.7.4/functions/get_option/" data-id="1421280" title="get_option" class="function">get_option</a>( 'default_' . $term-&gt;taxonomy ) ) ) {&nbsp;</div></li><li><div>            $caps[] = 'do_not_allow';&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $taxo_cap = $cap . 's';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $caps = map_meta_cap( $tax-&gt;cap-&gt;$taxo_cap, $user_id, $term_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'manage_post_tags':&nbsp;</div></li><li><div>    case 'edit_categories':&nbsp;</div></li><li><div>    case 'edit_post_tags':&nbsp;</div></li><li><div>    case 'delete_categories':&nbsp;</div></li><li><div>    case 'delete_post_tags':&nbsp;</div></li><li><div>        $caps[] = 'manage_categories';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'assign_categories':&nbsp;</div></li><li><div>    case 'assign_post_tags':&nbsp;</div></li><li><div>        $caps[] = 'edit_posts';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    case 'create_sites':&nbsp;</div></li><li><div>    case 'delete_sites':&nbsp;</div></li><li><div>    case 'manage_network':&nbsp;</div></li><li><div>    case 'manage_sites':&nbsp;</div></li><li><div>    case 'manage_network_users':&nbsp;</div></li><li><div>    case 'manage_network_plugins':&nbsp;</div></li><li><div>    case 'manage_network_themes':&nbsp;</div></li><li><div>    case 'manage_network_options':&nbsp;</div></li><li><div>        $caps[] = $cap;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    default:&nbsp;</div></li><li><div>        // Handle meta capabilities for custom post types.&nbsp;</div></li><li><div>        global $post_type_meta_caps;&nbsp;</div></li><li><div>        if ( isset( $post_type_meta_caps[ $cap ] ) ) {&nbsp;</div></li><li><div>            $args = array_merge( array( $post_type_meta_caps[ $cap ], $user_id ), $args );&nbsp;</div></li><li><div>            return call_user_func_array( 'map_meta_cap', $args );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If no meta caps match, return the original cap.&nbsp;</div></li><li><div>        $caps[] = $cap;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters a user's capabilities depending on specific context and/or privilege.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.8.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array  $caps    Returns the user's actual capabilities.&nbsp;</div></li><li><div>     * @param string $cap     Capability name.&nbsp;</div></li><li><div>     * @param int    $user_id The user ID.&nbsp;</div></li><li><div>     * @param array  $args    Adds the context to the cap. Typically the object ID.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    return <a href="http://hookr.io/4.7.4/functions/apply_filters/" data-id="1421358" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7.4/filters/map_meta_cap/" data-id="1417923" title="map_meta_cap" class="filter">'map_meta_cap'</a>, $caps, $cap, $user_id, $args );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.0.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/4.7.4/functions/map_meta_cap/" class="active">4.7.4</a></li><li><a href="http://hookr.io/4.7.3/functions/map_meta_cap/" class="">4.7.3</a></li><li><a href="http://hookr.io/4.7.2/functions/map_meta_cap/" class="">4.7.2</a></li><li><a href="http://hookr.io/4.7.1/functions/map_meta_cap/" class="">4.7.1</a></li><li><a href="http://hookr.io/4.7/functions/map_meta_cap/" class="">4.7</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>function</li><li><span></span>map_meta_cap</li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>