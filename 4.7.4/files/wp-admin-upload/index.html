<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4605"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-upload | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.14"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=5a358d63d0d5aa038bc77ac4ca4771c0' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.14' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-upload/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-upload%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-upload%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-upload","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-upload" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-upload</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/upload.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Media Library administration panel.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !current_user_can('upload_files') )&nbsp;</div></li><li><div>  wp_die( __( 'Sorry, you are not allowed to upload files.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$mode = get_user_option( 'media_library_mode', get_current_user_id() ) ? get_user_option( 'media_library_mode', get_current_user_id() ) : 'grid';&nbsp;</div></li><li><div>$modes = array( 'grid', 'list' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( isset( $_GET['mode'] ) && in_array( $_GET['mode'], $modes ) ) {&nbsp;</div></li><li><div>  $mode = $_GET['mode'];&nbsp;</div></li><li><div>  update_user_option( get_current_user_id(), 'media_library_mode', $mode );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( 'grid' === $mode ) {&nbsp;</div></li><li><div>  wp_enqueue_media();&nbsp;</div></li><li><div>  wp_enqueue_script( 'media-grid' );&nbsp;</div></li><li><div>  wp_enqueue_script( 'media' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  remove_action( 'admin_head', 'wp_admin_canonical_url' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $q = $_GET;&nbsp;</div></li><li><div>  <span class="comment">// let JS handle this</span>&nbsp;</div></li><li><div>  unset( $q['s'] );&nbsp;</div></li><li><div>  $vars = wp_edit_attachments_query_vars( $q );&nbsp;</div></li><li><div>  $ignore = array( 'mode', 'post_type', 'post_status', 'posts_per_page' );&nbsp;</div></li><li><div>  foreach ( $vars as $key =&gt; $value ) {&nbsp;</div></li><li><div>      if ( ! $value || in_array( $key, $ignore ) ) {&nbsp;</div></li><li><div>          unset( $vars[ $key ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'media-grid', '_wpMediaGridSettings', array(&nbsp;</div></li><li><div>      'adminUrl' =&gt; parse_url( self_admin_url(), PHP_URL_PATH ), &nbsp;</div></li><li><div>      'queryVars' =&gt; (object) $vars&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>      'id' =&gt; 'overview', &nbsp;</div></li><li><div>      'title' =&gt; __( 'Overview' ), &nbsp;</div></li><li><div>      'content' =&gt;&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'All the files you&#8217;ve uploaded are listed in the Media Library, with the most recent uploads listed first.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'You can view your media in a simple visual grid or a list with columns. Switch between these views using the icons to the left above the media.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'To delete media items, click the Bulk Select button at the top of the screen. Select any items you wish to delete, then click the Delete Selected button. Clicking the Cancel Selection button takes you back to viewing your media.' ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>      'id' =&gt; 'attachment-details', &nbsp;</div></li><li><div>      'title' =&gt; __( 'Attachment Details' ), &nbsp;</div></li><li><div>      'content' =&gt;&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'Clicking an item will display an Attachment Details dialog, which allows you to preview media and make quick edits. Any changes you make to the attachment details will be automatically saved.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'Use the arrow buttons at the top of the dialog, or the left and right arrow keys on your keyboard, to navigate between media items quickly.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'You can also delete individual items and access the extended edit screen from the details dialog.' ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>      '&lt;p&gt;&lt;strong&gt;' . __( 'For more information:' ) . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>      '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment"><span class="comment">//codex.wordpress.org/Media_Library_Screen&quot;&gt;Documentation on Media Library&lt;/a&gt;' ) . '&lt;/p&gt;' .</span></span>&nbsp;</div></li><li><div>      '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment"><span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;' ) . '&lt;/p&gt;'</span></span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $title = __('Media Library');&nbsp;</div></li><li><div>  $parent_file = 'upload.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot; id=&quot;wp-media-grid&quot; data-search=&quot;&lt;?php _admin_search_query() ?&gt;&quot;&gt;&nbsp;</div></li><li><div>      &lt;h1&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      echo esc_html( $title );&nbsp;</div></li><li><div>      if ( current_user_can( 'upload_files' ) ) { ?&gt;&nbsp;</div></li><li><div>          &lt;a href=&quot;&lt;?php echo admin_url( 'media-new.php' ); ?&gt;&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x( 'Add New', 'file' ); ?&gt;&lt;/a&gt;&lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/h1&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;error hide-if-js&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php printf(&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: list view URL */</span>&nbsp;</div></li><li><div>              __( 'The grid view for the Media Library requires JavaScript. &lt;a href=&quot;%s&quot;&gt;Switch to the list view&lt;/a&gt;.' ), &nbsp;</div></li><li><div>              'upload.php?mode=list'&nbsp;</div></li><li><div> ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  include( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_list_table = _get_list_table('WP_Media_List_Table');&nbsp;</div></li><li><div>$pagenum = $wp_list_table-&gt;get_pagenum();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Handle bulk actions</span>&nbsp;</div></li><li><div>$doaction = $wp_list_table-&gt;current_action();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( $doaction ) {&nbsp;</div></li><li><div>  check_admin_referer('bulk-media');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'delete_all' == $doaction ) {&nbsp;</div></li><li><div>      $post_ids = $wpdb-&gt;get_col( &quot;SELECT ID FROM $wpdb-&gt;posts WHERE post_type='attachment' AND post_status = 'trash'&quot; );&nbsp;</div></li><li><div>      $doaction = 'delete';&nbsp;</div></li><li><div>  } elseif ( isset( $_REQUEST['media'] ) ) {&nbsp;</div></li><li><div>      $post_ids = $_REQUEST['media'];&nbsp;</div></li><li><div>  } elseif ( isset( $_REQUEST['ids'] ) ) {&nbsp;</div></li><li><div>      $post_ids = explode( ', ', $_REQUEST['ids'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $location = 'upload.php';&nbsp;</div></li><li><div>  if ( $referer = wp_get_referer() ) {&nbsp;</div></li><li><div>      if ( false !== strpos( $referer, 'upload.php' ) )&nbsp;</div></li><li><div>          $location = remove_query_arg( array( 'trashed', 'untrashed', 'deleted', 'message', 'ids', 'posted' ), $referer );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ( $doaction ) {&nbsp;</div></li><li><div>      case 'detach':&nbsp;</div></li><li><div>          wp_media_attach_action( $_REQUEST['parent_post_id'], 'detach' );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'attach':&nbsp;</div></li><li><div>          wp_media_attach_action( $_REQUEST['found_post_id'] );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'trash':&nbsp;</div></li><li><div>          if ( !isset( $post_ids ) )&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          foreach ( (array) $post_ids as $post_id ) {&nbsp;</div></li><li><div>              if ( !current_user_can( 'delete_post', $post_id ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Sorry, you are not allowed to move this item to the Trash.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( !wp_trash_post( $post_id ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Error in moving to Trash.' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $location = add_query_arg( array( 'trashed' =&gt; count( $post_ids ), 'ids' =&gt; join( ', ', $post_ids ) ), $location );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'untrash':&nbsp;</div></li><li><div>          if ( !isset( $post_ids ) )&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          foreach ( (array) $post_ids as $post_id ) {&nbsp;</div></li><li><div>              if ( !current_user_can( 'delete_post', $post_id ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Sorry, you are not allowed to restore this item from the Trash.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( !wp_untrash_post( $post_id ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Error in restoring from Trash.' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $location = add_query_arg( 'untrashed', count( $post_ids ), $location );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'delete':&nbsp;</div></li><li><div>          if ( !isset( $post_ids ) )&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          foreach ( (array) $post_ids as $post_id_del ) {&nbsp;</div></li><li><div>              if ( !current_user_can( 'delete_post', $post_id_del ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Sorry, you are not allowed to delete this item.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( !wp_delete_attachment( $post_id_del ) )&nbsp;</div></li><li><div>                  wp_die( __( 'Error in deleting.' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $location = add_query_arg( 'deleted', count( $post_ids ), $location );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      default:&nbsp;</div></li><li><div>          <span class="comment">/** This action is documented in wp-admin/edit-comments.php */</span>&nbsp;</div></li><li><div>          $location = apply_filters( 'handle_bulk_actions-' . get_current_screen()-&gt;id, $location, $doaction, $post_ids );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_redirect( $location );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>} elseif ( ! empty( $_GET['_wp_http_referer'] ) ) {&nbsp;</div></li><li><div>   wp_redirect( remove_query_arg( array( '_wp_http_referer', '_wpnonce' ), wp_unslash( $_SERVER['REQUEST_URI'] ) ) );&nbsp;</div></li><li><div>   exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_list_table-&gt;prepare_items();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = __('Media Library');&nbsp;</div></li><li><div>$parent_file = 'upload.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_script( 'media' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_screen_option( 'per_page' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'overview', &nbsp;</div></li><li><div>'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'All the files you&#8217;ve uploaded are listed in the Media Library, with the most recent uploads listed first. You can use the Screen Options tab to customize the display of this screen.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'You can narrow the list by file type/status or by date using the dropdown menus above the media table.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'You can view your media in a simple visual grid or a list with columns. Switch between these views using the icons to the left above the media.' ) . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'actions-links', &nbsp;</div></li><li><div>'title' =&gt; __('Available Actions'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'Hovering over a row reveals action links: Edit, Delete Permanently, and View. Clicking Edit or on the media file&#8217;s name displays a simple screen to edit that individual file&#8217;s metadata. Clicking Delete Permanently will delete the file from the media library (as well as from any posts to which it is currently attached). View will take you to the display page for that file.' ) . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'attaching-files', &nbsp;</div></li><li><div>'title' =&gt; __('Attaching Files'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'If a media file has not been attached to any content, you will see that in the Uploaded To column, and can click on Attach to launch a small popup that will allow you to search for existing content and attach the file.' ) . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __( 'For more information:' ) . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment"><span class="comment">//codex.wordpress.org/Media_Library_Screen&quot;&gt;Documentation on Media Library&lt;/a&gt;' ) . '&lt;/p&gt;' .</span></span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment"><span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;' ) . '&lt;/p&gt;'</span></span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_screen_reader_content( array(&nbsp;</div></li><li><div>  'heading_views' =&gt; __( 'Filter media items list' ), &nbsp;</div></li><li><div>  'heading_pagination' =&gt; __( 'Media items list navigation' ), &nbsp;</div></li><li><div>  'heading_list' =&gt; __( 'Media items list' ), &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>echo esc_html( $title );&nbsp;</div></li><li><div>if ( current_user_can( 'upload_files' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;&lt;?php echo admin_url( 'media-new.php' ); ?&gt;&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x('Add New', 'file'); ?&gt;&lt;/a&gt;&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>if ( isset( $_REQUEST['s'] ) && strlen( $_REQUEST['s'] ) ) {&nbsp;</div></li><li><div>  <span class="comment">/** translators: %s: search keywords */</span>&nbsp;</div></li><li><div>  printf( '&lt;span class=&quot;subtitle&quot;&gt;' . __( 'Search results for &#8220;%s&#8221;' ) . '&lt;/span&gt;', get_search_query() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>$message = '';&nbsp;</div></li><li><div>if ( ! empty( $_GET['posted'] ) ) {&nbsp;</div></li><li><div>  $message = __( 'Media file updated.' );&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg(array('posted'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['attached'] ) && $attached = absint( $_GET['attached'] ) ) {&nbsp;</div></li><li><div>  if ( 1 == $attached ) {&nbsp;</div></li><li><div>      $message = __( 'Media file attached.' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: %s: number of media files */</span></span></span></span></span>&nbsp;</div></li><li><div>      $message = _n( '%s media file attached.', '%s media files attached.', $attached );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $message = sprintf( $message, number_format_i18n( $attached ) );&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg( array( 'detach', 'attached' ), $_SERVER['REQUEST_URI'] );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['detach'] ) && $detached = absint( $_GET['detach'] ) ) {&nbsp;</div></li><li><div>  if ( 1 == $detached ) {&nbsp;</div></li><li><div>      $message = __( 'Media file detached.' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: %s: number of media files */</span></span></span></span></span>&nbsp;</div></li><li><div>      $message = _n( '%s media file detached.', '%s media files detached.', $detached );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $message = sprintf( $message, number_format_i18n( $detached ) );&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg( array( 'detach', 'attached' ), $_SERVER['REQUEST_URI'] );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['deleted'] ) && $deleted = absint( $_GET['deleted'] ) ) {&nbsp;</div></li><li><div>  if ( 1 == $deleted ) {&nbsp;</div></li><li><div>      $message = __( 'Media file permanently deleted.' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: %s: number of media files */</span></span></span></span></span>&nbsp;</div></li><li><div>      $message = _n( '%s media file permanently deleted.', '%s media files permanently deleted.', $deleted );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $message = sprintf( $message, number_format_i18n( $deleted ) );&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg(array('deleted'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['trashed'] ) && $trashed = absint( $_GET['trashed'] ) ) {&nbsp;</div></li><li><div>  if ( 1 == $trashed ) {&nbsp;</div></li><li><div>      $message = __( 'Media file moved to the trash.' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: %s: number of media files */</span></span></span></span></span>&nbsp;</div></li><li><div>      $message = _n( '%s media file moved to the trash.', '%s media files moved to the trash.', $trashed );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $message = sprintf( $message, number_format_i18n( $trashed ) );&nbsp;</div></li><li><div>  $message .= ' &lt;a href=&quot;' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.(isset($_GET['ids']) ? $_GET['ids'] : ''), &quot;bulk-media&quot; ) ) . '&quot;&gt;' . __('Undo') . '&lt;/a&gt;';&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg(array('trashed'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['untrashed'] ) && $untrashed = absint( $_GET['untrashed'] ) ) {&nbsp;</div></li><li><div>  if ( 1 == $untrashed ) {&nbsp;</div></li><li><div>      $message = __( 'Media file restored from the trash.' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: %s: number of media files */</span></span></span></span></span>&nbsp;</div></li><li><div>      $message = _n( '%s media file restored from the trash.', '%s media files restored from the trash.', $untrashed );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $message = sprintf( $message, number_format_i18n( $untrashed ) );&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg(array('untrashed'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$messages[1] = __( 'Media file updated.' );&nbsp;</div></li><li><div>$messages[2] = __( 'Media file permanently deleted.' );&nbsp;</div></li><li><div>$messages[3] = __( 'Error saving media file.' );&nbsp;</div></li><li><div>$messages[4] = __( 'Media file moved to the trash.' ) . ' &lt;a href=&quot;' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.(isset($_GET['ids']) ? $_GET['ids'] : ''), &quot;bulk-media&quot; ) ) . '&quot;&gt;' . __( 'Undo' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>$messages[5] = __( 'Media file restored from the trash.' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $_GET['message'] ) && isset( $messages[ $_GET['message'] ] ) ) {&nbsp;</div></li><li><div>  $message = $messages[ $_GET['message'] ];&nbsp;</div></li><li><div>  $_SERVER['REQUEST_URI'] = remove_query_arg(array('message'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !empty($message) ) { ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php echo $message; ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;form id=&quot;posts-filter&quot; method=&quot;get&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;views(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;display(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div id=&quot;ajax-response&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php find_posts_div(); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>include( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>