<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4512"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-includes-schema | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=bbf0766ebabd0a45be189e2034b5e24d' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-includes-schema/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-schema%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-schema%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-includes-schema","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-includes-schema" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-includes-schema</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/includes/schema.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WordPress Administration Scheme API</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Here we keep the DB structure and option values.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Declare these as global in case schema.php is included from a function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb   $wpdb</span>&nbsp;</div></li><li><div><span class="comment"> * @global array  $wp_queries</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $charset_collate</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>global $wpdb, $wp_queries, $charset_collate;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * The database character collate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>$charset_collate = $wpdb-&gt;get_charset_collate();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the SQL for creating database tables.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb $wpdb WordPress database abstraction object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $scope Optional. The tables for which to retrieve SQL. Can be all, global, ms_global, or blog tables. Defaults to all.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $blog_id Optional. The site ID for which to retrieve SQL. Default is the current site ID.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The SQL needed to create the requested tables.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_db_schema( $scope = 'all', $blog_id = null ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $charset_collate = $wpdb-&gt;get_charset_collate();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $blog_id && $blog_id != $wpdb-&gt;blogid )&nbsp;</div></li><li><div>      $old_blog_id = $wpdb-&gt;set_blog_id( $blog_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Engage multisite if in the middle of turning it on from network.php.</span>&nbsp;</div></li><li><div>  $is_multisite = is_multisite() || ( defined( 'WP_INSTALLING_NETWORK' ) && WP_INSTALLING_NETWORK );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Indexes have a maximum size of 767 bytes. Historically, we haven't need to be concerned about that.</span>&nbsp;</div></li><li><div><span class="comment">   * As of 4.2, however, we moved to utf8mb4, which uses 4 bytes per character. This means that an index which</span>&nbsp;</div></li><li><div><span class="comment">   * used to have room for floor(767/3) = 255 characters, now only has room for floor(767/4) = 191 characters.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $max_index_length = 191;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Blog specific tables.</span>&nbsp;</div></li><li><div>  $blog_tables = &quot;CREATE TABLE $wpdb-&gt;termmeta (&nbsp;</div></li><li><div>meta_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>term_id bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>meta_key varchar(255) default NULL, &nbsp;</div></li><li><div>meta_value longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (meta_id), &nbsp;</div></li><li><div>KEY term_id (term_id), &nbsp;</div></li><li><div>KEY meta_key (meta_key($max_index_length))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;terms (&nbsp;</div></li><li><div> term_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div> name varchar(200) NOT NULL default '', &nbsp;</div></li><li><div> slug varchar(200) NOT NULL default '', &nbsp;</div></li><li><div> term_group bigint(10) NOT NULL default 0, &nbsp;</div></li><li><div> PRIMARY KEY  (term_id), &nbsp;</div></li><li><div> KEY slug (slug($max_index_length)), &nbsp;</div></li><li><div> KEY name (name($max_index_length))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;term_taxonomy (&nbsp;</div></li><li><div> term_taxonomy_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div> term_id bigint(20) unsigned NOT NULL default 0, &nbsp;</div></li><li><div> taxonomy varchar(32) NOT NULL default '', &nbsp;</div></li><li><div> description longtext NOT NULL, &nbsp;</div></li><li><div> parent bigint(20) unsigned NOT NULL default 0, &nbsp;</div></li><li><div> count bigint(20) NOT NULL default 0, &nbsp;</div></li><li><div> PRIMARY KEY  (term_taxonomy_id), &nbsp;</div></li><li><div> UNIQUE KEY term_id_taxonomy (term_id, taxonomy), &nbsp;</div></li><li><div> KEY taxonomy (taxonomy)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;term_relationships (&nbsp;</div></li><li><div> object_id bigint(20) unsigned NOT NULL default 0, &nbsp;</div></li><li><div> term_taxonomy_id bigint(20) unsigned NOT NULL default 0, &nbsp;</div></li><li><div> term_order int(11) NOT NULL default 0, &nbsp;</div></li><li><div> PRIMARY KEY  (object_id, term_taxonomy_id), &nbsp;</div></li><li><div> KEY term_taxonomy_id (term_taxonomy_id)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;commentmeta (&nbsp;</div></li><li><div>meta_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>comment_id bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>meta_key varchar(255) default NULL, &nbsp;</div></li><li><div>meta_value longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (meta_id), &nbsp;</div></li><li><div>KEY comment_id (comment_id), &nbsp;</div></li><li><div>KEY meta_key (meta_key($max_index_length))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;comments (&nbsp;</div></li><li><div>comment_ID bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>comment_post_ID bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>comment_author tinytext NOT NULL, &nbsp;</div></li><li><div>comment_author_email varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>comment_author_url varchar(200) NOT NULL default '', &nbsp;</div></li><li><div>comment_author_IP varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>comment_date datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>comment_date_gmt datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>comment_content text NOT NULL, &nbsp;</div></li><li><div>comment_karma int(11) NOT NULL default '0', &nbsp;</div></li><li><div>comment_approved varchar(20) NOT NULL default '1', &nbsp;</div></li><li><div>comment_agent varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>comment_type varchar(20) NOT NULL default '', &nbsp;</div></li><li><div>comment_parent bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>user_id bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>PRIMARY KEY  (comment_ID), &nbsp;</div></li><li><div>KEY comment_post_ID (comment_post_ID), &nbsp;</div></li><li><div>KEY comment_approved_date_gmt (comment_approved, comment_date_gmt), &nbsp;</div></li><li><div>KEY comment_date_gmt (comment_date_gmt), &nbsp;</div></li><li><div>KEY comment_parent (comment_parent), &nbsp;</div></li><li><div>KEY comment_author_email (comment_author_email(10))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;links (&nbsp;</div></li><li><div>link_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>link_url varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>link_name varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>link_image varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>link_target varchar(25) NOT NULL default '', &nbsp;</div></li><li><div>link_description varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>link_visible varchar(20) NOT NULL default 'Y', &nbsp;</div></li><li><div>link_owner bigint(20) unsigned NOT NULL default '1', &nbsp;</div></li><li><div>link_rating int(11) NOT NULL default '0', &nbsp;</div></li><li><div>link_updated datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>link_rel varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>link_notes mediumtext NOT NULL, &nbsp;</div></li><li><div>link_rss varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>PRIMARY KEY  (link_id), &nbsp;</div></li><li><div>KEY link_visible (link_visible)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;options (&nbsp;</div></li><li><div>option_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>option_name varchar(191) NOT NULL default '', &nbsp;</div></li><li><div>option_value longtext NOT NULL, &nbsp;</div></li><li><div>autoload varchar(20) NOT NULL default 'yes', &nbsp;</div></li><li><div>PRIMARY KEY  (option_id), &nbsp;</div></li><li><div>UNIQUE KEY option_name (option_name)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;postmeta (&nbsp;</div></li><li><div>meta_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>post_id bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>meta_key varchar(255) default NULL, &nbsp;</div></li><li><div>meta_value longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (meta_id), &nbsp;</div></li><li><div>KEY post_id (post_id), &nbsp;</div></li><li><div>KEY meta_key (meta_key($max_index_length))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;posts (&nbsp;</div></li><li><div>ID bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>post_author bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>post_date datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>post_date_gmt datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>post_content longtext NOT NULL, &nbsp;</div></li><li><div>post_title text NOT NULL, &nbsp;</div></li><li><div>post_excerpt text NOT NULL, &nbsp;</div></li><li><div>post_status varchar(20) NOT NULL default 'publish', &nbsp;</div></li><li><div>comment_status varchar(20) NOT NULL default 'open', &nbsp;</div></li><li><div>ping_status varchar(20) NOT NULL default 'open', &nbsp;</div></li><li><div>post_password varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>post_name varchar(200) NOT NULL default '', &nbsp;</div></li><li><div>to_ping text NOT NULL, &nbsp;</div></li><li><div>pinged text NOT NULL, &nbsp;</div></li><li><div>post_modified datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>post_modified_gmt datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>post_content_filtered longtext NOT NULL, &nbsp;</div></li><li><div>post_parent bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>guid varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>menu_order int(11) NOT NULL default '0', &nbsp;</div></li><li><div>post_type varchar(20) NOT NULL default 'post', &nbsp;</div></li><li><div>post_mime_type varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>comment_count bigint(20) NOT NULL default '0', &nbsp;</div></li><li><div>PRIMARY KEY  (ID), &nbsp;</div></li><li><div>KEY post_name (post_name($max_index_length)), &nbsp;</div></li><li><div>KEY type_status_date (post_type, post_status, post_date, ID), &nbsp;</div></li><li><div>KEY post_parent (post_parent), &nbsp;</div></li><li><div>KEY post_author (post_author)&nbsp;</div></li><li><div>) $charset_collate;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Single site users table. The multisite flavor of the users table is handled below.</span>&nbsp;</div></li><li><div>  $users_single_table = &quot;CREATE TABLE $wpdb-&gt;users (&nbsp;</div></li><li><div>ID bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>user_login varchar(60) NOT NULL default '', &nbsp;</div></li><li><div>user_pass varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>user_nicename varchar(50) NOT NULL default '', &nbsp;</div></li><li><div>user_email varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>user_url varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>user_registered datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>user_activation_key varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>user_status int(11) NOT NULL default '0', &nbsp;</div></li><li><div>display_name varchar(250) NOT NULL default '', &nbsp;</div></li><li><div>PRIMARY KEY  (ID), &nbsp;</div></li><li><div>KEY user_login_key (user_login), &nbsp;</div></li><li><div>KEY user_nicename (user_nicename), &nbsp;</div></li><li><div>KEY user_email (user_email)&nbsp;</div></li><li><div>) $charset_collate;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Multisite users table</span>&nbsp;</div></li><li><div>  $users_multi_table = &quot;CREATE TABLE $wpdb-&gt;users (&nbsp;</div></li><li><div>ID bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>user_login varchar(60) NOT NULL default '', &nbsp;</div></li><li><div>user_pass varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>user_nicename varchar(50) NOT NULL default '', &nbsp;</div></li><li><div>user_email varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>user_url varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>user_registered datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>user_activation_key varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>user_status int(11) NOT NULL default '0', &nbsp;</div></li><li><div>display_name varchar(250) NOT NULL default '', &nbsp;</div></li><li><div>spam tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>deleted tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>PRIMARY KEY  (ID), &nbsp;</div></li><li><div>KEY user_login_key (user_login), &nbsp;</div></li><li><div>KEY user_nicename (user_nicename), &nbsp;</div></li><li><div>KEY user_email (user_email)&nbsp;</div></li><li><div>) $charset_collate;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Usermeta.</span>&nbsp;</div></li><li><div>  $usermeta_table = &quot;CREATE TABLE $wpdb-&gt;usermeta (&nbsp;</div></li><li><div>umeta_id bigint(20) unsigned NOT NULL auto_increment, &nbsp;</div></li><li><div>user_id bigint(20) unsigned NOT NULL default '0', &nbsp;</div></li><li><div>meta_key varchar(255) default NULL, &nbsp;</div></li><li><div>meta_value longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (umeta_id), &nbsp;</div></li><li><div>KEY user_id (user_id), &nbsp;</div></li><li><div>KEY meta_key (meta_key($max_index_length))&nbsp;</div></li><li><div>) $charset_collate;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Global tables</span>&nbsp;</div></li><li><div>  if ( $is_multisite )&nbsp;</div></li><li><div>      $global_tables = $users_multi_table . $usermeta_table;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $global_tables = $users_single_table . $usermeta_table;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Multisite global tables.</span>&nbsp;</div></li><li><div>  $ms_global_tables = &quot;CREATE TABLE $wpdb-&gt;blogs (&nbsp;</div></li><li><div>blog_id bigint(20) NOT NULL auto_increment, &nbsp;</div></li><li><div>site_id bigint(20) NOT NULL default '0', &nbsp;</div></li><li><div>domain varchar(200) NOT NULL default '', &nbsp;</div></li><li><div>path varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>registered datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>last_updated datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>public tinyint(2) NOT NULL default '1', &nbsp;</div></li><li><div>archived tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>mature tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>spam tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>deleted tinyint(2) NOT NULL default '0', &nbsp;</div></li><li><div>lang_id int(11) NOT NULL default '0', &nbsp;</div></li><li><div>PRIMARY KEY  (blog_id), &nbsp;</div></li><li><div>KEY domain (domain(50), path(5)), &nbsp;</div></li><li><div>KEY lang_id (lang_id)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;blog_versions (&nbsp;</div></li><li><div>blog_id bigint(20) NOT NULL default '0', &nbsp;</div></li><li><div>db_version varchar(20) NOT NULL default '', &nbsp;</div></li><li><div>last_updated datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>PRIMARY KEY  (blog_id), &nbsp;</div></li><li><div>KEY db_version (db_version)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;registration_log (&nbsp;</div></li><li><div>ID bigint(20) NOT NULL auto_increment, &nbsp;</div></li><li><div>email varchar(255) NOT NULL default '', &nbsp;</div></li><li><div>IP varchar(30) NOT NULL default '', &nbsp;</div></li><li><div>blog_id bigint(20) NOT NULL default '0', &nbsp;</div></li><li><div>date_registered datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>PRIMARY KEY  (ID), &nbsp;</div></li><li><div>KEY IP (IP)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;site (&nbsp;</div></li><li><div>id bigint(20) NOT NULL auto_increment, &nbsp;</div></li><li><div>domain varchar(200) NOT NULL default '', &nbsp;</div></li><li><div>path varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>PRIMARY KEY  (id), &nbsp;</div></li><li><div>KEY domain (domain(140), path(51))&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;sitemeta (&nbsp;</div></li><li><div>meta_id bigint(20) NOT NULL auto_increment, &nbsp;</div></li><li><div>site_id bigint(20) NOT NULL default '0', &nbsp;</div></li><li><div>meta_key varchar(255) default NULL, &nbsp;</div></li><li><div>meta_value longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (meta_id), &nbsp;</div></li><li><div>KEY meta_key (meta_key($max_index_length)), &nbsp;</div></li><li><div>KEY site_id (site_id)&nbsp;</div></li><li><div>) $charset_collate;&nbsp;</div></li><li><div>CREATE TABLE $wpdb-&gt;signups (&nbsp;</div></li><li><div>signup_id bigint(20) NOT NULL auto_increment, &nbsp;</div></li><li><div>domain varchar(200) NOT NULL default '', &nbsp;</div></li><li><div>path varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>title longtext NOT NULL, &nbsp;</div></li><li><div>user_login varchar(60) NOT NULL default '', &nbsp;</div></li><li><div>user_email varchar(100) NOT NULL default '', &nbsp;</div></li><li><div>registered datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>activated datetime NOT NULL default '0000-00-00 00:00:00', &nbsp;</div></li><li><div>active tinyint(1) NOT NULL default '0', &nbsp;</div></li><li><div>activation_key varchar(50) NOT NULL default '', &nbsp;</div></li><li><div>meta longtext, &nbsp;</div></li><li><div>PRIMARY KEY  (signup_id), &nbsp;</div></li><li><div>KEY activation_key (activation_key), &nbsp;</div></li><li><div>KEY user_email (user_email), &nbsp;</div></li><li><div>KEY user_login_email (user_login, user_email), &nbsp;</div></li><li><div>KEY domain_path (domain(140), path(51))&nbsp;</div></li><li><div>) $charset_collate;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ( $scope ) {&nbsp;</div></li><li><div>      case 'blog' :&nbsp;</div></li><li><div>          $queries = $blog_tables;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'global' :&nbsp;</div></li><li><div>          $queries = $global_tables;&nbsp;</div></li><li><div>          if ( $is_multisite )&nbsp;</div></li><li><div>              $queries .= $ms_global_tables;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'ms_global' :&nbsp;</div></li><li><div>          $queries = $ms_global_tables;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'all' :&nbsp;</div></li><li><div>      default:&nbsp;</div></li><li><div>          $queries = $global_tables . $blog_tables;&nbsp;</div></li><li><div>          if ( $is_multisite )&nbsp;</div></li><li><div>              $queries .= $ms_global_tables;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $old_blog_id ) )&nbsp;</div></li><li><div>      $wpdb-&gt;set_blog_id( $old_blog_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $queries;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Populate for back compat.</span>&nbsp;</div></li><li><div>$wp_queries = wp_get_db_schema( 'all' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create WordPress options and set the default values.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb $wpdb WordPress database abstraction object.</span>&nbsp;</div></li><li><div><span class="comment"> * @global int  $wp_db_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global int  $wp_current_db_version</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_options() {&nbsp;</div></li><li><div>  global $wpdb, $wp_db_version, $wp_current_db_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $guessurl = wp_guess_url();&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before creating WordPress options and populating their default values.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'populate_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ini_get('safe_mode') ) {&nbsp;</div></li><li><div>      <span class="comment">// Safe mode can break mkdir() so use a flat structure by default.</span>&nbsp;</div></li><li><div>      $uploads_use_yearmonth_folders = 0;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $uploads_use_yearmonth_folders = 1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If WP_DEFAULT_THEME doesn't exist, fall back to the latest core default theme.</span>&nbsp;</div></li><li><div>  $stylesheet = $template = WP_DEFAULT_THEME;&nbsp;</div></li><li><div>  $theme = wp_get_theme( WP_DEFAULT_THEME );&nbsp;</div></li><li><div>  if ( ! $theme-&gt;exists() ) {&nbsp;</div></li><li><div>      $theme = WP_Theme::get_core_default_theme();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If we can't find a core default theme, WP_DEFAULT_THEME is the best we can do.</span>&nbsp;</div></li><li><div>  if ( $theme ) {&nbsp;</div></li><li><div>      $stylesheet = $theme-&gt;get_stylesheet();&nbsp;</div></li><li><div>      $template = $theme-&gt;get_template();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $timezone_string = '';&nbsp;</div></li><li><div>  $gmt_offset = 0;&nbsp;</div></li><li><div>  <span class="comment">/** translators: default GMT offset or timezone string. Must be either a valid offset (-12 to 14)</span>&nbsp;</div></li><li><div><span class="comment">     or a valid timezone string (America/New_York). See https://secure.php.net/manual/en/timezones.php</span>&nbsp;</div></li><li><div><span class="comment">     for all timezone strings supported by PHP.</span>&nbsp;</div></li><li><div><span class="comment">  */</span>&nbsp;</div></li><li><div>  $offset_or_tz = _x( '0', 'default GMT offset or timezone string' );&nbsp;</div></li><li><div>  if ( is_numeric( $offset_or_tz ) )&nbsp;</div></li><li><div>      $gmt_offset = $offset_or_tz;&nbsp;</div></li><li><div>  elseif ( $offset_or_tz && in_array( $offset_or_tz, timezone_identifiers_list() ) )&nbsp;</div></li><li><div>          $timezone_string = $offset_or_tz;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $options = array(&nbsp;</div></li><li><div>  'siteurl' =&gt; $guessurl, &nbsp;</div></li><li><div>  'home' =&gt; $guessurl, &nbsp;</div></li><li><div>  'blogname' =&gt; __('My Site'), &nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** translators: site tagline */</span></span>&nbsp;</div></li><li><div>  'blogdescription' =&gt; __('Just another WordPress site'), &nbsp;</div></li><li><div>  'users_can_register' =&gt; 0, &nbsp;</div></li><li><div>  'admin_email' =&gt; 'you@example.com', &nbsp;</div></li><li><div>  <span class="comment">/** translators: default start of the week. 0 = Sunday, 1 = Monday */</span>&nbsp;</div></li><li><div>  'start_of_week' =&gt; _x( '1', 'start of week' ), &nbsp;</div></li><li><div>  'use_balanceTags' =&gt; 0, &nbsp;</div></li><li><div>  'use_smilies' =&gt; 1, &nbsp;</div></li><li><div>  'require_name_email' =&gt; 1, &nbsp;</div></li><li><div>  'comments_notify' =&gt; 1, &nbsp;</div></li><li><div>  'posts_per_rss' =&gt; 10, &nbsp;</div></li><li><div>  'rss_use_excerpt' =&gt; 0, &nbsp;</div></li><li><div>  'mailserver_url' =&gt; 'mail.example.com', &nbsp;</div></li><li><div>  'mailserver_login' =&gt; 'login@example.com', &nbsp;</div></li><li><div>  'mailserver_pass' =&gt; 'password', &nbsp;</div></li><li><div>  'mailserver_port' =&gt; 110, &nbsp;</div></li><li><div>  'default_category' =&gt; 1, &nbsp;</div></li><li><div>  'default_comment_status' =&gt; 'open', &nbsp;</div></li><li><div>  'default_ping_status' =&gt; 'open', &nbsp;</div></li><li><div>  'default_pingback_flag' =&gt; 1, &nbsp;</div></li><li><div>  'posts_per_page' =&gt; 10, &nbsp;</div></li><li><div>  <span class="comment">/** translators: default date format, see https://secure.php.net/date */</span>&nbsp;</div></li><li><div>  'date_format' =&gt; __('F j, Y'), &nbsp;</div></li><li><div>  <span class="comment">/** translators: default time format, see https://secure.php.net/date */</span>&nbsp;</div></li><li><div>  'time_format' =&gt; __('g:i a'), &nbsp;</div></li><li><div>  <span class="comment">/** translators: links last updated date format, see https://secure.php.net/date */</span>&nbsp;</div></li><li><div>  'links_updated_date_format' =&gt; __('F j, Y g:i a'), &nbsp;</div></li><li><div>  'comment_moderation' =&gt; 0, &nbsp;</div></li><li><div>  'moderation_notify' =&gt; 1, &nbsp;</div></li><li><div>  'permalink_structure' =&gt; '', &nbsp;</div></li><li><div>  'rewrite_rules' =&gt; '', &nbsp;</div></li><li><div>  'hack_file' =&gt; 0, &nbsp;</div></li><li><div>  'blog_charset' =&gt; 'UTF-8', &nbsp;</div></li><li><div>  'moderation_keys' =&gt; '', &nbsp;</div></li><li><div>  'active_plugins' =&gt; array(), &nbsp;</div></li><li><div>  'category_base' =&gt; '', &nbsp;</div></li><li><div>  'ping_sites' =&gt; 'http:<span class="comment">//rpc.pingomatic.com/', </span>&nbsp;</div></li><li><div>  'comment_max_links' =&gt; 2, &nbsp;</div></li><li><div>  'gmt_offset' =&gt; $gmt_offset, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 1.5</span>&nbsp;</div></li><li><div>  'default_email_category' =&gt; 1, &nbsp;</div></li><li><div>  'recently_edited' =&gt; '', &nbsp;</div></li><li><div>  'template' =&gt; $template, &nbsp;</div></li><li><div>  'stylesheet' =&gt; $stylesheet, &nbsp;</div></li><li><div>  'comment_whitelist' =&gt; 1, &nbsp;</div></li><li><div>  'blacklist_keys' =&gt; '', &nbsp;</div></li><li><div>  'comment_registration' =&gt; 0, &nbsp;</div></li><li><div>  'html_type' =&gt; 'text/html', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 1.5</span>.1&nbsp;</div></li><li><div>  'use_trackback' =&gt; 0, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.0</span>&nbsp;</div></li><li><div>  'default_role' =&gt; 'subscriber', &nbsp;</div></li><li><div>  'db_version' =&gt; $wp_db_version, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.0</span>.1&nbsp;</div></li><li><div>  'uploads_use_yearmonth_folders' =&gt; $uploads_use_yearmonth_folders, &nbsp;</div></li><li><div>  'upload_path' =&gt; '', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.1</span>&nbsp;</div></li><li><div>  'blog_public' =&gt; '1', &nbsp;</div></li><li><div>  'default_link_category' =&gt; 2, &nbsp;</div></li><li><div>  'show_on_front' =&gt; 'posts', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.2</span>&nbsp;</div></li><li><div>  'tag_base' =&gt; '', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.5</span>&nbsp;</div></li><li><div>  'show_avatars' =&gt; '1', &nbsp;</div></li><li><div>  'avatar_rating' =&gt; 'G', &nbsp;</div></li><li><div>  'upload_url_path' =&gt; '', &nbsp;</div></li><li><div>  'thumbnail_size_w' =&gt; 150, &nbsp;</div></li><li><div>  'thumbnail_size_h' =&gt; 150, &nbsp;</div></li><li><div>  'thumbnail_crop' =&gt; 1, &nbsp;</div></li><li><div>  'medium_size_w' =&gt; 300, &nbsp;</div></li><li><div>  'medium_size_h' =&gt; 300, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.6</span>&nbsp;</div></li><li><div>  'avatar_default' =&gt; 'mystery', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.7</span>&nbsp;</div></li><li><div>  'large_size_w' =&gt; 1024, &nbsp;</div></li><li><div>  'large_size_h' =&gt; 1024, &nbsp;</div></li><li><div>  'image_default_link_type' =&gt; 'none', &nbsp;</div></li><li><div>  'image_default_size' =&gt; '', &nbsp;</div></li><li><div>  'image_default_align' =&gt; '', &nbsp;</div></li><li><div>  'close_comments_for_old_posts' =&gt; 0, &nbsp;</div></li><li><div>  'close_comments_days_old' =&gt; 14, &nbsp;</div></li><li><div>  'thread_comments' =&gt; 1, &nbsp;</div></li><li><div>  'thread_comments_depth' =&gt; 5, &nbsp;</div></li><li><div>  'page_comments' =&gt; 0, &nbsp;</div></li><li><div>  'comments_per_page' =&gt; 50, &nbsp;</div></li><li><div>  'default_comments_page' =&gt; 'newest', &nbsp;</div></li><li><div>  'comment_order' =&gt; 'asc', &nbsp;</div></li><li><div>  'sticky_posts' =&gt; array(), &nbsp;</div></li><li><div>  'widget_categories' =&gt; array(), &nbsp;</div></li><li><div>  'widget_text' =&gt; array(), &nbsp;</div></li><li><div>  'widget_rss' =&gt; array(), &nbsp;</div></li><li><div>  'uninstall_plugins' =&gt; array(), &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 2.8</span>&nbsp;</div></li><li><div>  'timezone_string' =&gt; $timezone_string, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.0</span>&nbsp;</div></li><li><div>  'page_for_posts' =&gt; 0, &nbsp;</div></li><li><div>  'page_on_front' =&gt; 0, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.1</span>&nbsp;</div></li><li><div>  'default_post_format' =&gt; 0, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.5</span>&nbsp;</div></li><li><div>  'link_manager_enabled' =&gt; 0, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 4.3.0</span>&nbsp;</div></li><li><div>  'finished_splitting_shared_terms' =&gt; 1, &nbsp;</div></li><li><div>  'site_icon' =&gt; 0, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 4.4.0</span>&nbsp;</div></li><li><div>  'medium_large_size_w' =&gt; 768, &nbsp;</div></li><li><div>  'medium_large_size_h' =&gt; 0, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.3</span>&nbsp;</div></li><li><div>  if ( ! is_multisite() ) {&nbsp;</div></li><li><div>      $options['initial_db_version'] = ! empty( $wp_current_db_version ) && $wp_current_db_version &lt; $wp_db_version&nbsp;</div></li><li><div>          ? $wp_current_db_version : $wp_db_version;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.0</span> multisite&nbsp;</div></li><li><div>  if ( is_multisite() ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">/** translators: site tagline */</span></span>&nbsp;</div></li><li><div>      $options[ 'blogdescription' ] = sprintf(__('Just another %s site'), get_network()-&gt;site_name );&nbsp;</div></li><li><div>      $options[ 'permalink_structure' ] = '/%year%/%monthnum%/%day%/%postname%/';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set autoload to no for these options</span>&nbsp;</div></li><li><div>  $fat_options = array( 'moderation_keys', 'recently_edited', 'blacklist_keys', 'uninstall_plugins' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $keys = &quot;'&quot; . implode( &quot;', '&quot;, array_keys( $options ) ) . &quot;'&quot;;&nbsp;</div></li><li><div>  $existing_options = $wpdb-&gt;get_col( &quot;SELECT option_name FROM $wpdb-&gt;options WHERE option_name in ( $keys )&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $insert = '';&nbsp;</div></li><li><div>  foreach ( $options as $option =&gt; $value ) {&nbsp;</div></li><li><div>      if ( in_array($option, $existing_options) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      if ( in_array($option, $fat_options) )&nbsp;</div></li><li><div>          $autoload = 'no';&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $autoload = 'yes';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_array($value) )&nbsp;</div></li><li><div>          $value = serialize($value);&nbsp;</div></li><li><div>      if ( !empty($insert) )&nbsp;</div></li><li><div>          $insert .= ', ';&nbsp;</div></li><li><div>      $insert .= $wpdb-&gt;prepare( &quot;(%s, %s, %s)&quot;, $option, $value, $autoload );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty($insert) )&nbsp;</div></li><li><div>      $wpdb-&gt;query(&quot;INSERT INTO $wpdb-&gt;options (option_name, option_value, autoload) VALUES &quot; . $insert);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// In case it is set, but blank, update &quot;home&quot;.</span>&nbsp;</div></li><li><div>  if ( !__get_option('home') ) update_option('home', $guessurl);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Delete unused options.</span>&nbsp;</div></li><li><div>  $unusedoptions = array(&nbsp;</div></li><li><div>      'blodotgsping_url', 'bodyterminator', 'emailtestonly', 'phoneemail_separator', 'smilies_directory', &nbsp;</div></li><li><div>      'subjectprefix', 'use_bbcode', 'use_blodotgsping', 'use_phoneemail', 'use_quicktags', 'use_weblogsping', &nbsp;</div></li><li><div>      'weblogs_cache_file', 'use_preview', 'use_htmltrans', 'smilies_directory', 'fileupload_allowedusers', &nbsp;</div></li><li><div>      'use_phoneemail', 'default_post_status', 'default_post_category', 'archive_mode', 'time_difference', &nbsp;</div></li><li><div>      'links_minadminlevel', 'links_use_adminlevels', 'links_rating_type', 'links_rating_char', &nbsp;</div></li><li><div>      'links_rating_ignore_zero', 'links_rating_single_image', 'links_rating_image0', 'links_rating_image1', &nbsp;</div></li><li><div>      'links_rating_image2', 'links_rating_image3', 'links_rating_image4', 'links_rating_image5', &nbsp;</div></li><li><div>      'links_rating_image6', 'links_rating_image7', 'links_rating_image8', 'links_rating_image9', &nbsp;</div></li><li><div>      'links_recently_updated_time', 'links_recently_updated_prepend', 'links_recently_updated_append', &nbsp;</div></li><li><div>      'weblogs_cacheminutes', 'comment_allowed_tags', 'search_engine_friendly_urls', 'default_geourl_lat', &nbsp;</div></li><li><div>      'default_geourl_lon', 'use_default_geourl', 'weblogs_xml_url', 'new_users_can_blog', '_wpnonce', &nbsp;</div></li><li><div>      '_wp_http_referer', 'Update', 'action', 'rich_editing', 'autosave_interval', 'deactivated_plugins', &nbsp;</div></li><li><div>      'can_compress_scripts', 'page_uris', 'update_core', 'update_plugins', 'update_themes', 'doing_cron', &nbsp;</div></li><li><div>      'random_seed', 'rss_excerpt_length', 'secret', 'use_linksupdate', 'default_comment_status_page', &nbsp;</div></li><li><div>      'wporg_popular_tags', 'what_to_show', 'rss_language', 'language', 'enable_xmlrpc', 'enable_app', &nbsp;</div></li><li><div>      'embed_autourls', 'default_post_edit_rows', 'gzipcompression', 'advanced_edit'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  foreach ( $unusedoptions as $option )&nbsp;</div></li><li><div>      delete_option($option);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Delete obsolete magpie stuff.</span>&nbsp;</div></li><li><div>  $wpdb-&gt;query(&quot;DELETE FROM $wpdb-&gt;options WHERE option_name REGEXP '^rss_[0-9a-f]{32}(_ts)?$'&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Deletes all expired transients. The multi-table delete syntax is used</span>&nbsp;</div></li><li><div><span class="comment">   * to delete the transient record from table a, and the corresponding</span>&nbsp;</div></li><li><div><span class="comment">   * transient_timeout record from table b.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $time = time();&nbsp;</div></li><li><div>  $sql = &quot;DELETE a, b FROM $wpdb-&gt;options a, $wpdb-&gt;options b&nbsp;</div></li><li><div>      WHERE a.option_name LIKE %s&nbsp;</div></li><li><div>      AND a.option_name NOT LIKE %s&nbsp;</div></li><li><div>      AND b.option_name = CONCAT( '_transient_timeout_', SUBSTRING( a.option_name, 12 ) )&nbsp;</div></li><li><div>      AND b.option_value &lt; %d&quot;;&nbsp;</div></li><li><div>  $wpdb-&gt;query( $wpdb-&gt;prepare( $sql, $wpdb-&gt;esc_like( '_transient_' ) . '%', $wpdb-&gt;esc_like( '_transient_timeout_' ) . '%', $time ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_main_site() && is_main_network() ) {&nbsp;</div></li><li><div>      $sql = &quot;DELETE a, b FROM $wpdb-&gt;options a, $wpdb-&gt;options b&nbsp;</div></li><li><div>          WHERE a.option_name LIKE %s&nbsp;</div></li><li><div>          AND a.option_name NOT LIKE %s&nbsp;</div></li><li><div>          AND b.option_name = CONCAT( '_site_transient_timeout_', SUBSTRING( a.option_name, 17 ) )&nbsp;</div></li><li><div>          AND b.option_value &lt; %d&quot;;&nbsp;</div></li><li><div>      $wpdb-&gt;query( $wpdb-&gt;prepare( $sql, $wpdb-&gt;esc_like( '_site_transient_' ) . '%', $wpdb-&gt;esc_like( '_site_transient_timeout_' ) . '%', $time ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Execute WordPress role creation for the various WordPress versions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles() {&nbsp;</div></li><li><div>  populate_roles_160();&nbsp;</div></li><li><div>  populate_roles_210();&nbsp;</div></li><li><div>  populate_roles_230();&nbsp;</div></li><li><div>  populate_roles_250();&nbsp;</div></li><li><div>  populate_roles_260();&nbsp;</div></li><li><div>  populate_roles_270();&nbsp;</div></li><li><div>  populate_roles_280();&nbsp;</div></li><li><div>  populate_roles_300();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create the roles for WordPress 2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_160() {&nbsp;</div></li><li><div>  <span class="comment">// Add roles</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Dummy gettext calls to get strings in the catalog.</span>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: user role */</span></span></span></span></span>&nbsp;</div></li><li><div>  _x('Administrator', 'User role');&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: user role */</span></span></span></span></span>&nbsp;</div></li><li><div>  _x('Editor', 'User role');&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: user role */</span></span></span></span></span>&nbsp;</div></li><li><div>  _x('Author', 'User role');&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: user role */</span></span></span></span></span>&nbsp;</div></li><li><div>  _x('Contributor', 'User role');&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: user role */</span></span></span></span></span>&nbsp;</div></li><li><div>  _x('Subscriber', 'User role');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_role('administrator', 'Administrator');&nbsp;</div></li><li><div>  add_role('editor', 'Editor');&nbsp;</div></li><li><div>  add_role('author', 'Author');&nbsp;</div></li><li><div>  add_role('contributor', 'Contributor');&nbsp;</div></li><li><div>  add_role('subscriber', 'Subscriber');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add caps for Administrator role</span>&nbsp;</div></li><li><div>  $role = get_role('administrator');&nbsp;</div></li><li><div>  $role-&gt;add_cap('switch_themes');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_themes');&nbsp;</div></li><li><div>  $role-&gt;add_cap('activate_plugins');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_plugins');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_users');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_files');&nbsp;</div></li><li><div>  $role-&gt;add_cap('manage_options');&nbsp;</div></li><li><div>  $role-&gt;add_cap('moderate_comments');&nbsp;</div></li><li><div>  $role-&gt;add_cap('manage_categories');&nbsp;</div></li><li><div>  $role-&gt;add_cap('manage_links');&nbsp;</div></li><li><div>  $role-&gt;add_cap('upload_files');&nbsp;</div></li><li><div>  $role-&gt;add_cap('import');&nbsp;</div></li><li><div>  $role-&gt;add_cap('unfiltered_html');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_others_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_published_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('publish_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_pages');&nbsp;</div></li><li><div>  $role-&gt;add_cap('read');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_10');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_9');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_8');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_7');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_6');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_5');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_4');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_3');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_2');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_1');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add caps for Editor role</span>&nbsp;</div></li><li><div>  $role = get_role('editor');&nbsp;</div></li><li><div>  $role-&gt;add_cap('moderate_comments');&nbsp;</div></li><li><div>  $role-&gt;add_cap('manage_categories');&nbsp;</div></li><li><div>  $role-&gt;add_cap('manage_links');&nbsp;</div></li><li><div>  $role-&gt;add_cap('upload_files');&nbsp;</div></li><li><div>  $role-&gt;add_cap('unfiltered_html');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_others_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_published_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('publish_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_pages');&nbsp;</div></li><li><div>  $role-&gt;add_cap('read');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_7');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_6');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_5');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_4');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_3');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_2');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_1');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add caps for Author role</span>&nbsp;</div></li><li><div>  $role = get_role('author');&nbsp;</div></li><li><div>  $role-&gt;add_cap('upload_files');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_published_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('publish_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('read');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_2');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_1');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add caps for Contributor role</span>&nbsp;</div></li><li><div>  $role = get_role('contributor');&nbsp;</div></li><li><div>  $role-&gt;add_cap('edit_posts');&nbsp;</div></li><li><div>  $role-&gt;add_cap('read');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_1');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add caps for Subscriber role</span>&nbsp;</div></li><li><div>  $role = get_role('subscriber');&nbsp;</div></li><li><div>  $role-&gt;add_cap('read');&nbsp;</div></li><li><div>  $role-&gt;add_cap('level_0');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.1.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_210() {&nbsp;</div></li><li><div>  $roles = array('administrator', 'editor');&nbsp;</div></li><li><div>  foreach ($roles as $role) {&nbsp;</div></li><li><div>      $role = get_role($role);&nbsp;</div></li><li><div>      if ( empty($role) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $role-&gt;add_cap('edit_others_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('edit_published_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('publish_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_others_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_published_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_others_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_published_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_private_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('edit_private_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('read_private_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_private_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('edit_private_pages');&nbsp;</div></li><li><div>      $role-&gt;add_cap('read_private_pages');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $role = get_role('administrator');&nbsp;</div></li><li><div>  if ( ! empty($role) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_users');&nbsp;</div></li><li><div>      $role-&gt;add_cap('create_users');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $role = get_role('author');&nbsp;</div></li><li><div>  if ( ! empty($role) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_posts');&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_published_posts');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $role = get_role('contributor');&nbsp;</div></li><li><div>  if ( ! empty($role) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap('delete_posts');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.3.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_230() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'unfiltered_upload' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.5.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_250() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'edit_dashboard' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.6.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_260() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'update_plugins' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'delete_plugins' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.7.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_270() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'install_plugins' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'update_themes' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 2.8.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_280() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'install_themes' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and modify WordPress roles for WordPress 3.0.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_roles_300() {&nbsp;</div></li><li><div>  $role = get_role( 'administrator' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $role ) ) {&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'update_core' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'list_users' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'remove_users' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'promote_users' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'edit_theme_options' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'delete_themes' );&nbsp;</div></li><li><div>      $role-&gt;add_cap( 'export' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Install Network.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( !function_exists( 'install_network' ) ) :&nbsp;</div></li><li><div>function install_network() {&nbsp;</div></li><li><div>  if ( ! defined( 'WP_INSTALLING_NETWORK' ) )&nbsp;</div></li><li><div>      define( 'WP_INSTALLING_NETWORK', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  dbDelta( wp_get_db_schema( 'global' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Populate network settings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb       $wpdb</span>&nbsp;</div></li><li><div><span class="comment"> * @global object     $current_site</span>&nbsp;</div></li><li><div><span class="comment"> * @global int        $wp_db_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Rewrite $wp_rewrite</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $network_id        ID of network to populate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain            The domain name for the network (eg. &quot;example.com&quot;).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $email             Email address for the network administrator.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $site_name         The name of the network.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $path              Optional. The path to append to the network's domain name. Default '/'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $subdomain_install Optional. Whether the network is a subdomain install or a subdirectory install.</span>&nbsp;</div></li><li><div><span class="comment"> *                                  Default false, meaning the network is a subdirectory install.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|WP_Error True on success, or WP_Error on warning (with the install otherwise successful, </span>&nbsp;</div></li><li><div><span class="comment"> *                       so the error code must be checked) or failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function populate_network( $network_id = 1, $domain = '', $email = '', $site_name = '', $path = '/', $subdomain_install = false ) {&nbsp;</div></li><li><div>  global $wpdb, $current_site, $wp_db_version, $wp_rewrite;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $errors = new WP_Error();&nbsp;</div></li><li><div>  if ( '' == $domain )&nbsp;</div></li><li><div>      $errors-&gt;add( 'empty_domain', __( 'You must provide a domain name.' ) );&nbsp;</div></li><li><div>  if ( '' == $site_name )&nbsp;</div></li><li><div>      $errors-&gt;add( 'empty_sitename', __( 'You must provide a name for your network of sites.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check for network collision.</span>&nbsp;</div></li><li><div>  if ( $network_id == $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT id FROM $wpdb-&gt;site WHERE id = %d&quot;, $network_id ) ) )&nbsp;</div></li><li><div>      $errors-&gt;add( 'siteid_exists', __( 'The network already exists.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_email( $email ) )&nbsp;</div></li><li><div>      $errors-&gt;add( 'invalid_email', __( 'You must provide a valid email address.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $errors-&gt;get_error_code() )&nbsp;</div></li><li><div>      return $errors;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If a user with the provided email does not exist, default to the current user as the new network admin.</span>&nbsp;</div></li><li><div>  $site_user = get_user_by( 'email', $email );&nbsp;</div></li><li><div>  if ( false === $site_user ) {&nbsp;</div></li><li><div>      $site_user = wp_get_current_user();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set up site tables.</span>&nbsp;</div></li><li><div>  $template = get_option( 'template' );&nbsp;</div></li><li><div>  $stylesheet = get_option( 'stylesheet' );&nbsp;</div></li><li><div>  $allowed_themes = array( $stylesheet =&gt; true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $template != $stylesheet ) {&nbsp;</div></li><li><div>      $allowed_themes[ $template ] = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( WP_DEFAULT_THEME != $stylesheet && WP_DEFAULT_THEME != $template ) {&nbsp;</div></li><li><div>      $allowed_themes[ WP_DEFAULT_THEME ] = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If WP_DEFAULT_THEME doesn't exist, also whitelist the latest core default theme.</span>&nbsp;</div></li><li><div>  if ( ! wp_get_theme( WP_DEFAULT_THEME )-&gt;exists() ) {&nbsp;</div></li><li><div>      if ( $core_default = WP_Theme::get_core_default_theme() ) {&nbsp;</div></li><li><div>          $allowed_themes[ $core_default-&gt;get_stylesheet() ] = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 1 == $network_id ) {&nbsp;</div></li><li><div>      $wpdb-&gt;insert( $wpdb-&gt;site, array( 'domain' =&gt; $domain, 'path' =&gt; $path ) );&nbsp;</div></li><li><div>      $network_id = $wpdb-&gt;insert_id;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $wpdb-&gt;insert( $wpdb-&gt;site, array( 'domain' =&gt; $domain, 'path' =&gt; $path, 'id' =&gt; $network_id ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_cache_delete( 'networks_have_paths', 'site-options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_multisite() ) {&nbsp;</div></li><li><div>      $site_admins = array( $site_user-&gt;user_login );&nbsp;</div></li><li><div>      $users = get_users( array( 'fields' =&gt; array( 'ID', 'user_login' ) ) );&nbsp;</div></li><li><div>      if ( $users ) {&nbsp;</div></li><li><div>          foreach ( $users as $user ) {&nbsp;</div></li><li><div>              if ( is_super_admin( $user-&gt;ID ) && !in_array( $user-&gt;user_login, $site_admins ) )&nbsp;</div></li><li><div>                  $site_admins[] = $user-&gt;user_login;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $site_admins = get_site_option( 'site_admins' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** translators: Do not translate USERNAME, SITE_NAME, BLOG_URL, PASSWORD: those are placeholders. */</span>&nbsp;</div></li><li><div>  $welcome_email = __( 'Howdy USERNAME, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>Your new SITE_NAME site has been successfully set up at:&nbsp;</div></li><li><div>BLOG_URL&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>You can log in to the administrator account with the following information:&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>Username: USERNAME&nbsp;</div></li><li><div>Password: PASSWORD&nbsp;</div></li><li><div>Log in here: BLOG_URLwp-login.php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>We hope you enjoy your new site. Thanks!&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>--The Team @ SITE_NAME' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $misc_exts = array(&nbsp;</div></li><li><div>      <span class="comment">// Images.</span>&nbsp;</div></li><li><div>      'jpg', 'jpeg', 'png', 'gif', &nbsp;</div></li><li><div>      <span class="comment">// Video.</span>&nbsp;</div></li><li><div>      'mov', 'avi', 'mpg', '3gp', '3g2', &nbsp;</div></li><li><div>      <span class="comment">// &quot;audio&quot;.</span>&nbsp;</div></li><li><div>      'midi', 'mid', &nbsp;</div></li><li><div>      <span class="comment">// Miscellaneous.</span>&nbsp;</div></li><li><div>      'pdf', 'doc', 'ppt', 'odt', 'pptx', 'docx', 'pps', 'ppsx', 'xls', 'xlsx', 'key', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  $audio_exts = wp_get_audio_extensions();&nbsp;</div></li><li><div>  $video_exts = wp_get_video_extensions();&nbsp;</div></li><li><div>  $upload_filetypes = array_unique( array_merge( $misc_exts, $audio_exts, $video_exts ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $sitemeta = array(&nbsp;</div></li><li><div>      'site_name' =&gt; $site_name, &nbsp;</div></li><li><div>      'admin_email' =&gt; $email, &nbsp;</div></li><li><div>      'admin_user_id' =&gt; $site_user-&gt;ID, &nbsp;</div></li><li><div>      'registration' =&gt; 'none', &nbsp;</div></li><li><div>      'upload_filetypes' =&gt; implode( ' ', $upload_filetypes ), &nbsp;</div></li><li><div>      'blog_upload_space' =&gt; 100, &nbsp;</div></li><li><div>      'fileupload_maxk' =&gt; 1500, &nbsp;</div></li><li><div>      'site_admins' =&gt; $site_admins, &nbsp;</div></li><li><div>      'allowedthemes' =&gt; $allowed_themes, &nbsp;</div></li><li><div>      'illegal_names' =&gt; array( 'www', 'web', 'root', 'admin', 'main', 'invite', 'administrator', 'files' ), &nbsp;</div></li><li><div>      'wpmu_upgrade_site' =&gt; $wp_db_version, &nbsp;</div></li><li><div>      'welcome_email' =&gt; $welcome_email, &nbsp;</div></li><li><div>      <span class="comment">/** translators: %s: site link */</span>&nbsp;</div></li><li><div>      'first_post' =&gt; __( 'Welcome to %s. This is your first post. Edit or delete it, then start blogging!' ), &nbsp;</div></li><li><div>      <span class="comment">// @todo - network admins should have a method of editing the network siteurl (used for cookie hash)</span>&nbsp;</div></li><li><div>      'siteurl' =&gt; get_option( 'siteurl' ) . '/', &nbsp;</div></li><li><div>      'add_new_users' =&gt; '0', &nbsp;</div></li><li><div>      'upload_space_check_disabled' =&gt; is_multisite() ? get_site_option( 'upload_space_check_disabled' ) : '1', &nbsp;</div></li><li><div>      'subdomain_install' =&gt; intval( $subdomain_install ), &nbsp;</div></li><li><div>      'global_terms_enabled' =&gt; global_terms_enabled() ? '1' : '0', &nbsp;</div></li><li><div>      'ms_files_rewriting' =&gt; is_multisite() ? get_site_option( 'ms_files_rewriting' ) : '0', &nbsp;</div></li><li><div>      'initial_db_version' =&gt; get_option( 'initial_db_version' ), &nbsp;</div></li><li><div>      'active_sitewide_plugins' =&gt; array(), &nbsp;</div></li><li><div>      'WPLANG' =&gt; get_locale(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  if ( ! $subdomain_install )&nbsp;</div></li><li><div>      $sitemeta['illegal_names'][] = 'blog';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters meta for a network on creation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $sitemeta   Associative array of network meta keys and values to be inserted.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int   $network_id ID of network to populate.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $sitemeta = apply_filters( 'populate_network_meta', $sitemeta, $network_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $insert = '';&nbsp;</div></li><li><div>  foreach ( $sitemeta as $meta_key =&gt; $meta_value ) {&nbsp;</div></li><li><div>      if ( is_array( $meta_value ) )&nbsp;</div></li><li><div>          $meta_value = serialize( $meta_value );&nbsp;</div></li><li><div>      if ( !empty( $insert ) )&nbsp;</div></li><li><div>          $insert .= ', ';&nbsp;</div></li><li><div>      $insert .= $wpdb-&gt;prepare( &quot;( %d, %s, %s)&quot;, $network_id, $meta_key, $meta_value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $wpdb-&gt;query( &quot;INSERT INTO $wpdb-&gt;sitemeta ( site_id, meta_key, meta_value ) VALUES &quot; . $insert );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * When upgrading from single to multisite, assume the current site will</span>&nbsp;</div></li><li><div><span class="comment">   * become the main site of the network. When using populate_network()</span>&nbsp;</div></li><li><div><span class="comment">   * to create another network in an existing multisite environment, skip</span>&nbsp;</div></li><li><div><span class="comment">   * these steps since the main site of the new network has not yet been</span>&nbsp;</div></li><li><div><span class="comment">   * created.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( ! is_multisite() ) {&nbsp;</div></li><li><div>      $current_site = new stdClass;&nbsp;</div></li><li><div>      $current_site-&gt;domain = $domain;&nbsp;</div></li><li><div>      $current_site-&gt;path = $path;&nbsp;</div></li><li><div>      $current_site-&gt;site_name = ucfirst( $domain );&nbsp;</div></li><li><div>      $wpdb-&gt;insert( $wpdb-&gt;blogs, array( 'site_id' =&gt; $network_id, 'blog_id' =&gt; 1, 'domain' =&gt; $domain, 'path' =&gt; $path, 'registered' =&gt; current_time( 'mysql' ) ) );&nbsp;</div></li><li><div>      $current_site-&gt;blog_id = $blog_id = $wpdb-&gt;insert_id;&nbsp;</div></li><li><div>      update_user_meta( $site_user-&gt;ID, 'source_domain', $domain );&nbsp;</div></li><li><div>      update_user_meta( $site_user-&gt;ID, 'primary_blog', $blog_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $subdomain_install )&nbsp;</div></li><li><div>          $wp_rewrite-&gt;set_permalink_structure( '/%year%/%monthnum%/%day%/%postname%/' );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $wp_rewrite-&gt;set_permalink_structure( '/blog/%year%/%monthnum%/%day%/%postname%/' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      flush_rewrite_rules();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $subdomain_install )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $vhost_ok = false;&nbsp;</div></li><li><div>      $errstr = '';&nbsp;</div></li><li><div>      $hostname = substr( md5( time() ), 0, 6 ) . '.' . $domain; <span class="comment">// Very random hostname!</span>&nbsp;</div></li><li><div>      $page = wp_remote_get( 'http:<span class="comment">//' . $hostname, array( 'timeout' =&gt; 5, 'httpversion' =&gt; '1.1' ) );</span>&nbsp;</div></li><li><div>      if ( is_wp_error( $page ) )&nbsp;</div></li><li><div>          $errstr = $page-&gt;get_error_message();&nbsp;</div></li><li><div>      elseif ( 200 == wp_remote_retrieve_response_code( $page ) )&nbsp;</div></li><li><div>              $vhost_ok = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $vhost_ok ) {&nbsp;</div></li><li><div>          $msg = '&lt;p&gt;&lt;strong&gt;' . __( 'Warning! Wildcard DNS may not be configured correctly!' ) . '&lt;/strong&gt;&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $msg .= '&lt;p&gt;' . sprintf(&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: host name */</span>&nbsp;</div></li><li><div>              __( 'The installer attempted to contact a random hostname (%s) on your domain.' ), &nbsp;</div></li><li><div>              '&lt;code&gt;' . $hostname . '&lt;/code&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          if ( ! empty ( $errstr ) ) {&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: error message */</span>&nbsp;</div></li><li><div>              $msg .= ' ' . sprintf( __( 'This resulted in an error message: %s' ), '&lt;code&gt;' . $errstr . '&lt;/code&gt;' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $msg .= '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $msg .= '&lt;p&gt;' . sprintf(&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: asterisk symbol (*) */</span>&nbsp;</div></li><li><div>              __( 'To use a subdomain configuration, you must have a wildcard entry in your DNS. This usually means adding a %s hostname record pointing at your web server in your DNS configuration tool.' ), &nbsp;</div></li><li><div>              '&lt;code&gt;*&lt;/code&gt;'&nbsp;</div></li><li><div> ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $msg .= '&lt;p&gt;' . __( 'You can still use your site but any subdomain you create may not be accessible. If you know your DNS is correct, ignore this message.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return new WP_Error( 'no_wildcard_dns', $msg );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>