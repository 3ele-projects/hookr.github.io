<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4602"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-update-core | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=4552636836d0ef4e2f9ef29f7f08c149' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-update-core/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-update-core%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-update-core%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-update-core","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-update-core" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-update-core</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/update-core.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Update Core administration panel.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_style( 'plugin-install' );&nbsp;</div></li><li><div>wp_enqueue_script( 'plugin-install' );&nbsp;</div></li><li><div>wp_enqueue_script( 'updates' );&nbsp;</div></li><li><div>add_thickbox();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() && ! is_network_admin() ) {&nbsp;</div></li><li><div>  wp_redirect( network_admin_url( 'update-core.php' ) );&nbsp;</div></li><li><div>  exit();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! current_user_can( 'update_core' ) && ! current_user_can( 'update_themes' ) && ! current_user_can( 'update_plugins' ) )&nbsp;</div></li><li><div>  wp_die( __( 'Sorry, you are not allowed to update this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $wp_local_package</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb   $wpdb</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @staticvar bool $first_pass</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $update</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function list_core_update( $update ) {&nbsp;</div></li><li><div>   global $wp_local_package, $wpdb;&nbsp;</div></li><li><div>    static $first_pass = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_version = get_bloginfo( 'version' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>   if ( 'en_US' == $update-&gt;locale && 'en_US' == get_locale() )&nbsp;</div></li><li><div>       $version_string = $update-&gt;current;&nbsp;</div></li><li><div>   <span class="comment">// If the only available update is a partial builds, it doesn't need a language-specific version string.</span>&nbsp;</div></li><li><div>   elseif ( 'en_US' == $update-&gt;locale && $update-&gt;packages-&gt;partial && $wp_version == $update-&gt;partial_version && ( $updates = get_core_updates() ) && 1 == count( $updates ) )&nbsp;</div></li><li><div>       $version_string = $update-&gt;current;&nbsp;</div></li><li><div>   else&nbsp;</div></li><li><div>       $version_string = sprintf( &quot;%s&ndash;&lt;strong&gt;%s&lt;/strong&gt;&quot;, $update-&gt;current, $update-&gt;locale );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $current = false;&nbsp;</div></li><li><div>  if ( !isset($update-&gt;response) || 'latest' == $update-&gt;response )&nbsp;</div></li><li><div>      $current = true;&nbsp;</div></li><li><div>  $submit = __('Update Now');&nbsp;</div></li><li><div>  $form_action = 'update-core.php?action=do-core-upgrade';&nbsp;</div></li><li><div>  $php_version = phpversion();&nbsp;</div></li><li><div>  $mysql_version = $wpdb-&gt;db_version();&nbsp;</div></li><li><div>  $show_buttons = true;&nbsp;</div></li><li><div>  if ( 'development' == $update-&gt;response ) {&nbsp;</div></li><li><div>      $message = __('You are using a development version of WordPress. You can update to the latest nightly build automatically:');&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( $current ) {&nbsp;</div></li><li><div>          $message = sprintf( __( 'If you need to re-install version %s, you can do so here:' ), $version_string );&nbsp;</div></li><li><div>          $submit = __('Re-install Now');&nbsp;</div></li><li><div>          $form_action = 'update-core.php?action=do-core-reinstall';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $php_compat = version_compare( $php_version, $update-&gt;php_version, '&gt;=' );&nbsp;</div></li><li><div>          if ( file_exists( WP_CONTENT_DIR . '/db.php' ) && empty( $wpdb-&gt;is_mysql ) )&nbsp;</div></li><li><div>              $mysql_compat = true;&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              $mysql_compat = version_compare( $mysql_version, $update-&gt;mysql_version, '&gt;=' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !$mysql_compat && !$php_compat )&nbsp;</div></li><li><div>              <span class="comment">/** translators: 1: WordPress version number, 2: Minimum required PHP version number, 3: Minimum required MySQL version number, 4: Current PHP version number, 5: Current MySQL version number */</span>&nbsp;</div></li><li><div>              $message = sprintf( __('You cannot update because &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Version_%1$s&quot;&gt;WordPress %1$s&lt;/a&gt; requires PHP version %2$s or higher and MySQL version %3$s or higher. You are running PHP version %4$s and MySQL version %5$s.'), $update-&gt;current, $update-&gt;php_version, $update-&gt;mysql_version, $php_version, $mysql_version );</span>&nbsp;</div></li><li><div>          elseif ( !$php_compat )&nbsp;</div></li><li><div>              <span class="comment">/** translators: 1: WordPress version number, 2: Minimum required PHP version number, 3: Current PHP version number */</span>&nbsp;</div></li><li><div>              $message = sprintf( __('You cannot update because &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Version_%1$s&quot;&gt;WordPress %1$s&lt;/a&gt; requires PHP version %2$s or higher. You are running version %3$s.'), $update-&gt;current, $update-&gt;php_version, $php_version );</span>&nbsp;</div></li><li><div>          elseif ( !$mysql_compat )&nbsp;</div></li><li><div>              <span class="comment">/** translators: 1: WordPress version number, 2: Minimum required MySQL version number, 3: Current MySQL version number */</span>&nbsp;</div></li><li><div>              $message = sprintf( __('You cannot update because &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Version_%1$s&quot;&gt;WordPress %1$s&lt;/a&gt; requires MySQL version %2$s or higher. You are running version %3$s.'), $update-&gt;current, $update-&gt;mysql_version, $mysql_version );</span>&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              <span class="comment">/** translators: 1: WordPress version number, 2: WordPress version number including locale if necessary */</span>&nbsp;</div></li><li><div>              $message =     sprintf(__('You can update to &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Version_%1$s&quot;&gt;WordPress %2$s&lt;/a&gt; automatically:'), $update-&gt;current, $version_string);</span>&nbsp;</div></li><li><div>          if ( !$mysql_compat || !$php_compat )&nbsp;</div></li><li><div>              $show_buttons = false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;p&gt;';&nbsp;</div></li><li><div>  echo $message;&nbsp;</div></li><li><div>  echo '&lt;/p&gt;';&nbsp;</div></li><li><div>  echo '&lt;form method=&quot;post&quot; action=&quot;' . $form_action . '&quot; name=&quot;upgrade&quot; class=&quot;upgrade&quot;&gt;';&nbsp;</div></li><li><div>  wp_nonce_field('upgrade-core');&nbsp;</div></li><li><div>  echo '&lt;p&gt;';&nbsp;</div></li><li><div>  echo '&lt;input name=&quot;version&quot; value=&quot;'. esc_attr($update-&gt;current) .'&quot; type=&quot;hidden&quot;/&gt;';&nbsp;</div></li><li><div>  echo '&lt;input name=&quot;locale&quot; value=&quot;'. esc_attr($update-&gt;locale) .'&quot; type=&quot;hidden&quot;/&gt;';&nbsp;</div></li><li><div>  if ( $show_buttons ) {&nbsp;</div></li><li><div>      if ( $first_pass ) {&nbsp;</div></li><li><div>          submit_button( $submit, $current ? '' : 'primary regular', 'upgrade', false );&nbsp;</div></li><li><div>          $first_pass = false;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          submit_button( $submit, '', 'upgrade', false );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( 'en_US' != $update-&gt;locale )&nbsp;</div></li><li><div>      if ( !isset( $update-&gt;dismissed ) || !$update-&gt;dismissed )&nbsp;</div></li><li><div>          submit_button( __( 'Hide this update' ), '', 'dismiss', false );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          submit_button( __( 'Bring back this update' ), '', 'undismiss', false );&nbsp;</div></li><li><div>  echo '&lt;/p&gt;';&nbsp;</div></li><li><div>  if ( 'en_US' != $update-&gt;locale && ( !isset($wp_local_package) || $wp_local_package != $update-&gt;locale ) )&nbsp;</div></li><li><div>      echo '&lt;p class=&quot;hint&quot;&gt;'.__('This localized version contains both the translation and various other localization fixes. You can skip upgrading if you want to keep your current translation.').'&lt;/p&gt;';&nbsp;</div></li><li><div>  <span class="comment">// Partial builds don't need language-specific warnings.</span>&nbsp;</div></li><li><div>  elseif ( 'en_US' == $update-&gt;locale && get_locale() != 'en_US' && ( ! $update-&gt;packages-&gt;partial && $wp_version == $update-&gt;partial_version ) ) {&nbsp;</div></li><li><div>      echo '&lt;p class=&quot;hint&quot;&gt;'.sprintf( __('You are about to install WordPress %s &lt;strong&gt;in English (US).&lt;/strong&gt; There is a chance this update will break your translation. You may prefer to wait for the localized version to be released.'), $update-&gt;response != 'development' ? $update-&gt;current : '' ).'&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo '&lt;/form&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function dismissed_updates() {&nbsp;</div></li><li><div>  $dismissed = get_core_updates( array( 'dismissed' =&gt; true, 'available' =&gt; false ) );&nbsp;</div></li><li><div>  if ( $dismissed ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $show_text = esc_js(__('Show hidden updates'));&nbsp;</div></li><li><div>      $hide_text = esc_js(__('Hide hidden updates'));&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      jQuery(function($) {&nbsp;</div></li><li><div>          $('dismissed-updates').show();&nbsp;</div></li><li><div>          $('#show-dismissed').toggle(function() {$(this).text('&lt;?php echo $hide_text; ?&gt;');}, function() {$(this).text('&lt;?php echo $show_text; ?&gt;')});&nbsp;</div></li><li><div>          $('#show-dismissed').click(function() { $('#dismissed-updates').toggle('slow');});&nbsp;</div></li><li><div>      });&nbsp;</div></li><li><div>  &lt;/script&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>      echo '&lt;p class=&quot;hide-if-no-js&quot;&gt;&lt;a id=&quot;show-dismissed&quot; href=&quot;#&quot;&gt;'.__('Show hidden updates').'&lt;/a&gt;&lt;/p&gt;';&nbsp;</div></li><li><div>      echo '&lt;ul id=&quot;dismissed-updates&quot; class=&quot;core-updates dismissed&quot;&gt;';&nbsp;</div></li><li><div>      foreach ( (array) $dismissed as $update) {&nbsp;</div></li><li><div>          echo '&lt;li&gt;';&nbsp;</div></li><li><div>          list_core_update( $update );&nbsp;</div></li><li><div>          echo '&lt;/li&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo '&lt;/ul&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display upgrade WordPress for downloading latest or upgrading automatically form.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $required_php_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $required_mysql_version</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function core_upgrade_preamble() {&nbsp;</div></li><li><div>  global $required_php_version, $required_mysql_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_version = get_bloginfo( 'version' );&nbsp;</div></li><li><div>  $updates = get_core_updates();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($updates[0]-&gt;response) || 'latest' == $updates[0]-&gt;response ) {&nbsp;</div></li><li><div>      echo '&lt;h2&gt;';&nbsp;</div></li><li><div>      _e('You have the latest version of WordPress.');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( wp_http_supports( array( 'ssl' ) ) ) {&nbsp;</div></li><li><div>          require_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php';&nbsp;</div></li><li><div>          $upgrader = new WP_Automatic_Updater;&nbsp;</div></li><li><div>          $future_minor_update = (object) array(&nbsp;</div></li><li><div>              'current' =&gt; $wp_version . '.1.next.minor', &nbsp;</div></li><li><div>              'version' =&gt; $wp_version . '.1.next.minor', &nbsp;</div></li><li><div>              'php_version' =&gt; $required_php_version, &nbsp;</div></li><li><div>              'mysql_version' =&gt; $required_mysql_version, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $should_auto_update = $upgrader-&gt;should_update( 'core', $future_minor_update, ABSPATH );&nbsp;</div></li><li><div>          if ( $should_auto_update )&nbsp;</div></li><li><div>              echo ' ' . __( 'Future security updates will be applied automatically.' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo '&lt;/h2&gt;';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;notice notice-warning&quot;&gt;&lt;p&gt;';&nbsp;</div></li><li><div>      _e('&lt;strong&gt;Important:&lt;/strong&gt; before updating, please &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/WordPress_Backups&quot;&gt;back up your database and files&lt;/a&gt;. For help with updates, visit the &lt;a href=&quot;https://codex.wordpress.org/Updating_WordPress&quot;&gt;Updating WordPress&lt;/a&gt; Codex page.');</span>&nbsp;</div></li><li><div>      echo '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo '&lt;h2 class=&quot;response&quot;&gt;';&nbsp;</div></li><li><div>      _e( 'An updated version of WordPress is available.' );&nbsp;</div></li><li><div>      echo '&lt;/h2&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $updates[0] ) && $updates[0]-&gt;response == 'development' ) {&nbsp;</div></li><li><div>      require_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php';&nbsp;</div></li><li><div>      $upgrader = new WP_Automatic_Updater;&nbsp;</div></li><li><div>      if ( wp_http_supports( 'ssl' ) && $upgrader-&gt;should_update( 'core', $updates[0], ABSPATH ) ) {&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;updated inline&quot;&gt;&lt;p&gt;';&nbsp;</div></li><li><div>          echo '&lt;strong&gt;' . __( 'BETA TESTERS:' ) . '&lt;/strong&gt; ' . __( 'This site is set up to install updates of future beta versions automatically.' );&nbsp;</div></li><li><div>          echo '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;ul class=&quot;core-updates&quot;&gt;';&nbsp;</div></li><li><div>  foreach ( (array) $updates as $update ) {&nbsp;</div></li><li><div>      echo '&lt;li&gt;';&nbsp;</div></li><li><div>      list_core_update( $update );&nbsp;</div></li><li><div>      echo '&lt;/li&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo '&lt;/ul&gt;';&nbsp;</div></li><li><div>  <span class="comment">// Don't show the maintenance mode notice when we are only showing a single re-install option.</span>&nbsp;</div></li><li><div>  if ( $updates && ( count( $updates ) &gt; 1 || $updates[0]-&gt;response != 'latest' ) ) {&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __( 'While your site is being updated, it will be in maintenance mode. As soon as your updates are complete, your site will return to normal.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>  } elseif ( ! $updates ) {&nbsp;</div></li><li><div>      list( $normalized_version ) = explode( '-', $wp_version );&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . sprintf( __( '&lt;a href=&quot;%s&quot;&gt;Learn more about WordPress %s&lt;/a&gt;.' ), esc_url( self_admin_url( 'about.php' ) ), $normalized_version ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  dismissed_updates();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function list_plugin_updates() {&nbsp;</div></li><li><div>  $wp_version = get_bloginfo( 'version' );&nbsp;</div></li><li><div>  $cur_wp_version = preg_replace( '/-.*$/', '', $wp_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once(ABSPATH . 'wp-admin/includes/plugin-install.php');&nbsp;</div></li><li><div>  $plugins = get_plugin_updates();&nbsp;</div></li><li><div>  if ( empty( $plugins ) ) {&nbsp;</div></li><li><div>      echo '&lt;h2&gt;' . __( 'Plugins' ) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __( 'Your plugins are all up to date.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $form_action = 'update-core.php?action=do-plugin-upgrade';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $core_updates = get_core_updates();&nbsp;</div></li><li><div>  if ( !isset($core_updates[0]-&gt;response) || 'latest' == $core_updates[0]-&gt;response || 'development' == $core_updates[0]-&gt;response || version_compare( $core_updates[0]-&gt;current, $cur_wp_version, '=') )&nbsp;</div></li><li><div>      $core_update_version = false;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $core_update_version = $core_updates[0]-&gt;current;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Plugins' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;?php _e( 'The following plugins have new versions available. Check the ones you want to update and then click &#8220;Update Plugins&#8221;.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo esc_url( $form_action ); ?&gt;&quot; name=&quot;upgrade-plugins&quot; class=&quot;upgrade&quot;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field('upgrade-core'); ?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;input id=&quot;upgrade-plugins&quot; class=&quot;button&quot; type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e('Update Plugins'); ?&gt;&quot; name=&quot;upgrade&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;table class=&quot;widefat updates-table&quot; id=&quot;update-plugins-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;thead&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column check-column&quot;&gt;&lt;input type=&quot;checkbox&quot; id=&quot;plugins-select-all&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column&quot;&gt;&lt;label for=&quot;plugins-select-all&quot;&gt;&lt;?php _e( 'Select All' ); ?&gt;&lt;/label&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/thead&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tbody class=&quot;plugins&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  foreach ( (array) $plugins as $plugin_file =&gt; $plugin_data ) {&nbsp;</div></li><li><div>      $plugin_data = (object) _get_plugin_data_markup_translate( $plugin_file, (array) $plugin_data, false, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Get plugin compat for running version of WordPress.</span>&nbsp;</div></li><li><div>      if ( isset($plugin_data-&gt;update-&gt;tested) && version_compare($plugin_data-&gt;update-&gt;tested, $cur_wp_version, '&gt;=') ) {&nbsp;</div></li><li><div>          $compat = '&lt;br /&gt;' . sprintf(__('Compatibility with WordPress %1$s: 100%% (according to its author)'), $cur_wp_version);&nbsp;</div></li><li><div>      } elseif ( isset($plugin_data-&gt;update-&gt;compatibility-&gt;{$cur_wp_version}) ) {&nbsp;</div></li><li><div>          $compat = $plugin_data-&gt;update-&gt;compatibility-&gt;{$cur_wp_version};&nbsp;</div></li><li><div>          $compat = '&lt;br /&gt;' . sprintf(__('Compatibility with WordPress %1$s: %2$d%% (%3$d &quot;works&quot; votes out of %4$d total)'), $cur_wp_version, $compat-&gt;percent, $compat-&gt;votes, $compat-&gt;total_votes);&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $compat = '&lt;br /&gt;' . sprintf(__('Compatibility with WordPress %1$s: Unknown'), $cur_wp_version);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      <span class="comment">// Get plugin compat for updated version of WordPress.</span>&nbsp;</div></li><li><div>      if ( $core_update_version ) {&nbsp;</div></li><li><div>          if ( isset( $plugin_data-&gt;update-&gt;tested ) && version_compare( $plugin_data-&gt;update-&gt;tested, $core_update_version, '&gt;=' ) ) {&nbsp;</div></li><li><div>              $compat .= '&lt;br /&gt;' . sprintf( __( 'Compatibility with WordPress %1$s: 100%% (according to its author)' ), $core_update_version );&nbsp;</div></li><li><div>          } elseif ( isset( $plugin_data-&gt;update-&gt;compatibility-&gt;{$core_update_version} ) ) {&nbsp;</div></li><li><div>              $update_compat = $plugin_data-&gt;update-&gt;compatibility-&gt;{$core_update_version};&nbsp;</div></li><li><div>              $compat .= '&lt;br /&gt;' . sprintf(__('Compatibility with WordPress %1$s: %2$d%% (%3$d &quot;works&quot; votes out of %4$d total)'), $core_update_version, $update_compat-&gt;percent, $update_compat-&gt;votes, $update_compat-&gt;total_votes);&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $compat .= '&lt;br /&gt;' . sprintf(__('Compatibility with WordPress %1$s: Unknown'), $core_update_version);&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      <span class="comment">// Get the upgrade notice for the new plugin version.</span>&nbsp;</div></li><li><div>      if ( isset($plugin_data-&gt;update-&gt;upgrade_notice) ) {&nbsp;</div></li><li><div>          $upgrade_notice = '&lt;br /&gt;' . strip_tags($plugin_data-&gt;update-&gt;upgrade_notice);&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $upgrade_notice = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $details_url = self_admin_url('plugin-install.php?tab=plugin-information&plugin=' . $plugin_data-&gt;update-&gt;slug . '&section=changelog&TB_iframe=true&width=640&height=662');&nbsp;</div></li><li><div>      $details = sprintf(&nbsp;</div></li><li><div>          '&lt;a href=&quot;%1$s&quot; class=&quot;thickbox open-plugin-details-modal&quot; aria-label=&quot;%2$s&quot;&gt;%3$s&lt;/a&gt;', &nbsp;</div></li><li><div>          esc_url( $details_url ), &nbsp;</div></li><li><div>          <span class="comment">/** translators: 1: plugin name, 2: version number */</span>&nbsp;</div></li><li><div>          esc_attr( sprintf( __( 'View %1$s version %2$s details' ), $plugin_data-&gt;Name, $plugin_data-&gt;update-&gt;new_version ) ), &nbsp;</div></li><li><div>          <span class="comment">/** translators: %s: plugin version */</span>&nbsp;</div></li><li><div>          sprintf( __( 'View version %s details.' ), $plugin_data-&gt;update-&gt;new_version )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $checkbox_id = &quot;checkbox_&quot; . md5( $plugin_data-&gt;Name );&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;tr&gt;&nbsp;</div></li><li><div>          &lt;td class=&quot;check-column&quot;&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;checkbox&quot; name=&quot;checked[]&quot; id=&quot;&lt;?php echo $checkbox_id; ?&gt;&quot; value=&quot;&lt;?php echo esc_attr( $plugin_file ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $checkbox_id; ?&gt;&quot; class=&quot;screen-reader-text&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                  <span class="comment">/** translators: %s: plugin name */</span>&nbsp;</div></li><li><div>                  printf( __( 'Select %s' ), &nbsp;</div></li><li><div>                      $plugin_data-&gt;Name&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>          &lt;/td&gt;&nbsp;</div></li><li><div>          &lt;td class=&quot;plugin-title&quot;&gt;&lt;p&gt;&nbsp;</div></li><li><div>              &lt;strong&gt;&lt;?php echo $plugin_data-&gt;Name; ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>                  <span class="comment">/** translators: 1: plugin version, 2: new version */</span>&nbsp;</div></li><li><div>                  printf( __( 'You have version %1$s installed. Update to %2$s.' ), &nbsp;</div></li><li><div>                      $plugin_data-&gt;Version, &nbsp;</div></li><li><div>                      $plugin_data-&gt;update-&gt;new_version&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  echo ' ' . $details . $compat . $upgrade_notice;&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;/tr&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/tbody&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tfoot&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column check-column&quot;&gt;&lt;input type=&quot;checkbox&quot; id=&quot;plugins-select-all-2&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column&quot;&gt;&lt;label for=&quot;plugins-select-all-2&quot;&gt;&lt;?php _e( 'Select All' ); ?&gt;&lt;/label&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/tfoot&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;input id=&quot;upgrade-plugins-2&quot; class=&quot;button&quot; type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e('Update Plugins'); ?&gt;&quot; name=&quot;upgrade&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function list_theme_updates() {&nbsp;</div></li><li><div>  $themes = get_theme_updates();&nbsp;</div></li><li><div>  if ( empty( $themes ) ) {&nbsp;</div></li><li><div>      echo '&lt;h2&gt;' . __( 'Themes' ) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __( 'Your themes are all up to date.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $form_action = 'update-core.php?action=do-theme-upgrade';&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Themes' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;?php _e( 'The following themes have new versions available. Check the ones you want to update and then click &#8220;Update Themes&#8221;.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;?php printf( __( '&lt;strong&gt;Please Note:&lt;/strong&gt; Any customizations you have made to theme files will be lost. Please consider using &lt;a href=&quot;%s&quot;&gt;child themes&lt;/a&gt; for modifications.' ), __( 'https:<span class="comment">//codex.wordpress.org/Child_Themes' ) ); ?&gt;&lt;/p&gt;</span>&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo esc_url( $form_action ); ?&gt;&quot; name=&quot;upgrade-themes&quot; class=&quot;upgrade&quot;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field('upgrade-core'); ?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;input id=&quot;upgrade-themes&quot; class=&quot;button&quot; type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e('Update Themes'); ?&gt;&quot; name=&quot;upgrade&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;table class=&quot;widefat updates-table&quot; id=&quot;update-themes-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;thead&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column check-column&quot;&gt;&lt;input type=&quot;checkbox&quot; id=&quot;themes-select-all&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column&quot;&gt;&lt;label for=&quot;themes-select-all&quot;&gt;&lt;?php _e( 'Select All' ); ?&gt;&lt;/label&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/thead&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tbody class=&quot;plugins&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  foreach ( $themes as $stylesheet =&gt; $theme ) {&nbsp;</div></li><li><div>      $checkbox_id = 'checkbox_' . md5( $theme-&gt;get( 'Name' ) );&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;tr&gt;&nbsp;</div></li><li><div>          &lt;td class=&quot;check-column&quot;&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;checkbox&quot; name=&quot;checked[]&quot; id=&quot;&lt;?php echo $checkbox_id; ?&gt;&quot; value=&quot;&lt;?php echo esc_attr( $stylesheet ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $checkbox_id; ?&gt;&quot; class=&quot;screen-reader-text&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                  <span class="comment">/** translators: %s: theme name */</span>&nbsp;</div></li><li><div>                  printf( __( 'Select %s' ), &nbsp;</div></li><li><div>                      $theme-&gt;display( 'Name' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>          &lt;/td&gt;&nbsp;</div></li><li><div>          &lt;td class=&quot;plugin-title&quot;&gt;&lt;p&gt;&nbsp;</div></li><li><div>              &lt;img src=&quot;&lt;?php echo esc_url( $theme-&gt;get_screenshot() ); ?&gt;&quot; width=&quot;85&quot; height=&quot;64&quot; class=&quot;updates-table-screenshot&quot; alt=&quot;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;strong&gt;&lt;?php echo $theme-&gt;display( 'Name' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>                  <span class="comment">/** translators: 1: theme version, 2: new version */</span>&nbsp;</div></li><li><div>                  printf( __( 'You have version %1$s installed. Update to %2$s.' ), &nbsp;</div></li><li><div>                      $theme-&gt;display( 'Version' ), &nbsp;</div></li><li><div>                      $theme-&gt;update['new_version']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;/tr&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/tbody&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tfoot&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column check-column&quot;&gt;&lt;input type=&quot;checkbox&quot; id=&quot;themes-select-all-2&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>      &lt;td class=&quot;manage-column&quot;&gt;&lt;label for=&quot;themes-select-all-2&quot;&gt;&lt;?php _e( 'Select All' ); ?&gt;&lt;/label&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;/tfoot&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;input id=&quot;upgrade-themes-2&quot; class=&quot;button&quot; type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e('Update Themes'); ?&gt;&quot; name=&quot;upgrade&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function list_translation_updates() {&nbsp;</div></li><li><div>  $updates = wp_get_translation_updates();&nbsp;</div></li><li><div>  if ( ! $updates ) {&nbsp;</div></li><li><div>      if ( 'en_US' != get_locale() ) {&nbsp;</div></li><li><div>          echo '&lt;h2&gt;' . __( 'Translations' ) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>          echo '&lt;p&gt;' . __( 'Your translations are all up to date.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $form_action = 'update-core.php?action=do-translation-upgrade';&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;h2&gt;&lt;?php _e( 'Translations' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>  &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo esc_url( $form_action ); ?&gt;&quot; name=&quot;upgrade-translations&quot; class=&quot;upgrade&quot;&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&lt;?php _e( 'New translations are available.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;?php wp_nonce_field( 'upgrade-translations' ); ?&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&lt;input class=&quot;button&quot; type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e( 'Update Translations' ); ?&gt;&quot; name=&quot;upgrade&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Upgrade WordPress core display.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Filesystem_Base $wp_filesystem Subclass</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $reinstall</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_core_upgrade( $reinstall = false ) {&nbsp;</div></li><li><div>  global $wp_filesystem;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include_once( ABSPATH . 'wp-admin/includes/class-wp-upgrader.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $reinstall )&nbsp;</div></li><li><div>      $url = 'update-core.php?action=do-core-reinstall';&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $url = 'update-core.php?action=do-core-upgrade';&nbsp;</div></li><li><div>  $url = wp_nonce_url($url, 'upgrade-core');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $version = isset( $_POST['version'] )? $_POST['version'] : false;&nbsp;</div></li><li><div>  $locale = isset( $_POST['locale'] )? $_POST['locale'] : 'en_US';&nbsp;</div></li><li><div>  $update = find_core_update( $version, $locale );&nbsp;</div></li><li><div>  if ( !$update )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allow relaxed file ownership writes for User-initiated upgrades when the API specifies</span>&nbsp;</div></li><li><div>  <span class="comment">// that it's safe to do so. This only happens when there are no new files to create.</span>&nbsp;</div></li><li><div>  $allow_relaxed_file_ownership = ! $reinstall && isset( $update-&gt;new_files ) && ! $update-&gt;new_files;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;h1&gt;&lt;?php _e( 'Update WordPress' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === ( $credentials = request_filesystem_credentials( $url, '', false, ABSPATH, array( 'version', 'locale' ), $allow_relaxed_file_ownership ) ) ) {&nbsp;</div></li><li><div>      echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! WP_Filesystem( $credentials, ABSPATH, $allow_relaxed_file_ownership ) ) {&nbsp;</div></li><li><div>      <span class="comment">// Failed to connect, Error and request again</span>&nbsp;</div></li><li><div>      request_filesystem_credentials( $url, '', true, ABSPATH, array( 'version', 'locale' ), $allow_relaxed_file_ownership );&nbsp;</div></li><li><div>      echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $wp_filesystem-&gt;errors-&gt;get_error_code() ) {&nbsp;</div></li><li><div>      foreach ( $wp_filesystem-&gt;errors-&gt;get_error_messages() as $message )&nbsp;</div></li><li><div>          show_message($message);&nbsp;</div></li><li><div>      echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $reinstall )&nbsp;</div></li><li><div>      $update-&gt;response = 'reinstall';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_filter( 'update_feedback', 'show_message' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $upgrader = new Core_Upgrader();&nbsp;</div></li><li><div>  $result = $upgrader-&gt;upgrade( $update, array(&nbsp;</div></li><li><div>      'allow_relaxed_file_ownership' =&gt; $allow_relaxed_file_ownership&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_wp_error($result) ) {&nbsp;</div></li><li><div>      show_message($result);&nbsp;</div></li><li><div>      if ( 'up_to_date' != $result-&gt;get_error_code() && 'locked' != $result-&gt;get_error_code() )&nbsp;</div></li><li><div>          show_message( __('Installation Failed') );&nbsp;</div></li><li><div>      echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  show_message( __('WordPress updated successfully') );&nbsp;</div></li><li><div>  show_message( '&lt;span class=&quot;hide-if-no-js&quot;&gt;' . sprintf( __( 'Welcome to WordPress %1$s. You will be redirected to the About WordPress screen. If not, click &lt;a href=&quot;%2$s&quot;&gt;here&lt;/a&gt;.' ), $result, esc_url( self_admin_url( 'about.php?updated' ) ) ) . '&lt;/span&gt;' );&nbsp;</div></li><li><div>  show_message( '&lt;span class=&quot;hide-if-js&quot;&gt;' . sprintf( __( 'Welcome to WordPress %1$s. &lt;a href=&quot;%2$s&quot;&gt;Learn more&lt;/a&gt;.' ), $result, esc_url( self_admin_url( 'about.php?updated' ) ) ) . '&lt;/span&gt;' );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>  window.location = '&lt;?php echo self_admin_url( 'about.php?updated' ); ?&gt;';&nbsp;</div></li><li><div>  &lt;/script&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_dismiss_core_update() {&nbsp;</div></li><li><div>  $version = isset( $_POST['version'] )? $_POST['version'] : false;&nbsp;</div></li><li><div>  $locale = isset( $_POST['locale'] )? $_POST['locale'] : 'en_US';&nbsp;</div></li><li><div>  $update = find_core_update( $version, $locale );&nbsp;</div></li><li><div>  if ( !$update )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  dismiss_core_update( $update );&nbsp;</div></li><li><div>  wp_redirect( wp_nonce_url('update-core.php?action=upgrade-core', 'upgrade-core') );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function do_undismiss_core_update() {&nbsp;</div></li><li><div>  $version = isset( $_POST['version'] )? $_POST['version'] : false;&nbsp;</div></li><li><div>  $locale = isset( $_POST['locale'] )? $_POST['locale'] : 'en_US';&nbsp;</div></li><li><div>  $update = find_core_update( $version, $locale );&nbsp;</div></li><li><div>  if ( !$update )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  undismiss_core_update( $version, $locale );&nbsp;</div></li><li><div>  wp_redirect( wp_nonce_url('update-core.php?action=upgrade-core', 'upgrade-core') );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$action = isset($_GET['action']) ? $_GET['action'] : 'upgrade-core';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$upgrade_error = false;&nbsp;</div></li><li><div>if ( ( 'do-theme-upgrade' == $action || ( 'do-plugin-upgrade' == $action && ! isset( $_GET['plugins'] ) ) )&nbsp;</div></li><li><div>  && ! isset( $_POST['checked'] ) ) {&nbsp;</div></li><li><div>  $upgrade_error = $action == 'do-theme-upgrade' ? 'themes' : 'plugins';&nbsp;</div></li><li><div>  $action = 'upgrade-core';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = __('WordPress Updates');&nbsp;</div></li><li><div>$parent_file = 'index.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$updates_overview = '&lt;p&gt;' . __( 'On this screen, you can update to the latest version of WordPress, as well as update your themes, plugins, and translations from the WordPress.org repositories.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>$updates_overview .= '&lt;p&gt;' . __( 'If an update is available, you&#8127;ll see a notification appear in the Toolbar and navigation menu.' ) . ' ' . __( 'Keeping your site updated is important for security. It also makes the internet a safer place for you and your readers.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'overview', &nbsp;</div></li><li><div>  'title' =&gt; __( 'Overview' ), &nbsp;</div></li><li><div>  'content' =&gt; $updates_overview&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$updates_howto = '&lt;p&gt;' . __( '&lt;strong&gt;WordPress&lt;/strong&gt; &mdash; Updating your WordPress installation is a simple one-click procedure: just &lt;strong&gt;click on the &#8220;Update Now&#8221; button&lt;/strong&gt; when you are notified that a new version is available.' ) . ' ' . __( 'In most cases, WordPress will automatically apply maintenance and security updates in the background for you.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>$updates_howto .= '&lt;p&gt;' . __( '&lt;strong&gt;Themes and Plugins&lt;/strong&gt; &mdash; To update individual themes or plugins from this screen, use the checkboxes to make your selection, then &lt;strong&gt;click on the appropriate &#8220;Update&#8221; button&lt;/strong&gt;. To update all of your themes or plugins at once, you can check the box at the top of the section to select all before clicking the update button.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( 'en_US' != get_locale() ) {&nbsp;</div></li><li><div>  $updates_howto .= '&lt;p&gt;' . __( '&lt;strong&gt;Translations&lt;/strong&gt; &mdash; The files translating WordPress into your language are updated for you whenever any other updates occur. But if these files are out of date, you can &lt;strong&gt;click the &#8220;Update Translations&#8221;&lt;/strong&gt; button.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'how-to-update', &nbsp;</div></li><li><div>  'title' =&gt; __( 'How to Update' ), &nbsp;</div></li><li><div>  'content' =&gt; $updates_howto&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Dashboard_Updates_Screen&quot;&gt;Documentation on Updating WordPress&lt;/a&gt;' ) . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( '&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;' ) . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( 'upgrade-core' == $action ) {&nbsp;</div></li><li><div>  <span class="comment">// Force a update check when requested</span>&nbsp;</div></li><li><div>  $force_check = ! empty( $_GET['force-check'] );&nbsp;</div></li><li><div>  wp_version_check( array(), $force_check );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;h1&gt;&lt;?php _e( 'WordPress Updates' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  if ( $upgrade_error ) {&nbsp;</div></li><li><div>      echo '&lt;div class=&quot;error&quot;&gt;&lt;p&gt;';&nbsp;</div></li><li><div>      if ( $upgrade_error == 'themes' )&nbsp;</div></li><li><div>          _e('Please select one or more themes to update.');&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          _e('Please select one or more plugins to update.');&nbsp;</div></li><li><div>      echo '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $last_update_check = false;&nbsp;</div></li><li><div>  $current = get_site_transient( 'update_core' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $current && isset ( $current-&gt;last_checked ) )    {&nbsp;</div></li><li><div>      $last_update_check = $current-&gt;last_checked + get_option( 'gmt_offset' ) * HOUR_IN_SECONDS;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;p&gt;';&nbsp;</div></li><li><div>  <span class="comment">/** translators: %1 date, %2 time. */</span>&nbsp;</div></li><li><div>  printf( __( 'Last checked on %1$s at %2$s.' ), date_i18n( __( 'F j, Y' ), $last_update_check ), date_i18n( __( 'g:i a' ), $last_update_check ) );&nbsp;</div></li><li><div>  echo ' &nbsp; &lt;a class=&quot;button&quot; href=&quot;' . esc_url( self_admin_url('update-core.php?force-check=1') ) . '&quot;&gt;' . __( 'Check Again' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>  echo '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $core = current_user_can( 'update_core' ) )&nbsp;</div></li><li><div>      core_upgrade_preamble();&nbsp;</div></li><li><div>  if ( $plugins = current_user_can( 'update_plugins' ) )&nbsp;</div></li><li><div>      list_plugin_updates();&nbsp;</div></li><li><div>  if ( $themes = current_user_can( 'update_themes' ) )&nbsp;</div></li><li><div>      list_theme_updates();&nbsp;</div></li><li><div>  if ( $core || $plugins || $themes )&nbsp;</div></li><li><div>      list_translation_updates();&nbsp;</div></li><li><div>  unset( $core, $plugins, $themes );&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires after the core, plugin, and theme update tables.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'core_upgrade_preamble' );&nbsp;</div></li><li><div>  echo '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'updates', '_wpUpdatesItemCounts', array(&nbsp;</div></li><li><div>      'totals' =&gt; wp_get_update_data(), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} elseif ( 'do-core-upgrade' == $action || 'do-core-reinstall' == $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'update_core' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to update this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('upgrade-core');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Do the (un)dismiss actions before headers, so that they can redirect.</span>&nbsp;</div></li><li><div>  if ( isset( $_POST['dismiss'] ) )&nbsp;</div></li><li><div>      do_dismiss_core_update();&nbsp;</div></li><li><div>  elseif ( isset( $_POST['undismiss'] ) )&nbsp;</div></li><li><div>      do_undismiss_core_update();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>  if ( 'do-core-reinstall' == $action )&nbsp;</div></li><li><div>      $reinstall = true;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $reinstall = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_POST['upgrade'] ) )&nbsp;</div></li><li><div>      do_core_upgrade($reinstall);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'updates', '_wpUpdatesItemCounts', array(&nbsp;</div></li><li><div>      'totals' =&gt; wp_get_update_data(), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} elseif ( 'do-plugin-upgrade' == $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'update_plugins' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to update this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('upgrade-core');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_GET['plugins'] ) ) {&nbsp;</div></li><li><div>      $plugins = explode( ', ', $_GET['plugins'] );&nbsp;</div></li><li><div>  } elseif ( isset( $_POST['checked'] ) ) {&nbsp;</div></li><li><div>      $plugins = (array) $_POST['checked'];&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      wp_redirect( admin_url('update-core.php') );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url = 'update.php?action=update-selected&plugins=' . urlencode(implode(', ', $plugins));&nbsp;</div></li><li><div>  $url = wp_nonce_url($url, 'bulk-update-plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $title = __('Update Plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>  echo '&lt;div class=&quot;wrap&quot;&gt;';&nbsp;</div></li><li><div>  echo '&lt;h1&gt;' . __( 'Update Plugins' ) . '&lt;/h1&gt;';&nbsp;</div></li><li><div>  echo '&lt;iframe src=&quot;', $url, '&quot; style=&quot;width: 100%; height: 100%; min-height: 750px;&quot; frameborder=&quot;0&quot; title=&quot;' . esc_attr__( 'Update progress' ) . '&quot;&gt;&lt;/iframe&gt;';&nbsp;</div></li><li><div>  echo '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'updates', '_wpUpdatesItemCounts', array(&nbsp;</div></li><li><div>      'totals' =&gt; wp_get_update_data(), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} elseif ( 'do-theme-upgrade' == $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'update_themes' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to update this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('upgrade-core');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_GET['themes'] ) ) {&nbsp;</div></li><li><div>      $themes = explode( ', ', $_GET['themes'] );&nbsp;</div></li><li><div>  } elseif ( isset( $_POST['checked'] ) ) {&nbsp;</div></li><li><div>      $themes = (array) $_POST['checked'];&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      wp_redirect( admin_url('update-core.php') );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url = 'update.php?action=update-selected-themes&themes=' . urlencode(implode(', ', $themes));&nbsp;</div></li><li><div>  $url = wp_nonce_url($url, 'bulk-update-themes');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $title = __('Update Themes');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;h1&gt;&lt;?php _e( 'Update Themes' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>      &lt;iframe src=&quot;&lt;?php echo $url ?&gt;&quot; style=&quot;width: 100%; height: 100%; min-height: 750px;&quot; frameborder=&quot;0&quot; title=&quot;&lt;?php esc_attr_e( 'Update progress' ); ?&gt;&quot;&gt;&lt;/iframe&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'updates', '_wpUpdatesItemCounts', array(&nbsp;</div></li><li><div>      'totals' =&gt; wp_get_update_data(), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} elseif ( 'do-translation-upgrade' == $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'update_core' ) && ! current_user_can( 'update_plugins' ) && ! current_user_can( 'update_themes' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to update this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer( 'upgrade-translations' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>  include_once( ABSPATH . 'wp-admin/includes/class-wp-upgrader.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url = 'update-core.php?action=do-translation-upgrade';&nbsp;</div></li><li><div>  $nonce = 'upgrade-translations';&nbsp;</div></li><li><div>  $title = __( 'Update Translations' );&nbsp;</div></li><li><div>  $context = WP_LANG_DIR;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $upgrader = new Language_Pack_Upgrader( new Language_Pack_Upgrader_Skin( compact( 'url', 'nonce', 'title', 'context' ) ) );&nbsp;</div></li><li><div>  $result = $upgrader-&gt;bulk_upgrade();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_localize_script( 'updates', '_wpUpdatesItemCounts', array(&nbsp;</div></li><li><div>      'totals' =&gt; wp_get_update_data(), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires for each custom update action on the WordPress Updates screen.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The dynamic portion of the hook name, `$action`, refers to the</span>&nbsp;</div></li><li><div><span class="comment">   * passed update action. The hook fires in lieu of all available</span>&nbsp;</div></li><li><div><span class="comment">   * default update actions.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.2.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( &quot;update-core-custom_{$action}&quot; );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>