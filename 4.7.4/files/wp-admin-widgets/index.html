<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4617"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-widgets | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=aa9564e70c864247d9ae3e16ec12a2ce' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-widgets/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-widgets%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-widgets%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-widgets","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-widgets" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-widgets</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/widgets.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Widget administration panel</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Widgets API */</span>&nbsp;</div></li><li><div>require_once(ABSPATH . 'wp-admin/includes/widgets.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! current_user_can( 'edit_theme_options' ) ) {&nbsp;</div></li><li><div>  wp_die(&nbsp;</div></li><li><div>      '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>      '&lt;p&gt;' . __( 'Sorry, you are not allowed to edit theme options on this site.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$widgets_access = get_user_setting( 'widgets_access' );&nbsp;</div></li><li><div>if ( isset($_GET['widgets-access']) ) {&nbsp;</div></li><li><div>  check_admin_referer( 'widgets-access' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $widgets_access = 'on' == $_GET['widgets-access'] ? 'on' : 'off';&nbsp;</div></li><li><div>  set_user_setting( 'widgets_access', $widgets_access );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( 'on' == $widgets_access ) {&nbsp;</div></li><li><div>  add_filter( 'admin_body_class', 'wp_widgets_access_body_class' );&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  wp_enqueue_script('admin-widgets');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( wp_is_mobile() )&nbsp;</div></li><li><div>      wp_enqueue_script( 'jquery-touch-punch' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires early before the Widgets administration screen loads, </span>&nbsp;</div></li><li><div><span class="comment"> * after scripts are enqueued.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'sidebar_admin_setup' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = __( 'Widgets' );&nbsp;</div></li><li><div>$parent_file = 'themes.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'overview', &nbsp;</div></li><li><div>'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Widgets are independent sections of content that can be placed into any widgetized area provided by your theme (commonly called sidebars). To populate your sidebars/widget areas with individual widgets, drag and drop the title bars into the desired area. By default, only the first widget area is expanded. To populate additional widget areas, click on their title bars to expand them.') . '&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;p&gt;' . __('The Available Widgets section contains all the widgets you can choose from. Once you drag a widget into a sidebar, it will open to allow you to configure its settings. When you are happy with the widget settings, click the Save button and the widget will go live on your site. If you click Delete, it will remove the widget.') . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'removing-reusing', &nbsp;</div></li><li><div>'title' =&gt; __('Removing and Reusing'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('If you want to remove the widget but save its setting for possible future use, just drag it into the Inactive Widgets area. You can add them back anytime from there. This is especially helpful when you switch to a theme with fewer or different widget areas.') . '&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;p&gt;' . __('Widgets may be used multiple times. You can give each widget a title, to display on your site, but it&#8217;s not required.') . '&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;p&gt;' . __('Enabling Accessibility Mode, via Screen Options, allows you to use Add and Edit buttons instead of using drag and drop.') . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'missing-widgets', &nbsp;</div></li><li><div>'title' =&gt; __('Missing Widgets'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Many themes show some sidebar widgets by default until you edit your sidebars, but they are not automatically displayed in your sidebar management tool. After you make your first widget change, you can re-add the default widgets by adding them from the Available Widgets area.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>      '&lt;p&gt;' . __('When changing themes, there is often some variation in the number and setup of widget areas/sidebars and sometimes these conflicts make the transition a bit less smooth. If you changed themes and seem to be missing widgets, scroll down on this screen to the Inactive Widgets area, where all of your widgets and their settings will have been saved.') . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Appearance_Widgets_Screen&quot;&gt;Documentation on Widgets&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;') . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! current_theme_supports( 'widgets' ) ) {&nbsp;</div></li><li><div>  wp_die( __( 'The theme you are currently using isn&#8217;t widget-aware, meaning that it has no sidebars that you are able to change. For information on making your theme widget-aware, please &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Widgetizing_Themes&quot;&gt;follow these instructions&lt;/a&gt;.' ) );</span>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// These are the widgets grouped by sidebar</span>&nbsp;</div></li><li><div>$sidebars_widgets = wp_get_sidebars_widgets();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( empty( $sidebars_widgets ) )&nbsp;</div></li><li><div>  $sidebars_widgets = wp_get_widget_defaults();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>foreach ( $sidebars_widgets as $sidebar_id =&gt; $widgets ) {&nbsp;</div></li><li><div>  if ( 'wp_inactive_widgets' == $sidebar_id )&nbsp;</div></li><li><div>      continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_registered_sidebar( $sidebar_id ) ) {&nbsp;</div></li><li><div>      if ( ! empty( $widgets ) ) { <span class="comment"><span class="comment">// register the inactive_widgets area as sidebar</span></span>&nbsp;</div></li><li><div>          register_sidebar(array(&nbsp;</div></li><li><div>              'name' =&gt; __( 'Inactive Sidebar (not used)' ), &nbsp;</div></li><li><div>              'id' =&gt; $sidebar_id, &nbsp;</div></li><li><div>              'class' =&gt; 'inactive-sidebar orphan-sidebar', &nbsp;</div></li><li><div>              'description' =&gt; __( 'This sidebar is no longer available and does not show anywhere on your site. Remove each of the widgets below to fully remove this inactive sidebar.' ), &nbsp;</div></li><li><div>              'before_widget' =&gt; '', &nbsp;</div></li><li><div>              'after_widget' =&gt; '', &nbsp;</div></li><li><div>              'before_title' =&gt; '', &nbsp;</div></li><li><div>              'after_title' =&gt; '', &nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          unset( $sidebars_widgets[ $sidebar_id ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment">// register the inactive_widgets area as sidebar</span></span>&nbsp;</div></li><li><div>register_sidebar(array(&nbsp;</div></li><li><div>  'name' =&gt; __('Inactive Widgets'), &nbsp;</div></li><li><div>  'id' =&gt; 'wp_inactive_widgets', &nbsp;</div></li><li><div>  'class' =&gt; 'inactive-sidebar', &nbsp;</div></li><li><div>  'description' =&gt; __( 'Drag widgets here to remove them from the sidebar but keep their settings.' ), &nbsp;</div></li><li><div>  'before_widget' =&gt; '', &nbsp;</div></li><li><div>  'after_widget' =&gt; '', &nbsp;</div></li><li><div>  'before_title' =&gt; '', &nbsp;</div></li><li><div>  'after_title' =&gt; '', &nbsp;</div></li><li><div>));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>retrieve_widgets();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// We're saving a widget without js</span>&nbsp;</div></li><li><div>if ( isset($_POST['savewidget']) || isset($_POST['removewidget']) ) {&nbsp;</div></li><li><div>  $widget_id = $_POST['widget-id'];&nbsp;</div></li><li><div>  check_admin_referer(&quot;save-delete-widget-$widget_id&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $number = isset($_POST['multi_number']) ? (int) $_POST['multi_number'] : '';&nbsp;</div></li><li><div>  if ( $number ) {&nbsp;</div></li><li><div>      foreach ( $_POST as $key =&gt; $val ) {&nbsp;</div></li><li><div>          if ( is_array($val) && preg_match('/__i__|%i%/', key($val)) ) {&nbsp;</div></li><li><div>              $_POST[$key] = array( $number =&gt; array_shift($val) );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $sidebar_id = $_POST['sidebar'];&nbsp;</div></li><li><div>  $position = isset($_POST[$sidebar_id . '_position']) ? (int) $_POST[$sidebar_id . '_position'] - 1 : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $id_base = $_POST['id_base'];&nbsp;</div></li><li><div>  $sidebar = isset($sidebars_widgets[$sidebar_id]) ? $sidebars_widgets[$sidebar_id] : array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Delete.</span>&nbsp;</div></li><li><div>  if ( isset($_POST['removewidget']) && $_POST['removewidget'] ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !in_array($widget_id, $sidebar, true) ) {&nbsp;</div></li><li><div>          wp_redirect( admin_url('widgets.php?error=0') );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $sidebar = array_diff( $sidebar, array($widget_id) );&nbsp;</div></li><li><div>      $_POST = array('sidebar' =&gt; $sidebar_id, 'widget-' . $id_base =&gt; array(), 'the-widget-id' =&gt; $widget_id, 'delete_widget' =&gt; '1');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fires immediately after a widget has been marked for deletion.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $widget_id  ID of the widget marked for deletion.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $sidebar_id ID of the sidebar the widget was deleted from.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $id_base    ID base for the widget.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'delete_widget', $widget_id, $sidebar_id, $id_base );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $_POST['widget-id'] = $sidebar;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( (array) $wp_registered_widget_updates as $name =&gt; $control ) {&nbsp;</div></li><li><div>      if ( $name != $id_base || !is_callable($control['callback']) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      ob_start();&nbsp;</div></li><li><div>          call_user_func_array( $control['callback'], $control['params'] );&nbsp;</div></li><li><div>      ob_end_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $sidebars_widgets[$sidebar_id] = $sidebar;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove old position.</span>&nbsp;</div></li><li><div>  if ( !isset($_POST['delete_widget']) ) {&nbsp;</div></li><li><div>      foreach ( $sidebars_widgets as $key =&gt; $sb ) {&nbsp;</div></li><li><div>          if ( is_array($sb) )&nbsp;</div></li><li><div>              $sidebars_widgets[$key] = array_diff( $sb, array($widget_id) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      array_splice( $sidebars_widgets[$sidebar_id], $position, 0, $widget_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_set_sidebars_widgets($sidebars_widgets);&nbsp;</div></li><li><div>  wp_redirect( admin_url('widgets.php?message=0') );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Remove inactive widgets without js</span>&nbsp;</div></li><li><div>if ( isset( $_POST['removeinactivewidgets'] ) ) {&nbsp;</div></li><li><div>  check_admin_referer( 'remove-inactive-widgets', '_wpnonce_remove_inactive_widgets' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $_POST['removeinactivewidgets'] ) {&nbsp;</div></li><li><div>      foreach ( $sidebars_widgets['wp_inactive_widgets'] as $key =&gt; $widget_id ) {&nbsp;</div></li><li><div>          $pieces = explode( '-', $widget_id );&nbsp;</div></li><li><div>          $multi_number = array_pop( $pieces );&nbsp;</div></li><li><div>          $id_base = implode( '-', $pieces );&nbsp;</div></li><li><div>          $widget = get_option( 'widget_' . $id_base );&nbsp;</div></li><li><div>          unset( $widget[$multi_number] );&nbsp;</div></li><li><div>          update_option( 'widget_' . $id_base, $widget );&nbsp;</div></li><li><div>          unset( $sidebars_widgets['wp_inactive_widgets'][$key] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      wp_set_sidebars_widgets( $sidebars_widgets );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_redirect( admin_url( 'widgets.php?message=0' ) );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Output the widget form without js</span>&nbsp;</div></li><li><div>if ( isset($_GET['editwidget']) && $_GET['editwidget'] ) {&nbsp;</div></li><li><div>  $widget_id = $_GET['editwidget'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset($_GET['addnew']) ) {&nbsp;</div></li><li><div>      <span class="comment">// Default to the first sidebar</span>&nbsp;</div></li><li><div>      $keys = array_keys( $wp_registered_sidebars );&nbsp;</div></li><li><div>      $sidebar = reset( $keys );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset($_GET['base']) && isset($_GET['num']) ) { <span class="comment">// multi-widget</span>&nbsp;</div></li><li><div>          <span class="comment">// Copy minimal info from an existing instance of this widget to a new instance</span>&nbsp;</div></li><li><div>          foreach ( $wp_registered_widget_controls as $control ) {&nbsp;</div></li><li><div>              if ( $_GET['base'] === $control['id_base'] ) {&nbsp;</div></li><li><div>                  $control_callback = $control['callback'];&nbsp;</div></li><li><div>                  $multi_number = (int) $_GET['num'];&nbsp;</div></li><li><div>                  $control['params'][0]['number'] = -1;&nbsp;</div></li><li><div>                  $widget_id = $control['id'] = $control['id_base'] . '-' . $multi_number;&nbsp;</div></li><li><div>                  $wp_registered_widget_controls[$control['id']] = $control;&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset($wp_registered_widget_controls[$widget_id]) && !isset($control) ) {&nbsp;</div></li><li><div>      $control = $wp_registered_widget_controls[$widget_id];&nbsp;</div></li><li><div>      $control_callback = $control['callback'];&nbsp;</div></li><li><div>  } elseif ( !isset($wp_registered_widget_controls[$widget_id]) && isset($wp_registered_widgets[$widget_id]) ) {&nbsp;</div></li><li><div>      $name = esc_html( strip_tags($wp_registered_widgets[$widget_id]['name']) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($name) )&nbsp;</div></li><li><div>      $name = esc_html( strip_tags($control['name']) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($sidebar) )&nbsp;</div></li><li><div>      $sidebar = isset($_GET['sidebar']) ? $_GET['sidebar'] : 'wp_inactive_widgets';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset($multi_number) )&nbsp;</div></li><li><div>      $multi_number = isset($control['params'][0]['number']) ? $control['params'][0]['number'] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $id_base = isset($control['id_base']) ? $control['id_base'] : $control['id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Show the widget form.</span>&nbsp;</div></li><li><div>  $width = ' style=&quot;width:' . max($control['width'], 350) . 'px&quot;';&nbsp;</div></li><li><div>  $key = isset($_GET['key']) ? (int) $_GET['key'] : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once( ABSPATH . 'wp-admin/admin-header.php' ); ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;h1&gt;&lt;?php echo esc_html( $title ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;editwidget&quot;&lt;?php echo $width; ?&gt;&gt;&nbsp;</div></li><li><div>  &lt;h2&gt;&lt;?php printf( __( 'Widget %s' ), $name ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;form action=&quot;widgets.php&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;widget-inside&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  if ( is_callable( $control_callback ) )&nbsp;</div></li><li><div>      call_user_func_array( $control_callback, $control['params'] );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __('There are no options for this widget.') . &quot;&lt;/p&gt;\n&quot;; ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;p class=&quot;describe&quot;&gt;&lt;?php _e('Select both the sidebar for this widget and the position of the widget in that sidebar.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;widget-position&quot;&gt;&nbsp;</div></li><li><div>  &lt;table class=&quot;widefat&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;?php _e('Sidebar'); ?&gt;&lt;/th&gt;&lt;th&gt;&lt;?php _e('Position'); ?&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  foreach ( $wp_registered_sidebars as $sbname =&gt; $sbvalue ) {&nbsp;</div></li><li><div>      echo &quot;\t\t&lt;tr&gt;&lt;td&gt;&lt;label&gt;&lt;input type='radio' name='sidebar' value='&quot; . esc_attr($sbname) . &quot;'&quot; . checked( $sbname, $sidebar, false ) . &quot; /&gt; $sbvalue[name]&lt;/label&gt;&lt;/td&gt;&lt;td&gt;&quot;;&nbsp;</div></li><li><div>      if ( 'wp_inactive_widgets' == $sbname || 'orphaned_widgets' == substr( $sbname, 0, 16 ) ) {&nbsp;</div></li><li><div>          echo '&nbsp;';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          if ( !isset($sidebars_widgets[$sbname]) || !is_array($sidebars_widgets[$sbname]) ) {&nbsp;</div></li><li><div>              $j = 1;&nbsp;</div></li><li><div>              $sidebars_widgets[$sbname] = array();&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $j = count($sidebars_widgets[$sbname]);&nbsp;</div></li><li><div>              if ( isset($_GET['addnew']) || !in_array($widget_id, $sidebars_widgets[$sbname], true) )&nbsp;</div></li><li><div>                  $j++;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $selected = '';&nbsp;</div></li><li><div>          echo &quot;\t\t&lt;select name='{$sbname}_position'&gt;\n&quot;;&nbsp;</div></li><li><div>          echo &quot;\t\t&lt;option value=''&gt;&quot; . __('&mdash; Select &mdash;') . &quot;&lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>          for ( $i = 1; $i &lt;= $j; $i++ ) {&nbsp;</div></li><li><div>              if ( in_array($widget_id, $sidebars_widgets[$sbname], true) )&nbsp;</div></li><li><div>                  $selected = selected( $i, $key + 1, false );&nbsp;</div></li><li><div>              echo &quot;\t\t&lt;option value='$i'$selected&gt; $i &lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo &quot;\t\t&lt;/select&gt;\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo &quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;;&nbsp;</div></li><li><div>  } ?&gt;&nbsp;</div></li><li><div>  &lt;/tbody&gt;&lt;/table&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;widget-control-actions&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  if ( isset($_GET['addnew']) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;widgets.php&quot; class=&quot;button alignleft&quot;&gt;&lt;?php _e('Cancel'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      submit_button( __( 'Delete' ), 'alignleft', 'removewidget', false );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  submit_button( __( 'Save Widget' ), 'primary alignright', 'savewidget', false ); ?&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;widget-id&quot; class=&quot;widget-id&quot; value=&quot;&lt;?php echo esc_attr($widget_id); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;id_base&quot; class=&quot;id_base&quot; value=&quot;&lt;?php echo esc_attr($id_base); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;multi_number&quot; class=&quot;multi_number&quot; value=&quot;&lt;?php echo esc_attr($multi_number); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php    wp_nonce_field(&quot;save-delete-widget-$widget_id&quot;); ?&gt;&nbsp;</div></li><li><div>  &lt;br class=&quot;clear&quot; /&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  require_once( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$messages = array(&nbsp;</div></li><li><div>  __('Changes saved.')&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$errors = array(&nbsp;</div></li><li><div>  __('Error while saving.'), &nbsp;</div></li><li><div>  __('Error in displaying the widget settings form.')&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/admin-header.php' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  echo esc_html( $title );&nbsp;</div></li><li><div>  if ( current_user_can( 'customize' ) ) {&nbsp;</div></li><li><div>      printf(&nbsp;</div></li><li><div>          ' &lt;a class=&quot;page-title-action hide-if-no-customize&quot; href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;', &nbsp;</div></li><li><div>          esc_url( add_query_arg(&nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  array( 'autofocus' =&gt; array( 'panel' =&gt; 'widgets' ) ), &nbsp;</div></li><li><div>                  'return' =&gt; urlencode( remove_query_arg( wp_removable_query_args(), wp_unslash( $_SERVER['REQUEST_URI'] ) ) )&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              admin_url( 'customize.php' )&nbsp;</div></li><li><div> ) ), &nbsp;</div></li><li><div>          __( 'Manage with Live Preview' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( isset($_GET['message']) && isset($messages[$_GET['message']]) ) { ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php echo $messages[$_GET['message']]; ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( isset($_GET['error']) && isset($errors[$_GET['error']]) ) { ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;message&quot; class=&quot;error&quot;&gt;&lt;p&gt;&lt;?php echo $errors[$_GET['error']]; ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires before the Widgets administration page content loads.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'widgets_admin_page' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;widget-liquid-left&quot;&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;widgets-left&quot;&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;available-widgets&quot; class=&quot;widgets-holder-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;sidebar-name&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;sidebar-name-arrow&quot;&gt;&lt;br /&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;h2&gt;&lt;?php _e( 'Available Widgets' ); ?&gt; &lt;span id=&quot;removing-widget&quot;&gt;&lt;?php _ex( 'Deactivate', 'removing-widget' ); ?&gt; &lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;widget-holder&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;sidebar-description&quot;&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;description&quot;&gt;&lt;?php _e('To activate a widget drag it to a sidebar or click on it. To deactivate a widget and delete its settings, drag it back.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div id=&quot;widget-list&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php wp_list_widgets(); ?&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;br class='clear' /&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;br class=&quot;clear&quot; /&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$theme_sidebars = array();&nbsp;</div></li><li><div>foreach ( $wp_registered_sidebars as $sidebar =&gt; $registered_sidebar ) {&nbsp;</div></li><li><div>  if ( false !== strpos( $registered_sidebar['class'], 'inactive-sidebar' ) || 'orphaned_widgets' == substr( $sidebar, 0, 16 ) ) {&nbsp;</div></li><li><div>      $wrap_class = 'widgets-holder-wrap';&nbsp;</div></li><li><div>      if ( !empty( $registered_sidebar['class'] ) )&nbsp;</div></li><li><div>          $wrap_class .= ' ' . $registered_sidebar['class'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $is_inactive_widgets = 'wp_inactive_widgets' == $registered_sidebar['id'];&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;&lt;?php echo esc_attr( $wrap_class ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;widget-holder inactive&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php wp_list_widget_controls( $registered_sidebar['id'], $registered_sidebar['name'] ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php if ( $is_inactive_widgets ) { ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;remove-inactive-widgets&quot;&gt;&nbsp;</div></li><li><div>                  &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>                      &lt;p&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          $attributes = array( 'id' =&gt; 'inactive-widgets-control-remove' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( empty($sidebars_widgets['wp_inactive_widgets']) ) {&nbsp;</div></li><li><div>                              $attributes['disabled'] = '';&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          submit_button( __( 'Clear Inactive Widgets' ), 'delete', 'removeinactivewidgets', false, $attributes );&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                          &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;/p&gt;&nbsp;</div></li><li><div>                      &lt;?php wp_nonce_field( 'remove-inactive-widgets', '_wpnonce_remove_inactive_widgets' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/form&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;?php } ?&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php if ( $is_inactive_widgets ) { ?&gt;&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&lt;?php _e( 'This will clear all items from the inactive widgets list. You will not be able to restore any customizations.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;?php } ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $theme_sidebars[$sidebar] = $registered_sidebar;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$i = $split = 0;&nbsp;</div></li><li><div>$single_sidebar_class = '';&nbsp;</div></li><li><div>$sidebars_count = count( $theme_sidebars );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( $sidebars_count &gt; 1 ) {&nbsp;</div></li><li><div>  $split = ceil( $sidebars_count / 2 );&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  $single_sidebar_class = ' single-sidebar';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;widget-liquid-right&quot;&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;widgets-right&quot; class=&quot;wp-clearfix&lt;?php echo $single_sidebar_class; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;sidebars-column-1&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>foreach ( $theme_sidebars as $sidebar =&gt; $registered_sidebar ) {&nbsp;</div></li><li><div>  $wrap_class = 'widgets-holder-wrap';&nbsp;</div></li><li><div>  if ( !empty( $registered_sidebar['class'] ) )&nbsp;</div></li><li><div>      $wrap_class .= ' sidebar-' . $registered_sidebar['class'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $i &gt; 0 )&nbsp;</div></li><li><div>      $wrap_class .= ' closed';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $split && $i == $split ) {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;div class=&quot;sidebars-column-2&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;&lt;?php echo esc_attr( $wrap_class ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php wp_list_widget_controls( $sidebar, $registered_sidebar['name'] ); <span class="comment">// Show the control forms for each of the widgets in this sidebar ?&gt;</span>&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $i++;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field( 'save-sidebar-widgets', '_wpnonce_widgets', false ); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;br class=&quot;clear&quot; /&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;widgets-chooser&quot;&gt;&nbsp;</div></li><li><div>  &lt;ul class=&quot;widgets-chooser-sidebars&quot;&gt;&lt;/ul&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;widgets-chooser-actions&quot;&gt;&nbsp;</div></li><li><div>      &lt;button class=&quot;button widgets-chooser-cancel&quot;&gt;&lt;?php _e( 'Cancel' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;button class=&quot;button button-primary widgets-chooser-add&quot;&gt;&lt;?php _e( 'Add Widget' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires after the available widgets and sidebars have loaded, before the admin footer.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'sidebar_admin_page' );&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>