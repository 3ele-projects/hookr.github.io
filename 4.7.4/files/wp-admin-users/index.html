<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4616"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-users | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.24"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=5fd07ca4ae367834dbdebce2251f279c' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.24' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-users/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-users%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-users%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-users","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-users" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-users</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/users.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * User administration panel</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! current_user_can( 'list_users' ) ) {&nbsp;</div></li><li><div>  wp_die(&nbsp;</div></li><li><div>      '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>      '&lt;p&gt;' . __( 'Sorry, you are not allowed to list users.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_list_table = _get_list_table('WP_Users_List_Table');&nbsp;</div></li><li><div>$pagenum = $wp_list_table-&gt;get_pagenum();&nbsp;</div></li><li><div>$title = __('Users');&nbsp;</div></li><li><div>$parent_file = 'users.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_screen_option( 'per_page' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// contextual help - choose Help on the top right of admin panel to preview this.</span>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'overview', &nbsp;</div></li><li><div>  'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>  'content' =&gt; '&lt;p&gt;' . __('This screen lists all the existing users for your site. Each user has one of five defined roles as set by the site admin: Site Administrator, Editor, Author, Contributor, or Subscriber. Users with roles other than Administrator will see fewer options in the dashboard navigation when they are logged in, based on their role.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>               '&lt;p&gt;' . __('To add a new user for your site, click the Add New button at the top of the screen or Add New in the Users menu section.') . '&lt;/p&gt;'&nbsp;</div></li><li><div>) ) ;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'screen-display', &nbsp;</div></li><li><div>  'title' =&gt; __('Screen Display'), &nbsp;</div></li><li><div>  'content' =&gt; '&lt;p&gt;' . __('You can customize the display of this screen in a number of ways:') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                  '&lt;ul&gt;' .&nbsp;</div></li><li><div>                  '&lt;li&gt;' . __('You can hide/display columns based on your needs and decide how many users to list per screen using the Screen Options tab.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>                  '&lt;li&gt;' . __( 'You can filter the list of users by User Role using the text links above the users list to show All, Administrator, Editor, Author, Contributor, or Subscriber. The default view is to show all users. Unused User Roles are not listed.' ) . '&lt;/li&gt;' .&nbsp;</div></li><li><div>                  '&lt;li&gt;' . __('You can view all posts made by a user by clicking on the number under the Posts column.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>                  '&lt;/ul&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$help = '&lt;p&gt;' . __('Hovering over a row in the users list will display action links that allow you to manage users. You can perform the following actions:') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;ul&gt;' .&nbsp;</div></li><li><div>  '&lt;li&gt;' . __('Edit takes you to the editable profile screen for that user. You can also reach that screen by clicking on the username.') . '&lt;/li&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() )&nbsp;</div></li><li><div>  $help .= '&lt;li&gt;' . __( 'Remove allows you to remove a user from your site. It does not delete their content. You can also remove multiple users at once by using Bulk Actions.' ) . '&lt;/li&gt;';&nbsp;</div></li><li><div>else&nbsp;</div></li><li><div>  $help .= '&lt;li&gt;' . __( 'Delete brings you to the Delete Users screen for confirmation, where you can permanently remove a user from your site and delete their content. You can also delete multiple users at once by using Bulk Actions.' ) . '&lt;/li&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$help .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'actions', &nbsp;</div></li><li><div>  'title' =&gt; __('Actions'), &nbsp;</div></li><li><div>  'content' =&gt; $help, &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>unset( $help );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Users_Screen&quot;&gt;Documentation on Managing Users&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Roles_and_Capabilities&quot;&gt;Descriptions of Roles and Capabilities&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;') . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_screen_reader_content( array(&nbsp;</div></li><li><div>  'heading_views' =&gt; __( 'Filter users list' ), &nbsp;</div></li><li><div>  'heading_pagination' =&gt; __( 'Users list navigation' ), &nbsp;</div></li><li><div>  'heading_list' =&gt; __( 'Users list' ), &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( empty($_REQUEST) ) {&nbsp;</div></li><li><div>  $referer = '&lt;input type=&quot;hidden&quot; name=&quot;wp_http_referer&quot; value=&quot;'. esc_attr( wp_unslash( $_SERVER['REQUEST_URI'] ) ) . '&quot; /&gt;';&nbsp;</div></li><li><div>} elseif ( isset($_REQUEST['wp_http_referer']) ) {&nbsp;</div></li><li><div>  $redirect = remove_query_arg(array('wp_http_referer', 'updated', 'delete_count'), wp_unslash( $_REQUEST['wp_http_referer'] ) );&nbsp;</div></li><li><div>  $referer = '&lt;input type=&quot;hidden&quot; name=&quot;wp_http_referer&quot; value=&quot;' . esc_attr($redirect) . '&quot; /&gt;';&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  $redirect = 'users.php';&nbsp;</div></li><li><div>  $referer = '';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$update = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>switch ( $wp_list_table-&gt;current_action() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Bulk Dropdown menu Role changes */</span>&nbsp;</div></li><li><div>case 'promote':&nbsp;</div></li><li><div>  check_admin_referer('bulk-users');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'promote_users' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to edit this user.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) ) {&nbsp;</div></li><li><div>      wp_redirect($redirect);&nbsp;</div></li><li><div>      exit();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $editable_roles = get_editable_roles();&nbsp;</div></li><li><div>  $role = false;&nbsp;</div></li><li><div>  if ( ! empty( $_REQUEST['new_role2'] ) ) {&nbsp;</div></li><li><div>      $role = $_REQUEST['new_role2'];&nbsp;</div></li><li><div>  } elseif ( ! empty( $_REQUEST['new_role'] ) ) {&nbsp;</div></li><li><div>      $role = $_REQUEST['new_role'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $role || empty( $editable_roles[ $role ] ) ) {&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to give users that role.' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $userids = $_REQUEST['users'];&nbsp;</div></li><li><div>  $update = 'promote';&nbsp;</div></li><li><div>  foreach ( $userids as $id ) {&nbsp;</div></li><li><div>      $id = (int) $id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! current_user_can('promote_user', $id) )&nbsp;</div></li><li><div>          wp_die(__('Sorry, you are not allowed to edit this user.'));&nbsp;</div></li><li><div>      <span class="comment">// The new role of the current user must also have the promote_users cap or be a multisite super admin</span>&nbsp;</div></li><li><div>      if ( $id == $current_user-&gt;ID && ! $wp_roles-&gt;role_objects[ $role ]-&gt;has_cap('promote_users')&nbsp;</div></li><li><div>          && ! ( is_multisite() && is_super_admin() ) ) {&nbsp;</div></li><li><div>              $update = 'err_admin_role';&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If the user doesn't already belong to the blog, bail.</span>&nbsp;</div></li><li><div>      if ( is_multisite() && !is_user_member_of_blog( $id ) ) {&nbsp;</div></li><li><div>          wp_die(&nbsp;</div></li><li><div>              '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>              '&lt;p&gt;' . __( 'One of the selected users is not a member of this site.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>              403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $user = get_userdata( $id );&nbsp;</div></li><li><div>      $user-&gt;set_role( $role );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_redirect(add_query_arg('update', $update, $redirect));&nbsp;</div></li><li><div>  exit();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>case 'dodelete':&nbsp;</div></li><li><div>  if ( is_multisite() )&nbsp;</div></li><li><div>      wp_die( __('User deletion is not allowed from this screen.') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('delete-users');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) ) {&nbsp;</div></li><li><div>      wp_redirect($redirect);&nbsp;</div></li><li><div>      exit();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $userids = array_map( 'intval', (array) $_REQUEST['users'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $_REQUEST['delete_option'] ) ) {&nbsp;</div></li><li><div>      $url = self_admin_url( 'users.php?action=delete&users[]=' . implode( '&users[]=', $userids ) . '&error=true' );&nbsp;</div></li><li><div>      $url = str_replace( '&amp;', '&', wp_nonce_url( $url, 'bulk-users' ) );&nbsp;</div></li><li><div>      wp_redirect( $url );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'delete_users' ) )&nbsp;</div></li><li><div>      wp_die(__('Sorry, you are not allowed to delete users.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $update = 'del';&nbsp;</div></li><li><div>  $delete_count = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $userids as $id ) {&nbsp;</div></li><li><div>      if ( ! current_user_can( 'delete_user', $id ) )&nbsp;</div></li><li><div>          wp_die(__( 'Sorry, you are not allowed to delete that user.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $id == $current_user-&gt;ID ) {&nbsp;</div></li><li><div>          $update = 'err_admin_del';&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      switch ( $_REQUEST['delete_option'] ) {&nbsp;</div></li><li><div>      case 'delete':&nbsp;</div></li><li><div>          wp_delete_user( $id );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'reassign':&nbsp;</div></li><li><div>          wp_delete_user( $id, $_REQUEST['reassign_user'] );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      ++$delete_count;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $redirect = add_query_arg( array('delete_count' =&gt; $delete_count, 'update' =&gt; $update), $redirect);&nbsp;</div></li><li><div>  wp_redirect($redirect);&nbsp;</div></li><li><div>  exit();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>case 'delete':&nbsp;</div></li><li><div>  if ( is_multisite() )&nbsp;</div></li><li><div>      wp_die( __('User deletion is not allowed from this screen.') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('bulk-users');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) && empty($_REQUEST['user']) ) {&nbsp;</div></li><li><div>      wp_redirect($redirect);&nbsp;</div></li><li><div>      exit();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'delete_users' ) )&nbsp;</div></li><li><div>      $errors = new WP_Error( 'edit_users', __( 'Sorry, you are not allowed to delete users.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) )&nbsp;</div></li><li><div>      $userids = array( intval( $_REQUEST['user'] ) );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $userids = array_map( 'intval', (array) $_REQUEST['users'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $users_have_content = false;&nbsp;</div></li><li><div>  if ( $wpdb-&gt;get_var( &quot;SELECT ID FROM {$wpdb-&gt;posts} WHERE post_author IN( &quot; . implode( ', ', $userids ) . &quot; ) LIMIT 1&quot; ) ) {&nbsp;</div></li><li><div>      $users_have_content = true;&nbsp;</div></li><li><div>  } elseif ( $wpdb-&gt;get_var( &quot;SELECT link_id FROM {$wpdb-&gt;links} WHERE link_owner IN( &quot; . implode( ', ', $userids ) . &quot; ) LIMIT 1&quot; ) ) {&nbsp;</div></li><li><div>      $users_have_content = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $users_have_content ) {&nbsp;</div></li><li><div>      add_action( 'admin_head', 'delete_users_add_js' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; name=&quot;updateusers&quot; id=&quot;updateusers&quot;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field('delete-users') ?&gt;&nbsp;</div></li><li><div>&lt;?php echo $referer; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&lt;?php _e( 'Delete Users' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>&lt;?php if ( isset( $_REQUEST['error'] ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error&quot;&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&lt;strong&gt;&lt;?php _e( 'ERROR:' ); ?&gt;&lt;/strong&gt; &lt;?php _e( 'Please select an option.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( 1 == count( $userids ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e( 'You have specified this user for deletion:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e( 'You have specified these users for deletion:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;ul&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  $go_delete = 0;&nbsp;</div></li><li><div>  foreach ( $userids as $id ) {&nbsp;</div></li><li><div>      $user = get_userdata( $id );&nbsp;</div></li><li><div>      if ( $id == $current_user-&gt;ID ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: 1: user id, 2: user login */</span></span></span></span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;li&gt;&quot; . sprintf(__('ID #%1$s: %2$s &lt;strong&gt;The current user will not be deleted.&lt;/strong&gt;'), $id, $user-&gt;user_login) . &quot;&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: 1: user id, 2: user login */</span></span></span></span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;li&gt;&lt;input type=\&quot;hidden\&quot; name=\&quot;users[]\&quot; value=\&quot;&quot; . esc_attr($id) . &quot;\&quot; /&gt;&quot; . sprintf(__('ID #%1$s: %2$s'), $id, $user-&gt;user_login) . &quot;&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>          $go_delete++;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/ul&gt;&nbsp;</div></li><li><div>&lt;?php if ( $go_delete ) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $users_have_content ) : ?&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;hidden&quot; name=&quot;delete_option&quot; value=&quot;delete&quot; /&gt;&nbsp;</div></li><li><div>  &lt;?php else: ?&gt;&nbsp;</div></li><li><div>      &lt;?php if ( 1 == $go_delete ) : ?&gt;&nbsp;</div></li><li><div>          &lt;fieldset&gt;&lt;p&gt;&lt;legend&gt;&lt;?php _e( 'What should be done with content owned by this user?' ); ?&gt;&lt;/legend&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;?php else : ?&gt;&nbsp;</div></li><li><div>          &lt;fieldset&gt;&lt;p&gt;&lt;legend&gt;&lt;?php _e( 'What should be done with content owned by these users?' ); ?&gt;&lt;/legend&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>      &lt;ul style=&quot;list-style:none;&quot;&gt;&nbsp;</div></li><li><div>          &lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; id=&quot;delete_option0&quot; name=&quot;delete_option&quot; value=&quot;delete&quot; /&gt;&nbsp;</div></li><li><div>          &lt;?php _e('Delete all content.'); ?&gt;&lt;/label&gt;&lt;/li&gt;&nbsp;</div></li><li><div>          &lt;li&gt;&lt;input type=&quot;radio&quot; id=&quot;delete_option1&quot; name=&quot;delete_option&quot; value=&quot;reassign&quot; /&gt;&nbsp;</div></li><li><div>          &lt;?php echo '&lt;label for=&quot;delete_option1&quot;&gt;' . __( 'Attribute all content to:' ) . '&lt;/label&gt; ';&nbsp;</div></li><li><div>          wp_dropdown_users( array(&nbsp;</div></li><li><div>              'name' =&gt; 'reassign_user', &nbsp;</div></li><li><div>              'exclude' =&gt; array_diff( $userids, array( $current_user-&gt;ID ) ), &nbsp;</div></li><li><div>              'show' =&gt; 'display_name_with_login', &nbsp;</div></li><li><div> ) ); ?&gt;&lt;/li&gt;&nbsp;</div></li><li><div>      &lt;/ul&gt;&lt;/fieldset&gt;&nbsp;</div></li><li><div>  &lt;?php endif;&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires at the end of the delete users form prior to the confirm button.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.0.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.5.0 The `$userids` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_User $current_user WP_User object for the current user.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array   $userids      Array of IDs for users being deleted.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'delete_user_form', $current_user, $userids );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;dodelete&quot; /&gt;&nbsp;</div></li><li><div>  &lt;?php submit_button( __('Confirm Deletion'), 'primary' ); ?&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e('There are no valid users selected for deletion.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>case 'doremove':&nbsp;</div></li><li><div>  check_admin_referer('remove-users');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_multisite() )&nbsp;</div></li><li><div>      wp_die( __( 'You can&#8217;t remove users.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) ) {&nbsp;</div></li><li><div>      wp_redirect($redirect);&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'remove_users' ) )&nbsp;</div></li><li><div>      wp_die( __( 'Sorry, you are not allowed to remove users.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $userids = $_REQUEST['users'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $update = 'remove';&nbsp;</div></li><li><div>   foreach ( $userids as $id ) {&nbsp;</div></li><li><div>      $id = (int) $id;&nbsp;</div></li><li><div>      if ( $id == $current_user-&gt;ID && !is_super_admin() ) {&nbsp;</div></li><li><div>          $update = 'err_admin_remove';&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( !current_user_can('remove_user', $id) ) {&nbsp;</div></li><li><div>          $update = 'err_admin_remove';&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      remove_user_from_blog($id, $blog_id);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $redirect = add_query_arg( array('update' =&gt; $update), $redirect);&nbsp;</div></li><li><div>  wp_redirect($redirect);&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>case 'remove':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  check_admin_referer('bulk-users');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_multisite() )&nbsp;</div></li><li><div>      wp_die( __( 'You can&#8217;t remove users.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) && empty($_REQUEST['user']) ) {&nbsp;</div></li><li><div>      wp_redirect($redirect);&nbsp;</div></li><li><div>      exit();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !current_user_can('remove_users') )&nbsp;</div></li><li><div>      $error = new WP_Error('edit_users', __('Sorry, you are not allowed to remove users.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($_REQUEST['users']) )&nbsp;</div></li><li><div>      $userids = array(intval($_REQUEST['user']));&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $userids = $_REQUEST['users'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; name=&quot;updateusers&quot; id=&quot;updateusers&quot;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field('remove-users') ?&gt;&nbsp;</div></li><li><div>&lt;?php echo $referer; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&lt;?php _e( 'Remove Users from Site' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( 1 == count( $userids ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e( 'You have specified this user for removal:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e( 'You have specified these users for removal:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;ul&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  $go_remove = false;&nbsp;</div></li><li><div>   foreach ( $userids as $id ) {&nbsp;</div></li><li><div>      $id = (int) $id;&nbsp;</div></li><li><div>       $user = get_userdata( $id );&nbsp;</div></li><li><div>      if ( $id == $current_user-&gt;ID && !is_super_admin() ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: 1: user id, 2: user login */</span></span></span></span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;li&gt;&quot; . sprintf(__('ID #%1$s: %2$s &lt;strong&gt;The current user will not be removed.&lt;/strong&gt;'), $id, $user-&gt;user_login) . &quot;&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>      } elseif ( !current_user_can('remove_user', $id) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: 1: user id, 2: user login */</span></span></span></span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;li&gt;&quot; . sprintf(__('ID #%1$s: %2$s &lt;strong&gt;Sorry, you are not allowed to remove this user.&lt;/strong&gt;'), $id, $user-&gt;user_login) . &quot;&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** translators: 1: user id, 2: user login */</span></span></span></span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;li&gt;&lt;input type=\&quot;hidden\&quot; name=\&quot;users[]\&quot; value=\&quot;{$id}\&quot; /&gt;&quot; . sprintf(__('ID #%1$s: %2$s'), $id, $user-&gt;user_login) . &quot;&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>          $go_remove = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>   }&nbsp;</div></li><li><div>   ?&gt;&nbsp;</div></li><li><div>&lt;/ul&gt;&nbsp;</div></li><li><div>&lt;?php if ( $go_remove ) : ?&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;doremove&quot; /&gt;&nbsp;</div></li><li><div>      &lt;?php submit_button( __('Confirm Removal'), 'primary' ); ?&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e('There are no valid users selected for removal.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>default:&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty($_GET['_wp_http_referer']) ) {&nbsp;</div></li><li><div>      wp_redirect( remove_query_arg( array( '_wp_http_referer', '_wpnonce'), wp_unslash( $_SERVER['REQUEST_URI'] ) ) );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $wp_list_table-&gt;current_action() && ! empty( $_REQUEST['users'] ) ) {&nbsp;</div></li><li><div>      $userids = $_REQUEST['users'];&nbsp;</div></li><li><div>      $sendback = wp_get_referer();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** This action is documented in wp-admin/edit-comments.php */</span>&nbsp;</div></li><li><div>      $sendback = apply_filters( 'handle_bulk_actions-' . get_current_screen()-&gt;id, $sendback, $wp_list_table-&gt;current_action(), $userids );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      wp_safe_redirect( $sendback );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_list_table-&gt;prepare_items();&nbsp;</div></li><li><div>  $total_pages = $wp_list_table-&gt;get_pagination_arg( 'total_pages' );&nbsp;</div></li><li><div>  if ( $pagenum &gt; $total_pages && $total_pages &gt; 0 ) {&nbsp;</div></li><li><div>      wp_redirect( add_query_arg( 'paged', $total_pages ) );&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $messages = array();&nbsp;</div></li><li><div>  if ( isset($_GET['update']) ) :&nbsp;</div></li><li><div>      switch($_GET['update']) {&nbsp;</div></li><li><div>      case 'del':&nbsp;</div></li><li><div>      case 'del_many':&nbsp;</div></li><li><div>          $delete_count = isset($_GET['delete_count']) ? (int) $_GET['delete_count'] : 0;&nbsp;</div></li><li><div>          if ( 1 == $delete_count ) {&nbsp;</div></li><li><div>              $message = __( 'User deleted.' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $message = _n( '%s user deleted.', '%s users deleted.', $delete_count );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . sprintf( $message, number_format_i18n( $delete_count ) ) . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'add':&nbsp;</div></li><li><div>          if ( isset( $_GET['id'] ) && ( $user_id = $_GET['id'] ) && current_user_can( 'edit_user', $user_id ) ) {&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: edit page url */</span>&nbsp;</div></li><li><div>              $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . sprintf( __( 'New user created. &lt;a href=&quot;%s&quot;&gt;Edit user&lt;/a&gt;' ), &nbsp;</div></li><li><div>                  esc_url( add_query_arg( 'wp_http_referer', urlencode( wp_unslash( $_SERVER['REQUEST_URI'] ) ), &nbsp;</div></li><li><div>                      self_admin_url( 'user-edit.php?user_id=' . $user_id ) ) ) ) . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . __( 'New user created.' ) . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'promote':&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . __('Changed roles.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'err_admin_role':&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;error notice is-dismissible&quot;&gt;&lt;p&gt;' . __('The current user&#8217;s role must have user editing capabilities.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . __('Other user roles have been changed.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'err_admin_del':&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;error notice is-dismissible&quot;&gt;&lt;p&gt;' . __('You can&#8217;t delete the current user.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . __('Other users have been deleted.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'remove':&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible fade&quot;&gt;&lt;p&gt;' . __('User removed from this site.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'err_admin_remove':&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;error notice is-dismissible&quot;&gt;&lt;p&gt;' . __(&quot;You can't remove the current user.&quot;) . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          $messages[] = '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible fade&quot;&gt;&lt;p&gt;' . __('Other users have been removed.') . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( isset($errors) && is_wp_error( $errors ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error&quot;&gt;&nbsp;</div></li><li><div>      &lt;ul&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>          foreach ( $errors-&gt;get_error_messages() as $err )&nbsp;</div></li><li><div>              echo &quot;&lt;li&gt;$err&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/ul&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty($messages) ) {&nbsp;</div></li><li><div>  foreach ( $messages as $msg )&nbsp;</div></li><li><div>      echo $msg;&nbsp;</div></li><li><div>} ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>echo esc_html( $title );&nbsp;</div></li><li><div>if ( current_user_can( 'create_users' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;&lt;?php echo admin_url( 'user-new.php' ); ?&gt;&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x( 'Add New', 'user' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;?php } elseif ( is_multisite() && current_user_can( 'promote_users' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;a href=&quot;&lt;?php echo admin_url( 'user-new.php' ); ?&gt;&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x( 'Add Existing', 'user' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;?php }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( strlen( $usersearch ) ) {&nbsp;</div></li><li><div>  <span class="comment">/** translators: %s: search keywords */</span>&nbsp;</div></li><li><div>  printf( '&lt;span class=&quot;subtitle&quot;&gt;' . __( 'Search results for &#8220;%s&#8221;' ) . '&lt;/span&gt;', esc_html( $usersearch ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;views(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;form method=&quot;get&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;search_box( __( 'Search Users' ), 'user' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;display(); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;br class=&quot;clear&quot; /&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} <span class="comment">// end of the $doaction switch</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>include( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>