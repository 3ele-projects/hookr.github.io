<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4803"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-includes-load | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=7c2e0a35224e75cd4d28c2a92b60015a' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-includes-load/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-load%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-load%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-includes-load","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-includes-load" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-includes-load</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-includes/load.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * These functions are needed to load WordPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the HTTP protocol sent by the server.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The HTTP protocol. Default: HTTP/1.0.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_server_protocol() {&nbsp;</div></li><li><div>  $protocol = $_SERVER['SERVER_PROTOCOL'];&nbsp;</div></li><li><div>  if ( ! in_array( $protocol, array( 'HTTP/1.1', 'HTTP/2', 'HTTP/2.0' ) ) ) {&nbsp;</div></li><li><div>      $protocol = 'HTTP/1.0';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $protocol;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Turn register globals off.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_unregister_GLOBALS() {&nbsp;</div></li><li><div>  if ( !ini_get( 'register_globals' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['GLOBALS'] ) )&nbsp;</div></li><li><div>      die( 'GLOBALS overwrite attempt detected' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Variables that shouldn't be unset</span>&nbsp;</div></li><li><div>  $no_unset = array( 'GLOBALS', '_GET', '_POST', '_COOKIE', '_REQUEST', '_SERVER', '_ENV', '_FILES', 'table_prefix' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $input = array_merge( $_GET, $_POST, $_COOKIE, $_SERVER, $_ENV, $_FILES, isset( $_SESSION ) && is_array( $_SESSION ) ? $_SESSION : array() );&nbsp;</div></li><li><div>  foreach ( $input as $k =&gt; $v )&nbsp;</div></li><li><div>      if ( !in_array( $k, $no_unset ) && isset( $GLOBALS[$k] ) ) {&nbsp;</div></li><li><div>          unset( $GLOBALS[$k] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fix `$_SERVER` variables for various setups.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $PHP_SELF The filename of the currently executing script, </span>&nbsp;</div></li><li><div><span class="comment"> *                          relative to the document root.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_fix_server_vars() {&nbsp;</div></li><li><div>  global $PHP_SELF;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $default_server_values = array(&nbsp;</div></li><li><div>      'SERVER_SOFTWARE' =&gt; '', &nbsp;</div></li><li><div>      'REQUEST_URI' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $_SERVER = array_merge( $default_server_values, $_SERVER );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix for IIS when running with PHP ISAPI</span>&nbsp;</div></li><li><div>  if ( empty( $_SERVER['REQUEST_URI'] ) || ( PHP_SAPI != 'cgi-fcgi' && preg_match( '/^Microsoft-IIS\<span class="comment">//', $_SERVER['SERVER_SOFTWARE'] ) ) ) {</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// IIS Mod-Rewrite</span>&nbsp;</div></li><li><div>      if ( isset( $_SERVER['HTTP_X_ORIGINAL_URL'] ) ) {&nbsp;</div></li><li><div>          $_SERVER['REQUEST_URI'] = $_SERVER['HTTP_X_ORIGINAL_URL'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      <span class="comment">// IIS Isapi_Rewrite</span>&nbsp;</div></li><li><div>      elseif ( isset( $_SERVER['HTTP_X_REWRITE_URL'] ) ) {&nbsp;</div></li><li><div>          $_SERVER['REQUEST_URI'] = $_SERVER['HTTP_X_REWRITE_URL'];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// Use ORIG_PATH_INFO if there is no PATH_INFO</span>&nbsp;</div></li><li><div>          if ( !isset( $_SERVER['PATH_INFO'] ) && isset( $_SERVER['ORIG_PATH_INFO'] ) )&nbsp;</div></li><li><div>              $_SERVER['PATH_INFO'] = $_SERVER['ORIG_PATH_INFO'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Some IIS + PHP configurations puts the script-name in the path-info (No need to append it twice)</span>&nbsp;</div></li><li><div>          if ( isset( $_SERVER['PATH_INFO'] ) ) {&nbsp;</div></li><li><div>              if ( $_SERVER['PATH_INFO'] == $_SERVER['SCRIPT_NAME'] )&nbsp;</div></li><li><div>                  $_SERVER['REQUEST_URI'] = $_SERVER['PATH_INFO'];&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  $_SERVER['REQUEST_URI'] = $_SERVER['SCRIPT_NAME'] . $_SERVER['PATH_INFO'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Append the query string if it exists and isn't null</span>&nbsp;</div></li><li><div>          if ( ! empty( $_SERVER['QUERY_STRING'] ) ) {&nbsp;</div></li><li><div>              $_SERVER['REQUEST_URI'] .= '?' . $_SERVER['QUERY_STRING'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix for PHP as CGI hosts that set SCRIPT_FILENAME to something ending in php.cgi for all requests</span>&nbsp;</div></li><li><div>  if ( isset( $_SERVER['SCRIPT_FILENAME'] ) && ( strpos( $_SERVER['SCRIPT_FILENAME'], 'php.cgi' ) == strlen( $_SERVER['SCRIPT_FILENAME'] ) - 7 ) )&nbsp;</div></li><li><div>      $_SERVER['SCRIPT_FILENAME'] = $_SERVER['PATH_TRANSLATED'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix for Dreamhost and other PHP as CGI hosts</span>&nbsp;</div></li><li><div>  if ( strpos( $_SERVER['SCRIPT_NAME'], 'php.cgi' ) !== false )&nbsp;</div></li><li><div>      unset( $_SERVER['PATH_INFO'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix empty PHP_SELF</span>&nbsp;</div></li><li><div>  $PHP_SELF = $_SERVER['PHP_SELF'];&nbsp;</div></li><li><div>  if ( empty( $PHP_SELF ) )&nbsp;</div></li><li><div>      $_SERVER['PHP_SELF'] = $PHP_SELF = preg_replace( '/(\?.*)?$/', '', $_SERVER[&quot;REQUEST_URI&quot;] );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check for the required PHP version, and the MySQL extension or</span>&nbsp;</div></li><li><div><span class="comment"> * a database drop-in.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Dies if requirements are not met.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $required_php_version The required PHP version string.</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $wp_version           The WordPress version string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_check_php_mysql_versions() {&nbsp;</div></li><li><div>  global $required_php_version, $wp_version;&nbsp;</div></li><li><div>  $php_version = phpversion();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( version_compare( $required_php_version, $php_version, '&gt;' ) ) {&nbsp;</div></li><li><div>      wp_load_translations_early();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $protocol = wp_get_server_protocol();&nbsp;</div></li><li><div>      header( sprintf( '%s 500 Internal Server Error', $protocol ), true, 500 );&nbsp;</div></li><li><div>      header( 'Content-Type: text/html; charset=utf-8' );&nbsp;</div></li><li><div>      <span class="comment">/** translators: 1: Current PHP version number, 2: WordPress version number, 3: Minimum required PHP version number */</span>&nbsp;</div></li><li><div>      die( sprintf( __( 'Your server is running PHP version %1$s but WordPress %2$s requires at least %3$s.' ), $php_version, $wp_version, $required_php_version ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! extension_loaded( 'mysql' ) && ! extension_loaded( 'mysqli' ) && ! extension_loaded( 'mysqlnd' ) && ! file_exists( WP_CONTENT_DIR . '/db.php' ) ) {&nbsp;</div></li><li><div>      wp_load_translations_early();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $protocol = wp_get_server_protocol();&nbsp;</div></li><li><div>      header( sprintf( '%s 500 Internal Server Error', $protocol ), true, 500 );&nbsp;</div></li><li><div>      header( 'Content-Type: text/html; charset=utf-8' );&nbsp;</div></li><li><div>      die( __( 'Your PHP installation appears to be missing the MySQL extension which is required by WordPress.' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Don't load all of WordPress when handling a favicon.ico request.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Instead, send the headers for a zero-length favicon and bail.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_favicon_request() {&nbsp;</div></li><li><div>  if ( '/favicon.ico' == $_SERVER['REQUEST_URI'] ) {&nbsp;</div></li><li><div>      header('Content-Type: image/vnd.microsoft.icon');&nbsp;</div></li><li><div>      exit;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Die with a maintenance message when conditions are met.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Checks for a file in the WordPress root directory named &quot;.maintenance&quot;.</span>&nbsp;</div></li><li><div><span class="comment"> * This file will contain the variable $upgrading, set to the time the file</span>&nbsp;</div></li><li><div><span class="comment"> * was created. If the file was created less than 10 minutes ago, WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * enters maintenance mode and displays a message.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The default message can be replaced by using a drop-in (maintenance.php in</span>&nbsp;</div></li><li><div><span class="comment"> * the wp-content directory).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $upgrading the unix timestamp marking when upgrading WordPress began.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_maintenance() {&nbsp;</div></li><li><div>  if ( ! file_exists( ABSPATH . '.maintenance' ) || wp_installing() )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  global $upgrading;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include( ABSPATH . '.maintenance' );&nbsp;</div></li><li><div>  <span class="comment">// If the $upgrading timestamp is older than 10 minutes, don't die.</span>&nbsp;</div></li><li><div>  if ( ( time() - $upgrading ) &gt;= 600 )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether to enable maintenance mode.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * This filter runs before it can be used by plugins. It is designed for</span>&nbsp;</div></li><li><div><span class="comment">   * non-web runtimes. If this filter returns true, maintenance mode will be</span>&nbsp;</div></li><li><div><span class="comment">   * active and the request will end. If false, the request will be allowed to</span>&nbsp;</div></li><li><div><span class="comment">   * continue processing even if maintenance mode should be active.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $enable_checks Whether to enable maintenance mode. Default true.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int  $upgrading     The timestamp set in the .maintenance file.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( ! apply_filters( 'enable_maintenance_mode', true, $upgrading ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( file_exists( WP_CONTENT_DIR . '/maintenance.php' ) ) {&nbsp;</div></li><li><div>      require_once( WP_CONTENT_DIR . '/maintenance.php' );&nbsp;</div></li><li><div>      die();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_load_translations_early();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $protocol = wp_get_server_protocol();&nbsp;</div></li><li><div>  header( &quot;$protocol 503 Service Unavailable&quot;, true, 503 );&nbsp;</div></li><li><div>  header( 'Content-Type: text/html; charset=utf-8' );&nbsp;</div></li><li><div>  header( 'Retry-After: 600' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;!DOCTYPE html&gt;&nbsp;</div></li><li><div>  &lt;html xmlns=&quot;http:<span class="comment">//www.w3.org/1999/xhtml&quot;&lt;?php if ( is_rtl() ) echo ' dir=&quot;rtl&quot;'; ?&gt;&gt;</span>&nbsp;</div></li><li><div>  &lt;head&gt;&nbsp;</div></li><li><div>  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&nbsp;</div></li><li><div>      &lt;title&gt;&lt;?php _e( 'Maintenance' ); ?&gt;&lt;/title&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/head&gt;&nbsp;</div></li><li><div>  &lt;body&gt;&nbsp;</div></li><li><div>      &lt;h1&gt;&lt;?php _e( 'Briefly unavailable for scheduled maintenance. Check back in a minute.' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>  &lt;/body&gt;&nbsp;</div></li><li><div>  &lt;/html&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  die();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Start the WordPress micro-timer.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global float $timestart Unix timestamp set at the beginning of the page load.</span>&nbsp;</div></li><li><div><span class="comment"> * @see timer_stop()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Always returns true.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function timer_start() {&nbsp;</div></li><li><div>  global $timestart;&nbsp;</div></li><li><div>  $timestart = microtime( true );&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve or display the time from the page start to when function is called.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global float   $timestart Seconds from when timer_start() is called.</span>&nbsp;</div></li><li><div><span class="comment"> * @global float   $timeend   Seconds from when function is called.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $display   Whether to echo or return the results. Accepts 0|false for return, </span>&nbsp;</div></li><li><div><span class="comment"> *                            1|true for echo. Default 0|false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int      $precision The number of digits from the right of the decimal to display.</span>&nbsp;</div></li><li><div><span class="comment"> *                            Default 3.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The &quot;second.microsecond&quot; finished time calculation. The number is formatted</span>&nbsp;</div></li><li><div><span class="comment"> *                for human consumption, both localized and rounded.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function timer_stop( $display = 0, $precision = 3 ) {&nbsp;</div></li><li><div>  global $timestart, $timeend;&nbsp;</div></li><li><div>  $timeend = microtime( true );&nbsp;</div></li><li><div>  $timetotal = $timeend - $timestart;&nbsp;</div></li><li><div>  $r = ( function_exists( 'number_format_i18n' ) ) ? number_format_i18n( $timetotal, $precision ) : number_format( $timetotal, $precision );&nbsp;</div></li><li><div>  if ( $display )&nbsp;</div></li><li><div>      echo $r;&nbsp;</div></li><li><div>  return $r;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set PHP error reporting based on WordPress debug settings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Uses three constants: `WP_DEBUG`, `WP_DEBUG_DISPLAY`, and `WP_DEBUG_LOG`.</span>&nbsp;</div></li><li><div><span class="comment"> * All three can be defined in wp-config.php. By default, `WP_DEBUG` and</span>&nbsp;</div></li><li><div><span class="comment"> * `WP_DEBUG_LOG` are set to false, and `WP_DEBUG_DISPLAY` is set to true.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * When `WP_DEBUG` is true, all PHP notices are reported. WordPress will also</span>&nbsp;</div></li><li><div><span class="comment"> * display internal notices: when a deprecated WordPress function, function</span>&nbsp;</div></li><li><div><span class="comment"> * argument, or file is used. Deprecated code may be removed from a later</span>&nbsp;</div></li><li><div><span class="comment"> * version.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * It is strongly recommended that plugin and theme developers use `WP_DEBUG`</span>&nbsp;</div></li><li><div><span class="comment"> * in their development environments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * `WP_DEBUG_DISPLAY` and `WP_DEBUG_LOG` perform no function unless `WP_DEBUG`</span>&nbsp;</div></li><li><div><span class="comment"> * is true.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * When `WP_DEBUG_DISPLAY` is true, WordPress will force errors to be displayed.</span>&nbsp;</div></li><li><div><span class="comment"> * `WP_DEBUG_DISPLAY` defaults to true. Defining it as null prevents WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * from changing the global configuration setting. Defining `WP_DEBUG_DISPLAY`</span>&nbsp;</div></li><li><div><span class="comment"> * as false will force errors to be hidden.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * When `WP_DEBUG_LOG` is true, errors will be logged to debug.log in the content</span>&nbsp;</div></li><li><div><span class="comment"> * directory.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Errors are never displayed for XML-RPC, REST, and Ajax requests.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_debug_mode() {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether to allow the debug mode check to occur.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * This filter runs before it can be used by plugins. It is designed for</span>&nbsp;</div></li><li><div><span class="comment">   * non-web run-times. Returning false causes the `WP_DEBUG` and related</span>&nbsp;</div></li><li><div><span class="comment">   * constants to not be checked and the default php values for errors</span>&nbsp;</div></li><li><div><span class="comment">   * will be used unless you take care to update them yourself.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $enable_debug_mode Whether to enable debug mode checks to occur. Default true.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( ! apply_filters( 'enable_wp_debug_mode_checks', true ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( WP_DEBUG ) {&nbsp;</div></li><li><div>      error_reporting( E_ALL );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WP_DEBUG_DISPLAY )&nbsp;</div></li><li><div>          ini_set( 'display_errors', 1 );&nbsp;</div></li><li><div>      elseif ( null !== WP_DEBUG_DISPLAY )&nbsp;</div></li><li><div>          ini_set( 'display_errors', 0 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WP_DEBUG_LOG ) {&nbsp;</div></li><li><div>          ini_set( 'log_errors', 1 );&nbsp;</div></li><li><div>          ini_set( 'error_log', WP_CONTENT_DIR . '/debug.log' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      error_reporting( E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_ERROR | E_WARNING | E_PARSE | E_USER_ERROR | E_USER_WARNING | E_RECOVERABLE_ERROR );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( defined( 'XMLRPC_REQUEST' ) || defined( 'REST_REQUEST' ) || ( defined( 'WP_INSTALLING' ) && WP_INSTALLING ) || wp_doing_ajax() ) {&nbsp;</div></li><li><div>      @ini_set( 'display_errors', 0 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set the location of the language directory.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * To set directory manually, define the `WP_LANG_DIR` constant</span>&nbsp;</div></li><li><div><span class="comment"> * in wp-config.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the language directory exists within `WP_CONTENT_DIR`, it</span>&nbsp;</div></li><li><div><span class="comment"> * is used. Otherwise the language directory is assumed to live</span>&nbsp;</div></li><li><div><span class="comment"> * in `WPINC`.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_set_lang_dir() {&nbsp;</div></li><li><div>  if ( !defined( 'WP_LANG_DIR' ) ) {&nbsp;</div></li><li><div>      if ( file_exists( WP_CONTENT_DIR . '/languages' ) && @is_dir( WP_CONTENT_DIR . '/languages' ) || !@is_dir(ABSPATH . WPINC . '/languages') ) {&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Server path of the language directory.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * No leading slash, no trailing slash, full path, not relative to ABSPATH</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          define( 'WP_LANG_DIR', WP_CONTENT_DIR . '/languages' );&nbsp;</div></li><li><div>          if ( !defined( 'LANGDIR' ) ) {&nbsp;</div></li><li><div>              <span class="comment">// Old static relative path maintained for limited backward compatibility - won't work in some cases.</span>&nbsp;</div></li><li><div>              define( 'LANGDIR', 'wp-content/languages' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Server path of the language directory.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * No leading slash, no trailing slash, full path, not relative to `ABSPATH`.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          define( 'WP_LANG_DIR', ABSPATH . WPINC . '/languages' );&nbsp;</div></li><li><div>          if ( !defined( 'LANGDIR' ) ) {&nbsp;</div></li><li><div>              <span class="comment">// Old relative path maintained for backward compatibility.</span>&nbsp;</div></li><li><div>              define( 'LANGDIR', WPINC . '/languages' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load the database class file and instantiate the `$wpdb` global.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb $wpdb The WordPress database class.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function require_wp_db() {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once( ABSPATH . WPINC . '/wp-db.php' );&nbsp;</div></li><li><div>  if ( file_exists( WP_CONTENT_DIR . '/db.php' ) )&nbsp;</div></li><li><div>      require_once( WP_CONTENT_DIR . '/db.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $wpdb ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wpdb = new wpdb( DB_USER, DB_PASSWORD, DB_NAME, DB_HOST );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set the database table prefix and the format specifiers for database</span>&nbsp;</div></li><li><div><span class="comment"> * table columns.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Columns not listed here default to `%s`.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb   $wpdb         The WordPress database class.</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $table_prefix The database table prefix.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_set_wpdb_vars() {&nbsp;</div></li><li><div>  global $wpdb, $table_prefix;&nbsp;</div></li><li><div>  if ( !empty( $wpdb-&gt;error ) )&nbsp;</div></li><li><div>      dead_db();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wpdb-&gt;field_types = array( 'post_author' =&gt; '%d', 'post_parent' =&gt; '%d', 'menu_order' =&gt; '%d', 'term_id' =&gt; '%d', 'term_group' =&gt; '%d', 'term_taxonomy_id' =&gt; '%d', &nbsp;</div></li><li><div>      'parent' =&gt; '%d', 'count' =&gt; '%d', 'object_id' =&gt; '%d', 'term_order' =&gt; '%d', 'ID' =&gt; '%d', 'comment_ID' =&gt; '%d', 'comment_post_ID' =&gt; '%d', 'comment_parent' =&gt; '%d', &nbsp;</div></li><li><div>      'user_id' =&gt; '%d', 'link_id' =&gt; '%d', 'link_owner' =&gt; '%d', 'link_rating' =&gt; '%d', 'option_id' =&gt; '%d', 'blog_id' =&gt; '%d', 'meta_id' =&gt; '%d', 'post_id' =&gt; '%d', &nbsp;</div></li><li><div>      'user_status' =&gt; '%d', 'umeta_id' =&gt; '%d', 'comment_karma' =&gt; '%d', 'comment_count' =&gt; '%d', &nbsp;</div></li><li><div>      <span class="comment">// multisite:</span>&nbsp;</div></li><li><div>      'active' =&gt; '%d', 'cat_id' =&gt; '%d', 'deleted' =&gt; '%d', 'lang_id' =&gt; '%d', 'mature' =&gt; '%d', 'public' =&gt; '%d', 'site_id' =&gt; '%d', 'spam' =&gt; '%d', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $prefix = $wpdb-&gt;set_prefix( $table_prefix );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_wp_error( $prefix ) ) {&nbsp;</div></li><li><div>      wp_load_translations_early();&nbsp;</div></li><li><div>      wp_die(&nbsp;</div></li><li><div>          <span class="comment">/** translators: 1: $table_prefix 2: wp-config.php */</span>&nbsp;</div></li><li><div>          sprintf( __( '&lt;strong&gt;ERROR&lt;/strong&gt;: %1$s in %2$s can only contain numbers, letters, and underscores.' ), &nbsp;</div></li><li><div>              '&lt;code&gt;$table_prefix&lt;/code&gt;', &nbsp;</div></li><li><div>              '&lt;code&gt;wp-config.php&lt;/code&gt;'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Toggle `$_wp_using_ext_object_cache` on and off without directly</span>&nbsp;</div></li><li><div><span class="comment"> * touching global.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool $_wp_using_ext_object_cache</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $using Whether external object cache is being used.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool The current 'using' setting.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_using_ext_object_cache( $using = null ) {&nbsp;</div></li><li><div>  global $_wp_using_ext_object_cache;&nbsp;</div></li><li><div>  $current_using = $_wp_using_ext_object_cache;&nbsp;</div></li><li><div>  if ( null !== $using )&nbsp;</div></li><li><div>      $_wp_using_ext_object_cache = $using;&nbsp;</div></li><li><div>  return $current_using;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Start the WordPress object cache.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If an object-cache.php file exists in the wp-content directory, </span>&nbsp;</div></li><li><div><span class="comment"> * it uses that drop-in as an external object cache.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_start_object_cache() {&nbsp;</div></li><li><div>  global $wp_filter;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $first_init = false;&nbsp;</div></li><li><div>   if ( ! function_exists( 'wp_cache_init' ) ) {&nbsp;</div></li><li><div>      if ( file_exists( WP_CONTENT_DIR . '/object-cache.php' ) ) {&nbsp;</div></li><li><div>          require_once ( WP_CONTENT_DIR . '/object-cache.php' );&nbsp;</div></li><li><div>          if ( function_exists( 'wp_cache_init' ) ) {&nbsp;</div></li><li><div>              wp_using_ext_object_cache( true );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Re-initialize any hooks added manually by object-cache.php</span>&nbsp;</div></li><li><div>          if ( $wp_filter ) {&nbsp;</div></li><li><div>              $wp_filter = WP_Hook::build_preinitialized_hooks( $wp_filter );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $first_init = true;&nbsp;</div></li><li><div>  } elseif ( ! wp_using_ext_object_cache() && file_exists( WP_CONTENT_DIR . '/object-cache.php' ) ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Sometimes advanced-cache.php can load object-cache.php before</span>&nbsp;</div></li><li><div><span class="comment">       * it is loaded here. This breaks the function_exists check above</span>&nbsp;</div></li><li><div><span class="comment">       * and can result in `$_wp_using_ext_object_cache` being set</span>&nbsp;</div></li><li><div><span class="comment">       * incorrectly. Double check if an external cache exists.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      wp_using_ext_object_cache( true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! wp_using_ext_object_cache() ) {&nbsp;</div></li><li><div>      require_once ( ABSPATH . WPINC . '/cache.php' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * If cache supports reset, reset instead of init if already</span>&nbsp;</div></li><li><div><span class="comment">   * initialized. Reset signals to the cache that global IDs</span>&nbsp;</div></li><li><div><span class="comment">   * have changed and it may need to update keys and cleanup caches.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( ! $first_init && function_exists( 'wp_cache_switch_to_blog' ) ) {&nbsp;</div></li><li><div>      wp_cache_switch_to_blog( get_current_blog_id() );&nbsp;</div></li><li><div>  } elseif ( function_exists( 'wp_cache_init' ) ) {&nbsp;</div></li><li><div>      wp_cache_init();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'wp_cache_add_global_groups' ) ) {&nbsp;</div></li><li><div>      wp_cache_add_global_groups( array( 'users', 'userlogins', 'usermeta', 'user_meta', 'useremail', 'userslugs', 'site-transient', 'site-options', 'site-lookup', 'blog-lookup', 'blog-details', 'site-details', 'rss', 'global-posts', 'blog-id-cache', 'networks', 'sites' ) );&nbsp;</div></li><li><div>      wp_cache_add_non_persistent_groups( array( 'counts', 'plugins' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Redirect to the installer if WordPress is not installed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Dies with an error message when Multisite is enabled.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_not_installed() {&nbsp;</div></li><li><div>  if ( is_multisite() ) {&nbsp;</div></li><li><div>      if ( ! is_blog_installed() && ! wp_installing() ) {&nbsp;</div></li><li><div>          nocache_headers();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_die( __( 'The site you have requested is not installed properly. Please contact the system administrator.' ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( ! is_blog_installed() && ! wp_installing() ) {&nbsp;</div></li><li><div>      nocache_headers();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      require( ABSPATH . WPINC . '/kses.php' );&nbsp;</div></li><li><div>      require( ABSPATH . WPINC . '/pluggable.php' );&nbsp;</div></li><li><div>      require( ABSPATH . WPINC . '/formatting.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $link = wp_guess_url() . '/wp-admin/install.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      wp_redirect( $link );&nbsp;</div></li><li><div>      die();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve an array of must-use plugin files.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The default directory is wp-content/mu-plugins. To change the default</span>&nbsp;</div></li><li><div><span class="comment"> * directory manually, define `WPMU_PLUGIN_DIR` and `WPMU_PLUGIN_URL`</span>&nbsp;</div></li><li><div><span class="comment"> * in wp-config.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Files to include.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_mu_plugins() {&nbsp;</div></li><li><div>  $mu_plugins = array();&nbsp;</div></li><li><div>  if ( !is_dir( WPMU_PLUGIN_DIR ) )&nbsp;</div></li><li><div>      return $mu_plugins;&nbsp;</div></li><li><div>  if ( ! $dh = opendir( WPMU_PLUGIN_DIR ) )&nbsp;</div></li><li><div>      return $mu_plugins;&nbsp;</div></li><li><div>  while ( ( $plugin = readdir( $dh ) ) !== false ) {&nbsp;</div></li><li><div>      if ( substr( $plugin, -4 ) == '.php' )&nbsp;</div></li><li><div>          $mu_plugins[] = WPMU_PLUGIN_DIR . '/' . $plugin;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  closedir( $dh );&nbsp;</div></li><li><div>  sort( $mu_plugins );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $mu_plugins;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve an array of active and valid plugin files.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * While upgrading or installing WordPress, no plugins are returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The default directory is wp-content/plugins. To change the default</span>&nbsp;</div></li><li><div><span class="comment"> * directory manually, define `WP_PLUGIN_DIR` and `WP_PLUGIN_URL`</span>&nbsp;</div></li><li><div><span class="comment"> * in wp-config.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Files.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_active_and_valid_plugins() {&nbsp;</div></li><li><div>  $plugins = array();&nbsp;</div></li><li><div>  $active_plugins = (array) get_option( 'active_plugins', array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check for hacks file if the option is enabled</span>&nbsp;</div></li><li><div>  if ( get_option( 'hack_file' ) && file_exists( ABSPATH . 'my-hacks.php' ) ) {&nbsp;</div></li><li><div>      _deprecated_file( 'my-hacks.php', '1.5.0' );&nbsp;</div></li><li><div>      array_unshift( $plugins, ABSPATH . 'my-hacks.php' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $active_plugins ) || wp_installing() )&nbsp;</div></li><li><div>      return $plugins;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $network_plugins = is_multisite() ? wp_get_active_network_plugins() : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $active_plugins as $plugin ) {&nbsp;</div></li><li><div>      if ( ! validate_file( $plugin ) <span class="comment">// $plugin must validate as file</span>&nbsp;</div></li><li><div>          && '.php' == substr( $plugin, -4 ) <span class="comment">// $plugin must end with '.php'</span>&nbsp;</div></li><li><div>          && file_exists( WP_PLUGIN_DIR . '/' . $plugin ) <span class="comment">// $plugin must exist</span>&nbsp;</div></li><li><div>          <span class="comment">// not already included as a network plugin</span>&nbsp;</div></li><li><div>          && ( ! $network_plugins || ! in_array( WP_PLUGIN_DIR . '/' . $plugin, $network_plugins ) )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div>      $plugins[] = WP_PLUGIN_DIR . '/' . $plugin;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $plugins;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set internal encoding.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * In most cases the default internal encoding is latin1, which is</span>&nbsp;</div></li><li><div><span class="comment"> * of no use, since we want to use the `mb_` functions for `utf-8` strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_set_internal_encoding() {&nbsp;</div></li><li><div>  if ( function_exists( 'mb_internal_encoding' ) ) {&nbsp;</div></li><li><div>      $charset = get_option( 'blog_charset' );&nbsp;</div></li><li><div>      if ( ! $charset || ! @mb_internal_encoding( $charset ) )&nbsp;</div></li><li><div>          mb_internal_encoding( 'UTF-8' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add magic quotes to `$_GET`, `$_POST`, `$_COOKIE`, and `$_SERVER`.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Also forces `$_REQUEST` to be `$_GET + $_POST`. If `$_SERVER`, </span>&nbsp;</div></li><li><div><span class="comment"> * `$_COOKIE`, or `$_ENV` are needed, use those superglobals directly.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_magic_quotes() {&nbsp;</div></li><li><div>  <span class="comment">// If already slashed, strip.</span>&nbsp;</div></li><li><div>  if ( get_magic_quotes_gpc() ) {&nbsp;</div></li><li><div>      $_GET = stripslashes_deep( $_GET );&nbsp;</div></li><li><div>      $_POST = stripslashes_deep( $_POST );&nbsp;</div></li><li><div>      $_COOKIE = stripslashes_deep( $_COOKIE );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Escape with wpdb.</span>&nbsp;</div></li><li><div>  $_GET = add_magic_quotes( $_GET );&nbsp;</div></li><li><div>  $_POST = add_magic_quotes( $_POST );&nbsp;</div></li><li><div>  $_COOKIE = add_magic_quotes( $_COOKIE );&nbsp;</div></li><li><div>  $_SERVER = add_magic_quotes( $_SERVER );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Force REQUEST to be GET + POST.</span>&nbsp;</div></li><li><div>  $_REQUEST = array_merge( $_GET, $_POST );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Runs just before PHP shuts down execution.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function shutdown_action_hook() {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires just before PHP shuts down execution.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'shutdown' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_cache_close();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Copy an object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated 3.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $object The object to clone.</span>&nbsp;</div></li><li><div><span class="comment"> * @return object The cloned object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_clone( $object ) {&nbsp;</div></li><li><div>  <span class="comment">// Use parens for clone to accommodate PHP 4. See #17880</span>&nbsp;</div></li><li><div>  return clone( $object );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current request is for an administrative interface page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Does not check if the user is an administrator; current_user_can()</span>&nbsp;</div></li><li><div><span class="comment"> * for checking roles and capabilities.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Screen $current_screen</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if inside WordPress administration interface, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_admin() {&nbsp;</div></li><li><div>  if ( isset( $GLOBALS['current_screen'] ) )&nbsp;</div></li><li><div>      return $GLOBALS['current_screen']-&gt;in_admin();&nbsp;</div></li><li><div>  elseif ( defined( 'WP_ADMIN' ) )&nbsp;</div></li><li><div>      return WP_ADMIN;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current request is for a site's admininstrative interface.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * e.g. `/wp-admin/`</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Does not check if the user is an administrator; current_user_can()</span>&nbsp;</div></li><li><div><span class="comment"> * for checking roles and capabilities.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Screen $current_screen</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if inside WordPress blog administration pages.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_blog_admin() {&nbsp;</div></li><li><div>  if ( isset( $GLOBALS['current_screen'] ) )&nbsp;</div></li><li><div>      return $GLOBALS['current_screen']-&gt;in_admin( 'site' );&nbsp;</div></li><li><div>  elseif ( defined( 'WP_BLOG_ADMIN' ) )&nbsp;</div></li><li><div>      return WP_BLOG_ADMIN;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current request is for the network administrative interface.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * e.g. `/wp-admin/network/`</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Does not check if the user is an administrator; current_user_can()</span>&nbsp;</div></li><li><div><span class="comment"> * for checking roles and capabilities.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Screen $current_screen</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if inside WordPress network administration pages.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_network_admin() {&nbsp;</div></li><li><div>  if ( isset( $GLOBALS['current_screen'] ) )&nbsp;</div></li><li><div>      return $GLOBALS['current_screen']-&gt;in_admin( 'network' );&nbsp;</div></li><li><div>  elseif ( defined( 'WP_NETWORK_ADMIN' ) )&nbsp;</div></li><li><div>      return WP_NETWORK_ADMIN;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current request is for a user admin screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * e.g. `/wp-admin/user/`</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Does not inform on whether the user is an admin! Use capability</span>&nbsp;</div></li><li><div><span class="comment"> * checks to tell if the user should be accessing a section or not</span>&nbsp;</div></li><li><div><span class="comment"> * current_user_can().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Screen $current_screen</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if inside WordPress user administration pages.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_user_admin() {&nbsp;</div></li><li><div>  if ( isset( $GLOBALS['current_screen'] ) )&nbsp;</div></li><li><div>      return $GLOBALS['current_screen']-&gt;in_admin( 'user' );&nbsp;</div></li><li><div>  elseif ( defined( 'WP_USER_ADMIN' ) )&nbsp;</div></li><li><div>      return WP_USER_ADMIN;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * If Multisite is enabled.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if Multisite is enabled, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_multisite() {&nbsp;</div></li><li><div>  if ( defined( 'MULTISITE' ) )&nbsp;</div></li><li><div>      return MULTISITE;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( defined( 'SUBDOMAIN_INSTALL' ) || defined( 'VHOST' ) || defined( 'SUNRISE' ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the current site ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $blog_id</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int Site ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_current_blog_id() {&nbsp;</div></li><li><div>  global $blog_id;&nbsp;</div></li><li><div>  return absint($blog_id);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieves the current network ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int The ID of the current network.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_current_network_id() {&nbsp;</div></li><li><div>  if ( ! is_multisite() ) {&nbsp;</div></li><li><div>      return 1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $current_network = get_network();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $current_network-&gt;id ) ) {&nbsp;</div></li><li><div>      return get_main_network_id();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return absint( $current_network-&gt;id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Attempt an early load of translations.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used for errors encountered during the initial loading process, before</span>&nbsp;</div></li><li><div><span class="comment"> * the locale has been properly detected and loaded.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Designed for unusual load sequences (like setup-config.php) or for when</span>&nbsp;</div></li><li><div><span class="comment"> * the script will then terminate with an error, otherwise there is a risk</span>&nbsp;</div></li><li><div><span class="comment"> * that a file can be double-included.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.4.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale $wp_locale The WordPress date and time locale object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @staticvar bool $loaded</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_load_translations_early() {&nbsp;</div></li><li><div>  global $wp_locale;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static $loaded = false;&nbsp;</div></li><li><div>  if ( $loaded )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  $loaded = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'did_action' ) && did_action( 'init' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// We need $wp_local_package</span>&nbsp;</div></li><li><div>  require ABSPATH . WPINC . '/version.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Translation and localization</span>&nbsp;</div></li><li><div>  require_once ABSPATH . WPINC . '/pomo/mo.php';&nbsp;</div></li><li><div>  require_once ABSPATH . WPINC . '/l10n.php';&nbsp;</div></li><li><div>  require_once ABSPATH . WPINC . '/class-wp-locale.php';&nbsp;</div></li><li><div>  require_once ABSPATH . WPINC . '/class-wp-locale-switcher.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// General libraries</span>&nbsp;</div></li><li><div>  require_once ABSPATH . WPINC . '/plugin.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $locales = $locations = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  while ( true ) {&nbsp;</div></li><li><div>      if ( defined( 'WPLANG' ) ) {&nbsp;</div></li><li><div>          if ( '' == WPLANG )&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          $locales[] = WPLANG;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $wp_local_package ) )&nbsp;</div></li><li><div>          $locales[] = $wp_local_package;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $locales )&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( defined( 'WP_LANG_DIR' ) && @is_dir( WP_LANG_DIR ) )&nbsp;</div></li><li><div>          $locations[] = WP_LANG_DIR;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( defined( 'WP_CONTENT_DIR' ) && @is_dir( WP_CONTENT_DIR . '/languages' ) )&nbsp;</div></li><li><div>          $locations[] = WP_CONTENT_DIR . '/languages';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( @is_dir( ABSPATH . 'wp-content/languages' ) )&nbsp;</div></li><li><div>          $locations[] = ABSPATH . 'wp-content/languages';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( @is_dir( ABSPATH . WPINC . '/languages' ) )&nbsp;</div></li><li><div>          $locations[] = ABSPATH . WPINC . '/languages';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $locations )&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $locations = array_unique( $locations );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $locales as $locale ) {&nbsp;</div></li><li><div>          foreach ( $locations as $location ) {&nbsp;</div></li><li><div>              if ( file_exists( $location . '/' . $locale . '.mo' ) ) {&nbsp;</div></li><li><div>                  load_textdomain( 'default', $location . '/' . $locale . '.mo' );&nbsp;</div></li><li><div>                  if ( defined( 'WP_SETUP_CONFIG' ) && file_exists( $location . '/admin-' . $locale . '.mo' ) )&nbsp;</div></li><li><div>                      load_textdomain( 'default', $location . '/admin-' . $locale . '.mo' );&nbsp;</div></li><li><div>                  break 2;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_locale = new WP_Locale();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check or set whether WordPress is in &quot;installation&quot; mode.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the `WP_INSTALLING` constant is defined during the bootstrap, `wp_installing()` will default to `true`.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @staticvar bool $installing</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $is_installing Optional. True to set WP into Installing mode, false to turn Installing mode off.</span>&nbsp;</div></li><li><div><span class="comment"> *                            Omit this parameter if you only want to fetch the current status.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if WP is installing, otherwise false. When a `$is_installing` is passed, the function will</span>&nbsp;</div></li><li><div><span class="comment"> *              report whether WP was in installing mode prior to the change to `$is_installing`.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_installing( $is_installing = null ) {&nbsp;</div></li><li><div>  static $installing = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Support for the `WP_INSTALLING` constant, defined before WP is loaded.</span>&nbsp;</div></li><li><div>  if ( is_null( $installing ) ) {&nbsp;</div></li><li><div>      $installing = defined( 'WP_INSTALLING' ) && WP_INSTALLING;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_null( $is_installing ) ) {&nbsp;</div></li><li><div>      $old_installing = $installing;&nbsp;</div></li><li><div>      $installing = $is_installing;&nbsp;</div></li><li><div>      return (bool) $old_installing;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return (bool) $installing;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determines if SSL is used.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Moved from functions.php to load.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if SSL, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_ssl() {&nbsp;</div></li><li><div>  if ( isset( $_SERVER['HTTPS'] ) ) {&nbsp;</div></li><li><div>      if ( 'on' == strtolower( $_SERVER['HTTPS'] ) ) {&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( '1' == $_SERVER['HTTPS'] ) {&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( isset($_SERVER['SERVER_PORT'] ) && ( '443' == $_SERVER['SERVER_PORT'] ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Converts a shorthand byte value to an integer byte value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Moved from media.php to load.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @link https://secure.php.net/manual/en/function.ini-get.php</span>&nbsp;</div></li><li><div><span class="comment"> * @link https://secure.php.net/manual/en/faq.using.php#faq.using.shorthandbytes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $value A (PHP ini) byte value, either shorthand or ordinary.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int An integer byte value.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_convert_hr_to_bytes( $value ) {&nbsp;</div></li><li><div>  $value = strtolower( trim( $value ) );&nbsp;</div></li><li><div>  $bytes = (int) $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== strpos( $value, 'g' ) ) {&nbsp;</div></li><li><div>      $bytes *= GB_IN_BYTES;&nbsp;</div></li><li><div>  } elseif ( false !== strpos( $value, 'm' ) ) {&nbsp;</div></li><li><div>      $bytes *= MB_IN_BYTES;&nbsp;</div></li><li><div>  } elseif ( false !== strpos( $value, 'k' ) ) {&nbsp;</div></li><li><div>      $bytes *= KB_IN_BYTES;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Deal with large (float) values which run into the maximum integer size.</span>&nbsp;</div></li><li><div>  return min( $bytes, PHP_INT_MAX );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determines whether a PHP ini value is changeable at runtime.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @link https://secure.php.net/manual/en/function.ini-get-all.php</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $setting The name of the ini setting to check.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the value is changeable at runtime. False otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_is_ini_value_changeable( $setting ) {&nbsp;</div></li><li><div>  static $ini_all;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $ini_all ) ) {&nbsp;</div></li><li><div>      $ini_all = false;&nbsp;</div></li><li><div>      <span class="comment">// Sometimes `ini_get_all()` is disabled via the `disable_functions` option for &quot;security purposes&quot;.</span>&nbsp;</div></li><li><div>      if ( function_exists( 'ini_get_all' ) ) {&nbsp;</div></li><li><div>          $ini_all = ini_get_all();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>   }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Bit operator to workaround https://bugs.php.net/bug.php?id=44936 which changes access level to 63 in PHP 5.2.6 - 5.2.17.</span>&nbsp;</div></li><li><div>  if ( isset( $ini_all[ $setting ]['access'] ) && ( INI_ALL === ( $ini_all[ $setting ]['access'] & 7 ) || INI_USER === ( $ini_all[ $setting ]['access'] & 7 ) ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If we were unable to retrieve the details, fail gracefully to assume it's changeable.</span>&nbsp;</div></li><li><div>  if ( ! is_array( $ini_all ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determines whether the current request is a WordPress Ajax request.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if it's a WordPress Ajax request, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_doing_ajax() {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current request is a WordPress Ajax request.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $wp_doing_ajax Whether the current request is a WordPress Ajax request.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'wp_doing_ajax', defined( 'DOING_AJAX' ) && DOING_AJAX );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether variable is a WordPress Error.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Returns true if $thing is an object of the WP_Error class.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $thing Check if unknown variable is a WP_Error object.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True, if WP_Error. False, if not WP_Error.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_wp_error( $thing ) {&nbsp;</div></li><li><div>  return ( $thing instanceof WP_Error );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>