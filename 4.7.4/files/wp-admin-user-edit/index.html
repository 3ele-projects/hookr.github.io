<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.4" data-type="file" data-id="4609"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-user-edit | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=c64c5b67e02a8ea3e278476fb1be38dd' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-user-edit/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-user-edit%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-user-edit%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.4-file-wp-admin-user-edit","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-user-edit" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.4." href="http://hookr.io/4.7.4/" class="H_VERSION"><span property="name">4.7.4</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-user-edit</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6316"><a href="http://hookr.io/4.7.4/all/" title="All">All <span class="count badge">6316</span></a></li><li class="" data-id="new" data-count="6"><a href="http://hookr.io/4.7.4/new/" title="New">New <span class="count badge">6</span></a></li><li class="" data-id="hooks" data-count="2538"><a href="http://hookr.io/4.7.4/hooks/" title="Hooks">Hooks <span class="count badge">2538</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.4/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1674"><a href="http://hookr.io/4.7.4/filters/" title="Filters">Filters <span class="count badge">1674</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.4/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.4/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2853"><a href="http://hookr.io/4.7.4/functions/" title="Functions">Functions <span class="count badge">2853</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/user-edit.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Edit user administration panel.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_reset_vars( array( 'action', 'user_id', 'wp_http_referer' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$user_id = (int) $user_id;&nbsp;</div></li><li><div>$current_user = wp_get_current_user();&nbsp;</div></li><li><div>if ( ! defined( 'IS_PROFILE_PAGE' ) )&nbsp;</div></li><li><div>  define( 'IS_PROFILE_PAGE', ( $user_id == $current_user-&gt;ID ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! $user_id && IS_PROFILE_PAGE )&nbsp;</div></li><li><div>  $user_id = $current_user-&gt;ID;&nbsp;</div></li><li><div>elseif ( ! $user_id && ! IS_PROFILE_PAGE )&nbsp;</div></li><li><div>  wp_die(__( 'Invalid user ID.' ) );&nbsp;</div></li><li><div>elseif ( ! get_userdata( $user_id ) )&nbsp;</div></li><li><div>  wp_die( __('Invalid user ID.') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_script('user-profile');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = IS_PROFILE_PAGE ? __('Profile') : __('Edit User');&nbsp;</div></li><li><div>if ( current_user_can('edit_users') && !IS_PROFILE_PAGE )&nbsp;</div></li><li><div>  $submenu_file = 'users.php';&nbsp;</div></li><li><div>else&nbsp;</div></li><li><div>  $submenu_file = 'profile.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( current_user_can('edit_users') && !is_user_admin() )&nbsp;</div></li><li><div>  $parent_file = 'users.php';&nbsp;</div></li><li><div>else&nbsp;</div></li><li><div>  $parent_file = 'profile.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$profile_help = '&lt;p&gt;' . __('Your profile contains information about you (your &#8220;account&#8221;) as well as some personal options related to using WordPress.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('You can change your password, turn on keyboard shortcuts, change the color scheme of your WordPress administration screens, and turn off the WYSIWYG (Visual) editor, among other things. You can hide the Toolbar (formerly called the Admin Bar) from the front end of your site, however it cannot be disabled on the admin screens.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'You can select the language you wish to use while using the WordPress administration screen without affecting the language site visitors see.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Your username cannot be changed, but you can use other fields to enter your real name or a nickname, and change which name to display on your posts.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'You can log out of other devices, such as your phone or a public computer, by clicking the Log Out Everywhere Else button.' ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Required fields are indicated; the rest are optional. Profile information will only be displayed if your theme is set up to do so.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Remember to click the Update Profile button when you are finished.') . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'overview', &nbsp;</div></li><li><div>  'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>  'content' =&gt; $profile_help, &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Users_Your_Profile_Screen&quot;&gt;Documentation on User Profiles&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;') . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_http_referer = remove_query_arg( array( 'update', 'delete_count', 'user_id' ), $wp_http_referer );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$user_can_edit = current_user_can( 'edit_posts' ) || current_user_can( 'edit_pages' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters whether to allow administrators on Multisite to edit every user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Enabling the user editing form via this filter also hinges on the user holding</span>&nbsp;</div></li><li><div><span class="comment"> * the 'manage_network_users' cap, and the logged-in user not matching the user</span>&nbsp;</div></li><li><div><span class="comment"> * profile open for editing.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The filter was introduced to replace the EDIT_ANY_USER constant.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $allow Whether to allow editing of any user. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( is_multisite()&nbsp;</div></li><li><div>  && ! current_user_can( 'manage_network_users' )&nbsp;</div></li><li><div>  && $user_id != $current_user-&gt;ID&nbsp;</div></li><li><div>  && ! apply_filters( 'enable_edit_any_user_configuration', true )&nbsp;</div></li><li><div>) {&nbsp;</div></li><li><div>  wp_die( __( 'Sorry, you are not allowed to edit this user.' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Execute confirmed email change. See send_confirmation_on_profile_email().</span>&nbsp;</div></li><li><div>if ( is_multisite() && IS_PROFILE_PAGE && isset( $_GET[ 'newuseremail' ] ) && $current_user-&gt;ID ) {&nbsp;</div></li><li><div>  $new_email = get_user_meta( $current_user-&gt;ID, '_new_email', true );&nbsp;</div></li><li><div>  if ( $new_email && hash_equals( $new_email[ 'hash' ], $_GET[ 'newuseremail' ] ) ) {&nbsp;</div></li><li><div>      $user = new stdClass;&nbsp;</div></li><li><div>      $user-&gt;ID = $current_user-&gt;ID;&nbsp;</div></li><li><div>      $user-&gt;user_email = esc_html( trim( $new_email[ 'newemail' ] ) );&nbsp;</div></li><li><div>      if ( $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT user_login FROM {$wpdb-&gt;signups} WHERE user_login = %s&quot;, $current_user-&gt;user_login ) ) ) {&nbsp;</div></li><li><div>          $wpdb-&gt;query( $wpdb-&gt;prepare( &quot;UPDATE {$wpdb-&gt;signups} SET user_email = %s WHERE user_login = %s&quot;, $user-&gt;user_email, $current_user-&gt;user_login ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      wp_update_user( $user );&nbsp;</div></li><li><div>      delete_user_meta( $current_user-&gt;ID, '_new_email' );&nbsp;</div></li><li><div>      wp_redirect( add_query_arg( array( 'updated' =&gt; 'true' ), self_admin_url( 'profile.php' ) ) );&nbsp;</div></li><li><div>      die();&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      wp_redirect( add_query_arg( array( 'error' =&gt; 'new-email' ), self_admin_url( 'profile.php' ) ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>} elseif ( is_multisite() && IS_PROFILE_PAGE && !empty( $_GET['dismiss'] ) && $current_user-&gt;ID . '_new_email' === $_GET['dismiss'] ) {&nbsp;</div></li><li><div>  check_admin_referer( 'dismiss-' . $current_user-&gt;ID . '_new_email' );&nbsp;</div></li><li><div>  delete_user_meta( $current_user-&gt;ID, '_new_email' );&nbsp;</div></li><li><div>  wp_redirect( add_query_arg( array('updated' =&gt; 'true'), self_admin_url( 'profile.php' ) ) );&nbsp;</div></li><li><div>  die();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>switch ($action) {&nbsp;</div></li><li><div>case 'update':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>check_admin_referer('update-user_' . $user_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !current_user_can('edit_user', $user_id) )&nbsp;</div></li><li><div>  wp_die(__('Sorry, you are not allowed to edit this user.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( IS_PROFILE_PAGE ) {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before the page loads on the 'Your Profile' editing screen.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The action only fires if the current user is editing their own profile.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'personal_options_update', $user_id );&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before the page loads on the 'Edit User' screen.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'edit_user_profile_update', $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Update the email address in signups, if present.</span>&nbsp;</div></li><li><div>if ( is_multisite() ) {&nbsp;</div></li><li><div>  $user = get_userdata( $user_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $user-&gt;user_login && isset( $_POST[ 'email' ] ) && is_email( $_POST[ 'email' ] ) && $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT user_login FROM {$wpdb-&gt;signups} WHERE user_login = %s&quot;, $user-&gt;user_login ) ) ) {&nbsp;</div></li><li><div>      $wpdb-&gt;query( $wpdb-&gt;prepare( &quot;UPDATE {$wpdb-&gt;signups} SET user_email = %s WHERE user_login = %s&quot;, $_POST[ 'email' ], $user_login ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Update the user.</span>&nbsp;</div></li><li><div>$errors = edit_user( $user_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Grant or revoke super admin status if requested.</span>&nbsp;</div></li><li><div>if ( is_multisite() && is_network_admin() && !IS_PROFILE_PAGE && current_user_can( 'manage_network_options' ) && !isset($super_admins) && empty( $_POST['super_admin'] ) == is_super_admin( $user_id ) ) {&nbsp;</div></li><li><div>  empty( $_POST['super_admin'] ) ? revoke_super_admin( $user_id ) : grant_super_admin( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !is_wp_error( $errors ) ) {&nbsp;</div></li><li><div>  $redirect = add_query_arg( 'updated', true, get_edit_user_link( $user_id ) );&nbsp;</div></li><li><div>  if ( $wp_http_referer )&nbsp;</div></li><li><div>      $redirect = add_query_arg('wp_http_referer', urlencode($wp_http_referer), $redirect);&nbsp;</div></li><li><div>  wp_redirect($redirect);&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>default:&nbsp;</div></li><li><div>$profileuser = get_user_to_edit($user_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !current_user_can('edit_user', $user_id) )&nbsp;</div></li><li><div>  wp_die(__('Sorry, you are not allowed to edit this user.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$sessions = WP_Session_Tokens::get_instance( $profileuser-&gt;ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>include(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( !IS_PROFILE_PAGE && is_super_admin( $profileuser-&gt;ID ) && current_user_can( 'manage_network_options' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;updated&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;?php _e('Important:'); ?&gt;&lt;/strong&gt; &lt;?php _e('This user has super admin privileges.'); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( isset($_GET['updated']) ) : ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php if ( IS_PROFILE_PAGE ) : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;strong&gt;&lt;?php _e('Profile updated.') ?&gt;&lt;/strong&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;?php else: ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;strong&gt;&lt;?php _e('User updated.') ?&gt;&lt;/strong&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>  &lt;?php if ( $wp_http_referer && false === strpos( $wp_http_referer, 'user-new.php' ) && ! IS_PROFILE_PAGE ) : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;a href=&quot;&lt;?php echo esc_url( $wp_http_referer ); ?&gt;&quot;&gt;&lt;?php _e('&larr; Back to Users'); ?&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( isset( $_GET['error'] ) ) : ?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;notice notice-error&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php if ( 'new-email' == $_GET['error'] ) : ?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php _e( 'Error while saving the new email address. Please try again.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( isset( $errors ) && is_wp_error( $errors ) ) : ?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;error&quot;&gt;&lt;p&gt;&lt;?php echo implode( &quot;&lt;/p&gt;\n&lt;p&gt;&quot;, $errors-&gt;get_error_messages() ); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot; id=&quot;profile-page&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>echo esc_html( $title );&nbsp;</div></li><li><div>if ( ! IS_PROFILE_PAGE ) {&nbsp;</div></li><li><div>  if ( current_user_can( 'create_users' ) ) { ?&gt;&nbsp;</div></li><li><div>      &lt;a href=&quot;user-new.php&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x( 'Add New', 'user' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>  &lt;?php } elseif ( is_multisite() && current_user_can( 'promote_users' ) ) { ?&gt;&nbsp;</div></li><li><div>      &lt;a href=&quot;user-new.php&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x( 'Add Existing', 'user' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>} ?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&lt;form id=&quot;your-profile&quot; action=&quot;&lt;?php echo esc_url( self_admin_url( IS_PROFILE_PAGE ? 'profile.php' : 'user-edit.php' ) ); ?&gt;&quot; method=&quot;post&quot; novalidate=&quot;novalidate&quot;&lt;?php&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires inside the your-profile form tag on the user editing screen.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'user_edit_form_tag' );&nbsp;</div></li><li><div>?&gt;&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field('update-user_' . $user_id) ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( $wp_http_referer ) : ?&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;wp_http_referer&quot; value=&quot;&lt;?php echo esc_url($wp_http_referer); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;from&quot; value=&quot;profile&quot; /&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;checkuser_id&quot; value=&quot;&lt;?php echo get_current_user_id(); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Personal Options' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>&lt;?php if ( ! ( IS_PROFILE_PAGE && ! $user_can_edit ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;user-rich-editing-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Visual Editor' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;label for=&quot;rich_editing&quot;&gt;&lt;input name=&quot;rich_editing&quot; type=&quot;checkbox&quot; id=&quot;rich_editing&quot; value=&quot;false&quot; &lt;?php if ( ! empty( $profileuser-&gt;rich_editing ) ) checked( 'false', $profileuser-&gt;rich_editing ); ?&gt; /&gt; &lt;?php _e( 'Disable the visual editor when writing' ); ?&gt;&lt;/label&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;?php if ( count($_wp_admin_css_colors) &gt; 1 && has_action('admin_color_scheme_picker') ) : ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-admin-color-wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;th scope=&quot;row&quot;&gt;&lt;?php _e('Admin Color Scheme')?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;td&gt;&lt;?php&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires in the 'Admin Color Scheme' section of the user editing screen.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The section is only enabled if a callback is hooked to the action, </span>&nbsp;</div></li><li><div><span class="comment">   * and if there is more than one defined color scheme for the admin.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.8.1 Added `$user_id` parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'admin_color_scheme_picker', $user_id );&nbsp;</div></li><li><div>?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>endif; <span class="comment">// $_wp_admin_css_colors</span>&nbsp;</div></li><li><div>if ( !( IS_PROFILE_PAGE && !$user_can_edit ) ) : ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-comment-shortcuts-wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Keyboard Shortcuts' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;td&gt;&lt;label for=&quot;comment_shortcuts&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;comment_shortcuts&quot; id=&quot;comment_shortcuts&quot; value=&quot;true&quot; &lt;?php if ( ! empty( $profileuser-&gt;comment_shortcuts ) ) checked( 'true', $profileuser-&gt;comment_shortcuts ); ?&gt; /&gt; &lt;?php _e('Enable keyboard shortcuts for comment moderation.'); ?&gt;&lt;/label&gt; &lt;?php _e('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Keyboard_Shortcuts&quot; target=&quot;_blank&quot;&gt;More information&lt;/a&gt;'); ?&gt;&lt;/td&gt;</span>&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;show-admin-bar user-admin-bar-front-wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Toolbar' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;td&gt;&lt;fieldset&gt;&lt;legend class=&quot;screen-reader-text&quot;&gt;&lt;span&gt;&lt;?php _e('Toolbar') ?&gt;&lt;/span&gt;&lt;/legend&gt;&nbsp;</div></li><li><div>&lt;label for=&quot;admin_bar_front&quot;&gt;&nbsp;</div></li><li><div>&lt;input name=&quot;admin_bar_front&quot; type=&quot;checkbox&quot; id=&quot;admin_bar_front&quot; value=&quot;1&quot;&lt;?php checked( _get_admin_bar_pref( 'front', $profileuser-&gt;ID ) ); ?&gt; /&gt;&nbsp;</div></li><li><div>&lt;?php _e( 'Show Toolbar when viewing site' ); ?&gt;&lt;/label&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&lt;/fieldset&gt;&nbsp;</div></li><li><div>&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>$languages = get_available_languages();&nbsp;</div></li><li><div>if ( $languages ) : ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-language-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php <span class="comment">/** translators: The user language selection field label */</span> ?&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;locale&quot;&gt;&lt;?php _e( 'Language' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      $user_locale = $profileuser-&gt;locale;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'en_US' === $user_locale ) {&nbsp;</div></li><li><div>          $user_locale = '';&nbsp;</div></li><li><div>      } elseif ( '' === $user_locale || ! in_array( $user_locale, $languages, true ) ) {&nbsp;</div></li><li><div>          $user_locale = 'site-default';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      wp_dropdown_languages( array(&nbsp;</div></li><li><div>          'name' =&gt; 'locale', &nbsp;</div></li><li><div>          'id' =&gt; 'locale', &nbsp;</div></li><li><div>          'selected' =&gt; $user_locale, &nbsp;</div></li><li><div>          'languages' =&gt; $languages, &nbsp;</div></li><li><div>          'show_available_translations' =&gt; false, &nbsp;</div></li><li><div>          'show_option_site_default' =&gt; true&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires at the end of the 'Personal Options' settings table on the user editing screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'personal_options', $profileuser );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  if ( IS_PROFILE_PAGE ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fires after the 'Personal Options' settings table on the 'Your Profile' editing screen.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * The action only fires if the current user is editing their own profile.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'profile_personal_options', $profileuser );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Name' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;user-user-login-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;label for=&quot;user_login&quot;&gt;&lt;?php _e('Username'); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;user_login&quot; id=&quot;user_login&quot; value=&quot;&lt;?php echo esc_attr($profileuser-&gt;user_login); ?&gt;&quot; disabled=&quot;disabled&quot; class=&quot;regular-text&quot; /&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e('Usernames cannot be changed.'); ?&gt;&lt;/span&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( !IS_PROFILE_PAGE && !is_network_admin() ) : ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-role-wrap&quot;&gt;&lt;th&gt;&lt;label for=&quot;role&quot;&gt;&lt;?php _e('Role') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;td&gt;&lt;select name=&quot;role&quot; id=&quot;role&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">// Compare user role against currently editable roles</span>&nbsp;</div></li><li><div>$user_roles = array_intersect( array_values( $profileuser-&gt;roles ), array_keys( get_editable_roles() ) );&nbsp;</div></li><li><div>$user_role = reset( $user_roles );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// print the full list of roles with the primary one selected.</span>&nbsp;</div></li><li><div>wp_dropdown_roles($user_role);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// print the 'no role' option. Make it selected if the user has no role yet.</span>&nbsp;</div></li><li><div>if ( $user_role )&nbsp;</div></li><li><div>  echo '&lt;option value=&quot;&quot;&gt;' . __('&mdash; No role for this site &mdash;') . '&lt;/option&gt;';&nbsp;</div></li><li><div>else&nbsp;</div></li><li><div>  echo '&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;' . __('&mdash; No role for this site &mdash;') . '&lt;/option&gt;';&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; <span class="comment">//!IS_PROFILE_PAGE</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() && is_network_admin() && ! IS_PROFILE_PAGE && current_user_can( 'manage_network_options' ) && !isset($super_admins) ) { ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-super-admin-wrap&quot;&gt;&lt;th&gt;&lt;?php _e('Super Admin'); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>&lt;td&gt;&nbsp;</div></li><li><div>&lt;?php if ( $profileuser-&gt;user_email != get_site_option( 'admin_email' ) || ! is_super_admin( $profileuser-&gt;ID ) ) : ?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;super_admin&quot; name=&quot;super_admin&quot;&lt;?php checked( is_super_admin( $profileuser-&gt;ID ) ); ?&gt; /&gt; &lt;?php _e( 'Grant this user super admin privileges for the Network.' ); ?&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php else : ?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;?php _e( 'Super admin privileges cannot be removed because this user has the network admin email.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;/td&gt;&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr class=&quot;user-first-name-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;first_name&quot;&gt;&lt;?php _e('First Name') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;first_name&quot; value=&quot;&lt;?php echo esc_attr($profileuser-&gt;first_name) ?&gt;&quot; class=&quot;regular-text&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr class=&quot;user-last-name-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;last_name&quot;&gt;&lt;?php _e('Last Name') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name&quot; value=&quot;&lt;?php echo esc_attr($profileuser-&gt;last_name) ?&gt;&quot; class=&quot;regular-text&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr class=&quot;user-nickname-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;nickname&quot;&gt;&lt;?php _e('Nickname'); ?&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e('(required)'); ?&gt;&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;nickname&quot; id=&quot;nickname&quot; value=&quot;&lt;?php echo esc_attr($profileuser-&gt;nickname) ?&gt;&quot; class=&quot;regular-text&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr class=&quot;user-display-name-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;display_name&quot;&gt;&lt;?php _e('Display name publicly as') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>      &lt;select name=&quot;display_name&quot; id=&quot;display_name&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>          $public_display = array();&nbsp;</div></li><li><div>          $public_display['display_nickname'] = $profileuser-&gt;nickname;&nbsp;</div></li><li><div>          $public_display['display_username'] = $profileuser-&gt;user_login;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty($profileuser-&gt;first_name) )&nbsp;</div></li><li><div>              $public_display['display_firstname'] = $profileuser-&gt;first_name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty($profileuser-&gt;last_name) )&nbsp;</div></li><li><div>              $public_display['display_lastname'] = $profileuser-&gt;last_name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty($profileuser-&gt;first_name) && !empty($profileuser-&gt;last_name) ) {&nbsp;</div></li><li><div>              $public_display['display_firstlast'] = $profileuser-&gt;first_name . ' ' . $profileuser-&gt;last_name;&nbsp;</div></li><li><div>              $public_display['display_lastfirst'] = $profileuser-&gt;last_name . ' ' . $profileuser-&gt;first_name;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !in_array( $profileuser-&gt;display_name, $public_display ) ) <span class="comment">// Only add this if it isn't duplicated elsewhere</span>&nbsp;</div></li><li><div>              $public_display = array( 'display_displayname' =&gt; $profileuser-&gt;display_name ) + $public_display;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $public_display = array_map( 'trim', $public_display );&nbsp;</div></li><li><div>          $public_display = array_unique( $public_display );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $public_display as $id =&gt; $item ) {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>          &lt;option &lt;?php selected( $profileuser-&gt;display_name, $item ); ?&gt;&gt;&lt;?php echo $item; ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/select&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Contact Info' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-email-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;email&quot;&gt;&lt;?php _e('Email'); ?&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e('(required)'); ?&gt;&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; value=&quot;&lt;?php echo esc_attr( $profileuser-&gt;user_email ) ?&gt;&quot; class=&quot;regular-text ltr&quot; /&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  $new_email = get_user_meta( $current_user-&gt;ID, '_new_email', true );&nbsp;</div></li><li><div>  if ( $new_email && $new_email['newemail'] != $current_user-&gt;user_email && $profileuser-&gt;ID == $current_user-&gt;ID ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;updated inline&quot;&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&lt;?php&nbsp;</div></li><li><div>      printf(&nbsp;</div></li><li><div>          <span class="comment">/** translators: %s: new email */</span>&nbsp;</div></li><li><div>          __( 'There is a pending change of your email to %s.' ), &nbsp;</div></li><li><div>          '&lt;code&gt;' . esc_html( $new_email['newemail'] ) . '&lt;/code&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      printf(&nbsp;</div></li><li><div>          ' &lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;', &nbsp;</div></li><li><div>          esc_url( wp_nonce_url( self_admin_url( 'profile.php?dismiss=' . $current_user-&gt;ID . '_new_email' ), 'dismiss-' . $current_user-&gt;ID . '_new_email' ) ), &nbsp;</div></li><li><div>          __( 'Cancel' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;tr class=&quot;user-url-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;url&quot;&gt;&lt;?php _e('Website') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;url&quot; name=&quot;url&quot; id=&quot;url&quot; value=&quot;&lt;?php echo esc_attr( $profileuser-&gt;user_url ) ?&gt;&quot; class=&quot;regular-text code&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  foreach ( wp_get_user_contact_methods( $profileuser ) as $name =&gt; $desc ) {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-&lt;?php echo $name; ?&gt;-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;&lt;?php echo $name; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters a user contactmethod label.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * The dynamic portion of the filter hook, `$name`, refers to</span>&nbsp;</div></li><li><div><span class="comment">       * each of the keys in the contactmethods array.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $desc The translatable label for the contactmethod.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      echo apply_filters( &quot;user_{$name}_label&quot;, $desc );&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>  &lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;&lt;?php echo $name; ?&gt;&quot; id=&quot;&lt;?php echo $name; ?&gt;&quot; value=&quot;&lt;?php echo esc_attr($profileuser-&gt;$name) ?&gt;&quot; class=&quot;regular-text&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php IS_PROFILE_PAGE ? _e( 'About Yourself' ) : _e( 'About the user' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-description-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;description&quot;&gt;&lt;?php _e('Biographical Info'); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&lt;textarea name=&quot;description&quot; id=&quot;description&quot; rows=&quot;5&quot; cols=&quot;30&quot;&gt;&lt;?php echo $profileuser-&gt;description; <span class="comment">// textarea_escaped ?&gt;&lt;/textarea&gt;</span>&nbsp;</div></li><li><div>  &lt;p class=&quot;description&quot;&gt;&lt;?php _e('Share a little biographical information to fill out your profile. This may be shown publicly.'); ?&gt;&lt;/p&gt;&lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( get_option( 'show_avatars' ) ) : ?&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-profile-picture&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;?php _e( 'Profile Picture' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>      &lt;?php echo get_avatar( $user_id ); ?&gt;&nbsp;</div></li><li><div>      &lt;p class=&quot;description&quot;&gt;&lt;?php&nbsp;</div></li><li><div>          if ( IS_PROFILE_PAGE ) {&nbsp;</div></li><li><div>              <span class="comment">/** translators: %s: Gravatar URL */</span>&nbsp;</div></li><li><div>              $description = sprintf( __( 'You can change your profile picture on &lt;a href=&quot;%s&quot;&gt;Gravatar&lt;/a&gt;.' ), &nbsp;</div></li><li><div>                  __( 'https:<span class="comment">//en.gravatar.com/' )</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $description = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the user profile picture description displayed under the Gravatar.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">           * @since 4.7.0 Added the `$profileuser` parameter.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string  $description The description that will be printed.</span>&nbsp;</div></li><li><div><span class="comment">           * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          echo apply_filters( 'user_profile_picture_description', $description, $profileuser );&nbsp;</div></li><li><div>      ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters the display of the password fields.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.1</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0 Added the `$profileuser` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Now evaluated only in user-edit.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool    $show        Whether to show the password fields. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_User $profileuser User object for the current user to edit.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( $show_password_fields = apply_filters( 'show_password_fields', true, $profileuser ) ) :&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Account Management' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>&lt;tr id=&quot;password&quot; class=&quot;user-pass1-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;label for=&quot;pass1&quot;&gt;&lt;?php _e( 'New Password' ); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>      &lt;input class=&quot;hidden&quot; value=&quot; &quot; /&gt;&lt;!-- #24364 workaround --&gt;&nbsp;</div></li><li><div>      &lt;button type=&quot;button&quot; class=&quot;button wp-generate-pw hide-if-no-js&quot;&gt;&lt;?php _e( 'Generate Password' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;wp-pwd hide-if-js&quot;&gt;&nbsp;</div></li><li><div>          &lt;span class=&quot;password-input-wrapper&quot;&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;password&quot; name=&quot;pass1&quot; id=&quot;pass1&quot; class=&quot;regular-text&quot; value=&quot;&quot; autocomplete=&quot;off&quot; data-pw=&quot;&lt;?php echo esc_attr( wp_generate_password( 24 ) ); ?&gt;&quot; aria-describedby=&quot;pass-strength-result&quot; /&gt;&nbsp;</div></li><li><div>          &lt;/span&gt;&nbsp;</div></li><li><div>          &lt;button type=&quot;button&quot; class=&quot;button wp-hide-pw hide-if-no-js&quot; data-toggle=&quot;0&quot; aria-label=&quot;&lt;?php esc_attr_e( 'Hide password' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;dashicons dashicons-hidden&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;text&quot;&gt;&lt;?php _e( 'Hide' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/button&gt;&nbsp;</div></li><li><div>          &lt;button type=&quot;button&quot; class=&quot;button wp-cancel-pw hide-if-no-js&quot; data-toggle=&quot;0&quot; aria-label=&quot;&lt;?php esc_attr_e( 'Cancel password change' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;text&quot;&gt;&lt;?php _e( 'Cancel' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/button&gt;&nbsp;</div></li><li><div>          &lt;div style=&quot;display:none&quot; id=&quot;pass-strength-result&quot; aria-live=&quot;polite&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-pass2-wrap hide-if-js&quot;&gt;&nbsp;</div></li><li><div>  &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;pass2&quot;&gt;&lt;?php _e( 'Repeat New Password' ); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>  &lt;input name=&quot;pass2&quot; type=&quot;password&quot; id=&quot;pass2&quot; class=&quot;regular-text&quot; value=&quot;&quot; autocomplete=&quot;off&quot; /&gt;&nbsp;</div></li><li><div>  &lt;p class=&quot;description&quot;&gt;&lt;?php _e( 'Type your new password again.' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;pw-weak&quot;&gt;&nbsp;</div></li><li><div>  &lt;th&gt;&lt;?php _e( 'Confirm Password' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;checkbox&quot; name=&quot;pw_weak&quot; class=&quot;pw-checkbox&quot; /&gt;&nbsp;</div></li><li><div>          &lt;span id=&quot;pw-weak-text-label&quot;&gt;&lt;?php _e( 'Confirm use of potentially weak password' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;/label&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>if ( IS_PROFILE_PAGE && count( $sessions-&gt;get_all() ) === 1 ) : ?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;user-sessions-wrap hide-if-no-js&quot;&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;?php _e( 'Sessions' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td aria-live=&quot;assertive&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;destroy-sessions&quot;&gt;&lt;button type=&quot;button&quot; disabled class=&quot;button&quot;&gt;&lt;?php _e( 'Log Out Everywhere Else' ); ?&gt;&lt;/button&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'You are only logged in at this location.' ); ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( IS_PROFILE_PAGE && count( $sessions-&gt;get_all() ) &gt; 1 ) : ?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;user-sessions-wrap hide-if-no-js&quot;&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;?php _e( 'Sessions' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td aria-live=&quot;assertive&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;destroy-sessions&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;button&quot; id=&quot;destroy-sessions&quot;&gt;&lt;?php _e( 'Log Out Everywhere Else' ); ?&gt;&lt;/button&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'Did you lose your phone or leave your account logged in at a public computer? You can log out everywhere else, and stay logged in here.' ); ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( ! IS_PROFILE_PAGE && $sessions-&gt;get_all() ) : ?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;user-sessions-wrap hide-if-no-js&quot;&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;?php _e( 'Sessions' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;button type=&quot;button&quot; class=&quot;button&quot; id=&quot;destroy-sessions&quot;&gt;&lt;?php _e( 'Log Out Everywhere' ); ?&gt;&lt;/button&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              <span class="comment">/** translators: 1: User's display name. */</span>&nbsp;</div></li><li><div>              printf( __( 'Log %s out of all locations.' ), $profileuser-&gt;display_name );&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  if ( IS_PROFILE_PAGE ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fires after the 'About Yourself' settings table on the 'Your Profile' editing screen.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * The action only fires if the current user is editing their own profile.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'show_user_profile', $profileuser );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fires after the 'About the User' settings table on the 'Edit User' screen.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'edit_user_profile', $profileuser );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters whether to display additional capabilities for the user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The 'Additional Capabilities' section will only be enabled if</span>&nbsp;</div></li><li><div><span class="comment"> * the number of the user's capabilities exceeds their number of</span>&nbsp;</div></li><li><div><span class="comment"> * roles.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool    $enable      Whether to display the capabilities. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_User $profileuser The current WP_User object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( count( $profileuser-&gt;caps ) &gt; count( $profileuser-&gt;roles )&nbsp;</div></li><li><div>  && apply_filters( 'additional_capabilities_display', true, $profileuser )&nbsp;</div></li><li><div>) : ?&gt;&nbsp;</div></li><li><div>&lt;h2&gt;&lt;?php _e( 'Additional Capabilities' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>&lt;tr class=&quot;user-capabilities-wrap&quot;&gt;&nbsp;</div></li><li><div>  &lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Capabilities' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>  &lt;td&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  $output = '';&nbsp;</div></li><li><div>  foreach ( $profileuser-&gt;caps as $cap =&gt; $value ) {&nbsp;</div></li><li><div>      if ( ! $wp_roles-&gt;is_role( $cap ) ) {&nbsp;</div></li><li><div>          if ( '' != $output )&nbsp;</div></li><li><div>              $output .= ', ';&nbsp;</div></li><li><div>          $output .= $value ? $cap : sprintf( __( 'Denied: %s' ), $cap );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo $output;&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/td&gt;&nbsp;</div></li><li><div>&lt;/tr&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;update&quot; /&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;user_id&quot; id=&quot;user_id&quot; value=&quot;&lt;?php echo esc_attr($user_id); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php submit_button( IS_PROFILE_PAGE ? __('Update Profile') : __('Update User') ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>break;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>  if (window.location.hash == '#password') {&nbsp;</div></li><li><div>      document.getElementById('pass1').focus();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>include( ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>