<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.2" data-type="file" data-id="4520"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-includes-update-core | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.17"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=1ea62af620276636d2ba688b00282d48' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.17' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-includes-update-core/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-update-core%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-includes-update-core%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.2-file-wp-admin-includes-update-core","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-includes-update-core" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.2." href="http://hookr.io/4.7.2/" class="H_VERSION"><span property="name">4.7.2</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-includes-update-core</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6308"><a href="http://hookr.io/4.7.2/all/" title="All">All <span class="count badge">6308</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7.2/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.2/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7.2/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.2/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.2/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2852"><a href="http://hookr.io/4.7.2/functions/" title="Functions">Functions <span class="count badge">2852</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/includes/update-core.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WordPress core upgrade functionality.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Stores files to be deleted.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $_old_files</span>&nbsp;</div></li><li><div><span class="comment"> * @var array</span>&nbsp;</div></li><li><div><span class="comment"> * @name $_old_files</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>global $_old_files;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$_old_files = array(&nbsp;</div></li><li><div><span class="comment">// 2.0</span>&nbsp;</div></li><li><div>'wp-admin/import-b2.php', &nbsp;</div></li><li><div>'wp-admin/import-blogger.php', &nbsp;</div></li><li><div>'wp-admin/import-greymatter.php', &nbsp;</div></li><li><div>'wp-admin/import-livejournal.php', &nbsp;</div></li><li><div>'wp-admin/import-mt.php', &nbsp;</div></li><li><div>'wp-admin/import-rss.php', &nbsp;</div></li><li><div>'wp-admin/import-textpattern.php', &nbsp;</div></li><li><div>'wp-admin/quicktags.js', &nbsp;</div></li><li><div>'wp-images/fade-butt.png', &nbsp;</div></li><li><div>'wp-images/get-firefox.png', &nbsp;</div></li><li><div>'wp-images/header-shadow.png', &nbsp;</div></li><li><div>'wp-images/smilies', &nbsp;</div></li><li><div>'wp-images/wp-small.png', &nbsp;</div></li><li><div>'wp-images/wpminilogo.png', &nbsp;</div></li><li><div>'wp.php', &nbsp;</div></li><li><div><span class="comment">// 2.0</span>.8&nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/inlinepopups/readme.txt', &nbsp;</div></li><li><div><span class="comment">// 2.1</span>&nbsp;</div></li><li><div>'wp-admin/edit-form-ajax-cat.php', &nbsp;</div></li><li><div>'wp-admin/execute-pings.php', &nbsp;</div></li><li><div>'wp-admin/inline-uploading.php', &nbsp;</div></li><li><div>'wp-admin/link-categories.php', &nbsp;</div></li><li><div>'wp-admin/list-manipulation.js', &nbsp;</div></li><li><div>'wp-admin/list-manipulation.php', &nbsp;</div></li><li><div>'wp-includes/comment-functions.php', &nbsp;</div></li><li><div>'wp-includes/feed-functions.php', &nbsp;</div></li><li><div>'wp-includes/functions-compat.php', &nbsp;</div></li><li><div>'wp-includes/functions-formatting.php', &nbsp;</div></li><li><div>'wp-includes/functions-post.php', &nbsp;</div></li><li><div>'wp-includes/js/dbx-key.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/autosave/langs/cs.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/autosave/langs/sv.js', &nbsp;</div></li><li><div>'wp-includes/links.php', &nbsp;</div></li><li><div>'wp-includes/pluggable-functions.php', &nbsp;</div></li><li><div>'wp-includes/template-functions-author.php', &nbsp;</div></li><li><div>'wp-includes/template-functions-category.php', &nbsp;</div></li><li><div>'wp-includes/template-functions-general.php', &nbsp;</div></li><li><div>'wp-includes/template-functions-links.php', &nbsp;</div></li><li><div>'wp-includes/template-functions-post.php', &nbsp;</div></li><li><div>'wp-includes/wp-l10n.php', &nbsp;</div></li><li><div><span class="comment">// 2.2</span>&nbsp;</div></li><li><div>'wp-admin/cat-js.php', &nbsp;</div></li><li><div>'wp-admin/import/b2.php', &nbsp;</div></li><li><div>'wp-includes/js/autosave-js.php', &nbsp;</div></li><li><div>'wp-includes/js/list-manipulation-js.php', &nbsp;</div></li><li><div>'wp-includes/js/wp-ajax-js.php', &nbsp;</div></li><li><div><span class="comment">// 2.3</span>&nbsp;</div></li><li><div>'wp-admin/admin-db.php', &nbsp;</div></li><li><div>'wp-admin/cat.js', &nbsp;</div></li><li><div>'wp-admin/categories.js', &nbsp;</div></li><li><div>'wp-admin/custom-fields.js', &nbsp;</div></li><li><div>'wp-admin/dbx-admin-key.js', &nbsp;</div></li><li><div>'wp-admin/edit-comments.js', &nbsp;</div></li><li><div>'wp-admin/install-rtl.css', &nbsp;</div></li><li><div>'wp-admin/install.css', &nbsp;</div></li><li><div>'wp-admin/upgrade-schema.php', &nbsp;</div></li><li><div>'wp-admin/upload-functions.php', &nbsp;</div></li><li><div>'wp-admin/upload-rtl.css', &nbsp;</div></li><li><div>'wp-admin/upload.css', &nbsp;</div></li><li><div>'wp-admin/upload.js', &nbsp;</div></li><li><div>'wp-admin/users.js', &nbsp;</div></li><li><div>'wp-admin/widgets-rtl.css', &nbsp;</div></li><li><div>'wp-admin/widgets.css', &nbsp;</div></li><li><div>'wp-admin/xfn.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/license.html', &nbsp;</div></li><li><div><span class="comment">// 2.5</span>&nbsp;</div></li><li><div>'wp-admin/css/upload.css', &nbsp;</div></li><li><div>'wp-admin/images/box-bg-left.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-bg-right.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-bg.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-butt-left.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-butt-right.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-butt.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-head-left.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-head-right.gif', &nbsp;</div></li><li><div>'wp-admin/images/box-head.gif', &nbsp;</div></li><li><div>'wp-admin/images/heading-bg.gif', &nbsp;</div></li><li><div>'wp-admin/images/login-bkg-bottom.gif', &nbsp;</div></li><li><div>'wp-admin/images/login-bkg-tile.gif', &nbsp;</div></li><li><div>'wp-admin/images/notice.gif', &nbsp;</div></li><li><div>'wp-admin/images/toggle.gif', &nbsp;</div></li><li><div>'wp-admin/includes/upload.php', &nbsp;</div></li><li><div>'wp-admin/js/dbx-admin-key.js', &nbsp;</div></li><li><div>'wp-admin/js/link-cat.js', &nbsp;</div></li><li><div>'wp-admin/profile-update.php', &nbsp;</div></li><li><div>'wp-admin/templates.php', &nbsp;</div></li><li><div>'wp-includes/images/wlw/WpComments.png', &nbsp;</div></li><li><div>'wp-includes/images/wlw/WpIcon.png', &nbsp;</div></li><li><div>'wp-includes/images/wlw/WpWatermark.png', &nbsp;</div></li><li><div>'wp-includes/js/dbx.js', &nbsp;</div></li><li><div>'wp-includes/js/fat.js', &nbsp;</div></li><li><div>'wp-includes/js/list-manipulation.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/langs/en.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/autosave/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/autosave/langs', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/directionality/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/directionality/langs', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/inlinepopups/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/inlinepopups/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/inlinepopups/jscripts', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/jscripts', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/langs', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/classes/HttpClient.class.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/classes/TinyGoogleSpell.class.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/classes/TinyPspell.class.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/classes/TinyPspellShell.class.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/css/spellchecker.css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/langs', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker/tinyspell.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/langs', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/wordpress.css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wphelp', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/images', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/jscripts', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/langs', &nbsp;</div></li><li><div><span class="comment">// 2.5</span>.1&nbsp;</div></li><li><div>'wp-includes/js/tinymce/tiny_mce_gzip.php', &nbsp;</div></li><li><div><span class="comment">// 2.6</span>&nbsp;</div></li><li><div>'wp-admin/bookmarklet.php', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.dimensions.min.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/popups.css', &nbsp;</div></li><li><div>'wp-includes/js/wp-ajax.js', &nbsp;</div></li><li><div><span class="comment">// 2.7</span>&nbsp;</div></li><li><div>'wp-admin/css/press-this-ie-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/press-this-ie.css', &nbsp;</div></li><li><div>'wp-admin/css/upload-rtl.css', &nbsp;</div></li><li><div>'wp-admin/edit-form.php', &nbsp;</div></li><li><div>'wp-admin/images/comment-pill.gif', &nbsp;</div></li><li><div>'wp-admin/images/comment-stalk-classic.gif', &nbsp;</div></li><li><div>'wp-admin/images/comment-stalk-fresh.gif', &nbsp;</div></li><li><div>'wp-admin/images/comment-stalk-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/del.png', &nbsp;</div></li><li><div>'wp-admin/images/gear.png', &nbsp;</div></li><li><div>'wp-admin/images/media-button-gallery.gif', &nbsp;</div></li><li><div>'wp-admin/images/media-buttons.gif', &nbsp;</div></li><li><div>'wp-admin/images/postbox-bg.gif', &nbsp;</div></li><li><div>'wp-admin/images/tab.png', &nbsp;</div></li><li><div>'wp-admin/images/tail.gif', &nbsp;</div></li><li><div>'wp-admin/js/forms.js', &nbsp;</div></li><li><div>'wp-admin/js/upload.js', &nbsp;</div></li><li><div>'wp-admin/link-import.php', &nbsp;</div></li><li><div>'wp-includes/images/audio.png', &nbsp;</div></li><li><div>'wp-includes/images/css.png', &nbsp;</div></li><li><div>'wp-includes/images/default.png', &nbsp;</div></li><li><div>'wp-includes/images/doc.png', &nbsp;</div></li><li><div>'wp-includes/images/exe.png', &nbsp;</div></li><li><div>'wp-includes/images/html.png', &nbsp;</div></li><li><div>'wp-includes/images/js.png', &nbsp;</div></li><li><div>'wp-includes/images/pdf.png', &nbsp;</div></li><li><div>'wp-includes/images/swf.png', &nbsp;</div></li><li><div>'wp-includes/images/tar.png', &nbsp;</div></li><li><div>'wp-includes/images/text.png', &nbsp;</div></li><li><div>'wp-includes/images/video.png', &nbsp;</div></li><li><div>'wp-includes/images/zip.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/tiny_mce_config.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/tiny_mce_ext.js', &nbsp;</div></li><li><div><span class="comment">// 2.8</span>&nbsp;</div></li><li><div>'wp-admin/js/users.js', &nbsp;</div></li><li><div>'wp-includes/js/swfupload/plugins/swfupload.documentready.js', &nbsp;</div></li><li><div>'wp-includes/js/swfupload/plugins/swfupload.graceful_degradation.js', &nbsp;</div></li><li><div>'wp-includes/js/swfupload/swfupload_f9.swf', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/autosave', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/utils/mclayer.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/wordpress.css', &nbsp;</div></li><li><div><span class="comment">// 2.8</span>.5&nbsp;</div></li><li><div>'wp-admin/import/btt.php', &nbsp;</div></li><li><div>'wp-admin/import/jkw.php', &nbsp;</div></li><li><div><span class="comment">// 2.9</span>&nbsp;</div></li><li><div>'wp-admin/js/page.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/page.js', &nbsp;</div></li><li><div>'wp-admin/js/set-post-thumbnail-handler.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/set-post-thumbnail-handler.js', &nbsp;</div></li><li><div>'wp-admin/js/slug.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/slug.js', &nbsp;</div></li><li><div>'wp-includes/gettext.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/js', &nbsp;</div></li><li><div>'wp-includes/streams.php', &nbsp;</div></li><li><div><span class="comment">// MU</span>&nbsp;</div></li><li><div>'README.txt', &nbsp;</div></li><li><div>'htaccess.dist', &nbsp;</div></li><li><div>'index-install.php', &nbsp;</div></li><li><div>'wp-admin/css/mu-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/mu.css', &nbsp;</div></li><li><div>'wp-admin/images/site-admin.png', &nbsp;</div></li><li><div>'wp-admin/includes/mu.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-admin.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-blogs.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-edit.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-options.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-themes.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-upgrade-site.php', &nbsp;</div></li><li><div>'wp-admin/wpmu-users.php', &nbsp;</div></li><li><div>'wp-includes/images/wordpress-mu.png', &nbsp;</div></li><li><div>'wp-includes/wpmu-default-filters.php', &nbsp;</div></li><li><div>'wp-includes/wpmu-functions.php', &nbsp;</div></li><li><div>'wpmu-settings.php', &nbsp;</div></li><li><div><span class="comment">// 3.0</span>&nbsp;</div></li><li><div>'wp-admin/categories.php', &nbsp;</div></li><li><div>'wp-admin/edit-category-form.php', &nbsp;</div></li><li><div>'wp-admin/edit-page-form.php', &nbsp;</div></li><li><div>'wp-admin/edit-pages.php', &nbsp;</div></li><li><div>'wp-admin/images/admin-header-footer.png', &nbsp;</div></li><li><div>'wp-admin/images/browse-happy.gif', &nbsp;</div></li><li><div>'wp-admin/images/ico-add.png', &nbsp;</div></li><li><div>'wp-admin/images/ico-close.png', &nbsp;</div></li><li><div>'wp-admin/images/ico-edit.png', &nbsp;</div></li><li><div>'wp-admin/images/ico-viewpage.png', &nbsp;</div></li><li><div>'wp-admin/images/fav-top.png', &nbsp;</div></li><li><div>'wp-admin/images/screen-options-left.gif', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo.gif', &nbsp;</div></li><li><div>'wp-admin/import', &nbsp;</div></li><li><div>'wp-admin/js/wp-gears.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/wp-gears.js', &nbsp;</div></li><li><div>'wp-admin/options-misc.php', &nbsp;</div></li><li><div>'wp-admin/page-new.php', &nbsp;</div></li><li><div>'wp-admin/page.php', &nbsp;</div></li><li><div>'wp-admin/rtl.css', &nbsp;</div></li><li><div>'wp-admin/rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/update-links.php', &nbsp;</div></li><li><div>'wp-admin/wp-admin.css', &nbsp;</div></li><li><div>'wp-admin/wp-admin.dev.css', &nbsp;</div></li><li><div>'wp-includes/js/codepress', &nbsp;</div></li><li><div>'wp-includes/js/codepress/engines/khtml.js', &nbsp;</div></li><li><div>'wp-includes/js/codepress/engines/older.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/autocomplete.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/autocomplete.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/interface.js', &nbsp;</div></li><li><div>'wp-includes/js/scriptaculous/prototype.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/wp-tinymce.js', &nbsp;</div></li><li><div><span class="comment">// 3.1</span>&nbsp;</div></li><li><div>'wp-admin/edit-attachment-rows.php', &nbsp;</div></li><li><div>'wp-admin/edit-link-categories.php', &nbsp;</div></li><li><div>'wp-admin/edit-link-category-form.php', &nbsp;</div></li><li><div>'wp-admin/edit-post-rows.php', &nbsp;</div></li><li><div>'wp-admin/images/button-grad-active-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/button-grad-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/fav-arrow-vs-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/fav-arrow-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/fav-top-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/list-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/screen-options-right-up.gif', &nbsp;</div></li><li><div>'wp-admin/images/screen-options-right.gif', &nbsp;</div></li><li><div>'wp-admin/images/visit-site-button-grad-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/visit-site-button-grad.gif', &nbsp;</div></li><li><div>'wp-admin/link-category.php', &nbsp;</div></li><li><div>'wp-admin/sidebar.php', &nbsp;</div></li><li><div>'wp-includes/classes.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/blank.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/css/content.css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/img', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/safari', &nbsp;</div></li><li><div><span class="comment">// 3.2</span>&nbsp;</div></li><li><div>'wp-admin/images/logo-login.gif', &nbsp;</div></li><li><div>'wp-admin/images/star.gif', &nbsp;</div></li><li><div>'wp-admin/js/list-table.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/list-table.js', &nbsp;</div></li><li><div>'wp-includes/default-embeds.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/help.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/more.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/toolbars.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/img/fm.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/img/sflogo.png', &nbsp;</div></li><li><div><span class="comment">// 3.3</span>&nbsp;</div></li><li><div>'wp-admin/css/colors-classic-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-classic-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-fresh-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-fresh-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/dashboard-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/dashboard.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/global-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/global-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/global.css', &nbsp;</div></li><li><div>'wp-admin/css/global.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/install-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/login-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/login.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/ms.css', &nbsp;</div></li><li><div>'wp-admin/css/ms.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/nav-menu-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/nav-menu-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/nav-menu.css', &nbsp;</div></li><li><div>'wp-admin/css/nav-menu.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/plugin-install-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/plugin-install-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/plugin-install.css', &nbsp;</div></li><li><div>'wp-admin/css/plugin-install.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/press-this-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/press-this.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-editor-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-editor-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-editor.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-editor.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-install-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-install-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-install.css', &nbsp;</div></li><li><div>'wp-admin/css/theme-install.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/widgets-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/widgets.dev.css', &nbsp;</div></li><li><div>'wp-admin/includes/internal-linking.php', &nbsp;</div></li><li><div>'wp-includes/images/admin-bar-sprite-rtl.png', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.button.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.core.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.dialog.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.draggable.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.droppable.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.mouse.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.position.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.resizable.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.selectable.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.sortable.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.tabs.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui.widget.js', &nbsp;</div></li><li><div>'wp-includes/js/l10n.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/l10n.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/img', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/img/wpicons.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/butt2.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/button_bg.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/down_arrow.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/fade-butt.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/separator.gif', &nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-rss.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-rdf.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-rss2.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-commentsrss2.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-atom.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-feed.php', </span>&nbsp;</div></li><li><div><span class="comment">// 3.4</span>&nbsp;</div></li><li><div>'wp-admin/images/gray-star.png', &nbsp;</div></li><li><div>'wp-admin/images/logo-login.png', &nbsp;</div></li><li><div>'wp-admin/images/star.png', &nbsp;</div></li><li><div>'wp-admin/index-extra.php', &nbsp;</div></li><li><div>'wp-admin/network/index-extra.php', &nbsp;</div></li><li><div>'wp-admin/user/index-extra.php', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/admin-flyouts.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/coediting.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/drag-and-drop.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/help-screen.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/media-icon.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/new-feature-pointer.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/welcome-screen.png', &nbsp;</div></li><li><div>'wp-includes/css/editor-buttons.css', &nbsp;</div></li><li><div>'wp-includes/css/editor-buttons.dev.css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/blank.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/editor_plugin.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/embedded.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/more_bug.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img/page_bug.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/editor_plugin.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/css/editimage-rtl.css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/editor_plugin.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpfullscreen/editor_plugin.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpgallery/editor_plugin.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpgallery/img/gallery.png', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/editor_plugin.dev.js', &nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-pass.php', </span>&nbsp;</div></li><li><div><span class="comment">// Don't delete, yet: 'wp-register.php', </span>&nbsp;</div></li><li><div><span class="comment">// 3.5</span>&nbsp;</div></li><li><div>'wp-admin/gears-manifest.php', &nbsp;</div></li><li><div>'wp-admin/includes/manifest.php', &nbsp;</div></li><li><div>'wp-admin/images/archive-link.png', &nbsp;</div></li><li><div>'wp-admin/images/blue-grad.png', &nbsp;</div></li><li><div>'wp-admin/images/button-grad-active.png', &nbsp;</div></li><li><div>'wp-admin/images/button-grad.png', &nbsp;</div></li><li><div>'wp-admin/images/ed-bg-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/ed-bg.gif', &nbsp;</div></li><li><div>'wp-admin/images/fade-butt.png', &nbsp;</div></li><li><div>'wp-admin/images/fav-arrow-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/fav-arrow.gif', &nbsp;</div></li><li><div>'wp-admin/images/fav-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/fav.png', &nbsp;</div></li><li><div>'wp-admin/images/gray-grad.png', &nbsp;</div></li><li><div>'wp-admin/images/loading-publish.gif', &nbsp;</div></li><li><div>'wp-admin/images/logo-ghost.png', &nbsp;</div></li><li><div>'wp-admin/images/logo.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-arrow-frame-rtl.png', &nbsp;</div></li><li><div>'wp-admin/images/menu-arrow-frame.png', &nbsp;</div></li><li><div>'wp-admin/images/menu-arrows.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-bits-rtl-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-bits-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-bits-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-bits.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-dark-rtl-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-dark-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-dark-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/menu-dark.gif', &nbsp;</div></li><li><div>'wp-admin/images/required.gif', &nbsp;</div></li><li><div>'wp-admin/images/screen-options-toggle-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/screen-options-toggle.gif', &nbsp;</div></li><li><div>'wp-admin/images/toggle-arrow-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/toggle-arrow.gif', &nbsp;</div></li><li><div>'wp-admin/images/upload-classic.png', &nbsp;</div></li><li><div>'wp-admin/images/upload-fresh.png', &nbsp;</div></li><li><div>'wp-admin/images/white-grad-active.png', &nbsp;</div></li><li><div>'wp-admin/images/white-grad.png', &nbsp;</div></li><li><div>'wp-admin/images/widgets-arrow-vs.gif', &nbsp;</div></li><li><div>'wp-admin/images/widgets-arrow.gif', &nbsp;</div></li><li><div>'wp-admin/images/wpspin_dark.gif', &nbsp;</div></li><li><div>'wp-includes/images/upload.png', &nbsp;</div></li><li><div>'wp-includes/js/prototype.js', &nbsp;</div></li><li><div>'wp-includes/js/scriptaculous', &nbsp;</div></li><li><div>'wp-admin/css/wp-admin-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/wp-admin.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/media-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/media.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-classic.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/customize-controls-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/customize-controls.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/ie-rtl.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/ie.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/install.dev.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-fresh.dev.css', &nbsp;</div></li><li><div>'wp-includes/js/customize-base.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/json2.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/comment-reply.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/customize-preview.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/wplink.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tw-sack.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/wp-list-revisions.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/autosave.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/admin-bar.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/quicktags.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/wp-ajax-response.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/wp-pointer.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/hoverIntent.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/colorpicker.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/wp-lists.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/customize-loader.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.table-hotkeys.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.color.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.color.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.hotkeys.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/jquery.form.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/suggest.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/xfn.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/set-post-thumbnail.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/comment.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/theme.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/cat.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/password-strength-meter.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/user-profile.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/theme-preview.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/post.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/media-upload.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/word-count.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/plugin-install.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/edit-comments.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/media-gallery.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/custom-fields.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/custom-background.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/common.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/inline-edit-tax.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/gallery.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/utils.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/widgets.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/wp-fullscreen.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/nav-menu.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/dashboard.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/link.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/user-suggest.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/postbox.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/tags.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/image-edit.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/media.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/customize-controls.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/inline-edit-post.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/categories.dev.js', &nbsp;</div></li><li><div>'wp-admin/js/editor.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/js/editimage.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/js/popup.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/js/wpdialog.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/handlers.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/wp-plupload.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/swfupload/handlers.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jcrop/jquery.Jcrop.dev.js', &nbsp;</div></li><li><div>'wp-includes/js/jcrop/jquery.Jcrop.js', &nbsp;</div></li><li><div>'wp-includes/js/jcrop/jquery.Jcrop.css', &nbsp;</div></li><li><div>'wp-includes/js/imgareaselect/jquery.imgareaselect.dev.js', &nbsp;</div></li><li><div>'wp-includes/css/wp-pointer.dev.css', &nbsp;</div></li><li><div>'wp-includes/css/editor.dev.css', &nbsp;</div></li><li><div>'wp-includes/css/jquery-ui-dialog.dev.css', &nbsp;</div></li><li><div>'wp-includes/css/admin-bar-rtl.dev.css', &nbsp;</div></li><li><div>'wp-includes/css/admin-bar.dev.css', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.clip.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.scale.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.blind.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.core.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.shake.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.fade.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.explode.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.slide.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.drop.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.highlight.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.bounce.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.pulsate.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.transfer.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.effects.fold.min.js', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/captions-1.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/captions-2.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/flex-header-1.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/flex-header-2.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/flex-header-3.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/flex-header-media-library.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/theme-customizer.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/twitter-embed-1.png', &nbsp;</div></li><li><div>'wp-admin/images/screenshots/twitter-embed-2.png', &nbsp;</div></li><li><div>'wp-admin/js/utils.js', &nbsp;</div></li><li><div>'wp-admin/options-privacy.php', &nbsp;</div></li><li><div>'wp-app.php', &nbsp;</div></li><li><div>'wp-includes/class-wp-atom-server.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/ui.css', &nbsp;</div></li><li><div><span class="comment">// 3.5</span>.2&nbsp;</div></li><li><div>'wp-includes/js/swfupload/swfupload-all.js', &nbsp;</div></li><li><div><span class="comment">// 3.6</span>&nbsp;</div></li><li><div>'wp-admin/js/revisions-js.php', &nbsp;</div></li><li><div>'wp-admin/images/screenshots', &nbsp;</div></li><li><div>'wp-admin/js/categories.js', &nbsp;</div></li><li><div>'wp-admin/js/categories.min.js', &nbsp;</div></li><li><div>'wp-admin/js/custom-fields.js', &nbsp;</div></li><li><div>'wp-admin/js/custom-fields.min.js', &nbsp;</div></li><li><div><span class="comment">// 3.7</span>&nbsp;</div></li><li><div>'wp-admin/js/cat.js', &nbsp;</div></li><li><div>'wp-admin/js/cat.min.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/js/editimage.min.js', &nbsp;</div></li><li><div><span class="comment">// 3.8</span>&nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/page_bug.gif', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced/skins/wp_theme/img/more_bug.gif', &nbsp;</div></li><li><div>'wp-includes/js/thickbox/tb-close-2x.png', &nbsp;</div></li><li><div>'wp-includes/js/thickbox/tb-close.png', &nbsp;</div></li><li><div>'wp-includes/images/wpmini-blue-2x.png', &nbsp;</div></li><li><div>'wp-includes/images/wpmini-blue.png', &nbsp;</div></li><li><div>'wp-admin/css/colors-fresh.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-classic.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-fresh.min.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-classic.min.css', &nbsp;</div></li><li><div>'wp-admin/js/about.min.js', &nbsp;</div></li><li><div>'wp-admin/js/about.js', &nbsp;</div></li><li><div>'wp-admin/images/arrows-dark-vs-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-dark-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-pr.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-dark.png', &nbsp;</div></li><li><div>'wp-admin/images/press-this.png', &nbsp;</div></li><li><div>'wp-admin/images/press-this-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-vs-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/welcome-icons.png', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/stars-rtl-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-dark-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-pr-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/menu-shadow-rtl.png', &nbsp;</div></li><li><div>'wp-admin/images/arrows-vs.png', &nbsp;</div></li><li><div>'wp-admin/images/about-search-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/bubble_bg-rtl-2x.gif', &nbsp;</div></li><li><div>'wp-admin/images/wp-badge-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/wordpress-logo-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/bubble_bg-rtl.gif', &nbsp;</div></li><li><div>'wp-admin/images/wp-badge.png', &nbsp;</div></li><li><div>'wp-admin/images/menu-shadow.png', &nbsp;</div></li><li><div>'wp-admin/images/about-globe-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/welcome-icons-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/stars-rtl.png', &nbsp;</div></li><li><div>'wp-admin/images/wp-logo-vs-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/about-updates-2x.png', &nbsp;</div></li><li><div><span class="comment">// 3.9</span>&nbsp;</div></li><li><div>'wp-admin/css/colors.css', &nbsp;</div></li><li><div>'wp-admin/css/colors.min.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-rtl.css', &nbsp;</div></li><li><div>'wp-admin/css/colors-rtl.min.css', &nbsp;</div></li><li><div><span class="comment">// Following files added back in 4.5 see #36083</span>&nbsp;</div></li><li><div><span class="comment">// 'wp-admin/css/media-rtl.min.css', </span>&nbsp;</div></li><li><div><span class="comment">// 'wp-admin/css/media.min.css', </span>&nbsp;</div></li><li><div><span class="comment">// 'wp-admin/css/farbtastic-rtl.min.css', </span>&nbsp;</div></li><li><div>'wp-admin/images/lock-2x.png', &nbsp;</div></li><li><div>'wp-admin/images/lock.png', &nbsp;</div></li><li><div>'wp-admin/js/theme-preview.js', &nbsp;</div></li><li><div>'wp-admin/js/theme-install.min.js', &nbsp;</div></li><li><div>'wp-admin/js/theme-install.js', &nbsp;</div></li><li><div>'wp-admin/js/theme-preview.min.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/plupload.html4.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/plupload.html5.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/changelog.txt', &nbsp;</div></li><li><div>'wp-includes/js/plupload/plupload.silverlight.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/plupload.flash.js', &nbsp;</div></li><li><div>'wp-includes/js/plupload/plupload.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/spellchecker', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/inlinepopups', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/img', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/img', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpgallery/img', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpfullscreen/css', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/themes/advanced', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/tiny_mce.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/mark_loaded_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/wp-tinymce-schema.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/media/media.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpview/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpview/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/directionality/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/directionality/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wordpress/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpdialogs/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/editimage.html', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpeditimage/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/fullscreen/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/fullscreen/fullscreen.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/fullscreen/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wplink/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpgallery/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpgallery/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/tabfocus/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/tabfocus/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpfullscreen/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpfullscreen/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/editor_plugin.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/pasteword.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/editor_plugin_src.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/paste/pastetext.htm', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/langs/wp-langs.php', &nbsp;</div></li><li><div><span class="comment">// 4.1</span>&nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.accordion.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.autocomplete.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.button.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.core.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.datepicker.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.dialog.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.draggable.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.droppable.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-blind.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-bounce.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-clip.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-drop.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-explode.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-fade.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-fold.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-highlight.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-pulsate.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-scale.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-shake.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-slide.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect-transfer.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.effect.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.menu.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.mouse.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.position.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.progressbar.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.resizable.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.selectable.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.slider.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.sortable.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.spinner.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.tabs.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.tooltip.min.js', &nbsp;</div></li><li><div>'wp-includes/js/jquery/ui/jquery.ui.widget.min.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/skins/wordpress/images/dashicon-no-alt.png', &nbsp;</div></li><li><div><span class="comment">// 4.3</span>&nbsp;</div></li><li><div>'wp-admin/js/wp-fullscreen.js', &nbsp;</div></li><li><div>'wp-admin/js/wp-fullscreen.min.js', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/wp-mce-help.php', &nbsp;</div></li><li><div>'wp-includes/js/tinymce/plugins/wpfullscreen', &nbsp;</div></li><li><div><span class="comment">// 4.5</span>&nbsp;</div></li><li><div>'wp-includes/theme-compat/comments-popup.php', &nbsp;</div></li><li><div><span class="comment">// 4.6</span>&nbsp;</div></li><li><div>'wp-admin/includes/class-wp-automatic-upgrader.php', <span class="comment">// Wrong file name, see #37628.</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Stores new files in wp-content to copy</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The contents of this array indicate any new bundled plugins/themes which</span>&nbsp;</div></li><li><div><span class="comment"> * should be installed with the WordPress Upgrade. These items will not be</span>&nbsp;</div></li><li><div><span class="comment"> * re-installed in future upgrades, this behaviour is controlled by the</span>&nbsp;</div></li><li><div><span class="comment"> * introduced version present here being older than the current installed version.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The content of this array should follow the following format:</span>&nbsp;</div></li><li><div><span class="comment"> * Filename (relative to wp-content) =&gt; Introduced version</span>&nbsp;</div></li><li><div><span class="comment"> * Directories should be noted by suffixing it with a trailing slash (/)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0 New themes were not automatically installed for 4.4-4.6 on</span>&nbsp;</div></li><li><div><span class="comment"> *              upgrade. New themes are now installed again. To disable new</span>&nbsp;</div></li><li><div><span class="comment"> *              themes from being installed on upgrade, explicitly define</span>&nbsp;</div></li><li><div><span class="comment"> *              CORE_UPGRADE_SKIP_NEW_BUNDLED as false.</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $_new_bundled_files</span>&nbsp;</div></li><li><div><span class="comment"> * @var array</span>&nbsp;</div></li><li><div><span class="comment"> * @name $_new_bundled_files</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>global $_new_bundled_files;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$_new_bundled_files = array(&nbsp;</div></li><li><div>  'plugins/akismet/' =&gt; '2.0', &nbsp;</div></li><li><div>  'themes/twentyten/' =&gt; '3.0', &nbsp;</div></li><li><div>  'themes/twentyeleven/' =&gt; '3.2', &nbsp;</div></li><li><div>  'themes/twentytwelve/' =&gt; '3.5', &nbsp;</div></li><li><div>  'themes/twentythirteen/' =&gt; '3.6', &nbsp;</div></li><li><div>  'themes/twentyfourteen/' =&gt; '3.8', &nbsp;</div></li><li><div>  'themes/twentyfifteen/' =&gt; '4.1', &nbsp;</div></li><li><div>  'themes/twentysixteen/' =&gt; '4.4', &nbsp;</div></li><li><div>  'themes/twentyseventeen/' =&gt; '4.7', &nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Upgrades the core of WordPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This will create a .maintenance file at the base of the WordPress directory</span>&nbsp;</div></li><li><div><span class="comment"> * to ensure that people can not access the web site, when the files are being</span>&nbsp;</div></li><li><div><span class="comment"> * copied to their locations.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The files in the `$_old_files` list will be removed and the new files</span>&nbsp;</div></li><li><div><span class="comment"> * copied from the zip file after the database is upgraded.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The files in the `$_new_bundled_files` list will be added to the installation</span>&nbsp;</div></li><li><div><span class="comment"> * if the version is greater than or equal to the old version being upgraded.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The steps for the upgrader for after the new release is downloaded and</span>&nbsp;</div></li><li><div><span class="comment"> * unzipped is:</span>&nbsp;</div></li><li><div><span class="comment"> *   1. Test unzipped location for select files to ensure that unzipped worked.</span>&nbsp;</div></li><li><div><span class="comment"> *   2. Create the .maintenance file in current WordPress base.</span>&nbsp;</div></li><li><div><span class="comment"> *   3. Copy new WordPress directory over old WordPress files.</span>&nbsp;</div></li><li><div><span class="comment"> *   4. Upgrade WordPress to new version.</span>&nbsp;</div></li><li><div><span class="comment"> *     4.1. Copy all files/folders other than wp-content</span>&nbsp;</div></li><li><div><span class="comment"> *     4.2. Copy any language files to WP_LANG_DIR (which may differ from WP_CONTENT_DIR</span>&nbsp;</div></li><li><div><span class="comment"> *     4.3. Copy any new bundled themes/plugins to their respective locations</span>&nbsp;</div></li><li><div><span class="comment"> *   5. Delete new WordPress directory path.</span>&nbsp;</div></li><li><div><span class="comment"> *   6. Delete .maintenance file.</span>&nbsp;</div></li><li><div><span class="comment"> *   7. Remove old files.</span>&nbsp;</div></li><li><div><span class="comment"> *   8. Delete 'update_core' option.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * There are several areas of failure. For instance if PHP times out before step</span>&nbsp;</div></li><li><div><span class="comment"> * 6, then you will not be able to access any portion of your site. Also, since</span>&nbsp;</div></li><li><div><span class="comment"> * the upgrade will not continue where it left off, you will not be able to</span>&nbsp;</div></li><li><div><span class="comment"> * automatically remove old files and remove the 'update_core' option. This</span>&nbsp;</div></li><li><div><span class="comment"> * isn't that bad.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the copy of the new WordPress over the old fails, then the worse is that</span>&nbsp;</div></li><li><div><span class="comment"> * the new WordPress directory will remain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If it is assumed that every file will be copied over, including plugins and</span>&nbsp;</div></li><li><div><span class="comment"> * themes, then if you edit the default theme, you should rename it, so that</span>&nbsp;</div></li><li><div><span class="comment"> * your changes remain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Filesystem_Base $wp_filesystem</span>&nbsp;</div></li><li><div><span class="comment"> * @global array              $_old_files</span>&nbsp;</div></li><li><div><span class="comment"> * @global array              $_new_bundled_files</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb               $wpdb</span>&nbsp;</div></li><li><div><span class="comment"> * @global string             $wp_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global string             $required_php_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global string             $required_mysql_version</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $from New release unzipped path.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $to   Path to old WordPress installation.</span>&nbsp;</div></li><li><div><span class="comment"> * @return WP_Error|null WP_Error on failure, null on success.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function update_core($from, $to) {&nbsp;</div></li><li><div>  global $wp_filesystem, $_old_files, $_new_bundled_files, $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  @set_time_limit( 300 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters feedback messages displayed during the core update process.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The filter is first evaluated after the zip file for the latest version</span>&nbsp;</div></li><li><div><span class="comment">   * has been downloaded and unzipped. It is evaluated five more times during</span>&nbsp;</div></li><li><div><span class="comment">   * the process:</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * 1. Before WordPress begins the core upgrade process.</span>&nbsp;</div></li><li><div><span class="comment">   * 2. Before Maintenance Mode is enabled.</span>&nbsp;</div></li><li><div><span class="comment">   * 3. Before WordPress begins copying over the necessary files.</span>&nbsp;</div></li><li><div><span class="comment">   * 4. Before Maintenance Mode is disabled.</span>&nbsp;</div></li><li><div><span class="comment">   * 5. Before the database is upgraded.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $feedback The core update feedback messages.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Verifying the unpacked files&#8230;' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Sanity check the unzipped distribution.</span>&nbsp;</div></li><li><div>  $distro = '';&nbsp;</div></li><li><div>  $roots = array( '/wordpress/', '/wordpress-mu/' );&nbsp;</div></li><li><div>  foreach ( $roots as $root ) {&nbsp;</div></li><li><div>      if ( $wp_filesystem-&gt;exists( $from . $root . 'readme.html' ) && $wp_filesystem-&gt;exists( $from . $root . 'wp-includes/version.php' ) ) {&nbsp;</div></li><li><div>          $distro = $root;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( ! $distro ) {&nbsp;</div></li><li><div>      $wp_filesystem-&gt;delete( $from, true );&nbsp;</div></li><li><div>      return new WP_Error( 'insane_distro', __('The update could not be unpacked') );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Import $wp_version, $required_php_version, and $required_mysql_version from the new version</span>&nbsp;</div></li><li><div><span class="comment">   * $wp_filesystem-&gt;wp_content_dir() returned unslashed pre-2.8</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @global string $wp_version</span>&nbsp;</div></li><li><div><span class="comment">   * @global string $required_php_version</span>&nbsp;</div></li><li><div><span class="comment">   * @global string $required_mysql_version</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  global $wp_version, $required_php_version, $required_mysql_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $versions_file = trailingslashit( $wp_filesystem-&gt;wp_content_dir() ) . 'upgrade/version-current.php';&nbsp;</div></li><li><div>  if ( ! $wp_filesystem-&gt;copy( $from . $distro . 'wp-includes/version.php', $versions_file ) ) {&nbsp;</div></li><li><div>      $wp_filesystem-&gt;delete( $from, true );&nbsp;</div></li><li><div>      return new WP_Error( 'copy_failed_for_version_file', __( 'The update cannot be installed because we will be unable to copy some files. This is usually due to inconsistent file permissions.' ), 'wp-includes/version.php' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wp_filesystem-&gt;chmod( $versions_file, FS_CHMOD_FILE );&nbsp;</div></li><li><div>  require( WP_CONTENT_DIR . '/upgrade/version-current.php' );&nbsp;</div></li><li><div>  $wp_filesystem-&gt;delete( $versions_file );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $php_version = phpversion();&nbsp;</div></li><li><div>  $mysql_version = $wpdb-&gt;db_version();&nbsp;</div></li><li><div>  $old_wp_version = $wp_version; <span class="comment">// The version of WordPress we're updating from</span>&nbsp;</div></li><li><div>  $development_build = ( false !== strpos( $old_wp_version . $wp_version, '-' ) ); <span class="comment">// a dash in the version indicates a Development release</span>&nbsp;</div></li><li><div>  $php_compat = version_compare( $php_version, $required_php_version, '&gt;=' );&nbsp;</div></li><li><div>  if ( file_exists( WP_CONTENT_DIR . '/db.php' ) && empty( $wpdb-&gt;is_mysql ) )&nbsp;</div></li><li><div>      $mysql_compat = true;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $mysql_compat = version_compare( $mysql_version, $required_mysql_version, '&gt;=' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$mysql_compat || !$php_compat )&nbsp;</div></li><li><div>      $wp_filesystem-&gt;delete($from, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$mysql_compat && !$php_compat )&nbsp;</div></li><li><div>      return new WP_Error( 'php_mysql_not_compatible', sprintf( __('The update cannot be installed because WordPress %1$s requires PHP version %2$s or higher and MySQL version %3$s or higher. You are running PHP version %4$s and MySQL version %5$s.'), $wp_version, $required_php_version, $required_mysql_version, $php_version, $mysql_version ) );&nbsp;</div></li><li><div>  elseif ( !$php_compat )&nbsp;</div></li><li><div>      return new WP_Error( 'php_not_compatible', sprintf( __('The update cannot be installed because WordPress %1$s requires PHP version %2$s or higher. You are running version %3$s.'), $wp_version, $required_php_version, $php_version ) );&nbsp;</div></li><li><div>  elseif ( !$mysql_compat )&nbsp;</div></li><li><div>      return new WP_Error( 'mysql_not_compatible', sprintf( __('The update cannot be installed because WordPress %1$s requires MySQL version %2$s or higher. You are running version %3$s.'), $wp_version, $required_mysql_version, $mysql_version ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This filter is documented in wp-admin/includes/update-core.php */</span></span></span></span></span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Preparing to install the latest version&#8230;' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Don't copy wp-content, we'll deal with that below</span>&nbsp;</div></li><li><div>  <span class="comment">// We also copy version.php last so failed updates report their old version</span>&nbsp;</div></li><li><div>  $skip = array( 'wp-content', 'wp-includes/version.php' );&nbsp;</div></li><li><div>  $check_is_writable = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check to see which files don't really need updating - only available for 3.7 and higher</span>&nbsp;</div></li><li><div>  if ( function_exists( 'get_core_checksums' ) ) {&nbsp;</div></li><li><div>      <span class="comment">// Find the local version of the working directory</span>&nbsp;</div></li><li><div>      $working_dir_local = WP_CONTENT_DIR . '/upgrade/' . basename( $from ) . $distro;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $checksums = get_core_checksums( $wp_version, isset( $wp_local_package ) ? $wp_local_package : 'en_US' );&nbsp;</div></li><li><div>      if ( is_array( $checksums ) && isset( $checksums[ $wp_version ] ) )&nbsp;</div></li><li><div>          $checksums = $checksums[ $wp_version ]; <span class="comment">// Compat code for 3.7-beta2</span>&nbsp;</div></li><li><div>      if ( is_array( $checksums ) ) {&nbsp;</div></li><li><div>          foreach ( $checksums as $file =&gt; $checksum ) {&nbsp;</div></li><li><div>              if ( 'wp-content' == substr( $file, 0, 10 ) )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              if ( ! file_exists( ABSPATH . $file ) )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              if ( ! file_exists( $working_dir_local . $file ) )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              if ( '.' === dirname( $file ) && in_array( pathinfo( $file, PATHINFO_EXTENSION ), array( 'html', 'txt' ) ) )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              if ( md5_file( ABSPATH . $file ) === $checksum )&nbsp;</div></li><li><div>                  $skip[] = $file;&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  $check_is_writable[ $file ] = ABSPATH . $file;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If we're using the direct method, we can predict write failures that are due to permissions.</span>&nbsp;</div></li><li><div>  if ( $check_is_writable && 'direct' === $wp_filesystem-&gt;method ) {&nbsp;</div></li><li><div>      $files_writable = array_filter( $check_is_writable, array( $wp_filesystem, 'is_writable' ) );&nbsp;</div></li><li><div>      if ( $files_writable !== $check_is_writable ) {&nbsp;</div></li><li><div>          $files_not_writable = array_diff_key( $check_is_writable, $files_writable );&nbsp;</div></li><li><div>          foreach ( $files_not_writable as $relative_file_not_writable =&gt; $file_not_writable ) {&nbsp;</div></li><li><div>              <span class="comment">// If the writable check failed, chmod file to 0644 and try again, same as copy_dir().</span>&nbsp;</div></li><li><div>              $wp_filesystem-&gt;chmod( $file_not_writable, FS_CHMOD_FILE );&nbsp;</div></li><li><div>              if ( $wp_filesystem-&gt;is_writable( $file_not_writable ) )&nbsp;</div></li><li><div>                  unset( $files_not_writable[ $relative_file_not_writable ] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Store package-relative paths (the key) of non-writable files in the WP_Error object.</span>&nbsp;</div></li><li><div>          $error_data = version_compare( $old_wp_version, '3.7-beta2', '&gt;' ) ? array_keys( $files_not_writable ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $files_not_writable )&nbsp;</div></li><li><div>              return new WP_Error( 'files_not_writable', __( 'The update cannot be installed because we will be unable to copy some files. This is usually due to inconsistent file permissions.' ), implode( ', ', $error_data ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This filter is documented in wp-admin/includes/update-core.php */</span></span></span></span></span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Enabling Maintenance mode&#8230;' ) );&nbsp;</div></li><li><div>  <span class="comment">// Create maintenance file to signal that we are upgrading</span>&nbsp;</div></li><li><div>  $maintenance_string = '&lt;?php $upgrading = ' . time() . '; ?&gt;';&nbsp;</div></li><li><div>  $maintenance_file = $to . '.maintenance';&nbsp;</div></li><li><div>  $wp_filesystem-&gt;delete($maintenance_file);&nbsp;</div></li><li><div>  $wp_filesystem-&gt;put_contents($maintenance_file, $maintenance_string, FS_CHMOD_FILE);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This filter is documented in wp-admin/includes/update-core.php */</span></span></span></span></span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Copying the required files&#8230;' ) );&nbsp;</div></li><li><div>  <span class="comment">// Copy new versions of WP files into place.</span>&nbsp;</div></li><li><div>  $result = _copy_dir( $from . $distro, $to, $skip );&nbsp;</div></li><li><div>  if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>      $result = new WP_Error( $result-&gt;get_error_code(), $result-&gt;get_error_message(), substr( $result-&gt;get_error_data(), strlen( $to ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Since we know the core files have copied over, we can now copy the version file</span>&nbsp;</div></li><li><div>  if ( ! is_wp_error( $result ) ) {&nbsp;</div></li><li><div>      if ( ! $wp_filesystem-&gt;copy( $from . $distro . 'wp-includes/version.php', $to . 'wp-includes/version.php', true <span class="comment">/** overwrite */</span> ) ) {&nbsp;</div></li><li><div>          $wp_filesystem-&gt;delete( $from, true );&nbsp;</div></li><li><div>          $result = new WP_Error( 'copy_failed_for_version_file', __( 'The update cannot be installed because we will be unable to copy some files. This is usually due to inconsistent file permissions.' ), 'wp-includes/version.php' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $wp_filesystem-&gt;chmod( $to . 'wp-includes/version.php', FS_CHMOD_FILE );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check to make sure everything copied correctly, ignoring the contents of wp-content</span>&nbsp;</div></li><li><div>  $skip = array( 'wp-content' );&nbsp;</div></li><li><div>  $failed = array();&nbsp;</div></li><li><div>  if ( isset( $checksums ) && is_array( $checksums ) ) {&nbsp;</div></li><li><div>      foreach ( $checksums as $file =&gt; $checksum ) {&nbsp;</div></li><li><div>          if ( 'wp-content' == substr( $file, 0, 10 ) )&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          if ( ! file_exists( $working_dir_local . $file ) )&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          if ( '.' === dirname( $file ) && in_array( pathinfo( $file, PATHINFO_EXTENSION ), array( 'html', 'txt' ) ) ) {&nbsp;</div></li><li><div>              $skip[] = $file;&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( file_exists( ABSPATH . $file ) && md5_file( ABSPATH . $file ) == $checksum )&nbsp;</div></li><li><div>              $skip[] = $file;&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              $failed[] = $file;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Some files didn't copy properly</span>&nbsp;</div></li><li><div>  if ( ! empty( $failed ) ) {&nbsp;</div></li><li><div>      $total_size = 0;&nbsp;</div></li><li><div>      foreach ( $failed as $file ) {&nbsp;</div></li><li><div>          if ( file_exists( $working_dir_local . $file ) )&nbsp;</div></li><li><div>              $total_size += filesize( $working_dir_local . $file );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If we don't have enough free space, it isn't worth trying again.</span>&nbsp;</div></li><li><div>      <span class="comment">// Unlikely to be hit due to the check in unzip_file().</span>&nbsp;</div></li><li><div>      $available_space = @disk_free_space( ABSPATH );&nbsp;</div></li><li><div>      if ( $available_space && $total_size &gt;= $available_space ) {&nbsp;</div></li><li><div>          $result = new WP_Error( 'disk_full', __( 'There is not enough free disk space to complete the update.' ) );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $result = _copy_dir( $from . $distro, $to, $skip );&nbsp;</div></li><li><div>          if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>              $result = new WP_Error( $result-&gt;get_error_code() . '_retry', $result-&gt;get_error_message(), substr( $result-&gt;get_error_data(), strlen( $to ) ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Custom Content Directory needs updating now.</span>&nbsp;</div></li><li><div>  <span class="comment">// Copy Languages</span>&nbsp;</div></li><li><div>  if ( !is_wp_error($result) && $wp_filesystem-&gt;is_dir($from . $distro . 'wp-content/languages') ) {&nbsp;</div></li><li><div>      if ( WP_LANG_DIR != ABSPATH . WPINC . '/languages' || @is_dir(WP_LANG_DIR) )&nbsp;</div></li><li><div>          $lang_dir = WP_LANG_DIR;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $lang_dir = WP_CONTENT_DIR . '/languages';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !@is_dir($lang_dir) && 0 === strpos($lang_dir, ABSPATH) ) { <span class="comment">// Check the language directory exists first</span>&nbsp;</div></li><li><div>          $wp_filesystem-&gt;mkdir($to . str_replace(ABSPATH, '', $lang_dir), FS_CHMOD_DIR); <span class="comment">// If it's within the ABSPATH we can handle it here, otherwise they're out of luck.</span>&nbsp;</div></li><li><div>          clearstatcache(); <span class="comment">// for FTP, Need to clear the stat cache</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( @is_dir($lang_dir) ) {&nbsp;</div></li><li><div>          $wp_lang_dir = $wp_filesystem-&gt;find_folder($lang_dir);&nbsp;</div></li><li><div>          if ( $wp_lang_dir ) {&nbsp;</div></li><li><div>              $result = copy_dir($from . $distro . 'wp-content/languages/', $wp_lang_dir);&nbsp;</div></li><li><div>              if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>                  $result = new WP_Error( $result-&gt;get_error_code() . '_languages', $result-&gt;get_error_message(), substr( $result-&gt;get_error_data(), strlen( $wp_lang_dir ) ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This filter is documented in wp-admin/includes/update-core.php */</span></span></span></span></span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Disabling Maintenance mode&#8230;' ) );&nbsp;</div></li><li><div>  <span class="comment">// Remove maintenance file, we're done with potential site-breaking changes</span>&nbsp;</div></li><li><div>  $wp_filesystem-&gt;delete( $maintenance_file );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// 3.5</span> -&gt; 3.5+ - an empty twentytwelve directory was created upon upgrade to 3.5 for some users, preventing installation of Twenty Twelve.&nbsp;</div></li><li><div>  if ( '3.5' == $old_wp_version ) {&nbsp;</div></li><li><div>      if ( is_dir( WP_CONTENT_DIR . '/themes/twentytwelve' ) && ! file_exists( WP_CONTENT_DIR . '/themes/twentytwelve/style.css' ) ) {&nbsp;</div></li><li><div>          $wp_filesystem-&gt;delete( $wp_filesystem-&gt;wp_themes_dir() . 'twentytwelve/' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Copy New bundled plugins & themes</span>&nbsp;</div></li><li><div>  <span class="comment">// This gives us the ability to install new plugins & themes bundled with future versions of WordPress whilst avoiding the re-install upon upgrade issue.</span>&nbsp;</div></li><li><div>  <span class="comment">// $development_build controls us overwriting bundled themes and plugins when a non-stable release is being updated</span>&nbsp;</div></li><li><div>  if ( !is_wp_error($result) && ( ! defined('CORE_UPGRADE_SKIP_NEW_BUNDLED') || ! CORE_UPGRADE_SKIP_NEW_BUNDLED ) ) {&nbsp;</div></li><li><div>      foreach ( (array) $_new_bundled_files as $file =&gt; $introduced_version ) {&nbsp;</div></li><li><div>          <span class="comment">// If a $development_build or if $introduced version is greater than what the site was previously running</span>&nbsp;</div></li><li><div>          if ( $development_build || version_compare( $introduced_version, $old_wp_version, '&gt;' ) ) {&nbsp;</div></li><li><div>              $directory = ('/' == $file[ strlen($file)-1 ]);&nbsp;</div></li><li><div>              list($type, $filename) = explode('/', $file, 2);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Check to see if the bundled items exist before attempting to copy them</span>&nbsp;</div></li><li><div>              if ( ! $wp_filesystem-&gt;exists( $from . $distro . 'wp-content/' . $file ) )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( 'plugins' == $type )&nbsp;</div></li><li><div>                  $dest = $wp_filesystem-&gt;wp_plugins_dir();&nbsp;</div></li><li><div>              elseif ( 'themes' == $type )&nbsp;</div></li><li><div>                  $dest = trailingslashit($wp_filesystem-&gt;wp_themes_dir()); <span class="comment">// Back-compat, ::wp_themes_dir() did not return trailingslash'd pre-3.2</span>&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! $directory ) {&nbsp;</div></li><li><div>                  if ( ! $development_build && $wp_filesystem-&gt;exists( $dest . $filename ) )&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( ! $wp_filesystem-&gt;copy($from . $distro . 'wp-content/' . $file, $dest . $filename, FS_CHMOD_FILE) )&nbsp;</div></li><li><div>                      $result = new WP_Error( &quot;copy_failed_for_new_bundled_$type&quot;, __( 'Could not copy file.' ), $dest . $filename );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  if ( ! $development_build && $wp_filesystem-&gt;is_dir( $dest . $filename ) )&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $wp_filesystem-&gt;mkdir($dest . $filename, FS_CHMOD_DIR);&nbsp;</div></li><li><div>                  $_result = copy_dir( $from . $distro . 'wp-content/' . $file, $dest . $filename);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// If a error occurs partway through this final step, keep the error flowing through, but keep process going.</span>&nbsp;</div></li><li><div>                  if ( is_wp_error( $_result ) ) {&nbsp;</div></li><li><div>                      if ( ! is_wp_error( $result ) )&nbsp;</div></li><li><div>                          $result = new WP_Error;&nbsp;</div></li><li><div>                      $result-&gt;add( $_result-&gt;get_error_code() . &quot;_$type&quot;, $_result-&gt;get_error_message(), substr( $_result-&gt;get_error_data(), strlen( $dest ) ) );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } <span class="comment">//end foreach</span>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Handle $result error from the above blocks</span>&nbsp;</div></li><li><div>  if ( is_wp_error($result) ) {&nbsp;</div></li><li><div>      $wp_filesystem-&gt;delete($from, true);&nbsp;</div></li><li><div>      return $result;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove old files</span>&nbsp;</div></li><li><div>  foreach ( $_old_files as $old_file ) {&nbsp;</div></li><li><div>      $old_file = $to . $old_file;&nbsp;</div></li><li><div>      if ( !$wp_filesystem-&gt;exists($old_file) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      $wp_filesystem-&gt;delete($old_file, true);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove any Genericons example.html's from the filesystem</span>&nbsp;</div></li><li><div>  _upgrade_422_remove_genericons();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove the REST API plugin if its version is Beta 4 or lower</span>&nbsp;</div></li><li><div>  _upgrade_440_force_deactivate_incompatible_plugins();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Upgrade DB with separate request</span>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">/** This filter is documented in wp-admin/includes/update-core.php */</span></span></span></span></span>&nbsp;</div></li><li><div>  apply_filters( 'update_feedback', __( 'Upgrading database&#8230;' ) );&nbsp;</div></li><li><div>  $db_upgrade_url = admin_url('upgrade.php?step=upgrade_db');&nbsp;</div></li><li><div>  wp_remote_post($db_upgrade_url, array('timeout' =&gt; 60));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Clear the cache to prevent an update_option() from saving a stale db_version to the cache</span>&nbsp;</div></li><li><div>  wp_cache_flush();&nbsp;</div></li><li><div>  <span class="comment">// (Not all cache back ends listen to 'flush')</span>&nbsp;</div></li><li><div>  wp_cache_delete( 'alloptions', 'options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove working directory</span>&nbsp;</div></li><li><div>  $wp_filesystem-&gt;delete($from, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Force refresh of update information</span>&nbsp;</div></li><li><div>  if ( function_exists('delete_site_transient') )&nbsp;</div></li><li><div>      delete_site_transient('update_core');&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      delete_option('update_core');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires after WordPress core has been successfully updated.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.3.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $wp_version The current WordPress version.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( '_core_updated_successfully', $wp_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Clear the option that blocks auto updates after failures, now that we've been successful.</span>&nbsp;</div></li><li><div>  if ( function_exists( 'delete_site_option' ) )&nbsp;</div></li><li><div>      delete_site_option( 'auto_core_update_failed' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_version;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Copies a directory from one location to another via the WordPress Filesystem Abstraction.</span>&nbsp;</div></li><li><div><span class="comment"> * Assumes that WP_Filesystem() has already been called and setup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is a temporary function for the 3.1 -&gt; 3.2 upgrade, as well as for those upgrading to</span>&nbsp;</div></li><li><div><span class="comment"> * 3.7+</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @ignore</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0 Updated not to use a regular expression for the skip list</span>&nbsp;</div></li><li><div><span class="comment"> * @see copy_dir()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Filesystem_Base $wp_filesystem</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $from     source directory</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $to       destination directory</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $skip_list a list of files/folders to skip copying</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed WP_Error on failure, True on success.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _copy_dir($from, $to, $skip_list = array() ) {&nbsp;</div></li><li><div>  global $wp_filesystem;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $dirlist = $wp_filesystem-&gt;dirlist($from);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $from = trailingslashit($from);&nbsp;</div></li><li><div>  $to = trailingslashit($to);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( (array) $dirlist as $filename =&gt; $fileinfo ) {&nbsp;</div></li><li><div>      if ( in_array( $filename, $skip_list ) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'f' == $fileinfo['type'] ) {&nbsp;</div></li><li><div>          if ( ! $wp_filesystem-&gt;copy($from . $filename, $to . $filename, true, FS_CHMOD_FILE) ) {&nbsp;</div></li><li><div>              <span class="comment">// If copy failed, chmod file to 0644 and try again.</span>&nbsp;</div></li><li><div>              $wp_filesystem-&gt;chmod( $to . $filename, FS_CHMOD_FILE );&nbsp;</div></li><li><div>              if ( ! $wp_filesystem-&gt;copy($from . $filename, $to . $filename, true, FS_CHMOD_FILE) )&nbsp;</div></li><li><div>                  return new WP_Error( 'copy_failed__copy_dir', __( 'Could not copy file.' ), $to . $filename );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } elseif ( 'd' == $fileinfo['type'] ) {&nbsp;</div></li><li><div>          if ( !$wp_filesystem-&gt;is_dir($to . $filename) ) {&nbsp;</div></li><li><div>              if ( !$wp_filesystem-&gt;mkdir($to . $filename, FS_CHMOD_DIR) )&nbsp;</div></li><li><div>                  return new WP_Error( 'mkdir_failed__copy_dir', __( 'Could not create directory.' ), $to . $filename );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Generate the $sub_skip_list for the subdirectory as a sub-set</span>&nbsp;</div></li><li><div><span class="comment">           * of the existing $skip_list.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $sub_skip_list = array();&nbsp;</div></li><li><div>          foreach ( $skip_list as $skip_item ) {&nbsp;</div></li><li><div>              if ( 0 === strpos( $skip_item, $filename . '/' ) )&nbsp;</div></li><li><div>                  $sub_skip_list[] = preg_replace( '!^' . preg_quote( $filename, '!' ) . '/!i', '', $skip_item );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $result = _copy_dir($from . $filename, $to . $filename, $sub_skip_list);&nbsp;</div></li><li><div>          if ( is_wp_error($result) )&nbsp;</div></li><li><div>              return $result;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Redirect to the About WordPress page after a successful upgrade.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is only needed when the existing install is older than 3.4.0.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $wp_version</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $pagenow</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $action</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $new_version</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _redirect_to_about_wordpress( $new_version ) {&nbsp;</div></li><li><div>  global $wp_version, $pagenow, $action;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( version_compare( $wp_version, '3.4-RC1', '&gt;=' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Ensure we only run this on the update-core.php page. The Core_Upgrader may be used in other contexts.</span>&nbsp;</div></li><li><div>  if ( 'update-core.php' != $pagenow )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>   if ( 'do-core-upgrade' != $action && 'do-core-reinstall' != $action )&nbsp;</div></li><li><div>       return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Load the updated default text localization domain for new strings.</span>&nbsp;</div></li><li><div>  load_default_textdomain();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// See do_core_upgrade()</span>&nbsp;</div></li><li><div>  show_message( __('WordPress updated successfully') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// self_admin_url() won't exist when upgrading from &lt;= 3.0, so relative URLs are intentional.</span>&nbsp;</div></li><li><div>  show_message( '&lt;span class=&quot;hide-if-no-js&quot;&gt;' . sprintf( __( 'Welcome to WordPress %1$s. You will be redirected to the About WordPress screen. If not, click &lt;a href=&quot;%2$s&quot;&gt;here&lt;/a&gt;.' ), $new_version, 'about.php?updated' ) . '&lt;/span&gt;' );&nbsp;</div></li><li><div>  show_message( '&lt;span class=&quot;hide-if-js&quot;&gt;' . sprintf( __( 'Welcome to WordPress %1$s. &lt;a href=&quot;%2$s&quot;&gt;Learn more&lt;/a&gt;.' ), $new_version, 'about.php?updated' ) . '&lt;/span&gt;' );&nbsp;</div></li><li><div>  echo '&lt;/div&gt;';&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>window.location = 'about.php?updated';&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Include admin-footer.php and exit.</span>&nbsp;</div></li><li><div>  include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>  exit();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Cleans up Genericons example files.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.2.2</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array              $wp_theme_directories</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Filesystem_Base $wp_filesystem</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _upgrade_422_remove_genericons() {&nbsp;</div></li><li><div>  global $wp_theme_directories, $wp_filesystem;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// A list of the affected files using the filesystem absolute paths.</span>&nbsp;</div></li><li><div>  $affected_files = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Themes</span>&nbsp;</div></li><li><div>  foreach ( $wp_theme_directories as $directory ) {&nbsp;</div></li><li><div>      $affected_theme_files = _upgrade_422_find_genericons_files_in_folder( $directory );&nbsp;</div></li><li><div>      $affected_files = array_merge( $affected_files, $affected_theme_files );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Plugins</span>&nbsp;</div></li><li><div>  $affected_plugin_files = _upgrade_422_find_genericons_files_in_folder( WP_PLUGIN_DIR );&nbsp;</div></li><li><div>  $affected_files = array_merge( $affected_files, $affected_plugin_files );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $affected_files as $file ) {&nbsp;</div></li><li><div>      $gen_dir = $wp_filesystem-&gt;find_folder( trailingslashit( dirname( $file ) ) );&nbsp;</div></li><li><div>      if ( empty( $gen_dir ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// The path when the file is accessed via WP_Filesystem may differ in the case of FTP</span>&nbsp;</div></li><li><div>      $remote_file = $gen_dir . basename( $file );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $wp_filesystem-&gt;exists( $remote_file ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $wp_filesystem-&gt;delete( $remote_file, false, 'f' ) ) {&nbsp;</div></li><li><div>          $wp_filesystem-&gt;put_contents( $remote_file, '' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Recursively find Genericons example files in a given folder.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @ignore</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.2.2</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $directory Directory path. Expects trailingslashed.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _upgrade_422_find_genericons_files_in_folder( $directory ) {&nbsp;</div></li><li><div>  $directory = trailingslashit( $directory );&nbsp;</div></li><li><div>  $files = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( file_exists( &quot;{$directory}example.html&quot; ) && false !== strpos( file_get_contents( &quot;{$directory}example.html&quot; ), '&lt;title&gt;Genericons&lt;/title&gt;' ) ) {&nbsp;</div></li><li><div>      $files[] = &quot;{$directory}example.html&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $dirs = glob( $directory . '*', GLOB_ONLYDIR );&nbsp;</div></li><li><div>  if ( $dirs ) {&nbsp;</div></li><li><div>      foreach ( $dirs as $dir ) {&nbsp;</div></li><li><div>          $files = array_merge( $files, _upgrade_422_find_genericons_files_in_folder( $dir ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $files;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @ignore</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _upgrade_440_force_deactivate_incompatible_plugins() {&nbsp;</div></li><li><div>  if ( defined( 'REST_API_VERSION' ) && version_compare( REST_API_VERSION, '2.0-beta4', '&lt;=' ) ) {&nbsp;</div></li><li><div>      deactivate_plugins( array( 'rest-api/plugin.php' ), true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2019 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>