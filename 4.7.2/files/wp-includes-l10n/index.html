<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.2" data-type="file" data-id="4801"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-includes-l10n | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.17"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=977d7f64b4261257eacb6f48e667a25b' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.17' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-includes-l10n/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-l10n%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-l10n%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.2-file-wp-includes-l10n","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-includes-l10n" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.2." href="http://hookr.io/4.7.2/" class="H_VERSION"><span property="name">4.7.2</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-includes-l10n</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6308"><a href="http://hookr.io/4.7.2/all/" title="All">All <span class="count badge">6308</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7.2/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.2/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7.2/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.2/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.2/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2852"><a href="http://hookr.io/4.7.2/functions/" title="Functions">Functions <span class="count badge">2852</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-includes/l10n.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Core Translation API</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage i18n</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieves the current locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the locale is set, then it will filter the locale in the {@see 'locale'}</span>&nbsp;</div></li><li><div><span class="comment"> * filter hook and return the value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the locale is not set already, then the WPLANG constant is used if it is</span>&nbsp;</div></li><li><div><span class="comment"> * defined. Then it is filtered through the {@see 'locale'} filter hook and</span>&nbsp;</div></li><li><div><span class="comment"> * the value for the locale global set and the locale is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The process to get the locale should only be done once, but the locale will</span>&nbsp;</div></li><li><div><span class="comment"> * always be filtered using the {@see 'locale'} hook.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $locale</span>&nbsp;</div></li><li><div><span class="comment"> * @global string $wp_local_package</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The locale of the blog or from the {@see 'locale'} hook.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_locale() {&nbsp;</div></li><li><div>  global $locale, $wp_local_package;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $locale ) ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters WordPress install's locale ID.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $locale The locale ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'locale', $locale );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $wp_local_package ) ) {&nbsp;</div></li><li><div>      $locale = $wp_local_package;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// WPLANG was defined in wp-config.</span>&nbsp;</div></li><li><div>  if ( defined( 'WPLANG' ) ) {&nbsp;</div></li><li><div>      $locale = WPLANG;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If multisite, check options.</span>&nbsp;</div></li><li><div>  if ( is_multisite() ) {&nbsp;</div></li><li><div>      <span class="comment">// Don't check blog option when installing.</span>&nbsp;</div></li><li><div>      if ( wp_installing() || ( false === $ms_locale = get_option( 'WPLANG' ) ) ) {&nbsp;</div></li><li><div>          $ms_locale = get_site_option( 'WPLANG' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $ms_locale !== false ) {&nbsp;</div></li><li><div>          $locale = $ms_locale;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $db_locale = get_option( 'WPLANG' );&nbsp;</div></li><li><div>      if ( $db_locale !== false ) {&nbsp;</div></li><li><div>          $locale = $db_locale;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $locale ) ) {&nbsp;</div></li><li><div>      $locale = 'en_US';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** This filter is documented in wp-includes/l10n.php */</span></span>&nbsp;</div></li><li><div>  return apply_filters( 'locale', $locale );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieves the locale of a user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the user has a locale set to a non-empty string then it will be</span>&nbsp;</div></li><li><div><span class="comment"> * returned. Otherwise it returns the locale of get_locale().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_User $user_id User's ID or a WP_User object. Defaults to current user.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The locale of the user.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_user_locale( $user_id = 0 ) {&nbsp;</div></li><li><div>  $user = false;&nbsp;</div></li><li><div>  if ( 0 === $user_id && function_exists( 'wp_get_current_user' ) ) {&nbsp;</div></li><li><div>      $user = wp_get_current_user();&nbsp;</div></li><li><div>  } elseif ( $user_id instanceof WP_User ) {&nbsp;</div></li><li><div>      $user = $user_id;&nbsp;</div></li><li><div>  } elseif ( $user_id && is_numeric( $user_id ) ) {&nbsp;</div></li><li><div>      $user = get_user_by( 'id', $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $user ) {&nbsp;</div></li><li><div>      return get_locale();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $locale = $user-&gt;locale;&nbsp;</div></li><li><div>  return $locale ? $locale : get_locale();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the translation of $text.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there is no translation, or the text domain isn't loaded, the original text is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * *Note:* Don't use translate() directly, use __() or related functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function translate( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  $translations = get_translations_for_domain( $domain );&nbsp;</div></li><li><div>  $translation = $translations-&gt;translate( $text );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters text with its translation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.0.11</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $translation  Translated text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $text         Text to translate.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain       Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'gettext', $translation, $text, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Remove last item on a pipe-delimited string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Meant for removing the last item in a string, such as 'Role name|User role'. The original</span>&nbsp;</div></li><li><div><span class="comment"> * string will be returned if no pipe '|' characters are found in the string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $string A pipe-delimited string.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Either $string or everything before the last pipe.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function before_last_bar( $string ) {&nbsp;</div></li><li><div>  $last_bar = strrpos( $string, '|' );&nbsp;</div></li><li><div>  if ( false === $last_bar ) {&nbsp;</div></li><li><div>      return $string;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return substr( $string, 0, $last_bar );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the translation of $text in the context defined in $context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there is no translation, or the text domain isn't loaded the original</span>&nbsp;</div></li><li><div><span class="comment"> * text is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * *Note:* Don't use translate_with_gettext_context() directly, use _x() or related functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text    Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text on success, original text on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function translate_with_gettext_context( $text, $context, $domain = 'default' ) {&nbsp;</div></li><li><div>  $translations = get_translations_for_domain( $domain );&nbsp;</div></li><li><div>  $translation = $translations-&gt;translate( $text, $context );&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters text with its translation based on context information.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $translation  Translated text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $text         Text to translate.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $context      Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain       Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'gettext_with_context', $translation, $text, $context, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the translation of $text.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there is no translation, or the text domain isn't loaded, the original text is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function __( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  return translate( $text, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the translation of $text and escapes it for safe use in an attribute.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there is no translation, or the text domain isn't loaded, the original text is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text on success, original text on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_attr__( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  return esc_attr( translate( $text, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the translation of $text and escapes it for safe use in HTML output.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there is no translation, or the text domain isn't loaded, the original text is returned.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_html__( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  return esc_html( translate( $text, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display translated text.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _e( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  echo translate( $text, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display translated text that has been escaped for safe use in an attribute.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_attr_e( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  echo esc_attr( translate( $text, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display translated text that has been escaped for safe use in HTML output.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_html_e( $text, $domain = 'default' ) {&nbsp;</div></li><li><div>  echo esc_html( translate( $text, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve translated string with gettext context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Quite a few times, there will be collisions with similar translatable text</span>&nbsp;</div></li><li><div><span class="comment"> * found in more than two places, but with different translated context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * By including the context in the pot file, translators can translate the two</span>&nbsp;</div></li><li><div><span class="comment"> * strings differently.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text    Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated context string without pipe.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _x( $text, $context, $domain = 'default' ) {&nbsp;</div></li><li><div>  return translate_with_gettext_context( $text, $context, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display translated string with gettext context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text    Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated context string without pipe.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _ex( $text, $context, $domain = 'default' ) {&nbsp;</div></li><li><div>  echo _x( $text, $context, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translate string with gettext context, and escapes it for safe use in an attribute.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text    Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_attr_x( $text, $context, $domain = 'default' ) {&nbsp;</div></li><li><div>  return esc_attr( translate_with_gettext_context( $text, $context, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translate string with gettext context, and escapes it for safe use in HTML output.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text    Text to translate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated text.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function esc_html_x( $text, $context, $domain = 'default' ) {&nbsp;</div></li><li><div>  return esc_html( translate_with_gettext_context( $text, $context, $domain ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translates and retrieves the singular or plural form based on the supplied number.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used when you want to use the appropriate form of a string based on whether a</span>&nbsp;</div></li><li><div><span class="comment"> * number is singular or plural.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Example:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( _n( '%s person', '%s people', $count, 'text-domain' ), number_format_i18n( $count ) );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $single The text to be used if the number is singular.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plural The text to be used if the number is plural.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $number The number to compare against to use either the singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The translated singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _n( $single, $plural, $number, $domain = 'default' ) {&nbsp;</div></li><li><div>  $translations = get_translations_for_domain( $domain );&nbsp;</div></li><li><div>  $translation = $translations-&gt;translate_plural( $single, $plural, $number );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the singular or plural form of a string.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $translation Translated text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $single      The text to be used if the number is singular.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $plural      The text to be used if the number is plural.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $number      The number to compare against to use either the singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain      Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'ngettext', $translation, $single, $plural, $number, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translates and retrieves the singular or plural form based on the supplied number, with gettext context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is a hybrid of _n() and _x(). It supports context and plurals.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used when you want to use the appropriate form of a string with context based on whether a</span>&nbsp;</div></li><li><div><span class="comment"> * number is singular or plural.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Example of a generic phrase which is disambiguated via the context parameter:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( _nx( '%s group', '%s groups', $people, 'group of people', 'text-domain' ), number_format_i18n( $people ) );</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( _nx( '%s group', '%s groups', $animals, 'group of animals', 'text-domain' ), number_format_i18n( $animals ) );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $single  The text to be used if the number is singular.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plural  The text to be used if the number is plural.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $number  The number to compare against to use either the singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain  Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                        Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The translated singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _nx($single, $plural, $number, $context, $domain = 'default') {&nbsp;</div></li><li><div>  $translations = get_translations_for_domain( $domain );&nbsp;</div></li><li><div>  $translation = $translations-&gt;translate_plural( $single, $plural, $number, $context );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the singular or plural form of a string with gettext context.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $translation Translated text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $single      The text to be used if the number is singular.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $plural      The text to be used if the number is plural.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $number      The number to compare against to use either the singular or plural form.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $context     Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain      Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'ngettext_with_context', $translation, $single, $plural, $number, $context, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Registers plural strings in POT file, but does not translate them.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used when you want to keep structures with translatable plural</span>&nbsp;</div></li><li><div><span class="comment"> * strings and use them later when the number is known.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Example:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     $message = _n_noop( '%s post', '%s posts', 'text-domain' );</span>&nbsp;</div></li><li><div><span class="comment"> *     ...</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( translate_nooped_plural( $message, $count, 'text-domain' ), number_format_i18n( $count ) );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $singular Singular form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plural   Plural form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain   Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                         Default null.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array {</span>&nbsp;</div></li><li><div><span class="comment"> *     Array of translation information for the strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $0        Singular form to be localized. No longer used.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $1        Plural form to be localized. No longer used.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $singular Singular form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $plural   Plural form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type null   $context  Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $domain   Text domain.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _n_noop( $singular, $plural, $domain = null ) {&nbsp;</div></li><li><div>  return array( 0 =&gt; $singular, 1 =&gt; $plural, 'singular' =&gt; $singular, 'plural' =&gt; $plural, 'context' =&gt; null, 'domain' =&gt; $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Registers plural strings with gettext context in POT file, but does not translate them.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used when you want to keep structures with translatable plural</span>&nbsp;</div></li><li><div><span class="comment"> * strings and use them later when the number is known.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Example of a generic phrase which is disambiguated via the context parameter:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     $messages = array(</span>&nbsp;</div></li><li><div><span class="comment"> *          'people' =&gt; _nx_noop( '%s group', '%s groups', 'people', 'text-domain' ), </span>&nbsp;</div></li><li><div><span class="comment"> *          'animals' =&gt; _nx_noop( '%s group', '%s groups', 'animals', 'text-domain' ), </span>&nbsp;</div></li><li><div><span class="comment"> * );</span>&nbsp;</div></li><li><div><span class="comment"> *     ...</span>&nbsp;</div></li><li><div><span class="comment"> *     $message = $messages[ $type ];</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( translate_nooped_plural( $message, $count, 'text-domain' ), number_format_i18n( $count ) );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $singular Singular form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plural   Plural form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context  Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain   Optional. Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *                         Default null.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array {</span>&nbsp;</div></li><li><div><span class="comment"> *     Array of translation information for the strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $0        Singular form to be localized. No longer used.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $1        Plural form to be localized. No longer used.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $2        Context information for the translators. No longer used.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $singular Singular form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $plural   Plural form to be localized.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $context  Context information for the translators.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $domain   Text domain.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _nx_noop( $singular, $plural, $context, $domain = null ) {&nbsp;</div></li><li><div>  return array( 0 =&gt; $singular, 1 =&gt; $plural, 2 =&gt; $context, 'singular' =&gt; $singular, 'plural' =&gt; $plural, 'context' =&gt; $context, 'domain' =&gt; $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translates and retrieves the singular or plural form of a string that's been registered</span>&nbsp;</div></li><li><div><span class="comment"> * with _n_noop() or _nx_noop().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used when you want to use a translatable plural string once the number is known.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Example:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     $message = _n_noop( '%s post', '%s posts', 'text-domain' );</span>&nbsp;</div></li><li><div><span class="comment"> *     ...</span>&nbsp;</div></li><li><div><span class="comment"> *     printf( translate_nooped_plural( $message, $count, 'text-domain' ), number_format_i18n( $count ) );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $nooped_plural Array with singular, plural, and context keys, usually the result of _n_noop() or _nx_noop().</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $count         Number of objects.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain        Optional. Text domain. Unique identifier for retrieving translated strings. If $nooped_plural contains</span>&nbsp;</div></li><li><div><span class="comment"> *                              a text domain passed to _n_noop() or _nx_noop(), it will override this value. Default 'default'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Either $single or $plural translated text.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function translate_nooped_plural( $nooped_plural, $count, $domain = 'default' ) {&nbsp;</div></li><li><div>  if ( $nooped_plural['domain'] )&nbsp;</div></li><li><div>      $domain = $nooped_plural['domain'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $nooped_plural['context'] )&nbsp;</div></li><li><div>      return _nx( $nooped_plural['singular'], $nooped_plural['plural'], $count, $nooped_plural['context'], $domain );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      return _n( $nooped_plural['singular'], $nooped_plural['plural'], $count, $domain );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load a .mo file into the text domain $domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the text domain already exists, the translations will be merged. If both</span>&nbsp;</div></li><li><div><span class="comment"> * sets have the same string, the translation from the original value will be taken.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * On success, the .mo file will be placed in the $l10n global by $domain</span>&nbsp;</div></li><li><div><span class="comment"> * and will be a MO object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n          An array of all currently loaded text domains.</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n_unloaded An array of all text domains that have been unloaded again.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $mofile Path to the .mo file.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True on success, false on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_textdomain( $domain, $mofile ) {&nbsp;</div></li><li><div>  global $l10n, $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $l10n_unloaded = (array) $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether to override the .mo file loading.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $override Whether to override the .mo file loading. Default false.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain   Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $mofile   Path to the MO file.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $plugin_override = apply_filters( 'override_load_textdomain', false, $domain, $mofile );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( true == $plugin_override ) {&nbsp;</div></li><li><div>      unset( $l10n_unloaded[ $domain ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before the MO translation file is loaded.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $mofile Path to the .mo file.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'load_textdomain', $domain, $mofile );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters MO file path for loading translations for a specific text domain.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $mofile Path to the MO file.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $mofile = apply_filters( 'load_textdomain_mofile', $mofile, $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_readable( $mofile ) ) return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $mo = new MO();&nbsp;</div></li><li><div>  if ( !$mo-&gt;import_from_file( $mofile ) ) return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $l10n[$domain] ) )&nbsp;</div></li><li><div>      $mo-&gt;merge_with( $l10n[$domain] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  unset( $l10n_unloaded[ $domain ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $l10n[$domain] = &$mo;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Unload translations for a text domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n          An array of all currently loaded text domains.</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n_unloaded An array of all text domains that have been unloaded again.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether textdomain was unloaded.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function unload_textdomain( $domain ) {&nbsp;</div></li><li><div>  global $l10n, $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $l10n_unloaded = (array) $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether to override the text domain unloading.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $override Whether to override the text domain unloading. Default false.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain   Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $plugin_override = apply_filters( 'override_unload_textdomain', false, $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $plugin_override ) {&nbsp;</div></li><li><div>      $l10n_unloaded[ $domain ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before the text domain is unloaded.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'unload_textdomain', $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $l10n[$domain] ) ) {&nbsp;</div></li><li><div>      unset( $l10n[$domain] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $l10n_unloaded[ $domain ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load default translated strings based on locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Loads the .mo file in WP_LANG_DIR constant path from WordPress root.</span>&nbsp;</div></li><li><div><span class="comment"> * The translated (.mo) file is named based on the locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see load_textdomain()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $locale Optional. Locale to load. Default is the value of get_locale().</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether the textdomain was loaded.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_default_textdomain( $locale = null ) {&nbsp;</div></li><li><div>  if ( null === $locale ) {&nbsp;</div></li><li><div>      $locale = is_admin() ? get_user_locale() : get_locale();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Unload previously loaded strings so we can switch translations.</span>&nbsp;</div></li><li><div>  unload_textdomain( 'default' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = load_textdomain( 'default', WP_LANG_DIR . &quot;/$locale.mo&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ( is_multisite() || ( defined( 'WP_INSTALLING_NETWORK' ) && WP_INSTALLING_NETWORK ) ) && ! file_exists(  WP_LANG_DIR . &quot;/admin-$locale.mo&quot; ) ) {&nbsp;</div></li><li><div>      load_textdomain( 'default', WP_LANG_DIR . &quot;/ms-$locale.mo&quot; );&nbsp;</div></li><li><div>      return $return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_admin() || wp_installing() || ( defined( 'WP_REPAIRING' ) && WP_REPAIRING ) ) {&nbsp;</div></li><li><div>      load_textdomain( 'default', WP_LANG_DIR . &quot;/admin-$locale.mo&quot; );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_network_admin() || ( defined( 'WP_INSTALLING_NETWORK' ) && WP_INSTALLING_NETWORK ) )&nbsp;</div></li><li><div>      load_textdomain( 'default', WP_LANG_DIR . &quot;/admin-network-$locale.mo&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $return;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Loads a plugin's translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the path is not given then it will be the root of the plugin directory.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The .mo file should be named based on the text domain with a dash, and then the locale exactly.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 The function now tries to load the .mo file from the languages directory first.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain          Unique identifier for retrieving translated strings</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $deprecated      Optional. Use the $plugin_rel_path parameter instead. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plugin_rel_path Optional. Relative path to WP_PLUGIN_DIR where the .mo file resides.</span>&nbsp;</div></li><li><div><span class="comment"> *                                Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True when textdomain is successfully loaded, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_plugin_textdomain( $domain, $deprecated = false, $plugin_rel_path = false ) {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters a plugin's locale.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $locale The plugin's current locale.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $locale = apply_filters( 'plugin_locale', is_admin() ? get_user_locale() : get_locale(), $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $mofile = $domain . '-' . $locale . '.mo';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Try to load from the languages directory first.</span></span></span>&nbsp;</div></li><li><div>  if ( load_textdomain( $domain, WP_LANG_DIR . '/plugins/' . $mofile ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== $plugin_rel_path ) {&nbsp;</div></li><li><div>      $path = WP_PLUGIN_DIR . '/' . trim( $plugin_rel_path, '/' );&nbsp;</div></li><li><div>  } elseif ( false !== $deprecated ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '2.7.0' );&nbsp;</div></li><li><div>      $path = ABSPATH . trim( $deprecated, '/' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $path = WP_PLUGIN_DIR;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return load_textdomain( $domain, $path . '/' . $mofile );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load the translated strings for a plugin residing in the mu-plugins directory.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 The function now tries to load the .mo file from the languages directory first.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain             Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $mu_plugin_rel_path Optional. Relative to `WPMU_PLUGIN_DIR` directory in which the .mo</span>&nbsp;</div></li><li><div><span class="comment"> *                                   file resides. Default empty string.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True when textdomain is successfully loaded, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_muplugin_textdomain( $domain, $mu_plugin_rel_path = '' ) {&nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** This filter is documented in wp-includes/l10n.php */</span></span>&nbsp;</div></li><li><div>  $locale = apply_filters( 'plugin_locale', is_admin() ? get_user_locale() : get_locale(), $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $mofile = $domain . '-' . $locale . '.mo';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Try to load from the languages directory first.</span></span></span>&nbsp;</div></li><li><div>  if ( load_textdomain( $domain, WP_LANG_DIR . '/plugins/' . $mofile ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $path = trailingslashit( WPMU_PLUGIN_DIR . '/' . ltrim( $mu_plugin_rel_path, '/' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return load_textdomain( $domain, $path . '/' . $mofile );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load the theme's translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the current locale exists as a .mo file in the theme's root directory, it</span>&nbsp;</div></li><li><div><span class="comment"> * will be included in the translated strings by the $domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The .mo files must be named based on the locale exactly.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 The function now tries to load the .mo file from the languages directory first.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $path   Optional. Path to the directory containing the .mo file.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True when textdomain is successfully loaded, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_theme_textdomain( $domain, $path = false ) {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters a theme's locale.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $locale The theme's current locale.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $locale = apply_filters( 'theme_locale', is_admin() ? get_user_locale() : get_locale(), $domain );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $mofile = $domain . '-' . $locale . '.mo';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Try to load from the languages directory first.</span></span></span>&nbsp;</div></li><li><div>  if ( load_textdomain( $domain, WP_LANG_DIR . '/themes/' . $mofile ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $path ) {&nbsp;</div></li><li><div>      $path = get_template_directory();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return load_textdomain( $domain, $path . '/' . $locale . '.mo' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load the child themes translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the current locale exists as a .mo file in the child themes</span>&nbsp;</div></li><li><div><span class="comment"> * root directory, it will be included in the translated strings by the $domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The .mo files must be named based on the locale exactly.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $path   Optional. Path to the directory containing the .mo file.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True when the theme textdomain is successfully loaded, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function load_child_theme_textdomain( $domain, $path = false ) {&nbsp;</div></li><li><div>  if ( ! $path )&nbsp;</div></li><li><div>      $path = get_stylesheet_directory();&nbsp;</div></li><li><div>  return load_theme_textdomain( $domain, $path );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Loads plugin and theme textdomains just-in-time.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * When a textdomain is encountered for the first time, we try to load</span>&nbsp;</div></li><li><div><span class="comment"> * the translation file from `wp-content/languages`, removing the need</span>&nbsp;</div></li><li><div><span class="comment"> * to call load_plugin_texdomain() or load_theme_texdomain().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_translations_for_domain()</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n_unloaded An array of all text domains that have been unloaded again.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True when the textdomain is successfully loaded, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _load_textdomain_just_in_time( $domain ) {&nbsp;</div></li><li><div>  global $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $l10n_unloaded = (array) $l10n_unloaded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Short-circuit if domain is 'default' which is reserved for core.</span>&nbsp;</div></li><li><div>  if ( 'default' === $domain || isset( $l10n_unloaded[ $domain ] ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $translation_path = _get_path_to_translation( $domain );&nbsp;</div></li><li><div>  if ( false === $translation_path ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return load_textdomain( $domain, $translation_path );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets the path to a translation file for loading a textdomain just in time.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Caches the retrieved results internally.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see _load_textdomain_just_in_time()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $reset  Whether to reset the internal cache. Used by the switch to locale functionality.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|false The path to the translation file or false if no translation file was found.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _get_path_to_translation( $domain, $reset = false ) {&nbsp;</div></li><li><div>  static $available_translations = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( true === $reset ) {&nbsp;</div></li><li><div>      $available_translations = array();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $available_translations[ $domain ] ) ) {&nbsp;</div></li><li><div>      $available_translations[ $domain ] = _get_path_to_translation_from_lang_dir( $domain );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $available_translations[ $domain ];&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets the path to a translation file in the languages directory for the current locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Holds a cached list of available .mo files to improve performance.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see _get_path_to_translation()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|false The path to the translation file or false if no translation file was found.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _get_path_to_translation_from_lang_dir( $domain ) {&nbsp;</div></li><li><div>  static $cached_mofiles = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $cached_mofiles ) {&nbsp;</div></li><li><div>      $cached_mofiles = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $locations = array(&nbsp;</div></li><li><div>          WP_LANG_DIR . '/plugins', &nbsp;</div></li><li><div>          WP_LANG_DIR . '/themes', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $locations as $location ) {&nbsp;</div></li><li><div>          $mofiles = glob( $location . '<span class="comment">/*.mo' );</span>&nbsp;</div></li><li><div><span class="comment">          if ( $mofiles ) {</span>&nbsp;</div></li><li><div><span class="comment">              $cached_mofiles = array_merge( $cached_mofiles, $mofiles );</span>&nbsp;</div></li><li><div><span class="comment">          }</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $locale = is_admin() ? get_user_locale() : get_locale();</span>&nbsp;</div></li><li><div><span class="comment">  $mofile = &quot;{$domain}-{$locale}.mo&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $path = WP_LANG_DIR . '/plugins/' . $mofile;</span>&nbsp;</div></li><li><div><span class="comment">  if ( in_array( $path, $cached_mofiles ) ) {</span>&nbsp;</div></li><li><div><span class="comment">      return $path;</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $path = WP_LANG_DIR . '/themes/' . $mofile;</span>&nbsp;</div></li><li><div><span class="comment">  if ( in_array( $path, $cached_mofiles ) ) {</span>&nbsp;</div></li><li><div><span class="comment">      return $path;</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  return false;</span>&nbsp;</div></li><li><div><span class="comment">}</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the Translations instance for a text domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there isn't one, returns empty Translations instance.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @return Translations|NOOP_Translations A Translations instance.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_translations_for_domain( $domain ) {&nbsp;</div></li><li><div>  global $l10n;&nbsp;</div></li><li><div>  if ( isset( $l10n[ $domain ] ) || ( _load_textdomain_just_in_time( $domain ) && isset( $l10n[ $domain ] ) ) ) {&nbsp;</div></li><li><div>      return $l10n[ $domain ];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static $noop_translations = null;&nbsp;</div></li><li><div>  if ( null === $noop_translations ) {&nbsp;</div></li><li><div>      $noop_translations = new NOOP_Translations;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $noop_translations;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether there are translations for the text domain.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global array $l10n</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $domain Text domain. Unique identifier for retrieving translated strings.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether there are translations.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_textdomain_loaded( $domain ) {&nbsp;</div></li><li><div>  global $l10n;&nbsp;</div></li><li><div>  return isset( $l10n[ $domain ] );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Translates role name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Since the role names are in the database and not in the source there</span>&nbsp;</div></li><li><div><span class="comment"> * are dummy gettext calls to get them into the POT file and this function</span>&nbsp;</div></li><li><div><span class="comment"> * properly translates them back.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The before_last_bar() call is needed, because older installs keep the roles</span>&nbsp;</div></li><li><div><span class="comment"> * using the old context format: 'Role name|User role' and just skipping the</span>&nbsp;</div></li><li><div><span class="comment"> * content after the last bar is easier than fixing them in the DB. New installs</span>&nbsp;</div></li><li><div><span class="comment"> * won't suffer from that problem.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name The role name.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Translated role name on success, original name on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function translate_user_role( $name ) {&nbsp;</div></li><li><div>  return translate_with_gettext_context( before_last_bar($name), 'User role' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get all available languages based on the presence of *.mo files in a given directory.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The default directory is WP_LANG_DIR.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0 The results are now filterable with the {@see 'get_available_languages'} filter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $dir A directory to search for language files.</span>&nbsp;</div></li><li><div><span class="comment"> *                    Default WP_LANG_DIR.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array An array of language codes or an empty array if no languages are present. Language codes are formed by stripping the .mo extension from the language file names.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_available_languages( $dir = null ) {&nbsp;</div></li><li><div>  $languages = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $lang_files = glob( ( is_null( $dir ) ? WP_LANG_DIR : $dir ) . '<span class="comment">/*.mo' );</span>&nbsp;</div></li><li><div><span class="comment">  if ( $lang_files ) {</span>&nbsp;</div></li><li><div><span class="comment">      foreach ( $lang_files as $lang_file ) {</span>&nbsp;</div></li><li><div><span class="comment">          $lang_file = basename( $lang_file, '.mo' );</span>&nbsp;</div></li><li><div><span class="comment">          if ( 0 !== strpos( $lang_file, 'continents-cities' ) && 0 !== strpos( $lang_file, 'ms-' ) &&</span>&nbsp;</div></li><li><div><span class="comment">              0 !== strpos( $lang_file, 'admin-' ) ) {</span>&nbsp;</div></li><li><div><span class="comment">              $languages[] = $lang_file;</span>&nbsp;</div></li><li><div><span class="comment">          }</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  /**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the list of available language codes.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $languages An array of available language codes.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $dir       The directory where the language files were found.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_available_languages', $languages, $dir );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get installed translations.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Looks in the wp-content/languages directory for translations of</span>&nbsp;</div></li><li><div><span class="comment"> * plugins or themes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type What to search for. Accepts 'plugins', 'themes', 'core'.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Array of language data.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_installed_translations( $type ) {&nbsp;</div></li><li><div>  if ( $type !== 'themes' && $type !== 'plugins' && $type !== 'core' )&nbsp;</div></li><li><div>      return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $dir = 'core' === $type ? '' : &quot;/$type&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_dir( WP_LANG_DIR ) )&nbsp;</div></li><li><div>      return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $dir && ! is_dir( WP_LANG_DIR . $dir ) )&nbsp;</div></li><li><div>      return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $files = scandir( WP_LANG_DIR . $dir );&nbsp;</div></li><li><div>  if ( ! $files )&nbsp;</div></li><li><div>      return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $language_data = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $files as $file ) {&nbsp;</div></li><li><div>      if ( '.' === $file[0] || is_dir( WP_LANG_DIR . &quot;$dir/$file&quot; ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( substr( $file, -3 ) !== '.po' ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( ! preg_match( '/(?:(.+)-)?([a-z]{2, 3}(?:_[A-Z]{2})?(?:_[a-z0-9]+)?).po/', $file, $match ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( ! in_array( substr( $file, 0, -3 ) . '.mo', $files ) )  {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      list( , $textdomain, $language ) = $match;&nbsp;</div></li><li><div>      if ( '' === $textdomain ) {&nbsp;</div></li><li><div>          $textdomain = 'default';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $language_data[ $textdomain ][ $language ] = wp_get_pomo_file_data( WP_LANG_DIR . &quot;$dir/$file&quot; );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $language_data;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Extract headers from a PO file.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $po_file Path to PO file.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array PO file headers.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_pomo_file_data( $po_file ) {&nbsp;</div></li><li><div>  $headers = get_file_data( $po_file, array(&nbsp;</div></li><li><div>      'POT-Creation-Date' =&gt; '&quot;POT-Creation-Date', &nbsp;</div></li><li><div>      'PO-Revision-Date' =&gt; '&quot;PO-Revision-Date', &nbsp;</div></li><li><div>      'Project-Id-Version' =&gt; '&quot;Project-Id-Version', &nbsp;</div></li><li><div>      'X-Generator' =&gt; '&quot;X-Generator', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>  foreach ( $headers as $header =&gt; $value ) {&nbsp;</div></li><li><div>      <span class="comment">// Remove possible contextual '\n' and closing double quote.</span>&nbsp;</div></li><li><div>      $headers[ $header ] = preg_replace( '~(\\\n)?&quot;$~', '', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $headers;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Language selector.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.3.0 Introduced the `echo` argument.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0 Introduced the `show_option_site_default` argument.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_available_languages()</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_get_available_translations()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Array or string of arguments for outputting the language selector.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string   $id                           ID attribute of the select element. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string   $name                         Name attribute of the select element. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array    $languages                    List of installed languages, contain only the locales.</span>&nbsp;</div></li><li><div><span class="comment"> *                                                  Default empty array.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array    $translations                 List of available translations. Default result of</span>&nbsp;</div></li><li><div><span class="comment"> *                                                  wp_get_available_translations().</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string   $selected                     Language which should be selected. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool|int $echo                         Whether to echo the generated markup. Accepts 0, 1, or their</span>&nbsp;</div></li><li><div><span class="comment"> *                                                  boolean equivalents. Default 1.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool     $show_available_translations  Whether to show available translations. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool     $show_option_site_default     Whether to show an option to fall back to the site's locale. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return string HTML content</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_dropdown_languages( $args = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = wp_parse_args( $args, array(&nbsp;</div></li><li><div>      'id' =&gt; '', &nbsp;</div></li><li><div>      'name' =&gt; '', &nbsp;</div></li><li><div>      'languages' =&gt; array(), &nbsp;</div></li><li><div>      'translations' =&gt; array(), &nbsp;</div></li><li><div>      'selected' =&gt; '', &nbsp;</div></li><li><div>      'echo' =&gt; 1, &nbsp;</div></li><li><div>      'show_available_translations' =&gt; true, &nbsp;</div></li><li><div>      'show_option_site_default' =&gt; false, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// English (United States) uses an empty string for the value attribute.</span>&nbsp;</div></li><li><div>  if ( 'en_US' === $args['selected'] ) {&nbsp;</div></li><li><div>      $args['selected'] = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $translations = $args['translations'];&nbsp;</div></li><li><div>  if ( empty( $translations ) ) {&nbsp;</div></li><li><div>      require_once( ABSPATH . 'wp-admin/includes/translation-install.php' );&nbsp;</div></li><li><div>      $translations = wp_get_available_translations();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * $args['languages'] should only contain the locales. Find the locale in</span>&nbsp;</div></li><li><div><span class="comment">   * $translations to get the native name. Fall back to locale.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $languages = array();&nbsp;</div></li><li><div>  foreach ( $args['languages'] as $locale ) {&nbsp;</div></li><li><div>      if ( isset( $translations[ $locale ] ) ) {&nbsp;</div></li><li><div>          $translation = $translations[ $locale ];&nbsp;</div></li><li><div>          $languages[] = array(&nbsp;</div></li><li><div>              'language' =&gt; $translation['language'], &nbsp;</div></li><li><div>              'native_name' =&gt; $translation['native_name'], &nbsp;</div></li><li><div>              'lang' =&gt; current( $translation['iso'] ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Remove installed language from available translations.</span>&nbsp;</div></li><li><div>          unset( $translations[ $locale ] );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $languages[] = array(&nbsp;</div></li><li><div>              'language' =&gt; $locale, &nbsp;</div></li><li><div>              'native_name' =&gt; $locale, &nbsp;</div></li><li><div>              'lang' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $translations_available = ( ! empty( $translations ) && $args['show_available_translations'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = sprintf( '&lt;select name=&quot;%s&quot; id=&quot;%s&quot;&gt;', esc_attr( $args['name'] ), esc_attr( $args['id'] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Holds the HTML markup.</span>&nbsp;</div></li><li><div>  $structure = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// List installed languages.</span>&nbsp;</div></li><li><div>  if ( $translations_available ) {&nbsp;</div></li><li><div>      $structure[] = '&lt;optgroup label=&quot;' . esc_attr_x( 'Installed', 'translations' ) . '&quot;&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $args['show_option_site_default'] ) {&nbsp;</div></li><li><div>      $structure[] = sprintf(&nbsp;</div></li><li><div>          '&lt;option value=&quot;site-default&quot; data-installed=&quot;1&quot;%s&gt;%s&lt;/option&gt;', &nbsp;</div></li><li><div>          selected( 'site-default', $args['selected'], false ), &nbsp;</div></li><li><div>          _x( 'Site Default', 'default site language' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $structure[] = sprintf(&nbsp;</div></li><li><div>      '&lt;option value=&quot;&quot; lang=&quot;en&quot; data-installed=&quot;1&quot;%s&gt;English (United States)&lt;/option&gt;', &nbsp;</div></li><li><div>      selected( '', $args['selected'], false )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $languages as $language ) {&nbsp;</div></li><li><div>      $structure[] = sprintf(&nbsp;</div></li><li><div>          '&lt;option value=&quot;%s&quot; lang=&quot;%s&quot;%s data-installed=&quot;1&quot;&gt;%s&lt;/option&gt;', &nbsp;</div></li><li><div>          esc_attr( $language['language'] ), &nbsp;</div></li><li><div>          esc_attr( $language['lang'] ), &nbsp;</div></li><li><div>          selected( $language['language'], $args['selected'], false ), &nbsp;</div></li><li><div>          esc_html( $language['native_name'] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( $translations_available ) {&nbsp;</div></li><li><div>      $structure[] = '&lt;/optgroup&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// List available translations.</span>&nbsp;</div></li><li><div>  if ( $translations_available ) {&nbsp;</div></li><li><div>      $structure[] = '&lt;optgroup label=&quot;' . esc_attr_x( 'Available', 'translations' ) . '&quot;&gt;';&nbsp;</div></li><li><div>      foreach ( $translations as $translation ) {&nbsp;</div></li><li><div>          $structure[] = sprintf(&nbsp;</div></li><li><div>              '&lt;option value=&quot;%s&quot; lang=&quot;%s&quot;%s&gt;%s&lt;/option&gt;', &nbsp;</div></li><li><div>              esc_attr( $translation['language'] ), &nbsp;</div></li><li><div>              esc_attr( current( $translation['iso'] ) ), &nbsp;</div></li><li><div>              selected( $translation['language'], $args['selected'], false ), &nbsp;</div></li><li><div>              esc_html( $translation['native_name'] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $structure[] = '&lt;/optgroup&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output .= join( &quot;\n&quot;, $structure );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output .= '&lt;/select&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $args['echo'] ) {&nbsp;</div></li><li><div>      echo $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Checks if current locale is RTL.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale $wp_locale</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether locale is RTL.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_rtl() {&nbsp;</div></li><li><div>  global $wp_locale;&nbsp;</div></li><li><div>  if ( ! ( $wp_locale instanceof WP_Locale ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $wp_locale-&gt;is_rtl();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Switches the translations according to the given locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale_Switcher $wp_locale_switcher</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $locale The locale.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True on success, false on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function switch_to_locale( $locale ) {&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment">/** @var WP_Locale_Switcher $wp_locale_switcher */</span></span></span></span>&nbsp;</div></li><li><div>  global $wp_locale_switcher;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_locale_switcher-&gt;switch_to_locale( $locale );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Restores the translations according to the previous locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale_Switcher $wp_locale_switcher</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|false Locale on success, false on error.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function restore_previous_locale() {&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment">/** @var WP_Locale_Switcher $wp_locale_switcher */</span></span></span></span>&nbsp;</div></li><li><div>  global $wp_locale_switcher;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_locale_switcher-&gt;restore_previous_locale();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Restores the translations according to the original locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale_Switcher $wp_locale_switcher</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|false Locale on success, false on error.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function restore_current_locale() {&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment">/** @var WP_Locale_Switcher $wp_locale_switcher */</span></span></span></span>&nbsp;</div></li><li><div>  global $wp_locale_switcher;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_locale_switcher-&gt;restore_current_locale();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether switch_to_locale() is in effect.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Locale_Switcher $wp_locale_switcher</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the locale has been switched, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_locale_switched() {&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment"><span class="comment">/** @var WP_Locale_Switcher $wp_locale_switcher */</span></span></span></span>&nbsp;</div></li><li><div>  global $wp_locale_switcher;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $wp_locale_switcher-&gt;is_switched();&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2019 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>