<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7" data-type="file" data-id="4589"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-plugins | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=d351deb18217506029d8e28614ce68ea' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-plugins/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-plugins%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-plugins%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7-file-wp-admin-plugins","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-plugins" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7." href="http://hookr.io/4.7/" class="H_VERSION"><span property="name">4.7</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-plugins</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6307"><a href="http://hookr.io/4.7/all/" title="All">All <span class="count badge">6307</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2851"><a href="http://hookr.io/4.7/functions/" title="Functions">Functions <span class="count badge">2851</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/plugins.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Plugins administration panel.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>  wp_die( __( 'Sorry, you are not allowed to manage plugins for this site.' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_list_table = _get_list_table('WP_Plugins_List_Table');&nbsp;</div></li><li><div>$pagenum = $wp_list_table-&gt;get_pagenum();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$action = $wp_list_table-&gt;current_action();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$plugin = isset($_REQUEST['plugin']) ? $_REQUEST['plugin'] : '';&nbsp;</div></li><li><div>$s = isset($_REQUEST['s']) ? urlencode( wp_unslash( $_REQUEST['s'] ) ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Clean up request URI from temporary args for screen options/paging uri's to work as expected.</span>&nbsp;</div></li><li><div>$_SERVER['REQUEST_URI'] = remove_query_arg(array('error', 'deleted', 'activate', 'activate-multi', 'deactivate', 'deactivate-multi', '_error_nonce'), $_SERVER['REQUEST_URI']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_script( 'updates' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( $action ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ( $action ) {&nbsp;</div></li><li><div>      case 'activate':&nbsp;</div></li><li><div>          if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to activate plugins for this site.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_multisite() && ! is_network_admin() && is_network_only_plugin( $plugin ) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('activate-plugin_' . $plugin);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $result = activate_plugin($plugin, self_admin_url('plugins.php?error=true&plugin=' . $plugin), is_network_admin() );&nbsp;</div></li><li><div>          if ( is_wp_error( $result ) ) {&nbsp;</div></li><li><div>              if ( 'unexpected_output' == $result-&gt;get_error_code() ) {&nbsp;</div></li><li><div>                  $redirect = self_admin_url('plugins.php?error=true&charsout=' . strlen($result-&gt;get_error_data()) . '&plugin=' . $plugin . &quot;&plugin_status=$status&paged=$page&s=$s&quot;);&nbsp;</div></li><li><div>                  wp_redirect(add_query_arg('_error_nonce', wp_create_nonce('plugin-activation-error_' . $plugin), $redirect));&nbsp;</div></li><li><div>                  exit;&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  wp_die($result);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              $recent = (array) get_option( 'recently_activated' );&nbsp;</div></li><li><div>              unset( $recent[ $plugin ] );&nbsp;</div></li><li><div>              update_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $recent = (array) get_site_option( 'recently_activated' );&nbsp;</div></li><li><div>              unset( $recent[ $plugin ] );&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset($_GET['from']) && 'import' == $_GET['from'] ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;import.php?import=&quot; . str_replace('-importer', '', dirname($plugin))) ); <span class="comment"><span class="comment">// overrides the ?error=true one above</span> and redirects to the Imports page, stripping the -importer suffix</span>&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?activate=true&plugin_status=$status&paged=$page&s=$s&quot;) ); <span class="comment">// overrides the ?error=true one above</span>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'activate-selected':&nbsp;</div></li><li><div>          if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to activate plugins for this site.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('bulk-plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_network_admin() ) {&nbsp;</div></li><li><div>              foreach ( $plugins as $i =&gt; $plugin ) {&nbsp;</div></li><li><div>                  <span class="comment">// Only activate plugins which are not already network activated.</span>&nbsp;</div></li><li><div>                  if ( is_plugin_active_for_network( $plugin ) ) {&nbsp;</div></li><li><div>                      unset( $plugins[ $i ] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              foreach ( $plugins as $i =&gt; $plugin ) {&nbsp;</div></li><li><div>                  <span class="comment">// Only activate plugins which are not already active and are not network-only when on Multisite.</span>&nbsp;</div></li><li><div>                  if ( is_plugin_active( $plugin ) || ( is_multisite() && is_network_only_plugin( $plugin ) ) ) {&nbsp;</div></li><li><div>                      unset( $plugins[ $i ] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty($plugins) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          activate_plugins($plugins, self_admin_url('plugins.php?error=true'), is_network_admin() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              $recent = (array) get_option('recently_activated' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $recent = (array) get_site_option('recently_activated' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $plugins as $plugin ) {&nbsp;</div></li><li><div>              unset( $recent[ $plugin ] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              update_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_redirect( self_admin_url(&quot;plugins.php?activate-multi=true&plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'update-selected' :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer( 'bulk-plugins' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $_GET['plugins'] ) )&nbsp;</div></li><li><div>              $plugins = explode( ', ', $_GET['plugins'] );&nbsp;</div></li><li><div>          elseif ( isset( $_POST['checked'] ) )&nbsp;</div></li><li><div>              $plugins = (array) $_POST['checked'];&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              $plugins = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $title = __( 'Update Plugins' );&nbsp;</div></li><li><div>          $parent_file = 'plugins.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_enqueue_script( 'updates' );&nbsp;</div></li><li><div>          require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;wrap&quot;&gt;';&nbsp;</div></li><li><div>          echo '&lt;h1&gt;' . esc_html( $title ) . '&lt;/h1&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $url = self_admin_url('update.php?action=update-selected&amp;plugins=' . urlencode( join(', ', $plugins) ));&nbsp;</div></li><li><div>          $url = wp_nonce_url($url, 'bulk-update-plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo &quot;&lt;iframe src='$url' style='width: 100%; height:100%; min-height:850px;'&gt;&lt;/iframe&gt;&quot;;&nbsp;</div></li><li><div>          echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          require_once(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'error_scrape':&nbsp;</div></li><li><div>          if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to activate plugins for this site.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('plugin-activation-error_' . $plugin);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $valid = validate_plugin($plugin);&nbsp;</div></li><li><div>          if ( is_wp_error($valid) )&nbsp;</div></li><li><div>              wp_die($valid);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! WP_DEBUG ) {&nbsp;</div></li><li><div>              error_reporting( E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_ERROR | E_WARNING | E_PARSE | E_USER_ERROR | E_USER_WARNING | E_RECOVERABLE_ERROR );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          @ini_set('display_errors', true); <span class="comment">//Ensure that Fatal errors are displayed.</span>&nbsp;</div></li><li><div>          <span class="comment">// Go back to &quot;sandbox&quot; scope so we get the same errors as before</span>&nbsp;</div></li><li><div>          plugin_sandbox_scrape( $plugin );&nbsp;</div></li><li><div>          <span class="comment">/** This action is documented in wp-admin/includes/plugin.php */</span>&nbsp;</div></li><li><div>          do_action( &quot;activate_{$plugin}&quot; );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'deactivate':&nbsp;</div></li><li><div>          if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to deactivate plugins for this site.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('deactivate-plugin_' . $plugin);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() && is_plugin_active_for_network( $plugin ) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          deactivate_plugins( $plugin, false, is_network_admin() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              update_option( 'recently_activated', array( $plugin =&gt; time() ) + (array) get_option( 'recently_activated' ) );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', array( $plugin =&gt; time() ) + (array) get_site_option( 'recently_activated' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( headers_sent() )&nbsp;</div></li><li><div>              echo &quot;&lt;meta http-equiv='refresh' content='&quot; . esc_attr( &quot;0;url=plugins.php?deactivate=true&plugin_status=$status&paged=$page&s=$s&quot; ) . &quot;' /&gt;&quot;;&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?deactivate=true&plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'deactivate-selected':&nbsp;</div></li><li><div>          if ( ! current_user_can('activate_plugins') )&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to deactivate plugins for this site.'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('bulk-plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : array();&nbsp;</div></li><li><div>          <span class="comment">// Do not deactivate plugins which are already deactivated.</span>&nbsp;</div></li><li><div>          if ( is_network_admin() ) {&nbsp;</div></li><li><div>              $plugins = array_filter( $plugins, 'is_plugin_active_for_network' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $plugins = array_filter( $plugins, 'is_plugin_active' );&nbsp;</div></li><li><div>              $plugins = array_diff( $plugins, array_filter( $plugins, 'is_plugin_active_for_network' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( empty($plugins) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          deactivate_plugins( $plugins, false, is_network_admin() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $deactivated = array();&nbsp;</div></li><li><div>          foreach ( $plugins as $plugin ) {&nbsp;</div></li><li><div>              $deactivated[ $plugin ] = time();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              update_option( 'recently_activated', $deactivated + (array) get_option( 'recently_activated' ) );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', $deactivated + (array) get_site_option( 'recently_activated' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_redirect( self_admin_url(&quot;plugins.php?deactivate-multi=true&plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'delete-selected':&nbsp;</div></li><li><div>          if ( ! current_user_can('delete_plugins') ) {&nbsp;</div></li><li><div>              wp_die(__('Sorry, you are not allowed to delete plugins for this site.'));&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          check_admin_referer('bulk-plugins');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//$_POST = from the plugin form; $_GET = from the FTP details screen.</span>&nbsp;</div></li><li><div>          $plugins = isset( $_REQUEST['checked'] ) ? (array) $_REQUEST['checked'] : array();&nbsp;</div></li><li><div>          if ( empty( $plugins ) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url(&quot;plugins.php?plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $plugins = array_filter($plugins, 'is_plugin_inactive'); <span class="comment">// Do not allow to delete Activated plugins.</span>&nbsp;</div></li><li><div>          if ( empty( $plugins ) ) {&nbsp;</div></li><li><div>              wp_redirect( self_admin_url( &quot;plugins.php?error=true&main=true&plugin_status=$status&paged=$page&s=$s&quot; ) );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          include(ABSPATH . 'wp-admin/update.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $parent_file = 'plugins.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! isset($_REQUEST['verify-delete']) ) {&nbsp;</div></li><li><div>              wp_enqueue_script('jquery');&nbsp;</div></li><li><div>              require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>                  $plugin_info = array();&nbsp;</div></li><li><div>                  $have_non_network_plugins = false;&nbsp;</div></li><li><div>                  foreach ( (array) $plugins as $plugin ) {&nbsp;</div></li><li><div>                      $plugin_slug = dirname( $plugin );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( '.' == $plugin_slug ) {&nbsp;</div></li><li><div>                          if ( $data = get_plugin_data( WP_PLUGIN_DIR . '/' . $plugin ) ) {&nbsp;</div></li><li><div>                              $plugin_info[ $plugin ] = $data;&nbsp;</div></li><li><div>                              $plugin_info[ $plugin ]['is_uninstallable'] = is_uninstallable_plugin( $plugin );&nbsp;</div></li><li><div>                              if ( ! $plugin_info[ $plugin ]['Network'] ) {&nbsp;</div></li><li><div>                                  $have_non_network_plugins = true;&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          <span class="comment">// Get plugins list from that folder.</span>&nbsp;</div></li><li><div>                          if ( $folder_plugins = get_plugins( '/' . $plugin_slug ) ) {&nbsp;</div></li><li><div>                              foreach ( $folder_plugins as $plugin_file =&gt; $data ) {&nbsp;</div></li><li><div>                                  $plugin_info[ $plugin_file ] = _get_plugin_data_markup_translate( $plugin_file, $data );&nbsp;</div></li><li><div>                                  $plugin_info[ $plugin_file ]['is_uninstallable'] = is_uninstallable_plugin( $plugin );&nbsp;</div></li><li><div>                                  if ( ! $plugin_info[ $plugin_file ]['Network'] ) {&nbsp;</div></li><li><div>                                      $have_non_network_plugins = true;&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  $plugins_to_delete = count( $plugin_info );&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;?php if ( 1 == $plugins_to_delete ) : ?&gt;&nbsp;</div></li><li><div>                  &lt;h1&gt;&lt;?php _e( 'Delete Plugin' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>                  &lt;?php if ( $have_non_network_plugins && is_network_admin() ) : ?&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;error&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;?php _e( 'Caution:' ); ?&gt;&lt;/strong&gt; &lt;?php _e( 'This plugin may be active on other sites in the network.' ); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&lt;?php _e( 'You are about to remove the following plugin:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php else: ?&gt;&nbsp;</div></li><li><div>                  &lt;h1&gt;&lt;?php _e( 'Delete Plugins' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>                  &lt;?php if ( $have_non_network_plugins && is_network_admin() ) : ?&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;error&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;?php _e( 'Caution:' ); ?&gt;&lt;/strong&gt; &lt;?php _e( 'These plugins may be active on other sites in the network.' ); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&lt;?php _e( 'You are about to remove the following plugins:' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                  &lt;ul class=&quot;ul-disc&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      $data_to_delete = false;&nbsp;</div></li><li><div>                      foreach ( $plugin_info as $plugin ) {&nbsp;</div></li><li><div>                          if ( $plugin['is_uninstallable'] ) {&nbsp;</div></li><li><div>                              <span class="comment"><span class="comment">/** translators: 1: plugin name, 2: plugin author */</span></span>&nbsp;</div></li><li><div>                              echo '&lt;li&gt;', sprintf( __( '%1$s by %2$s (will also &lt;strong&gt;delete its data&lt;/strong&gt;)' ), '&lt;strong&gt;' . $plugin['Name'] . '&lt;/strong&gt;', '&lt;em&gt;' . $plugin['AuthorName'] . '&lt;/em&gt;' ), '&lt;/li&gt;';&nbsp;</div></li><li><div>                              $data_to_delete = true;&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              <span class="comment"><span class="comment">/** translators: 1: plugin name, 2: plugin author */</span></span>&nbsp;</div></li><li><div>                              echo '&lt;li&gt;', sprintf( _x('%1$s by %2$s', 'plugin' ), '&lt;strong&gt;' . $plugin['Name'] . '&lt;/strong&gt;', '&lt;em&gt;' . $plugin['AuthorName'] ) . '&lt;/em&gt;', '&lt;/li&gt;';&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                  &lt;/ul&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&lt;?php&nbsp;</div></li><li><div>              if ( $data_to_delete )&nbsp;</div></li><li><div>                  _e('Are you sure you wish to delete these files and data?');&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  _e('Are you sure you wish to delete these files?');&nbsp;</div></li><li><div>              ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo esc_url($_SERVER['REQUEST_URI']); ?&gt;&quot; style=&quot;display:inline;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;verify-delete&quot; value=&quot;1&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;delete-selected&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                      foreach ( (array) $plugins as $plugin ) {&nbsp;</div></li><li><div>                          echo '&lt;input type=&quot;hidden&quot; name=&quot;checked[]&quot; value=&quot;' . esc_attr( $plugin ) . '&quot; /&gt;';&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field('bulk-plugins') ?&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( $data_to_delete ? __( 'Yes, delete these files and data' ) : __( 'Yes, delete these files' ), '', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/form&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              $referer = wp_get_referer();&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $referer ? esc_url( $referer ) : ''; ?&gt;&quot; style=&quot;display:inline;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'No, return me to the plugin list' ), '', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/form&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              require_once(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $plugins_to_delete = count( $plugins );&nbsp;</div></li><li><div>          } <span class="comment">// endif verify-delete</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $delete_result = delete_plugins( $plugins );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          set_transient('plugins_delete_result_' . $user_ID, $delete_result); <span class="comment">//Store the result in a cache rather than a URL param due to object type & length</span>&nbsp;</div></li><li><div>          wp_redirect( self_admin_url(&quot;plugins.php?deleted=$plugins_to_delete&plugin_status=$status&paged=$page&s=$s&quot;) );&nbsp;</div></li><li><div>          exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'clear-recent-list':&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              update_option( 'recently_activated', array() );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', array() );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      default:&nbsp;</div></li><li><div>          if ( isset( $_POST['checked'] ) ) {&nbsp;</div></li><li><div>              check_admin_referer('bulk-plugins');&nbsp;</div></li><li><div>              $plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : array();&nbsp;</div></li><li><div>              $sendback = wp_get_referer();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/** This action is documented in wp-admin/edit-comments.php */</span>&nbsp;</div></li><li><div>              $sendback = apply_filters( 'handle_bulk_actions-' . get_current_screen()-&gt;id, $sendback, $action, $plugins );&nbsp;</div></li><li><div>              wp_safe_redirect( $sendback );&nbsp;</div></li><li><div>              exit;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$wp_list_table-&gt;prepare_items();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_script('plugin-install');&nbsp;</div></li><li><div>add_thickbox();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_screen_option( 'per_page', array( 'default' =&gt; 999 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'overview', &nbsp;</div></li><li><div>'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Plugins extend and expand the functionality of WordPress. Once a plugin is installed, you may activate it or deactivate it here.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __( 'The search for installed plugins will search for terms in their name, description, or author.' ) . ' &lt;span id=&quot;live-search-desc&quot; class=&quot;hide-if-no-js&quot;&gt;' . __( 'The search results will be updated as you type.' ) . '&lt;/span&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . sprintf(&nbsp;</div></li><li><div>      <span class="comment">/** translators: %s: WordPress Plugin Directory URL */</span>&nbsp;</div></li><li><div>      __( 'If you would like to see more plugins to choose from, click on the &#8220;Add New&#8221; button and you will be able to browse or search for additional plugins from the &lt;a href=&quot;%s&quot;&gt;WordPress Plugin Directory&lt;/a&gt;. Plugins in the WordPress Plugin Directory are designed and developed by third parties, and are compatible with the license WordPress uses. Oh, and they&#8217;re free!' ), &nbsp;</div></li><li><div>      __( 'https:<span class="comment">//wordpress.org/plugins/' )</span>&nbsp;</div></li><li><div> ) . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'compatibility-problems', &nbsp;</div></li><li><div>'title' =&gt; __('Troubleshooting'), &nbsp;</div></li><li><div>'content' =&gt;&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('Most of the time, plugins play nicely with the core of WordPress and with other plugins. Sometimes, though, a plugin&#8217;s code will get in the way of another plugin, causing compatibility issues. If your site starts doing strange things, this may be the problem. Try deactivating all your plugins and re-activating them in various combinations until you isolate which one(s) caused the issue.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . sprintf(&nbsp;</div></li><li><div>      <span class="comment">/** translators: WP_PLUGIN_DIR constant value */</span>&nbsp;</div></li><li><div>      __( 'If something goes wrong with a plugin and you can&#8217;t use WordPress, delete or rename that file in the %s directory and it will be automatically deactivated.' ), &nbsp;</div></li><li><div>      '&lt;code&gt;' . WP_PLUGIN_DIR . '&lt;/code&gt;'&nbsp;</div></li><li><div> ) . '&lt;/p&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Managing_Plugins#Plugin_Management&quot;&gt;Documentation on Managing Plugins&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;') . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_screen_reader_content( array(&nbsp;</div></li><li><div>  'heading_views' =&gt; __( 'Filter plugins list' ), &nbsp;</div></li><li><div>  'heading_pagination' =&gt; __( 'Plugins list navigation' ), &nbsp;</div></li><li><div>  'heading_list' =&gt; __( 'Plugins list' ), &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = __('Plugins');&nbsp;</div></li><li><div>$parent_file = 'plugins.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>require_once(ABSPATH . 'wp-admin/admin-header.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$invalid = validate_active_plugins();&nbsp;</div></li><li><div>if ( ! empty( $invalid ) ) {&nbsp;</div></li><li><div>  foreach ( $invalid as $plugin_file =&gt; $error ) {&nbsp;</div></li><li><div>      echo '&lt;div id=&quot;message&quot; class=&quot;error&quot;&gt;&lt;p&gt;';&nbsp;</div></li><li><div>      printf(&nbsp;</div></li><li><div>          <span class="comment">/** translators: 1: plugin file 2: error message */</span>&nbsp;</div></li><li><div>          __( 'The plugin %1$s has been &lt;strong&gt;deactivated&lt;/strong&gt; due to an error: %2$s' ), &nbsp;</div></li><li><div>          '&lt;code&gt;' . esc_html( $plugin_file ) . '&lt;/code&gt;', &nbsp;</div></li><li><div>          $error-&gt;get_error_message() );&nbsp;</div></li><li><div>      echo '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( isset($_GET['error']) ) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_GET['main'] ) )&nbsp;</div></li><li><div>      $errmsg = __( 'You cannot delete a plugin while it is active on the main site.' );&nbsp;</div></li><li><div>  elseif ( isset($_GET['charsout']) )&nbsp;</div></li><li><div>      $errmsg = sprintf(__('The plugin generated %d characters of &lt;strong&gt;unexpected output&lt;/strong&gt; during activation. If you notice &#8220;headers already sent&#8221; messages, problems with syndication feeds or other issues, try deactivating or removing this plugin.'), $_GET['charsout']);&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $errmsg = __('Plugin could not be activated because it triggered a &lt;strong&gt;fatal error&lt;/strong&gt;.');&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;error&quot;&gt;&lt;p&gt;&lt;?php echo $errmsg; ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>      if ( ! isset( $_GET['main'] ) && ! isset( $_GET['charsout'] ) && wp_verify_nonce( $_GET['_error_nonce'], 'plugin-activation-error_' . $plugin ) ) {&nbsp;</div></li><li><div>          $iframe_url = add_query_arg( array(&nbsp;</div></li><li><div>              'action' =&gt; 'error_scrape', &nbsp;</div></li><li><div>              'plugin' =&gt; urlencode( $plugin ), &nbsp;</div></li><li><div>              '_wpnonce' =&gt; urlencode( $_GET['_error_nonce'] ), &nbsp;</div></li><li><div> ), admin_url( 'plugins.php' ) );&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;iframe style=&quot;border:0&quot; width=&quot;100%&quot; height=&quot;70px&quot; src=&quot;&lt;?php echo esc_url( $iframe_url ); ?&gt;&quot;&gt;&lt;/iframe&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( isset($_GET['deleted']) ) :&nbsp;</div></li><li><div>      $delete_result = get_transient( 'plugins_delete_result_' . $user_ID );&nbsp;</div></li><li><div>      <span class="comment">// Delete it once we're done.</span>&nbsp;</div></li><li><div>      delete_transient( 'plugins_delete_result_' . $user_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_wp_error($delete_result) ) : ?&gt;&nbsp;</div></li><li><div>      &lt;div id=&quot;message&quot; class=&quot;error notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php printf( __('Plugin could not be deleted due to an error: %s'), $delete_result-&gt;get_error_message() ); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php else : ?&gt;&nbsp;</div></li><li><div>      &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              if ( 1 == (int) $_GET['deleted'] ) {&nbsp;</div></li><li><div>                  _e( 'The selected plugin has been &lt;strong&gt;deleted&lt;/strong&gt;.' );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  _e( 'The selected plugins have been &lt;strong&gt;deleted&lt;/strong&gt;.' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( isset($_GET['activate']) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php _e('Plugin &lt;strong&gt;activated&lt;/strong&gt;.') ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php elseif (isset($_GET['activate-multi'])) : ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php _e('Selected plugins &lt;strong&gt;activated&lt;/strong&gt;.'); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( isset($_GET['deactivate']) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php _e('Plugin &lt;strong&gt;deactivated&lt;/strong&gt;.') ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php elseif (isset($_GET['deactivate-multi'])) : ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php _e('Selected plugins &lt;strong&gt;deactivated&lt;/strong&gt;.'); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php elseif ( 'update-selected' == $action ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php _e('All selected plugins are up to date.'); ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1&gt;&lt;?php echo esc_html( $title );&nbsp;</div></li><li><div>if ( ( ! is_multisite() || is_network_admin() ) && current_user_can('install_plugins') ) { ?&gt;&nbsp;</div></li><li><div> &lt;a href=&quot;&lt;?php echo self_admin_url( 'plugin-install.php' ); ?&gt;&quot; class=&quot;page-title-action&quot;&gt;&lt;?php echo esc_html_x('Add New', 'plugin'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( strlen( $s ) ) {&nbsp;</div></li><li><div>  <span class="comment">/** translators: %s: search keywords */</span>&nbsp;</div></li><li><div>  printf( '&lt;span class=&quot;subtitle&quot;&gt;' . __( 'Search results for &#8220;%s&#8221;' ) . '&lt;/span&gt;', esc_html( urldecode( $s ) ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires before the plugins list table is rendered.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This hook also fires before the plugins list table is rendered in the Network Admin.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Please note: The 'active' portion of the hook name does not refer to whether the current</span>&nbsp;</div></li><li><div><span class="comment"> * view is for active plugins, but rather all plugins actively-installed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $plugins_all An array containing all installed plugins.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'pre_current_active_plugins', $plugins['all'] );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;views(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;form class=&quot;search-form search-plugins&quot; method=&quot;get&quot;&gt;&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;search_box( __( 'Search Installed Plugins' ), 'plugin' ); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; id=&quot;bulk-action-form&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;plugin_status&quot; value=&quot;&lt;?php echo esc_attr($status) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;input type=&quot;hidden&quot; name=&quot;paged&quot; value=&quot;&lt;?php echo esc_attr($page) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php $wp_list_table-&gt;display(); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>wp_print_request_filesystem_credentials_modal();&nbsp;</div></li><li><div>wp_print_admin_notice_templates();&nbsp;</div></li><li><div>wp_print_update_row_templates();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>include(ABSPATH . 'wp-admin/admin-footer.php');&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>