<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7" data-type="file" data-id="4719"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-includes-comment-template | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=e3bb5e39da3cc4fbda88ee4f0212b435' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-includes-comment-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-comment-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-includes-comment-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7-file-wp-includes-comment-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-includes-comment-template" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7." href="http://hookr.io/4.7/" class="H_VERSION"><span property="name">4.7</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-includes-comment-template</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6307"><a href="http://hookr.io/4.7/all/" title="All">All <span class="count badge">6307</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2851"><a href="http://hookr.io/4.7/functions/" title="Functions">Functions <span class="count badge">2851</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-includes/comment-template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Comment template functions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * These functions are meant to live inside of the WordPress loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Template</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If the comment has an empty comment_author field, then 'Anonymous' person is</span>&nbsp;</div></li><li><div><span class="comment"> * assumed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to retrieve the author.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The comment author</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $comment-&gt;comment_author ) ) {&nbsp;</div></li><li><div>      if ( $comment-&gt;user_id && $user = get_userdata( $comment-&gt;user_id ) )&nbsp;</div></li><li><div>          $author = $user-&gt;display_name;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $author = __('Anonymous');&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $author = $comment-&gt;comment_author;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment author name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $author     The comment author's username.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment    The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author', $author, $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to print the author.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $author = get_comment_author( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's name for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $author     The comment author's username.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'comment_author', $author, $comment-&gt;comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the email of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to get the author's email.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The current comment author's email</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_email( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's returned email address.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_author_email The comment author's email address.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID           The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment              The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author_email', $comment-&gt;comment_author_email, $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the email of the author of the current global $comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Care should be taken to protect the email address and assure that email</span>&nbsp;</div></li><li><div><span class="comment"> * harvesters do not capture your commentors' email address. Most assume that</span>&nbsp;</div></li><li><div><span class="comment"> * their email address will not appear in raw form on the site. Doing so will</span>&nbsp;</div></li><li><div><span class="comment"> * enable anyone, including those that people don't want to get the email</span>&nbsp;</div></li><li><div><span class="comment"> * address and use it for their own means good and bad.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to print the author's email.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_email( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $author_email = get_comment_author_email( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's email for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $author_email The comment author's email address.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $comment_ID   The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'author_email', $author_email, $comment-&gt;comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the html email link to the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Care should be taken to protect the email address and assure that email</span>&nbsp;</div></li><li><div><span class="comment"> * harvesters do not capture your commentors' email address. Most assume that</span>&nbsp;</div></li><li><div><span class="comment"> * their email address will not appear in raw form on the site. Doing so will</span>&nbsp;</div></li><li><div><span class="comment"> * enable anyone, including those that people don't want to get the email</span>&nbsp;</div></li><li><div><span class="comment"> * address and use it for their own means good and bad.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Added the `$comment` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $linktext Optional. Text to display instead of the comment author's email address.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $before   Optional. Text or HTML to display before the email link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $after    Optional. Text or HTML to display after the email link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment  Optional. Comment ID or WP_Comment object. Default is the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_email_link( $linktext = '', $before = '', $after = '', $comment = null ) {&nbsp;</div></li><li><div>  if ( $link = get_comment_author_email_link( $linktext, $before, $after, $comment ) ) {&nbsp;</div></li><li><div>      echo $link;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the html email link to the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Care should be taken to protect the email address and assure that email</span>&nbsp;</div></li><li><div><span class="comment"> * harvesters do not capture your commentors' email address. Most assume that</span>&nbsp;</div></li><li><div><span class="comment"> * their email address will not appear in raw form on the site. Doing so will</span>&nbsp;</div></li><li><div><span class="comment"> * enable anyone, including those that people don't want to get the email</span>&nbsp;</div></li><li><div><span class="comment"> * address and use it for their own means good and bad.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Added the `$comment` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $linktext Optional. Text to display instead of the comment author's email address.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $before   Optional. Text or HTML to display before the email link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $after    Optional. Text or HTML to display after the email link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment  Optional. Comment ID or WP_Comment object. Default is the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string HTML markup for the comment author email link. By default, the email address is obfuscated</span>&nbsp;</div></li><li><div><span class="comment"> *                via the {@see 'comment_email'} filter with antispambot().</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_email_link( $linktext = '', $before = '', $after = '', $comment = null ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's email for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Care should be taken to protect the email address and assure that email</span>&nbsp;</div></li><li><div><span class="comment">   * harvesters do not capture your commenter's email address.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_author_email The comment author's email address.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment              The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $email = apply_filters( 'comment_email', $comment-&gt;comment_author_email, $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ((!empty($email)) && ($email != '@')) {&nbsp;</div></li><li><div>  $display = ($linktext != '') ? $linktext : $email;&nbsp;</div></li><li><div>      $return = $before;&nbsp;</div></li><li><div>      $return .= sprintf( '&lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;', esc_url( 'mailto:' . $email ), esc_html( $display ) );&nbsp;</div></li><li><div>       $return .= $after;&nbsp;</div></li><li><div>      return $return;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the HTML link to the URL of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Both get_comment_author_url() and get_comment_author() rely on get_comment(), </span>&nbsp;</div></li><li><div><span class="comment"> * which falls back to the global comment variable if the $comment_ID argument is empty.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to get the author's link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The comment author name or HTML link for author's URL.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_link( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $url = get_comment_author_url( $comment );&nbsp;</div></li><li><div>  $author = get_comment_author( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $url ) || 'http:<span class="comment">//' == $url )</span>&nbsp;</div></li><li><div>      $return = $author;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $return = &quot;&lt;a href='$url' rel='external nofollow' class='url'&gt;$author&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's link for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$author` and `$comment_ID` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $return     The HTML-formatted comment author link.</span>&nbsp;</div></li><li><div><span class="comment">   *                           Empty for an invalid URL.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $author     The comment author's username.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author_link', $return, $author, $comment-&gt;comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the html link to the url of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to print the author's link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_link( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  echo get_comment_author_link( $comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the IP address of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to get the author's IP address.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Comment author's IP address.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_IP( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's returned IP address.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_author_IP The comment author's IP address.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID        The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment           The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author_IP', $comment-&gt;comment_author_IP, $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the IP address of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to print the author's IP address.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_IP( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  echo esc_html( get_comment_author_IP( $comment_ID ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the url of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to get the author's URL.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Comment author URL.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_url( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $url = '';&nbsp;</div></li><li><div>  $id = 0;&nbsp;</div></li><li><div>  if ( ! empty( $comment ) ) {&nbsp;</div></li><li><div>      $author_url = ( 'http:<span class="comment">//' == $comment-&gt;comment_author_url ) ? '' : $comment-&gt;comment_author_url;</span>&nbsp;</div></li><li><div>      $url = esc_url( $author_url, array( 'http', 'https' ) );&nbsp;</div></li><li><div>      $id = $comment-&gt;ID;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's URL.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $url        The comment author's URL.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment    The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author_url', $url, $id, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the url of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or the ID of the comment for which to print the author's URL.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_url( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $author_url = get_comment_author_url( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's URL for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $author_url The comment author's URL.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'comment_url', $author_url, $comment-&gt;comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieves the HTML link of the url of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * $linktext parameter is only used if the URL does not exist for the comment</span>&nbsp;</div></li><li><div><span class="comment"> * author. If the URL does exist then the URL will be used and the $linktext</span>&nbsp;</div></li><li><div><span class="comment"> * will be ignored.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Encapsulate the HTML link between the $before and $after. So it will appear</span>&nbsp;</div></li><li><div><span class="comment"> * in the order of $before, link, and finally $after.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Added the `$comment` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $linktext Optional. The text to display instead of the comment</span>&nbsp;</div></li><li><div><span class="comment"> *                                 author's email address. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $before   Optional. The text or HTML to display before the email link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $after    Optional. The text or HTML to display after the email link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment  Optional. Comment ID or WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default is the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The HTML link between the $before and $after parameters.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_author_url_link( $linktext = '', $before = '', $after = '', $comment = 0 ) {&nbsp;</div></li><li><div>  $url = get_comment_author_url( $comment );&nbsp;</div></li><li><div>  $display = ($linktext != '') ? $linktext : $url;&nbsp;</div></li><li><div>  $display = str_replace( 'http:<span class="comment">//www.', '', $display );</span>&nbsp;</div></li><li><div>  $display = str_replace( 'http:<span class="comment">//', '', $display );</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '/' == substr($display, -1) ) {&nbsp;</div></li><li><div>      $display = substr($display, 0, -1);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = &quot;$before&lt;a href='$url' rel='external'&gt;$display&lt;/a&gt;$after&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment author's returned URL link.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $return The HTML-formatted comment author URL link.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_author_url_link', $return );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the HTML link of the url of the author of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Added the `$comment` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $linktext Optional. Text to display instead of the comment author's</span>&nbsp;</div></li><li><div><span class="comment"> *                                 email address. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $before   Optional. Text or HTML to display before the email link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $after    Optional. Text or HTML to display after the email link.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment  Optional. Comment ID or WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default is the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_author_url_link( $linktext = '', $before = '', $after = '', $comment = 0 ) {&nbsp;</div></li><li><div>  echo get_comment_author_url_link( $linktext, $before, $after, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generates semantic classes for each comment element.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array   $class    Optional. One or more classes to add to the class list.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment  Comment ID or WP_Comment object. Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post    $post_id  Post ID or WP_Post object. Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool           $echo     Optional. Whether to cho or return the output.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string If `$echo` is false, the class will be returned. Void otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_class( $class = '', $comment = null, $post_id = null, $echo = true ) {&nbsp;</div></li><li><div>  <span class="comment">// Separates classes with a single space, collates classes for comment DIV</span>&nbsp;</div></li><li><div>  $class = 'class=&quot;' . join( ' ', get_comment_class( $class, $comment, $post_id ) ) . '&quot;';&nbsp;</div></li><li><div>  if ( $echo)&nbsp;</div></li><li><div>      echo $class;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      return $class;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Returns the classes for the comment div as an array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_id` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $comment_alt</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $comment_depth</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $comment_thread_alt</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array   $class      Optional. One or more classes to add to the class list. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_id Comment ID or WP_Comment object. Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post    $post_id    Post ID or WP_Post object. Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array An array of classes.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_class( $class = '', $comment_id = null, $post_id = null ) {&nbsp;</div></li><li><div>  global $comment_alt, $comment_depth, $comment_thread_alt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment = get_comment( $comment_id );&nbsp;</div></li><li><div>  if ( ! $comment ) {&nbsp;</div></li><li><div>      return $classes;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the comment type (comment, trackback), </span>&nbsp;</div></li><li><div>  $classes[] = ( empty( $comment-&gt;comment_type ) ) ? 'comment' : $comment-&gt;comment_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add classes for comment authors that are registered users.</span>&nbsp;</div></li><li><div>  if ( $comment-&gt;user_id &gt; 0 && $user = get_userdata( $comment-&gt;user_id ) ) {&nbsp;</div></li><li><div>      $classes[] = 'byuser';&nbsp;</div></li><li><div>      $classes[] = 'comment-author-' . sanitize_html_class( $user-&gt;user_nicename, $comment-&gt;user_id );&nbsp;</div></li><li><div>      <span class="comment">// For comment authors who are the author of the post</span>&nbsp;</div></li><li><div>      if ( $post = get_post($post_id) ) {&nbsp;</div></li><li><div>          if ( $comment-&gt;user_id === $post-&gt;post_author ) {&nbsp;</div></li><li><div>              $classes[] = 'bypostauthor';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($comment_alt) )&nbsp;</div></li><li><div>      $comment_alt = 0;&nbsp;</div></li><li><div>  if ( empty($comment_depth) )&nbsp;</div></li><li><div>      $comment_depth = 1;&nbsp;</div></li><li><div>  if ( empty($comment_thread_alt) )&nbsp;</div></li><li><div>      $comment_thread_alt = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $comment_alt % 2 ) {&nbsp;</div></li><li><div>      $classes[] = 'odd';&nbsp;</div></li><li><div>      $classes[] = 'alt';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $classes[] = 'even';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment_alt++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Alt for top-level comments</span>&nbsp;</div></li><li><div>  if ( 1 == $comment_depth ) {&nbsp;</div></li><li><div>      if ( $comment_thread_alt % 2 ) {&nbsp;</div></li><li><div>          $classes[] = 'thread-odd';&nbsp;</div></li><li><div>          $classes[] = 'thread-alt';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $classes[] = 'thread-even';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $comment_thread_alt++;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes[] = &quot;depth-$comment_depth&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty($class) ) {&nbsp;</div></li><li><div>      if ( !is_array( $class ) )&nbsp;</div></li><li><div>          $class = preg_split('#\s+#', $class);&nbsp;</div></li><li><div>      $classes = array_merge($classes, $class);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes = array_map('esc_attr', $classes);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned CSS classes for the current comment.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array       $classes    An array of comment classes.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string      $class      A comma-separated list of additional classes added to the list.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int         $comment_id The comment id.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment  $comment    The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int|WP_Post $post_id    The post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'comment_class', $classes, $class, $comment-&gt;comment_ID, $comment, $post_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the comment date of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string          $d          Optional. The format of the date. Default user's setting.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment  $comment_ID WP_Comment or ID of the comment for which to get the date.</span>&nbsp;</div></li><li><div><span class="comment"> *                                    Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The comment's date.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_date( $d = '', $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  if ( '' == $d )&nbsp;</div></li><li><div>      $date = mysql2date(get_option('date_format'), $comment-&gt;comment_date);&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $date = mysql2date($d, $comment-&gt;comment_date);&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment date.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|int $date    Formatted date string or Unix timestamp.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $d       The format of the date.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_date', $date, $d, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the comment date of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string         $d          Optional. The format of the date. Default user's settings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID WP_Comment or ID of the comment for which to print the date.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_date( $d = '', $comment_ID = 0 ) {&nbsp;</div></li><li><div>  echo get_comment_date( $d, $comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the excerpt of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will cut each word and only output the first 20 words with '&hellip;' at the end.</span>&nbsp;</div></li><li><div><span class="comment"> * If the word count is less than 20, then no truncating is done and no '&hellip;'</span>&nbsp;</div></li><li><div><span class="comment"> * will appear.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID  WP_Comment or ID of the comment for which to get the excerpt.</span>&nbsp;</div></li><li><div><span class="comment"> *                                    Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The maybe truncated comment with 20 words or less.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_excerpt( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $comment_text = strip_tags( str_replace( array( &quot;\n&quot;, &quot;\r&quot; ), ' ', $comment-&gt;comment_content ) );&nbsp;</div></li><li><div>  $words = explode( ' ', $comment_text );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the amount of words used in the comment excerpt.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $comment_excerpt_length The amount of words you want to display in the comment excerpt.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $comment_excerpt_length = apply_filters( 'comment_excerpt_length', 20 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $use_ellipsis = count( $words ) &gt; $comment_excerpt_length;&nbsp;</div></li><li><div>  if ( $use_ellipsis ) {&nbsp;</div></li><li><div>      $words = array_slice( $words, 0, $comment_excerpt_length );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $excerpt = trim( join( ' ', $words ) );&nbsp;</div></li><li><div>  if ( $use_ellipsis ) {&nbsp;</div></li><li><div>      $excerpt .= '&hellip;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the retrieved comment excerpt.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $excerpt    The comment excerpt text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment    The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_excerpt', $excerpt, $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the excerpt of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID  WP_Comment or ID of the comment for which to print the excerpt.</span>&nbsp;</div></li><li><div><span class="comment"> *                                    Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_excerpt( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  $comment_excerpt = get_comment_excerpt( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment excerpt for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $comment_excerpt The comment excerpt text.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $comment_ID      The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'comment_excerpt', $comment_excerpt, $comment-&gt;comment_ID );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the comment id of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int The comment ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_ID() {&nbsp;</div></li><li><div>  $comment = get_comment();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` parameter was added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $comment_ID The current comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment    The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_ID', $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the comment id of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_ID() {&nbsp;</div></li><li><div>  echo get_comment_ID();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the link to a given comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment` to also accept a WP_Comment object. Added `$cpage` argument.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_page_of_comment()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Rewrite $wp_rewrite</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool       $in_comment_loop</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param WP_Comment|int|null $comment Comment to retrieve. Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array               $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     An array of optional arguments to override the defaults.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string     $type      Passed to get_page_of_comment().</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int        $page      Current page of comments, for calculating comment pagination.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int        $per_page  Per-page value for comment pagination.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int        $max_depth Passed to get_page_of_comment().</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int|string $cpage     Value to use for the comment's &quot;comment-page&quot; or &quot;cpage&quot; value.</span>&nbsp;</div></li><li><div><span class="comment"> *                                 If provided, this value overrides any value calculated from `$page`</span>&nbsp;</div></li><li><div><span class="comment"> *                                 and `$per_page`.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The permalink to the given comment.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_link( $comment = null, $args = array() ) {&nbsp;</div></li><li><div>  global $wp_rewrite, $in_comment_loop;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment = get_comment($comment);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Back-compat.</span>&nbsp;</div></li><li><div>  if ( ! is_array( $args ) ) {&nbsp;</div></li><li><div>      $args = array( 'page' =&gt; $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'type' =&gt; 'all', &nbsp;</div></li><li><div>      'page' =&gt; '', &nbsp;</div></li><li><div>      'per_page' =&gt; '', &nbsp;</div></li><li><div>      'max_depth' =&gt; '', &nbsp;</div></li><li><div>      'cpage' =&gt; null, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  $args = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $link = get_permalink( $comment-&gt;comment_post_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// The 'cpage' param takes precedence.</span>&nbsp;</div></li><li><div>  if ( ! is_null( $args['cpage'] ) ) {&nbsp;</div></li><li><div>      $cpage = $args['cpage'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// No 'cpage' is provided, so we calculate one.</span>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( '' === $args['per_page'] && get_option( 'page_comments' ) ) {&nbsp;</div></li><li><div>          $args['per_page'] = get_option('comments_per_page');&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $args['per_page'] ) ) {&nbsp;</div></li><li><div>          $args['per_page'] = 0;&nbsp;</div></li><li><div>          $args['page'] = 0;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $cpage = $args['page'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( '' == $cpage ) {&nbsp;</div></li><li><div>          if ( ! empty( $in_comment_loop ) ) {&nbsp;</div></li><li><div>              $cpage = get_query_var( 'cpage' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              <span class="comment">// Requires a database hit, so we only do it when we can't figure out from context.</span>&nbsp;</div></li><li><div>              $cpage = get_page_of_comment( $comment-&gt;comment_ID, $args );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * If the default page displays the oldest comments, the permalinks for comments on the default page</span>&nbsp;</div></li><li><div><span class="comment">       * do not need a 'cpage' query var.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      if ( 'oldest' === get_option( 'default_comments_page' ) && 1 === $cpage ) {&nbsp;</div></li><li><div>          $cpage = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $cpage && get_option( 'page_comments' ) ) {&nbsp;</div></li><li><div>      if ( $wp_rewrite-&gt;using_permalinks() ) {&nbsp;</div></li><li><div>          if ( $cpage ) {&nbsp;</div></li><li><div>              $link = trailingslashit( $link ) . $wp_rewrite-&gt;comments_pagination_base . '-' . $cpage;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $link = user_trailingslashit( $link, 'comment' );&nbsp;</div></li><li><div>      } elseif ( $cpage ) {&nbsp;</div></li><li><div>          $link = add_query_arg( 'cpage', $cpage, $link );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $wp_rewrite-&gt;using_permalinks() ) {&nbsp;</div></li><li><div>      $link = user_trailingslashit( $link, 'comment' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $link = $link . '#comment-' . $comment-&gt;comment_ID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned single comment permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.4.0 Added the `$cpage` parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see get_page_of_comment()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $link    The comment permalink with '#comment-$id' appended.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment The current comment object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array      $args    An array of arguments to override the defaults.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int        $cpage   The calculated 'cpage' value.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_link', $link, $comment, $args, $cpage );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieves the link to the current post comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post_id Optional. Post ID or WP_Post object. Default is global $post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The link to the comments.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comments_link( $post_id = 0 ) {&nbsp;</div></li><li><div>  $hash = get_comments_number( $post_id ) ? '#comments' : '#respond';&nbsp;</div></li><li><div>  $comments_link = get_permalink( $post_id ) . $hash;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned post comments permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string      $comments_link Post comments permalink with '#comments' appended.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int|WP_Post $post_id       Post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comments_link', $comments_link, $post_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the link to the current post comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $deprecated   Not Used.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $deprecated_2 Not Used.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comments_link( $deprecated = '', $deprecated_2 = '' ) {&nbsp;</div></li><li><div>  if ( !empty( $deprecated ) )&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '0.72' );&nbsp;</div></li><li><div>  if ( !empty( $deprecated_2 ) )&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '1.3.0' );&nbsp;</div></li><li><div>  echo esc_url( get_comments_link() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the amount of comments a post has.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post_id Optional. Post ID or WP_Post object. Default is global $post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int The number of comments a post has.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comments_number( $post_id = 0 ) {&nbsp;</div></li><li><div>  $post = get_post( $post_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $post ) {&nbsp;</div></li><li><div>      $count = 0;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $count = $post-&gt;comment_count;&nbsp;</div></li><li><div>      $post_id = $post-&gt;ID;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment count for a post.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $count   Number of comments a post has.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $post_id Post ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comments_number', $count, $post_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the language string for the number of comments the current post has.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $zero       Optional. Text for no comments. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $one        Optional. Text for one comment. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $more       Optional. Text for more than one comment. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $deprecated Not used.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comments_number( $zero = false, $one = false, $more = false, $deprecated = '' ) {&nbsp;</div></li><li><div>  if ( ! empty( $deprecated ) ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '1.3.0' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo get_comments_number_text( $zero, $one, $more );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the language string for the number of comments the current post has.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $zero Optional. Text for no comments. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $one  Optional. Text for one comment. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $more Optional. Text for more than one comment. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comments_number_text( $zero = false, $one = false, $more = false ) {&nbsp;</div></li><li><div>  $number = get_comments_number();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $number &gt; 1 ) {&nbsp;</div></li><li><div>      if ( false === $more ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">/** translators: %s: number of comments */</span></span>&nbsp;</div></li><li><div>          $output = sprintf( _n( '%s Comment', '%s Comments', $number ), number_format_i18n( $number ) );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// % Comments</span>&nbsp;</div></li><li><div>          <span class="comment">/** translators: If comment number in your language requires declension, </span>&nbsp;</div></li><li><div><span class="comment">           * translate this to 'on'. Do not translate into your own language.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          if ( 'on' === _x( 'off', 'Comment number declension: on or off' ) ) {&nbsp;</div></li><li><div>              $text = preg_replace( '#&lt;span class=&quot;screen-reader-text&quot;&gt;.+?&lt;/span&gt;#', '', $more );&nbsp;</div></li><li><div>              $text = preg_replace( '/&.+?;/', '', $text ); <span class="comment">// Kill entities</span>&nbsp;</div></li><li><div>              $text = trim( strip_tags( $text ), '% ' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Replace '% Comments' with a proper plural form</span>&nbsp;</div></li><li><div>              if ( $text && ! preg_match( '/[0-9]+/', $text ) && false !== strpos( $more, '%' ) ) {&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">/** translators: %s: number of comments */</span></span>&nbsp;</div></li><li><div>                  $new_text = _n( '%s Comment', '%s Comments', $number );&nbsp;</div></li><li><div>                  $new_text = trim( sprintf( $new_text, '' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $more = str_replace( $text, $new_text, $more );&nbsp;</div></li><li><div>                  if ( false === strpos( $more, '%' ) ) {&nbsp;</div></li><li><div>                      $more = '% ' . $more;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $output = str_replace( '%', number_format_i18n( $number ), $more );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( $number == 0 ) {&nbsp;</div></li><li><div>      $output = ( false === $zero ) ? __( 'No Comments' ) : $zero;&nbsp;</div></li><li><div>  } else { <span class="comment">// must be one</span>&nbsp;</div></li><li><div>      $output = ( false === $one ) ? __( '1 Comment' ) : $one;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comments count for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see _n()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $output A translatable string formatted based on whether the count</span>&nbsp;</div></li><li><div><span class="comment">   *                       is equal to 0, 1, or 1+.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $number The number of post comments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'comments_number', $output, $number );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the text of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see Walker_Comment::comment()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment  $comment_ID WP_Comment or ID of the comment for which to get the text.</span>&nbsp;</div></li><li><div><span class="comment"> *                                    Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array           $args       Optional. An array of arguments. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The comment content.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_text( $comment_ID = 0, $args = array() ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the text of a comment.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see Walker_Comment::comment()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_content Text of the comment.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment         The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array      $args            An array of arguments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_text', $comment-&gt;comment_content, $comment, $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the text of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see Walker_Comment::comment()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment  $comment_ID WP_Comment or ID of the comment for which to print the text.</span>&nbsp;</div></li><li><div><span class="comment"> *                                    Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array           $args       Optional. An array of arguments. Default empty array. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_text( $comment_ID = 0, $args = array() ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment_text = get_comment_text( $comment, $args );&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the text of a comment to be displayed.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see Walker_Comment::comment()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_text Text of the current comment.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment      The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array      $args         An array of arguments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'comment_text', $comment_text, $comment, $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the comment time of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $d         Optional. The format of the time. Default user's settings.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $gmt       Optional. Whether to use the GMT date. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $translate Optional. Whether to translate the time (for use in feeds).</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The formatted time.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_time( $d = '', $gmt = false, $translate = true ) {&nbsp;</div></li><li><div>  $comment = get_comment();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment_date = $gmt ? $comment-&gt;comment_date_gmt : $comment-&gt;comment_date;&nbsp;</div></li><li><div>  if ( '' == $d )&nbsp;</div></li><li><div>      $date = mysql2date(get_option('time_format'), $comment_date, $translate);&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $date = mysql2date($d, $comment_date, $translate);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment time.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|int $date      The comment time, formatted as a date string or Unix timestamp.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $d         Date format.</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool       $gmt       Whether the GMT date is in use.</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool       $translate Whether the time is translated.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment   The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_time', $date, $d, $gmt, $translate, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the comment time of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $d Optional. The format of the time. Default user's settings.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_time( $d = '' ) {&nbsp;</div></li><li><div>  echo get_comment_time($d);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the comment type of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment_ID` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment_ID Optional. WP_Comment or ID of the comment for which to get the type.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The comment type.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_type( $comment_ID = 0 ) {&nbsp;</div></li><li><div>  $comment = get_comment( $comment_ID );&nbsp;</div></li><li><div>  if ( '' == $comment-&gt;comment_type )&nbsp;</div></li><li><div>      $comment-&gt;comment_type = 'comment';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment type.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0 The `$comment_ID` and `$comment` parameters were added.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string     $comment_type The type of comment, such as 'comment', 'pingback', or 'trackback'.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int          $comment_ID   The comment ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment      The comment object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'get_comment_type', $comment-&gt;comment_type, $comment-&gt;comment_ID, $comment );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the comment type of the current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $commenttxt   Optional. String to display for comment type. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $trackbacktxt Optional. String to display for trackback type. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $pingbacktxt  Optional. String to display for pingback type. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_type( $commenttxt = false, $trackbacktxt = false, $pingbacktxt = false ) {&nbsp;</div></li><li><div>  if ( false === $commenttxt ) $commenttxt = _x( 'Comment', 'noun' );&nbsp;</div></li><li><div>  if ( false === $trackbacktxt ) $trackbacktxt = __( 'Trackback' );&nbsp;</div></li><li><div>  if ( false === $pingbacktxt ) $pingbacktxt = __( 'Pingback' );&nbsp;</div></li><li><div>  $type = get_comment_type();&nbsp;</div></li><li><div>  switch( $type ) {&nbsp;</div></li><li><div>      case 'trackback' :&nbsp;</div></li><li><div>          echo $trackbacktxt;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'pingback' :&nbsp;</div></li><li><div>          echo $pingbacktxt;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      default :&nbsp;</div></li><li><div>          echo $commenttxt;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve The current post's trackback URL.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * There is a check to see if permalink's have been enabled and if so, will</span>&nbsp;</div></li><li><div><span class="comment"> * retrieve the pretty path. If permalinks weren't enabled, the ID of the</span>&nbsp;</div></li><li><div><span class="comment"> * current post is used and appended to the correct page to go to.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The trackback URL after being filtered.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_trackback_url() {&nbsp;</div></li><li><div>  if ( '' != get_option('permalink_structure') )&nbsp;</div></li><li><div>      $tb_url = trailingslashit(get_permalink()) . user_trailingslashit('trackback', 'single_trackback');&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $tb_url = get_option('siteurl') . '/wp-trackback.php?p=' . get_the_ID();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned trackback URL.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $tb_url The trackback URL.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'trackback_url', $tb_url );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the current post's trackback URL.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $deprecated_echo Not used.</span>&nbsp;</div></li><li><div><span class="comment"> * @return void|string Should only be used to echo the trackback URL, use get_trackback_url()</span>&nbsp;</div></li><li><div><span class="comment"> *                     for the result instead.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function trackback_url( $deprecated_echo = true ) {&nbsp;</div></li><li><div>  if ( true !== $deprecated_echo ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '2.5.0', &nbsp;</div></li><li><div>          <span class="comment">/** translators: %s: get_trackback_url() */</span>&nbsp;</div></li><li><div>          sprintf( __( 'Use %s instead if you do not want the value echoed.' ), &nbsp;</div></li><li><div>              '&lt;code&gt;get_trackback_url()&lt;/code&gt;'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $deprecated_echo ) {&nbsp;</div></li><li><div>      echo get_trackback_url();&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return get_trackback_url();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generate and display the RDF for the trackback information of current post.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Deprecated in 3.0.0, and restored in 3.0.1.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $deprecated Not used (Was $timezone = 0).</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function trackback_rdf( $deprecated = '' ) {&nbsp;</div></li><li><div>  if ( ! empty( $deprecated ) ) {&nbsp;</div></li><li><div>      _deprecated_argument( __FUNCTION__, '2.5.0' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_SERVER['HTTP_USER_AGENT'] ) && false !== stripos( $_SERVER['HTTP_USER_AGENT'], 'W3C_Validator' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;rdf:RDF xmlns:rdf=&quot;http:<span class="comment">//www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>&nbsp;</div></li><li><div>          xmlns:dc=&quot;http:<span class="comment">//purl.org/dc/elements/1.1/&quot;</span>&nbsp;</div></li><li><div>          xmlns:trackback=&quot;http:<span class="comment">//madskills.com/public/xml/rss/module/trackback/&quot;&gt;</span>&nbsp;</div></li><li><div>      &lt;rdf:Description rdf:about=&quot;';&nbsp;</div></li><li><div>  the_permalink();&nbsp;</div></li><li><div>  echo '&quot;'.&quot;\n&quot;;&nbsp;</div></li><li><div>  echo '    dc:identifier=&quot;';&nbsp;</div></li><li><div>  the_permalink();&nbsp;</div></li><li><div>  echo '&quot;'.&quot;\n&quot;;&nbsp;</div></li><li><div>  echo '    dc:title=&quot;'.str_replace('--', '&#x2d;&#x2d;', wptexturize(strip_tags(get_the_title()))).'&quot;'.&quot;\n&quot;;&nbsp;</div></li><li><div>  echo '    trackback:ping=&quot;'.get_trackback_url().'&quot;'.&quot; /&gt;\n&quot;;&nbsp;</div></li><li><div>  echo '&lt;/rdf:RDF&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current post is open for comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post_id Post ID or WP_Post object. Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the comments are open.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comments_open( $post_id = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $_post = get_post($post_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $open = ( 'open' == $_post-&gt;comment_status );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current post is open for comments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool        $open    Whether the current post is open for comments.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int|WP_Post $post_id The post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'comments_open', $open, $post_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether the current post is open for pings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post_id Post ID or WP_Post object. Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if pings are accepted</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pings_open( $post_id = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $_post = get_post($post_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $open = ( 'open' == $_post-&gt;ping_status );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current post is open for pings.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool        $open    Whether the current post is open for pings.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int|WP_Post $post_id The post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'pings_open', $open, $post_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display form token for unfiltered comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will only display nonce token if the current user has permissions for</span>&nbsp;</div></li><li><div><span class="comment"> * unfiltered html. Won't display the token for other users.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The function was backported to 2.0.10 and was added to versions 2.1.3 and</span>&nbsp;</div></li><li><div><span class="comment"> * above. Does not exist in versions prior to 2.0.10 in the 2.0 branch and in</span>&nbsp;</div></li><li><div><span class="comment"> * the 2.1 branch, prior to 2.1.3. Technically added in 2.2.0.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Backported to 2.0.10.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_comment_form_unfiltered_html_nonce() {&nbsp;</div></li><li><div>  $post = get_post();&nbsp;</div></li><li><div>  $post_id = $post ? $post-&gt;ID : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( current_user_can( 'unfiltered_html' ) ) {&nbsp;</div></li><li><div>      wp_nonce_field( 'unfiltered-html-comment_' . $post_id, '_wp_unfiltered_html_comment_disabled', false );&nbsp;</div></li><li><div>      echo &quot;&lt;script&gt;(function() {if(window===window.parent) {document.getElementById('_wp_unfiltered_html_comment_disabled').name='_wp_unfiltered_html_comment';}})();&lt;/script&gt;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Load the comment template specified in $file.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will not display the comments template if not on single post or page, or if</span>&nbsp;</div></li><li><div><span class="comment"> * the post does not have comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Uses the WordPress database object to query for the comments. The comments</span>&nbsp;</div></li><li><div><span class="comment"> * are passed through the {@see 'comments_array'} filter hook with the list of comments</span>&nbsp;</div></li><li><div><span class="comment"> * and the post ID respectively.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The `$file` path is passed through a filter hook called {@see 'comments_template'}, </span>&nbsp;</div></li><li><div><span class="comment"> * which includes the TEMPLATEPATH and $file combined. Tries the $filtered path</span>&nbsp;</div></li><li><div><span class="comment"> * first and if it fails it will require the default comment template from the</span>&nbsp;</div></li><li><div><span class="comment"> * default theme. If either does not exist, then the WordPress process will be</span>&nbsp;</div></li><li><div><span class="comment"> * halted. It is advised for that reason, that the default theme is not deleted.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will not try to get the comments if the post has none.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Query   $wp_query</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Post    $post</span>&nbsp;</div></li><li><div><span class="comment"> * @global wpdb       $wpdb</span>&nbsp;</div></li><li><div><span class="comment"> * @global int        $id</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Comment $comment</span>&nbsp;</div></li><li><div><span class="comment"> * @global string     $user_login</span>&nbsp;</div></li><li><div><span class="comment"> * @global int        $user_ID</span>&nbsp;</div></li><li><div><span class="comment"> * @global string     $user_identity</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool       $overridden_cpage</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool       $withcomments</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $file              Optional. The file to load. Default '/comments.php'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $separate_comments Optional. Whether to separate the comments by comment type.</span>&nbsp;</div></li><li><div><span class="comment"> *                                  Default false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comments_template( $file = '/comments.php', $separate_comments = false ) {&nbsp;</div></li><li><div>  global $wp_query, $withcomments, $post, $wpdb, $id, $comment, $user_login, $user_ID, $user_identity, $overridden_cpage;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !(is_single() || is_page() || $withcomments) || empty($post) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($file) )&nbsp;</div></li><li><div>      $file = '/comments.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $req = get_option('require_name_email');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Comment author information fetched from the comment cookies.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $commenter = wp_get_current_commenter();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * The name of the current comment author escaped for use in attributes.</span>&nbsp;</div></li><li><div><span class="comment">   * Escaped by sanitize_comment_cookies().</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $comment_author = $commenter['comment_author'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * The email address of the current comment author escaped for use in attributes.</span>&nbsp;</div></li><li><div><span class="comment">   * Escaped by sanitize_comment_cookies().</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $comment_author_email = $commenter['comment_author_email'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * The url of the current comment author escaped for use in attributes.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $comment_author_url = esc_url($commenter['comment_author_url']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment_args = array(&nbsp;</div></li><li><div>      'orderby' =&gt; 'comment_date_gmt', &nbsp;</div></li><li><div>      'order' =&gt; 'ASC', &nbsp;</div></li><li><div>      'status' =&gt; 'approve', &nbsp;</div></li><li><div>      'post_id' =&gt; $post-&gt;ID, &nbsp;</div></li><li><div>      'no_found_rows' =&gt; false, &nbsp;</div></li><li><div>      'update_comment_meta_cache' =&gt; false, <span class="comment">// We lazy-load comment meta for performance.</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( get_option('thread_comments') ) {&nbsp;</div></li><li><div>      $comment_args['hierarchical'] = 'threaded';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $comment_args['hierarchical'] = false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $user_ID ) {&nbsp;</div></li><li><div>      $comment_args['include_unapproved'] = array( $user_ID );&nbsp;</div></li><li><div>  } elseif ( ! empty( $comment_author_email ) ) {&nbsp;</div></li><li><div>      $comment_args['include_unapproved'] = array( $comment_author_email );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $per_page = 0;&nbsp;</div></li><li><div>  if ( get_option( 'page_comments' ) ) {&nbsp;</div></li><li><div>      $per_page = (int) get_query_var( 'comments_per_page' );&nbsp;</div></li><li><div>      if ( 0 === $per_page ) {&nbsp;</div></li><li><div>          $per_page = (int) get_option( 'comments_per_page' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $comment_args['number'] = $per_page;&nbsp;</div></li><li><div>      $page = (int) get_query_var( 'cpage' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $page ) {&nbsp;</div></li><li><div>          $comment_args['offset'] = ( $page - 1 ) * $per_page;&nbsp;</div></li><li><div>      } elseif ( 'oldest' === get_option( 'default_comments_page' ) ) {&nbsp;</div></li><li><div>          $comment_args['offset'] = 0;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// If fetching the first page of 'newest', we need a top-level comment count.</span>&nbsp;</div></li><li><div>          $top_level_query = new WP_Comment_Query();&nbsp;</div></li><li><div>          $top_level_args = array(&nbsp;</div></li><li><div>              'count' =&gt; true, &nbsp;</div></li><li><div>              'orderby' =&gt; false, &nbsp;</div></li><li><div>              'post_id' =&gt; $post-&gt;ID, &nbsp;</div></li><li><div>              'status' =&gt; 'approve', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $comment_args['hierarchical'] ) {&nbsp;</div></li><li><div>              $top_level_args['parent'] = 0;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $comment_args['include_unapproved'] ) ) {&nbsp;</div></li><li><div>              $top_level_args['include_unapproved'] = $comment_args['include_unapproved'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $top_level_count = $top_level_query-&gt;query( $top_level_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $comment_args['offset'] = ( ceil( $top_level_count / $per_page ) - 1 ) * $per_page;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the arguments used to query comments in comments_template().</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see WP_Comment_Query::__construct()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $comment_args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of WP_Comment_Query arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string|array $orderby                   Field(s) to order by.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string       $order                     Order of results. Accepts 'ASC' or 'DESC'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string       $status                    Comment status.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type array        $include_unapproved        Array of IDs or email addresses whose unapproved comments</span>&nbsp;</div></li><li><div><span class="comment">   *                                                   will be included in results.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int          $post_id                   ID of the post.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool         $no_found_rows             Whether to refrain from querying for found rows.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool         $update_comment_meta_cache Whether to prime cache for comment meta.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool|string  $hierarchical              Whether to query for comments hierarchically.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int          $offset                    Comment offset.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int          $number                    Number of comments to fetch.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $comment_args = apply_filters( 'comments_template_query_args', $comment_args );&nbsp;</div></li><li><div>  $comment_query = new WP_Comment_Query( $comment_args );&nbsp;</div></li><li><div>  $_comments = $comment_query-&gt;comments;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Trees must be flattened before they're passed to the walker.</span>&nbsp;</div></li><li><div>  if ( $comment_args['hierarchical'] ) {&nbsp;</div></li><li><div>      $comments_flat = array();&nbsp;</div></li><li><div>      foreach ( $_comments as $_comment ) {&nbsp;</div></li><li><div>          $comments_flat[] = $_comment;&nbsp;</div></li><li><div>          $comment_children = $_comment-&gt;get_children( array(&nbsp;</div></li><li><div>              'format' =&gt; 'flat', &nbsp;</div></li><li><div>              'status' =&gt; $comment_args['status'], &nbsp;</div></li><li><div>              'orderby' =&gt; $comment_args['orderby']&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $comment_children as $comment_child ) {&nbsp;</div></li><li><div>              $comments_flat[] = $comment_child;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $comments_flat = $_comments;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comments array.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $comments Array of comments supplied to the comments template.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int   $post_ID  Post ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $wp_query-&gt;comments = apply_filters( 'comments_array', $comments_flat, $post-&gt;ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comments = &$wp_query-&gt;comments;&nbsp;</div></li><li><div>  $wp_query-&gt;comment_count = count($wp_query-&gt;comments);&nbsp;</div></li><li><div>  $wp_query-&gt;max_num_comment_pages = $comment_query-&gt;max_num_pages;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $separate_comments ) {&nbsp;</div></li><li><div>      $wp_query-&gt;comments_by_type = separate_comments($comments);&nbsp;</div></li><li><div>      $comments_by_type = &$wp_query-&gt;comments_by_type;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $wp_query-&gt;comments_by_type = array();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $overridden_cpage = false;&nbsp;</div></li><li><div>  if ( '' == get_query_var( 'cpage' ) && $wp_query-&gt;max_num_comment_pages &gt; 1 ) {&nbsp;</div></li><li><div>      set_query_var( 'cpage', 'newest' == get_option('default_comments_page') ? get_comment_pages_count() : 1 );&nbsp;</div></li><li><div>      $overridden_cpage = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !defined('COMMENTS_TEMPLATE') )&nbsp;</div></li><li><div>      define('COMMENTS_TEMPLATE', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $theme_template = STYLESHEETPATH . $file;&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the path to the theme template file used for the comments template.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.1</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $theme_template The path to the theme template file.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $include = apply_filters( 'comments_template', $theme_template );&nbsp;</div></li><li><div>  if ( file_exists( $include ) )&nbsp;</div></li><li><div>      require( $include );&nbsp;</div></li><li><div>  elseif ( file_exists( TEMPLATEPATH . $file ) )&nbsp;</div></li><li><div>      require( TEMPLATEPATH . $file );&nbsp;</div></li><li><div>  else <span class="comment">// Backward compat code will be removed in a future release</span>&nbsp;</div></li><li><div>      require( ABSPATH . WPINC . '/theme-compat/comments.php');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the link to the comments for the current post ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 0.71</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $zero      Optional. String to display when no comments. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $one       Optional. String to display when only one comment is available.</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $more      Optional. String to display when there are more than one comment.</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $css_class Optional. CSS class to use for comments. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $none      Optional. String to display when comments have been turned off.</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comments_popup_link( $zero = false, $one = false, $more = false, $css_class = '', $none = false ) {&nbsp;</div></li><li><div>  $id = get_the_ID();&nbsp;</div></li><li><div>  $title = get_the_title();&nbsp;</div></li><li><div>  $number = get_comments_number( $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $zero ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">/** translators: %s: post title */</span></span></span>&nbsp;</div></li><li><div>      $zero = sprintf( __( 'No Comments&lt;span class=&quot;screen-reader-text&quot;&gt; on %s&lt;/span&gt;' ), $title );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $one ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">/** translators: %s: post title */</span></span></span>&nbsp;</div></li><li><div>      $one = sprintf( __( '1 Comment&lt;span class=&quot;screen-reader-text&quot;&gt; on %s&lt;/span&gt;' ), $title );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $more ) {&nbsp;</div></li><li><div>      <span class="comment">/** translators: 1: Number of comments 2: post title */</span>&nbsp;</div></li><li><div>      $more = _n( '%1$s Comment&lt;span class=&quot;screen-reader-text&quot;&gt; on %2$s&lt;/span&gt;', '%1$s Comments&lt;span class=&quot;screen-reader-text&quot;&gt; on %2$s&lt;/span&gt;', $number );&nbsp;</div></li><li><div>      $more = sprintf( $more, number_format_i18n( $number ), $title );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $none ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">/** translators: %s: post title */</span></span></span>&nbsp;</div></li><li><div>      $none = sprintf( __( 'Comments Off&lt;span class=&quot;screen-reader-text&quot;&gt; on %s&lt;/span&gt;' ), $title );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $number && !comments_open() && !pings_open() ) {&nbsp;</div></li><li><div>      echo '&lt;span' . ((!empty($css_class)) ? ' class=&quot;' . esc_attr( $css_class ) . '&quot;' : '') . '&gt;' . $none . '&lt;/span&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( post_password_required() ) {&nbsp;</div></li><li><div>      _e( 'Enter your password to view comments.' );&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;a href=&quot;';&nbsp;</div></li><li><div>  if ( 0 == $number ) {&nbsp;</div></li><li><div>      $respond_link = get_permalink() . '#respond';&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the respond link when a post has no comments.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $respond_link The default response link.</span>&nbsp;</div></li><li><div><span class="comment">       * @param integer $id The post ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      echo apply_filters( 'respond_link', $respond_link, $id );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      comments_link();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo '&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $css_class ) ) {&nbsp;</div></li><li><div>      echo ' class=&quot;'.$css_class.'&quot; ';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $attributes = '';&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comments link attributes for display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $attributes The comments link attributes. Default empty.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'comments_popup_link_attributes', $attributes );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&gt;';&nbsp;</div></li><li><div>  comments_number( $zero, $one, $more );&nbsp;</div></li><li><div>  echo '&lt;/a&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve HTML content for reply to comment link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Added the ability for `$comment` to also accept a WP_Comment object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Override default arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $add_below  The first part of the selector used to identify the comment to respond below.</span>&nbsp;</div></li><li><div><span class="comment"> *                              The resulting value is passed as the first parameter to addComment.moveForm(), </span>&nbsp;</div></li><li><div><span class="comment"> *                              concatenated as $add_below-$comment-&gt;comment_ID. Default 'comment'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $respond_id The selector identifying the responding comment. Passed as the third parameter</span>&nbsp;</div></li><li><div><span class="comment"> *                              to addComment.moveForm(), and appended to the link URL as a hash value.</span>&nbsp;</div></li><li><div><span class="comment"> *                              Default 'respond'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $reply_text The text of the Reply link. Default 'Reply'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $login_text The text of the link to reply if logged out. Default 'Log in to Reply'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $max_depth  The max depth of the comment tree. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $depth      The depth of the new comment. Must be greater than 0 and less than the value</span>&nbsp;</div></li><li><div><span class="comment"> *                              of the 'thread_comments_depth' option set in Settings &gt; Discussion. Default 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $before     The text or HTML to add before the reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $after      The text or HTML to add after the reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Comment $comment Comment being replied to. Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post    $post    Post ID or WP_Post object the comment is going to be displayed on.</span>&nbsp;</div></li><li><div><span class="comment"> *                                Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return void|false|string Link to show comment form, if successful. False, if comments are closed.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_reply_link( $args = array(), $comment = null, $post = null ) {&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'add_below' =&gt; 'comment', &nbsp;</div></li><li><div>      'respond_id' =&gt; 'respond', &nbsp;</div></li><li><div>      'reply_text' =&gt; __( 'Reply' ), &nbsp;</div></li><li><div>      <span class="comment">/** translators: Comment reply button text. 1: Comment author name */</span>&nbsp;</div></li><li><div>      'reply_to_text' =&gt; __( 'Reply to %s' ), &nbsp;</div></li><li><div>      'login_text' =&gt; __( 'Log in to Reply' ), &nbsp;</div></li><li><div>      'max_depth' =&gt; 0, &nbsp;</div></li><li><div>      'depth' =&gt; 0, &nbsp;</div></li><li><div>      'before' =&gt; '', &nbsp;</div></li><li><div>      'after' =&gt; ''&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $args['depth'] || $args['max_depth'] &lt;= $args['depth'] ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment = get_comment( $comment );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $post ) ) {&nbsp;</div></li><li><div>      $post = $comment-&gt;comment_post_ID;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $post = get_post( $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! comments_open( $post-&gt;ID ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment reply link arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array      $args    Comment reply link arguments. See get_comment_reply_link()</span>&nbsp;</div></li><li><div><span class="comment">   *                            for more information on accepted arguments.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Comment $comment The object of the comment being replied to.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Post    $post    The WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $args = apply_filters( 'comment_reply_link_args', $args, $comment, $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( get_option( 'comment_registration' ) && ! is_user_logged_in() ) {&nbsp;</div></li><li><div>      $link = sprintf( '&lt;a rel=&quot;nofollow&quot; class=&quot;comment-reply-login&quot; href=&quot;%s&quot;&gt;%s&lt;/a&gt;', &nbsp;</div></li><li><div>          esc_url( wp_login_url( get_permalink() ) ), &nbsp;</div></li><li><div>          $args['login_text']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $onclick = sprintf( 'return addComment.moveForm( &quot;%1$s-%2$s&quot;, &quot;%2$s&quot;, &quot;%3$s&quot;, &quot;%4$s&quot; )', &nbsp;</div></li><li><div>          $args['add_below'], $comment-&gt;comment_ID, $args['respond_id'], $post-&gt;ID&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $link = sprintf( &quot;&lt;a rel='nofollow' class='comment-reply-link' href='%s' onclick='%s' aria-label='%s'&gt;%s&lt;/a&gt;&quot;, &nbsp;</div></li><li><div>          esc_url( add_query_arg( 'replytocom', $comment-&gt;comment_ID, get_permalink( $post-&gt;ID ) ) ) . &quot;#&quot; . $args['respond_id'], &nbsp;</div></li><li><div>          $onclick, &nbsp;</div></li><li><div>          esc_attr( sprintf( $args['reply_to_text'], $comment-&gt;comment_author ) ), &nbsp;</div></li><li><div>          $args['reply_text']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment reply link.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string  $link    The HTML markup for the comment reply link.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array   $args    An array of arguments overriding the defaults.</span>&nbsp;</div></li><li><div><span class="comment">   * @param object  $comment The object of the comment being replied.</span>&nbsp;</div></li><li><div><span class="comment">   * @param WP_Post $post    The WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'comment_reply_link', $args['before'] . $link . $args['after'], $args, $comment, $post );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the HTML content for reply to comment link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_comment_reply_link()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array       $args    Optional. Override default options.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int         $comment Comment being replied to. Default current comment.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post    Post ID or WP_Post object the comment is going to be displayed on.</span>&nbsp;</div></li><li><div><span class="comment"> *                             Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Link to show comment form, if successful. False, if comments are closed.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_reply_link($args = array(), $comment = null, $post = null) {&nbsp;</div></li><li><div>  echo get_comment_reply_link($args, $comment, $post);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve HTML content for reply to post link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Override default arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $add_below  The first part of the selector used to identify the comment to respond below.</span>&nbsp;</div></li><li><div><span class="comment"> *                              The resulting value is passed as the first parameter to addComment.moveForm(), </span>&nbsp;</div></li><li><div><span class="comment"> *                              concatenated as $add_below-$comment-&gt;comment_ID. Default is 'post'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $respond_id The selector identifying the responding comment. Passed as the third parameter</span>&nbsp;</div></li><li><div><span class="comment"> *                              to addComment.moveForm(), and appended to the link URL as a hash value.</span>&nbsp;</div></li><li><div><span class="comment"> *                              Default 'respond'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $reply_text Text of the Reply link. Default is 'Leave a Comment'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $login_text Text of the link to reply if logged out. Default is 'Log in to leave a Comment'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $before     Text or HTML to add before the reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $after      Text or HTML to add after the reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post    Optional. Post ID or WP_Post object the comment is going to be displayed on.</span>&nbsp;</div></li><li><div><span class="comment"> *                             Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return false|null|string Link to show comment form, if successful. False, if comments are closed.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_post_reply_link($args = array(), $post = null) {&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'add_below' =&gt; 'post', &nbsp;</div></li><li><div>      'respond_id' =&gt; 'respond', &nbsp;</div></li><li><div>      'reply_text' =&gt; __('Leave a Comment'), &nbsp;</div></li><li><div>      'login_text' =&gt; __('Log in to leave a Comment'), &nbsp;</div></li><li><div>      'before' =&gt; '', &nbsp;</div></li><li><div>      'after' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = wp_parse_args($args, $defaults);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $post = get_post($post);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! comments_open( $post-&gt;ID ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( get_option('comment_registration') && ! is_user_logged_in() ) {&nbsp;</div></li><li><div>      $link = sprintf( '&lt;a rel=&quot;nofollow&quot; class=&quot;comment-reply-login&quot; href=&quot;%s&quot;&gt;%s&lt;/a&gt;', &nbsp;</div></li><li><div>          wp_login_url( get_permalink() ), &nbsp;</div></li><li><div>          $args['login_text']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $onclick = sprintf( 'return addComment.moveForm( &quot;%1$s-%2$s&quot;, &quot;0&quot;, &quot;%3$s&quot;, &quot;%2$s&quot; )', &nbsp;</div></li><li><div>          $args['add_below'], $post-&gt;ID, $args['respond_id']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $link = sprintf( &quot;&lt;a rel='nofollow' class='comment-reply-link' href='%s' onclick='%s'&gt;%s&lt;/a&gt;&quot;, &nbsp;</div></li><li><div>          get_permalink( $post-&gt;ID ) . '#' . $args['respond_id'], &nbsp;</div></li><li><div>          $onclick, &nbsp;</div></li><li><div>          $args['reply_text']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $formatted_link = $args['before'] . $link . $args['after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the formatted post comments link HTML.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string      $formatted The HTML-formatted post comments link.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int|WP_Post $post      The post ID or WP_Post object.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'post_comments_link', $formatted_link, $post );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays the HTML content for reply to post link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_post_reply_link()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array       $args Optional. Override default options, </span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post Post ID or WP_Post object the comment is going to be displayed on.</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool|null Link to show comment form, if successful. False, if comments are closed.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function post_reply_link($args = array(), $post = null) {&nbsp;</div></li><li><div>  echo get_post_reply_link($args, $post);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve HTML content for cancel comment reply link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text Optional. Text to display for cancel reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_cancel_comment_reply_link( $text = '' ) {&nbsp;</div></li><li><div>  if ( empty($text) )&nbsp;</div></li><li><div>      $text = __('Click here to cancel reply.');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $style = isset($_GET['replytocom']) ? '' : ' style=&quot;display:none;&quot;';&nbsp;</div></li><li><div>  $link = esc_html( remove_query_arg('replytocom') ) . '#respond';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $formatted_link = '&lt;a rel=&quot;nofollow&quot; id=&quot;cancel-comment-reply-link&quot; href=&quot;' . $link . '&quot;' . $style . '&gt;' . $text . '&lt;/a&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the cancel comment reply link HTML.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $formatted_link The HTML-formatted cancel comment reply link.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $link           Cancel comment reply link URL.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $text           Cancel comment reply link text.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'cancel_comment_reply_link', $formatted_link, $link, $text );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display HTML content for cancel comment reply link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text Optional. Text to display for cancel reply link. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function cancel_comment_reply_link( $text = '' ) {&nbsp;</div></li><li><div>  echo get_cancel_comment_reply_link($text);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve hidden input HTML for replying to comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $id Optional. Post ID. Default current post ID.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Hidden input HTML for replying to comments</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_comment_id_fields( $id = 0 ) {&nbsp;</div></li><li><div>  if ( empty( $id ) )&nbsp;</div></li><li><div>      $id = get_the_ID();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $replytoid = isset($_GET['replytocom']) ? (int) $_GET['replytocom'] : 0;&nbsp;</div></li><li><div>  $result = &quot;&lt;input type='hidden' name='comment_post_ID' value='$id' id='comment_post_ID' /&gt;\n&quot;;&nbsp;</div></li><li><div>  $result .= &quot;&lt;input type='hidden' name='comment_parent' id='comment_parent' value='$replytoid' /&gt;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the returned comment id fields.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $result    The HTML-formatted hidden id field comment elements.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $id        The post ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $replytoid The id of the comment being replied to.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'comment_id_fields', $result, $id, $replytoid );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output hidden input HTML for replying to comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $id Optional. Post ID. Default current post ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_id_fields( $id = 0 ) {&nbsp;</div></li><li><div>  echo get_comment_id_fields( $id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display text based on comment reply status.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Only affects users with JavaScript disabled.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @internal The $comment global must be present to allow template tags access to the current</span>&nbsp;</div></li><li><div><span class="comment"> *           comment. See https://core.trac.wordpress.org/changeset/36512.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Comment $comment Current comment.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $noreplytext  Optional. Text to display when not replying to a comment.</span>&nbsp;</div></li><li><div><span class="comment"> *                             Default false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $replytext    Optional. Text to display when replying to a comment.</span>&nbsp;</div></li><li><div><span class="comment"> *                             Default false. Accepts &quot;%s&quot; for the author of the comment</span>&nbsp;</div></li><li><div><span class="comment"> *                             being replied to.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $linktoparent Optional. Boolean to control making the author's name a link</span>&nbsp;</div></li><li><div><span class="comment"> *                             to their comment. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_form_title( $noreplytext = false, $replytext = false, $linktoparent = true ) {&nbsp;</div></li><li><div>  global $comment;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $noreplytext ) $noreplytext = __( 'Leave a Reply' );&nbsp;</div></li><li><div>  if ( false === $replytext ) $replytext = __( 'Leave a Reply to %s' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $replytoid = isset($_GET['replytocom']) ? (int) $_GET['replytocom'] : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $replytoid )&nbsp;</div></li><li><div>      echo $noreplytext;&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      <span class="comment">// Sets the global so that template tags can be used in the comment form.</span>&nbsp;</div></li><li><div>      $comment = get_comment($replytoid);&nbsp;</div></li><li><div>      $author = ( $linktoparent ) ? '&lt;a href=&quot;#comment-' . get_comment_ID() . '&quot;&gt;' . get_comment_author( $comment ) . '&lt;/a&gt;' : get_comment_author( $comment );&nbsp;</div></li><li><div>      printf( $replytext, $author );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * List comments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used in the comments.php template to list comments for a particular post.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see WP_Query-&gt;comments</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global WP_Query $wp_query</span>&nbsp;</div></li><li><div><span class="comment"> * @global int      $comment_alt</span>&nbsp;</div></li><li><div><span class="comment"> * @global int      $comment_depth</span>&nbsp;</div></li><li><div><span class="comment"> * @global int      $comment_thread_alt</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool     $overridden_cpage</span>&nbsp;</div></li><li><div><span class="comment"> * @global bool     $in_comment_loop</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Formatting options.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type object $walker            Instance of a Walker class to list comments. Default null.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $max_depth         The maximum comments depth. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $style             The style of list ordering. Default 'ul'. Accepts 'ul', 'ol'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $callback          Callback function to use. Default null.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $end-callback      Callback function to use at the end. Default null.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $type              Type of comments to list.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default 'all'. Accepts 'all', 'comment', 'pingback', 'trackback', 'pings'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $page              Page ID to list comments for. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $per_page          Number of comments to list per page. Default empty.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $avatar_size       Height and width dimensions of the avatar size. Default 32.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $reverse_top_level Ordering of the listed comments. If true, will display newest comments first.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $reverse_children  Whether to reverse child comments in the list. Default null.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $format            How to format the comments list.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default 'html5' if the theme supports it. Accepts 'html5', 'xhtml'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $short_ping        Whether to output short pings. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $echo              Whether to echo the output or return it. Default true.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $comments Optional. Array of WP_Comment objects.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_list_comments( $args = array(), $comments = null ) {&nbsp;</div></li><li><div>  global $wp_query, $comment_alt, $comment_depth, $comment_thread_alt, $overridden_cpage, $in_comment_loop;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $in_comment_loop = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $comment_alt = $comment_thread_alt = 0;&nbsp;</div></li><li><div>  $comment_depth = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'walker' =&gt; null, &nbsp;</div></li><li><div>      'max_depth' =&gt; '', &nbsp;</div></li><li><div>      'style' =&gt; 'ul', &nbsp;</div></li><li><div>      'callback' =&gt; null, &nbsp;</div></li><li><div>      'end-callback' =&gt; null, &nbsp;</div></li><li><div>      'type' =&gt; 'all', &nbsp;</div></li><li><div>      'page' =&gt; '', &nbsp;</div></li><li><div>      'per_page' =&gt; '', &nbsp;</div></li><li><div>      'avatar_size' =&gt; 32, &nbsp;</div></li><li><div>      'reverse_top_level' =&gt; null, &nbsp;</div></li><li><div>      'reverse_children' =&gt; '', &nbsp;</div></li><li><div>      'format' =&gt; current_theme_supports( 'html5', 'comment-list' ) ? 'html5' : 'xhtml', &nbsp;</div></li><li><div>      'short_ping' =&gt; false, &nbsp;</div></li><li><div>      'echo' =&gt; true, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the arguments used in retrieving the comment list.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see wp_list_comments()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $r An array of arguments for displaying comments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $r = apply_filters( 'wp_list_comments_args', $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Figure out what comments we'll be looping through ($_comments)</span>&nbsp;</div></li><li><div>  if ( null !== $comments ) {&nbsp;</div></li><li><div>      $comments = (array) $comments;&nbsp;</div></li><li><div>      if ( empty($comments) )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      if ( 'all' != $r['type'] ) {&nbsp;</div></li><li><div>          $comments_by_type = separate_comments($comments);&nbsp;</div></li><li><div>          if ( empty($comments_by_type[$r['type']]) )&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          $_comments = $comments_by_type[$r['type']];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $_comments = $comments;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * If 'page' or 'per_page' has been passed, and does not match what's in $wp_query, </span>&nbsp;</div></li><li><div><span class="comment">       * perform a separate comment query and allow Walker_Comment to paginate.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      if ( $r['page'] || $r['per_page'] ) {&nbsp;</div></li><li><div>          $current_cpage = get_query_var( 'cpage' );&nbsp;</div></li><li><div>          if ( ! $current_cpage ) {&nbsp;</div></li><li><div>              $current_cpage = 'newest' === get_option( 'default_comments_page' ) ? 1 : $wp_query-&gt;max_num_comment_pages;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $current_per_page = get_query_var( 'comments_per_page' );&nbsp;</div></li><li><div>          if ( $r['page'] != $current_cpage || $r['per_page'] != $current_per_page ) {&nbsp;</div></li><li><div>              $comment_args = array(&nbsp;</div></li><li><div>                  'post_id' =&gt; get_the_ID(), &nbsp;</div></li><li><div>                  'orderby' =&gt; 'comment_date_gmt', &nbsp;</div></li><li><div>                  'order' =&gt; 'ASC', &nbsp;</div></li><li><div>                  'status' =&gt; 'approve', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_user_logged_in() ) {&nbsp;</div></li><li><div>                  $comment_args['include_unapproved'] = get_current_user_id();&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $commenter = wp_get_current_commenter();&nbsp;</div></li><li><div>                  if ( $commenter['comment_author_email'] ) {&nbsp;</div></li><li><div>                      $comment_args['include_unapproved'] = $commenter['comment_author_email'];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $comments = get_comments( $comment_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( 'all' != $r['type'] ) {&nbsp;</div></li><li><div>                  $comments_by_type = separate_comments( $comments );&nbsp;</div></li><li><div>                  if ( empty( $comments_by_type[ $r['type'] ] ) ) {&nbsp;</div></li><li><div>                      return;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $_comments = $comments_by_type[ $r['type'] ];&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $_comments = $comments;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Otherwise, fall back on the comments from `$wp_query-&gt;comments`.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          if ( empty($wp_query-&gt;comments) )&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          if ( 'all' != $r['type'] ) {&nbsp;</div></li><li><div>              if ( empty($wp_query-&gt;comments_by_type) )&nbsp;</div></li><li><div>                  $wp_query-&gt;comments_by_type = separate_comments($wp_query-&gt;comments);&nbsp;</div></li><li><div>              if ( empty($wp_query-&gt;comments_by_type[$r['type']]) )&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              $_comments = $wp_query-&gt;comments_by_type[$r['type']];&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $_comments = $wp_query-&gt;comments;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $wp_query-&gt;max_num_comment_pages ) {&nbsp;</div></li><li><div>              $default_comments_page = get_option( 'default_comments_page' );&nbsp;</div></li><li><div>              $cpage = get_query_var( 'cpage' );&nbsp;</div></li><li><div>              if ( 'newest' === $default_comments_page ) {&nbsp;</div></li><li><div>                  $r['cpage'] = $cpage;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * When first page shows oldest comments, post permalink is the same as</span>&nbsp;</div></li><li><div><span class="comment">               * the comment permalink.</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              } elseif ( $cpage == 1 ) {&nbsp;</div></li><li><div>                  $r['cpage'] = '';&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $r['cpage'] = $cpage;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $r['page'] = 0;&nbsp;</div></li><li><div>              $r['per_page'] = 0;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $r['per_page'] && get_option( 'page_comments' ) ) {&nbsp;</div></li><li><div>      $r['per_page'] = get_query_var('comments_per_page');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty($r['per_page']) ) {&nbsp;</div></li><li><div>      $r['per_page'] = 0;&nbsp;</div></li><li><div>      $r['page'] = 0;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $r['max_depth'] ) {&nbsp;</div></li><li><div>      if ( get_option('thread_comments') )&nbsp;</div></li><li><div>          $r['max_depth'] = get_option('thread_comments_depth');&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $r['max_depth'] = -1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $r['page'] ) {&nbsp;</div></li><li><div>      if ( empty($overridden_cpage) ) {&nbsp;</div></li><li><div>          $r['page'] = get_query_var('cpage');&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $threaded = ( -1 != $r['max_depth'] );&nbsp;</div></li><li><div>          $r['page'] = ( 'newest' == get_option('default_comments_page') ) ? get_comment_pages_count($_comments, $r['per_page'], $threaded) : 1;&nbsp;</div></li><li><div>          set_query_var( 'cpage', $r['page'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Validation check</span>&nbsp;</div></li><li><div>  $r['page'] = intval($r['page']);&nbsp;</div></li><li><div>  if ( 0 == $r['page'] && 0 != $r['per_page'] )&nbsp;</div></li><li><div>      $r['page'] = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $r['reverse_top_level'] )&nbsp;</div></li><li><div>      $r['reverse_top_level'] = ( 'desc' == get_option('comment_order') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_queue_comments_for_comment_meta_lazyload( $_comments );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $r['walker'] ) ) {&nbsp;</div></li><li><div>      $walker = new Walker_Comment;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $walker = $r['walker'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = $walker-&gt;paged_walk( $_comments, $r['max_depth'], $r['page'], $r['per_page'], $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $in_comment_loop = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['echo'] ) {&nbsp;</div></li><li><div>      echo $output;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a complete commenting form for use within a template.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Most strings and form fields may be controlled through the $args array passed</span>&nbsp;</div></li><li><div><span class="comment"> * into the function, while you may also choose to use the {@see 'comment_form_default_fields'}</span>&nbsp;</div></li><li><div><span class="comment"> * filter to modify the array of default fields if you'd just like to add a new</span>&nbsp;</div></li><li><div><span class="comment"> * one or remove a single field. All fields are also individually passed through</span>&nbsp;</div></li><li><div><span class="comment"> * a filter of the {@see 'comment_form_field_$name'} where $name is the key used</span>&nbsp;</div></li><li><div><span class="comment"> * in the array of fields.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.1.0 Introduced the 'class_submit' argument.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.2.0 Introduced the 'submit_button' and 'submit_fields' arguments.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.4.0 Introduced the 'class_form', 'title_reply_before', 'title_reply_after', </span>&nbsp;</div></li><li><div><span class="comment"> *              'cancel_reply_before', and 'cancel_reply_after' arguments.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.5.0 The 'author', 'email', and 'url' form fields are limited to 245, 100, </span>&nbsp;</div></li><li><div><span class="comment"> *              and 200 characters, respectively.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 4.6.0 Introduced the 'action' argument.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array       $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Optional. Default arguments and form fields to override.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array $fields {</span>&nbsp;</div></li><li><div><span class="comment"> *         Default comment fields, filterable by default via the {@see 'comment_form_default_fields'} hook.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *         @type string $author Comment author field HTML.</span>&nbsp;</div></li><li><div><span class="comment"> *         @type string $email  Comment author email field HTML.</span>&nbsp;</div></li><li><div><span class="comment"> *         @type string $url    Comment author URL field HTML.</span>&nbsp;</div></li><li><div><span class="comment"> *     }</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $comment_field        The comment textarea field HTML.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $must_log_in          HTML element for a 'must be logged in to comment' message.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $logged_in_as         HTML element for a 'logged in as [user]' message.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $comment_notes_before HTML element for a message displayed before the comment fields</span>&nbsp;</div></li><li><div><span class="comment"> *                                        if the user is not logged in.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default 'Your email address will not be published.'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $comment_notes_after  HTML element for a message displayed after the textarea field.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $action               The comment form element action attribute. Default '/wp-comments-post.php'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $id_form              The comment form element id attribute. Default 'commentform'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $id_submit            The comment submit element id attribute. Default 'submit'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $class_form           The comment form element class attribute. Default 'comment-form'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $class_submit         The comment submit element class attribute. Default 'submit'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $name_submit          The comment submit element name attribute. Default 'submit'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $title_reply          The translatable 'reply' button label. Default 'Leave a Reply'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $title_reply_to       The translatable 'reply-to' button label. Default 'Leave a Reply to %s', </span>&nbsp;</div></li><li><div><span class="comment"> *                                        where %s is the author of the comment being replied to.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $title_reply_before   HTML displayed before the comment form title.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default: '&lt;h3 id=&quot;reply-title&quot; class=&quot;comment-reply-title&quot;&gt;'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $title_reply_after    HTML displayed after the comment form title.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default: '&lt;/h3&gt;'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $cancel_reply_before  HTML displayed before the cancel reply link.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $cancel_reply_after   HTML displayed after the cancel reply link.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $cancel_reply_link    The translatable 'cancel reply' button label. Default 'Cancel reply'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $label_submit         The translatable 'submit' button label. Default 'Post a comment'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $submit_button        HTML format for the Submit button.</span>&nbsp;</div></li><li><div><span class="comment"> *                                        Default: '&lt;input name=&quot;%1$s&quot; type=&quot;submit&quot; id=&quot;%2$s&quot; class=&quot;%3$s&quot; value=&quot;%4$s&quot; /&gt;'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $submit_field         HTML format for the markup surrounding the Submit button and comment hidden</span>&nbsp;</div></li><li><div><span class="comment"> *                                        fields. Default: '&lt;p class=&quot;form-submit&quot;&gt;%1$s %2$s&lt;/a&gt;', where %1$s is the</span>&nbsp;</div></li><li><div><span class="comment"> *                                        submit button markup and %2$s is the comment hidden fields.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $format               The comment form format. Default 'xhtml'. Accepts 'xhtml', 'html5'.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|WP_Post $post_id Post ID or WP_Post object to generate the form for. Default current post.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function comment_form( $args = array(), $post_id = null ) {&nbsp;</div></li><li><div>  if ( null === $post_id )&nbsp;</div></li><li><div>      $post_id = get_the_ID();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Exit the function when comments for the post are closed.</span>&nbsp;</div></li><li><div>  if ( ! comments_open( $post_id ) ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fires after the comment form if comments are closed.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'comment_form_comments_closed' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $commenter = wp_get_current_commenter();&nbsp;</div></li><li><div>  $user = wp_get_current_user();&nbsp;</div></li><li><div>  $user_identity = $user-&gt;exists() ? $user-&gt;display_name : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = wp_parse_args( $args );&nbsp;</div></li><li><div>  if ( ! isset( $args['format'] ) )&nbsp;</div></li><li><div>      $args['format'] = current_theme_supports( 'html5', 'comment-form' ) ? 'html5' : 'xhtml';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $req = get_option( 'require_name_email' );&nbsp;</div></li><li><div>  $aria_req = ( $req ? &quot; aria-required='true'&quot; : '' );&nbsp;</div></li><li><div>  $html_req = ( $req ? &quot; required='required'&quot; : '' );&nbsp;</div></li><li><div>  $html5 = 'html5' === $args['format'];&nbsp;</div></li><li><div>  $fields =  array(&nbsp;</div></li><li><div>      'author' =&gt; '&lt;p class=&quot;comment-form-author&quot;&gt;' . '&lt;label for=&quot;author&quot;&gt;' . __( 'Name' ) . ( $req ? ' &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;' : '' ) . '&lt;/label&gt; ' .&nbsp;</div></li><li><div>                  '&lt;input id=&quot;author&quot; name=&quot;author&quot; type=&quot;text&quot; value=&quot;' . esc_attr( $commenter['comment_author'] ) . '&quot; size=&quot;30&quot; maxlength=&quot;245&quot;' . $aria_req . $html_req . ' /&gt;&lt;/p&gt;', &nbsp;</div></li><li><div>      'email' =&gt; '&lt;p class=&quot;comment-form-email&quot;&gt;&lt;label for=&quot;email&quot;&gt;' . __( 'Email' ) . ( $req ? ' &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;' : '' ) . '&lt;/label&gt; ' .&nbsp;</div></li><li><div>                  '&lt;input id=&quot;email&quot; name=&quot;email&quot; ' . ( $html5 ? 'type=&quot;email&quot;' : 'type=&quot;text&quot;' ) . ' value=&quot;' . esc_attr(  $commenter['comment_author_email'] ) . '&quot; size=&quot;30&quot; maxlength=&quot;100&quot; aria-describedby=&quot;email-notes&quot;' . $aria_req . $html_req  . ' /&gt;&lt;/p&gt;', &nbsp;</div></li><li><div>      'url' =&gt; '&lt;p class=&quot;comment-form-url&quot;&gt;&lt;label for=&quot;url&quot;&gt;' . __( 'Website' ) . '&lt;/label&gt; ' .&nbsp;</div></li><li><div>                  '&lt;input id=&quot;url&quot; name=&quot;url&quot; ' . ( $html5 ? 'type=&quot;url&quot;' : 'type=&quot;text&quot;' ) . ' value=&quot;' . esc_attr( $commenter['comment_author_url'] ) . '&quot; size=&quot;30&quot; maxlength=&quot;200&quot; /&gt;&lt;/p&gt;', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $required_text = sprintf( ' ' . __('Required fields are marked %s'), '&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the default comment form fields.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $fields The default comment fields.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $fields = apply_filters( 'comment_form_default_fields', $fields );&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'fields' =&gt; $fields, &nbsp;</div></li><li><div>      'comment_field' =&gt; '&lt;p class=&quot;comment-form-comment&quot;&gt;&lt;label for=&quot;comment&quot;&gt;' . _x( 'Comment', 'noun' ) . '&lt;/label&gt; &lt;textarea id=&quot;comment&quot; name=&quot;comment&quot; cols=&quot;45&quot; rows=&quot;8&quot; maxlength=&quot;65525&quot; aria-required=&quot;true&quot; required=&quot;required&quot;&gt;&lt;/textarea&gt;&lt;/p&gt;', &nbsp;</div></li><li><div>      <span class="comment"><span class="comment">/** This filter is documented in wp-includes/link-template.php */</span></span>&nbsp;</div></li><li><div>      'must_log_in' =&gt; '&lt;p class=&quot;must-log-in&quot;&gt;' . sprintf(&nbsp;</div></li><li><div>                                    <span class="comment">/** translators: %s: login URL */</span>&nbsp;</div></li><li><div>                                    __( 'You must be &lt;a href=&quot;%s&quot;&gt;logged in&lt;/a&gt; to post a comment.' ), &nbsp;</div></li><li><div>                                    wp_login_url( apply_filters( 'the_permalink', get_permalink( $post_id ) ) )&nbsp;</div></li><li><div> ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      <span class="comment"><span class="comment">/** This filter is documented in wp-includes/link-template.php */</span></span>&nbsp;</div></li><li><div>      'logged_in_as' =&gt; '&lt;p class=&quot;logged-in-as&quot;&gt;' . sprintf(&nbsp;</div></li><li><div>                                    <span class="comment">/** translators: 1: edit user link, 2: accessibility text, 3: user name, 4: logout URL */</span>&nbsp;</div></li><li><div>                                    __( '&lt;a href=&quot;%1$s&quot; aria-label=&quot;%2$s&quot;&gt;Logged in as %3$s&lt;/a&gt;. &lt;a href=&quot;%4$s&quot;&gt;Log out?&lt;/a&gt;' ), &nbsp;</div></li><li><div>                                    get_edit_user_link(), &nbsp;</div></li><li><div>                                    <span class="comment">/** translators: %s: user name */</span>&nbsp;</div></li><li><div>                                    esc_attr( sprintf( __( 'Logged in as %s. Edit your profile.' ), $user_identity ) ), &nbsp;</div></li><li><div>                                    $user_identity, &nbsp;</div></li><li><div>                                    wp_logout_url( apply_filters( 'the_permalink', get_permalink( $post_id ) ) )&nbsp;</div></li><li><div> ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      'comment_notes_before' =&gt; '&lt;p class=&quot;comment-notes&quot;&gt;&lt;span id=&quot;email-notes&quot;&gt;' . __( 'Your email address will not be published.' ) . '&lt;/span&gt;'. ( $req ? $required_text : '' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      'comment_notes_after' =&gt; '', &nbsp;</div></li><li><div>      'action' =&gt; site_url( '/wp-comments-post.php' ), &nbsp;</div></li><li><div>      'id_form' =&gt; 'commentform', &nbsp;</div></li><li><div>      'id_submit' =&gt; 'submit', &nbsp;</div></li><li><div>      'class_form' =&gt; 'comment-form', &nbsp;</div></li><li><div>      'class_submit' =&gt; 'submit', &nbsp;</div></li><li><div>      'name_submit' =&gt; 'submit', &nbsp;</div></li><li><div>      'title_reply' =&gt; __( 'Leave a Reply' ), &nbsp;</div></li><li><div>      'title_reply_to' =&gt; __( 'Leave a Reply to %s' ), &nbsp;</div></li><li><div>      'title_reply_before' =&gt; '&lt;h3 id=&quot;reply-title&quot; class=&quot;comment-reply-title&quot;&gt;', &nbsp;</div></li><li><div>      'title_reply_after' =&gt; '&lt;/h3&gt;', &nbsp;</div></li><li><div>      'cancel_reply_before' =&gt; ' &lt;small&gt;', &nbsp;</div></li><li><div>      'cancel_reply_after' =&gt; '&lt;/small&gt;', &nbsp;</div></li><li><div>      'cancel_reply_link' =&gt; __( 'Cancel reply' ), &nbsp;</div></li><li><div>      'label_submit' =&gt; __( 'Post Comment' ), &nbsp;</div></li><li><div>      'submit_button' =&gt; '&lt;input name=&quot;%1$s&quot; type=&quot;submit&quot; id=&quot;%2$s&quot; class=&quot;%3$s&quot; value=&quot;%4$s&quot; /&gt;', &nbsp;</div></li><li><div>      'submit_field' =&gt; '&lt;p class=&quot;form-submit&quot;&gt;%1$s %2$s&lt;/p&gt;', &nbsp;</div></li><li><div>      'format' =&gt; 'xhtml', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the comment form default arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Use {@see 'comment_form_default_fields'} to filter the comment fields.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $defaults The default comment form arguments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $args = wp_parse_args( $args, apply_filters( 'comment_form_defaults', $defaults ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Ensure that the filtered args contain all required default values.</span>&nbsp;</div></li><li><div>  $args = array_merge( $defaults, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires before the comment form.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'comment_form_before' );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div id=&quot;respond&quot; class=&quot;comment-respond&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      echo $args['title_reply_before'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      comment_form_title( $args['title_reply'], $args['title_reply_to'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo $args['cancel_reply_before'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      cancel_comment_reply_link( $args['cancel_reply_link'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo $args['cancel_reply_after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo $args['title_reply_after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( get_option( 'comment_registration' ) && !is_user_logged_in() ) :&nbsp;</div></li><li><div>          echo $args['must_log_in'];&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Fires after the HTML-formatted 'must log in after' message in the comment form.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          do_action( 'comment_form_must_log_in_after' );&nbsp;</div></li><li><div>      else : ?&gt;&nbsp;</div></li><li><div>          &lt;form action=&quot;&lt;?php echo esc_url( $args['action'] ); ?&gt;&quot; method=&quot;post&quot; id=&quot;&lt;?php echo esc_attr( $args['id_form'] ); ?&gt;&quot; class=&quot;&lt;?php echo esc_attr( $args['class_form'] ); ?&gt;&quot;&lt;?php echo $html5 ? ' novalidate' : ''; ?&gt;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Fires at the top of the comment form, inside the form tag.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              do_action( 'comment_form_top' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_user_logged_in() ) :&nbsp;</div></li><li><div>                  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                   * Filters the 'logged in' message for the comment form for display.</span>&nbsp;</div></li><li><div><span class="comment">                   *</span>&nbsp;</div></li><li><div><span class="comment">                   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                   *</span>&nbsp;</div></li><li><div><span class="comment">                   * @param string $args_logged_in The logged-in-as HTML-formatted message.</span>&nbsp;</div></li><li><div><span class="comment">                   * @param array  $commenter      An array containing the comment author's</span>&nbsp;</div></li><li><div><span class="comment">                   *                               username, email, and URL.</span>&nbsp;</div></li><li><div><span class="comment">                   * @param string $user_identity  If the commenter is a registered user, </span>&nbsp;</div></li><li><div><span class="comment">                   *                               the display name, blank otherwise.</span>&nbsp;</div></li><li><div><span class="comment">                   */</span>&nbsp;</div></li><li><div>                  echo apply_filters( 'comment_form_logged_in', $args['logged_in_as'], $commenter, $user_identity );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                   * Fires after the is_user_logged_in() check in the comment form.</span>&nbsp;</div></li><li><div><span class="comment">                   *</span>&nbsp;</div></li><li><div><span class="comment">                   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                   *</span>&nbsp;</div></li><li><div><span class="comment">                   * @param array  $commenter     An array containing the comment author's</span>&nbsp;</div></li><li><div><span class="comment">                   *                              username, email, and URL.</span>&nbsp;</div></li><li><div><span class="comment">                   * @param string $user_identity If the commenter is a registered user, </span>&nbsp;</div></li><li><div><span class="comment">                   *                              the display name, blank otherwise.</span>&nbsp;</div></li><li><div><span class="comment">                   */</span>&nbsp;</div></li><li><div>                  do_action( 'comment_form_logged_in_after', $commenter, $user_identity );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              else :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo $args['comment_notes_before'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Prepare an array of all fields, including the textarea</span>&nbsp;</div></li><li><div>              $comment_fields = array( 'comment' =&gt; $args['comment_field'] ) + (array) $args['fields'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Filters the comment form fields, including the textarea.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @param array $comment_fields The comment fields.</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              $comment_fields = apply_filters( 'comment_form_fields', $comment_fields );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Get an array of field names, excluding the textarea</span>&nbsp;</div></li><li><div>              $comment_field_keys = array_diff( array_keys( $comment_fields ), array( 'comment' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Get the first and the last field name, excluding the textarea</span>&nbsp;</div></li><li><div>              $first_field = reset( $comment_field_keys );&nbsp;</div></li><li><div>              $last_field = end( $comment_field_keys );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $comment_fields as $name =&gt; $field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( 'comment' === $name ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                       * Filters the content of the comment textarea field for display.</span>&nbsp;</div></li><li><div><span class="comment">                       *</span>&nbsp;</div></li><li><div><span class="comment">                       * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                       *</span>&nbsp;</div></li><li><div><span class="comment">                       * @param string $args_comment_field The content of the comment textarea field.</span>&nbsp;</div></li><li><div><span class="comment">                       */</span>&nbsp;</div></li><li><div>                      echo apply_filters( 'comment_form_field_comment', $field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      echo $args['comment_notes_after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  } elseif ( ! is_user_logged_in() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( $first_field === $name ) {&nbsp;</div></li><li><div>                          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                           * Fires before the comment fields in the comment form, excluding the textarea.</span>&nbsp;</div></li><li><div><span class="comment">                           *</span>&nbsp;</div></li><li><div><span class="comment">                           * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                           */</span>&nbsp;</div></li><li><div>                          do_action( 'comment_form_before_fields' );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                       * Filters a comment form field for display.</span>&nbsp;</div></li><li><div><span class="comment">                       *</span>&nbsp;</div></li><li><div><span class="comment">                       * The dynamic portion of the filter hook, `$name`, refers to the name</span>&nbsp;</div></li><li><div><span class="comment">                       * of the comment form field. Such as 'author', 'email', or 'url'.</span>&nbsp;</div></li><li><div><span class="comment">                       *</span>&nbsp;</div></li><li><div><span class="comment">                       * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                       *</span>&nbsp;</div></li><li><div><span class="comment">                       * @param string $field The HTML-formatted output of the comment form field.</span>&nbsp;</div></li><li><div><span class="comment">                       */</span>&nbsp;</div></li><li><div>                      echo apply_filters( &quot;comment_form_field_{$name}&quot;, $field ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( $last_field === $name ) {&nbsp;</div></li><li><div>                          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                           * Fires after the comment fields in the comment form, excluding the textarea.</span>&nbsp;</div></li><li><div><span class="comment">                           *</span>&nbsp;</div></li><li><div><span class="comment">                           * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">                           */</span>&nbsp;</div></li><li><div>                          do_action( 'comment_form_after_fields' );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $submit_button = sprintf(&nbsp;</div></li><li><div>                  $args['submit_button'], &nbsp;</div></li><li><div>                  esc_attr( $args['name_submit'] ), &nbsp;</div></li><li><div>                  esc_attr( $args['id_submit'] ), &nbsp;</div></li><li><div>                  esc_attr( $args['class_submit'] ), &nbsp;</div></li><li><div>                  esc_attr( $args['label_submit'] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Filters the submit button for the comment form to display.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since 4.2.0</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @param string $submit_button HTML markup for the submit button.</span>&nbsp;</div></li><li><div><span class="comment">               * @param array  $args          Arguments passed to `comment_form()`.</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              $submit_button = apply_filters( 'comment_form_submit_button', $submit_button, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $submit_field = sprintf(&nbsp;</div></li><li><div>                  $args['submit_field'], &nbsp;</div></li><li><div>                  $submit_button, &nbsp;</div></li><li><div>                  get_comment_id_fields( $post_id )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Filters the submit field for the comment form to display.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * The submit field includes the submit button, hidden fields for the</span>&nbsp;</div></li><li><div><span class="comment">               * comment form, and any wrapper markup.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since 4.2.0</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @param string $submit_field HTML markup for the submit field.</span>&nbsp;</div></li><li><div><span class="comment">               * @param array  $args         Arguments passed to comment_form().</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              echo apply_filters( 'comment_form_submit_field', $submit_field, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Fires at the bottom of the comment form, inside the closing &lt;/form&gt; tag.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @param int $post_id The post ID.</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              do_action( 'comment_form', $post_id );&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- #respond --&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires after the comment form.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'comment_form_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>