<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="wordpress" data-version="4.7" data-type="class" data-id="5955"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp_oembed | class | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="WP_oEmbed, class, wordpress, 4.7" /><meta name="description" content="Core class used to implement oEmbed functionality." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.24"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=6343395d58b9ee8b730b7bdc2ef67823' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.24' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/wp_o_embed/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwp_o_embed%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwp_o_embed%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7-class-wp_o_embed","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp_o_embed" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7." href="http://hookr.io/4.7/" class="H_VERSION"><span property="name">4.7</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/4.7/classes/" class=""><span property="name">classes</span></a><meta property="position" content="3"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp_o_embed</span><meta property="position" content="4"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="6307"><a href="http://hookr.io/4.7/all/" title="All">All <span class="count badge">6307</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="active" data-id="class" data-count="351"><a href="http://hookr.io/4.7/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2851"><a href="http://hookr.io/4.7/functions/" title="Functions">Functions <span class="count badge">2851</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>WP_oEmbed</strong></h1><p>Core class used to implement oEmbed functionality.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/4.7/files/wp-includes-class-oembed/" class="file">/wp-includes/class-oembed.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="19" class="block" start="19"><li><div>class WP_oEmbed {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A list of oEmbed providers.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public $providers = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A list of an early oEmbed providers.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @static&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static $early_providers = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A list of private/protected methods, used for backward compatibility.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.2.0&nbsp;</div></li><li><div>     * @access private&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private $compat_methods = array( '_fetch_with_format', '_parse_json', '_parse_xml', '_parse_body' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Constructor.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function __construct() {&nbsp;</div></li><li><div>        $host = urlencode( home_url() );&nbsp;</div></li><li><div>        $providers = array(&nbsp;</div></li><li><div>            '#https?://((m|www)\.)?youtube\.com/watch.*#i' =&gt; array( 'https://www.youtube.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://((m|www)\.)?youtube\.com/playlist.*#i' =&gt; array( 'https://www.youtube.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://youtu\.be/.*#i' =&gt; array( 'https://www.youtube.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(.+\.)?vimeo\.com/.*#i' =&gt; array( 'https://vimeo.com/api/oembed.{format}', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?dailymotion\.com/.*#i' =&gt; array( 'https://www.dailymotion.com/services/oembed', true ), &nbsp;</div></li><li><div>            '#https?://dai\.ly/.*#i' =&gt; array( 'https://www.dailymotion.com/services/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?flickr\.com/.*#i' =&gt; array( 'https://www.flickr.com/services/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://flic\.kr/.*#i' =&gt; array( 'https://www.flickr.com/services/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://(.+\.)?smugmug\.com/.*#i' =&gt; array( 'https://api.smugmug.com/services/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?hulu\.com/watch/.*#i' =&gt; array( 'http://www.hulu.com/api/oembed.{format}', true ), &nbsp;</div></li><li><div>            'http://i*.photobucket.com/albums/*' =&gt; array( 'http://api.photobucket.com/oembed', false ), &nbsp;</div></li><li><div>            'http://gi*.photobucket.com/groups/*' =&gt; array( 'http://api.photobucket.com/oembed', false ), &nbsp;</div></li><li><div>            '#https?://(www\.)?scribd\.com/doc/.*#i' =&gt; array( 'https://www.scribd.com/services/oembed', true ), &nbsp;</div></li><li><div>            '#https?://wordpress\.tv/.*#i' =&gt; array( 'https://wordpress.tv/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://(.+\.)?polldaddy\.com/.*#i' =&gt; array( 'https://polldaddy.com/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://poll\.fm/.*#i' =&gt; array( 'https://polldaddy.com/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?funnyordie\.com/videos/.*#i' =&gt; array( 'http://www.funnyordie.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/\w{1, 15}/status(es)?/.*#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/\w{1, 15}$#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/\w{1, 15}/likes$#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/\w{1, 15}/lists/.*#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/\w{1, 15}/timelines/.*#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?twitter\.com/i/moments/.*#i' =&gt; array( 'https://publish.twitter.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://vine\.co/v/.*#i' =&gt; array( 'https://vine.co/oembed.{format}', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?soundcloud\.com/.*#i' =&gt; array( 'https://soundcloud.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(.+?\.)?slideshare\.net/.*#i' =&gt; array( 'https://www.slideshare.net/api/oembed/2', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?instagr(\.am|am\.com)/p/.*#i' =&gt; array( 'https://api.instagram.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(open|play)\.spotify\.com/.*#i' =&gt; array( 'https://embed.spotify.com/oembed/', true ), &nbsp;</div></li><li><div>            '#https?://(.+\.)?imgur\.com/.*#i' =&gt; array( 'http://api.imgur.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?meetu(\.ps|p\.com)/.*#i' =&gt; array( 'https://api.meetup.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?issuu\.com/.+/docs/.+#i' =&gt; array( 'https://issuu.com/oembed_wp', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?collegehumor\.com/video/.*#i' =&gt; array( 'http://www.collegehumor.com/oembed.{format}', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?mixcloud\.com/.*#i' =&gt; array( 'https://www.mixcloud.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.|embed\.)?ted\.com/talks/.*#i' =&gt; array( 'https://www.ted.com/services/v1/oembed.{format}', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?(animoto|video214)\.com/play/.*#i' =&gt; array( 'https://animoto.com/oembeds/create', true ), &nbsp;</div></li><li><div>            '#https?://(.+)\.tumblr\.com/post/.*#i' =&gt; array( 'https://www.tumblr.com/oembed/1.0', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?kickstarter\.com/projects/.*#i' =&gt; array( 'https://www.kickstarter.com/services/oembed', true ), &nbsp;</div></li><li><div>            '#https?://kck\.st/.*#i' =&gt; array( 'https://www.kickstarter.com/services/oembed', true ), &nbsp;</div></li><li><div>            '#https?://cloudup\.com/.*#i' =&gt; array( 'https://cloudup.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?reverbnation\.com/.*#i' =&gt; array( 'https://www.reverbnation.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://videopress\.com/v/.*#' =&gt; array( 'https://public-api.wordpress.com/oembed/1.0/?for=' . $host, true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?reddit\.com/r/[^/]+/comments/.*#i' =&gt; array( 'https://www.reddit.com/oembed', true ), &nbsp;</div></li><li><div>            '#https?://(www\.)?speakerdeck\.com/.*#i' =&gt; array( 'https://speakerdeck.com/oembed.{format}', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/.*/posts/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/.*/activity/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/.*/photos/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/photo(s/|\.php).*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/permalink\.php.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/media/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/questions/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/notes/.*#i' =&gt; array( 'https://www.facebook.com/plugins/post/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/.*/videos/.*#i' =&gt; array( 'https://www.facebook.com/plugins/video/oembed.json/', true ), &nbsp;</div></li><li><div>            '#https?://www\.facebook\.com/video\.php.*#i' =&gt; array( 'https://www.facebook.com/plugins/video/oembed.json/', true ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( self::$early_providers['add'] ) ) {&nbsp;</div></li><li><div>            foreach ( self::$early_providers['add'] as $format =&gt; $data ) {&nbsp;</div></li><li><div>                $providers[ $format ] = $data;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( self::$early_providers['remove'] ) ) {&nbsp;</div></li><li><div>            foreach ( self::$early_providers['remove'] as $format ) {&nbsp;</div></li><li><div>                unset( $providers[ $format ] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$early_providers = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters the list of whitelisted oEmbed providers.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Since WordPress 4.4, oEmbed discovery is enabled for all users and allows embedding of sanitized&nbsp;</div></li><li><div>         * iframes. The providers in this list are whitelisted, meaning they are trusted and allowed to&nbsp;</div></li><li><div>         * embed any content, such as iframes, videos, JavaScript, and arbitrary HTML.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Supported providers:&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * |   Provider   |        Flavor         | Supports HTTPS |   Since   |&nbsp;</div></li><li><div>         * | ------------ | --------------------- | :------------: | --------- |&nbsp;</div></li><li><div>         * | Dailymotion  | dailymotion.com       |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | Flickr       | flickr.com            |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | Hulu         | hulu.com              |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | Photobucket  | photobucket.com       |      No        | 2.9.0     |&nbsp;</div></li><li><div>         * | Scribd       | scribd.com            |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | Vimeo        | vimeo.com             |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | WordPress.tv | wordpress.tv          |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | YouTube      | youtube.com/watch     |      Yes       | 2.9.0     |&nbsp;</div></li><li><div>         * | Funny or Die | funnyordie.com        |      Yes       | 3.0.0     |&nbsp;</div></li><li><div>         * | Polldaddy    | polldaddy.com         |      Yes       | 3.0.0     |&nbsp;</div></li><li><div>         * | SmugMug      | smugmug.com           |      Yes       | 3.0.0     |&nbsp;</div></li><li><div>         * | YouTube      | youtu.be              |      Yes       | 3.0.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com           |      Yes       | 3.4.0     |&nbsp;</div></li><li><div>         * | Instagram    | instagram.com         |      Yes       | 3.5.0     |&nbsp;</div></li><li><div>         * | Instagram    | instagr.am            |      Yes       | 3.5.0     |&nbsp;</div></li><li><div>         * | Slideshare   | slideshare.net        |      Yes       | 3.5.0     |&nbsp;</div></li><li><div>         * | SoundCloud   | soundcloud.com        |      Yes       | 3.5.0     |&nbsp;</div></li><li><div>         * | Dailymotion  | dai.ly                |      Yes       | 3.6.0     |&nbsp;</div></li><li><div>         * | Flickr       | flic.kr               |      Yes       | 3.6.0     |&nbsp;</div></li><li><div>         * | Spotify      | spotify.com           |      Yes       | 3.6.0     |&nbsp;</div></li><li><div>         * | Imgur        | imgur.com             |      Yes       | 3.9.0     |&nbsp;</div></li><li><div>         * | Meetup.com   | meetup.com            |      Yes       | 3.9.0     |&nbsp;</div></li><li><div>         * | Meetup.com   | meetu.ps              |      Yes       | 3.9.0     |&nbsp;</div></li><li><div>         * | Animoto      | animoto.com           |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | Animoto      | video214.com          |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | CollegeHumor | collegehumor.com      |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | Issuu        | issuu.com             |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | Mixcloud     | mixcloud.com          |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | Polldaddy    | poll.fm               |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | TED          | ted.com               |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | YouTube      | youtube.com/playlist  |      Yes       | 4.0.0     |&nbsp;</div></li><li><div>         * | Vine         | vine.co               |      Yes       | 4.1.0     |&nbsp;</div></li><li><div>         * | Tumblr       | tumblr.com            |      Yes       | 4.2.0     |&nbsp;</div></li><li><div>         * | Kickstarter  | kickstarter.com       |      Yes       | 4.2.0     |&nbsp;</div></li><li><div>         * | Kickstarter  | kck.st                |      Yes       | 4.2.0     |&nbsp;</div></li><li><div>         * | Cloudup      | cloudup.com           |      Yes       | 4.3.0     |&nbsp;</div></li><li><div>         * | ReverbNation | reverbnation.com      |      Yes       | 4.4.0     |&nbsp;</div></li><li><div>         * | VideoPress   | videopress.com        |      Yes       | 4.4.0     |&nbsp;</div></li><li><div>         * | Reddit       | reddit.com            |      Yes       | 4.4.0     |&nbsp;</div></li><li><div>         * | Speaker Deck | speakerdeck.com       |      Yes       | 4.4.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com/timelines |      Yes       | 4.5.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com/moments   |      Yes       | 4.5.0     |&nbsp;</div></li><li><div>         * | Facebook     | facebook.com          |      Yes       | 4.7.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com/user      |      Yes       | 4.7.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com/likes     |      Yes       | 4.7.0     |&nbsp;</div></li><li><div>         * | Twitter      | twitter.com/lists     |      Yes       | 4.7.0     |&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * No longer supported providers:&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * |   Provider   |        Flavor        | Supports HTTPS |   Since   |  Removed  |&nbsp;</div></li><li><div>         * | ------------ | -------------------- | :------------: | --------- | --------- |&nbsp;</div></li><li><div>         * | Qik          | qik.com              |      Yes       | 2.9.0     | 3.9.0     |&nbsp;</div></li><li><div>         * | Viddler      | viddler.com          |      Yes       | 2.9.0     | 4.0.0     |&nbsp;</div></li><li><div>         * | Revision3    | revision3.com        |      No        | 2.9.0     | 4.2.0     |&nbsp;</div></li><li><div>         * | Blip         | blip.tv              |      No        | 2.9.0     | 4.4.0     |&nbsp;</div></li><li><div>         * | Rdio         | rdio.com             |      Yes       | 3.6.0     | 4.4.1     |&nbsp;</div></li><li><div>         * | Rdio         | rd.io                |      Yes       | 3.6.0     | 4.4.1     |&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @see wp_oembed_add_provider()&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.9.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array $providers An array of popular oEmbed providers.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $this-&gt;providers = apply_filters( 'oembed_providers', $providers );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Fix any embeds that contain new lines in the middle of the HTML which breaks wpautop().&nbsp;</div></li><li><div>        add_filter( 'oembed_dataparse', array($this, '_strip_newlines'), 10, 3 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Exposes private/protected methods for backward compatibility.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param callable $name      Method to call.&nbsp;</div></li><li><div>     * @param array    $arguments Arguments to pass when calling.&nbsp;</div></li><li><div>     * @return mixed|bool Return value of the callback, false otherwise.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function __call( $name, $arguments ) {&nbsp;</div></li><li><div>        if ( in_array( $name, $this-&gt;compat_methods ) ) {&nbsp;</div></li><li><div>            return call_user_func_array( array( $this, $name ), $arguments );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Takes a URL and returns the corresponding oEmbed provider's URL, if there is one.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see WP_oEmbed::discover()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string        $url  The URL to the content.&nbsp;</div></li><li><div>     * @param string|array  $args Optional provider arguments.&nbsp;</div></li><li><div>     * @return false|string False on failure, otherwise the oEmbed provider URL.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function get_provider( $url, $args = '' ) {&nbsp;</div></li><li><div>        $args = wp_parse_args( $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $provider = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !isset($args['discover']) )&nbsp;</div></li><li><div>            $args['discover'] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $this-&gt;providers as $matchmask =&gt; $data ) {&nbsp;</div></li><li><div>            list( $providerurl, $regex ) = $data;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Turn the asterisk-type provider URLs into regex&nbsp;</div></li><li><div>            if ( !$regex ) {&nbsp;</div></li><li><div>                $matchmask = '#' . str_replace( '___wildcard___', '(.+)', preg_quote( str_replace( '*', '___wildcard___', $matchmask ), '#' ) ) . '#i';&nbsp;</div></li><li><div>                $matchmask = preg_replace( '|^#http\\\://|', '#https?\://', $matchmask );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( preg_match( $matchmask, $url ) ) {&nbsp;</div></li><li><div>                $provider = str_replace( '{format}', 'json', $providerurl ); // JSON is easier to deal with than XML&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !$provider && $args['discover'] )&nbsp;</div></li><li><div>            $provider = $this-&gt;discover( $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $provider;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Adds an oEmbed provider.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * The provider is added just-in-time when wp_oembed_add_provider() is called before&nbsp;</div></li><li><div>     * the {@see 'plugins_loaded'} hook.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * The just-in-time addition is for the benefit of the {@see 'oembed_providers'} filter.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @static&nbsp;</div></li><li><div>     * @since 4.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see wp_oembed_add_provider()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $format   Format of URL that this provider can handle. You can use&nbsp;</div></li><li><div>     *                         asterisks as wildcards.&nbsp;</div></li><li><div>     * @param string $provider The URL to the oEmbed provider..&nbsp;</div></li><li><div>     * @param bool   $regex    Optional. Whether the $format parameter is in a regex format.&nbsp;</div></li><li><div>     *                         Default false.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function _add_provider_early( $format, $provider, $regex = false ) {&nbsp;</div></li><li><div>        if ( empty( self::$early_providers['add'] ) ) {&nbsp;</div></li><li><div>            self::$early_providers['add'] = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$early_providers['add'][ $format ] = array( $provider, $regex );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Removes an oEmbed provider.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * The provider is removed just-in-time when wp_oembed_remove_provider() is called before&nbsp;</div></li><li><div>     * the {@see 'plugins_loaded'} hook.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * The just-in-time removal is for the benefit of the {@see 'oembed_providers'} filter.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @static&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see wp_oembed_remove_provider()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $format The format of URL that this provider can handle. You can use&nbsp;</div></li><li><div>     *                       asterisks as wildcards.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function _remove_provider_early( $format ) {&nbsp;</div></li><li><div>        if ( empty( self::$early_providers['remove'] ) ) {&nbsp;</div></li><li><div>            self::$early_providers['remove'] = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$early_providers['remove'][] = $format;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The do-it-all function that takes a URL and attempts to return the HTML.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see WP_oEmbed::fetch()&nbsp;</div></li><li><div>     * @see WP_oEmbed::data2html()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string       $url  The URL to the content that should be attempted to be embedded.&nbsp;</div></li><li><div>     * @param array|string $args Optional. Arguments, usually passed from a shortcode. Default empty.&nbsp;</div></li><li><div>     * @return false|string False on failure, otherwise the UNSANITIZED (and potentially unsafe) HTML that should be used to embed.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function get_html( $url, $args = '' ) {&nbsp;</div></li><li><div>        $args = wp_parse_args( $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters the oEmbed result before any HTTP requests are made.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * This allows one to short-circuit the default logic, perhaps by&nbsp;</div></li><li><div>         * replacing it with a routine that is more optimal for your setup.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Passing a non-null value to the filter will effectively short-circuit retrieval, &nbsp;</div></li><li><div>         * returning the passed value instead.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 4.5.3&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param null|string $result The UNSANITIZED (and potentially unsafe) HTML that should be used to embed. Default null.&nbsp;</div></li><li><div>         * @param string      $url    The URL to the content that should be attempted to be embedded.&nbsp;</div></li><li><div>         * @param array       $args   Optional. Arguments, usually passed from a shortcode. Default empty.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $pre = apply_filters( 'pre_oembed_result', null, $url, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( null !== $pre ) {&nbsp;</div></li><li><div>            return $pre;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $provider = $this-&gt;get_provider( $url, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $provider || false === $data = $this-&gt;fetch( $provider, $url, $args ) ) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters the HTML returned by the oEmbed provider.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.9.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param string $data The returned oEmbed HTML.&nbsp;</div></li><li><div>         * @param string $url  URL of the content to be embedded.&nbsp;</div></li><li><div>         * @param array  $args Optional arguments, usually passed from a shortcode.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        return apply_filters( 'oembed_result', $this-&gt;data2html( $data, $url ), $url, $args );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Attempts to discover link tags at the given URL for an oEmbed provider.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $url The URL that should be inspected for discovery `&lt;link&gt;` tags.&nbsp;</div></li><li><div>     * @return false|string False on failure, otherwise the oEmbed provider URL.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function discover( $url ) {&nbsp;</div></li><li><div>        $providers = array();&nbsp;</div></li><li><div>        $args = array(&nbsp;</div></li><li><div>            'limit_response_size' =&gt; 153600, // 150 KB&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters oEmbed remote get arguments.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 4.0.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @see WP_Http::request()&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array  $args oEmbed remote get arguments.&nbsp;</div></li><li><div>         * @param string $url  URL to be inspected.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $args = apply_filters( 'oembed_remote_get_args', $args, $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Fetch URL content&nbsp;</div></li><li><div>        $request = wp_safe_remote_get( $url, $args );&nbsp;</div></li><li><div>        if ( $html = wp_remote_retrieve_body( $request ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /**&nbsp;</div></li><li><div>             * Filters the link types that contain oEmbed provider URLs.&nbsp;</div></li><li><div>             *&nbsp;</div></li><li><div>             * @since 2.9.0&nbsp;</div></li><li><div>             *&nbsp;</div></li><li><div>             * @param array $format Array of oEmbed link types. Accepts 'application/json+oembed', &nbsp;</div></li><li><div>             *                      'text/xml+oembed', and 'application/xml+oembed' (incorrect, &nbsp;</div></li><li><div>             *                      used by at least Vimeo).&nbsp;</div></li><li><div>             */&nbsp;</div></li><li><div>            $linktypes = apply_filters( 'oembed_linktypes', array(&nbsp;</div></li><li><div>                'application/json+oembed' =&gt; 'json', &nbsp;</div></li><li><div>                'text/xml+oembed' =&gt; 'xml', &nbsp;</div></li><li><div>                'application/xml+oembed' =&gt; 'xml', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Strip &lt;body&gt;&nbsp;</div></li><li><div>            if ( $html_head_end = stripos( $html, '&lt;/head&gt;' ) ) {&nbsp;</div></li><li><div>                $html = substr( $html, 0, $html_head_end );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Do a quick check&nbsp;</div></li><li><div>            $tagfound = false;&nbsp;</div></li><li><div>            foreach ( $linktypes as $linktype =&gt; $format ) {&nbsp;</div></li><li><div>                if ( stripos($html, $linktype) ) {&nbsp;</div></li><li><div>                    $tagfound = true;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $tagfound && preg_match_all( '#&lt;link([^&lt;&gt;]+)/?&gt;#iU', $html, $links ) ) {&nbsp;</div></li><li><div>                foreach ( $links[1] as $link ) {&nbsp;</div></li><li><div>                    $atts = shortcode_parse_atts( $link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( !empty($atts['type']) && !empty($linktypes[$atts['type']]) && !empty($atts['href']) ) {&nbsp;</div></li><li><div>                        $providers[$linktypes[$atts['type']]] = htmlspecialchars_decode( $atts['href'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // Stop here if it's JSON (that's all we need)&nbsp;</div></li><li><div>                        if ( 'json' == $linktypes[$atts['type']] )&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // JSON is preferred to XML&nbsp;</div></li><li><div>        if ( !empty($providers['json']) )&nbsp;</div></li><li><div>            return $providers['json'];&nbsp;</div></li><li><div>        elseif ( !empty($providers['xml']) )&nbsp;</div></li><li><div>            return $providers['xml'];&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Connects to a oEmbed provider and returns the result.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string       $provider The URL to the oEmbed provider.&nbsp;</div></li><li><div>     * @param string       $url      The URL to the content that is desired to be embedded.&nbsp;</div></li><li><div>     * @param array|string $args     Optional. Arguments, usually passed from a shortcode. Default empty.&nbsp;</div></li><li><div>     * @return false|object False on failure, otherwise the result in the form of an object.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function fetch( $provider, $url, $args = '' ) {&nbsp;</div></li><li><div>        $args = wp_parse_args( $args, wp_embed_defaults( $url ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $provider = add_query_arg( 'maxwidth', (int) $args['width'], $provider );&nbsp;</div></li><li><div>        $provider = add_query_arg( 'maxheight', (int) $args['height'], $provider );&nbsp;</div></li><li><div>        $provider = add_query_arg( 'url', urlencode($url), $provider );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters the oEmbed URL to be fetched.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.9.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param string $provider URL of the oEmbed provider.&nbsp;</div></li><li><div>         * @param string $url      URL of the content to be embedded.&nbsp;</div></li><li><div>         * @param array  $args     Optional arguments, usually passed from a shortcode.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $provider = apply_filters( 'oembed_fetch_url', $provider, $url, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( array( 'json', 'xml' ) as $format ) {&nbsp;</div></li><li><div>            $result = $this-&gt;_fetch_with_format( $provider, $format );&nbsp;</div></li><li><div>            if ( is_wp_error( $result ) && 'not-implemented' == $result-&gt;get_error_code() )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            return ( $result && ! is_wp_error( $result ) ) ? $result : false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Fetches result from an oEmbed provider for a specific format and complete provider URL&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 3.0.0&nbsp;</div></li><li><div>     * @access private&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $provider_url_with_args URL to the provider with full arguments list (url, maxheight, etc.)&nbsp;</div></li><li><div>     * @param string $format Format to use&nbsp;</div></li><li><div>     * @return false|object|WP_Error False on failure, otherwise the result in the form of an object.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function _fetch_with_format( $provider_url_with_args, $format ) {&nbsp;</div></li><li><div>        $provider_url_with_args = add_query_arg( 'format', $format, $provider_url_with_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This filter is documented in wp-includes/class-oembed.php */&nbsp;</div></li><li><div>        $args = apply_filters( 'oembed_remote_get_args', array(), $provider_url_with_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $response = wp_safe_remote_get( $provider_url_with_args, $args );&nbsp;</div></li><li><div>        if ( 501 == wp_remote_retrieve_response_code( $response ) )&nbsp;</div></li><li><div>            return new WP_Error( 'not-implemented' );&nbsp;</div></li><li><div>        if ( ! $body = wp_remote_retrieve_body( $response ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        $parse_method = &quot;_parse_$format&quot;;&nbsp;</div></li><li><div>        return $this-&gt;$parse_method( $body );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Parses a json response body.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 3.0.0&nbsp;</div></li><li><div>     * @access private&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $response_body&nbsp;</div></li><li><div>     * @return object|false&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function _parse_json( $response_body ) {&nbsp;</div></li><li><div>        $data = json_decode( trim( $response_body ) );&nbsp;</div></li><li><div>        return ( $data && is_object( $data ) ) ? $data : false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Parses an XML response body.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 3.0.0&nbsp;</div></li><li><div>     * @access private&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $response_body&nbsp;</div></li><li><div>     * @return object|false&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function _parse_xml( $response_body ) {&nbsp;</div></li><li><div>        if ( ! function_exists( 'libxml_disable_entity_loader' ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $loader = libxml_disable_entity_loader( true );&nbsp;</div></li><li><div>        $errors = libxml_use_internal_errors( true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $return = $this-&gt;_parse_xml_body( $response_body );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        libxml_use_internal_errors( $errors );&nbsp;</div></li><li><div>        libxml_disable_entity_loader( $loader );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Serves as a helper function for parsing an XML response body.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 3.6.0&nbsp;</div></li><li><div>     * @access private&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $response_body&nbsp;</div></li><li><div>     * @return stdClass|false&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function _parse_xml_body( $response_body ) {&nbsp;</div></li><li><div>        if ( ! function_exists( 'simplexml_import_dom' ) || ! class_exists( 'DOMDocument', false ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $dom = new DOMDocument;&nbsp;</div></li><li><div>        $success = $dom-&gt;loadXML( $response_body );&nbsp;</div></li><li><div>        if ( ! $success )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $dom-&gt;doctype ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $dom-&gt;childNodes as $child ) {&nbsp;</div></li><li><div>            if ( XML_DOCUMENT_TYPE_NODE === $child-&gt;nodeType )&nbsp;</div></li><li><div>                return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $xml = simplexml_import_dom( $dom );&nbsp;</div></li><li><div>        if ( ! $xml )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $return = new stdClass;&nbsp;</div></li><li><div>        foreach ( $xml as $key =&gt; $value ) {&nbsp;</div></li><li><div>            $return-&gt;$key = (string) $value;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Converts a data object from WP_oEmbed::fetch() and returns the HTML.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param object $data A data object result from an oEmbed provider.&nbsp;</div></li><li><div>     * @param string $url The URL to the content that is desired to be embedded.&nbsp;</div></li><li><div>     * @return false|string False on error, otherwise the HTML needed to embed.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function data2html( $data, $url ) {&nbsp;</div></li><li><div>        if ( ! is_object( $data ) || empty( $data-&gt;type ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $return = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $data-&gt;type ) {&nbsp;</div></li><li><div>            case 'photo':&nbsp;</div></li><li><div>                if ( empty( $data-&gt;url ) || empty( $data-&gt;width ) || empty( $data-&gt;height ) )&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                if ( ! is_string( $data-&gt;url ) || ! is_numeric( $data-&gt;width ) || ! is_numeric( $data-&gt;height ) )&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $title = ! empty( $data-&gt;title ) && is_string( $data-&gt;title ) ? $data-&gt;title : '';&nbsp;</div></li><li><div>                $return = '&lt;a href=&quot;' . esc_url( $url ) . '&quot;&gt;&lt;img src=&quot;' . esc_url( $data-&gt;url ) . '&quot; alt=&quot;' . esc_attr($title) . '&quot; width=&quot;' . esc_attr($data-&gt;width) . '&quot; height=&quot;' . esc_attr($data-&gt;height) . '&quot; /&gt;&lt;/a&gt;';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'video':&nbsp;</div></li><li><div>            case 'rich':&nbsp;</div></li><li><div>                if ( ! empty( $data-&gt;html ) && is_string( $data-&gt;html ) )&nbsp;</div></li><li><div>                    $return = $data-&gt;html;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'link':&nbsp;</div></li><li><div>                if ( ! empty( $data-&gt;title ) && is_string( $data-&gt;title ) )&nbsp;</div></li><li><div>                    $return = '&lt;a href=&quot;' . esc_url( $url ) . '&quot;&gt;' . esc_html( $data-&gt;title ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                $return = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters the returned oEmbed HTML.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Use this filter to add support for custom data types, or to filter the result.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.9.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param string $return The returned oEmbed HTML.&nbsp;</div></li><li><div>         * @param object $data   A data object result from an oEmbed provider.&nbsp;</div></li><li><div>         * @param string $url    The URL of the content to be embedded.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        return apply_filters( 'oembed_dataparse', $return, $data, $url );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Strips any new lines from the HTML.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.0 as strip_scribd_newlines()&nbsp;</div></li><li><div>     * @since 3.0.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $html Existing HTML.&nbsp;</div></li><li><div>     * @param object $data Data object from WP_oEmbed::data2html()&nbsp;</div></li><li><div>     * @param string $url The original URL passed to oEmbed.&nbsp;</div></li><li><div>     * @return string Possibly modified $html&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function _strip_newlines( $html, $data, $url ) {&nbsp;</div></li><li><div>        if ( false === strpos( $html, &quot;\n&quot; ) ) {&nbsp;</div></li><li><div>            return $html;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $count = 1;&nbsp;</div></li><li><div>        $found = array();&nbsp;</div></li><li><div>        $token = '__PRE__';&nbsp;</div></li><li><div>        $search = array( &quot;\t&quot;, &quot;\n&quot;, &quot;\r&quot;, ' ' );&nbsp;</div></li><li><div>        $replace = array( '__TAB__', '__NL__', '__CR__', '__SPACE__' );&nbsp;</div></li><li><div>        $tokenized = str_replace( $search, $replace, $html );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        preg_match_all( '#(&lt;pre[^&gt;]*&gt;.+?&lt;/pre&gt;)#i', $tokenized, $matches, PREG_SET_ORDER );&nbsp;</div></li><li><div>        foreach ( $matches as $i =&gt; $match ) {&nbsp;</div></li><li><div>            $tag_html = str_replace( $replace, $search, $match[0] );&nbsp;</div></li><li><div>            $tag_token = $token . $i;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $found[ $tag_token ] = $tag_html;&nbsp;</div></li><li><div>            $html = str_replace( $tag_html, $tag_token, $html, $count );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $replaced = str_replace( $replace, $search, $html );&nbsp;</div></li><li><div>        $stripped = str_replace( array( &quot;\r\n&quot;, &quot;\n&quot; ), '', $replaced );&nbsp;</div></li><li><div>        $pre = array_values( $found );&nbsp;</div></li><li><div>        $tokens = array_keys( $found );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return str_replace( $tokens, $pre, $stripped );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.9.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/4.7.4/classes/wp_o_embed/" class="">4.7.4</a></li><li><a href="http://hookr.io/4.7.3/classes/wp_o_embed/" class="">4.7.3</a></li><li><a href="http://hookr.io/4.7.2/classes/wp_o_embed/" class="">4.7.2</a></li><li><a href="http://hookr.io/4.7.1/classes/wp_o_embed/" class="">4.7.1</a></li><li><a href="http://hookr.io/4.7/classes/wp_o_embed/" class="active">4.7</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>class</li><li><span></span>WP_oEmbed</li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>