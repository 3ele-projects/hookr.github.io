<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="wordpress" data-version="4.7" data-type="class" data-id="1316"><head xmlns="http://www.w3.org/1999/xhtml"><title> getid3_id3v2 | class | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="getid3_id3v2, class, wordpress, 4.7" /><meta name="description" content="The WordPress Core getid3 id3v2 class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=24b6d94dfe21d9f301683d3e98ff8bef' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/getid3_id3v2/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgetid3_id3v2%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgetid3_id3v2%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7-class-getid3_id3v2","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="getid3_id3v2" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7." href="http://hookr.io/4.7/" class="H_VERSION"><span property="name">4.7</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/4.7/classes/" class=""><span property="name">classes</span></a><meta property="position" content="3"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">getid3_id3v2</span><meta property="position" content="4"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="6307"><a href="http://hookr.io/4.7/all/" title="All">All <span class="count badge">6307</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="active" data-id="class" data-count="351"><a href="http://hookr.io/4.7/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2851"><a href="http://hookr.io/4.7/functions/" title="Functions">Functions <span class="count badge">2851</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>getid3_id3v2</strong></h1><p>The WordPress Core <strong>getid3 id3v2</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/4.7/files/wp-includes-id3-module-tag-id3v2/" class="file">/wp-includes/ID3/module.tag.id3v2.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="19" class="block" start="19"><li><div>class getid3_id3v2 extends getid3_handler&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>    public $StartingOffset = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function Analyze() {&nbsp;</div></li><li><div>        $info = &$this-&gt;getid3-&gt;info;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //    Overall tag structure:&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>        //        |      Header (10 bytes)      |&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>        //        |       Extended Header       |&nbsp;</div></li><li><div>        //        | (variable length, OPTIONAL) |&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>        //        |   Frames (variable length)  |&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>        //        |           Padding           |&nbsp;</div></li><li><div>        //        | (variable length, OPTIONAL) |&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>        //        | Footer (10 bytes, OPTIONAL) |&nbsp;</div></li><li><div>        //        +-----------------------------+&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //    Header&nbsp;</div></li><li><div>        //        ID3v2/file identifier      &quot;ID3&quot;&nbsp;</div></li><li><div>        //        ID3v2 version              $04 00&nbsp;</div></li><li><div>        //        ID3v2 flags                (%ab000000 in v2.2, %abc00000 in v2.3, %abcd0000 in v2.4.x)&nbsp;</div></li><li><div>        //        ID3v2 size             4 * %0xxxxxxx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // shortcuts&nbsp;</div></li><li><div>        $info['id3v2']['header'] = true;&nbsp;</div></li><li><div>        $thisfile_id3v2 = &$info['id3v2'];&nbsp;</div></li><li><div>        $thisfile_id3v2['flags'] =  array();&nbsp;</div></li><li><div>        $thisfile_id3v2_flags = &$thisfile_id3v2['flags'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;fseek($this-&gt;StartingOffset);&nbsp;</div></li><li><div>        $header = $this-&gt;fread(10);&nbsp;</div></li><li><div>        if (substr($header, 0, 3) == 'ID3'  &&  strlen($header) == 10) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $thisfile_id3v2['majorversion'] = ord($header{3});&nbsp;</div></li><li><div>            $thisfile_id3v2['minorversion'] = ord($header{4});&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // shortcut&nbsp;</div></li><li><div>            $id3v2_majorversion = &$thisfile_id3v2['majorversion'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset($info['id3v2']);&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($id3v2_majorversion &gt; 4) { // this script probably won't correctly parse ID3v2.5.x and above (if it ever exists)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $info['error'][] = 'this script only parses up to ID3v2.4.x - this tag is ID3v2.'.$id3v2_majorversion.'.'.$thisfile_id3v2['minorversion'];&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $id3_flags = ord($header{5});&nbsp;</div></li><li><div>        switch ($id3v2_majorversion) {&nbsp;</div></li><li><div>            case 2:&nbsp;</div></li><li><div>                // %ab000000 in v2.2&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['unsynch'] = (bool) ($id3_flags & 0x80); // a - Unsynchronisation&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['compression'] = (bool) ($id3_flags & 0x40); // b - Compression&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 3:&nbsp;</div></li><li><div>                // %abc00000 in v2.3&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['unsynch'] = (bool) ($id3_flags & 0x80); // a - Unsynchronisation&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['exthead'] = (bool) ($id3_flags & 0x40); // b - Extended header&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['experim'] = (bool) ($id3_flags & 0x20); // c - Experimental indicator&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 4:&nbsp;</div></li><li><div>                // %abcd0000 in v2.4&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['unsynch'] = (bool) ($id3_flags & 0x80); // a - Unsynchronisation&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['exthead'] = (bool) ($id3_flags & 0x40); // b - Extended header&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['experim'] = (bool) ($id3_flags & 0x20); // c - Experimental indicator&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['isfooter'] = (bool) ($id3_flags & 0x10); // d - Footer present&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $thisfile_id3v2['headerlength'] = getid3_lib::BigEndian2Int(substr($header, 6, 4), 1) + 10; // length of ID3v2 tag in 10-byte header doesn't include 10-byte header length&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $thisfile_id3v2['tag_offset_start'] = $this-&gt;StartingOffset;&nbsp;</div></li><li><div>        $thisfile_id3v2['tag_offset_end'] = $thisfile_id3v2['tag_offset_start'] + $thisfile_id3v2['headerlength'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // create 'encoding' key - used by getid3::HandleAllTags()&nbsp;</div></li><li><div>        // in ID3v2 every field can have it's own encoding type&nbsp;</div></li><li><div>        // so force everything to UTF-8 so it can be handled consistantly&nbsp;</div></li><li><div>        $thisfile_id3v2['encoding'] = 'UTF-8';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //    Frames&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //        All ID3v2 frames consists of one frame header followed by one or more&nbsp;</div></li><li><div>    //        fields containing the actual information. The header is always 10&nbsp;</div></li><li><div>    //        bytes and laid out as follows:&nbsp;</div></li><li><div>    //&nbsp;</div></li><li><div>    //        Frame ID      $xx xx xx xx  (four characters)&nbsp;</div></li><li><div>    //        Size      4 * %0xxxxxxx&nbsp;</div></li><li><div>    //        Flags         $xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $sizeofframes = $thisfile_id3v2['headerlength'] - 10; // not including 10-byte initial header&nbsp;</div></li><li><div>        if (!empty($thisfile_id3v2['exthead']['length'])) {&nbsp;</div></li><li><div>            $sizeofframes -= ($thisfile_id3v2['exthead']['length'] + 4);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!empty($thisfile_id3v2_flags['isfooter'])) {&nbsp;</div></li><li><div>            $sizeofframes -= 10; // footer takes last 10 bytes of ID3v2 header, after frame data, before audio&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($sizeofframes &gt; 0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $framedata = $this-&gt;fread($sizeofframes); // read all frames from file into $framedata variable&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //    if entire frame data is unsynched, de-unsynch it now (ID3v2.3.x)&nbsp;</div></li><li><div>            if (!empty($thisfile_id3v2_flags['unsynch']) && ($id3v2_majorversion &lt;= 3)) {&nbsp;</div></li><li><div>                $framedata = $this-&gt;DeUnsynchronise($framedata);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //        [in ID3v2.4.0] Unsynchronisation [S:6.1] is done on frame level, instead&nbsp;</div></li><li><div>            //        of on tag level, making it easier to skip frames, increasing the streamability&nbsp;</div></li><li><div>            //        of the tag. The unsynchronisation flag in the header [S:3.1] indicates that&nbsp;</div></li><li><div>            //        there exists an unsynchronised frame, while the new unsynchronisation flag in&nbsp;</div></li><li><div>            //        the frame header [S:4.1.2] indicates unsynchronisation.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //$framedataoffset = 10 + ($thisfile_id3v2['exthead']['length'] ? $thisfile_id3v2['exthead']['length'] + 4 : 0); // how many bytes into the stream - start from after the 10-byte header (and extended header length+4, if present)&nbsp;</div></li><li><div>            $framedataoffset = 10; // how many bytes into the stream - start from after the 10-byte header&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //    Extended Header&nbsp;</div></li><li><div>            if (!empty($thisfile_id3v2_flags['exthead'])) {&nbsp;</div></li><li><div>                $extended_header_offset = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($id3v2_majorversion == 3) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // v2.3 definition:&nbsp;</div></li><li><div>                    //Extended header size  $xx xx xx xx   // 32-bit integer&nbsp;</div></li><li><div>                    //Extended Flags        $xx xx&nbsp;</div></li><li><div>                    //     %x0000000 %00000000 // v2.3&nbsp;</div></li><li><div>                    //     x - CRC data present&nbsp;</div></li><li><div>                    //Size of padding       $xx xx xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['length'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 4), 0);&nbsp;</div></li><li><div>                    $extended_header_offset += 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flag_bytes'] = 2;&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flag_raw'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, $thisfile_id3v2['exthead']['flag_bytes']));&nbsp;</div></li><li><div>                    $extended_header_offset += $thisfile_id3v2['exthead']['flag_bytes'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flags']['crc'] = (bool) ($thisfile_id3v2['exthead']['flag_raw'] & 0x8000);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['padding_size'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 4));&nbsp;</div></li><li><div>                    $extended_header_offset += 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($thisfile_id3v2['exthead']['flags']['crc']) {&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flag_data']['crc'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 4));&nbsp;</div></li><li><div>                        $extended_header_offset += 4;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $extended_header_offset += $thisfile_id3v2['exthead']['padding_size'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                } elseif ($id3v2_majorversion == 4) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // v2.4 definition:&nbsp;</div></li><li><div>                    //Extended header size   4 * %0xxxxxxx // 28-bit synchsafe integer&nbsp;</div></li><li><div>                    //Number of flag bytes       $01&nbsp;</div></li><li><div>                    //Extended Flags             $xx&nbsp;</div></li><li><div>                    //     %0bcd0000 // v2.4&nbsp;</div></li><li><div>                    //     b - Tag is an update&nbsp;</div></li><li><div>                    //         Flag data length       $00&nbsp;</div></li><li><div>                    //     c - CRC data present&nbsp;</div></li><li><div>                    //         Flag data length       $05&nbsp;</div></li><li><div>                    //         Total frame CRC    5 * %0xxxxxxx&nbsp;</div></li><li><div>                    //     d - Tag restrictions&nbsp;</div></li><li><div>                    //         Flag data length       $01&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['length'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 4), true);&nbsp;</div></li><li><div>                    $extended_header_offset += 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flag_bytes'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 1)); // should always be 1&nbsp;</div></li><li><div>                    $extended_header_offset += 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flag_raw'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, $thisfile_id3v2['exthead']['flag_bytes']));&nbsp;</div></li><li><div>                    $extended_header_offset += $thisfile_id3v2['exthead']['flag_bytes'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flags']['update'] = (bool) ($thisfile_id3v2['exthead']['flag_raw'] & 0x40);&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flags']['crc'] = (bool) ($thisfile_id3v2['exthead']['flag_raw'] & 0x20);&nbsp;</div></li><li><div>                    $thisfile_id3v2['exthead']['flags']['restrictions'] = (bool) ($thisfile_id3v2['exthead']['flag_raw'] & 0x10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($thisfile_id3v2['exthead']['flags']['update']) {&nbsp;</div></li><li><div>                        $ext_header_chunk_length = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 1)); // should be 0&nbsp;</div></li><li><div>                        $extended_header_offset += 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($thisfile_id3v2['exthead']['flags']['crc']) {&nbsp;</div></li><li><div>                        $ext_header_chunk_length = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 1)); // should be 5&nbsp;</div></li><li><div>                        $extended_header_offset += 1;&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flag_data']['crc'] = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, $ext_header_chunk_length), true, false);&nbsp;</div></li><li><div>                        $extended_header_offset += $ext_header_chunk_length;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($thisfile_id3v2['exthead']['flags']['restrictions']) {&nbsp;</div></li><li><div>                        $ext_header_chunk_length = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 1)); // should be 1&nbsp;</div></li><li><div>                        $extended_header_offset += 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // %ppqrrstt&nbsp;</div></li><li><div>                        $restrictions_raw = getid3_lib::BigEndian2Int(substr($framedata, $extended_header_offset, 1));&nbsp;</div></li><li><div>                        $extended_header_offset += 1;&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions']['tagsize'] = ($restrictions_raw & 0xC0) &gt;&gt; 6; // p - Tag size restrictions&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions']['textenc'] = ($restrictions_raw & 0x20) &gt;&gt; 5; // q - Text encoding restrictions&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions']['textsize'] = ($restrictions_raw & 0x18) &gt;&gt; 3; // r - Text fields size restrictions&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions']['imgenc'] = ($restrictions_raw & 0x04) &gt;&gt; 2; // s - Image encoding restrictions&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions']['imgsize'] = ($restrictions_raw & 0x03) &gt;&gt; 0; // t - Image size restrictions&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions_text']['tagsize'] = $this-&gt;LookupExtendedHeaderRestrictionsTagSizeLimits($thisfile_id3v2['exthead']['flags']['restrictions']['tagsize']);&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions_text']['textenc'] = $this-&gt;LookupExtendedHeaderRestrictionsTextEncodings($thisfile_id3v2['exthead']['flags']['restrictions']['textenc']);&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions_text']['textsize'] = $this-&gt;LookupExtendedHeaderRestrictionsTextFieldSize($thisfile_id3v2['exthead']['flags']['restrictions']['textsize']);&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions_text']['imgenc'] = $this-&gt;LookupExtendedHeaderRestrictionsImageEncoding($thisfile_id3v2['exthead']['flags']['restrictions']['imgenc']);&nbsp;</div></li><li><div>                        $thisfile_id3v2['exthead']['flags']['restrictions_text']['imgsize'] = $this-&gt;LookupExtendedHeaderRestrictionsImageSizeSize($thisfile_id3v2['exthead']['flags']['restrictions']['imgsize']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($thisfile_id3v2['exthead']['length'] != $extended_header_offset) {&nbsp;</div></li><li><div>                        $info['warning'][] = 'ID3v2.4 extended header length mismatch (expecting '.intval($thisfile_id3v2['exthead']['length']).', found '.intval($extended_header_offset).')';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $framedataoffset += $extended_header_offset;&nbsp;</div></li><li><div>                $framedata = substr($framedata, $extended_header_offset);&nbsp;</div></li><li><div>            } // end extended header&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            while (isset($framedata) && (strlen($framedata) &gt; 0)) { // cycle through until no more frame data is left to parse&nbsp;</div></li><li><div>                if (strlen($framedata) &lt;= $this-&gt;ID3v2HeaderLength($id3v2_majorversion)) {&nbsp;</div></li><li><div>                    // insufficient room left in ID3v2 header for actual data - must be padding&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['start'] = $framedataoffset;&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['length'] = strlen($framedata);&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['valid'] = true;&nbsp;</div></li><li><div>                    for ($i = 0; $i &lt; $thisfile_id3v2['padding']['length']; $i++) {&nbsp;</div></li><li><div>                        if ($framedata{$i} != &quot;\x00&quot;) {&nbsp;</div></li><li><div>                            $thisfile_id3v2['padding']['valid'] = false;&nbsp;</div></li><li><div>                            $thisfile_id3v2['padding']['errorpos'] = $thisfile_id3v2['padding']['start'] + $i;&nbsp;</div></li><li><div>                            $info['warning'][] = 'Invalid ID3v2 padding found at offset '.$thisfile_id3v2['padding']['errorpos'].' (the remaining '.($thisfile_id3v2['padding']['length'] - $i).' bytes are considered invalid)';&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    break; // skip rest of ID3v2 header&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($id3v2_majorversion == 2) {&nbsp;</div></li><li><div>                    // Frame ID  $xx xx xx (three characters)&nbsp;</div></li><li><div>                    // Size      $xx xx xx (24-bit integer)&nbsp;</div></li><li><div>                    // Flags     $xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $frame_header = substr($framedata, 0, 6); // take next 6 bytes for header&nbsp;</div></li><li><div>                    $framedata = substr($framedata, 6);    // and leave the rest in $framedata&nbsp;</div></li><li><div>                    $frame_name = substr($frame_header, 0, 3);&nbsp;</div></li><li><div>                    $frame_size = getid3_lib::BigEndian2Int(substr($frame_header, 3, 3), 0);&nbsp;</div></li><li><div>                    $frame_flags = 0; // not used for anything in ID3v2.2, just set to avoid E_NOTICEs&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                } elseif ($id3v2_majorversion &gt; 2) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Frame ID  $xx xx xx xx (four characters)&nbsp;</div></li><li><div>                    // Size      $xx xx xx xx (32-bit integer in v2.3, 28-bit synchsafe in v2.4+)&nbsp;</div></li><li><div>                    // Flags     $xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $frame_header = substr($framedata, 0, 10); // take next 10 bytes for header&nbsp;</div></li><li><div>                    $framedata = substr($framedata, 10);    // and leave the rest in $framedata&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $frame_name = substr($frame_header, 0, 4);&nbsp;</div></li><li><div>                    if ($id3v2_majorversion == 3) {&nbsp;</div></li><li><div>                        $frame_size = getid3_lib::BigEndian2Int(substr($frame_header, 4, 4), 0); // 32-bit integer&nbsp;</div></li><li><div>                    } else { // ID3v2.4+&nbsp;</div></li><li><div>                        $frame_size = getid3_lib::BigEndian2Int(substr($frame_header, 4, 4), 1); // 32-bit synchsafe integer (28-bit value)&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($frame_size &lt; (strlen($framedata) + 4)) {&nbsp;</div></li><li><div>                        $nextFrameID = substr($framedata, $frame_size, 4);&nbsp;</div></li><li><div>                        if ($this-&gt;IsValidID3v2FrameName($nextFrameID, $id3v2_majorversion)) {&nbsp;</div></li><li><div>                            // next frame is OK&nbsp;</div></li><li><div>                        } elseif (($frame_name == &quot;\x00&quot;.'MP3') || ($frame_name == &quot;\x00\x00&quot;.'MP') || ($frame_name == ' MP3') || ($frame_name == 'MP3e')) {&nbsp;</div></li><li><div>                            // MP3ext known broken frames - &quot;ok&quot; for the purposes of this test&nbsp;</div></li><li><div>                        } elseif (($id3v2_majorversion == 4) && ($this-&gt;IsValidID3v2FrameName(substr($framedata, getid3_lib::BigEndian2Int(substr($frame_header, 4, 4), 0), 4), 3))) {&nbsp;</div></li><li><div>                            $info['warning'][] = 'ID3v2 tag written as ID3v2.4, but with non-synchsafe integers (ID3v2.3 style). Older versions of (Helium2; iTunes) are known culprits of this. Tag has been parsed as ID3v2.3';&nbsp;</div></li><li><div>                            $id3v2_majorversion = 3;&nbsp;</div></li><li><div>                            $frame_size = getid3_lib::BigEndian2Int(substr($frame_header, 4, 4), 0); // 32-bit integer&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $frame_flags = getid3_lib::BigEndian2Int(substr($frame_header, 8, 2));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ((($id3v2_majorversion == 2) && ($frame_name == &quot;\x00\x00\x00&quot;)) || ($frame_name == &quot;\x00\x00\x00\x00&quot;)) {&nbsp;</div></li><li><div>                    // padding encountered&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['start'] = $framedataoffset;&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['length'] = strlen($frame_header) + strlen($framedata);&nbsp;</div></li><li><div>                    $thisfile_id3v2['padding']['valid'] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $len = strlen($framedata);&nbsp;</div></li><li><div>                    for ($i = 0; $i &lt; $len; $i++) {&nbsp;</div></li><li><div>                        if ($framedata{$i} != &quot;\x00&quot;) {&nbsp;</div></li><li><div>                            $thisfile_id3v2['padding']['valid'] = false;&nbsp;</div></li><li><div>                            $thisfile_id3v2['padding']['errorpos'] = $thisfile_id3v2['padding']['start'] + $i;&nbsp;</div></li><li><div>                            $info['warning'][] = 'Invalid ID3v2 padding found at offset '.$thisfile_id3v2['padding']['errorpos'].' (the remaining '.($thisfile_id3v2['padding']['length'] - $i).' bytes are considered invalid)';&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    break; // skip rest of ID3v2 header&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($frame_name == 'COM ') {&nbsp;</div></li><li><div>                    $info['warning'][] = 'error parsing &quot;'.$frame_name.'&quot; ('.$framedataoffset.' bytes into the ID3v2.'.$id3v2_majorversion.' tag). (ERROR: IsValidID3v2FrameName(&quot;'.str_replace(&quot;\x00&quot;, ' ', $frame_name).'&quot;, '.$id3v2_majorversion.'))). [Note: this particular error has been known to happen with tags edited by iTunes (versions &quot;X v2.0.3&quot;, &quot;v3.0.1&quot; are known-guilty, probably others too)]';&nbsp;</div></li><li><div>                    $frame_name = 'COMM';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (($frame_size &lt;= strlen($framedata)) && ($this-&gt;IsValidID3v2FrameName($frame_name, $id3v2_majorversion))) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    unset($parsedFrame);&nbsp;</div></li><li><div>                    $parsedFrame['frame_name'] = $frame_name;&nbsp;</div></li><li><div>                    $parsedFrame['frame_flags_raw'] = $frame_flags;&nbsp;</div></li><li><div>                    $parsedFrame['data'] = substr($framedata, 0, $frame_size);&nbsp;</div></li><li><div>                    $parsedFrame['datalength'] = getid3_lib::CastAsInt($frame_size);&nbsp;</div></li><li><div>                    $parsedFrame['dataoffset'] = $framedataoffset;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;ParseID3v2Frame($parsedFrame);&nbsp;</div></li><li><div>                    $thisfile_id3v2[$frame_name][] = $parsedFrame;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $framedata = substr($framedata, $frame_size);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                } else { // invalid frame length or FrameID&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($frame_size &lt;= strlen($framedata)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ($this-&gt;IsValidID3v2FrameName(substr($framedata, $frame_size, 4), $id3v2_majorversion)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // next frame is valid, just skip the current frame&nbsp;</div></li><li><div>                            $framedata = substr($framedata, $frame_size);&nbsp;</div></li><li><div>                            $info['warning'][] = 'Next ID3v2 frame is valid, skipping current frame.';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // next frame is invalid too, abort processing&nbsp;</div></li><li><div>                            //unset($framedata);&nbsp;</div></li><li><div>                            $framedata = null;&nbsp;</div></li><li><div>                            $info['error'][] = 'Next ID3v2 frame is also invalid, aborting processing.';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    } elseif ($frame_size == strlen($framedata)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // this is the last frame, just skip&nbsp;</div></li><li><div>                        $info['warning'][] = 'This was the last ID3v2 frame.';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // next frame is invalid too, abort processing&nbsp;</div></li><li><div>                        //unset($framedata);&nbsp;</div></li><li><div>                        $framedata = null;&nbsp;</div></li><li><div>                        $info['warning'][] = 'Invalid ID3v2 frame size, aborting.';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (!$this-&gt;IsValidID3v2FrameName($frame_name, $id3v2_majorversion)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        switch ($frame_name) {&nbsp;</div></li><li><div>                            case &quot;\x00\x00&quot;.'MP':&nbsp;</div></li><li><div>                            case &quot;\x00&quot;.'MP3':&nbsp;</div></li><li><div>                            case ' MP3':&nbsp;</div></li><li><div>                            case 'MP3e':&nbsp;</div></li><li><div>                            case &quot;\x00&quot;.'MP':&nbsp;</div></li><li><div>                            case ' MP':&nbsp;</div></li><li><div>                            case 'MP3':&nbsp;</div></li><li><div>                                $info['warning'][] = 'error parsing &quot;'.$frame_name.'&quot; ('.$framedataoffset.' bytes into the ID3v2.'.$id3v2_majorversion.' tag). (ERROR: !IsValidID3v2FrameName(&quot;'.str_replace(&quot;\x00&quot;, ' ', $frame_name).'&quot;, '.$id3v2_majorversion.'))). [Note: this particular error has been known to happen with tags edited by &quot;MP3ext (www.mutschler.de/mp3ext/)&quot;]';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            default:&nbsp;</div></li><li><div>                                $info['warning'][] = 'error parsing &quot;'.$frame_name.'&quot; ('.$framedataoffset.' bytes into the ID3v2.'.$id3v2_majorversion.' tag). (ERROR: !IsValidID3v2FrameName(&quot;'.str_replace(&quot;\x00&quot;, ' ', $frame_name).'&quot;, '.$id3v2_majorversion.'))).';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    } elseif (!isset($framedata) || ($frame_size &gt; strlen($framedata))) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $info['error'][] = 'error parsing &quot;'.$frame_name.'&quot; ('.$framedataoffset.' bytes into the ID3v2.'.$id3v2_majorversion.' tag). (ERROR: $frame_size ('.$frame_size.') &gt; strlen($framedata) ('.(isset($framedata) ? strlen($framedata) : 'null').')).';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $info['error'][] = 'error parsing &quot;'.$frame_name.'&quot; ('.$framedataoffset.' bytes into the ID3v2.'.$id3v2_majorversion.' tag).';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $framedataoffset += ($frame_size + $this-&gt;ID3v2HeaderLength($id3v2_majorversion));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //    Footer&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //    The footer is a copy of the header, but with a different identifier.&nbsp;</div></li><li><div>    //        ID3v2 identifier           &quot;3DI&quot;&nbsp;</div></li><li><div>    //        ID3v2 version              $04 00&nbsp;</div></li><li><div>    //        ID3v2 flags                %abcd0000&nbsp;</div></li><li><div>    //        ID3v2 size             4 * %0xxxxxxx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($thisfile_id3v2_flags['isfooter']) && $thisfile_id3v2_flags['isfooter']) {&nbsp;</div></li><li><div>            $footer = $this-&gt;fread(10);&nbsp;</div></li><li><div>            if (substr($footer, 0, 3) == '3DI') {&nbsp;</div></li><li><div>                $thisfile_id3v2['footer'] = true;&nbsp;</div></li><li><div>                $thisfile_id3v2['majorversion_footer'] = ord($footer{3});&nbsp;</div></li><li><div>                $thisfile_id3v2['minorversion_footer'] = ord($footer{4});&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($thisfile_id3v2['majorversion_footer'] &lt;= 4) {&nbsp;</div></li><li><div>                $id3_flags = ord(substr($footer{5}));&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['unsynch_footer'] = (bool) ($id3_flags & 0x80);&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['extfoot_footer'] = (bool) ($id3_flags & 0x40);&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['experim_footer'] = (bool) ($id3_flags & 0x20);&nbsp;</div></li><li><div>                $thisfile_id3v2_flags['isfooter_footer'] = (bool) ($id3_flags & 0x10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $thisfile_id3v2['footerlength'] = getid3_lib::BigEndian2Int(substr($footer, 6, 4), 1);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } // end footer&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($thisfile_id3v2['comments']['genre'])) {&nbsp;</div></li><li><div>            foreach ($thisfile_id3v2['comments']['genre'] as $key =&gt; $value) {&nbsp;</div></li><li><div>                unset($thisfile_id3v2['comments']['genre'][$key]);&nbsp;</div></li><li><div>                $thisfile_id3v2['comments'] = getid3_lib::array_merge_noclobber($thisfile_id3v2['comments'], array('genre'=&gt;$this-&gt;ParseID3v2GenreString($value)));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($thisfile_id3v2['comments']['track'])) {&nbsp;</div></li><li><div>            foreach ($thisfile_id3v2['comments']['track'] as $key =&gt; $value) {&nbsp;</div></li><li><div>                if (strstr($value, '/')) {&nbsp;</div></li><li><div>                    list($thisfile_id3v2['comments']['tracknum'][$key], $thisfile_id3v2['comments']['totaltracks'][$key]) = explode('/', $thisfile_id3v2['comments']['track'][$key]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!isset($thisfile_id3v2['comments']['year']) && !empty($thisfile_id3v2['comments']['recording_time'][0]) && preg_match('#^([0-9]{4})#', trim($thisfile_id3v2['comments']['recording_time'][0]), $matches)) {&nbsp;</div></li><li><div>            $thisfile_id3v2['comments']['year'] = array($matches[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!empty($thisfile_id3v2['TXXX'])) {&nbsp;</div></li><li><div>            // MediaMonkey does this, maybe others: write a blank RGAD frame, but put replay-gain adjustment values in TXXX frames&nbsp;</div></li><li><div>            foreach ($thisfile_id3v2['TXXX'] as $txxx_array) {&nbsp;</div></li><li><div>                switch ($txxx_array['description']) {&nbsp;</div></li><li><div>                    case 'replaygain_track_gain':&nbsp;</div></li><li><div>                        if (empty($info['replay_gain']['track']['adjustment']) && !empty($txxx_array['data'])) {&nbsp;</div></li><li><div>                            $info['replay_gain']['track']['adjustment'] = floatval(trim(str_replace('dB', '', $txxx_array['data'])));&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'replaygain_track_peak':&nbsp;</div></li><li><div>                        if (empty($info['replay_gain']['track']['peak']) && !empty($txxx_array['data'])) {&nbsp;</div></li><li><div>                            $info['replay_gain']['track']['peak'] = floatval($txxx_array['data']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'replaygain_album_gain':&nbsp;</div></li><li><div>                        if (empty($info['replay_gain']['album']['adjustment']) && !empty($txxx_array['data'])) {&nbsp;</div></li><li><div>                            $info['replay_gain']['album']['adjustment'] = floatval(trim(str_replace('dB', '', $txxx_array['data'])));&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Set avdataoffset&nbsp;</div></li><li><div>        $info['avdataoffset'] = $thisfile_id3v2['headerlength'];&nbsp;</div></li><li><div>        if (isset($thisfile_id3v2['footer'])) {&nbsp;</div></li><li><div>            $info['avdataoffset'] += 10;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function ParseID3v2GenreString($genrestring) {&nbsp;</div></li><li><div>        // Parse genres into arrays of genreName and genreID&nbsp;</div></li><li><div>        // ID3v2.2.x, ID3v2.3.x: '(21)' or '(4)Eurodisco' or '(51)(39)' or '(55)((I think...)'&nbsp;</div></li><li><div>        // ID3v2.4.x: '21' $00 'Eurodisco' $00&nbsp;</div></li><li><div>        $clean_genres = array();&nbsp;</div></li><li><div>        if (strpos($genrestring, &quot;\x00&quot;) === false) {&nbsp;</div></li><li><div>            $genrestring = preg_replace('#\(([0-9]{1, 3})\)#', '$1'.&quot;\x00&quot;, $genrestring);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $genre_elements = explode(&quot;\x00&quot;, $genrestring);&nbsp;</div></li><li><div>        foreach ($genre_elements as $element) {&nbsp;</div></li><li><div>            $element = trim($element);&nbsp;</div></li><li><div>            if ($element) {&nbsp;</div></li><li><div>                if (preg_match('#^[0-9]{1, 3}#', $element)) {&nbsp;</div></li><li><div>                    $clean_genres[] = getid3_id3v1::LookupGenreName($element);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $clean_genres[] = str_replace('((', '(', $element);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $clean_genres;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function ParseID3v2Frame(&$parsedFrame) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // shortcuts&nbsp;</div></li><li><div>        $info = &$this-&gt;getid3-&gt;info;&nbsp;</div></li><li><div>        $id3v2_majorversion = $info['id3v2']['majorversion'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $parsedFrame['framenamelong'] = $this-&gt;FrameNameLongLookup($parsedFrame['frame_name']);&nbsp;</div></li><li><div>        if (empty($parsedFrame['framenamelong'])) {&nbsp;</div></li><li><div>            unset($parsedFrame['framenamelong']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $parsedFrame['framenameshort'] = $this-&gt;FrameNameShortLookup($parsedFrame['frame_name']);&nbsp;</div></li><li><div>        if (empty($parsedFrame['framenameshort'])) {&nbsp;</div></li><li><div>            unset($parsedFrame['framenameshort']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($id3v2_majorversion &gt;= 3) { // frame flags are not part of the ID3v2.2 standard&nbsp;</div></li><li><div>            if ($id3v2_majorversion == 3) {&nbsp;</div></li><li><div>                //    Frame Header Flags&nbsp;</div></li><li><div>                //    %abc00000 %ijk00000&nbsp;</div></li><li><div>                $parsedFrame['flags']['TagAlterPreservation'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x8000); // a - Tag alter preservation&nbsp;</div></li><li><div>                $parsedFrame['flags']['FileAlterPreservation'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x4000); // b - File alter preservation&nbsp;</div></li><li><div>                $parsedFrame['flags']['ReadOnly'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x2000); // c - Read only&nbsp;</div></li><li><div>                $parsedFrame['flags']['compression'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0080); // i - Compression&nbsp;</div></li><li><div>                $parsedFrame['flags']['Encryption'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0040); // j - Encryption&nbsp;</div></li><li><div>                $parsedFrame['flags']['GroupingIdentity'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0020); // k - Grouping identity&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            } elseif ($id3v2_majorversion == 4) {&nbsp;</div></li><li><div>                //    Frame Header Flags&nbsp;</div></li><li><div>                //    %0abc0000 %0h00kmnp&nbsp;</div></li><li><div>                $parsedFrame['flags']['TagAlterPreservation'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x4000); // a - Tag alter preservation&nbsp;</div></li><li><div>                $parsedFrame['flags']['FileAlterPreservation'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x2000); // b - File alter preservation&nbsp;</div></li><li><div>                $parsedFrame['flags']['ReadOnly'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x1000); // c - Read only&nbsp;</div></li><li><div>                $parsedFrame['flags']['GroupingIdentity'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0040); // h - Grouping identity&nbsp;</div></li><li><div>                $parsedFrame['flags']['compression'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0008); // k - Compression&nbsp;</div></li><li><div>                $parsedFrame['flags']['Encryption'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0004); // m - Encryption&nbsp;</div></li><li><div>                $parsedFrame['flags']['Unsynchronisation'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0002); // n - Unsynchronisation&nbsp;</div></li><li><div>                $parsedFrame['flags']['DataLengthIndicator'] = (bool) ($parsedFrame['frame_flags_raw'] & 0x0001); // p - Data length indicator&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Frame-level de-unsynchronisation - ID3v2.4&nbsp;</div></li><li><div>                if ($parsedFrame['flags']['Unsynchronisation']) {&nbsp;</div></li><li><div>                    $parsedFrame['data'] = $this-&gt;DeUnsynchronise($parsedFrame['data']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($parsedFrame['flags']['DataLengthIndicator']) {&nbsp;</div></li><li><div>                    $parsedFrame['data_length_indicator'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 0, 4), 1);&nbsp;</div></li><li><div>                    $parsedFrame['data'] =                           substr($parsedFrame['data'], 4);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //    Frame-level de-compression&nbsp;</div></li><li><div>            if ($parsedFrame['flags']['compression']) {&nbsp;</div></li><li><div>                $parsedFrame['decompressed_size'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 0, 4));&nbsp;</div></li><li><div>                if (!function_exists('gzuncompress')) {&nbsp;</div></li><li><div>                    $info['warning'][] = 'gzuncompress() support required to decompress ID3v2 frame &quot;'.$parsedFrame['frame_name'].'&quot;';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    if ($decompresseddata = @gzuncompress(substr($parsedFrame['data'], 4))) {&nbsp;</div></li><li><div>                    //if ($decompresseddata = @gzuncompress($parsedFrame['data'])) {&nbsp;</div></li><li><div>                        $parsedFrame['data'] = $decompresseddata;&nbsp;</div></li><li><div>                        unset($decompresseddata);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $info['warning'][] = 'gzuncompress() failed on compressed contents of ID3v2 frame &quot;'.$parsedFrame['frame_name'].'&quot;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!empty($parsedFrame['flags']['DataLengthIndicator'])) {&nbsp;</div></li><li><div>            if ($parsedFrame['data_length_indicator'] != strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $info['warning'][] = 'ID3v2 frame &quot;'.$parsedFrame['frame_name'].'&quot; should be '.$parsedFrame['data_length_indicator'].' bytes long according to DataLengthIndicator, but found '.strlen($parsedFrame['data']).' bytes of data';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($parsedFrame['datalength']) && ($parsedFrame['datalength'] == 0)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $warning = 'Frame &quot;'.$parsedFrame['frame_name'].'&quot; at offset '.$parsedFrame['dataoffset'].' has no data portion';&nbsp;</div></li><li><div>            switch ($parsedFrame['frame_name']) {&nbsp;</div></li><li><div>                case 'WCOM':&nbsp;</div></li><li><div>                    $warning .= ' (this is known to happen with files tagged by RioPort)';&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                default:&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $info['warning'][] = $warning;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'UFID')) || // 4.1   UFID Unique file identifier&nbsp;</div></li><li><div>            (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'UFI'))) {  // 4.1   UFI  Unique file identifier&nbsp;</div></li><li><div>            //   There may be more than one 'UFID' frame in a tag, &nbsp;</div></li><li><div>            //   but only one with the same 'Owner identifier'.&nbsp;</div></li><li><div>            // &lt;Header for 'Unique file identifier', ID: 'UFID'&gt;&nbsp;</div></li><li><div>            // Owner identifier        &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Identifier              &lt;up to 64 bytes binary data&gt;&nbsp;</div></li><li><div>            $exploded = explode(&quot;\x00&quot;, $parsedFrame['data'], 2);&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = (isset($exploded[0]) ? $exploded[0] : '');&nbsp;</div></li><li><div>            $parsedFrame['data'] = (isset($exploded[1]) ? $exploded[1] : '');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'TXXX')) || // 4.2.2 TXXX User defined text information frame&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'TXX'))) {    // 4.2.2 TXX  User defined text information frame&nbsp;</div></li><li><div>            //   There may be more than one 'TXXX' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same description.&nbsp;</div></li><li><div>            // &lt;Header for 'User defined text information frame', ID: 'TXXX'&gt;&nbsp;</div></li><li><div>            // Text encoding     $xx&nbsp;</div></li><li><div>            // Description       &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Value             &lt;text string according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['description'] = trim(getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $frame_description));&nbsp;</div></li><li><div>            $parsedFrame['data'] = substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $commentkey = ($parsedFrame['description'] ? $parsedFrame['description'] : (isset($info['id3v2']['comments'][$parsedFrame['framenameshort']]) ? count($info['id3v2']['comments'][$parsedFrame['framenameshort']]) : 0));&nbsp;</div></li><li><div>                if (!isset($info['id3v2']['comments'][$parsedFrame['framenameshort']]) || !array_key_exists($commentkey, $info['id3v2']['comments'][$parsedFrame['framenameshort']])) {&nbsp;</div></li><li><div>                    $info['id3v2']['comments'][$parsedFrame['framenameshort']][$commentkey] = trim(getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']));&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = trim(getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //unset($parsedFrame['data']); do not unset, may be needed elsewhere, e.g. for replaygain&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ($parsedFrame['frame_name']{0} == 'T') { // 4.2. T??[?] Text information frame&nbsp;</div></li><li><div>            //   There may only be one text information frame of its kind in an tag.&nbsp;</div></li><li><div>            // &lt;Header for 'Text information frame', ID: 'T000' - 'TZZZ', &nbsp;</div></li><li><div>            // excluding 'TXXX' described in 4.2.6.&gt;&nbsp;</div></li><li><div>            // Text encoding                $xx&nbsp;</div></li><li><div>            // Information                  &lt;text string(s) according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                // ID3v2.3 specs say that TPE1 (and others) can contain multiple artist values separated with /&nbsp;</div></li><li><div>                // This of course breaks when an artist name contains slash character, e.g. &quot;AC/DC&quot;&nbsp;</div></li><li><div>                // MP3tag (maybe others) implement alternative system where multiple artists are null-separated, which makes more sense&nbsp;</div></li><li><div>                // getID3 will split null-separated artists into multiple artists and leave slash-separated ones to the user&nbsp;</div></li><li><div>                switch ($parsedFrame['encoding']) {&nbsp;</div></li><li><div>                    case 'UTF-16':&nbsp;</div></li><li><div>                    case 'UTF-16BE':&nbsp;</div></li><li><div>                    case 'UTF-16LE':&nbsp;</div></li><li><div>                        $wordsize = 2;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    case 'ISO-8859-1':&nbsp;</div></li><li><div>                    case 'UTF-8':&nbsp;</div></li><li><div>                    default:&nbsp;</div></li><li><div>                        $wordsize = 1;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $Txxx_elements = array();&nbsp;</div></li><li><div>                $Txxx_elements_start_offset = 0;&nbsp;</div></li><li><div>                for ($i = 0; $i &lt; strlen($parsedFrame['data']); $i += $wordsize) {&nbsp;</div></li><li><div>                    if (substr($parsedFrame['data'], $i, $wordsize) == str_repeat(&quot;\x00&quot;, $wordsize)) {&nbsp;</div></li><li><div>                        $Txxx_elements[] = substr($parsedFrame['data'], $Txxx_elements_start_offset, $i - $Txxx_elements_start_offset);&nbsp;</div></li><li><div>                        $Txxx_elements_start_offset = $i + $wordsize;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $Txxx_elements[] = substr($parsedFrame['data'], $Txxx_elements_start_offset, $i - $Txxx_elements_start_offset);&nbsp;</div></li><li><div>                foreach ($Txxx_elements as $Txxx_element) {&nbsp;</div></li><li><div>                    $string = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $Txxx_element);&nbsp;</div></li><li><div>                    if (!empty($string)) {&nbsp;</div></li><li><div>                        $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = $string;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($string, $wordsize, $i, $Txxx_elements, $Txxx_element, $Txxx_elements_start_offset);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'WXXX')) || // 4.3.2 WXXX User defined URL link frame&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'WXX'))) {    // 4.3.2 WXX  User defined URL link frame&nbsp;</div></li><li><div>            //   There may be more than one 'WXXX' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same description&nbsp;</div></li><li><div>            // &lt;Header for 'User defined URL link frame', ID: 'WXXX'&gt;&nbsp;</div></li><li><div>            // Text encoding     $xx&nbsp;</div></li><li><div>            // Description       &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // URL               &lt;text string&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['data'] = substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($frame_terminatorpos) {&nbsp;</div></li><li><div>                // there are null bytes after the data - this is not according to spec&nbsp;</div></li><li><div>                // only use data up to first null byte&nbsp;</div></li><li><div>                $frame_urldata = (string) substr($parsedFrame['data'], 0, $frame_terminatorpos);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                // no null bytes following data, just use all data&nbsp;</div></li><li><div>                $frame_urldata = (string) $parsedFrame['data'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['url'] = $frame_urldata;&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && $parsedFrame['url']) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['url']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ($parsedFrame['frame_name']{0} == 'W') { // 4.3. W??? URL link frames&nbsp;</div></li><li><div>            //   There may only be one URL link frame of its kind in a tag, &nbsp;</div></li><li><div>            //   except when stated otherwise in the frame description&nbsp;</div></li><li><div>            // &lt;Header for 'URL link frame', ID: 'W000' - 'WZZZ', excluding 'WXXX'&nbsp;</div></li><li><div>            // described in 4.3.2.&gt;&nbsp;</div></li><li><div>            // URL              &lt;text string&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['url'] = trim($parsedFrame['data']);&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && $parsedFrame['url']) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = $parsedFrame['url'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion == 3) && ($parsedFrame['frame_name'] == 'IPLS')) || // 4.4  IPLS Involved people list (ID3v2.3 only)&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'IPL'))) {     // 4.4  IPL  Involved people list (ID3v2.2 only)&nbsp;</div></li><li><div>            // http://id3.org/id3v2.3.0#sec4.4&nbsp;</div></li><li><div>            //   There may only be one 'IPL' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'User defined URL link frame', ID: 'IPL'&gt;&nbsp;</div></li><li><div>            // Text encoding     $xx&nbsp;</div></li><li><div>            // People list strings    &lt;textstrings&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($parsedFrame['encodingid']);&nbsp;</div></li><li><div>            $parsedFrame['data_raw'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // http://www.getid3.org/phpBB3/viewtopic.php?t=1369&nbsp;</div></li><li><div>            // &quot;this tag typically contains null terminated strings, which are associated in pairs&quot;&nbsp;</div></li><li><div>            // &quot;there are users that use the tag incorrectly&quot;&nbsp;</div></li><li><div>            $IPLS_parts = array();&nbsp;</div></li><li><div>            if (strpos($parsedFrame['data_raw'], &quot;\x00&quot;) !== false) {&nbsp;</div></li><li><div>                $IPLS_parts_unsorted = array();&nbsp;</div></li><li><div>                if (((strlen($parsedFrame['data_raw']) % 2) == 0) && ((substr($parsedFrame['data_raw'], 0, 2) == &quot;\xFF\xFE&quot;) || (substr($parsedFrame['data_raw'], 0, 2) == &quot;\xFE\xFF&quot;))) {&nbsp;</div></li><li><div>                    // UTF-16, be careful looking for null bytes since most 2-byte characters may contain one; you need to find twin null bytes, and on even padding&nbsp;</div></li><li><div>                    $thisILPS = '';&nbsp;</div></li><li><div>                    for ($i = 0; $i &lt; strlen($parsedFrame['data_raw']); $i += 2) {&nbsp;</div></li><li><div>                        $twobytes = substr($parsedFrame['data_raw'], $i, 2);&nbsp;</div></li><li><div>                        if ($twobytes === &quot;\x00\x00&quot;) {&nbsp;</div></li><li><div>                            $IPLS_parts_unsorted[] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $thisILPS);&nbsp;</div></li><li><div>                            $thisILPS = '';&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $thisILPS .= $twobytes;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (strlen($thisILPS) &gt; 2) { // 2-byte BOM&nbsp;</div></li><li><div>                        $IPLS_parts_unsorted[] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $thisILPS);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    // ISO-8859-1 or UTF-8 or other single-byte-null character set&nbsp;</div></li><li><div>                    $IPLS_parts_unsorted = explode(&quot;\x00&quot;, $parsedFrame['data_raw']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (count($IPLS_parts_unsorted) == 1) {&nbsp;</div></li><li><div>                    // just a list of names, e.g. &quot;Dino Baptiste, Jimmy Copley, John Gordon, Bernie Marsden, Sharon Watson&quot;&nbsp;</div></li><li><div>                    foreach ($IPLS_parts_unsorted as $key =&gt; $value) {&nbsp;</div></li><li><div>                        $IPLS_parts_sorted = preg_split('#[;, \\r\\n\\t]#', $value);&nbsp;</div></li><li><div>                        $position = '';&nbsp;</div></li><li><div>                        foreach ($IPLS_parts_sorted as $person) {&nbsp;</div></li><li><div>                            $IPLS_parts[] = array('position'=&gt;$position, 'person'=&gt;$person);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } elseif ((count($IPLS_parts_unsorted) % 2) == 0) {&nbsp;</div></li><li><div>                    $position = '';&nbsp;</div></li><li><div>                    $person = '';&nbsp;</div></li><li><div>                    foreach ($IPLS_parts_unsorted as $key =&gt; $value) {&nbsp;</div></li><li><div>                        if (($key % 2) == 0) {&nbsp;</div></li><li><div>                            $position = $value;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $person = $value;&nbsp;</div></li><li><div>                            $IPLS_parts[] = array('position'=&gt;$position, 'person'=&gt;$person);&nbsp;</div></li><li><div>                            $position = '';&nbsp;</div></li><li><div>                            $person = '';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    foreach ($IPLS_parts_unsorted as $key =&gt; $value) {&nbsp;</div></li><li><div>                        $IPLS_parts[] = array($value);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $IPLS_parts = preg_split('#[;, \\r\\n\\t]#', $parsedFrame['data_raw']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['data'] = $IPLS_parts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = $parsedFrame['data'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'MCDI')) || // 4.4   MCDI Music CD identifier&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'MCI'))) {     // 4.5   MCI  Music CD identifier&nbsp;</div></li><li><div>            //   There may only be one 'MCDI' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Music CD identifier', ID: 'MCDI'&gt;&nbsp;</div></li><li><div>            // CD TOC                &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = $parsedFrame['data'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'ETCO')) || // 4.5   ETCO Event timing codes&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'ETC'))) {     // 4.6   ETC  Event timing codes&nbsp;</div></li><li><div>            //   There may only be one 'ETCO' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Event timing codes', ID: 'ETCO'&gt;&nbsp;</div></li><li><div>            // Time stamp format    $xx&nbsp;</div></li><li><div>            //   Where time stamp format is:&nbsp;</div></li><li><div>            // $01  (32-bit value) MPEG frames from beginning of file&nbsp;</div></li><li><div>            // $02  (32-bit value) milliseconds from beginning of file&nbsp;</div></li><li><div>            //   Followed by a list of key events in the following format:&nbsp;</div></li><li><div>            // Type of event   $xx&nbsp;</div></li><li><div>            // Time stamp      $xx (xx ...)&nbsp;</div></li><li><div>            //   The 'Time stamp' is set to zero if directly at the beginning of the sound&nbsp;</div></li><li><div>            //   or after the previous event. All events MUST be sorted in chronological order.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['timestampformat'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            while ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $parsedFrame['typeid'] = substr($parsedFrame['data'], $frame_offset++, 1);&nbsp;</div></li><li><div>                $parsedFrame['type'] = $this-&gt;ETCOEventLookup($parsedFrame['typeid']);&nbsp;</div></li><li><div>                $parsedFrame['timestamp'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>                $frame_offset += 4;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'MLLT')) || // 4.6   MLLT MPEG location lookup table&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'MLL'))) {     // 4.7   MLL MPEG location lookup table&nbsp;</div></li><li><div>            //   There may only be one 'MLLT' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Location lookup table', ID: 'MLLT'&gt;&nbsp;</div></li><li><div>            // MPEG frames between reference  $xx xx&nbsp;</div></li><li><div>            // Bytes between reference        $xx xx xx&nbsp;</div></li><li><div>            // Milliseconds between reference $xx xx xx&nbsp;</div></li><li><div>            // Bits for bytes deviation       $xx&nbsp;</div></li><li><div>            // Bits for milliseconds dev.     $xx&nbsp;</div></li><li><div>            //   Then for every reference the following data is included;&nbsp;</div></li><li><div>            // Deviation in bytes         %xxx....&nbsp;</div></li><li><div>            // Deviation in milliseconds  %xxx....&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['framesbetweenreferences'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 0, 2));&nbsp;</div></li><li><div>            $parsedFrame['bytesbetweenreferences'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 2, 3));&nbsp;</div></li><li><div>            $parsedFrame['msbetweenreferences'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 5, 3));&nbsp;</div></li><li><div>            $parsedFrame['bitsforbytesdeviation'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 8, 1));&nbsp;</div></li><li><div>            $parsedFrame['bitsformsdeviation'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], 9, 1));&nbsp;</div></li><li><div>            $parsedFrame['data'] = substr($parsedFrame['data'], 10);&nbsp;</div></li><li><div>            while ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $deviationbitstream .= getid3_lib::BigEndian2Bin(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $reference_counter = 0;&nbsp;</div></li><li><div>            while (strlen($deviationbitstream) &gt; 0) {&nbsp;</div></li><li><div>                $parsedFrame[$reference_counter]['bytedeviation'] = bindec(substr($deviationbitstream, 0, $parsedFrame['bitsforbytesdeviation']));&nbsp;</div></li><li><div>                $parsedFrame[$reference_counter]['msdeviation'] = bindec(substr($deviationbitstream, $parsedFrame['bitsforbytesdeviation'], $parsedFrame['bitsformsdeviation']));&nbsp;</div></li><li><div>                $deviationbitstream = substr($deviationbitstream, $parsedFrame['bitsforbytesdeviation'] + $parsedFrame['bitsformsdeviation']);&nbsp;</div></li><li><div>                $reference_counter++;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'SYTC')) || // 4.7   SYTC Synchronised tempo codes&nbsp;</div></li><li><div>                  (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'STC'))) {  // 4.8   STC  Synchronised tempo codes&nbsp;</div></li><li><div>            //   There may only be one 'SYTC' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Synchronised tempo codes', ID: 'SYTC'&gt;&nbsp;</div></li><li><div>            // Time stamp format   $xx&nbsp;</div></li><li><div>            // Tempo data          &lt;binary data&gt;&nbsp;</div></li><li><div>            //   Where time stamp format is:&nbsp;</div></li><li><div>            // $01  (32-bit value) MPEG frames from beginning of file&nbsp;</div></li><li><div>            // $02  (32-bit value) milliseconds from beginning of file&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['timestampformat'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $timestamp_counter = 0;&nbsp;</div></li><li><div>            while ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $parsedFrame[$timestamp_counter]['tempo'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>                if ($parsedFrame[$timestamp_counter]['tempo'] == 255) {&nbsp;</div></li><li><div>                    $parsedFrame[$timestamp_counter]['tempo'] += ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $parsedFrame[$timestamp_counter]['timestamp'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>                $frame_offset += 4;&nbsp;</div></li><li><div>                $timestamp_counter++;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'USLT')) || // 4.8   USLT Unsynchronised lyric/text transcription&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'ULT'))) {     // 4.9   ULT  Unsynchronised lyric/text transcription&nbsp;</div></li><li><div>            //   There may be more than one 'Unsynchronised lyrics/text transcription' frame&nbsp;</div></li><li><div>            //   in each tag, but only one with the same language and content descriptor.&nbsp;</div></li><li><div>            // &lt;Header for 'Unsynchronised lyrics/text transcription', ID: 'USLT'&gt;&nbsp;</div></li><li><div>            // Text encoding        $xx&nbsp;</div></li><li><div>            // Language             $xx xx xx&nbsp;</div></li><li><div>            // Content descriptor   &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Lyrics/text          &lt;full text string according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_language = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>            $frame_offset += 3;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['data'] = substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['data'] = $parsedFrame['data'];&nbsp;</div></li><li><div>            $parsedFrame['language'] = $frame_language;&nbsp;</div></li><li><div>            $parsedFrame['languagename'] = $this-&gt;LanguageLookup($frame_language, false);&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'SYLT')) || // 4.9   SYLT Synchronised lyric/text&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'SLT'))) {     // 4.10  SLT  Synchronised lyric/text&nbsp;</div></li><li><div>            //   There may be more than one 'SYLT' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same language and content descriptor.&nbsp;</div></li><li><div>            // &lt;Header for 'Synchronised lyrics/text', ID: 'SYLT'&gt;&nbsp;</div></li><li><div>            // Text encoding        $xx&nbsp;</div></li><li><div>            // Language             $xx xx xx&nbsp;</div></li><li><div>            // Time stamp format    $xx&nbsp;</div></li><li><div>            //   $01  (32-bit value) MPEG frames from beginning of file&nbsp;</div></li><li><div>            //   $02  (32-bit value) milliseconds from beginning of file&nbsp;</div></li><li><div>            // Content type         $xx&nbsp;</div></li><li><div>            // Content descriptor   &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            //   Terminated text to be synced (typically a syllable)&nbsp;</div></li><li><div>            //   Sync identifier (terminator to above string)   $00 (00)&nbsp;</div></li><li><div>            //   Time stamp                                     $xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_language = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>            $frame_offset += 3;&nbsp;</div></li><li><div>            $parsedFrame['timestampformat'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['contenttypeid'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['contenttype'] = $this-&gt;SYTLContentTypeLookup($parsedFrame['contenttypeid']);&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['language'] = $frame_language;&nbsp;</div></li><li><div>            $parsedFrame['languagename'] = $this-&gt;LanguageLookup($frame_language, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $timestampindex = 0;&nbsp;</div></li><li><div>            $frame_remainingdata = substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            while (strlen($frame_remainingdata)) {&nbsp;</div></li><li><div>                $frame_offset = 0;&nbsp;</div></li><li><div>                $frame_terminatorpos = strpos($frame_remainingdata, $frame_textencoding_terminator);&nbsp;</div></li><li><div>                if ($frame_terminatorpos === false) {&nbsp;</div></li><li><div>                    $frame_remainingdata = '';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    if (ord(substr($frame_remainingdata, $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                        $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $parsedFrame['lyrics'][$timestampindex]['data'] = substr($frame_remainingdata, $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $frame_remainingdata = substr($frame_remainingdata, $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>                    if (($timestampindex == 0) && (ord($frame_remainingdata{0}) != 0)) {&nbsp;</div></li><li><div>                        // timestamp probably omitted for first data item&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $parsedFrame['lyrics'][$timestampindex]['timestamp'] = getid3_lib::BigEndian2Int(substr($frame_remainingdata, 0, 4));&nbsp;</div></li><li><div>                        $frame_remainingdata = substr($frame_remainingdata, 4);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $timestampindex++;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'COMM')) || // 4.10  COMM Comments&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'COM'))) {     // 4.11  COM  Comments&nbsp;</div></li><li><div>            //   There may be more than one comment frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same language and content descriptor.&nbsp;</div></li><li><div>            // &lt;Header for 'Comment', ID: 'COMM'&gt;&nbsp;</div></li><li><div>            // Text encoding          $xx&nbsp;</div></li><li><div>            // Language               $xx xx xx&nbsp;</div></li><li><div>            // Short content descrip. &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // The actual text        &lt;full text string according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (strlen($parsedFrame['data']) &lt; 5) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid data (too short) for &quot;'.$parsedFrame['frame_name'].'&quot; frame at offset '.$parsedFrame['dataoffset'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $frame_offset = 0;&nbsp;</div></li><li><div>                $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>                $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>                if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                    $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                    $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_language = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>                $frame_offset += 3;&nbsp;</div></li><li><div>                $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>                if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                    $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>                if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                    $frame_description = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_text = (string) substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>                $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $parsedFrame['language'] = $frame_language;&nbsp;</div></li><li><div>                $parsedFrame['languagename'] = $this-&gt;LanguageLookup($frame_language, false);&nbsp;</div></li><li><div>                $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>                $parsedFrame['data'] = $frame_text;&nbsp;</div></li><li><div>                if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                    $commentkey = ($parsedFrame['description'] ? $parsedFrame['description'] : (!empty($info['id3v2']['comments'][$parsedFrame['framenameshort']]) ? count($info['id3v2']['comments'][$parsedFrame['framenameshort']]) : 0));&nbsp;</div></li><li><div>                    if (!isset($info['id3v2']['comments'][$parsedFrame['framenameshort']]) || !array_key_exists($commentkey, $info['id3v2']['comments'][$parsedFrame['framenameshort']])) {&nbsp;</div></li><li><div>                        $info['id3v2']['comments'][$parsedFrame['framenameshort']][$commentkey] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 4) && ($parsedFrame['frame_name'] == 'RVA2')) { // 4.11  RVA2 Relative volume adjustment (2) (ID3v2.4+ only)&nbsp;</div></li><li><div>            //   There may be more than one 'RVA2' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same identification string&nbsp;</div></li><li><div>            // &lt;Header for 'Relative volume adjustment (2)', ID: 'RVA2'&gt;&nbsp;</div></li><li><div>            // Identification          &lt;text string&gt; $00&nbsp;</div></li><li><div>            //   The 'identification' string is used to identify the situation and/or&nbsp;</div></li><li><div>            //   device where this adjustment should apply. The following is then&nbsp;</div></li><li><div>            //   repeated for every channel:&nbsp;</div></li><li><div>            // Type of channel         $xx&nbsp;</div></li><li><div>            // Volume adjustment       $xx xx&nbsp;</div></li><li><div>            // Bits representing peak  $xx&nbsp;</div></li><li><div>            // Peak volume             $xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;);&nbsp;</div></li><li><div>            $frame_idstring = substr($parsedFrame['data'], 0, $frame_terminatorpos);&nbsp;</div></li><li><div>            if (ord($frame_idstring) === 0) {&nbsp;</div></li><li><div>                $frame_idstring = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_remainingdata = substr($parsedFrame['data'], $frame_terminatorpos + strlen(&quot;\x00&quot;));&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_idstring;&nbsp;</div></li><li><div>            $RVA2channelcounter = 0;&nbsp;</div></li><li><div>            while (strlen($frame_remainingdata) &gt;= 5) {&nbsp;</div></li><li><div>                $frame_offset = 0;&nbsp;</div></li><li><div>                $frame_channeltypeid = ord(substr($frame_remainingdata, $frame_offset++, 1));&nbsp;</div></li><li><div>                $parsedFrame[$RVA2channelcounter]['channeltypeid'] = $frame_channeltypeid;&nbsp;</div></li><li><div>                $parsedFrame[$RVA2channelcounter]['channeltype'] = $this-&gt;RVA2ChannelTypeLookup($frame_channeltypeid);&nbsp;</div></li><li><div>                $parsedFrame[$RVA2channelcounter]['volumeadjust'] = getid3_lib::BigEndian2Int(substr($frame_remainingdata, $frame_offset, 2), false, true); // 16-bit signed&nbsp;</div></li><li><div>                $frame_offset += 2;&nbsp;</div></li><li><div>                $parsedFrame[$RVA2channelcounter]['bitspeakvolume'] = ord(substr($frame_remainingdata, $frame_offset++, 1));&nbsp;</div></li><li><div>                if (($parsedFrame[$RVA2channelcounter]['bitspeakvolume'] &lt; 1) || ($parsedFrame[$RVA2channelcounter]['bitspeakvolume'] &gt; 4)) {&nbsp;</div></li><li><div>                    $info['warning'][] = 'ID3v2::RVA2 frame['.$RVA2channelcounter.'] contains invalid '.$parsedFrame[$RVA2channelcounter]['bitspeakvolume'].'-byte bits-representing-peak value';&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_bytespeakvolume = ceil($parsedFrame[$RVA2channelcounter]['bitspeakvolume'] / 8);&nbsp;</div></li><li><div>                $parsedFrame[$RVA2channelcounter]['peakvolume'] = getid3_lib::BigEndian2Int(substr($frame_remainingdata, $frame_offset, $frame_bytespeakvolume));&nbsp;</div></li><li><div>                $frame_remainingdata = substr($frame_remainingdata, $frame_offset + $frame_bytespeakvolume);&nbsp;</div></li><li><div>                $RVA2channelcounter++;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion == 3) && ($parsedFrame['frame_name'] == 'RVAD')) || // 4.12  RVAD Relative volume adjustment (ID3v2.3 only)&nbsp;</div></li><li><div>                  (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'RVA'))) {  // 4.12  RVA  Relative volume adjustment (ID3v2.2 only)&nbsp;</div></li><li><div>            //   There may only be one 'RVA' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Relative volume adjustment', ID: 'RVA'&gt;&nbsp;</div></li><li><div>            // ID3v2.2 =&gt; Increment/decrement     %000000ba&nbsp;</div></li><li><div>            // ID3v2.3 =&gt; Increment/decrement     %00fedcba&nbsp;</div></li><li><div>            // Bits used for volume descr.        $xx&nbsp;</div></li><li><div>            // Relative volume change, right      $xx xx (xx ...) // a&nbsp;</div></li><li><div>            // Relative volume change, left       $xx xx (xx ...) // b&nbsp;</div></li><li><div>            // Peak volume right                  $xx xx (xx ...)&nbsp;</div></li><li><div>            // Peak volume left                   $xx xx (xx ...)&nbsp;</div></li><li><div>            //   ID3v2.3 only, optional (not present in ID3v2.2):&nbsp;</div></li><li><div>            // Relative volume change, right back $xx xx (xx ...) // c&nbsp;</div></li><li><div>            // Relative volume change, left back  $xx xx (xx ...) // d&nbsp;</div></li><li><div>            // Peak volume right back             $xx xx (xx ...)&nbsp;</div></li><li><div>            // Peak volume left back              $xx xx (xx ...)&nbsp;</div></li><li><div>            //   ID3v2.3 only, optional (not present in ID3v2.2):&nbsp;</div></li><li><div>            // Relative volume change, center     $xx xx (xx ...) // e&nbsp;</div></li><li><div>            // Peak volume center                 $xx xx (xx ...)&nbsp;</div></li><li><div>            //   ID3v2.3 only, optional (not present in ID3v2.2):&nbsp;</div></li><li><div>            // Relative volume change, bass       $xx xx (xx ...) // f&nbsp;</div></li><li><div>            // Peak volume bass                   $xx xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_incrdecrflags = getid3_lib::BigEndian2Bin(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['incdec']['right'] = (bool) substr($frame_incrdecrflags, 6, 1);&nbsp;</div></li><li><div>            $parsedFrame['incdec']['left'] = (bool) substr($frame_incrdecrflags, 7, 1);&nbsp;</div></li><li><div>            $parsedFrame['bitsvolume'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_bytesvolume = ceil($parsedFrame['bitsvolume'] / 8);&nbsp;</div></li><li><div>            $parsedFrame['volumechange']['right'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>            if ($parsedFrame['incdec']['right'] === false) {&nbsp;</div></li><li><div>                $parsedFrame['volumechange']['right'] *= -1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>            $parsedFrame['volumechange']['left'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>            if ($parsedFrame['incdec']['left'] === false) {&nbsp;</div></li><li><div>                $parsedFrame['volumechange']['left'] *= -1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>            $parsedFrame['peakvolume']['right'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>            $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>            $parsedFrame['peakvolume']['left'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>            $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>            if ($id3v2_majorversion == 3) {&nbsp;</div></li><li><div>                $parsedFrame['data'] = substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>                if (strlen($parsedFrame['data']) &gt; 0) {&nbsp;</div></li><li><div>                    $parsedFrame['incdec']['rightrear'] = (bool) substr($frame_incrdecrflags, 4, 1);&nbsp;</div></li><li><div>                    $parsedFrame['incdec']['leftrear'] = (bool) substr($frame_incrdecrflags, 5, 1);&nbsp;</div></li><li><div>                    $parsedFrame['volumechange']['rightrear'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    if ($parsedFrame['incdec']['rightrear'] === false) {&nbsp;</div></li><li><div>                        $parsedFrame['volumechange']['rightrear'] *= -1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                    $parsedFrame['volumechange']['leftrear'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    if ($parsedFrame['incdec']['leftrear'] === false) {&nbsp;</div></li><li><div>                        $parsedFrame['volumechange']['leftrear'] *= -1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                    $parsedFrame['peakvolume']['rightrear'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                    $parsedFrame['peakvolume']['leftrear'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $parsedFrame['data'] = substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>                if (strlen($parsedFrame['data']) &gt; 0) {&nbsp;</div></li><li><div>                    $parsedFrame['incdec']['center'] = (bool) substr($frame_incrdecrflags, 3, 1);&nbsp;</div></li><li><div>                    $parsedFrame['volumechange']['center'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    if ($parsedFrame['incdec']['center'] === false) {&nbsp;</div></li><li><div>                        $parsedFrame['volumechange']['center'] *= -1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                    $parsedFrame['peakvolume']['center'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $parsedFrame['data'] = substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>                if (strlen($parsedFrame['data']) &gt; 0) {&nbsp;</div></li><li><div>                    $parsedFrame['incdec']['bass'] = (bool) substr($frame_incrdecrflags, 2, 1);&nbsp;</div></li><li><div>                    $parsedFrame['volumechange']['bass'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    if ($parsedFrame['incdec']['bass'] === false) {&nbsp;</div></li><li><div>                        $parsedFrame['volumechange']['bass'] *= -1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                    $parsedFrame['peakvolume']['bass'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesvolume));&nbsp;</div></li><li><div>                    $frame_offset += $frame_bytesvolume;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 4) && ($parsedFrame['frame_name'] == 'EQU2')) { // 4.12  EQU2 Equalisation (2) (ID3v2.4+ only)&nbsp;</div></li><li><div>            //   There may be more than one 'EQU2' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same identification string&nbsp;</div></li><li><div>            // &lt;Header of 'Equalisation (2)', ID: 'EQU2'&gt;&nbsp;</div></li><li><div>            // Interpolation method  $xx&nbsp;</div></li><li><div>            //   $00  Band&nbsp;</div></li><li><div>            //   $01  Linear&nbsp;</div></li><li><div>            // Identification        &lt;text string&gt; $00&nbsp;</div></li><li><div>            //   The following is then repeated for every adjustment point&nbsp;</div></li><li><div>            // Frequency          $xx xx&nbsp;</div></li><li><div>            // Volume adjustment  $xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_interpolationmethod = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_idstring = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_idstring) === 0) {&nbsp;</div></li><li><div>                $frame_idstring = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_idstring;&nbsp;</div></li><li><div>            $frame_remainingdata = substr($parsedFrame['data'], $frame_terminatorpos + strlen(&quot;\x00&quot;));&nbsp;</div></li><li><div>            while (strlen($frame_remainingdata)) {&nbsp;</div></li><li><div>                $frame_frequency = getid3_lib::BigEndian2Int(substr($frame_remainingdata, 0, 2)) / 2;&nbsp;</div></li><li><div>                $parsedFrame['data'][$frame_frequency] = getid3_lib::BigEndian2Int(substr($frame_remainingdata, 2, 2), false, true);&nbsp;</div></li><li><div>                $frame_remainingdata = substr($frame_remainingdata, 4);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['interpolationmethod'] = $frame_interpolationmethod;&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion == 3) && ($parsedFrame['frame_name'] == 'EQUA')) || // 4.12  EQUA Equalisation (ID3v2.3 only)&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'EQU'))) {     // 4.13  EQU  Equalisation (ID3v2.2 only)&nbsp;</div></li><li><div>            //   There may only be one 'EQUA' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Relative volume adjustment', ID: 'EQU'&gt;&nbsp;</div></li><li><div>            // Adjustment bits    $xx&nbsp;</div></li><li><div>            //   This is followed by 2 bytes + ('adjustment bits' rounded up to the&nbsp;</div></li><li><div>            //   nearest byte) for every equalisation band in the following format, &nbsp;</div></li><li><div>            //   giving a frequency range of 0 - 32767Hz:&nbsp;</div></li><li><div>            // Increment/decrement   %x (MSB of the Frequency)&nbsp;</div></li><li><div>            // Frequency             (lower 15 bits)&nbsp;</div></li><li><div>            // Adjustment            $xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['adjustmentbits'] = substr($parsedFrame['data'], $frame_offset++, 1);&nbsp;</div></li><li><div>            $frame_adjustmentbytes = ceil($parsedFrame['adjustmentbits'] / 8);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_remainingdata = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            while (strlen($frame_remainingdata) &gt; 0) {&nbsp;</div></li><li><div>                $frame_frequencystr = getid3_lib::BigEndian2Bin(substr($frame_remainingdata, 0, 2));&nbsp;</div></li><li><div>                $frame_incdec = (bool) substr($frame_frequencystr, 0, 1);&nbsp;</div></li><li><div>                $frame_frequency = bindec(substr($frame_frequencystr, 1, 15));&nbsp;</div></li><li><div>                $parsedFrame[$frame_frequency]['incdec'] = $frame_incdec;&nbsp;</div></li><li><div>                $parsedFrame[$frame_frequency]['adjustment'] = getid3_lib::BigEndian2Int(substr($frame_remainingdata, 2, $frame_adjustmentbytes));&nbsp;</div></li><li><div>                if ($parsedFrame[$frame_frequency]['incdec'] === false) {&nbsp;</div></li><li><div>                    $parsedFrame[$frame_frequency]['adjustment'] *= -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_remainingdata = substr($frame_remainingdata, 2 + $frame_adjustmentbytes);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'RVRB')) || // 4.13  RVRB Reverb&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'REV'))) {     // 4.14  REV  Reverb&nbsp;</div></li><li><div>            //   There may only be one 'RVRB' frame in each tag.&nbsp;</div></li><li><div>            // &lt;Header for 'Reverb', ID: 'RVRB'&gt;&nbsp;</div></li><li><div>            // Reverb left (ms)                 $xx xx&nbsp;</div></li><li><div>            // Reverb right (ms)                $xx xx&nbsp;</div></li><li><div>            // Reverb bounces, left             $xx&nbsp;</div></li><li><div>            // Reverb bounces, right            $xx&nbsp;</div></li><li><div>            // Reverb feedback, left to left    $xx&nbsp;</div></li><li><div>            // Reverb feedback, left to right   $xx&nbsp;</div></li><li><div>            // Reverb feedback, right to right  $xx&nbsp;</div></li><li><div>            // Reverb feedback, right to left   $xx&nbsp;</div></li><li><div>            // Premix left to right             $xx&nbsp;</div></li><li><div>            // Premix right to left             $xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['left'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['right'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['bouncesL'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['bouncesR'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['feedbackLL'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['feedbackLR'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['feedbackRR'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['feedbackRL'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['premixLR'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['premixRL'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'APIC')) || // 4.14  APIC Attached picture&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'PIC'))) {     // 4.15  PIC  Attached picture&nbsp;</div></li><li><div>            //   There may be several pictures attached to one file, &nbsp;</div></li><li><div>            //   each in their individual 'APIC' frame, but only one&nbsp;</div></li><li><div>            //   with the same content descriptor&nbsp;</div></li><li><div>            // &lt;Header for 'Attached picture', ID: 'APIC'&gt;&nbsp;</div></li><li><div>            // Text encoding      $xx&nbsp;</div></li><li><div>            // ID3v2.3+ =&gt; MIME type          &lt;text string&gt; $00&nbsp;</div></li><li><div>            // ID3v2.2 =&gt; Image format       $xx xx xx&nbsp;</div></li><li><div>            // Picture type       $xx&nbsp;</div></li><li><div>            // Description        &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Picture data       &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($id3v2_majorversion == 2 && strlen($parsedFrame['data']) &gt; $frame_offset) {&nbsp;</div></li><li><div>                $frame_imagetype = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>                if (strtolower($frame_imagetype) == 'ima') {&nbsp;</div></li><li><div>                    // complete hack for mp3Rage (www.chaoticsoftware.com) that puts ID3v2.3-formatted&nbsp;</div></li><li><div>                    // MIME type instead of 3-char ID3v2.2-format image type  (thanks xbhoffpacbell*net)&nbsp;</div></li><li><div>                    $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>                    $frame_mimetype = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>                    if (ord($frame_mimetype) === 0) {&nbsp;</div></li><li><div>                        $frame_mimetype = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_imagetype = strtoupper(str_replace('image/', '', strtolower($frame_mimetype)));&nbsp;</div></li><li><div>                    if ($frame_imagetype == 'JPEG') {&nbsp;</div></li><li><div>                        $frame_imagetype = 'JPG';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $frame_offset += 3;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($id3v2_majorversion &gt; 2 && strlen($parsedFrame['data']) &gt; $frame_offset) {&nbsp;</div></li><li><div>                $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>                $frame_mimetype = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>                if (ord($frame_mimetype) === 0) {&nbsp;</div></li><li><div>                    $frame_mimetype = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_picturetype = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($frame_offset &gt;= $parsedFrame['datalength']) {&nbsp;</div></li><li><div>                $info['warning'][] = 'data portion of APIC frame is missing at offset '.($parsedFrame['dataoffset'] + 8 + $frame_offset);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>                if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                    $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>                if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                    $frame_description = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>                $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($id3v2_majorversion == 2) {&nbsp;</div></li><li><div>                    $parsedFrame['imagetype'] = $frame_imagetype;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $parsedFrame['mime'] = $frame_mimetype;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $parsedFrame['picturetypeid'] = $frame_picturetype;&nbsp;</div></li><li><div>                $parsedFrame['picturetype'] = $this-&gt;APICPictureTypeLookup($frame_picturetype);&nbsp;</div></li><li><div>                $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>                $parsedFrame['data'] = substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator));&nbsp;</div></li><li><div>                $parsedFrame['datalength'] = strlen($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $parsedFrame['image_mime'] = '';&nbsp;</div></li><li><div>                $imageinfo = array();&nbsp;</div></li><li><div>                $imagechunkcheck = getid3_lib::GetDataImageSize($parsedFrame['data'], $imageinfo);&nbsp;</div></li><li><div>                if (($imagechunkcheck[2] &gt;= 1) && ($imagechunkcheck[2] &lt;= 3)) {&nbsp;</div></li><li><div>                    $parsedFrame['image_mime'] = 'image/'.getid3_lib::ImageTypesLookup($imagechunkcheck[2]);&nbsp;</div></li><li><div>                    if ($imagechunkcheck[0]) {&nbsp;</div></li><li><div>                        $parsedFrame['image_width'] = $imagechunkcheck[0];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($imagechunkcheck[1]) {&nbsp;</div></li><li><div>                        $parsedFrame['image_height'] = $imagechunkcheck[1];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                do {&nbsp;</div></li><li><div>                    if ($this-&gt;getid3-&gt;option_save_attachments === false) {&nbsp;</div></li><li><div>                        // skip entirely&nbsp;</div></li><li><div>                        unset($parsedFrame['data']);&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;getid3-&gt;option_save_attachments === true) {&nbsp;</div></li><li><div>                        // great&nbsp;</div></li><li><div>/**&nbsp;</div></li><li><div>                    } elseif (is_int($this-&gt;getid3-&gt;option_save_attachments)) {&nbsp;</div></li><li><div>                        if ($this-&gt;getid3-&gt;option_save_attachments &lt; $parsedFrame['data_length']) {&nbsp;</div></li><li><div>                            // too big, skip&nbsp;</div></li><li><div>                            $info['warning'][] = 'attachment at '.$frame_offset.' is too large to process inline ('.number_format($parsedFrame['data_length']).' bytes)';&nbsp;</div></li><li><div>                            unset($parsedFrame['data']);&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>*/&nbsp;</div></li><li><div>                    } elseif (is_string($this-&gt;getid3-&gt;option_save_attachments)) {&nbsp;</div></li><li><div>                        $dir = rtrim(str_replace(array('/', '\\'), DIRECTORY_SEPARATOR, $this-&gt;getid3-&gt;option_save_attachments), DIRECTORY_SEPARATOR);&nbsp;</div></li><li><div>                        if (!is_dir($dir) || !is_writable($dir)) {&nbsp;</div></li><li><div>                            // cannot write, skip&nbsp;</div></li><li><div>                            $info['warning'][] = 'attachment at '.$frame_offset.' cannot be saved to &quot;'.$dir.'&quot; (not writable)';&nbsp;</div></li><li><div>                            unset($parsedFrame['data']);&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    // if we get this far, must be OK&nbsp;</div></li><li><div>                    if (is_string($this-&gt;getid3-&gt;option_save_attachments)) {&nbsp;</div></li><li><div>                        $destination_filename = $dir.DIRECTORY_SEPARATOR.md5($info['filenamepath']).'_'.$frame_offset;&nbsp;</div></li><li><div>                        if (!file_exists($destination_filename) || is_writable($destination_filename)) {&nbsp;</div></li><li><div>                            file_put_contents($destination_filename, $parsedFrame['data']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $info['warning'][] = 'attachment at '.$frame_offset.' cannot be saved to &quot;'.$destination_filename.'&quot; (not writable)';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $parsedFrame['data_filename'] = $destination_filename;&nbsp;</div></li><li><div>                        unset($parsedFrame['data']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                            if (!isset($info['id3v2']['comments']['picture'])) {&nbsp;</div></li><li><div>                                $info['id3v2']['comments']['picture'] = array();&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $comments_picture_data = array();&nbsp;</div></li><li><div>                            foreach (array('data', 'image_mime', 'image_width', 'image_height', 'imagetype', 'picturetype', 'description', 'datalength') as $picture_key) {&nbsp;</div></li><li><div>                                if (isset($parsedFrame[$picture_key])) {&nbsp;</div></li><li><div>                                    $comments_picture_data[$picture_key] = $parsedFrame[$picture_key];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $info['id3v2']['comments']['picture'][] = $comments_picture_data;&nbsp;</div></li><li><div>                            unset($comments_picture_data);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } while (false);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'GEOB')) || // 4.15  GEOB General encapsulated object&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'GEO'))) {     // 4.16  GEO  General encapsulated object&nbsp;</div></li><li><div>            //   There may be more than one 'GEOB' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same content descriptor&nbsp;</div></li><li><div>            // &lt;Header for 'General encapsulated object', ID: 'GEOB'&gt;&nbsp;</div></li><li><div>            // Text encoding          $xx&nbsp;</div></li><li><div>            // MIME type              &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Filename               &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Content description    &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Encapsulated object    &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_mimetype = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_mimetype) === 0) {&nbsp;</div></li><li><div>                $frame_mimetype = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_filename = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_filename) === 0) {&nbsp;</div></li><li><div>                $frame_filename = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen($frame_textencoding_terminator);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen($frame_textencoding_terminator);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['objectdata'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['mime'] = $frame_mimetype;&nbsp;</div></li><li><div>            $parsedFrame['filename'] = $frame_filename;&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'PCNT')) || // 4.16  PCNT Play counter&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'CNT'))) {     // 4.17  CNT  Play counter&nbsp;</div></li><li><div>            //   There may only be one 'PCNT' frame in each tag.&nbsp;</div></li><li><div>            //   When the counter reaches all one's, one byte is inserted in&nbsp;</div></li><li><div>            //   front of the counter thus making the counter eight bits bigger&nbsp;</div></li><li><div>            // &lt;Header for 'Play counter', ID: 'PCNT'&gt;&nbsp;</div></li><li><div>            // Counter        $xx xx xx xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['data'] = getid3_lib::BigEndian2Int($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'POPM')) || // 4.17  POPM Popularimeter&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'POP'))) {    // 4.18  POP  Popularimeter&nbsp;</div></li><li><div>            //   There may be more than one 'POPM' frame in each tag, &nbsp;</div></li><li><div>            //   but only one with the same email address&nbsp;</div></li><li><div>            // &lt;Header for 'Popularimeter', ID: 'POPM'&gt;&nbsp;</div></li><li><div>            // Email to user   &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Rating          $xx&nbsp;</div></li><li><div>            // Counter         $xx xx xx xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_emailaddress = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_emailaddress) === 0) {&nbsp;</div></li><li><div>                $frame_emailaddress = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>            $frame_rating = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['counter'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset));&nbsp;</div></li><li><div>            $parsedFrame['email'] = $frame_emailaddress;&nbsp;</div></li><li><div>            $parsedFrame['rating'] = $frame_rating;&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'RBUF')) || // 4.18  RBUF Recommended buffer size&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'BUF'))) {     // 4.19  BUF  Recommended buffer size&nbsp;</div></li><li><div>            //   There may only be one 'RBUF' frame in each tag&nbsp;</div></li><li><div>            // &lt;Header for 'Recommended buffer size', ID: 'RBUF'&gt;&nbsp;</div></li><li><div>            // Buffer size               $xx xx xx&nbsp;</div></li><li><div>            // Embedded info flag        %0000000x&nbsp;</div></li><li><div>            // Offset to next tag        $xx xx xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['buffersize'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 3));&nbsp;</div></li><li><div>            $frame_offset += 3;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_embeddedinfoflags = getid3_lib::BigEndian2Bin(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['flags']['embededinfo'] = (bool) substr($frame_embeddedinfoflags, 7, 1);&nbsp;</div></li><li><div>            $parsedFrame['nexttagoffset'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'CRM')) { // 4.20  Encrypted meta frame (ID3v2.2 only)&nbsp;</div></li><li><div>            //   There may be more than one 'CRM' frame in a tag, &nbsp;</div></li><li><div>            //   but only one with the same 'owner identifier'&nbsp;</div></li><li><div>            // &lt;Header for 'Encrypted meta frame', ID: 'CRM'&gt;&nbsp;</div></li><li><div>            // Owner identifier      &lt;textstring&gt; $00 (00)&nbsp;</div></li><li><div>            // Content/explanation   &lt;textstring&gt; $00 (00)&nbsp;</div></li><li><div>            // Encrypted datablock   &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_ownerid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = $frame_ownerid;&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'AENC')) || // 4.19  AENC Audio encryption&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'CRA'))) {     // 4.21  CRA  Audio encryption&nbsp;</div></li><li><div>            //   There may be more than one 'AENC' frames in a tag, &nbsp;</div></li><li><div>            //   but only one with the same 'Owner identifier'&nbsp;</div></li><li><div>            // &lt;Header for 'Audio encryption', ID: 'AENC'&gt;&nbsp;</div></li><li><div>            // Owner identifier   &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Preview start      $xx xx&nbsp;</div></li><li><div>            // Preview length     $xx xx&nbsp;</div></li><li><div>            // Encryption info    &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_ownerid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_ownerid) === 0) {&nbsp;</div></li><li><div>                $frame_ownerid == '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = $frame_ownerid;&nbsp;</div></li><li><div>            $parsedFrame['previewstart'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['previewlength'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['encryptioninfo'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif ((($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'LINK')) || // 4.20  LINK Linked information&nbsp;</div></li><li><div>                (($id3v2_majorversion == 2) && ($parsedFrame['frame_name'] == 'LNK'))) {    // 4.22  LNK  Linked information&nbsp;</div></li><li><div>            //   There may be more than one 'LINK' frame in a tag, &nbsp;</div></li><li><div>            //   but only one with the same contents&nbsp;</div></li><li><div>            // &lt;Header for 'Linked information', ID: 'LINK'&gt;&nbsp;</div></li><li><div>            // ID3v2.3+ =&gt; Frame identifier   $xx xx xx xx&nbsp;</div></li><li><div>            // ID3v2.2 =&gt; Frame identifier   $xx xx xx&nbsp;</div></li><li><div>            // URL                            &lt;text string&gt; $00&nbsp;</div></li><li><div>            // ID and additional data         &lt;text string(s)&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            if ($id3v2_majorversion == 2) {&nbsp;</div></li><li><div>                $parsedFrame['frameid'] = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>                $frame_offset += 3;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $parsedFrame['frameid'] = substr($parsedFrame['data'], $frame_offset, 4);&nbsp;</div></li><li><div>                $frame_offset += 4;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_url = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_url) === 0) {&nbsp;</div></li><li><div>                $frame_url = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>            $parsedFrame['url'] = $frame_url;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['additionaldata'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && $parsedFrame['url']) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = getid3_lib::iconv_fallback_iso88591_utf8($parsedFrame['url']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'POSS')) { // 4.21  POSS Position synchronisation frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   There may only be one 'POSS' frame in each tag&nbsp;</div></li><li><div>            // &lt;Head for 'Position synchronisation', ID: 'POSS'&gt;&nbsp;</div></li><li><div>            // Time stamp format         $xx&nbsp;</div></li><li><div>            // Position                  $xx (xx ...)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['timestampformat'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['position'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset));&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'USER')) { // 4.22  USER Terms of use (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   There may be more than one 'Terms of use' frame in a tag, &nbsp;</div></li><li><div>            //   but only one with the same 'Language'&nbsp;</div></li><li><div>            // &lt;Header for 'Terms of use frame', ID: 'USER'&gt;&nbsp;</div></li><li><div>            // Text encoding        $xx&nbsp;</div></li><li><div>            // Language             $xx xx xx&nbsp;</div></li><li><div>            // The actual text      &lt;text string according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_language = substr($parsedFrame['data'], $frame_offset, 3);&nbsp;</div></li><li><div>            $frame_offset += 3;&nbsp;</div></li><li><div>            $parsedFrame['language'] = $frame_language;&nbsp;</div></li><li><div>            $parsedFrame['languagename'] = $this-&gt;LanguageLookup($frame_language, false);&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            if (!empty($parsedFrame['framenameshort']) && !empty($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $info['id3v2']['comments'][$parsedFrame['framenameshort']][] = getid3_lib::iconv_fallback($parsedFrame['encoding'], $info['id3v2']['encoding'], $parsedFrame['data']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'OWNE')) { // 4.23  OWNE Ownership frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   There may only be one 'OWNE' frame in a tag&nbsp;</div></li><li><div>            // &lt;Header for 'Ownership frame', ID: 'OWNE'&gt;&nbsp;</div></li><li><div>            // Text encoding     $xx&nbsp;</div></li><li><div>            // Price paid        &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Date of purch.    &lt;text string&gt;&nbsp;</div></li><li><div>            // Seller            &lt;text string according to encoding&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_pricepaid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['pricepaid']['currencyid'] = substr($frame_pricepaid, 0, 3);&nbsp;</div></li><li><div>            $parsedFrame['pricepaid']['currency'] = $this-&gt;LookupCurrencyUnits($parsedFrame['pricepaid']['currencyid']);&nbsp;</div></li><li><div>            $parsedFrame['pricepaid']['value'] = substr($frame_pricepaid, 3);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['purchasedate'] = substr($parsedFrame['data'], $frame_offset, 8);&nbsp;</div></li><li><div>            if (!$this-&gt;IsValidDateStampString($parsedFrame['purchasedate'])) {&nbsp;</div></li><li><div>                $parsedFrame['purchasedateunix'] = mktime (0, 0, 0, substr($parsedFrame['purchasedate'], 4, 2), substr($parsedFrame['purchasedate'], 6, 2), substr($parsedFrame['purchasedate'], 0, 4));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset += 8;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['seller'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'COMR')) { // 4.24  COMR Commercial frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   There may be more than one 'commercial frame' in a tag, &nbsp;</div></li><li><div>            //   but no two may be identical&nbsp;</div></li><li><div>            // &lt;Header for 'Commercial frame', ID: 'COMR'&gt;&nbsp;</div></li><li><div>            // Text encoding      $xx&nbsp;</div></li><li><div>            // Price string       &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Valid until        &lt;text string&gt;&nbsp;</div></li><li><div>            // Contact URL        &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Received as        $xx&nbsp;</div></li><li><div>            // Name of seller     &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Description        &lt;text string according to encoding&gt; $00 (00)&nbsp;</div></li><li><div>            // Picture MIME type  &lt;string&gt; $00&nbsp;</div></li><li><div>            // Seller logo        &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_textencoding = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_textencoding_terminator = $this-&gt;TextEncodingTerminatorLookup($frame_textencoding);&nbsp;</div></li><li><div>            if ((($id3v2_majorversion &lt;= 3) && ($frame_textencoding &gt; 1)) || (($id3v2_majorversion == 4) && ($frame_textencoding &gt; 3))) {&nbsp;</div></li><li><div>                $info['warning'][] = 'Invalid text encoding byte ('.$frame_textencoding.') in frame &quot;'.$parsedFrame['frame_name'].'&quot; - defaulting to ISO-8859-1 encoding';&nbsp;</div></li><li><div>                $frame_textencoding_terminator = &quot;\x00&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_pricestring = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>            $frame_rawpricearray = explode('/', $frame_pricestring);&nbsp;</div></li><li><div>            foreach ($frame_rawpricearray as $key =&gt; $val) {&nbsp;</div></li><li><div>                $frame_currencyid = substr($val, 0, 3);&nbsp;</div></li><li><div>                $parsedFrame['price'][$frame_currencyid]['currency'] = $this-&gt;LookupCurrencyUnits($frame_currencyid);&nbsp;</div></li><li><div>                $parsedFrame['price'][$frame_currencyid]['value'] = substr($val, 3);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_datestring = substr($parsedFrame['data'], $frame_offset, 8);&nbsp;</div></li><li><div>            $frame_offset += 8;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_contacturl = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_receivedasid = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_sellername = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_sellername) === 0) {&nbsp;</div></li><li><div>                $frame_sellername = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen($frame_textencoding_terminator);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], $frame_textencoding_terminator, $frame_offset);&nbsp;</div></li><li><div>            if (ord(substr($parsedFrame['data'], $frame_terminatorpos + strlen($frame_textencoding_terminator), 1)) === 0) {&nbsp;</div></li><li><div>                $frame_terminatorpos++; // strpos() fooled because 2nd byte of Unicode chars are often 0x00&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_description = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_description) === 0) {&nbsp;</div></li><li><div>                $frame_description = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen($frame_textencoding_terminator);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_mimetype = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_sellerlogo = substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['encodingid'] = $frame_textencoding;&nbsp;</div></li><li><div>            $parsedFrame['encoding'] = $this-&gt;TextEncodingNameLookup($frame_textencoding);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['pricevaliduntil'] = $frame_datestring;&nbsp;</div></li><li><div>            $parsedFrame['contacturl'] = $frame_contacturl;&nbsp;</div></li><li><div>            $parsedFrame['receivedasid'] = $frame_receivedasid;&nbsp;</div></li><li><div>            $parsedFrame['receivedas'] = $this-&gt;COMRReceivedAsLookup($frame_receivedasid);&nbsp;</div></li><li><div>            $parsedFrame['sellername'] = $frame_sellername;&nbsp;</div></li><li><div>            $parsedFrame['description'] = $frame_description;&nbsp;</div></li><li><div>            $parsedFrame['mime'] = $frame_mimetype;&nbsp;</div></li><li><div>            $parsedFrame['logo'] = $frame_sellerlogo;&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'ENCR')) { // 4.25  ENCR Encryption method registration (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   There may be several 'ENCR' frames in a tag, &nbsp;</div></li><li><div>            //   but only one containing the same symbol&nbsp;</div></li><li><div>            //   and only one containing the same owner identifier&nbsp;</div></li><li><div>            // &lt;Header for 'Encryption method registration', ID: 'ENCR'&gt;&nbsp;</div></li><li><div>            // Owner identifier    &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Method symbol       $xx&nbsp;</div></li><li><div>            // Encryption data     &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_ownerid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_ownerid) === 0) {&nbsp;</div></li><li><div>                $frame_ownerid = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = $frame_ownerid;&nbsp;</div></li><li><div>            $parsedFrame['methodsymbol'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'GRID')) { // 4.26  GRID Group identification registration (ID3v2.3+ only)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //   There may be several 'GRID' frames in a tag, &nbsp;</div></li><li><div>            //   but only one containing the same symbol&nbsp;</div></li><li><div>            //   and only one containing the same owner identifier&nbsp;</div></li><li><div>            // &lt;Header for 'Group ID registration', ID: 'GRID'&gt;&nbsp;</div></li><li><div>            // Owner identifier      &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Group symbol          $xx&nbsp;</div></li><li><div>            // Group dependent data  &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_ownerid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_ownerid) === 0) {&nbsp;</div></li><li><div>                $frame_ownerid = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = $frame_ownerid;&nbsp;</div></li><li><div>            $parsedFrame['groupsymbol'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'PRIV')) { // 4.27  PRIV Private frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            //   The tag may contain more than one 'PRIV' frame&nbsp;</div></li><li><div>            //   but only with different contents&nbsp;</div></li><li><div>            // &lt;Header for 'Private frame', ID: 'PRIV'&gt;&nbsp;</div></li><li><div>            // Owner identifier      &lt;text string&gt; $00&nbsp;</div></li><li><div>            // The private data      &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $frame_terminatorpos = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>            $frame_ownerid = substr($parsedFrame['data'], $frame_offset, $frame_terminatorpos - $frame_offset);&nbsp;</div></li><li><div>            if (ord($frame_ownerid) === 0) {&nbsp;</div></li><li><div>                $frame_ownerid = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset = $frame_terminatorpos + strlen(&quot;\x00&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['ownerid'] = $frame_ownerid;&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 4) && ($parsedFrame['frame_name'] == 'SIGN')) { // 4.28  SIGN Signature frame (ID3v2.4+ only)&nbsp;</div></li><li><div>            //   There may be more than one 'signature frame' in a tag, &nbsp;</div></li><li><div>            //   but no two may be identical&nbsp;</div></li><li><div>            // &lt;Header for 'Signature frame', ID: 'SIGN'&gt;&nbsp;</div></li><li><div>            // Group symbol      $xx&nbsp;</div></li><li><div>            // Signature         &lt;binary data&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['groupsymbol'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $parsedFrame['data'] = (string) substr($parsedFrame['data'], $frame_offset);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 4) && ($parsedFrame['frame_name'] == 'SEEK')) { // 4.29  SEEK Seek frame (ID3v2.4+ only)&nbsp;</div></li><li><div>            //   There may only be one 'seek frame' in a tag&nbsp;</div></li><li><div>            // &lt;Header for 'Seek frame', ID: 'SEEK'&gt;&nbsp;</div></li><li><div>            // Minimum offset to next tag       $xx xx xx xx&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['data'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 4) && ($parsedFrame['frame_name'] == 'ASPI')) { // 4.30  ASPI Audio seek point index (ID3v2.4+ only)&nbsp;</div></li><li><div>            //   There may only be one 'audio seek point index' frame in a tag&nbsp;</div></li><li><div>            // &lt;Header for 'Seek Point Index', ID: 'ASPI'&gt;&nbsp;</div></li><li><div>            // Indexed data start (S)         $xx xx xx xx&nbsp;</div></li><li><div>            // Indexed data length (L)        $xx xx xx xx&nbsp;</div></li><li><div>            // Number of index points (N)     $xx xx&nbsp;</div></li><li><div>            // Bits per index point (b)       $xx&nbsp;</div></li><li><div>            //   Then for every index point the following data is included:&nbsp;</div></li><li><div>            // Fraction at index (Fi)          $xx (xx)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['datastart'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            $parsedFrame['indexeddatalength'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            $parsedFrame['indexpoints'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['bitsperpoint'] = ord(substr($parsedFrame['data'], $frame_offset++, 1));&nbsp;</div></li><li><div>            $frame_bytesperpoint = ceil($parsedFrame['bitsperpoint'] / 8);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; $parsedFrame['indexpoints']; $i++) {&nbsp;</div></li><li><div>                $parsedFrame['indexes'][$i] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, $frame_bytesperpoint));&nbsp;</div></li><li><div>                $frame_offset += $frame_bytesperpoint;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'RGAD')) { // Replay Gain Adjustment&nbsp;</div></li><li><div>            // http://privatewww.essex.ac.uk/~djmrob/replaygain/file_format_id3v2.html&nbsp;</div></li><li><div>            //   There may only be one 'RGAD' frame in a tag&nbsp;</div></li><li><div>            // &lt;Header for 'Replay Gain Adjustment', ID: 'RGAD'&gt;&nbsp;</div></li><li><div>            // Peak Amplitude                      $xx $xx $xx $xx&nbsp;</div></li><li><div>            // Radio Replay Gain Adjustment        %aaabbbcd %dddddddd&nbsp;</div></li><li><div>            // Audiophile Replay Gain Adjustment   %aaabbbcd %dddddddd&nbsp;</div></li><li><div>            //   a - name code&nbsp;</div></li><li><div>            //   b - originator code&nbsp;</div></li><li><div>            //   c - sign bit&nbsp;</div></li><li><div>            //   d - replay gain adjustment&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            $parsedFrame['peakamplitude'] = getid3_lib::BigEndian2Float(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            $rg_track_adjustment = getid3_lib::Dec2Bin(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $rg_album_adjustment = getid3_lib::Dec2Bin(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>            $frame_offset += 2;&nbsp;</div></li><li><div>            $parsedFrame['raw']['track']['name'] = getid3_lib::Bin2Dec(substr($rg_track_adjustment, 0, 3));&nbsp;</div></li><li><div>            $parsedFrame['raw']['track']['originator'] = getid3_lib::Bin2Dec(substr($rg_track_adjustment, 3, 3));&nbsp;</div></li><li><div>            $parsedFrame['raw']['track']['signbit'] = getid3_lib::Bin2Dec(substr($rg_track_adjustment, 6, 1));&nbsp;</div></li><li><div>            $parsedFrame['raw']['track']['adjustment'] = getid3_lib::Bin2Dec(substr($rg_track_adjustment, 7, 9));&nbsp;</div></li><li><div>            $parsedFrame['raw']['album']['name'] = getid3_lib::Bin2Dec(substr($rg_album_adjustment, 0, 3));&nbsp;</div></li><li><div>            $parsedFrame['raw']['album']['originator'] = getid3_lib::Bin2Dec(substr($rg_album_adjustment, 3, 3));&nbsp;</div></li><li><div>            $parsedFrame['raw']['album']['signbit'] = getid3_lib::Bin2Dec(substr($rg_album_adjustment, 6, 1));&nbsp;</div></li><li><div>            $parsedFrame['raw']['album']['adjustment'] = getid3_lib::Bin2Dec(substr($rg_album_adjustment, 7, 9));&nbsp;</div></li><li><div>            $parsedFrame['track']['name'] = getid3_lib::RGADnameLookup($parsedFrame['raw']['track']['name']);&nbsp;</div></li><li><div>            $parsedFrame['track']['originator'] = getid3_lib::RGADoriginatorLookup($parsedFrame['raw']['track']['originator']);&nbsp;</div></li><li><div>            $parsedFrame['track']['adjustment'] = getid3_lib::RGADadjustmentLookup($parsedFrame['raw']['track']['adjustment'], $parsedFrame['raw']['track']['signbit']);&nbsp;</div></li><li><div>            $parsedFrame['album']['name'] = getid3_lib::RGADnameLookup($parsedFrame['raw']['album']['name']);&nbsp;</div></li><li><div>            $parsedFrame['album']['originator'] = getid3_lib::RGADoriginatorLookup($parsedFrame['raw']['album']['originator']);&nbsp;</div></li><li><div>            $parsedFrame['album']['adjustment'] = getid3_lib::RGADadjustmentLookup($parsedFrame['raw']['album']['adjustment'], $parsedFrame['raw']['album']['signbit']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $info['replay_gain']['track']['peak'] = $parsedFrame['peakamplitude'];&nbsp;</div></li><li><div>            $info['replay_gain']['track']['originator'] = $parsedFrame['track']['originator'];&nbsp;</div></li><li><div>            $info['replay_gain']['track']['adjustment'] = $parsedFrame['track']['adjustment'];&nbsp;</div></li><li><div>            $info['replay_gain']['album']['originator'] = $parsedFrame['album']['originator'];&nbsp;</div></li><li><div>            $info['replay_gain']['album']['adjustment'] = $parsedFrame['album']['adjustment'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset($parsedFrame['data']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'CHAP')) { // CHAP Chapters frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            // http://id3.org/id3v2-chapters-1.0&nbsp;</div></li><li><div>            // &lt;ID3v2.3 or ID3v2.4 frame header, ID: &quot;CHAP&quot;&gt;           (10 bytes)&nbsp;</div></li><li><div>            // Element ID      &lt;text string&gt; $00&nbsp;</div></li><li><div>            // Start time      $xx xx xx xx&nbsp;</div></li><li><div>            // End time        $xx xx xx xx&nbsp;</div></li><li><div>            // Start offset    $xx xx xx xx&nbsp;</div></li><li><div>            // End offset      $xx xx xx xx&nbsp;</div></li><li><div>            // &lt;Optional embedded sub-frames&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            @list($parsedFrame['element_id']) = explode(&quot;\x00&quot;, $parsedFrame['data'], 2);&nbsp;</div></li><li><div>            $frame_offset += strlen($parsedFrame['element_id'].&quot;\x00&quot;);&nbsp;</div></li><li><div>            $parsedFrame['time_begin'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            $parsedFrame['time_end'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            if (substr($parsedFrame['data'], $frame_offset, 4) != &quot;\xFF\xFF\xFF\xFF&quot;) {&nbsp;</div></li><li><div>                // &quot;If these bytes are all set to 0xFF then the value should be ignored and the start time value should be utilized.&quot;&nbsp;</div></li><li><div>                $parsedFrame['offset_begin'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>            if (substr($parsedFrame['data'], $frame_offset, 4) != &quot;\xFF\xFF\xFF\xFF&quot;) {&nbsp;</div></li><li><div>                // &quot;If these bytes are all set to 0xFF then the value should be ignored and the start time value should be utilized.&quot;&nbsp;</div></li><li><div>                $parsedFrame['offset_end'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frame_offset += 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $parsedFrame['subframes'] = array();&nbsp;</div></li><li><div>                while ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                    // &lt;Optional embedded sub-frames&gt;&nbsp;</div></li><li><div>                    $subframe = array();&nbsp;</div></li><li><div>                    $subframe['name'] =                           substr($parsedFrame['data'], $frame_offset, 4);&nbsp;</div></li><li><div>                    $frame_offset += 4;&nbsp;</div></li><li><div>                    $subframe['size'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>                    $frame_offset += 4;&nbsp;</div></li><li><div>                    $subframe['flags_raw'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>                    $frame_offset += 2;&nbsp;</div></li><li><div>                    if ($subframe['size'] &gt; (strlen($parsedFrame['data']) - $frame_offset)) {&nbsp;</div></li><li><div>                        $info['warning'][] = 'CHAP subframe &quot;'.$subframe['name'].'&quot; at frame offset '.$frame_offset.' claims to be &quot;'.$subframe['size'].'&quot; bytes, which is more than the available data ('.(strlen($parsedFrame['data']) - $frame_offset).' bytes)';&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $subframe_rawdata = substr($parsedFrame['data'], $frame_offset, $subframe['size']);&nbsp;</div></li><li><div>                    $frame_offset += $subframe['size'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $subframe['encodingid'] = ord(substr($subframe_rawdata, 0, 1));&nbsp;</div></li><li><div>                    $subframe['text'] =     substr($subframe_rawdata, 1);&nbsp;</div></li><li><div>                    $subframe['encoding'] = $this-&gt;TextEncodingNameLookup($subframe['encodingid']);&nbsp;</div></li><li><div>                    $encoding_converted_text = trim(getid3_lib::iconv_fallback($subframe['encoding'], $info['encoding'], $subframe['text']));;&nbsp;</div></li><li><div>                    switch (substr($encoding_converted_text, 0, 2)) {&nbsp;</div></li><li><div>                        case &quot;\xFF\xFE&quot;:&nbsp;</div></li><li><div>                        case &quot;\xFE\xFF&quot;:&nbsp;</div></li><li><div>                            switch (strtoupper($info['id3v2']['encoding'])) {&nbsp;</div></li><li><div>                                case 'ISO-8859-1':&nbsp;</div></li><li><div>                                case 'UTF-8':&nbsp;</div></li><li><div>                                    $encoding_converted_text = substr($encoding_converted_text, 2);&nbsp;</div></li><li><div>                                    // remove unwanted byte-order-marks&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>                                default:&nbsp;</div></li><li><div>                                    // ignore&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        default:&nbsp;</div></li><li><div>                            // do not remove BOM&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (($subframe['name'] == 'TIT2') || ($subframe['name'] == 'TIT3')) {&nbsp;</div></li><li><div>                        if ($subframe['name'] == 'TIT2') {&nbsp;</div></li><li><div>                            $parsedFrame['chapter_name'] = $encoding_converted_text;&nbsp;</div></li><li><div>                        } elseif ($subframe['name'] == 'TIT3') {&nbsp;</div></li><li><div>                            $parsedFrame['chapter_description'] = $encoding_converted_text;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $parsedFrame['subframes'][] = $subframe;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $info['warning'][] = 'ID3v2.CHAP subframe &quot;'.$subframe['name'].'&quot; not handled (only TIT2 and TIT3)';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($subframe_rawdata, $subframe, $encoding_converted_text);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $id3v2_chapter_entry = array();&nbsp;</div></li><li><div>            foreach (array('id', 'time_begin', 'time_end', 'offset_begin', 'offset_end', 'chapter_name', 'chapter_description') as $id3v2_chapter_key) {&nbsp;</div></li><li><div>                if (isset($parsedFrame[$id3v2_chapter_key])) {&nbsp;</div></li><li><div>                    $id3v2_chapter_entry[$id3v2_chapter_key] = $parsedFrame[$id3v2_chapter_key];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (!isset($info['id3v2']['chapters'])) {&nbsp;</div></li><li><div>                $info['id3v2']['chapters'] = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $info['id3v2']['chapters'][] = $id3v2_chapter_entry;&nbsp;</div></li><li><div>            unset($id3v2_chapter_entry, $id3v2_chapter_key);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } elseif (($id3v2_majorversion &gt;= 3) && ($parsedFrame['frame_name'] == 'CTOC')) { // CTOC Chapters Table Of Contents frame (ID3v2.3+ only)&nbsp;</div></li><li><div>            // http://id3.org/id3v2-chapters-1.0&nbsp;</div></li><li><div>            // &lt;ID3v2.3 or ID3v2.4 frame header, ID: &quot;CTOC&quot;&gt;           (10 bytes)&nbsp;</div></li><li><div>            // Element ID      &lt;text string&gt; $00&nbsp;</div></li><li><div>            // CTOC flags        %xx&nbsp;</div></li><li><div>            // Entry count       $xx&nbsp;</div></li><li><div>            // Child Element ID  &lt;string&gt;$00   /* zero or more child CHAP or CTOC entries */&nbsp;</div></li><li><div>            // &lt;Optional embedded sub-frames&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $frame_offset = 0;&nbsp;</div></li><li><div>            @list($parsedFrame['element_id']) = explode(&quot;\x00&quot;, $parsedFrame['data'], 2);&nbsp;</div></li><li><div>            $frame_offset += strlen($parsedFrame['element_id'].&quot;\x00&quot;);&nbsp;</div></li><li><div>            $ctoc_flags_raw = ord(substr($parsedFrame['data'], $frame_offset, 1));&nbsp;</div></li><li><div>            $frame_offset += 1;&nbsp;</div></li><li><div>            $parsedFrame['entry_count'] = ord(substr($parsedFrame['data'], $frame_offset, 1));&nbsp;</div></li><li><div>            $frame_offset += 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $terminator_position = null;&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; $parsedFrame['entry_count']; $i++) {&nbsp;</div></li><li><div>                $terminator_position = strpos($parsedFrame['data'], &quot;\x00&quot;, $frame_offset);&nbsp;</div></li><li><div>                $parsedFrame['child_element_ids'][$i] = substr($parsedFrame['data'], $frame_offset, $terminator_position - $frame_offset);&nbsp;</div></li><li><div>                $frame_offset = $terminator_position + 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $parsedFrame['ctoc_flags']['ordered'] = (bool) ($ctoc_flags_raw & 0x01);&nbsp;</div></li><li><div>            $parsedFrame['ctoc_flags']['top_level'] = (bool) ($ctoc_flags_raw & 0x03);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset($ctoc_flags_raw, $terminator_position);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                $parsedFrame['subframes'] = array();&nbsp;</div></li><li><div>                while ($frame_offset &lt; strlen($parsedFrame['data'])) {&nbsp;</div></li><li><div>                    // &lt;Optional embedded sub-frames&gt;&nbsp;</div></li><li><div>                    $subframe = array();&nbsp;</div></li><li><div>                    $subframe['name'] =                           substr($parsedFrame['data'], $frame_offset, 4);&nbsp;</div></li><li><div>                    $frame_offset += 4;&nbsp;</div></li><li><div>                    $subframe['size'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 4));&nbsp;</div></li><li><div>                    $frame_offset += 4;&nbsp;</div></li><li><div>                    $subframe['flags_raw'] = getid3_lib::BigEndian2Int(substr($parsedFrame['data'], $frame_offset, 2));&nbsp;</div></li><li><div>                    $frame_offset += 2;&nbsp;</div></li><li><div>                    if ($subframe['size'] &gt; (strlen($parsedFrame['data']) - $frame_offset)) {&nbsp;</div></li><li><div>                        $info['warning'][] = 'CTOS subframe &quot;'.$subframe['name'].'&quot; at frame offset '.$frame_offset.' claims to be &quot;'.$subframe['size'].'&quot; bytes, which is more than the available data ('.(strlen($parsedFrame['data']) - $frame_offset).' bytes)';&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $subframe_rawdata = substr($parsedFrame['data'], $frame_offset, $subframe['size']);&nbsp;</div></li><li><div>                    $frame_offset += $subframe['size'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $subframe['encodingid'] = ord(substr($subframe_rawdata, 0, 1));&nbsp;</div></li><li><div>                    $subframe['text'] =     substr($subframe_rawdata, 1);&nbsp;</div></li><li><div>                    $subframe['encoding'] = $this-&gt;TextEncodingNameLookup($subframe['encodingid']);&nbsp;</div></li><li><div>                    $encoding_converted_text = trim(getid3_lib::iconv_fallback($subframe['encoding'], $info['encoding'], $subframe['text']));;&nbsp;</div></li><li><div>                    switch (substr($encoding_converted_text, 0, 2)) {&nbsp;</div></li><li><div>                        case &quot;\xFF\xFE&quot;:&nbsp;</div></li><li><div>                        case &quot;\xFE\xFF&quot;:&nbsp;</div></li><li><div>                            switch (strtoupper($info['id3v2']['encoding'])) {&nbsp;</div></li><li><div>                                case 'ISO-8859-1':&nbsp;</div></li><li><div>                                case 'UTF-8':&nbsp;</div></li><li><div>                                    $encoding_converted_text = substr($encoding_converted_text, 2);&nbsp;</div></li><li><div>                                    // remove unwanted byte-order-marks&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>                                default:&nbsp;</div></li><li><div>                                    // ignore&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        default:&nbsp;</div></li><li><div>                            // do not remove BOM&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (($subframe['name'] == 'TIT2') || ($subframe['name'] == 'TIT3')) {&nbsp;</div></li><li><div>                        if ($subframe['name'] == 'TIT2') {&nbsp;</div></li><li><div>                            $parsedFrame['toc_name'] = $encoding_converted_text;&nbsp;</div></li><li><div>                        } elseif ($subframe['name'] == 'TIT3') {&nbsp;</div></li><li><div>                            $parsedFrame['toc_description'] = $encoding_converted_text;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $parsedFrame['subframes'][] = $subframe;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $info['warning'][] = 'ID3v2.CTOC subframe &quot;'.$subframe['name'].'&quot; not handled (only TIT2 and TIT3)';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($subframe_rawdata, $subframe, $encoding_converted_text);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function DeUnsynchronise($data) {&nbsp;</div></li><li><div>        return str_replace(&quot;\xFF\x00&quot;, &quot;\xFF&quot;, $data);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupExtendedHeaderRestrictionsTagSizeLimits($index) {&nbsp;</div></li><li><div>        static $LookupExtendedHeaderRestrictionsTagSizeLimits = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'No more than 128 frames and 1 MB total tag size', &nbsp;</div></li><li><div>            0x01 =&gt; 'No more than 64 frames and 128 KB total tag size', &nbsp;</div></li><li><div>            0x02 =&gt; 'No more than 32 frames and 40 KB total tag size', &nbsp;</div></li><li><div>            0x03 =&gt; 'No more than 32 frames and 4 KB total tag size', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($LookupExtendedHeaderRestrictionsTagSizeLimits[$index]) ? $LookupExtendedHeaderRestrictionsTagSizeLimits[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupExtendedHeaderRestrictionsTextEncodings($index) {&nbsp;</div></li><li><div>        static $LookupExtendedHeaderRestrictionsTextEncodings = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'No restrictions', &nbsp;</div></li><li><div>            0x01 =&gt; 'Strings are only encoded with ISO-8859-1 or UTF-8', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($LookupExtendedHeaderRestrictionsTextEncodings[$index]) ? $LookupExtendedHeaderRestrictionsTextEncodings[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupExtendedHeaderRestrictionsTextFieldSize($index) {&nbsp;</div></li><li><div>        static $LookupExtendedHeaderRestrictionsTextFieldSize = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'No restrictions', &nbsp;</div></li><li><div>            0x01 =&gt; 'No string is longer than 1024 characters', &nbsp;</div></li><li><div>            0x02 =&gt; 'No string is longer than 128 characters', &nbsp;</div></li><li><div>            0x03 =&gt; 'No string is longer than 30 characters', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($LookupExtendedHeaderRestrictionsTextFieldSize[$index]) ? $LookupExtendedHeaderRestrictionsTextFieldSize[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupExtendedHeaderRestrictionsImageEncoding($index) {&nbsp;</div></li><li><div>        static $LookupExtendedHeaderRestrictionsImageEncoding = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'No restrictions', &nbsp;</div></li><li><div>            0x01 =&gt; 'Images are encoded only with PNG or JPEG', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($LookupExtendedHeaderRestrictionsImageEncoding[$index]) ? $LookupExtendedHeaderRestrictionsImageEncoding[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupExtendedHeaderRestrictionsImageSizeSize($index) {&nbsp;</div></li><li><div>        static $LookupExtendedHeaderRestrictionsImageSizeSize = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'No restrictions', &nbsp;</div></li><li><div>            0x01 =&gt; 'All images are 256x256 pixels or smaller', &nbsp;</div></li><li><div>            0x02 =&gt; 'All images are 64x64 pixels or smaller', &nbsp;</div></li><li><div>            0x03 =&gt; 'All images are exactly 64x64 pixels, unless required otherwise', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($LookupExtendedHeaderRestrictionsImageSizeSize[$index]) ? $LookupExtendedHeaderRestrictionsImageSizeSize[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupCurrencyUnits($currencyid) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $begin = __LINE__;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This is not a comment!&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            AED    Dirhams&nbsp;</div></li><li><div>            AFA    Afghanis&nbsp;</div></li><li><div>            ALL    Leke&nbsp;</div></li><li><div>            AMD    Drams&nbsp;</div></li><li><div>            ANG    Guilders&nbsp;</div></li><li><div>            AOA    Kwanza&nbsp;</div></li><li><div>            ARS    Pesos&nbsp;</div></li><li><div>            ATS    Schillings&nbsp;</div></li><li><div>            AUD    Dollars&nbsp;</div></li><li><div>            AWG    Guilders&nbsp;</div></li><li><div>            AZM    Manats&nbsp;</div></li><li><div>            BAM    Convertible Marka&nbsp;</div></li><li><div>            BBD    Dollars&nbsp;</div></li><li><div>            BDT    Taka&nbsp;</div></li><li><div>            BEF    Francs&nbsp;</div></li><li><div>            BGL    Leva&nbsp;</div></li><li><div>            BHD    Dinars&nbsp;</div></li><li><div>            BIF    Francs&nbsp;</div></li><li><div>            BMD    Dollars&nbsp;</div></li><li><div>            BND    Dollars&nbsp;</div></li><li><div>            BOB    Bolivianos&nbsp;</div></li><li><div>            BRL    Brazil Real&nbsp;</div></li><li><div>            BSD    Dollars&nbsp;</div></li><li><div>            BTN    Ngultrum&nbsp;</div></li><li><div>            BWP    Pulas&nbsp;</div></li><li><div>            BYR    Rubles&nbsp;</div></li><li><div>            BZD    Dollars&nbsp;</div></li><li><div>            CAD    Dollars&nbsp;</div></li><li><div>            CDF    Congolese Francs&nbsp;</div></li><li><div>            CHF    Francs&nbsp;</div></li><li><div>            CLP    Pesos&nbsp;</div></li><li><div>            CNY    Yuan Renminbi&nbsp;</div></li><li><div>            COP    Pesos&nbsp;</div></li><li><div>            CRC    Colones&nbsp;</div></li><li><div>            CUP    Pesos&nbsp;</div></li><li><div>            CVE    Escudos&nbsp;</div></li><li><div>            CYP    Pounds&nbsp;</div></li><li><div>            CZK    Koruny&nbsp;</div></li><li><div>            DEM    Deutsche Marks&nbsp;</div></li><li><div>            DJF    Francs&nbsp;</div></li><li><div>            DKK    Kroner&nbsp;</div></li><li><div>            DOP    Pesos&nbsp;</div></li><li><div>            DZD    Algeria Dinars&nbsp;</div></li><li><div>            EEK    Krooni&nbsp;</div></li><li><div>            EGP    Pounds&nbsp;</div></li><li><div>            ERN    Nakfa&nbsp;</div></li><li><div>            ESP    Pesetas&nbsp;</div></li><li><div>            ETB    Birr&nbsp;</div></li><li><div>            EUR    Euro&nbsp;</div></li><li><div>            FIM    Markkaa&nbsp;</div></li><li><div>            FJD    Dollars&nbsp;</div></li><li><div>            FKP    Pounds&nbsp;</div></li><li><div>            FRF    Francs&nbsp;</div></li><li><div>            GBP    Pounds&nbsp;</div></li><li><div>            GEL    Lari&nbsp;</div></li><li><div>            GGP    Pounds&nbsp;</div></li><li><div>            GHC    Cedis&nbsp;</div></li><li><div>            GIP    Pounds&nbsp;</div></li><li><div>            GMD    Dalasi&nbsp;</div></li><li><div>            GNF    Francs&nbsp;</div></li><li><div>            GRD    Drachmae&nbsp;</div></li><li><div>            GTQ    Quetzales&nbsp;</div></li><li><div>            GYD    Dollars&nbsp;</div></li><li><div>            HKD    Dollars&nbsp;</div></li><li><div>            HNL    Lempiras&nbsp;</div></li><li><div>            HRK    Kuna&nbsp;</div></li><li><div>            HTG    Gourdes&nbsp;</div></li><li><div>            HUF    Forints&nbsp;</div></li><li><div>            IDR    Rupiahs&nbsp;</div></li><li><div>            IEP    Pounds&nbsp;</div></li><li><div>            ILS    New Shekels&nbsp;</div></li><li><div>            IMP    Pounds&nbsp;</div></li><li><div>            INR    Rupees&nbsp;</div></li><li><div>            IQD    Dinars&nbsp;</div></li><li><div>            IRR    Rials&nbsp;</div></li><li><div>            ISK    Kronur&nbsp;</div></li><li><div>            ITL    Lire&nbsp;</div></li><li><div>            JEP    Pounds&nbsp;</div></li><li><div>            JMD    Dollars&nbsp;</div></li><li><div>            JOD    Dinars&nbsp;</div></li><li><div>            JPY    Yen&nbsp;</div></li><li><div>            KES    Shillings&nbsp;</div></li><li><div>            KGS    Soms&nbsp;</div></li><li><div>            KHR    Riels&nbsp;</div></li><li><div>            KMF    Francs&nbsp;</div></li><li><div>            KPW    Won&nbsp;</div></li><li><div>            KWD    Dinars&nbsp;</div></li><li><div>            KYD    Dollars&nbsp;</div></li><li><div>            KZT    Tenge&nbsp;</div></li><li><div>            LAK    Kips&nbsp;</div></li><li><div>            LBP    Pounds&nbsp;</div></li><li><div>            LKR    Rupees&nbsp;</div></li><li><div>            LRD    Dollars&nbsp;</div></li><li><div>            LSL    Maloti&nbsp;</div></li><li><div>            LTL    Litai&nbsp;</div></li><li><div>            LUF    Francs&nbsp;</div></li><li><div>            LVL    Lati&nbsp;</div></li><li><div>            LYD    Dinars&nbsp;</div></li><li><div>            MAD    Dirhams&nbsp;</div></li><li><div>            MDL    Lei&nbsp;</div></li><li><div>            MGF    Malagasy Francs&nbsp;</div></li><li><div>            MKD    Denars&nbsp;</div></li><li><div>            MMK    Kyats&nbsp;</div></li><li><div>            MNT    Tugriks&nbsp;</div></li><li><div>            MOP    Patacas&nbsp;</div></li><li><div>            MRO    Ouguiyas&nbsp;</div></li><li><div>            MTL    Liri&nbsp;</div></li><li><div>            MUR    Rupees&nbsp;</div></li><li><div>            MVR    Rufiyaa&nbsp;</div></li><li><div>            MWK    Kwachas&nbsp;</div></li><li><div>            MXN    Pesos&nbsp;</div></li><li><div>            MYR    Ringgits&nbsp;</div></li><li><div>            MZM    Meticais&nbsp;</div></li><li><div>            NAD    Dollars&nbsp;</div></li><li><div>            NGN    Nairas&nbsp;</div></li><li><div>            NIO    Gold Cordobas&nbsp;</div></li><li><div>            NLG    Guilders&nbsp;</div></li><li><div>            NOK    Krone&nbsp;</div></li><li><div>            NPR    Nepal Rupees&nbsp;</div></li><li><div>            NZD    Dollars&nbsp;</div></li><li><div>            OMR    Rials&nbsp;</div></li><li><div>            PAB    Balboa&nbsp;</div></li><li><div>            PEN    Nuevos Soles&nbsp;</div></li><li><div>            PGK    Kina&nbsp;</div></li><li><div>            PHP    Pesos&nbsp;</div></li><li><div>            PKR    Rupees&nbsp;</div></li><li><div>            PLN    Zlotych&nbsp;</div></li><li><div>            PTE    Escudos&nbsp;</div></li><li><div>            PYG    Guarani&nbsp;</div></li><li><div>            QAR    Rials&nbsp;</div></li><li><div>            ROL    Lei&nbsp;</div></li><li><div>            RUR    Rubles&nbsp;</div></li><li><div>            RWF    Rwanda Francs&nbsp;</div></li><li><div>            SAR    Riyals&nbsp;</div></li><li><div>            SBD    Dollars&nbsp;</div></li><li><div>            SCR    Rupees&nbsp;</div></li><li><div>            SDD    Dinars&nbsp;</div></li><li><div>            SEK    Kronor&nbsp;</div></li><li><div>            SGD    Dollars&nbsp;</div></li><li><div>            SHP    Pounds&nbsp;</div></li><li><div>            SIT    Tolars&nbsp;</div></li><li><div>            SKK    Koruny&nbsp;</div></li><li><div>            SLL    Leones&nbsp;</div></li><li><div>            SOS    Shillings&nbsp;</div></li><li><div>            SPL    Luigini&nbsp;</div></li><li><div>            SRG    Guilders&nbsp;</div></li><li><div>            STD    Dobras&nbsp;</div></li><li><div>            SVC    Colones&nbsp;</div></li><li><div>            SYP    Pounds&nbsp;</div></li><li><div>            SZL    Emalangeni&nbsp;</div></li><li><div>            THB    Baht&nbsp;</div></li><li><div>            TJR    Rubles&nbsp;</div></li><li><div>            TMM    Manats&nbsp;</div></li><li><div>            TND    Dinars&nbsp;</div></li><li><div>            TOP    Pa'anga&nbsp;</div></li><li><div>            TRL    Liras&nbsp;</div></li><li><div>            TTD    Dollars&nbsp;</div></li><li><div>            TVD    Tuvalu Dollars&nbsp;</div></li><li><div>            TWD    New Dollars&nbsp;</div></li><li><div>            TZS    Shillings&nbsp;</div></li><li><div>            UAH    Hryvnia&nbsp;</div></li><li><div>            UGX    Shillings&nbsp;</div></li><li><div>            USD    Dollars&nbsp;</div></li><li><div>            UYU    Pesos&nbsp;</div></li><li><div>            UZS    Sums&nbsp;</div></li><li><div>            VAL    Lire&nbsp;</div></li><li><div>            VEB    Bolivares&nbsp;</div></li><li><div>            VND    Dong&nbsp;</div></li><li><div>            VUV    Vatu&nbsp;</div></li><li><div>            WST    Tala&nbsp;</div></li><li><div>            XAF    Francs&nbsp;</div></li><li><div>            XAG    Ounces&nbsp;</div></li><li><div>            XAU    Ounces&nbsp;</div></li><li><div>            XCD    Dollars&nbsp;</div></li><li><div>            XDR    Special Drawing Rights&nbsp;</div></li><li><div>            XPD    Ounces&nbsp;</div></li><li><div>            XPF    Francs&nbsp;</div></li><li><div>            XPT    Ounces&nbsp;</div></li><li><div>            YER    Rials&nbsp;</div></li><li><div>            YUM    New Dinars&nbsp;</div></li><li><div>            ZAR    Rand&nbsp;</div></li><li><div>            ZMK    Kwacha&nbsp;</div></li><li><div>            ZWD    Zimbabwe Dollars&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return getid3_lib::EmbeddedLookup($currencyid, $begin, __LINE__, __FILE__, 'id3v2-currency-units');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function LookupCurrencyCountry($currencyid) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $begin = __LINE__;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This is not a comment!&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            AED    United Arab Emirates&nbsp;</div></li><li><div>            AFA    Afghanistan&nbsp;</div></li><li><div>            ALL    Albania&nbsp;</div></li><li><div>            AMD    Armenia&nbsp;</div></li><li><div>            ANG    Netherlands Antilles&nbsp;</div></li><li><div>            AOA    Angola&nbsp;</div></li><li><div>            ARS    Argentina&nbsp;</div></li><li><div>            ATS    Austria&nbsp;</div></li><li><div>            AUD    Australia&nbsp;</div></li><li><div>            AWG    Aruba&nbsp;</div></li><li><div>            AZM    Azerbaijan&nbsp;</div></li><li><div>            BAM    Bosnia and Herzegovina&nbsp;</div></li><li><div>            BBD    Barbados&nbsp;</div></li><li><div>            BDT    Bangladesh&nbsp;</div></li><li><div>            BEF    Belgium&nbsp;</div></li><li><div>            BGL    Bulgaria&nbsp;</div></li><li><div>            BHD    Bahrain&nbsp;</div></li><li><div>            BIF    Burundi&nbsp;</div></li><li><div>            BMD    Bermuda&nbsp;</div></li><li><div>            BND    Brunei Darussalam&nbsp;</div></li><li><div>            BOB    Bolivia&nbsp;</div></li><li><div>            BRL    Brazil&nbsp;</div></li><li><div>            BSD    Bahamas&nbsp;</div></li><li><div>            BTN    Bhutan&nbsp;</div></li><li><div>            BWP    Botswana&nbsp;</div></li><li><div>            BYR    Belarus&nbsp;</div></li><li><div>            BZD    Belize&nbsp;</div></li><li><div>            CAD    Canada&nbsp;</div></li><li><div>            CDF    Congo/Kinshasa&nbsp;</div></li><li><div>            CHF    Switzerland&nbsp;</div></li><li><div>            CLP    Chile&nbsp;</div></li><li><div>            CNY    China&nbsp;</div></li><li><div>            COP    Colombia&nbsp;</div></li><li><div>            CRC    Costa Rica&nbsp;</div></li><li><div>            CUP    Cuba&nbsp;</div></li><li><div>            CVE    Cape Verde&nbsp;</div></li><li><div>            CYP    Cyprus&nbsp;</div></li><li><div>            CZK    Czech Republic&nbsp;</div></li><li><div>            DEM    Germany&nbsp;</div></li><li><div>            DJF    Djibouti&nbsp;</div></li><li><div>            DKK    Denmark&nbsp;</div></li><li><div>            DOP    Dominican Republic&nbsp;</div></li><li><div>            DZD    Algeria&nbsp;</div></li><li><div>            EEK    Estonia&nbsp;</div></li><li><div>            EGP    Egypt&nbsp;</div></li><li><div>            ERN    Eritrea&nbsp;</div></li><li><div>            ESP    Spain&nbsp;</div></li><li><div>            ETB    Ethiopia&nbsp;</div></li><li><div>            EUR    Euro Member Countries&nbsp;</div></li><li><div>            FIM    Finland&nbsp;</div></li><li><div>            FJD    Fiji&nbsp;</div></li><li><div>            FKP    Falkland Islands (Malvinas)&nbsp;</div></li><li><div>            FRF    France&nbsp;</div></li><li><div>            GBP    United Kingdom&nbsp;</div></li><li><div>            GEL    Georgia&nbsp;</div></li><li><div>            GGP    Guernsey&nbsp;</div></li><li><div>            GHC    Ghana&nbsp;</div></li><li><div>            GIP    Gibraltar&nbsp;</div></li><li><div>            GMD    Gambia&nbsp;</div></li><li><div>            GNF    Guinea&nbsp;</div></li><li><div>            GRD    Greece&nbsp;</div></li><li><div>            GTQ    Guatemala&nbsp;</div></li><li><div>            GYD    Guyana&nbsp;</div></li><li><div>            HKD    Hong Kong&nbsp;</div></li><li><div>            HNL    Honduras&nbsp;</div></li><li><div>            HRK    Croatia&nbsp;</div></li><li><div>            HTG    Haiti&nbsp;</div></li><li><div>            HUF    Hungary&nbsp;</div></li><li><div>            IDR    Indonesia&nbsp;</div></li><li><div>            IEP    Ireland (Eire)&nbsp;</div></li><li><div>            ILS    Israel&nbsp;</div></li><li><div>            IMP    Isle of Man&nbsp;</div></li><li><div>            INR    India&nbsp;</div></li><li><div>            IQD    Iraq&nbsp;</div></li><li><div>            IRR    Iran&nbsp;</div></li><li><div>            ISK    Iceland&nbsp;</div></li><li><div>            ITL    Italy&nbsp;</div></li><li><div>            JEP    Jersey&nbsp;</div></li><li><div>            JMD    Jamaica&nbsp;</div></li><li><div>            JOD    Jordan&nbsp;</div></li><li><div>            JPY    Japan&nbsp;</div></li><li><div>            KES    Kenya&nbsp;</div></li><li><div>            KGS    Kyrgyzstan&nbsp;</div></li><li><div>            KHR    Cambodia&nbsp;</div></li><li><div>            KMF    Comoros&nbsp;</div></li><li><div>            KPW    Korea&nbsp;</div></li><li><div>            KWD    Kuwait&nbsp;</div></li><li><div>            KYD    Cayman Islands&nbsp;</div></li><li><div>            KZT    Kazakstan&nbsp;</div></li><li><div>            LAK    Laos&nbsp;</div></li><li><div>            LBP    Lebanon&nbsp;</div></li><li><div>            LKR    Sri Lanka&nbsp;</div></li><li><div>            LRD    Liberia&nbsp;</div></li><li><div>            LSL    Lesotho&nbsp;</div></li><li><div>            LTL    Lithuania&nbsp;</div></li><li><div>            LUF    Luxembourg&nbsp;</div></li><li><div>            LVL    Latvia&nbsp;</div></li><li><div>            LYD    Libya&nbsp;</div></li><li><div>            MAD    Morocco&nbsp;</div></li><li><div>            MDL    Moldova&nbsp;</div></li><li><div>            MGF    Madagascar&nbsp;</div></li><li><div>            MKD    Macedonia&nbsp;</div></li><li><div>            MMK    Myanmar (Burma)&nbsp;</div></li><li><div>            MNT    Mongolia&nbsp;</div></li><li><div>            MOP    Macau&nbsp;</div></li><li><div>            MRO    Mauritania&nbsp;</div></li><li><div>            MTL    Malta&nbsp;</div></li><li><div>            MUR    Mauritius&nbsp;</div></li><li><div>            MVR    Maldives (Maldive Islands)&nbsp;</div></li><li><div>            MWK    Malawi&nbsp;</div></li><li><div>            MXN    Mexico&nbsp;</div></li><li><div>            MYR    Malaysia&nbsp;</div></li><li><div>            MZM    Mozambique&nbsp;</div></li><li><div>            NAD    Namibia&nbsp;</div></li><li><div>            NGN    Nigeria&nbsp;</div></li><li><div>            NIO    Nicaragua&nbsp;</div></li><li><div>            NLG    Netherlands (Holland)&nbsp;</div></li><li><div>            NOK    Norway&nbsp;</div></li><li><div>            NPR    Nepal&nbsp;</div></li><li><div>            NZD    New Zealand&nbsp;</div></li><li><div>            OMR    Oman&nbsp;</div></li><li><div>            PAB    Panama&nbsp;</div></li><li><div>            PEN    Peru&nbsp;</div></li><li><div>            PGK    Papua New Guinea&nbsp;</div></li><li><div>            PHP    Philippines&nbsp;</div></li><li><div>            PKR    Pakistan&nbsp;</div></li><li><div>            PLN    Poland&nbsp;</div></li><li><div>            PTE    Portugal&nbsp;</div></li><li><div>            PYG    Paraguay&nbsp;</div></li><li><div>            QAR    Qatar&nbsp;</div></li><li><div>            ROL    Romania&nbsp;</div></li><li><div>            RUR    Russia&nbsp;</div></li><li><div>            RWF    Rwanda&nbsp;</div></li><li><div>            SAR    Saudi Arabia&nbsp;</div></li><li><div>            SBD    Solomon Islands&nbsp;</div></li><li><div>            SCR    Seychelles&nbsp;</div></li><li><div>            SDD    Sudan&nbsp;</div></li><li><div>            SEK    Sweden&nbsp;</div></li><li><div>            SGD    Singapore&nbsp;</div></li><li><div>            SHP    Saint Helena&nbsp;</div></li><li><div>            SIT    Slovenia&nbsp;</div></li><li><div>            SKK    Slovakia&nbsp;</div></li><li><div>            SLL    Sierra Leone&nbsp;</div></li><li><div>            SOS    Somalia&nbsp;</div></li><li><div>            SPL    Seborga&nbsp;</div></li><li><div>            SRG    Suriname&nbsp;</div></li><li><div>            STD    So Tome and Principe&nbsp;</div></li><li><div>            SVC    El Salvador&nbsp;</div></li><li><div>            SYP    Syria&nbsp;</div></li><li><div>            SZL    Swaziland&nbsp;</div></li><li><div>            THB    Thailand&nbsp;</div></li><li><div>            TJR    Tajikistan&nbsp;</div></li><li><div>            TMM    Turkmenistan&nbsp;</div></li><li><div>            TND    Tunisia&nbsp;</div></li><li><div>            TOP    Tonga&nbsp;</div></li><li><div>            TRL    Turkey&nbsp;</div></li><li><div>            TTD    Trinidad and Tobago&nbsp;</div></li><li><div>            TVD    Tuvalu&nbsp;</div></li><li><div>            TWD    Taiwan&nbsp;</div></li><li><div>            TZS    Tanzania&nbsp;</div></li><li><div>            UAH    Ukraine&nbsp;</div></li><li><div>            UGX    Uganda&nbsp;</div></li><li><div>            USD    United States of America&nbsp;</div></li><li><div>            UYU    Uruguay&nbsp;</div></li><li><div>            UZS    Uzbekistan&nbsp;</div></li><li><div>            VAL    Vatican City&nbsp;</div></li><li><div>            VEB    Venezuela&nbsp;</div></li><li><div>            VND    Viet Nam&nbsp;</div></li><li><div>            VUV    Vanuatu&nbsp;</div></li><li><div>            WST    Samoa&nbsp;</div></li><li><div>            XAF    Communaut Financire Africaine&nbsp;</div></li><li><div>            XAG    Silver&nbsp;</div></li><li><div>            XAU    Gold&nbsp;</div></li><li><div>            XCD    East Caribbean&nbsp;</div></li><li><div>            XDR    International Monetary Fund&nbsp;</div></li><li><div>            XPD    Palladium&nbsp;</div></li><li><div>            XPF    Comptoirs Franais du Pacifique&nbsp;</div></li><li><div>            XPT    Platinum&nbsp;</div></li><li><div>            YER    Yemen&nbsp;</div></li><li><div>            YUM    Yugoslavia&nbsp;</div></li><li><div>            ZAR    South Africa&nbsp;</div></li><li><div>            ZMK    Zambia&nbsp;</div></li><li><div>            ZWD    Zimbabwe&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return getid3_lib::EmbeddedLookup($currencyid, $begin, __LINE__, __FILE__, 'id3v2-currency-country');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function LanguageLookup($languagecode, $casesensitive=false) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!$casesensitive) {&nbsp;</div></li><li><div>            $languagecode = strtolower($languagecode);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // http://www.id3.org/id3v2.4.0-structure.txt&nbsp;</div></li><li><div>        // [4.   ID3v2 frame overview]&nbsp;</div></li><li><div>        // The three byte language field, present in several frames, is used to&nbsp;</div></li><li><div>        // describe the language of the frame's content, according to ISO-639-2&nbsp;</div></li><li><div>        // [ISO-639-2]. The language should be represented in lower case. If the&nbsp;</div></li><li><div>        // language is not known the string &quot;XXX&quot; should be used.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // ISO 639-2 - http://www.id3.org/iso639-2.html&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $begin = __LINE__;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This is not a comment!&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            XXX    unknown&nbsp;</div></li><li><div>            xxx    unknown&nbsp;</div></li><li><div>            aar    Afar&nbsp;</div></li><li><div>            abk    Abkhazian&nbsp;</div></li><li><div>            ace    Achinese&nbsp;</div></li><li><div>            ach    Acoli&nbsp;</div></li><li><div>            ada    Adangme&nbsp;</div></li><li><div>            afa    Afro-Asiatic (Other)&nbsp;</div></li><li><div>            afh    Afrihili&nbsp;</div></li><li><div>            afr    Afrikaans&nbsp;</div></li><li><div>            aka    Akan&nbsp;</div></li><li><div>            akk    Akkadian&nbsp;</div></li><li><div>            alb    Albanian&nbsp;</div></li><li><div>            ale    Aleut&nbsp;</div></li><li><div>            alg    Algonquian Languages&nbsp;</div></li><li><div>            amh    Amharic&nbsp;</div></li><li><div>            ang    English, Old (ca. 450-1100)&nbsp;</div></li><li><div>            apa    Apache Languages&nbsp;</div></li><li><div>            ara    Arabic&nbsp;</div></li><li><div>            arc    Aramaic&nbsp;</div></li><li><div>            arm    Armenian&nbsp;</div></li><li><div>            arn    Araucanian&nbsp;</div></li><li><div>            arp    Arapaho&nbsp;</div></li><li><div>            art    Artificial (Other)&nbsp;</div></li><li><div>            arw    Arawak&nbsp;</div></li><li><div>            asm    Assamese&nbsp;</div></li><li><div>            ath    Athapascan Languages&nbsp;</div></li><li><div>            ava    Avaric&nbsp;</div></li><li><div>            ave    Avestan&nbsp;</div></li><li><div>            awa    Awadhi&nbsp;</div></li><li><div>            aym    Aymara&nbsp;</div></li><li><div>            aze    Azerbaijani&nbsp;</div></li><li><div>            bad    Banda&nbsp;</div></li><li><div>            bai    Bamileke Languages&nbsp;</div></li><li><div>            bak    Bashkir&nbsp;</div></li><li><div>            bal    Baluchi&nbsp;</div></li><li><div>            bam    Bambara&nbsp;</div></li><li><div>            ban    Balinese&nbsp;</div></li><li><div>            baq    Basque&nbsp;</div></li><li><div>            bas    Basa&nbsp;</div></li><li><div>            bat    Baltic (Other)&nbsp;</div></li><li><div>            bej    Beja&nbsp;</div></li><li><div>            bel    Byelorussian&nbsp;</div></li><li><div>            bem    Bemba&nbsp;</div></li><li><div>            ben    Bengali&nbsp;</div></li><li><div>            ber    Berber (Other)&nbsp;</div></li><li><div>            bho    Bhojpuri&nbsp;</div></li><li><div>            bih    Bihari&nbsp;</div></li><li><div>            bik    Bikol&nbsp;</div></li><li><div>            bin    Bini&nbsp;</div></li><li><div>            bis    Bislama&nbsp;</div></li><li><div>            bla    Siksika&nbsp;</div></li><li><div>            bnt    Bantu (Other)&nbsp;</div></li><li><div>            bod    Tibetan&nbsp;</div></li><li><div>            bra    Braj&nbsp;</div></li><li><div>            bre    Breton&nbsp;</div></li><li><div>            bua    Buriat&nbsp;</div></li><li><div>            bug    Buginese&nbsp;</div></li><li><div>            bul    Bulgarian&nbsp;</div></li><li><div>            bur    Burmese&nbsp;</div></li><li><div>            cad    Caddo&nbsp;</div></li><li><div>            cai    Central American Indian (Other)&nbsp;</div></li><li><div>            car    Carib&nbsp;</div></li><li><div>            cat    Catalan&nbsp;</div></li><li><div>            cau    Caucasian (Other)&nbsp;</div></li><li><div>            ceb    Cebuano&nbsp;</div></li><li><div>            cel    Celtic (Other)&nbsp;</div></li><li><div>            ces    Czech&nbsp;</div></li><li><div>            cha    Chamorro&nbsp;</div></li><li><div>            chb    Chibcha&nbsp;</div></li><li><div>            che    Chechen&nbsp;</div></li><li><div>            chg    Chagatai&nbsp;</div></li><li><div>            chi    Chinese&nbsp;</div></li><li><div>            chm    Mari&nbsp;</div></li><li><div>            chn    Chinook jargon&nbsp;</div></li><li><div>            cho    Choctaw&nbsp;</div></li><li><div>            chr    Cherokee&nbsp;</div></li><li><div>            chu    Church Slavic&nbsp;</div></li><li><div>            chv    Chuvash&nbsp;</div></li><li><div>            chy    Cheyenne&nbsp;</div></li><li><div>            cop    Coptic&nbsp;</div></li><li><div>            cor    Cornish&nbsp;</div></li><li><div>            cos    Corsican&nbsp;</div></li><li><div>            cpe    Creoles and Pidgins, English-based (Other)&nbsp;</div></li><li><div>            cpf    Creoles and Pidgins, French-based (Other)&nbsp;</div></li><li><div>            cpp    Creoles and Pidgins, Portuguese-based (Other)&nbsp;</div></li><li><div>            cre    Cree&nbsp;</div></li><li><div>            crp    Creoles and Pidgins (Other)&nbsp;</div></li><li><div>            cus    Cushitic (Other)&nbsp;</div></li><li><div>            cym    Welsh&nbsp;</div></li><li><div>            cze    Czech&nbsp;</div></li><li><div>            dak    Dakota&nbsp;</div></li><li><div>            dan    Danish&nbsp;</div></li><li><div>            del    Delaware&nbsp;</div></li><li><div>            deu    German&nbsp;</div></li><li><div>            din    Dinka&nbsp;</div></li><li><div>            div    Divehi&nbsp;</div></li><li><div>            doi    Dogri&nbsp;</div></li><li><div>            dra    Dravidian (Other)&nbsp;</div></li><li><div>            dua    Duala&nbsp;</div></li><li><div>            dum    Dutch, Middle (ca. 1050-1350)&nbsp;</div></li><li><div>            dut    Dutch&nbsp;</div></li><li><div>            dyu    Dyula&nbsp;</div></li><li><div>            dzo    Dzongkha&nbsp;</div></li><li><div>            efi    Efik&nbsp;</div></li><li><div>            egy    Egyptian (Ancient)&nbsp;</div></li><li><div>            eka    Ekajuk&nbsp;</div></li><li><div>            ell    Greek, Modern (1453-)&nbsp;</div></li><li><div>            elx    Elamite&nbsp;</div></li><li><div>            eng    English&nbsp;</div></li><li><div>            enm    English, Middle (ca. 1100-1500)&nbsp;</div></li><li><div>            epo    Esperanto&nbsp;</div></li><li><div>            esk    Eskimo (Other)&nbsp;</div></li><li><div>            esl    Spanish&nbsp;</div></li><li><div>            est    Estonian&nbsp;</div></li><li><div>            eus    Basque&nbsp;</div></li><li><div>            ewe    Ewe&nbsp;</div></li><li><div>            ewo    Ewondo&nbsp;</div></li><li><div>            fan    Fang&nbsp;</div></li><li><div>            fao    Faroese&nbsp;</div></li><li><div>            fas    Persian&nbsp;</div></li><li><div>            fat    Fanti&nbsp;</div></li><li><div>            fij    Fijian&nbsp;</div></li><li><div>            fin    Finnish&nbsp;</div></li><li><div>            fiu    Finno-Ugrian (Other)&nbsp;</div></li><li><div>            fon    Fon&nbsp;</div></li><li><div>            fra    French&nbsp;</div></li><li><div>            fre    French&nbsp;</div></li><li><div>            frm    French, Middle (ca. 1400-1600)&nbsp;</div></li><li><div>            fro    French, Old (842- ca. 1400)&nbsp;</div></li><li><div>            fry    Frisian&nbsp;</div></li><li><div>            ful    Fulah&nbsp;</div></li><li><div>            gaa    Ga&nbsp;</div></li><li><div>            gae    Gaelic (Scots)&nbsp;</div></li><li><div>            gai    Irish&nbsp;</div></li><li><div>            gay    Gayo&nbsp;</div></li><li><div>            gdh    Gaelic (Scots)&nbsp;</div></li><li><div>            gem    Germanic (Other)&nbsp;</div></li><li><div>            geo    Georgian&nbsp;</div></li><li><div>            ger    German&nbsp;</div></li><li><div>            gez    Geez&nbsp;</div></li><li><div>            gil    Gilbertese&nbsp;</div></li><li><div>            glg    Gallegan&nbsp;</div></li><li><div>            gmh    German, Middle High (ca. 1050-1500)&nbsp;</div></li><li><div>            goh    German, Old High (ca. 750-1050)&nbsp;</div></li><li><div>            gon    Gondi&nbsp;</div></li><li><div>            got    Gothic&nbsp;</div></li><li><div>            grb    Grebo&nbsp;</div></li><li><div>            grc    Greek, Ancient (to 1453)&nbsp;</div></li><li><div>            gre    Greek, Modern (1453-)&nbsp;</div></li><li><div>            grn    Guarani&nbsp;</div></li><li><div>            guj    Gujarati&nbsp;</div></li><li><div>            hai    Haida&nbsp;</div></li><li><div>            hau    Hausa&nbsp;</div></li><li><div>            haw    Hawaiian&nbsp;</div></li><li><div>            heb    Hebrew&nbsp;</div></li><li><div>            her    Herero&nbsp;</div></li><li><div>            hil    Hiligaynon&nbsp;</div></li><li><div>            him    Himachali&nbsp;</div></li><li><div>            hin    Hindi&nbsp;</div></li><li><div>            hmo    Hiri Motu&nbsp;</div></li><li><div>            hun    Hungarian&nbsp;</div></li><li><div>            hup    Hupa&nbsp;</div></li><li><div>            hye    Armenian&nbsp;</div></li><li><div>            iba    Iban&nbsp;</div></li><li><div>            ibo    Igbo&nbsp;</div></li><li><div>            ice    Icelandic&nbsp;</div></li><li><div>            ijo    Ijo&nbsp;</div></li><li><div>            iku    Inuktitut&nbsp;</div></li><li><div>            ilo    Iloko&nbsp;</div></li><li><div>            ina    Interlingua (International Auxiliary language Association)&nbsp;</div></li><li><div>            inc    Indic (Other)&nbsp;</div></li><li><div>            ind    Indonesian&nbsp;</div></li><li><div>            ine    Indo-European (Other)&nbsp;</div></li><li><div>            ine    Interlingue&nbsp;</div></li><li><div>            ipk    Inupiak&nbsp;</div></li><li><div>            ira    Iranian (Other)&nbsp;</div></li><li><div>            iri    Irish&nbsp;</div></li><li><div>            iro    Iroquoian uages&nbsp;</div></li><li><div>            isl    Icelandic&nbsp;</div></li><li><div>            ita    Italian&nbsp;</div></li><li><div>            jav    Javanese&nbsp;</div></li><li><div>            jaw    Javanese&nbsp;</div></li><li><div>            jpn    Japanese&nbsp;</div></li><li><div>            jpr    Judeo-Persian&nbsp;</div></li><li><div>            jrb    Judeo-Arabic&nbsp;</div></li><li><div>            kaa    Kara-Kalpak&nbsp;</div></li><li><div>            kab    Kabyle&nbsp;</div></li><li><div>            kac    Kachin&nbsp;</div></li><li><div>            kal    Greenlandic&nbsp;</div></li><li><div>            kam    Kamba&nbsp;</div></li><li><div>            kan    Kannada&nbsp;</div></li><li><div>            kar    Karen&nbsp;</div></li><li><div>            kas    Kashmiri&nbsp;</div></li><li><div>            kat    Georgian&nbsp;</div></li><li><div>            kau    Kanuri&nbsp;</div></li><li><div>            kaw    Kawi&nbsp;</div></li><li><div>            kaz    Kazakh&nbsp;</div></li><li><div>            kha    Khasi&nbsp;</div></li><li><div>            khi    Khoisan (Other)&nbsp;</div></li><li><div>            khm    Khmer&nbsp;</div></li><li><div>            kho    Khotanese&nbsp;</div></li><li><div>            kik    Kikuyu&nbsp;</div></li><li><div>            kin    Kinyarwanda&nbsp;</div></li><li><div>            kir    Kirghiz&nbsp;</div></li><li><div>            kok    Konkani&nbsp;</div></li><li><div>            kom    Komi&nbsp;</div></li><li><div>            kon    Kongo&nbsp;</div></li><li><div>            kor    Korean&nbsp;</div></li><li><div>            kpe    Kpelle&nbsp;</div></li><li><div>            kro    Kru&nbsp;</div></li><li><div>            kru    Kurukh&nbsp;</div></li><li><div>            kua    Kuanyama&nbsp;</div></li><li><div>            kum    Kumyk&nbsp;</div></li><li><div>            kur    Kurdish&nbsp;</div></li><li><div>            kus    Kusaie&nbsp;</div></li><li><div>            kut    Kutenai&nbsp;</div></li><li><div>            lad    Ladino&nbsp;</div></li><li><div>            lah    Lahnda&nbsp;</div></li><li><div>            lam    Lamba&nbsp;</div></li><li><div>            lao    Lao&nbsp;</div></li><li><div>            lat    Latin&nbsp;</div></li><li><div>            lav    Latvian&nbsp;</div></li><li><div>            lez    Lezghian&nbsp;</div></li><li><div>            lin    Lingala&nbsp;</div></li><li><div>            lit    Lithuanian&nbsp;</div></li><li><div>            lol    Mongo&nbsp;</div></li><li><div>            loz    Lozi&nbsp;</div></li><li><div>            ltz    Letzeburgesch&nbsp;</div></li><li><div>            lub    Luba-Katanga&nbsp;</div></li><li><div>            lug    Ganda&nbsp;</div></li><li><div>            lui    Luiseno&nbsp;</div></li><li><div>            lun    Lunda&nbsp;</div></li><li><div>            luo    Luo (Kenya and Tanzania)&nbsp;</div></li><li><div>            mac    Macedonian&nbsp;</div></li><li><div>            mad    Madurese&nbsp;</div></li><li><div>            mag    Magahi&nbsp;</div></li><li><div>            mah    Marshall&nbsp;</div></li><li><div>            mai    Maithili&nbsp;</div></li><li><div>            mak    Macedonian&nbsp;</div></li><li><div>            mak    Makasar&nbsp;</div></li><li><div>            mal    Malayalam&nbsp;</div></li><li><div>            man    Mandingo&nbsp;</div></li><li><div>            mao    Maori&nbsp;</div></li><li><div>            map    Austronesian (Other)&nbsp;</div></li><li><div>            mar    Marathi&nbsp;</div></li><li><div>            mas    Masai&nbsp;</div></li><li><div>            max    Manx&nbsp;</div></li><li><div>            may    Malay&nbsp;</div></li><li><div>            men    Mende&nbsp;</div></li><li><div>            mga    Irish, Middle (900 - 1200)&nbsp;</div></li><li><div>            mic    Micmac&nbsp;</div></li><li><div>            min    Minangkabau&nbsp;</div></li><li><div>            mis    Miscellaneous (Other)&nbsp;</div></li><li><div>            mkh    Mon-Kmer (Other)&nbsp;</div></li><li><div>            mlg    Malagasy&nbsp;</div></li><li><div>            mlt    Maltese&nbsp;</div></li><li><div>            mni    Manipuri&nbsp;</div></li><li><div>            mno    Manobo Languages&nbsp;</div></li><li><div>            moh    Mohawk&nbsp;</div></li><li><div>            mol    Moldavian&nbsp;</div></li><li><div>            mon    Mongolian&nbsp;</div></li><li><div>            mos    Mossi&nbsp;</div></li><li><div>            mri    Maori&nbsp;</div></li><li><div>            msa    Malay&nbsp;</div></li><li><div>            mul    Multiple Languages&nbsp;</div></li><li><div>            mun    Munda Languages&nbsp;</div></li><li><div>            mus    Creek&nbsp;</div></li><li><div>            mwr    Marwari&nbsp;</div></li><li><div>            mya    Burmese&nbsp;</div></li><li><div>            myn    Mayan Languages&nbsp;</div></li><li><div>            nah    Aztec&nbsp;</div></li><li><div>            nai    North American Indian (Other)&nbsp;</div></li><li><div>            nau    Nauru&nbsp;</div></li><li><div>            nav    Navajo&nbsp;</div></li><li><div>            nbl    Ndebele, South&nbsp;</div></li><li><div>            nde    Ndebele, North&nbsp;</div></li><li><div>            ndo    Ndongo&nbsp;</div></li><li><div>            nep    Nepali&nbsp;</div></li><li><div>            new    Newari&nbsp;</div></li><li><div>            nic    Niger-Kordofanian (Other)&nbsp;</div></li><li><div>            niu    Niuean&nbsp;</div></li><li><div>            nla    Dutch&nbsp;</div></li><li><div>            nno    Norwegian (Nynorsk)&nbsp;</div></li><li><div>            non    Norse, Old&nbsp;</div></li><li><div>            nor    Norwegian&nbsp;</div></li><li><div>            nso    Sotho, Northern&nbsp;</div></li><li><div>            nub    Nubian Languages&nbsp;</div></li><li><div>            nya    Nyanja&nbsp;</div></li><li><div>            nym    Nyamwezi&nbsp;</div></li><li><div>            nyn    Nyankole&nbsp;</div></li><li><div>            nyo    Nyoro&nbsp;</div></li><li><div>            nzi    Nzima&nbsp;</div></li><li><div>            oci    Langue d'Oc (post 1500)&nbsp;</div></li><li><div>            oji    Ojibwa&nbsp;</div></li><li><div>            ori    Oriya&nbsp;</div></li><li><div>            orm    Oromo&nbsp;</div></li><li><div>            osa    Osage&nbsp;</div></li><li><div>            oss    Ossetic&nbsp;</div></li><li><div>            ota    Turkish, Ottoman (1500 - 1928)&nbsp;</div></li><li><div>            oto    Otomian Languages&nbsp;</div></li><li><div>            paa    Papuan-Australian (Other)&nbsp;</div></li><li><div>            pag    Pangasinan&nbsp;</div></li><li><div>            pal    Pahlavi&nbsp;</div></li><li><div>            pam    Pampanga&nbsp;</div></li><li><div>            pan    Panjabi&nbsp;</div></li><li><div>            pap    Papiamento&nbsp;</div></li><li><div>            pau    Palauan&nbsp;</div></li><li><div>            peo    Persian, Old (ca 600 - 400 B.C.)&nbsp;</div></li><li><div>            per    Persian&nbsp;</div></li><li><div>            phn    Phoenician&nbsp;</div></li><li><div>            pli    Pali&nbsp;</div></li><li><div>            pol    Polish&nbsp;</div></li><li><div>            pon    Ponape&nbsp;</div></li><li><div>            por    Portuguese&nbsp;</div></li><li><div>            pra    Prakrit uages&nbsp;</div></li><li><div>            pro    Provencal, Old (to 1500)&nbsp;</div></li><li><div>            pus    Pushto&nbsp;</div></li><li><div>            que    Quechua&nbsp;</div></li><li><div>            raj    Rajasthani&nbsp;</div></li><li><div>            rar    Rarotongan&nbsp;</div></li><li><div>            roa    Romance (Other)&nbsp;</div></li><li><div>            roh    Rhaeto-Romance&nbsp;</div></li><li><div>            rom    Romany&nbsp;</div></li><li><div>            ron    Romanian&nbsp;</div></li><li><div>            rum    Romanian&nbsp;</div></li><li><div>            run    Rundi&nbsp;</div></li><li><div>            rus    Russian&nbsp;</div></li><li><div>            sad    Sandawe&nbsp;</div></li><li><div>            sag    Sango&nbsp;</div></li><li><div>            sah    Yakut&nbsp;</div></li><li><div>            sai    South American Indian (Other)&nbsp;</div></li><li><div>            sal    Salishan Languages&nbsp;</div></li><li><div>            sam    Samaritan Aramaic&nbsp;</div></li><li><div>            san    Sanskrit&nbsp;</div></li><li><div>            sco    Scots&nbsp;</div></li><li><div>            scr    Serbo-Croatian&nbsp;</div></li><li><div>            sel    Selkup&nbsp;</div></li><li><div>            sem    Semitic (Other)&nbsp;</div></li><li><div>            sga    Irish, Old (to 900)&nbsp;</div></li><li><div>            shn    Shan&nbsp;</div></li><li><div>            sid    Sidamo&nbsp;</div></li><li><div>            sin    Singhalese&nbsp;</div></li><li><div>            sio    Siouan Languages&nbsp;</div></li><li><div>            sit    Sino-Tibetan (Other)&nbsp;</div></li><li><div>            sla    Slavic (Other)&nbsp;</div></li><li><div>            slk    Slovak&nbsp;</div></li><li><div>            slo    Slovak&nbsp;</div></li><li><div>            slv    Slovenian&nbsp;</div></li><li><div>            smi    Sami Languages&nbsp;</div></li><li><div>            smo    Samoan&nbsp;</div></li><li><div>            sna    Shona&nbsp;</div></li><li><div>            snd    Sindhi&nbsp;</div></li><li><div>            sog    Sogdian&nbsp;</div></li><li><div>            som    Somali&nbsp;</div></li><li><div>            son    Songhai&nbsp;</div></li><li><div>            sot    Sotho, Southern&nbsp;</div></li><li><div>            spa    Spanish&nbsp;</div></li><li><div>            sqi    Albanian&nbsp;</div></li><li><div>            srd    Sardinian&nbsp;</div></li><li><div>            srr    Serer&nbsp;</div></li><li><div>            ssa    Nilo-Saharan (Other)&nbsp;</div></li><li><div>            ssw    Siswant&nbsp;</div></li><li><div>            ssw    Swazi&nbsp;</div></li><li><div>            suk    Sukuma&nbsp;</div></li><li><div>            sun    Sudanese&nbsp;</div></li><li><div>            sus    Susu&nbsp;</div></li><li><div>            sux    Sumerian&nbsp;</div></li><li><div>            sve    Swedish&nbsp;</div></li><li><div>            swa    Swahili&nbsp;</div></li><li><div>            swe    Swedish&nbsp;</div></li><li><div>            syr    Syriac&nbsp;</div></li><li><div>            tah    Tahitian&nbsp;</div></li><li><div>            tam    Tamil&nbsp;</div></li><li><div>            tat    Tatar&nbsp;</div></li><li><div>            tel    Telugu&nbsp;</div></li><li><div>            tem    Timne&nbsp;</div></li><li><div>            ter    Tereno&nbsp;</div></li><li><div>            tgk    Tajik&nbsp;</div></li><li><div>            tgl    Tagalog&nbsp;</div></li><li><div>            tha    Thai&nbsp;</div></li><li><div>            tib    Tibetan&nbsp;</div></li><li><div>            tig    Tigre&nbsp;</div></li><li><div>            tir    Tigrinya&nbsp;</div></li><li><div>            tiv    Tivi&nbsp;</div></li><li><div>            tli    Tlingit&nbsp;</div></li><li><div>            tmh    Tamashek&nbsp;</div></li><li><div>            tog    Tonga (Nyasa)&nbsp;</div></li><li><div>            ton    Tonga (Tonga Islands)&nbsp;</div></li><li><div>            tru    Truk&nbsp;</div></li><li><div>            tsi    Tsimshian&nbsp;</div></li><li><div>            tsn    Tswana&nbsp;</div></li><li><div>            tso    Tsonga&nbsp;</div></li><li><div>            tuk    Turkmen&nbsp;</div></li><li><div>            tum    Tumbuka&nbsp;</div></li><li><div>            tur    Turkish&nbsp;</div></li><li><div>            tut    Altaic (Other)&nbsp;</div></li><li><div>            twi    Twi&nbsp;</div></li><li><div>            tyv    Tuvinian&nbsp;</div></li><li><div>            uga    Ugaritic&nbsp;</div></li><li><div>            uig    Uighur&nbsp;</div></li><li><div>            ukr    Ukrainian&nbsp;</div></li><li><div>            umb    Umbundu&nbsp;</div></li><li><div>            und    Undetermined&nbsp;</div></li><li><div>            urd    Urdu&nbsp;</div></li><li><div>            uzb    Uzbek&nbsp;</div></li><li><div>            vai    Vai&nbsp;</div></li><li><div>            ven    Venda&nbsp;</div></li><li><div>            vie    Vietnamese&nbsp;</div></li><li><div>            vol    Volapk&nbsp;</div></li><li><div>            vot    Votic&nbsp;</div></li><li><div>            wak    Wakashan Languages&nbsp;</div></li><li><div>            wal    Walamo&nbsp;</div></li><li><div>            war    Waray&nbsp;</div></li><li><div>            was    Washo&nbsp;</div></li><li><div>            wel    Welsh&nbsp;</div></li><li><div>            wen    Sorbian Languages&nbsp;</div></li><li><div>            wol    Wolof&nbsp;</div></li><li><div>            xho    Xhosa&nbsp;</div></li><li><div>            yao    Yao&nbsp;</div></li><li><div>            yap    Yap&nbsp;</div></li><li><div>            yid    Yiddish&nbsp;</div></li><li><div>            yor    Yoruba&nbsp;</div></li><li><div>            zap    Zapotec&nbsp;</div></li><li><div>            zen    Zenaga&nbsp;</div></li><li><div>            zha    Zhuang&nbsp;</div></li><li><div>            zho    Chinese&nbsp;</div></li><li><div>            zul    Zulu&nbsp;</div></li><li><div>            zun    Zuni&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return getid3_lib::EmbeddedLookup($languagecode, $begin, __LINE__, __FILE__, 'id3v2-languagecode');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function ETCOEventLookup($index) {&nbsp;</div></li><li><div>        if (($index &gt;= 0x17) && ($index &lt;= 0xDF)) {&nbsp;</div></li><li><div>            return 'reserved for future use';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (($index &gt;= 0xE0) && ($index &lt;= 0xEF)) {&nbsp;</div></li><li><div>            return 'not predefined synch 0-F';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (($index &gt;= 0xF0) && ($index &lt;= 0xFC)) {&nbsp;</div></li><li><div>            return 'reserved for future use';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        static $EventLookup = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'padding (has no meaning)', &nbsp;</div></li><li><div>            0x01 =&gt; 'end of initial silence', &nbsp;</div></li><li><div>            0x02 =&gt; 'intro start', &nbsp;</div></li><li><div>            0x03 =&gt; 'main part start', &nbsp;</div></li><li><div>            0x04 =&gt; 'outro start', &nbsp;</div></li><li><div>            0x05 =&gt; 'outro end', &nbsp;</div></li><li><div>            0x06 =&gt; 'verse start', &nbsp;</div></li><li><div>            0x07 =&gt; 'refrain start', &nbsp;</div></li><li><div>            0x08 =&gt; 'interlude start', &nbsp;</div></li><li><div>            0x09 =&gt; 'theme start', &nbsp;</div></li><li><div>            0x0A =&gt; 'variation start', &nbsp;</div></li><li><div>            0x0B =&gt; 'key change', &nbsp;</div></li><li><div>            0x0C =&gt; 'time change', &nbsp;</div></li><li><div>            0x0D =&gt; 'momentary unwanted noise (Snap, Crackle & Pop)', &nbsp;</div></li><li><div>            0x0E =&gt; 'sustained noise', &nbsp;</div></li><li><div>            0x0F =&gt; 'sustained noise end', &nbsp;</div></li><li><div>            0x10 =&gt; 'intro end', &nbsp;</div></li><li><div>            0x11 =&gt; 'main part end', &nbsp;</div></li><li><div>            0x12 =&gt; 'verse end', &nbsp;</div></li><li><div>            0x13 =&gt; 'refrain end', &nbsp;</div></li><li><div>            0x14 =&gt; 'theme end', &nbsp;</div></li><li><div>            0x15 =&gt; 'profanity', &nbsp;</div></li><li><div>            0x16 =&gt; 'profanity end', &nbsp;</div></li><li><div>            0xFD =&gt; 'audio end (start of silence)', &nbsp;</div></li><li><div>            0xFE =&gt; 'audio file ends', &nbsp;</div></li><li><div>            0xFF =&gt; 'one more byte of events follows'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return (isset($EventLookup[$index]) ? $EventLookup[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function SYTLContentTypeLookup($index) {&nbsp;</div></li><li><div>        static $SYTLContentTypeLookup = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'other', &nbsp;</div></li><li><div>            0x01 =&gt; 'lyrics', &nbsp;</div></li><li><div>            0x02 =&gt; 'text transcription', &nbsp;</div></li><li><div>            0x03 =&gt; 'movement/part name', // (e.g. 'Adagio')&nbsp;</div></li><li><div>            0x04 =&gt; 'events', // (e.g. 'Don Quijote enters the stage')&nbsp;</div></li><li><div>            0x05 =&gt; 'chord', // (e.g. 'Bb F Fsus')&nbsp;</div></li><li><div>            0x06 =&gt; 'trivia/\'pop up\' information', &nbsp;</div></li><li><div>            0x07 =&gt; 'URLs to webpages', &nbsp;</div></li><li><div>            0x08 =&gt; 'URLs to images'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return (isset($SYTLContentTypeLookup[$index]) ? $SYTLContentTypeLookup[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function APICPictureTypeLookup($index, $returnarray=false) {&nbsp;</div></li><li><div>        static $APICPictureTypeLookup = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'Other', &nbsp;</div></li><li><div>            0x01 =&gt; '32x32 pixels \'file icon\' (PNG only)', &nbsp;</div></li><li><div>            0x02 =&gt; 'Other file icon', &nbsp;</div></li><li><div>            0x03 =&gt; 'Cover (front)', &nbsp;</div></li><li><div>            0x04 =&gt; 'Cover (back)', &nbsp;</div></li><li><div>            0x05 =&gt; 'Leaflet page', &nbsp;</div></li><li><div>            0x06 =&gt; 'Media (e.g. label side of CD)', &nbsp;</div></li><li><div>            0x07 =&gt; 'Lead artist/lead performer/soloist', &nbsp;</div></li><li><div>            0x08 =&gt; 'Artist/performer', &nbsp;</div></li><li><div>            0x09 =&gt; 'Conductor', &nbsp;</div></li><li><div>            0x0A =&gt; 'Band/Orchestra', &nbsp;</div></li><li><div>            0x0B =&gt; 'Composer', &nbsp;</div></li><li><div>            0x0C =&gt; 'Lyricist/text writer', &nbsp;</div></li><li><div>            0x0D =&gt; 'Recording Location', &nbsp;</div></li><li><div>            0x0E =&gt; 'During recording', &nbsp;</div></li><li><div>            0x0F =&gt; 'During performance', &nbsp;</div></li><li><div>            0x10 =&gt; 'Movie/video screen capture', &nbsp;</div></li><li><div>            0x11 =&gt; 'A bright coloured fish', &nbsp;</div></li><li><div>            0x12 =&gt; 'Illustration', &nbsp;</div></li><li><div>            0x13 =&gt; 'Band/artist logotype', &nbsp;</div></li><li><div>            0x14 =&gt; 'Publisher/Studio logotype'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if ($returnarray) {&nbsp;</div></li><li><div>            return $APICPictureTypeLookup;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return (isset($APICPictureTypeLookup[$index]) ? $APICPictureTypeLookup[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function COMRReceivedAsLookup($index) {&nbsp;</div></li><li><div>        static $COMRReceivedAsLookup = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'Other', &nbsp;</div></li><li><div>            0x01 =&gt; 'Standard CD album with other songs', &nbsp;</div></li><li><div>            0x02 =&gt; 'Compressed audio on CD', &nbsp;</div></li><li><div>            0x03 =&gt; 'File over the Internet', &nbsp;</div></li><li><div>            0x04 =&gt; 'Stream over the Internet', &nbsp;</div></li><li><div>            0x05 =&gt; 'As note sheets', &nbsp;</div></li><li><div>            0x06 =&gt; 'As note sheets in a book with other sheets', &nbsp;</div></li><li><div>            0x07 =&gt; 'Music on other media', &nbsp;</div></li><li><div>            0x08 =&gt; 'Non-musical merchandise'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return (isset($COMRReceivedAsLookup[$index]) ? $COMRReceivedAsLookup[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function RVA2ChannelTypeLookup($index) {&nbsp;</div></li><li><div>        static $RVA2ChannelTypeLookup = array(&nbsp;</div></li><li><div>            0x00 =&gt; 'Other', &nbsp;</div></li><li><div>            0x01 =&gt; 'Master volume', &nbsp;</div></li><li><div>            0x02 =&gt; 'Front right', &nbsp;</div></li><li><div>            0x03 =&gt; 'Front left', &nbsp;</div></li><li><div>            0x04 =&gt; 'Back right', &nbsp;</div></li><li><div>            0x05 =&gt; 'Back left', &nbsp;</div></li><li><div>            0x06 =&gt; 'Front centre', &nbsp;</div></li><li><div>            0x07 =&gt; 'Back centre', &nbsp;</div></li><li><div>            0x08 =&gt; 'Subwoofer'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return (isset($RVA2ChannelTypeLookup[$index]) ? $RVA2ChannelTypeLookup[$index] : '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function FrameNameLongLookup($framename) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $begin = __LINE__;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This is not a comment!&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            AENC    Audio encryption&nbsp;</div></li><li><div>            APIC    Attached picture&nbsp;</div></li><li><div>            ASPI    Audio seek point index&nbsp;</div></li><li><div>            BUF    Recommended buffer size&nbsp;</div></li><li><div>            CNT    Play counter&nbsp;</div></li><li><div>            COM    Comments&nbsp;</div></li><li><div>            COMM    Comments&nbsp;</div></li><li><div>            COMR    Commercial frame&nbsp;</div></li><li><div>            CRA    Audio encryption&nbsp;</div></li><li><div>            CRM    Encrypted meta frame&nbsp;</div></li><li><div>            ENCR    Encryption method registration&nbsp;</div></li><li><div>            EQU    Equalisation&nbsp;</div></li><li><div>            EQU2    Equalisation (2)&nbsp;</div></li><li><div>            EQUA    Equalisation&nbsp;</div></li><li><div>            ETC    Event timing codes&nbsp;</div></li><li><div>            ETCO    Event timing codes&nbsp;</div></li><li><div>            GEO    General encapsulated object&nbsp;</div></li><li><div>            GEOB    General encapsulated object&nbsp;</div></li><li><div>            GRID    Group identification registration&nbsp;</div></li><li><div>            IPL    Involved people list&nbsp;</div></li><li><div>            IPLS    Involved people list&nbsp;</div></li><li><div>            LINK    Linked information&nbsp;</div></li><li><div>            LNK    Linked information&nbsp;</div></li><li><div>            MCDI    Music CD identifier&nbsp;</div></li><li><div>            MCI    Music CD Identifier&nbsp;</div></li><li><div>            MLL    MPEG location lookup table&nbsp;</div></li><li><div>            MLLT    MPEG location lookup table&nbsp;</div></li><li><div>            OWNE    Ownership frame&nbsp;</div></li><li><div>            PCNT    Play counter&nbsp;</div></li><li><div>            PIC    Attached picture&nbsp;</div></li><li><div>            POP    Popularimeter&nbsp;</div></li><li><div>            POPM    Popularimeter&nbsp;</div></li><li><div>            POSS    Position synchronisation frame&nbsp;</div></li><li><div>            PRIV    Private frame&nbsp;</div></li><li><div>            RBUF    Recommended buffer size&nbsp;</div></li><li><div>            REV    Reverb&nbsp;</div></li><li><div>            RVA    Relative volume adjustment&nbsp;</div></li><li><div>            RVA2    Relative volume adjustment (2)&nbsp;</div></li><li><div>            RVAD    Relative volume adjustment&nbsp;</div></li><li><div>            RVRB    Reverb&nbsp;</div></li><li><div>            SEEK    Seek frame&nbsp;</div></li><li><div>            SIGN    Signature frame&nbsp;</div></li><li><div>            SLT    Synchronised lyric/text&nbsp;</div></li><li><div>            STC    Synced tempo codes&nbsp;</div></li><li><div>            SYLT    Synchronised lyric/text&nbsp;</div></li><li><div>            SYTC    Synchronised tempo codes&nbsp;</div></li><li><div>            TAL    Album/Movie/Show title&nbsp;</div></li><li><div>            TALB    Album/Movie/Show title&nbsp;</div></li><li><div>            TBP    BPM (Beats Per Minute)&nbsp;</div></li><li><div>            TBPM    BPM (beats per minute)&nbsp;</div></li><li><div>            TCM    Composer&nbsp;</div></li><li><div>            TCMP    Part of a compilation&nbsp;</div></li><li><div>            TCO    Content type&nbsp;</div></li><li><div>            TCOM    Composer&nbsp;</div></li><li><div>            TCON    Content type&nbsp;</div></li><li><div>            TCOP    Copyright message&nbsp;</div></li><li><div>            TCP    Part of a compilation&nbsp;</div></li><li><div>            TCR    Copyright message&nbsp;</div></li><li><div>            TDA    Date&nbsp;</div></li><li><div>            TDAT    Date&nbsp;</div></li><li><div>            TDEN    Encoding time&nbsp;</div></li><li><div>            TDLY    Playlist delay&nbsp;</div></li><li><div>            TDOR    Original release time&nbsp;</div></li><li><div>            TDRC    Recording time&nbsp;</div></li><li><div>            TDRL    Release time&nbsp;</div></li><li><div>            TDTG    Tagging time&nbsp;</div></li><li><div>            TDY    Playlist delay&nbsp;</div></li><li><div>            TEN    Encoded by&nbsp;</div></li><li><div>            TENC    Encoded by&nbsp;</div></li><li><div>            TEXT    Lyricist/Text writer&nbsp;</div></li><li><div>            TFLT    File type&nbsp;</div></li><li><div>            TFT    File type&nbsp;</div></li><li><div>            TIM    Time&nbsp;</div></li><li><div>            TIME    Time&nbsp;</div></li><li><div>            TIPL    Involved people list&nbsp;</div></li><li><div>            TIT1    Content group description&nbsp;</div></li><li><div>            TIT2    Title/songname/content description&nbsp;</div></li><li><div>            TIT3    Subtitle/Description refinement&nbsp;</div></li><li><div>            TKE    Initial key&nbsp;</div></li><li><div>            TKEY    Initial key&nbsp;</div></li><li><div>            TLA    Language(s)&nbsp;</div></li><li><div>            TLAN    Language(s)&nbsp;</div></li><li><div>            TLE    Length&nbsp;</div></li><li><div>            TLEN    Length&nbsp;</div></li><li><div>            TMCL    Musician credits list&nbsp;</div></li><li><div>            TMED    Media type&nbsp;</div></li><li><div>            TMOO    Mood&nbsp;</div></li><li><div>            TMT    Media type&nbsp;</div></li><li><div>            TOA    Original artist(s)/performer(s)&nbsp;</div></li><li><div>            TOAL    Original album/movie/show title&nbsp;</div></li><li><div>            TOF    Original filename&nbsp;</div></li><li><div>            TOFN    Original filename&nbsp;</div></li><li><div>            TOL    Original Lyricist(s)/text writer(s)&nbsp;</div></li><li><div>            TOLY    Original lyricist(s)/text writer(s)&nbsp;</div></li><li><div>            TOPE    Original artist(s)/performer(s)&nbsp;</div></li><li><div>            TOR    Original release year&nbsp;</div></li><li><div>            TORY    Original release year&nbsp;</div></li><li><div>            TOT    Original album/Movie/Show title&nbsp;</div></li><li><div>            TOWN    File owner/licensee&nbsp;</div></li><li><div>            TP1    Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group&nbsp;</div></li><li><div>            TP2    Band/Orchestra/Accompaniment&nbsp;</div></li><li><div>            TP3    Conductor/Performer refinement&nbsp;</div></li><li><div>            TP4    Interpreted, remixed, or otherwise modified by&nbsp;</div></li><li><div>            TPA    Part of a set&nbsp;</div></li><li><div>            TPB    Publisher&nbsp;</div></li><li><div>            TPE1    Lead performer(s)/Soloist(s)&nbsp;</div></li><li><div>            TPE2    Band/orchestra/accompaniment&nbsp;</div></li><li><div>            TPE3    Conductor/performer refinement&nbsp;</div></li><li><div>            TPE4    Interpreted, remixed, or otherwise modified by&nbsp;</div></li><li><div>            TPOS    Part of a set&nbsp;</div></li><li><div>            TPRO    Produced notice&nbsp;</div></li><li><div>            TPUB    Publisher&nbsp;</div></li><li><div>            TRC    ISRC (International Standard Recording Code)&nbsp;</div></li><li><div>            TRCK    Track number/Position in set&nbsp;</div></li><li><div>            TRD    Recording dates&nbsp;</div></li><li><div>            TRDA    Recording dates&nbsp;</div></li><li><div>            TRK    Track number/Position in set&nbsp;</div></li><li><div>            TRSN    Internet radio station name&nbsp;</div></li><li><div>            TRSO    Internet radio station owner&nbsp;</div></li><li><div>            TS2    Album-Artist sort order&nbsp;</div></li><li><div>            TSA    Album sort order&nbsp;</div></li><li><div>            TSC    Composer sort order&nbsp;</div></li><li><div>            TSI    Size&nbsp;</div></li><li><div>            TSIZ    Size&nbsp;</div></li><li><div>            TSO2    Album-Artist sort order&nbsp;</div></li><li><div>            TSOA    Album sort order&nbsp;</div></li><li><div>            TSOC    Composer sort order&nbsp;</div></li><li><div>            TSOP    Performer sort order&nbsp;</div></li><li><div>            TSOT    Title sort order&nbsp;</div></li><li><div>            TSP    Performer sort order&nbsp;</div></li><li><div>            TSRC    ISRC (international standard recording code)&nbsp;</div></li><li><div>            TSS    Software/hardware and settings used for encoding&nbsp;</div></li><li><div>            TSSE    Software/Hardware and settings used for encoding&nbsp;</div></li><li><div>            TSST    Set subtitle&nbsp;</div></li><li><div>            TST    Title sort order&nbsp;</div></li><li><div>            TT1    Content group description&nbsp;</div></li><li><div>            TT2    Title/Songname/Content description&nbsp;</div></li><li><div>            TT3    Subtitle/Description refinement&nbsp;</div></li><li><div>            TXT    Lyricist/text writer&nbsp;</div></li><li><div>            TXX    User defined text information frame&nbsp;</div></li><li><div>            TXXX    User defined text information frame&nbsp;</div></li><li><div>            TYE    Year&nbsp;</div></li><li><div>            TYER    Year&nbsp;</div></li><li><div>            UFI    Unique file identifier&nbsp;</div></li><li><div>            UFID    Unique file identifier&nbsp;</div></li><li><div>            ULT    Unsychronised lyric/text transcription&nbsp;</div></li><li><div>            USER    Terms of use&nbsp;</div></li><li><div>            USLT    Unsynchronised lyric/text transcription&nbsp;</div></li><li><div>            WAF    Official audio file webpage&nbsp;</div></li><li><div>            WAR    Official artist/performer webpage&nbsp;</div></li><li><div>            WAS    Official audio source webpage&nbsp;</div></li><li><div>            WCM    Commercial information&nbsp;</div></li><li><div>            WCOM    Commercial information&nbsp;</div></li><li><div>            WCOP    Copyright/Legal information&nbsp;</div></li><li><div>            WCP    Copyright/Legal information&nbsp;</div></li><li><div>            WOAF    Official audio file webpage&nbsp;</div></li><li><div>            WOAR    Official artist/performer webpage&nbsp;</div></li><li><div>            WOAS    Official audio source webpage&nbsp;</div></li><li><div>            WORS    Official Internet radio station homepage&nbsp;</div></li><li><div>            WPAY    Payment&nbsp;</div></li><li><div>            WPB    Publishers official webpage&nbsp;</div></li><li><div>            WPUB    Publishers official webpage&nbsp;</div></li><li><div>            WXX    User defined URL link frame&nbsp;</div></li><li><div>            WXXX    User defined URL link frame&nbsp;</div></li><li><div>            TFEA    Featured Artist&nbsp;</div></li><li><div>            TSTU    Recording Studio&nbsp;</div></li><li><div>            rgad    Replay Gain Adjustment&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return getid3_lib::EmbeddedLookup($framename, $begin, __LINE__, __FILE__, 'id3v2-framename_long');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Last three:&nbsp;</div></li><li><div>        // from Helium2 [www.helium2.com]&nbsp;</div></li><li><div>        // from http://privatewww.essex.ac.uk/~djmrob/replaygain/file_format_id3v2.html&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function FrameNameShortLookup($framename) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $begin = __LINE__;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This is not a comment!&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            AENC    audio_encryption&nbsp;</div></li><li><div>            APIC    attached_picture&nbsp;</div></li><li><div>            ASPI    audio_seek_point_index&nbsp;</div></li><li><div>            BUF    recommended_buffer_size&nbsp;</div></li><li><div>            CNT    play_counter&nbsp;</div></li><li><div>            COM    comment&nbsp;</div></li><li><div>            COMM    comment&nbsp;</div></li><li><div>            COMR    commercial_frame&nbsp;</div></li><li><div>            CRA    audio_encryption&nbsp;</div></li><li><div>            CRM    encrypted_meta_frame&nbsp;</div></li><li><div>            ENCR    encryption_method_registration&nbsp;</div></li><li><div>            EQU    equalisation&nbsp;</div></li><li><div>            EQU2    equalisation&nbsp;</div></li><li><div>            EQUA    equalisation&nbsp;</div></li><li><div>            ETC    event_timing_codes&nbsp;</div></li><li><div>            ETCO    event_timing_codes&nbsp;</div></li><li><div>            GEO    general_encapsulated_object&nbsp;</div></li><li><div>            GEOB    general_encapsulated_object&nbsp;</div></li><li><div>            GRID    group_identification_registration&nbsp;</div></li><li><div>            IPL    involved_people_list&nbsp;</div></li><li><div>            IPLS    involved_people_list&nbsp;</div></li><li><div>            LINK    linked_information&nbsp;</div></li><li><div>            LNK    linked_information&nbsp;</div></li><li><div>            MCDI    music_cd_identifier&nbsp;</div></li><li><div>            MCI    music_cd_identifier&nbsp;</div></li><li><div>            MLL    mpeg_location_lookup_table&nbsp;</div></li><li><div>            MLLT    mpeg_location_lookup_table&nbsp;</div></li><li><div>            OWNE    ownership_frame&nbsp;</div></li><li><div>            PCNT    play_counter&nbsp;</div></li><li><div>            PIC    attached_picture&nbsp;</div></li><li><div>            POP    popularimeter&nbsp;</div></li><li><div>            POPM    popularimeter&nbsp;</div></li><li><div>            POSS    position_synchronisation_frame&nbsp;</div></li><li><div>            PRIV    private_frame&nbsp;</div></li><li><div>            RBUF    recommended_buffer_size&nbsp;</div></li><li><div>            REV    reverb&nbsp;</div></li><li><div>            RVA    relative_volume_adjustment&nbsp;</div></li><li><div>            RVA2    relative_volume_adjustment&nbsp;</div></li><li><div>            RVAD    relative_volume_adjustment&nbsp;</div></li><li><div>            RVRB    reverb&nbsp;</div></li><li><div>            SEEK    seek_frame&nbsp;</div></li><li><div>            SIGN    signature_frame&nbsp;</div></li><li><div>            SLT    synchronised_lyric&nbsp;</div></li><li><div>            STC    synced_tempo_codes&nbsp;</div></li><li><div>            SYLT    synchronised_lyric&nbsp;</div></li><li><div>            SYTC    synchronised_tempo_codes&nbsp;</div></li><li><div>            TAL    album&nbsp;</div></li><li><div>            TALB    album&nbsp;</div></li><li><div>            TBP    bpm&nbsp;</div></li><li><div>            TBPM    bpm&nbsp;</div></li><li><div>            TCM    composer&nbsp;</div></li><li><div>            TCMP    part_of_a_compilation&nbsp;</div></li><li><div>            TCO    genre&nbsp;</div></li><li><div>            TCOM    composer&nbsp;</div></li><li><div>            TCON    genre&nbsp;</div></li><li><div>            TCOP    copyright_message&nbsp;</div></li><li><div>            TCP    part_of_a_compilation&nbsp;</div></li><li><div>            TCR    copyright_message&nbsp;</div></li><li><div>            TDA    date&nbsp;</div></li><li><div>            TDAT    date&nbsp;</div></li><li><div>            TDEN    encoding_time&nbsp;</div></li><li><div>            TDLY    playlist_delay&nbsp;</div></li><li><div>            TDOR    original_release_time&nbsp;</div></li><li><div>            TDRC    recording_time&nbsp;</div></li><li><div>            TDRL    release_time&nbsp;</div></li><li><div>            TDTG    tagging_time&nbsp;</div></li><li><div>            TDY    playlist_delay&nbsp;</div></li><li><div>            TEN    encoded_by&nbsp;</div></li><li><div>            TENC    encoded_by&nbsp;</div></li><li><div>            TEXT    lyricist&nbsp;</div></li><li><div>            TFLT    file_type&nbsp;</div></li><li><div>            TFT    file_type&nbsp;</div></li><li><div>            TIM    time&nbsp;</div></li><li><div>            TIME    time&nbsp;</div></li><li><div>            TIPL    involved_people_list&nbsp;</div></li><li><div>            TIT1    content_group_description&nbsp;</div></li><li><div>            TIT2    title&nbsp;</div></li><li><div>            TIT3    subtitle&nbsp;</div></li><li><div>            TKE    initial_key&nbsp;</div></li><li><div>            TKEY    initial_key&nbsp;</div></li><li><div>            TLA    language&nbsp;</div></li><li><div>            TLAN    language&nbsp;</div></li><li><div>            TLE    length&nbsp;</div></li><li><div>            TLEN    length&nbsp;</div></li><li><div>            TMCL    musician_credits_list&nbsp;</div></li><li><div>            TMED    media_type&nbsp;</div></li><li><div>            TMOO    mood&nbsp;</div></li><li><div>            TMT    media_type&nbsp;</div></li><li><div>            TOA    original_artist&nbsp;</div></li><li><div>            TOAL    original_album&nbsp;</div></li><li><div>            TOF    original_filename&nbsp;</div></li><li><div>            TOFN    original_filename&nbsp;</div></li><li><div>            TOL    original_lyricist&nbsp;</div></li><li><div>            TOLY    original_lyricist&nbsp;</div></li><li><div>            TOPE    original_artist&nbsp;</div></li><li><div>            TOR    original_year&nbsp;</div></li><li><div>            TORY    original_year&nbsp;</div></li><li><div>            TOT    original_album&nbsp;</div></li><li><div>            TOWN    file_owner&nbsp;</div></li><li><div>            TP1    artist&nbsp;</div></li><li><div>            TP2    band&nbsp;</div></li><li><div>            TP3    conductor&nbsp;</div></li><li><div>            TP4    remixer&nbsp;</div></li><li><div>            TPA    part_of_a_set&nbsp;</div></li><li><div>            TPB    publisher&nbsp;</div></li><li><div>            TPE1    artist&nbsp;</div></li><li><div>            TPE2    band&nbsp;</div></li><li><div>            TPE3    conductor&nbsp;</div></li><li><div>            TPE4    remixer&nbsp;</div></li><li><div>            TPOS    part_of_a_set&nbsp;</div></li><li><div>            TPRO    produced_notice&nbsp;</div></li><li><div>            TPUB    publisher&nbsp;</div></li><li><div>            TRC    isrc&nbsp;</div></li><li><div>            TRCK    track_number&nbsp;</div></li><li><div>            TRD    recording_dates&nbsp;</div></li><li><div>            TRDA    recording_dates&nbsp;</div></li><li><div>            TRK    track_number&nbsp;</div></li><li><div>            TRSN    internet_radio_station_name&nbsp;</div></li><li><div>            TRSO    internet_radio_station_owner&nbsp;</div></li><li><div>            TS2    album_artist_sort_order&nbsp;</div></li><li><div>            TSA    album_sort_order&nbsp;</div></li><li><div>            TSC    composer_sort_order&nbsp;</div></li><li><div>            TSI    size&nbsp;</div></li><li><div>            TSIZ    size&nbsp;</div></li><li><div>            TSO2    album_artist_sort_order&nbsp;</div></li><li><div>            TSOA    album_sort_order&nbsp;</div></li><li><div>            TSOC    composer_sort_order&nbsp;</div></li><li><div>            TSOP    performer_sort_order&nbsp;</div></li><li><div>            TSOT    title_sort_order&nbsp;</div></li><li><div>            TSP    performer_sort_order&nbsp;</div></li><li><div>            TSRC    isrc&nbsp;</div></li><li><div>            TSS    encoder_settings&nbsp;</div></li><li><div>            TSSE    encoder_settings&nbsp;</div></li><li><div>            TSST    set_subtitle&nbsp;</div></li><li><div>            TST    title_sort_order&nbsp;</div></li><li><div>            TT1    content_group_description&nbsp;</div></li><li><div>            TT2    title&nbsp;</div></li><li><div>            TT3    subtitle&nbsp;</div></li><li><div>            TXT    lyricist&nbsp;</div></li><li><div>            TXX    text&nbsp;</div></li><li><div>            TXXX    text&nbsp;</div></li><li><div>            TYE    year&nbsp;</div></li><li><div>            TYER    year&nbsp;</div></li><li><div>            UFI    unique_file_identifier&nbsp;</div></li><li><div>            UFID    unique_file_identifier&nbsp;</div></li><li><div>            ULT    unsychronised_lyric&nbsp;</div></li><li><div>            USER    terms_of_use&nbsp;</div></li><li><div>            USLT    unsynchronised_lyric&nbsp;</div></li><li><div>            WAF    url_file&nbsp;</div></li><li><div>            WAR    url_artist&nbsp;</div></li><li><div>            WAS    url_source&nbsp;</div></li><li><div>            WCM    commercial_information&nbsp;</div></li><li><div>            WCOM    commercial_information&nbsp;</div></li><li><div>            WCOP    copyright&nbsp;</div></li><li><div>            WCP    copyright&nbsp;</div></li><li><div>            WOAF    url_file&nbsp;</div></li><li><div>            WOAR    url_artist&nbsp;</div></li><li><div>            WOAS    url_source&nbsp;</div></li><li><div>            WORS    url_station&nbsp;</div></li><li><div>            WPAY    url_payment&nbsp;</div></li><li><div>            WPB    url_publisher&nbsp;</div></li><li><div>            WPUB    url_publisher&nbsp;</div></li><li><div>            WXX    url_user&nbsp;</div></li><li><div>            WXXX    url_user&nbsp;</div></li><li><div>            TFEA    featured_artist&nbsp;</div></li><li><div>            TSTU    recording_studio&nbsp;</div></li><li><div>            rgad    replay_gain_adjustment&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return getid3_lib::EmbeddedLookup($framename, $begin, __LINE__, __FILE__, 'id3v2-framename_short');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function TextEncodingTerminatorLookup($encoding) {&nbsp;</div></li><li><div>        // http://www.id3.org/id3v2.4.0-structure.txt&nbsp;</div></li><li><div>        // Frames that allow different types of text encoding contains a text encoding description byte. Possible encodings:&nbsp;</div></li><li><div>        static $TextEncodingTerminatorLookup = array(&nbsp;</div></li><li><div>            0 =&gt; &quot;\x00&quot;, // $00  ISO-8859-1. Terminated with $00.&nbsp;</div></li><li><div>            1 =&gt; &quot;\x00\x00&quot;, // $01  UTF-16 encoded Unicode with BOM. All strings in the same frame SHALL have the same byteorder. Terminated with $00 00.&nbsp;</div></li><li><div>            2 =&gt; &quot;\x00\x00&quot;, // $02  UTF-16BE encoded Unicode without BOM. Terminated with $00 00.&nbsp;</div></li><li><div>            3 =&gt; &quot;\x00&quot;, // $03  UTF-8 encoded Unicode. Terminated with $00.&nbsp;</div></li><li><div>            255 =&gt; &quot;\x00\x00&quot;&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($TextEncodingTerminatorLookup[$encoding]) ? $TextEncodingTerminatorLookup[$encoding] : &quot;\x00&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function TextEncodingNameLookup($encoding) {&nbsp;</div></li><li><div>        // http://www.id3.org/id3v2.4.0-structure.txt&nbsp;</div></li><li><div>        // Frames that allow different types of text encoding contains a text encoding description byte. Possible encodings:&nbsp;</div></li><li><div>        static $TextEncodingNameLookup = array(&nbsp;</div></li><li><div>            0 =&gt; 'ISO-8859-1', // $00  ISO-8859-1. Terminated with $00.&nbsp;</div></li><li><div>            1 =&gt; 'UTF-16', // $01  UTF-16 encoded Unicode with BOM. All strings in the same frame SHALL have the same byteorder. Terminated with $00 00.&nbsp;</div></li><li><div>            2 =&gt; 'UTF-16BE', // $02  UTF-16BE encoded Unicode without BOM. Terminated with $00 00.&nbsp;</div></li><li><div>            3 =&gt; 'UTF-8', // $03  UTF-8 encoded Unicode. Terminated with $00.&nbsp;</div></li><li><div>            255 =&gt; 'UTF-16BE'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        return (isset($TextEncodingNameLookup[$encoding]) ? $TextEncodingNameLookup[$encoding] : 'ISO-8859-1');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function IsValidID3v2FrameName($framename, $id3v2majorversion) {&nbsp;</div></li><li><div>        switch ($id3v2majorversion) {&nbsp;</div></li><li><div>            case 2:&nbsp;</div></li><li><div>                return preg_match('#[A-Z][A-Z0-9]{2}#', $framename);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 3:&nbsp;</div></li><li><div>            case 4:&nbsp;</div></li><li><div>                return preg_match('#[A-Z][A-Z0-9]{3}#', $framename);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function IsANumber($numberstring, $allowdecimal=false, $allownegative=false) {&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; strlen($numberstring); $i++) {&nbsp;</div></li><li><div>            if ((chr($numberstring{$i}) &lt; chr('0')) || (chr($numberstring{$i}) &gt; chr('9'))) {&nbsp;</div></li><li><div>                if (($numberstring{$i} == '.') && $allowdecimal) {&nbsp;</div></li><li><div>                    // allowed&nbsp;</div></li><li><div>                } elseif (($numberstring{$i} == '-') && $allownegative && ($i == 0)) {&nbsp;</div></li><li><div>                    // allowed&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    return false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function IsValidDateStampString($datestamp) {&nbsp;</div></li><li><div>        if (strlen($datestamp) != 8) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!self::IsANumber($datestamp, false)) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $year = substr($datestamp, 0, 4);&nbsp;</div></li><li><div>        $month = substr($datestamp, 4, 2);&nbsp;</div></li><li><div>        $day = substr($datestamp, 6, 2);&nbsp;</div></li><li><div>        if (($year == 0) || ($month == 0) || ($day == 0)) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($month &gt; 12) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($day &gt; 31) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (($day &gt; 30) && (($month == 4) || ($month == 6) || ($month == 9) || ($month == 11))) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (($day &gt; 29) && ($month == 2)) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function ID3v2HeaderLength($majorversion) {&nbsp;</div></li><li><div>        return (($majorversion == 2) ? 6 : 10);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 4.7</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/4.7.4/classes/getid3_id3v2/" class="">4.7.4</a></li><li><a href="http://hookr.io/4.7.3/classes/getid3_id3v2/" class="">4.7.3</a></li><li><a href="http://hookr.io/4.7.2/classes/getid3_id3v2/" class="">4.7.2</a></li><li><a href="http://hookr.io/4.7.1/classes/getid3_id3v2/" class="">4.7.1</a></li><li><a href="http://hookr.io/4.7/classes/getid3_id3v2/" class="active">4.7</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>class</li><li><span></span>getid3_id3v2</li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>