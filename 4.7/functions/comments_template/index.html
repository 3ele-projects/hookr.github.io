<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr function lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr function lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr function lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr function ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr function gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr function" data-site="wordpress" data-version="4.7" data-type="function" data-id="437"><head xmlns="http://www.w3.org/1999/xhtml"><title> comments_template | function | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="comments_template, function, wordpress, 4.7" /><meta name="description" content="Load the comment template specified in $file." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=f45e88aaefedd1127bf1fa0932b23337' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/functions/comments_template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fcomments_template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fcomments_template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7-function-comments_template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="comments_template" class="single single-function single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7." href="http://hookr.io/4.7/" class="H_VERSION"><span property="name">4.7</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to functions." href="http://hookr.io/4.7/functions/" class=""><span property="name">functions</span></a><meta property="position" content="3"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">comments_template</span><meta property="position" content="4"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="function"><ul role="navigation"><li class="" data-id="all" data-count="6307"><a href="http://hookr.io/4.7/all/" title="All">All <span class="count badge">6307</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2531"><a href="http://hookr.io/4.7/hooks/" title="Hooks">Hooks <span class="count badge">2531</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1667"><a href="http://hookr.io/4.7/filters/" title="Filters">Filters <span class="count badge">1667</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="active" data-id="function" data-count="2851"><a href="http://hookr.io/4.7/functions/" title="Functions">Functions <span class="count badge">2851</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>comments_template</strong></h1><p>Load the comment template specified in $file.</p> </section> <section id="description"><h2>Description</h2><pre><div>comments_template( <span class="param">(string)</span> <a href="#" class="param" data-type="(string) " data-desc="The file to load.<br />Default &#39;/comments.<br />php&#39;." data-depr="" data-opt="1" title="The file to load.<br />Default &#39;/comments.<br />php&#39;.">$file = '/comments.php'</a>, <span class="param">(bool)</span> <a href="#" class="param" data-type="(bool) " data-desc="Whether to separate the<br />comments by comment type.<br />Default false." data-depr="" data-opt="1" title="Whether to separate the<br />comments by comment type.<br />Default false.">$separate_comments = false</a> );&nbsp;</div></pre><p>Will not display the comments template if not on single post or page, or if the post does not have comments.</p><p> Uses the WordPress database object to query for the comments. The comments are passed through the  filter hook with the list of comments and the post ID respectively.</p><p> The <code>$file</code> path is passed through a filter hook called , which includes the TEMPLATEPATH and <code>$file</code> combined. Tries the <code>$filtered</code> path first and if it fails it will require the default comment template from the default theme. If either does not exist, then the WordPress process will be halted. It is advised for that reason, that the default theme is not deleted.</p><p> Will not try to get the comments if the post has none.</p> </section> <section id="params"><h2>Parameters <span class="count">(2)</span></h2><dl><dt> <span class="index">0.</span> <span class="param"> $file </span> &mdash; Optional. <span class="type">(string)</span> => <code>'/comments.php'</code></dt><dd> The file to load. Default /comments.php..</dd><dt> <span class="index">1.</span> <span class="param"> $separate_comments </span> &mdash; Optional. <span class="type">(bool)</span> => <code>false</code></dt><dd> Whether to separate the comments by comment type. Default false.</dd></dl> </section><hr /> <section id="usage"><h2>Usage</h2><pre><ol><li><div>if ( !function_exists( '<span class="func">comments_template</span>' ) ) {&nbsp;</div></li><li><div>    require_once ABSPATH . WPINC . '/comment-template.php';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Optional. The file to load. Default '/comments.php'.</span>&nbsp;</div></li><li><div><span class="param">$file</span> = '/comments.php';&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// Optional. Whether to separate the comments by comment type.</span>&nbsp;</div></li><li><div><span class="comment">// Default false.</span>&nbsp;</div></li><li><div><span class="param">$separate_comments</span> = false;&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// NOTICE! Understand what this does before running.</span>&nbsp;</div></li><li><div><span class="param">$result</span> = <span class="func">comments_template</span>(<span class="param">$file</span>, <span class="param">$separate_comments</span>);&nbsp;</div></li><li><div>   &nbsp;</div></li></ol></pre></section><hr /> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The function is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/4.7/files/wp-includes-comment-template/" class="file">/wp-includes/comment-template.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="26" class="block" start="1291"><li><div>function comments_template( $file = '/comments.php', $separate_comments = false ) {&nbsp;</div></li><li><div>    global $wp_query, $withcomments, $post, $wpdb, $id, $comment, $user_login, $user_ID, $user_identity, $overridden_cpage;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( !(is_single() || <a href="http://hookr.io/4.7/functions/is_page/" data-id="1452902" title="is_page" class="function">is_page</a>() || $withcomments) || empty($post) )&nbsp;</div></li><li><div>        return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( empty($file) )&nbsp;</div></li><li><div>        $file = '/comments.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $req = <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>('require_name_email');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Comment author information fetched from the comment cookies.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $commenter = <a href="http://hookr.io/4.7/functions/wp_get_current_commenter/" data-id="1449892" title="wp_get_current_commenter" class="function">wp_get_current_commenter</a>();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The name of the current comment author escaped for use in attributes.&nbsp;</div></li><li><div>     * Escaped by <a href="http://hookr.io/4.7/functions/sanitize_comment_cookies/" data-id="1449871" title="sanitize_comment_cookies" class="function">sanitize_comment_cookies</a>().&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $comment_author = $commenter['comment_author'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The email address of the current comment author escaped for use in attributes.&nbsp;</div></li><li><div>     * Escaped by <a href="http://hookr.io/4.7/functions/sanitize_comment_cookies/" data-id="1449871" title="sanitize_comment_cookies" class="function">sanitize_comment_cookies</a>().&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $comment_author_email = $commenter['comment_author_email'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The url of the current comment author escaped for use in attributes.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $comment_author_url = <a href="http://hookr.io/4.7/functions/esc_url/" data-id="1451149" title="esc_url" class="function">esc_url</a>($commenter['comment_author_url']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $comment_args = array(&nbsp;</div></li><li><div>        'orderby' =&gt; 'comment_date_gmt', &nbsp;</div></li><li><div>        'order' =&gt; 'ASC', &nbsp;</div></li><li><div>        'status' =&gt; 'approve', &nbsp;</div></li><li><div>        'post_id' =&gt; $post-&gt;ID, &nbsp;</div></li><li><div>        'no_found_rows' =&gt; false, &nbsp;</div></li><li><div>        'update_comment_meta_cache' =&gt; false, // We lazy-load comment meta for performance.&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>('thread_comments') ) {&nbsp;</div></li><li><div>        $comment_args['hierarchical'] = 'threaded';&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        $comment_args['hierarchical'] = false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( $user_ID ) {&nbsp;</div></li><li><div>        $comment_args['include_unapproved'] = array( $user_ID );&nbsp;</div></li><li><div>    } elseif ( ! empty( $comment_author_email ) ) {&nbsp;</div></li><li><div>        $comment_args['include_unapproved'] = array( $comment_author_email );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $per_page = 0;&nbsp;</div></li><li><div>    if ( <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>( 'page_comments' ) ) {&nbsp;</div></li><li><div>        $per_page = (int) <a href="http://hookr.io/4.7/functions/get_query_var/" data-id="1452869" title="get_query_var" class="function">get_query_var</a>( 'comments_per_page' );&nbsp;</div></li><li><div>        if ( 0 === $per_page ) {&nbsp;</div></li><li><div>            $per_page = (int) <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>( 'comments_per_page' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $comment_args['number'] = $per_page;&nbsp;</div></li><li><div>        $page = (int) <a href="http://hookr.io/4.7/functions/get_query_var/" data-id="1452869" title="get_query_var" class="function">get_query_var</a>( 'cpage' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $page ) {&nbsp;</div></li><li><div>            $comment_args['offset'] = ( $page - 1 ) * $per_page;&nbsp;</div></li><li><div>        } elseif ( 'oldest' === <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>( 'default_comments_page' ) ) {&nbsp;</div></li><li><div>            $comment_args['offset'] = 0;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            // If fetching the first page of 'newest', we need a top-level comment count.&nbsp;</div></li><li><div>            $top_level_query = new <a href="http://hookr.io/4.7/classes/wp_comment_query/" data-id="1449081" title="WP_Comment_Query" class="class">WP_Comment_Query</a>();&nbsp;</div></li><li><div>            $top_level_args = array(&nbsp;</div></li><li><div>                'count' =&gt; true, &nbsp;</div></li><li><div>                'orderby' =&gt; false, &nbsp;</div></li><li><div>                'post_id' =&gt; $post-&gt;ID, &nbsp;</div></li><li><div>                'status' =&gt; 'approve', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $comment_args['hierarchical'] ) {&nbsp;</div></li><li><div>                $top_level_args['parent'] = 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( isset( $comment_args['include_unapproved'] ) ) {&nbsp;</div></li><li><div>                $top_level_args['include_unapproved'] = $comment_args['include_unapproved'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $top_level_count = $top_level_query-&gt;query( $top_level_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $comment_args['offset'] = ( ceil( $top_level_count / $per_page ) - 1 ) * $per_page;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the arguments used to query comments in comments_template().&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.5.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see <a href="http://hookr.io/4.7/classes/wp_comment_query/" data-id="1449081" title="WP_Comment_Query" class="class">WP_Comment_Query</a>::__construct()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $comment_args {&nbsp;</div></li><li><div>     *     Array of <a href="http://hookr.io/4.7/classes/wp_comment_query/" data-id="1449081" title="WP_Comment_Query" class="class">WP_Comment_Query</a> arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     *     @type string|array $orderby                   Field(s) to order by.&nbsp;</div></li><li><div>     *     @type string       $order                     Order of results. Accepts 'ASC' or 'DESC'.&nbsp;</div></li><li><div>     *     @type string       $status                    Comment status.&nbsp;</div></li><li><div>     *     @type array        $include_unapproved        Array of IDs or email addresses whose unapproved comments&nbsp;</div></li><li><div>     *                                                   will be included in results.&nbsp;</div></li><li><div>     *     @type int          $post_id                   ID of the post.&nbsp;</div></li><li><div>     *     @type bool         $no_found_rows             Whether to refrain from querying for found rows.&nbsp;</div></li><li><div>     *     @type bool         $update_comment_meta_cache Whether to prime cache for comment meta.&nbsp;</div></li><li><div>     *     @type bool|string  $hierarchical              Whether to query for comments hierarchically.&nbsp;</div></li><li><div>     *     @type int          $offset                    Comment offset.&nbsp;</div></li><li><div>     *     @type int          $number                    Number of comments to fetch.&nbsp;</div></li><li><div>     * }&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $comment_args = <a href="http://hookr.io/4.7/functions/apply_filters/" data-id="1452402" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7/filters/comments_template_query_args/" data-id="1449981" title="comments_template_query_args" class="filter">'comments_template_query_args'</a>, $comment_args );&nbsp;</div></li><li><div>    $comment_query = new <a href="http://hookr.io/4.7/classes/wp_comment_query/" data-id="1449081" title="WP_Comment_Query" class="class">WP_Comment_Query</a>( $comment_args );&nbsp;</div></li><li><div>    $_comments = $comment_query-&gt;comments;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Trees must be flattened before they're passed to the walker.&nbsp;</div></li><li><div>    if ( $comment_args['hierarchical'] ) {&nbsp;</div></li><li><div>        $comments_flat = array();&nbsp;</div></li><li><div>        foreach ( $_comments as $_comment ) {&nbsp;</div></li><li><div>            $comments_flat[] = $_comment;&nbsp;</div></li><li><div>            $comment_children = $_comment-&gt;get_children( array(&nbsp;</div></li><li><div>                'format' =&gt; 'flat', &nbsp;</div></li><li><div>                'status' =&gt; $comment_args['status'], &nbsp;</div></li><li><div>                'orderby' =&gt; $comment_args['orderby']&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $comment_children as $comment_child ) {&nbsp;</div></li><li><div>                $comments_flat[] = $comment_child;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        $comments_flat = $_comments;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the comments array.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.1.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $comments Array of comments supplied to the comments template.&nbsp;</div></li><li><div>     * @param int   $post_ID  Post ID.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $wp_query-&gt;comments = <a href="http://hookr.io/4.7/functions/apply_filters/" data-id="1452402" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7/filters/comments_array/" data-id="1449982" title="comments_array" class="filter">'comments_array'</a>, $comments_flat, $post-&gt;ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $comments = &$wp_query-&gt;comments;&nbsp;</div></li><li><div>    $wp_query-&gt;comment_count = count($wp_query-&gt;comments);&nbsp;</div></li><li><div>    $wp_query-&gt;max_num_comment_pages = $comment_query-&gt;max_num_pages;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( $separate_comments ) {&nbsp;</div></li><li><div>        $wp_query-&gt;comments_by_type = <a href="http://hookr.io/4.7/functions/separate_comments/" data-id="1449876" title="separate_comments" class="function">separate_comments</a>($comments);&nbsp;</div></li><li><div>        $comments_by_type = &$wp_query-&gt;comments_by_type;&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        $wp_query-&gt;comments_by_type = array();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $overridden_cpage = false;&nbsp;</div></li><li><div>    if ( '' == <a href="http://hookr.io/4.7/functions/get_query_var/" data-id="1452869" title="get_query_var" class="function">get_query_var</a>( 'cpage' ) && $wp_query-&gt;max_num_comment_pages &gt; 1 ) {&nbsp;</div></li><li><div>        <a href="http://hookr.io/4.7/functions/set_query_var/" data-id="1452873" title="set_query_var" class="function">set_query_var</a>( 'cpage', 'newest' == <a href="http://hookr.io/4.7/functions/get_option/" data-id="1452322" title="get_option" class="function">get_option</a>('default_comments_page') ? <a href="http://hookr.io/4.7/functions/get_comment_pages_count/" data-id="1449877" title="get_comment_pages_count" class="function">get_comment_pages_count</a>() : 1 );&nbsp;</div></li><li><div>        $overridden_cpage = true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( !defined('<a href="http://hookr.io/4.7/constants/comments_template/" data-id="1449648" title="COMMENTS_TEMPLATE" class="constant">COMMENTS_TEMPLATE</a>') )&nbsp;</div></li><li><div>        define('<a href="http://hookr.io/4.7/constants/comments_template/" data-id="1449648" title="COMMENTS_TEMPLATE" class="constant">COMMENTS_TEMPLATE</a>', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $theme_template = <a href="http://hookr.io/4.7/constants/stylesheetpath/" data-id="1450068" title="STYLESHEETPATH" class="constant">STYLESHEETPATH</a> . $file;&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the path to the theme template file used for the comments template.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.5.1&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $theme_template The path to the theme template file.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    $include = <a href="http://hookr.io/4.7/functions/apply_filters/" data-id="1452402" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/4.7/filters/comments_template/" data-id="1449983" title="comments_template" class="filter">'comments_template'</a>, $theme_template );&nbsp;</div></li><li><div>    if ( file_exists( $include ) )&nbsp;</div></li><li><div>        require( $include );&nbsp;</div></li><li><div>    elseif ( file_exists( <a href="http://hookr.io/4.7/constants/templatepath/" data-id="1450067" title="TEMPLATEPATH" class="constant">TEMPLATEPATH</a> . $file ) )&nbsp;</div></li><li><div>        require( <a href="http://hookr.io/4.7/constants/templatepath/" data-id="1450067" title="TEMPLATEPATH" class="constant">TEMPLATEPATH</a> . $file );&nbsp;</div></li><li><div>    else // Backward compat code will be removed in a future release&nbsp;</div></li><li><div>        require( <a href="http://hookr.io/4.7/constants/abspath/" data-id="1454166" title="ABSPATH" class="constant">ABSPATH</a> . <a href="http://hookr.io/4.7/constants/wpinc/" data-id="1454211" title="WPINC" class="constant">WPINC</a> . '/theme-compat/comments.php');&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.5.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/4.7.4/functions/comments_template/" class="">4.7.4</a></li><li><a href="http://hookr.io/4.7.3/functions/comments_template/" class="">4.7.3</a></li><li><a href="http://hookr.io/4.7.2/functions/comments_template/" class="">4.7.2</a></li><li><a href="http://hookr.io/4.7.1/functions/comments_template/" class="">4.7.1</a></li><li><a href="http://hookr.io/4.7/functions/comments_template/" class="active">4.7</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>function</li><li><span></span>comments_template</li><li><span></span>wp-include</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>