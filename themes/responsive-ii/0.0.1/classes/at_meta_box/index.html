<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="theme" data-version="0.0.1" data-slug="responsive-ii" data-type="class" data-id="101066"><head xmlns="http://www.w3.org/1999/xhtml"><title> at_meta_box | class | Responsive Ii | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="AT_Meta_Box, class, theme, responsive-ii, 0.0.1" /><meta name="description" content="All Types Meta Box class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=8da494071d7f57766973d0629551afee' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/at_meta_box/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fat_meta_box%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fat_meta_box%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"theme-responsive-ii-0.0.1-class-at_meta_box","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="at_meta_box" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to themes." href="http://hookr.io/themes/" class=""><span property="name">themes</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to responsive-ii." href="http://hookr.io/themes/responsive-ii/" class="plugin"><span property="name">responsive-ii</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><span property="name">0.0.1</span><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/themes/responsive-ii/0.0.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">at_meta_box</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="213"><a href="http://hookr.io/themes/responsive-ii/0.0.1/all/" title="All">All <span class="count badge">213</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/themes/responsive-ii/0.0.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="89"><a href="http://hookr.io/themes/responsive-ii/0.0.1/hooks/" title="Hooks">Hooks <span class="count badge">89</span></a></li><li class="" data-id="action" data-count="65"><a href="http://hookr.io/themes/responsive-ii/0.0.1/actions/" title="Actions">Actions <span class="count badge">65</span></a></li><li class="" data-id="filter" data-count="24"><a href="http://hookr.io/themes/responsive-ii/0.0.1/filters/" title="Filters">Filters <span class="count badge">24</span></a></li><li class="active" data-id="class" data-count="4"><a href="http://hookr.io/themes/responsive-ii/0.0.1/classes/" title="Classes">Classes <span class="count badge">4</span></a></li><li class="" data-id="constant" data-count="1"><a href="http://hookr.io/themes/responsive-ii/0.0.1/constants/" title="Constants">Constants <span class="count badge">1</span></a></li><li class="" data-id="function" data-count="119"><a href="http://hookr.io/themes/responsive-ii/0.0.1/functions/" title="Functions">Functions <span class="count badge">119</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/themes/responsive-ii/0.0.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class="active"><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>AT_Meta_Box</strong></h1><p>All Types Meta Box class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/themes/responsive-ii/0.0.1/files/libraries-class-meta-box/" class="file">/libraries/class-meta-box.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="35" class="block" start="35"><li><div>class AT_Meta_Box {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Holds meta box object&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var object&nbsp;</div></li><li><div>     * @access protected&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected $_meta_box;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Holds meta box fields.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     * @access protected&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected $_prefix;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Holds Prefix for meta box fields.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     * @access protected&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected $_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Use local images.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var bool&nbsp;</div></li><li><div>     * @access protected&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected $_Local_images;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * SelfPath to allow themes as well as plugins.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var string&nbsp;</div></li><li><div>     * @access protected&nbsp;</div></li><li><div>     * @since 1.6&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected $SelfPath;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * $field_types  holds used field types&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @since 2.9.7&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public $field_types = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * $inGroup  holds groupping boolean&nbsp;</div></li><li><div>     * @var boolean&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @since 2.9.8&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public $inGroup = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Constructor&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $meta_box&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function __construct( $meta_box ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If we are not in admin area exit.&nbsp;</div></li><li><div>        if( !is_admin() ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //load translation&nbsp;</div></li><li><div>        add_filter( 'init', array( $this, 'load_textdomain' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Assign meta box values to local variables and add it's missed values.&nbsp;</div></li><li><div>        $this-&gt;_meta_box = $meta_box;&nbsp;</div></li><li><div>        $this-&gt;_prefix = ( isset( $meta_box['prefix'] ) ) ? $meta_box['prefix'] : '';&nbsp;</div></li><li><div>        $this-&gt;_fields = $this-&gt;_meta_box['fields'];&nbsp;</div></li><li><div>        $this-&gt;_Local_images = ( isset( $meta_box['local_images'] ) ) ? true : false;&nbsp;</div></li><li><div>        $this-&gt;add_missed_values();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( isset( $meta_box['use_with_theme'] ) ) {&nbsp;</div></li><li><div>            if( $meta_box['use_with_theme'] === true ) {&nbsp;</div></li><li><div>                $this-&gt;SelfPath = get_stylesheet_directory_uri() . '/libraries';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            elseif( $meta_box['use_with_theme'] === false ) {&nbsp;</div></li><li><div>                $this-&gt;SelfPath = plugins_url( 'meta-box-class', plugin_basename( dirname( __FILE__ ) ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $this-&gt;SelfPath = $meta_box['use_with_theme'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $this-&gt;SelfPath = plugins_url( 'meta-box-class', plugin_basename( dirname( __FILE__ ) ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add metaboxes&nbsp;</div></li><li><div>        add_action( 'add_meta_boxes', array( $this, 'add' ) );&nbsp;</div></li><li><div>        //add_action( 'wp_insert_post', array( $this, 'save' ) );&nbsp;</div></li><li><div>        add_action( 'pre_post_update', array( $this, 'save' ) );&nbsp;</div></li><li><div>        // Load common js, css files&nbsp;</div></li><li><div>        // Must enqueue for all pages as we need js for the media upload, too.&nbsp;</div></li><li><div>        add_action( 'admin_print_styles', array( $this, 'load_scripts_styles' ) );&nbsp;</div></li><li><div>        //limit File type at upload&nbsp;</div></li><li><div>        add_filter( 'wp_handle_upload_prefilter', array( $this, 'Validate_upload_file_type' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Load all Javascript and CSS&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function load_scripts_styles() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get Plugin Path&nbsp;</div></li><li><div>        $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Set template directory uri&nbsp;</div></li><li><div>        $directory_uri = get_template_directory_uri();&nbsp;</div></li><li><div>        $metabox_uri = $directory_uri . '/libraries';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //only load styles and js when needed&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div> * since 1.8&nbsp;</div></li><li><div> */&nbsp;</div></li><li><div>        global $typenow;&nbsp;</div></li><li><div>        if( in_array( $typenow, $this-&gt;_meta_box['pages'] ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>            // Enqueue Meta Box Style&nbsp;</div></li><li><div>            wp_enqueue_style( 'at-meta-box', $metabox_uri . '/css/meta-box.css' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Enqueue Meta Box Scripts&nbsp;</div></li><li><div>            wp_enqueue_script( 'at-meta-box', $metabox_uri . '/js/meta-box.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>            // Enqueue Cyberchimps Scripts&nbsp;</div></li><li><div>            wp_enqueue_script( 'meta-boxes-js', $metabox_uri . '/js/metabox-tabs.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            // Enqueue Media uploader for single images TODO look into removing this and use this classes image uploader that saves images as an array. Will need to change all elements to be&nbsp;</div></li><li><div>            // TODO able to work with this&nbsp;</div></li><li><div>            wp_enqueue_script( 'cc-media-uploader-js', $metabox_uri . '/js/media-uploader-new.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Make upload feature work event when custom post type doesn't support 'editor'&nbsp;</div></li><li><div>            if( $this-&gt;has_field( 'image' ) || $this-&gt;has_field( 'file' ) ) {&nbsp;</div></li><li><div>                wp_enqueue_script( 'media-upload' );&nbsp;</div></li><li><div>                add_thickbox();&nbsp;</div></li><li><div>                wp_enqueue_script( 'jquery-ui-core' );&nbsp;</div></li><li><div>                wp_enqueue_script( 'jquery-ui-sortable' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // Check for special fields and add needed actions for them.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //this replaces the ugly check fields methods calls&nbsp;</div></li><li><div>            foreach( array( 'upload', 'color', 'date', 'time', 'select' ) as $type ) {&nbsp;</div></li><li><div>                call_user_func( array( $this, 'check_field_' . $type ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check the Field select, Add needed Actions&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.8&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_field_select() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check if the field is an image or file. If not, return.&nbsp;</div></li><li><div>        if( !$this-&gt;has_field( 'select' ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>        // Enqueu JQuery UI, use proper version.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Enqueu JQuery select2 library, use proper version.&nbsp;</div></li><li><div>//            wp_enqueue_style( 'at-multiselect-select2-css', $plugin_path . '/js/select2/select2.css', array(), null );&nbsp;</div></li><li><div>//            wp_enqueue_script( 'at-multiselect-select2-js', $plugin_path . '/js/select2/select2.js', array( 'jquery' ), false, true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check the Field Upload, Add needed Actions&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_field_upload() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check if the field is an image or file. If not, return.&nbsp;</div></li><li><div>        if( !$this-&gt;has_field( 'image' ) && !$this-&gt;has_field( 'file' ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add data encoding type for file uploading.&nbsp;</div></li><li><div>        add_action( 'post_edit_form_tag', array( $this, 'add_enctype' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add data encoding type for file uploading&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_enctype() {&nbsp;</div></li><li><div>        printf( ' enctype=&quot;multipart/form-data&quot; encoding=&quot;multipart/form-data&quot; ' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check Field Color&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_field_color() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $this-&gt;has_field( 'color' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>            wp_enqueue_style( 'wp-color-picker' );&nbsp;</div></li><li><div>            wp_enqueue_script( 'wp-color-picker' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check Field Date&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_field_date() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $this-&gt;has_field( 'date' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>            // Enqueu JQuery UI, use proper version.&nbsp;</div></li><li><div>            $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>            wp_enqueue_style( 'at-jquery-ui-css', $plugin_path . '/js/jquery-ui/jquery-ui.css' );&nbsp;</div></li><li><div>            wp_enqueue_script( 'jquery-ui' );&nbsp;</div></li><li><div>            wp_enqueue_script( 'jquery-ui-datepicker' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check Field Time&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_field_time() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $this-&gt;has_field( 'time' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>            $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>            // Enqueu JQuery UI, use proper version.&nbsp;</div></li><li><div>            wp_enqueue_style( 'at-jquery-ui-css', $plugin_path . '/js/jquery-ui/jquery-ui.css' );&nbsp;</div></li><li><div>            wp_enqueue_script( 'jquery-ui' );&nbsp;</div></li><li><div>            wp_enqueue_script( 'at-timepicker', $plugin_path . '/js/jquery-ui/jquery-ui-timepicker-addon.min.js', array( 'jquery-ui-slider', 'jquery-ui-datepicker' ), false, true );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add Meta Box for multiple post types.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add( $postType ) {&nbsp;</div></li><li><div>        if( in_array( $postType, $this-&gt;_meta_box['pages'] ) ) {&nbsp;</div></li><li><div>            add_meta_box( $this-&gt;_meta_box['id'], $this-&gt;_meta_box['title'], array( $this, 'show' ), $postType, $this-&gt;_meta_box['context'], $this-&gt;_meta_box['priority'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Callback function to show fields in meta box.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show() {&nbsp;</div></li><li><div>        $this-&gt;inGroup = false;&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_nonce_field( basename( __FILE__ ), 'at_meta_box_nonce' );&nbsp;</div></li><li><div>        echo '&lt;table class=&quot;form-table&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>            $field['multiple'] = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>            $meta = get_post_meta( $post-&gt;ID, $field['id'], !$field['multiple'] );&nbsp;</div></li><li><div>            $meta = ( $meta !== '' ) ? $meta : @$field['std'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( !in_array( $field['type'], array( 'image', 'repeater', 'file' ) ) ) {&nbsp;</div></li><li><div>                $meta = is_array( $meta ) ? array_map( 'esc_attr', $meta ) : esc_attr( $meta );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $class = ( ( $field['class'] != '' ) ) ? ' class=&quot;' . $field['class'] . '-container&quot;' : '';&nbsp;</div></li><li><div>            if( $this-&gt;inGroup !== true ) {&nbsp;</div></li><li><div>                echo '&lt;tr' . $class . '&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( isset( $field['group'] ) && $field['group'] == 'start' ) {&nbsp;</div></li><li><div>                $this-&gt;inGroup = true;&nbsp;</div></li><li><div>                echo '&lt;td&gt;&lt;table class=&quot;form-table&quot;&gt;&lt;tr&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Call Separated methods for displaying each type of field.&nbsp;</div></li><li><div>            call_user_func( array( $this, 'show_field_' . $field['type'] ), $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( $this-&gt;inGroup === true ) {&nbsp;</div></li><li><div>                if( isset( $field['group'] ) && $field['group'] == 'end' ) {&nbsp;</div></li><li><div>                    echo '&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;';&nbsp;</div></li><li><div>                    $this-&gt;inGroup = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo '&lt;/table&gt;';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Repeater Fields.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_repeater( $field, $meta ) {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>        // Get Plugin Path&nbsp;</div></li><li><div>        $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $class = '';&nbsp;</div></li><li><div>        if( $field['sortable'] ) {&nbsp;</div></li><li><div>            $class = &quot; repeater-sortable&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo &quot;&lt;div class='at-repeat&quot; . $class . &quot;' id='{$field['id']}'&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $c = 0;&nbsp;</div></li><li><div>        $meta = get_post_meta( $post-&gt;ID, $field['id'], true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( count( $meta ) &gt; 0 && is_array( $meta ) ) {&nbsp;</div></li><li><div>            foreach( $meta as $me ) {&nbsp;</div></li><li><div>                //for labling toggles&nbsp;</div></li><li><div>                $mmm = isset( $me[$field['fields'][0]['id']] ) ? $me[$field['fields'][0]['id']] : &quot;&quot;;&nbsp;</div></li><li><div>                if( in_array( $field['fields'][0]['type'], array( 'image', 'file' ) ) ) {&nbsp;</div></li><li><div>                    $mmm = $c + 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                echo '&lt;div class=&quot;at-repater-block&quot;&gt;' . $mmm . '&lt;br/&gt;&lt;table class=&quot;repeater-table&quot; style=&quot;display: none;&quot;&gt;';&nbsp;</div></li><li><div>                if( $field['inline'] ) {&nbsp;</div></li><li><div>                    echo '&lt;tr class=&quot;at-inline&quot; VALIGN=&quot;top&quot;&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                foreach( $field['fields'] as $f ) {&nbsp;</div></li><li><div>                    //reset var $id for repeater&nbsp;</div></li><li><div>                    $id = '';&nbsp;</div></li><li><div>                    $id = $field['id'] . '[' . $c . '][' . $f['id'] . ']';&nbsp;</div></li><li><div>                    $m = isset( $me[$f['id']] ) ? $me[$f['id']] : '';&nbsp;</div></li><li><div>                    $m = ( $m !== '' ) ? $m : $f['std'];&nbsp;</div></li><li><div>                    if( 'image' != $f['type'] && $f['type'] != 'repeater' ) {&nbsp;</div></li><li><div>                        $m = is_array( $m ) ? array_map( 'esc_attr', $m ) : esc_attr( $m );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    //set new id for field in array format&nbsp;</div></li><li><div>                    $f['id'] = $id;&nbsp;</div></li><li><div>                    if( !$field['inline'] ) {&nbsp;</div></li><li><div>                        echo '&lt;tr&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    call_user_func( array( $this, 'show_field_' . $f['type'] ), $f, $m );&nbsp;</div></li><li><div>                    if( !$field['inline'] ) {&nbsp;</div></li><li><div>                        echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( $field['inline'] ) {&nbsp;</div></li><li><div>                    echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                echo '&lt;/table&gt;';&nbsp;</div></li><li><div>                if( $field['sortable'] ) {&nbsp;</div></li><li><div>                    echo '&lt;span class=&quot;re-control&quot;&gt;&lt;img src=&quot;' . $plugin_path . '/images/move.png&quot; alt=&quot;sort&quot; title=&quot;sort&quot; class=&quot;at_re_sort_handle&quot; /&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                echo '&nbsp;</div></li><li><div>    &lt;span class=&quot;re-control at-re-toggle&quot;&gt;&lt;img src=&quot;' . $plugin_path . '/images/edit.png&quot; alt=&quot;Edit&quot; title=&quot;Edit&quot;/&gt;&lt;/span&gt; &nbsp;</div></li><li><div>    &lt;span class=&quot;re-control&quot;&gt;&lt;img src=&quot;' . $plugin_path . '/images/remove.png&quot; alt=&quot;' . __( 'Remove', 'responsive-II' ) . '&quot; title=&quot;' . __( 'Remove', 'responsive-II' ) . '&quot; id=&quot;remove-' . $field['id'] . '&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>    &lt;span class=&quot;re-control-clear&quot;&gt;&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>                $c = $c + 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;img src=&quot;';&nbsp;</div></li><li><div>        if( $this-&gt;_Local_images ) {&nbsp;</div></li><li><div>            echo $plugin_path . '/images/add.png';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            echo 'http://i.imgur.com/w5Tuc.png';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo '&quot; alt=&quot;' . __( 'Add', 'responsive-II' ) . '&quot; title=&quot;' . __( 'Add', 'responsive-II' ) . '&quot; id=&quot;add-' . $field['id'] . '&quot;&gt;&lt;br/&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //create all fields once more for js function and catch with object buffer&nbsp;</div></li><li><div>        ob_start();&nbsp;</div></li><li><div>        echo '&lt;div class=&quot;at-repater-block&quot;&gt;&lt;table class=&quot;repeater-table&quot;&gt;';&nbsp;</div></li><li><div>        if( $field['inline'] ) {&nbsp;</div></li><li><div>            echo '&lt;tr class=&quot;at-inline&quot; VALIGN=&quot;top&quot;&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        foreach( $field['fields'] as $f ) {&nbsp;</div></li><li><div>            //reset var $id for repeater&nbsp;</div></li><li><div>            $id = '';&nbsp;</div></li><li><div>            $id = $field['id'] . '[CurrentCounter][' . $f['id'] . ']';&nbsp;</div></li><li><div>            $f['id'] = $id;&nbsp;</div></li><li><div>            if( !$field['inline'] ) {&nbsp;</div></li><li><div>                echo '&lt;tr&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if( $f['type'] != 'editor' ) {&nbsp;</div></li><li><div>                call_user_func( array( $this, 'show_field_' . $f['type'] ), $f, '' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                call_user_func( array( $this, 'show_field_' . $f['type'] ), $f, '', true );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if( !$field['inline'] ) {&nbsp;</div></li><li><div>                echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if( $field['inline'] ) {&nbsp;</div></li><li><div>            echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo '&lt;/table&gt;&lt;img src=&quot;' . $plugin_path . '/images/remove.png&quot; alt=&quot;' . __( 'Remove', 'responsive-II' ) . '&quot; title=&quot;' . __( 'Remove', 'responsive-II' ) . '&quot; id=&quot;remove-' . $field['id'] . '&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>        $counter = 'countadd_' . $field['id'];&nbsp;</div></li><li><div>        $js_code = ob_get_clean();&nbsp;</div></li><li><div>        $js_code = str_replace( &quot;\n&quot;, &quot;&quot;, $js_code );&nbsp;</div></li><li><div>        $js_code = str_replace( &quot;\r&quot;, &quot;&quot;, $js_code );&nbsp;</div></li><li><div>        $js_code = str_replace( &quot;'&quot;, &quot;\&quot;&quot;, $js_code );&nbsp;</div></li><li><div>        $js_code = str_replace( &quot;CurrentCounter&quot;, &quot;' + &quot; . $counter . &quot; + '&quot;, $js_code );&nbsp;</div></li><li><div>        echo '&lt;script&gt;&nbsp;</div></li><li><div>    jQuery(document).ready(function() {&nbsp;</div></li><li><div>      var ' . $counter . ' = ' . $c . ';&nbsp;</div></li><li><div>      jQuery(&quot;#add-' . $field['id'] . '&quot;).live(\'click\', function() {&nbsp;</div></li><li><div>        ' . $counter . ' = ' . $counter . ' + 1;&nbsp;</div></li><li><div>        jQuery(this).before(\'' . $js_code . '\');            &nbsp;</div></li><li><div>        update_repeater_fields();&nbsp;</div></li><li><div>      });&nbsp;</div></li><li><div>          jQuery(&quot;#remove-' . $field['id'] . '&quot;).live(\'click\', function() {&nbsp;</div></li><li><div>              jQuery(this).parent().parent().remove();&nbsp;</div></li><li><div>          });&nbsp;</div></li><li><div>      });&nbsp;</div></li><li><div>    &lt;/script&gt;';&nbsp;</div></li><li><div>        echo '&lt;br/&gt;&lt;style&gt;&nbsp;</div></li><li><div>.at_re_sort_highlight{min-height: 55px; background-color: #EEEEEE; margin: 2px;}&nbsp;</div></li><li><div>.re-control-clear{clear: both; display: block;}&nbsp;</div></li><li><div>.at_re_sort_handle{cursor: move;}&nbsp;</div></li><li><div>.re-control{float: right; padding: 5px;}    &nbsp;</div></li><li><div>.at-inline{line-height: 1 !important;}&nbsp;</div></li><li><div>.at-inline .at-field{border: 0px !important;}&nbsp;</div></li><li><div>.at-inline .at-label{margin: 0 0 1px !important;}&nbsp;</div></li><li><div>.at-inline .at-text{width: 70px;}&nbsp;</div></li><li><div>.at-inline .at-textarea{width: 100px; height: 75px;}&nbsp;</div></li><li><div>.at-repater-block{background-color: #FFFFFF;border: 1px solid;margin: 2px; min-height: 50px}&nbsp;</div></li><li><div>&lt;/style&gt;';&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Begin Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_begin( $field, $meta ) {&nbsp;</div></li><li><div>        echo &quot;&lt;td class='at-field'&quot; . ( ( $this-&gt;inGroup === true ) ? &quot; valign='top'&quot; : &quot;&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>        if( $field['name'] != '' || $field['name'] != false ) {&nbsp;</div></li><li><div>            echo &quot;&lt;div class='at-label'&gt;&quot;;&nbsp;</div></li><li><div>            echo &quot;&lt;label for='{$field['id']}'&gt;{$field['name']}&lt;/label&gt;&quot;;&nbsp;</div></li><li><div>            echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * End Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_end( $field, $meta = null, $group = false ) {&nbsp;</div></li><li><div>        //print description&nbsp;</div></li><li><div>        if( isset( $field['desc'] ) && $field['desc'] != '' ) {&nbsp;</div></li><li><div>            echo &quot;&lt;div class='desc-field'&gt;{$field['desc']}&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo &quot;&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field Text.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_text( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;input type='text' class='at-text&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' value='{$meta}' size='30' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}'&quot; : '' ) . &quot;/&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field number.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_number( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $step = ( isset( $field['step'] ) || $field['step'] != '1' ) ? &quot;step='&quot; . $field['step'] . &quot;' &quot; : '';&nbsp;</div></li><li><div>        $min = isset( $field['min'] ) ? &quot;min='&quot; . $field['min'] . &quot;' &quot; : '';&nbsp;</div></li><li><div>        $max = isset( $field['max'] ) ? &quot;max='&quot; . $field['max'] . &quot;' &quot; : '';&nbsp;</div></li><li><div>        echo &quot;&lt;input type='number' class='at-number&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' value='{$meta}' size='30' &quot; . $step . $min . $max . ( isset( $field['style'] ) ? &quot;style='{$field['style']}'&quot; : '' ) . &quot;/&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field hidden.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string|mixed $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 0.1.3&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_hidden( $field, $meta ) {&nbsp;</div></li><li><div>        //$this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;input type='hidden' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot;class='at-text&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' value='{$meta}'/&gt;&quot;;&nbsp;</div></li><li><div>        //$this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field Paragraph.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 0.1.3&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_paragraph( $field ) {&nbsp;</div></li><li><div>        //$this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo '&lt;p&gt;' . $field['value'] . '&lt;/p&gt;';&nbsp;</div></li><li><div>        //$this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field Textarea.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_textarea( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;textarea class='at-textarea large-text&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; cols='60' rows='10'&gt;{$meta}&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field Unfiltered Textarea.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_unfiltered_textarea( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;textarea class='at-textarea large-text&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; cols='60' rows='10'&gt;{$meta}&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Field Select.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_select( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>            $meta = (array)$meta;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-select&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}&quot; . ( $field['multiple'] ? &quot;[]' id='{$field['id']}' multiple='multiple'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>        foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>            echo &quot;&lt;option value='{$key}'&quot; . selected( in_array( $key, $meta ), true, false ) . &quot;&gt;{$value}&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Radio Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_radio( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>            $meta = (array)$meta;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>            echo &quot;&lt;input type='radio' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-radio&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' value='{$key}'&quot; . checked( in_array( $key, $meta ), true, false ) . &quot; /&gt; &lt;span class='at-radio-label'&gt;{$value}&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Checkbox Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_checkbox( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='rw-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}'&quot; . checked( !empty( $meta ), true, false ) . &quot; /&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show editor Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_editor( $field, $meta, $in_repeater = false ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $in_repeater ) {&nbsp;</div></li><li><div>            echo &quot;&lt;textarea class='at-editor theEditor large-text&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' cols='60' rows='10'&gt;{$meta}&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $default_settings = array( 'media_buttons' =&gt; false );&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            // Use new wp_editor() since WP 3.3&nbsp;</div></li><li><div>            $settings = ( isset( $field['settings'] ) && is_array( $field['settings'] ) ? $field['settings'] : $default_settings );&nbsp;</div></li><li><div>            $settings['editor_class'] = 'at-editor' . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' );&nbsp;</div></li><li><div>            $id = str_replace( &quot;_&quot;, &quot;&quot;, $this-&gt;stripNumeric( strtolower( $field['id'] ) ) );&nbsp;</div></li><li><div>            wp_editor( html_entity_decode( $meta ), $id, $settings );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show File Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_file( $field, $meta ) {&nbsp;</div></li><li><div>        wp_enqueue_media();&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $std = isset( $field['std'] ) ? $field['std'] : array( 'id' =&gt; '', 'url' =&gt; '' );&nbsp;</div></li><li><div>        $multiple = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>        $multiple = ( $multiple ) ? &quot;multiFile '&quot; : &quot;&quot;;&nbsp;</div></li><li><div>        $name = esc_attr( $field['id'] );&nbsp;</div></li><li><div>        $value = isset( $meta['id'] ) ? $meta : $std;&nbsp;</div></li><li><div>        $has_file = ( empty( $value['url'] ) ) ? false : true;&nbsp;</div></li><li><div>        $type = isset( $field['mime_type'] ) ? $field['mime_type'] : '';&nbsp;</div></li><li><div>        $ext = isset( $field['ext'] ) ? $field['ext'] : '';&nbsp;</div></li><li><div>        $type = ( is_array( $type ) ? implode( &quot;|&quot;, $type ) : $type );&nbsp;</div></li><li><div>        $ext = ( is_array( $ext ) ? implode( &quot;|&quot;, $ext ) : $ext );&nbsp;</div></li><li><div>        $id = $field['id'];&nbsp;</div></li><li><div>        $li = ( $has_file ) ? &quot;&lt;li&gt;&lt;a href='{$value['url']}' target='_blank'&gt;{$value['url']}&lt;/a&gt;&lt;/li&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo &quot;&lt;span class='simplePanelfilePreview'&gt;&lt;ul&gt;{$li}&lt;/ul&gt;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>        echo &quot;&lt;input type='hidden' name='{$name}[id]' value='{$value['id']}'/&gt;&quot;;&nbsp;</div></li><li><div>        echo &quot;&lt;input type='hidden' name='{$name}[url]' value='{$value['url']}'/&gt;&quot;;&nbsp;</div></li><li><div>        if( $has_file ) {&nbsp;</div></li><li><div>            echo &quot;&lt;input type='button' class='{$multiple} button simplePanelfileUploadclear' id='{$id}' value='Remove File' data-mime_type='{$type}' data-ext='{$ext}'/&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            echo &quot;&lt;input type='button' class='{$multiple} button simplePanelfileUpload' id='{$id}' value='Upload File' data-mime_type='{$type}' data-ext='{$ext}'/&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Image Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $field&nbsp;</div></li><li><div>     * @param array $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_image( $field, $meta ) {&nbsp;</div></li><li><div>        wp_enqueue_media();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $std = isset( $field['std'] ) ? $field['std'] : array( 'id' =&gt; '', 'url' =&gt; '' );&nbsp;</div></li><li><div>        $name = esc_attr( $field['id'] );&nbsp;</div></li><li><div>        $value = isset( $meta['id'] ) ? $meta : $std;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $value['url'] = isset( $meta['src'] ) ? $meta['src'] : $value['url']; //backwords capability&nbsp;</div></li><li><div>        $has_image = empty( $value['url'] ) ? false : true;&nbsp;</div></li><li><div>        $w = isset( $field['width'] ) ? $field['width'] : 'auto';&nbsp;</div></li><li><div>        $h = isset( $field['height'] ) ? $field['height'] : 'auto';&nbsp;</div></li><li><div>        $PreviewStyle = &quot;style='width: $w; height: $h;&quot; . ( ( !$has_image ) ? &quot;display: none;'&quot; : &quot;'&quot; );&nbsp;</div></li><li><div>        $id = $field['id'];&nbsp;</div></li><li><div>        $multiple = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>        $multiple = ( $multiple ) ? &quot;multiFile &quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo &quot;&lt;span class='simplePanelImagePreview'&gt;&lt;img {$PreviewStyle} src='{$value['url']}'&gt;&lt;br/&gt;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>        echo &quot;&lt;input type='hidden' name='{$name}[id]' value='{$value['id']}'/&gt;&quot;;&nbsp;</div></li><li><div>        echo &quot;&lt;input type='hidden' name='{$name}[url]' value='{$value['url']}'/&gt;&quot;;&nbsp;</div></li><li><div>        if( $has_image ) {&nbsp;</div></li><li><div>            echo &quot;&lt;input class='{$multiple} button  simplePanelimageUploadclear' id='{$id}' value='Remove Image' type='button'/&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            echo &quot;&lt;input class='{$multiple} button simplePanelimageUpload' id='{$id}' value='Upload Image' type='button'/&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Color Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_color( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( empty( $meta ) ) {&nbsp;</div></li><li><div>            $meta = '#';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo '&lt;div class=&quot;input-prepend ' . $field['class'] . '&quot;&gt;&lt;input class=&quot;of-color&quot; name=&quot;' . $field['id'] . '&quot; id=&quot;' . $field['id'] . '&quot; type=&quot;text&quot; value=&quot;' . $meta . '&quot; /&gt;';&nbsp;</div></li><li><div>        echo '&lt;div id=&quot;' . $field['id'] . '_picker'  . '&quot; class=&quot;add-on colorSelector&quot;&gt;&lt;div style=&quot;' . esc_attr( 'background-color:' . $meta ) . '&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Checkbox List Field&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_checkbox_list( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>            $meta = (array)$meta;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>            $html[] = &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot;  class='at-checkbox_list&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}[]' value='{$key}'&quot; . checked( in_array( $key, $meta ), true, false ) . &quot; /&gt; {$value}&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo implode( '&lt;br /&gt;', $html );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Date Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_date( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo &quot;&lt;input type='text'  &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-date&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' rel='{$field['format']}' value='{$meta}' size='30' /&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show time field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_time( $field, $meta ) {&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $ampm = ( $field['ampm'] ) ? 'true' : 'false';&nbsp;</div></li><li><div>        echo &quot;&lt;input type='text'  &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-time&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}' id='{$field['id']}' data-ampm='{$ampm}' rel='{$field['format']}' value='{$meta}' size='30' /&gt;&quot;;&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Posts field.&nbsp;</div></li><li><div>     * used creating a posts/pages/custom types checkboxlist or a select dropdown&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_posts( $field, $meta ) {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>            $meta = (array)$meta;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $options = $field['options'];&nbsp;</div></li><li><div>        $posts = get_posts( $options['args'] );&nbsp;</div></li><li><div>        // checkbox_list&nbsp;</div></li><li><div>        if( 'checkbox_list' == $options['type'] ) {&nbsp;</div></li><li><div>            foreach( $posts as $p ) {&nbsp;</div></li><li><div>                echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-posts-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}[]' value='$p-&gt;ID'&quot; . checked( in_array( $p-&gt;ID, $meta ), true, false ) . &quot; /&gt; $p-&gt;post_title&lt;br/&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // select&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-posts-select&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}&quot; . ( $field['multiple'] ? &quot;[]' multiple='multiple' style='height:auto'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>            foreach( $posts as $p ) {&nbsp;</div></li><li><div>                echo &quot;&lt;option value='$p-&gt;ID'&quot; . selected( in_array( $p-&gt;ID, $meta ), true, false ) . &quot;&gt;$p-&gt;post_title&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Taxonomy field.&nbsp;</div></li><li><div>     * used creating a category/tags/custom taxonomy checkboxlist or a select dropdown&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses get_terms()&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_taxonomy( $field, $meta ) {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>            $meta = (array)$meta;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $options = $field['options'];&nbsp;</div></li><li><div>        $terms = get_terms( $options['taxonomy'], $options['args'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // checkbox_list&nbsp;</div></li><li><div>        if( 'checkbox_list' == $options['type'] ) {&nbsp;</div></li><li><div>            foreach( $terms as $term ) {&nbsp;</div></li><li><div>                echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-tax-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}[]' value='$term-&gt;slug'&quot; . checked( in_array( $term-&gt;slug, $meta ), true, false ) . &quot; /&gt; $term-&gt;name&lt;br/&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // select&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='{$field['style']}' &quot; : '' ) . &quot; class='at-tax-select&quot; . ( isset( $field['class'] ) ? ' ' . $field['class'] : '' ) . &quot;' name='{$field['id']}&quot; . ( $field['multiple'] ? &quot;[]' multiple='multiple' style='height:auto'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>            foreach( $terms as $term ) {&nbsp;</div></li><li><div>                echo &quot;&lt;option value='$term-&gt;slug'&quot; . selected( in_array( $term-&gt;slug, $meta ), true, false ) . &quot;&gt;$term-&gt;name&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show conditinal Checkbox Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.9.9&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_cond( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        $checked = false;&nbsp;</div></li><li><div>        if( is_array( $meta ) && isset( $meta['enabled'] ) && $meta['enabled'] == 'on' ) {&nbsp;</div></li><li><div>            $checked = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo &quot;&lt;input type='checkbox' class='conditinal_control' name='{$field['id']}[enabled]' id='{$field['id']}'&quot; . checked( $checked, true, false ) . &quot; /&gt;&quot;;&nbsp;</div></li><li><div>        //start showing the fields&nbsp;</div></li><li><div>        $display = ( $checked ) ? '' : ' style=&quot;display: none;&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;div class=&quot;conditinal_container&quot;' . $display . '&gt;&lt;table&gt;';&nbsp;</div></li><li><div>        foreach( (array)$field['fields'] as $f ) {&nbsp;</div></li><li><div>            //reset var $id for cond&nbsp;</div></li><li><div>            $id = '';&nbsp;</div></li><li><div>            $id = $field['id'] . '[' . $f['id'] . ']';&nbsp;</div></li><li><div>            $m = '';&nbsp;</div></li><li><div>            $m = ( isset( $meta[$f['id']] ) ) ? $meta[$f['id']] : '';&nbsp;</div></li><li><div>            $m = ( $m !== '' ) ? $m : ( isset( $f['std'] ) ? $f['std'] : '' );&nbsp;</div></li><li><div>            if( 'image' != $f['type'] && $f['type'] != 'repeater' ) {&nbsp;</div></li><li><div>                $m = is_array( $m ) ? array_map( 'esc_attr', $m ) : esc_attr( $m );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //set new id for field in array format&nbsp;</div></li><li><div>            $f['id'] = $id;&nbsp;</div></li><li><div>            echo '&lt;tr&gt;';&nbsp;</div></li><li><div>            call_user_func( array( $this, 'show_field_' . $f['type'] ), $f, $m );&nbsp;</div></li><li><div>            echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo '&lt;/table&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show Help Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $meta&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function show_field_help( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>        echo '&lt;span class=&quot;help-message&quot;&gt;' . $field['help_text'] . '&lt;/span&gt;';&nbsp;</div></li><li><div>        $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Save Data from Metabox&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save( $post_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        global $post_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_type_object = get_post_type_object( $post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) // Check Autosave&nbsp;</div></li><li><div>            || ( !isset( $_POST['post_ID'] ) || $post_id != $_POST['post_ID'] ) // Check Revision&nbsp;</div></li><li><div>            || ( !in_array( $post_type, $this-&gt;_meta_box['pages'] ) ) // Check if current post type is supported.&nbsp;</div></li><li><div>            || ( !check_admin_referer( basename( __FILE__ ), 'at_meta_box_nonce' ) ) // Check nonce - Security&nbsp;</div></li><li><div>            || ( !current_user_can( $post_type_object-&gt;cap-&gt;edit_post, $post_id ) )&nbsp;</div></li><li><div> ) // Check permission&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            return $post_id;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $name = $field['id'];&nbsp;</div></li><li><div>            $type = $field['type'];&nbsp;</div></li><li><div>            $old = get_post_meta( $post_id, $name, !$field['multiple'] );&nbsp;</div></li><li><div>            $new = ( isset( $_POST[$name] ) ) ? $_POST[$name] : ( ( $field['multiple'] ) ? array() : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Validate meta value&nbsp;</div></li><li><div>            if( class_exists( 'at_Meta_Box_Validate' ) && method_exists( 'at_Meta_Box_Validate', $field['validate_func'] ) ) {&nbsp;</div></li><li><div>                $new = call_user_func( array( 'at_Meta_Box_Validate', $field['validate_func'] ), $new );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //skip on Paragraph field&nbsp;</div></li><li><div>            if( $type != &quot;paragraph&quot; ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Call defined method to sanitize meta value&nbsp;</div></li><li><div>                $sanitize_func = 'sanitize_field_' . $type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( method_exists( $this, $sanitize_func ) ) {&nbsp;</div></li><li><div>                    $new = call_user_func( array( $this, $sanitize_func ), $new, $old );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                // Call defined method to save meta value, if there's no methods, call common one.&nbsp;</div></li><li><div>                $save_func = 'save_field_' . $type;&nbsp;</div></li><li><div>                if( method_exists( $this, $save_func ) ) {&nbsp;</div></li><li><div>                    call_user_func( array( $this, $save_func ), $post_id, $field, $old, $new );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    $this-&gt;save_field( $post_id, $field, $old, $new );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } // End foreach&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Common function for saving fields.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $old&nbsp;</div></li><li><div>     * @param string|mixed $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_field( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $name = $field['id'];&nbsp;</div></li><li><div>        delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>        if( $new === '' || $new === array() ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if( $field['multiple'] ) {&nbsp;</div></li><li><div>            foreach( $new as $add_new ) {&nbsp;</div></li><li><div>                add_post_meta( $post_id, $name, $add_new, false );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * function for saving image field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $old&nbsp;</div></li><li><div>     * @param string|mixed $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.7&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_field_image( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>        $name = $field['id'];&nbsp;</div></li><li><div>        delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>        if( $new === '' || $new === array() || $new['id'] == '' || $new['url'] == '' ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>   * Save Editor Field.&nbsp;</div></li><li><div>   *&nbsp;</div></li><li><div>   * @param string $post_id &nbsp;</div></li><li><div>   * @param string $field &nbsp;</div></li><li><div>   * @param string $old &nbsp;</div></li><li><div>   * @param string $new &nbsp;</div></li><li><div>   * @since 1.0&nbsp;</div></li><li><div>   * @access public &nbsp;</div></li><li><div>   */&nbsp;</div></li><li><div>    public function save_field_editor( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>        $id = str_replace( &quot;_&quot;, &quot;&quot;, $this-&gt;stripNumeric( strtolower( $field['id'] ) ) );&nbsp;</div></li><li><div>        $new = ( isset( $_POST[$id] ) ) ? $_POST[$id] : ( ( $field['multiple'] ) ? array() : '' );&nbsp;</div></li><li><div>        $this-&gt;save_field( $post_id, $field, $old, $new );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Save repeater Fields.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string|mixed $old&nbsp;</div></li><li><div>     * @param string|mixed $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_field_repeater( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>        if( is_array( $new ) && count( $new ) &gt; 0 ) {&nbsp;</div></li><li><div>            foreach( $new as $n ) {&nbsp;</div></li><li><div>                foreach( $field['fields'] as $f ) {&nbsp;</div></li><li><div>                    $type = $f['type'];&nbsp;</div></li><li><div>                    switch( $type ) {&nbsp;</div></li><li><div>                        case 'editor':&nbsp;</div></li><li><div>                            $n[$f['id']] = wpautop( $n[$f['id']] );&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        default:&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( !$this-&gt;is_array_empty( $n ) ) {&nbsp;</div></li><li><div>                    $temp[] = $n;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if( isset( $temp ) && count( $temp ) &gt; 0 && !$this-&gt;is_array_empty( $temp ) ) {&nbsp;</div></li><li><div>                update_post_meta( $post_id, $field['id'], $temp );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                //  remove old meta if exists&nbsp;</div></li><li><div>                delete_post_meta( $post_id, $field['id'] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            //  remove old meta if exists&nbsp;</div></li><li><div>            delete_post_meta( $post_id, $field['id'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Save File Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $old&nbsp;</div></li><li><div>     * @param string $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_field_file( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $name = $field['id'];&nbsp;</div></li><li><div>        delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>        if( $new === '' || $new === array() || $new['id'] == '' || $new['url'] == '' ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Save repeater File Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $old&nbsp;</div></li><li><div>     * @param string $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @deprecated 3.0.7&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_field_file_repeater( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Save Checkbox Field.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $post_id&nbsp;</div></li><li><div>     * @param string $field&nbsp;</div></li><li><div>     * @param string $old&nbsp;</div></li><li><div>     * @param string $new&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function save_field_checkbox( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>        $new = $new ? &quot;1&quot; : &quot;0&quot;;&nbsp;</div></li><li><div>        update_post_meta( $post_id, $field['id'], $new );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add missed values for meta box.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_missed_values() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Default values for meta box&nbsp;</div></li><li><div>        $this-&gt;_meta_box = array_merge( array( 'context' =&gt; 'normal', 'priority' =&gt; 'high', 'pages' =&gt; array( 'post' ) ), (array)$this-&gt;_meta_box );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Default values for fields&nbsp;</div></li><li><div>        foreach( $this-&gt;_fields as &$field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $multiple = in_array( $field['type'], array( 'checkbox_list', 'file', 'image' ) );&nbsp;</div></li><li><div>            $std = $multiple ? array() : '';&nbsp;</div></li><li><div>            $format = 'date' == $field['type'] ? 'yy-mm-dd' : ( 'time' == $field['type'] ? 'hh:mm' : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $field = array_merge( array( 'multiple' =&gt; $multiple, 'std' =&gt; $std, 'desc' =&gt; '', 'format' =&gt; $format, 'validate_func' =&gt; '' ), $field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } // End foreach&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check if field with $type exists.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $type&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function has_field( $type ) {&nbsp;</div></li><li><div>        //faster search in single dimention array.&nbsp;</div></li><li><div>        if( count( $this-&gt;field_types ) &gt; 0 ) {&nbsp;</div></li><li><div>            return in_array( $type, $this-&gt;field_types );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //run once over all fields and store the types in a local array&nbsp;</div></li><li><div>        $temp = array();&nbsp;</div></li><li><div>        foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>            $temp[] = $field['type'];&nbsp;</div></li><li><div>            if( 'repeater' == $field['type'] || 'cond' == $field['type'] ) {&nbsp;</div></li><li><div>                foreach( (array)$field[&quot;fields&quot;] as $repeater_field ) {&nbsp;</div></li><li><div>                    $temp[] = $repeater_field[&quot;type&quot;];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //remove duplicates&nbsp;</div></li><li><div>        $this-&gt;field_types = array_unique( $temp );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //call this function one more time now that we have an array of field types&nbsp;</div></li><li><div>        return $this-&gt;has_field( $type );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check if current page is edit page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function is_edit_page() {&nbsp;</div></li><li><div>        global $pagenow;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return in_array( $pagenow, array( 'post.php', 'post-new.php' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Fixes the odd indexing of multiple file uploads.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Goes from the format:&nbsp;</div></li><li><div>     * $_FILES['field']['key']['index']&nbsp;</div></li><li><div>     * to&nbsp;</div></li><li><div>     * The More standard and appropriate:&nbsp;</div></li><li><div>     * $_FILES['field']['index']['key']&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $files&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function fix_file_array( &$files ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $files as $key =&gt; $list ) {&nbsp;</div></li><li><div>            foreach( $list as $index =&gt; $value ) {&nbsp;</div></li><li><div>                $output[$index][$key] = $value;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get proper JQuery UI version.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Used in order to not conflict with WP Admin Scripts.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function get_jqueryui_ver() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        global $wp_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( version_compare( $wp_version, '3.1', '&gt;=' ) ) {&nbsp;</div></li><li><div>            return '1.8.10';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return '1.7.3';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Field to meta box (generic function)&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.2&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addField( $id, $args ) {&nbsp;</div></li><li><div>        $new_field = array( 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Text Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addText( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'text', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Text Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Number Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addNumber( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'number', 'id' =&gt; $id, 'std' =&gt; '0', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Number Field', 'step' =&gt; '1', 'min' =&gt; '0' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Hidden Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 0.1.3&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addHidden( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'hidden', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Text Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Paragraph to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 0.1.3&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $value  paragraph html&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addParagraph( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'paragraph', 'id' =&gt; $id, 'value' =&gt; '' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Checkbox Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addCheckbox( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'checkbox', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Checkbox Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add CheckboxList Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $options (array)  array of key =&gt; value pairs for select options&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return : remember to call: $checkbox_list = get_post_meta(get_the_ID(), 'meta_name', false);&nbsp;</div></li><li><div>     *   which means the last param as false to get the values in an array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addCheckboxList( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'checkbox_list', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Checkbox List Field', 'options' =&gt; $options, 'multiple' =&gt; true, );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Textarea Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addTextarea( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'textarea', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Textarea Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Select Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $options (array)  array of key =&gt; value pairs for select options&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, (array) optional&nbsp;</div></li><li><div>     *    'multiple' =&gt; // select multiple values, optional. Default is false.&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addSelect( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'select', 'id' =&gt; $id, 'std' =&gt; array(), 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Select Field', 'multiple' =&gt; false, 'options' =&gt; $options );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Radio Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $options (array)  array of key =&gt; value pairs for radio options&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addRadio( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'radio', 'id' =&gt; $id, 'std' =&gt; array(), 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Radio Field', 'options' =&gt; $options );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Date Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     *    'format' =&gt; // date format, default yy-mm-dd. Optional. Default &quot;'d MM, yy'&quot;  See more formats here: http://goo.gl/Wcwxn&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addDate( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'date', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'format' =&gt; 'd MM, yy', 'name' =&gt; 'Date Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Time Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string- field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     *    'format' =&gt; // time format, default hh:mm. Optional. See more formats here: http://goo.gl/83woX&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addTime( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'time', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'format' =&gt; 'hh:mm', 'name' =&gt; 'Time Field', 'ampm' =&gt; false );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Color Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addColor( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'color', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'name' =&gt; 'ColorPicker Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Image Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addImage( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'image', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Image Field', 'std' =&gt; array( 'id' =&gt; '', 'url' =&gt; '' ), 'multiple' =&gt; false );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add File Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addFile( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'file', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'File Field', 'multiple' =&gt; false, 'std' =&gt; array( 'id' =&gt; '', 'url' =&gt; '' ) );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Editor Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional Default 'width: 300px; height: 400px'&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addEditor( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'editor', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; 'width: 300px; height: 400px', 'name' =&gt; 'Editor Editor Field' );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Taxonomy Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $options mixed|array options of taxonomy field&nbsp;</div></li><li><div>     *    'taxonomy' =&gt;    // taxonomy name can be category, post_tag or any custom taxonomy default is category&nbsp;</div></li><li><div>     *    'type' =&gt;  // how to show taxonomy? 'select' (default) or 'checkbox_list'&nbsp;</div></li><li><div>     *    'args' =&gt;  // arguments to query taxonomy, see http://goo.gl/uAANN default ('hide_empty' =&gt; false)&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addTaxonomy( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $temp = array(&nbsp;</div></li><li><div>            'args' =&gt; array( 'hide_empty' =&gt; 0 ), &nbsp;</div></li><li><div>            'tax' =&gt; 'category', &nbsp;</div></li><li><div>            'type' =&gt; 'select'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $options = array_merge( $temp, $options );&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'taxonomy', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Taxonomy Field', 'options' =&gt; $options );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add posts Field to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $options mixed|array options of taxonomy field&nbsp;</div></li><li><div>     *    'post_type' =&gt;    // post type name, 'post' (default) 'page' or any custom post type&nbsp;</div></li><li><div>     *    'type' =&gt;  // how to show posts? 'select' (default) or 'checkbox_list'&nbsp;</div></li><li><div>     *    'args' =&gt;  // arguments to query posts, see http://goo.gl/is0yK default ('posts_per_page' =&gt; -1)&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addPosts( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $post_type = isset( $options['post_type'] ) ? $options['post_type'] : ( isset( $args['post_type'] ) ? $args['post_type'] : 'post' );&nbsp;</div></li><li><div>        $type = isset( $options['type'] ) ? $options['type'] : 'select';&nbsp;</div></li><li><div>        $q = array( 'posts_per_page' =&gt; -1, 'post_type' =&gt; $post_type );&nbsp;</div></li><li><div>        if( isset( $options['args'] ) ) {&nbsp;</div></li><li><div>            $q = array_merge( $q, (array)$options['args'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $options = array( 'post_type' =&gt; $post_type, 'type' =&gt; $type, 'args' =&gt; $q );&nbsp;</div></li><li><div>        $new_field = array( 'type' =&gt; 'posts', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Posts Field', 'options' =&gt; $options, 'multiple' =&gt; false );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add repeater Field Block to meta box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the meta key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'style' =&gt;   // custom style for field, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     *    'fields' =&gt; //fields to repeater&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addRepeaterBlock( $id, $args ) {&nbsp;</div></li><li><div>        $new_field = array(&nbsp;</div></li><li><div>            'type' =&gt; 'repeater', &nbsp;</div></li><li><div>            'id' =&gt; $id, &nbsp;</div></li><li><div>            'name' =&gt; 'Reapeater Field', &nbsp;</div></li><li><div>            'fields' =&gt; array(), &nbsp;</div></li><li><div>            'inline' =&gt; false, &nbsp;</div></li><li><div>            'sortable' =&gt; false&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *  Add Checkbox conditional Field to Page&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 2.9.9&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $id string  field id, i.e. the key&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>     *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>     *    'std' =&gt; // default value, string optional&nbsp;</div></li><li><div>     *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>     *    'fields' =&gt; list of fields to show conditionally.&nbsp;</div></li><li><div>     * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addCondition( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>        $new_field = array(&nbsp;</div></li><li><div>            'type' =&gt; 'cond', &nbsp;</div></li><li><div>            'id' =&gt; $id, &nbsp;</div></li><li><div>            'std' =&gt; '', &nbsp;</div></li><li><div>            'desc' =&gt; '', &nbsp;</div></li><li><div>            'style' =&gt; '', &nbsp;</div></li><li><div>            'name' =&gt; 'Conditional Field', &nbsp;</div></li><li><div>            'fields' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>        if( false === $repeater ) {&nbsp;</div></li><li><div>            $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            return $new_field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Finish Declaration of Meta Box&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.0&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function Finish() {&nbsp;</div></li><li><div>        $this-&gt;add_missed_values();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Helper function to check for empty arrays&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 1.5&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $args mixed|array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function is_array_empty( $array ) {&nbsp;</div></li><li><div>        if( !is_array( $array ) ) {&nbsp;</div></li><li><div>            return true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $array as $a ) {&nbsp;</div></li><li><div>            if( is_array( $a ) ) {&nbsp;</div></li><li><div>                foreach( $a as $sub_a ) {&nbsp;</div></li><li><div>                    if( !empty( $sub_a ) && $sub_a != '' ) {&nbsp;</div></li><li><div>                        return false;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                if( !empty( $a ) && $a != '' ) {&nbsp;</div></li><li><div>                    return false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Validate_upload_file_type&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Checks if the uploaded file is of the expected format&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @author Ohad Raz &lt;admin@bainternet.info&gt;&nbsp;</div></li><li><div>     * @since 3.0.7&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @uses get_allowed_mime_types() to check allowed types&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $file uploaded file&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array file with error on mismatch&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function Validate_upload_file_type( $file ) {&nbsp;</div></li><li><div>        if( isset( $_POST['uploadeType'] ) && !empty( $_POST['uploadeType'] ) && isset( $_POST['uploadeType'] ) && $_POST['uploadeType'] == 'my_meta_box' ) {&nbsp;</div></li><li><div>            $allowed = explode( &quot;|&quot;, $_POST['uploadeType'] );&nbsp;</div></li><li><div>            $ext = substr( strrchr( $file['name'], '.' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( !in_array( $ext, (array)$allowed ) ) {&nbsp;</div></li><li><div>                $file['error'] = __( 'Sorry, you cannot upload this file type for this field.', 'responsive-II' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return $file;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach( get_allowed_mime_types() as $key =&gt; $value ) {&nbsp;</div></li><li><div>                if( strpos( $key, $ext ) || $key == $ext ) {&nbsp;</div></li><li><div>                    return $file;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $file['error'] = __( 'Sorry, you cannot upload this file type for this field.', 'responsive-II' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $file;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * function to sanitize field id&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @author Ohad Raz &lt;admin@bainternet.info&gt;&nbsp;</div></li><li><div>     * @since 3.0.7&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  string $str string to sanitize&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      sanitized string&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function idfy( $str ) {&nbsp;</div></li><li><div>        return str_replace( &quot; &quot;, &quot;_&quot;, $str );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * stripNumeric Strip number form string&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @author Ohad Raz &lt;admin@bainternet.info&gt;&nbsp;</div></li><li><div>     * @since 3.0.7&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  string $str&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string number less string&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function stripNumeric( $str ) {&nbsp;</div></li><li><div>        return trim( str_replace( range( 0, 9 ), '', $str ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * load_textdomain&nbsp;</div></li><li><div>     * @author Ohad Raz&nbsp;</div></li><li><div>     * @since 2.9.4&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function load_textdomain() {&nbsp;</div></li><li><div>        //In themes/plugins/mu-plugins directory&nbsp;</div></li><li><div>        load_textdomain( 'responsive-II', dirname( __FILE__ ) . '/lang/' . get_locale() . 'mo' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>} // End Class&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd> <a href="http://hookr.io/themes/responsive-ii/0.0.1/classes/at_meta_box/">0.0.1</a></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>theme</li><li><span></span>class</li><li><span></span>AT_Meta_Box</li><li><span></span>Responsive II</li><li><span></span>0.0.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>