<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="theme" data-version="1.1" data-slug="responsive-mobile" data-type="file" data-id="101097"><head xmlns="http://www.w3.org/1999/xhtml"><title> libraries-class-meta-box | file | Responsive Mobile | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, theme, responsive-mobile, 1.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=b6786b799de1755b6359ca230bb4ac5c' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/libraries-class-meta-box/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibraries-class-meta-box%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibraries-class-meta-box%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"theme-responsive-mobile-1.1-file-libraries-class-meta-box","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="libraries-class-meta-box" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to themes." href="http://hookr.io/themes/" class=""><span property="name">themes</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to responsive-mobile." href="http://hookr.io/themes/responsive-mobile/" class="plugin"><span property="name">responsive-mobile</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.1." href="http://hookr.io/themes/responsive-mobile/1.1/" class="H_VERSION"><span property="name">1.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/themes/responsive-mobile/1.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">libraries-class-meta-box</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="212"><a href="http://hookr.io/themes/responsive-mobile/1.1/all/" title="All">All <span class="count badge">212</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/themes/responsive-mobile/1.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="89"><a href="http://hookr.io/themes/responsive-mobile/1.1/hooks/" title="Hooks">Hooks <span class="count badge">89</span></a></li><li class="" data-id="action" data-count="64"><a href="http://hookr.io/themes/responsive-mobile/1.1/actions/" title="Actions">Actions <span class="count badge">64</span></a></li><li class="" data-id="filter" data-count="25"><a href="http://hookr.io/themes/responsive-mobile/1.1/filters/" title="Filters">Filters <span class="count badge">25</span></a></li><li class="" data-id="class" data-count="4"><a href="http://hookr.io/themes/responsive-mobile/1.1/classes/" title="Classes">Classes <span class="count badge">4</span></a></li><li class="" data-id="constant" data-count="1"><a href="http://hookr.io/themes/responsive-mobile/1.1/constants/" title="Constants">Constants <span class="count badge">1</span></a></li><li class="" data-id="function" data-count="118"><a href="http://hookr.io/themes/responsive-mobile/1.1/functions/" title="Functions">Functions <span class="count badge">118</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/themes/responsive-mobile/1.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class="active"><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/libraries/class-meta-box.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Custom Meta Box Class</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The Meta Box Class is used by including it in your plugin files and using its methods to</span>&nbsp;</div></li><li><div><span class="comment"> * create custom meta boxes for custom post types. It is meant to be very simple and</span>&nbsp;</div></li><li><div><span class="comment"> * straightforward. For name spacing purposes, All Types metabox ( meaning you can do anything with it )</span>&nbsp;</div></li><li><div><span class="comment"> * is used.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This class is derived from Ohad Raz (email: admin@bainternet.info) and Meta Box script by Rilwis&lt;rilwis@gmail.com&gt; version 3.2.</span>&nbsp;</div></li><li><div><span class="comment"> * which later was forked by Cory Crowley (email: cory.ivan@gmail.com) The purpose of this class is not to rewrite the script but to</span>&nbsp;</div></li><li><div><span class="comment"> * modify and change small things and adding a few field types that i needed to my personal preference.</span>&nbsp;</div></li><li><div><span class="comment"> * The original author did a great job in writing this class, so all props goes to him.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @category CyberChimps Framework</span>&nbsp;</div></li><li><div><span class="comment"> * @package  Framework</span>&nbsp;</div></li><li><div><span class="comment"> * @since    1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @author   CyberChimps</span>&nbsp;</div></li><li><div><span class="comment"> * @license  http://www.opensource.org/licenses/gpl-license.php GPL v3.0 (or later)</span>&nbsp;</div></li><li><div><span class="comment"> * @link     http://www.cyberchimps.com/</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// TODO CyberChimps have changed the markup of this class don't just update by copying over it</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if( !class_exists( 'AT_Meta_Box' ) ) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * All Types Meta Box class.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @package All Types Meta Box</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo Nothing.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  class AT_Meta_Box {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Holds meta box object</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @var object</span>&nbsp;</div></li><li><div><span class="comment">       * @access protected</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected $_meta_box;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Holds meta box fields.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @var array</span>&nbsp;</div></li><li><div><span class="comment">       * @access protected</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected $_prefix;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Holds Prefix for meta box fields.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @var array</span>&nbsp;</div></li><li><div><span class="comment">       * @access protected</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected $_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Use local images.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @var bool</span>&nbsp;</div></li><li><div><span class="comment">       * @access protected</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected $_Local_images;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * SelfPath to allow themes as well as plugins.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @var string</span>&nbsp;</div></li><li><div><span class="comment">       * @access protected</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.6</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected $SelfPath;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * $field_types  holds used field types</span>&nbsp;</div></li><li><div><span class="comment">       * @var array</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.7</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public $field_types = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * $inGroup  holds groupping boolean</span>&nbsp;</div></li><li><div><span class="comment">       * @var boolean</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.8</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public $inGroup = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Constructor</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $meta_box</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function __construct( $meta_box ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If we are not in admin area exit.</span>&nbsp;</div></li><li><div>          if( !is_admin() ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//load translation</span>&nbsp;</div></li><li><div>          add_filter( 'init', array( $this, 'load_textdomain' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Assign meta box values to local variables and add it's missed values.</span>&nbsp;</div></li><li><div>          $this-&gt;_meta_box = $meta_box;&nbsp;</div></li><li><div>          $this-&gt;_prefix = ( isset( $meta_box['prefix'] ) ) ? $meta_box['prefix'] : '';&nbsp;</div></li><li><div>          $this-&gt;_fields = $this-&gt;_meta_box['fields'];&nbsp;</div></li><li><div>          $this-&gt;_Local_images = ( isset( $meta_box['local_images'] ) ) ? true : false;&nbsp;</div></li><li><div>          $this-&gt;add_missed_values();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( isset( $meta_box['use_with_theme'] ) ) {&nbsp;</div></li><li><div>              if( $meta_box['use_with_theme'] === true ) {&nbsp;</div></li><li><div>                  $this-&gt;SelfPath = get_stylesheet_directory_uri() . '/libraries';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              elseif( $meta_box['use_with_theme'] === false ) {&nbsp;</div></li><li><div>                  $this-&gt;SelfPath = plugins_url( 'meta-box-class', plugin_basename( dirname( __FILE__ ) ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  $this-&gt;SelfPath = $meta_box['use_with_theme'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              $this-&gt;SelfPath = plugins_url( 'meta-box-class', plugin_basename( dirname( __FILE__ ) ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Add metaboxes</span>&nbsp;</div></li><li><div>          add_action( 'add_meta_boxes', array( $this, 'add' ) );&nbsp;</div></li><li><div>          <span class="comment">//add_action( 'wp_insert_post', array( $this, 'save' ) );</span>&nbsp;</div></li><li><div>          add_action( 'pre_post_update', array( $this, 'save' ) );&nbsp;</div></li><li><div>          <span class="comment">// Load common js, css files</span>&nbsp;</div></li><li><div>          <span class="comment">// Must enqueue for all pages as we need js for the media upload, too.</span>&nbsp;</div></li><li><div>          add_action( 'admin_print_styles', array( $this, 'load_scripts_styles' ) );&nbsp;</div></li><li><div>          <span class="comment">//limit File type at upload</span>&nbsp;</div></li><li><div>          add_filter( 'wp_handle_upload_prefilter', array( $this, 'Validate_upload_file_type' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Load all Javascript and CSS</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function load_scripts_styles() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Get Plugin Path</span>&nbsp;</div></li><li><div>          $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          <span class="comment">// Set template directory uri</span>&nbsp;</div></li><li><div>          $directory_uri = get_template_directory_uri();&nbsp;</div></li><li><div>          $metabox_uri = $directory_uri . '/libraries';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//only load styles and js when needed</span>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * since 1.8</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>          global $typenow;&nbsp;</div></li><li><div>          if( in_array( $typenow, $this-&gt;_meta_box['pages'] ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>              <span class="comment">// Enqueue Meta Box Style</span>&nbsp;</div></li><li><div>              wp_enqueue_style( 'at-meta-box', $metabox_uri . '/css/meta-box.css' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Enqueue Meta Box Scripts</span>&nbsp;</div></li><li><div>              wp_enqueue_script( 'at-meta-box', $metabox_uri . '/js/meta-box.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>              <span class="comment">// Enqueue Cyberchimps Scripts</span>&nbsp;</div></li><li><div>              wp_enqueue_script( 'meta-boxes-js', $metabox_uri . '/js/metabox-tabs.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>              &nbsp;</div></li><li><div>              <span class="comment">// Enqueue Media uploader for single images TODO look into removing this and use this classes image uploader that saves images as an array. Will need to change all elements to be</span>&nbsp;</div></li><li><div>              <span class="comment">// TODO able to work with this</span>&nbsp;</div></li><li><div>              wp_enqueue_script( 'cc-media-uploader-js', $metabox_uri . '/js/media-uploader-new.min.js', array( 'jquery' ), null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Make upload feature work event when custom post type doesn't support 'editor'</span>&nbsp;</div></li><li><div>              if( $this-&gt;has_field( 'image' ) || $this-&gt;has_field( 'file' ) ) {&nbsp;</div></li><li><div>                  wp_enqueue_script( 'media-upload' );&nbsp;</div></li><li><div>                  add_thickbox();&nbsp;</div></li><li><div>                  wp_enqueue_script( 'jquery-ui-core' );&nbsp;</div></li><li><div>                  wp_enqueue_script( 'jquery-ui-sortable' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              <span class="comment">// Check for special fields and add needed actions for them.</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">//this replaces the ugly check fields methods calls</span>&nbsp;</div></li><li><div>              foreach( array( 'upload', 'color', 'date', 'time', 'select' ) as $type ) {&nbsp;</div></li><li><div>                  call_user_func( array( $this, 'check_field_' . $type ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check the Field select, Add needed Actions</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.8</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function check_field_select() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Check if the field is an image or file. If not, return.</span></span>&nbsp;</div></li><li><div>          if( !$this-&gt;has_field( 'select' ) ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">// Enqueu JQuery UI, use proper version.</span></span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Enqueu JQuery select2 library, use proper version.</span>&nbsp;</div></li><li><div><span class="comment">//            wp_enqueue_style( 'at-multiselect-select2-css', $plugin_path . '/js/select2/select2.css', array(), null );</span>&nbsp;</div></li><li><div><span class="comment">//            wp_enqueue_script( 'at-multiselect-select2-js', $plugin_path . '/js/select2/select2.js', array( 'jquery' ), false, true );</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check the Field Upload, Add needed Actions</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function check_field_upload() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Check if the field is an image or file. If not, return.</span></span>&nbsp;</div></li><li><div>          if( !$this-&gt;has_field( 'image' ) && !$this-&gt;has_field( 'file' ) ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Add data encoding type for file uploading.</span>&nbsp;</div></li><li><div>          add_action( 'post_edit_form_tag', array( $this, 'add_enctype' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Add data encoding type for file uploading</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function add_enctype() {&nbsp;</div></li><li><div>          printf( ' enctype=&quot;multipart/form-data&quot; encoding=&quot;multipart/form-data&quot; ' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check Field Color</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function check_field_color() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( $this-&gt;has_field( 'color' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>              wp_enqueue_style( 'wp-color-picker' );&nbsp;</div></li><li><div>              wp_enqueue_script( 'wp-color-picker' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check Field Date</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function check_field_date() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( $this-&gt;has_field( 'date' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>              <span class="comment"><span class="comment"><span class="comment">// Enqueu JQuery UI, use proper version.</span></span></span>&nbsp;</div></li><li><div>              $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>              wp_enqueue_style( 'at-jquery-ui-css', $plugin_path . '/js/jquery-ui/jquery-ui.css' );&nbsp;</div></li><li><div>              wp_enqueue_script( 'jquery-ui' );&nbsp;</div></li><li><div>              wp_enqueue_script( 'jquery-ui-datepicker' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check Field Time</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function check_field_time() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( $this-&gt;has_field( 'time' ) && $this-&gt;is_edit_page() ) {&nbsp;</div></li><li><div>              $plugin_path = $this-&gt;SelfPath;&nbsp;</div></li><li><div>              <span class="comment"><span class="comment"><span class="comment">// Enqueu JQuery UI, use proper version.</span></span></span>&nbsp;</div></li><li><div>              wp_enqueue_style( 'at-jquery-ui-css', $plugin_path . '/js/jquery-ui/jquery-ui.css' );&nbsp;</div></li><li><div>              wp_enqueue_script( 'jquery-ui' );&nbsp;</div></li><li><div>              wp_enqueue_script( 'at-timepicker', $plugin_path . '/js/jquery-ui/jquery-ui-timepicker-addon.min.js', array( 'jquery-ui-slider', 'jquery-ui-datepicker' ), false, true );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Add Meta Box for multiple post types.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function add( $postType ) {&nbsp;</div></li><li><div>          if( in_array( $postType, $this-&gt;_meta_box['pages'] ) ) {&nbsp;</div></li><li><div>              add_meta_box( $this-&gt;_meta_box['id'], $this-&gt;_meta_box['title'], array( $this, 'show' ), $postType, $this-&gt;_meta_box['context'], $this-&gt;_meta_box['priority'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Callback function to show fields in meta box.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show() {&nbsp;</div></li><li><div>          $this-&gt;inGroup = false;&nbsp;</div></li><li><div>          global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_nonce_field( basename( __FILE__ ), 'at_meta_box_nonce' );&nbsp;</div></li><li><div>          echo '&lt;table class=&quot;form-table&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>              $field['multiple'] = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>              $meta = get_post_meta( $post-&gt;ID, $field['id'], !$field['multiple'] );&nbsp;</div></li><li><div>              $meta = ( $meta !== '' ) ? $meta : @$field['std'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( !in_array( $field['type'], array( 'image', 'repeater', 'file' ) ) ) {&nbsp;</div></li><li><div>                  $meta = is_array( $meta ) ? array_map( 'esc_attr', $meta ) : esc_attr( $meta );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $class = ( ( $field['class'] != '' ) ) ? ' class=&quot;' . esc_attr( $field['class'] ) . '-container&quot;' : '';&nbsp;</div></li><li><div>              if( $this-&gt;inGroup !== true ) {&nbsp;</div></li><li><div>                  echo '&lt;tr' . $class . '&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( isset( $field['group'] ) && $field['group'] == 'start' ) {&nbsp;</div></li><li><div>                  $this-&gt;inGroup = true;&nbsp;</div></li><li><div>                  echo '&lt;td&gt;&lt;table class=&quot;form-table&quot;&gt;&lt;tr&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Call Separated methods for displaying each type of field.</span>&nbsp;</div></li><li><div>              call_user_func( array( $this, 'show_field_' . $field['type'] ), $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( $this-&gt;inGroup === true ) {&nbsp;</div></li><li><div>                  if( isset( $field['group'] ) && $field['group'] == 'end' ) {&nbsp;</div></li><li><div>                      echo '&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;';&nbsp;</div></li><li><div>                      $this-&gt;inGroup = false;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo '&lt;/table&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Begin Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_begin( $field, $meta ) {&nbsp;</div></li><li><div>          echo &quot;&lt;td class='at-field'&quot; . ( ( $this-&gt;inGroup === true ) ? &quot; valign='top'&quot; : &quot;&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>          if( $field['name'] != '' || $field['name'] != false ) {&nbsp;</div></li><li><div>              echo &quot;&lt;div class='at-label'&gt;&quot;;&nbsp;</div></li><li><div>              echo '&lt;label for=&quot;' . esc_attr( $field['id'] ) . '&quot;&gt;' . esc_attr( $field['name'] ) .'&lt;/label&gt;';&nbsp;</div></li><li><div>              echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * End Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_end( $field, $meta = null, $group = false ) {&nbsp;</div></li><li><div>          <span class="comment">//print description</span>&nbsp;</div></li><li><div>          if( isset( $field['desc'] ) && $field['desc'] != '' ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;desc-field&quot;&gt;' . esc_attr( $field['desc'] ) . '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo &quot;&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field Text.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_text( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo '&lt;input type=&quot;text&quot; class=&quot;at-text' . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . '&quot; name=&quot;' . esc_attr( $field['id'] ) . '&quot; id=&quot;' . esc_attr( $field['id'] ) . '&quot; value=&quot;' . $meta . '&quot; size=&quot;30&quot; ' . ( isset( $field['style'] ) ? 'style=&quot;' . esc_attr( $field['style'] ) . '&quot;' : '' ) . '/&gt;';&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field number.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_number( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          $step = ( isset( $field['step'] ) || $field['step'] != '1' ) ? &quot;step='&quot; . $field['step'] . &quot;' &quot; : '';&nbsp;</div></li><li><div>          $min = isset( $field['min'] ) ? &quot;min='&quot; . esc_attr( $field['min'] ) . &quot;' &quot; : '';&nbsp;</div></li><li><div>          $max = isset( $field['max'] ) ? &quot;max='&quot; . esc_attr( $field['max'] ) . &quot;' &quot; : '';&nbsp;</div></li><li><div>          echo &quot;&lt;input type='number' class='at-number&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' value='&quot; . esc_attr( $meta ) . &quot;' size='30' &quot; . esc_attr( $step ) . esc_attr( $min ) . esc_attr( $max ) . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;'&quot; : '' ) . &quot;/&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field hidden.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|mixed $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 0.1.3</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_hidden( $field, $meta ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">//$this-&gt;show_field_begin( $field, $meta );</span></span>&nbsp;</div></li><li><div>          echo &quot;&lt;input type='hidden' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot;class='at-text&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' value='&quot; . esc_attr( $meta ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">//$this-&gt;show_field_end( $field, $meta );</span></span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field Paragraph.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 0.1.3</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_paragraph( $field ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">//$this-&gt;show_field_begin( $field, $meta );</span></span>&nbsp;</div></li><li><div>          echo '&lt;p&gt;' . esc_attr( $field['value'] ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">//$this-&gt;show_field_end( $field, $meta );</span></span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field Textarea.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_textarea( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo &quot;&lt;textarea class='at-textarea large-text&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; cols='60' rows='10'&gt;&quot; . esc_attr( $meta ) . &quot;&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field Unfiltered Textarea.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_unfiltered_textarea( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo &quot;&lt;textarea class='at-textarea large-text&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; cols='60' rows='10'&gt;&quot; . esc_attr( $meta ) . &quot;&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Field Select.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_select( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>              $meta = (array)$meta;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-select&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='{$field['id']}&quot; . ( $field['multiple'] ? &quot;[]' id='&quot; . esc_attr( $field['id'] ) . &quot;' multiple='multiple'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>          foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>              echo &quot;&lt;option value='&quot; . esc_attr( $key ) . &quot;'&quot; . selected( in_array( $key, $meta ), true, false ) . &quot;&gt;&quot; . esc_attr( $value ) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Radio Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_radio( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>              $meta = (array)$meta;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>              echo &quot;&lt;input type='radio' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-radio&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' value='&quot; . esc_attr( $key ) . &quot;'&quot; . checked( in_array( $key, $meta ), true, false ) . &quot; /&gt; &lt;span class='at-radio-label'&gt;&quot; . esc_attr( $value ) . &quot;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Checkbox Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_checkbox( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='rw-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;'&quot; . checked( !empty( $meta ), true, false ) . &quot; /&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show editor Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_editor( $field, $meta, $in_repeater = false ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( $in_repeater ) {&nbsp;</div></li><li><div>              echo &quot;&lt;textarea class='at-editor theEditor large-text&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' cols='60' rows='10'&gt;&quot; . esc_attr( $meta ) . &quot;&lt;/textarea&gt;&quot;;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $default_settings = array( 'media_buttons' =&gt; false );&nbsp;</div></li><li><div>              &nbsp;</div></li><li><div>              <span class="comment">// Use new wp_editor() since WP 3.3</span>&nbsp;</div></li><li><div>              $settings = ( isset( $field['settings'] ) && is_array( $field['settings'] ) ? $field['settings'] : $default_settings );&nbsp;</div></li><li><div>              $settings['editor_class'] = 'at-editor' . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' );&nbsp;</div></li><li><div>              $id = str_replace( &quot;_&quot;, &quot;&quot;, $this-&gt;stripNumeric( strtolower( $field['id'] ) ) );&nbsp;</div></li><li><div>              wp_editor( html_entity_decode( $meta ), $id, $settings );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show File Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_file( $field, $meta ) {&nbsp;</div></li><li><div>          wp_enqueue_media();&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $std = isset( $field['std'] ) ? $field['std'] : array( 'id' =&gt; '', 'url' =&gt; '' );&nbsp;</div></li><li><div>          $multiple = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>          $multiple = ( $multiple ) ? &quot;multiFile '&quot; : &quot;&quot;;&nbsp;</div></li><li><div>          $name = esc_attr( $field['id'] );&nbsp;</div></li><li><div>          $value = isset( $meta['id'] ) ? $meta : $std;&nbsp;</div></li><li><div>          $has_file = ( empty( $value['url'] ) ) ? false : true;&nbsp;</div></li><li><div>          $type = isset( $field['mime_type'] ) ? $field['mime_type'] : '';&nbsp;</div></li><li><div>          $ext = isset( $field['ext'] ) ? $field['ext'] : '';&nbsp;</div></li><li><div>          $type = ( is_array( $type ) ? implode( &quot;|&quot;, $type ) : $type );&nbsp;</div></li><li><div>          $ext = ( is_array( $ext ) ? implode( &quot;|&quot;, $ext ) : $ext );&nbsp;</div></li><li><div>          $id = $field['id'];&nbsp;</div></li><li><div>          $li = ( $has_file ) ? &quot;&lt;li&gt;&lt;a href='{$value['url']}' target='_blank'&gt;{$value['url']}&lt;/a&gt;&lt;/li&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo &quot;&lt;span class='simplePanelfilePreview'&gt;&lt;ul&gt;{$li}&lt;/ul&gt;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>          echo &quot;&lt;input type='hidden' name='&quot; . esc_attr( $name ) . &quot;[id]' value='&quot; . esc_attr( $value['id'] ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          echo &quot;&lt;input type='hidden' name='&quot; . esc_url( $name ) . &quot;[url]' value='&quot; . esc_url( $value['url'] ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          if( $has_file ) {&nbsp;</div></li><li><div>              echo &quot;&lt;input type='button' class='&quot; . esc_attr( $multiple ) . &quot; button simplePanelfileUploadclear' id='&quot; . esc_attr( $id ) . &quot;' value='Remove File' data-mime_type='&quot; . esc_attr( $type ) . &quot;' data-ext='&quot; . esc_attr( $ext ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              echo &quot;&lt;input type='button' class='&quot; . esc_attr( $multiple ) . &quot; button simplePanelfileUpload' id='&quot; . esc_attr( $id ) . &quot;' value='Upload File' data-mime_type='&quot; . esc_attr( $type ) . &quot;' data-ext='&quot; . esc_attr( $ext ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Image Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_image( $field, $meta ) {&nbsp;</div></li><li><div>          wp_enqueue_media();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $std = isset( $field['std'] ) ? $field['std'] : array( 'id' =&gt; '', 'url' =&gt; '' );&nbsp;</div></li><li><div>          $name = esc_attr( $field['id'] );&nbsp;</div></li><li><div>          $value = isset( $meta['id'] ) ? $meta : $std;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $value['url'] = isset( $meta['src'] ) ? $meta['src'] : $value['url']; <span class="comment">//backwords capability</span>&nbsp;</div></li><li><div>          $has_image = empty( $value['url'] ) ? false : true;&nbsp;</div></li><li><div>          $w = isset( $field['width'] ) ? $field['width'] : 'auto';&nbsp;</div></li><li><div>          $h = isset( $field['height'] ) ? $field['height'] : 'auto';&nbsp;</div></li><li><div>          $PreviewStyle = &quot;style='width: $w; height: $h;&quot; . ( ( !$has_image ) ? &quot;display: none;'&quot; : &quot;'&quot; );&nbsp;</div></li><li><div>          $id = $field['id'];&nbsp;</div></li><li><div>          $multiple = isset( $field['multiple'] ) ? $field['multiple'] : false;&nbsp;</div></li><li><div>          $multiple = ( $multiple ) ? &quot;multiFile &quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo &quot;&lt;span class='simplePanelImagePreview'&gt;&lt;img {$PreviewStyle} src='{$value['url']}'&gt;&lt;br/&gt;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>          echo &quot;&lt;input type='hidden' name='&quot; . esc_attr( $name ) . &quot;[id]' value='&quot; . esc_attr( $value['id'] ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          echo &quot;&lt;input type='hidden' name='&quot; . esc_url( $name ) . &quot;[url]' value='&quot; . esc_url( $value['url'] ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>          if( $has_image ) {&nbsp;</div></li><li><div>              echo &quot;&lt;input class='&quot; . esc_attr( $multiple ) . &quot; button  simplePanelimageUploadclear' id='&quot; . esc_url( $id ) . &quot;' value='Remove Image' type='button'/&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              echo &quot;&lt;input class='&quot; . esc_attr( $multiple ) . &quot; button simplePanelimageUpload' id='&quot; . esc_url( $id ) . &quot;' value='Upload Image' type='button'/&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Color Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_color( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( empty( $meta ) ) {&nbsp;</div></li><li><div>              $meta = '#';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;input-prepend ' . esc_attr( $field['class'] ) . '&quot;&gt;&lt;input class=&quot;of-color&quot; name=&quot;' . esc_attr( $field['id'] ) . '&quot; id=&quot;' . esc_attr( $field['id'] ) . '&quot; type=&quot;text&quot; value=&quot;' . $meta . '&quot; /&gt;';&nbsp;</div></li><li><div>          echo '&lt;div id=&quot;' . esc_attr( $field['id'] ) . '_picker'  . '&quot; class=&quot;add-on colorSelector&quot;&gt;&lt;div style=&quot;background-color:' . esc_attr( $meta ) . '&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Checkbox List Field</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_checkbox_list( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>              $meta = (array)$meta;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $html = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $field['options'] as $key =&gt; $value ) {&nbsp;</div></li><li><div>              $html[] = &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot;  class='at-checkbox_list&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;[]' value='&quot; . esc_attr( $key ) . &quot;'&quot; . checked( in_array( $key, $meta ), true, false ) . &quot; /&gt; &quot; . esc_attr( $value );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo implode( '&lt;br /&gt;', $html );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Date Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_date( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo &quot;&lt;input type='text'  &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-date&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' rel='&quot; . esc_attr( $field['format'] ) . &quot;' value='&quot; . esc_attr( $meta ) . &quot;' size='30' /&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show time field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_time( $field, $meta ) {&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          $ampm = ( $field['ampm'] ) ? 'true' : 'false';&nbsp;</div></li><li><div>          echo &quot;&lt;input type='text'  &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-time&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;' id='&quot; . esc_attr( $field['id'] ) . &quot;' data-ampm='{$ampm}' rel='&quot; . esc_attr( $field['format'] ) . &quot;' value='&quot; . esc_attr( $meta ) . &quot;' size='30' /&gt;&quot;;&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Posts field.</span>&nbsp;</div></li><li><div><span class="comment">       * used creating a posts/pages/custom types checkboxlist or a select dropdown</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_posts( $field, $meta ) {&nbsp;</div></li><li><div>          global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>              $meta = (array)$meta;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          $options = $field['options'];&nbsp;</div></li><li><div>          $posts = get_posts( $options['args'] );&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// checkbox_list</span></span>&nbsp;</div></li><li><div>          if( 'checkbox_list' == $options['type'] ) {&nbsp;</div></li><li><div>              foreach( $posts as $p ) {&nbsp;</div></li><li><div>                  echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-posts-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;[]' value='$p-&gt;ID'&quot; . checked( in_array( $p-&gt;ID, $meta ), true, false ) . &quot; /&gt; $p-&gt;post_title&lt;br/&gt;&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// select</span></span>&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-posts-select&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . ( $field['multiple'] ? &quot;[]' multiple='multiple' style='height:auto'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>              foreach( $posts as $p ) {&nbsp;</div></li><li><div>                  echo &quot;&lt;option value='&quot; . esc_attr( $p-&gt;ID ) . &quot;'&quot; . selected( in_array( $p-&gt;ID, $meta ), true, false ) . &quot;&gt;$p-&gt;post_title&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Taxonomy field.</span>&nbsp;</div></li><li><div><span class="comment">       * used creating a category/tags/custom taxonomy checkboxlist or a select dropdown</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @uses get_terms()</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_taxonomy( $field, $meta ) {&nbsp;</div></li><li><div>          global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !is_array( $meta ) ) {&nbsp;</div></li><li><div>              $meta = (array)$meta;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          $options = $field['options'];&nbsp;</div></li><li><div>          $terms = get_terms( $options['taxonomy'], $options['args'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// checkbox_list</span></span>&nbsp;</div></li><li><div>          if( 'checkbox_list' == $options['type'] ) {&nbsp;</div></li><li><div>              foreach( $terms as $term ) {&nbsp;</div></li><li><div>                  echo &quot;&lt;input type='checkbox' &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-tax-checkbox&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='&quot; . esc_attr( $field['id'] ) . &quot;[]' value='$term-&gt;slug'&quot; . checked( in_array( $term-&gt;slug, $meta ), true, false ) . &quot; /&gt; $term-&gt;name&lt;br/&gt;&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// select</span></span>&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              echo &quot;&lt;select &quot; . ( isset( $field['style'] ) ? &quot;style='&quot; . esc_attr( $field['style'] ) . &quot;' &quot; : '' ) . &quot; class='at-tax-select&quot; . ( isset( $field['class'] ) ? ' ' . esc_attr( $field['class'] ) : '' ) . &quot;' name='{$field['id']}&quot; . ( $field['multiple'] ? &quot;[]' multiple='multiple' style='height:auto'&quot; : &quot;'&quot; ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>              foreach( $terms as $term ) {&nbsp;</div></li><li><div>                  echo &quot;&lt;option value='$term-&gt;slug'&quot; . selected( in_array( $term-&gt;slug, $meta ), true, false ) . &quot;&gt;$term-&gt;name&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              echo &quot;&lt;/select&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show conditinal Checkbox Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.9</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_cond( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          $checked = false;&nbsp;</div></li><li><div>          if( is_array( $meta ) && isset( $meta['enabled'] ) && $meta['enabled'] == 'on' ) {&nbsp;</div></li><li><div>              $checked = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo &quot;&lt;input type='checkbox' class='conditinal_control' name='{$field['id']}[enabled]' id='&quot; . esc_attr( $field['id'] ) . &quot;'&quot; . checked( $checked, true, false ) . &quot; /&gt;&quot;;&nbsp;</div></li><li><div>          <span class="comment">//start showing the fields</span>&nbsp;</div></li><li><div>          $display = ( $checked ) ? '' : ' style=&quot;display: none;&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;conditinal_container&quot;' . $display . '&gt;&lt;table&gt;';&nbsp;</div></li><li><div>          foreach( (array)$field['fields'] as $f ) {&nbsp;</div></li><li><div>              <span class="comment">//reset var $id for cond</span>&nbsp;</div></li><li><div>              $id = '';&nbsp;</div></li><li><div>              $id = $field['id'] . '[' . $f['id'] . ']';&nbsp;</div></li><li><div>              $m = '';&nbsp;</div></li><li><div>              $m = ( isset( $meta[$f['id']] ) ) ? $meta[$f['id']] : '';&nbsp;</div></li><li><div>              $m = ( $m !== '' ) ? $m : ( isset( $f['std'] ) ? $f['std'] : '' );&nbsp;</div></li><li><div>              if( 'image' != $f['type'] && $f['type'] != 'repeater' ) {&nbsp;</div></li><li><div>                  $m = is_array( $m ) ? array_map( 'esc_attr', $m ) : esc_attr( $m );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              <span class="comment">//set new id for field in array format</span>&nbsp;</div></li><li><div>              $f['id'] = $id;&nbsp;</div></li><li><div>              echo '&lt;tr&gt;';&nbsp;</div></li><li><div>              call_user_func( array( $this, 'show_field_' . $f['type'] ), $f, $m );&nbsp;</div></li><li><div>              echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo '&lt;/table&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Show Help Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $meta</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function show_field_help( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>          echo '&lt;span class=&quot;help-message&quot;&gt;' . $field['help_text'] . '&lt;/span&gt;';&nbsp;</div></li><li><div>          $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Save Data from Metabox</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save( $post_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          global $post_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $post_type_object = get_post_type_object( $post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) <span class="comment">// Check Autosave</span>&nbsp;</div></li><li><div>              || ( !isset( $_POST['post_ID'] ) || $post_id != $_POST['post_ID'] ) <span class="comment">// Check Revision</span>&nbsp;</div></li><li><div>              || ( !in_array( $post_type, $this-&gt;_meta_box['pages'] ) ) <span class="comment">// Check if current post type is supported.</span>&nbsp;</div></li><li><div>              || ( !check_admin_referer( basename( __FILE__ ), 'at_meta_box_nonce' ) ) <span class="comment">// Check nonce - Security</span>&nbsp;</div></li><li><div>              || ( !current_user_can( $post_type_object-&gt;cap-&gt;edit_post, $post_id ) )&nbsp;</div></li><li><div> ) <span class="comment">// Check permission</span>&nbsp;</div></li><li><div>          {&nbsp;</div></li><li><div>              return $post_id;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $name = $field['id'];&nbsp;</div></li><li><div>              $type = $field['type'];&nbsp;</div></li><li><div>              $old = get_post_meta( $post_id, $name, !$field['multiple'] );&nbsp;</div></li><li><div>              $new = ( isset( $_POST[$name] ) ) ? $_POST[$name] : ( ( $field['multiple'] ) ? array() : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Validate meta value</span>&nbsp;</div></li><li><div>              if( class_exists( 'at_Meta_Box_Validate' ) && method_exists( 'at_Meta_Box_Validate', $field['validate_func'] ) ) {&nbsp;</div></li><li><div>                  $new = call_user_func( array( 'at_Meta_Box_Validate', $field['validate_func'] ), $new );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">//skip on Paragraph field</span>&nbsp;</div></li><li><div>              if( $type != &quot;paragraph&quot; ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Call defined method to sanitize meta value</span>&nbsp;</div></li><li><div>                  $sanitize_func = 'sanitize_field_' . $type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if( method_exists( $this, $sanitize_func ) ) {&nbsp;</div></li><li><div>                      $new = call_user_func( array( $this, $sanitize_func ), $new, $old );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  &nbsp;</div></li><li><div>                  <span class="comment">// Call defined method to save meta value, if there's no methods, call common one.</span>&nbsp;</div></li><li><div>                  $save_func = 'save_field_' . $type;&nbsp;</div></li><li><div>                  if( method_exists( $this, $save_func ) ) {&nbsp;</div></li><li><div>                      call_user_func( array( $this, $save_func ), $post_id, $field, $old, $new );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  else {&nbsp;</div></li><li><div>                      $this-&gt;save_field( $post_id, $field, $old, $new );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          } <span class="comment"><span class="comment">// End foreach</span></span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Common function for saving fields.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|mixed $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save_field( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $name = $field['id'];&nbsp;</div></li><li><div>          delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>          if( $new === '' || $new === array() ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if( $field['multiple'] ) {&nbsp;</div></li><li><div>              foreach( $new as $add_new ) {&nbsp;</div></li><li><div>                  add_post_meta( $post_id, $name, $add_new, false );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * function for saving image field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|mixed $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.7</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save_field_image( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>          $name = $field['id'];&nbsp;</div></li><li><div>          delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>          if( $new === '' || $new === array() || $new['id'] == '' || $new['url'] == '' ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Save Editor Field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $post_id </span>&nbsp;</div></li><li><div><span class="comment"> * @param string $field </span>&nbsp;</div></li><li><div><span class="comment"> * @param string $old </span>&nbsp;</div></li><li><div><span class="comment"> * @param string $new </span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access public </span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>      public function save_field_editor( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>          $id = str_replace( &quot;_&quot;, &quot;&quot;, $this-&gt;stripNumeric( strtolower( $field['id'] ) ) );&nbsp;</div></li><li><div>          $new = ( isset( $_POST[$id] ) ) ? $_POST[$id] : ( ( $field['multiple'] ) ? array() : '' );&nbsp;</div></li><li><div>          $this-&gt;save_field( $post_id, $field, $old, $new );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Save repeater Fields.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|mixed $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|mixed $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save_field_repeater( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>          if( is_array( $new ) && count( $new ) &gt; 0 ) {&nbsp;</div></li><li><div>              foreach( $new as $n ) {&nbsp;</div></li><li><div>                  foreach( $field['fields'] as $f ) {&nbsp;</div></li><li><div>                      $type = $f['type'];&nbsp;</div></li><li><div>                      switch( $type ) {&nbsp;</div></li><li><div>                          case 'editor':&nbsp;</div></li><li><div>                              $n[$f['id']] = wpautop( $n[$f['id']] );&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                          default:&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  if( !$this-&gt;is_array_empty( $n ) ) {&nbsp;</div></li><li><div>                      $temp[] = $n;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if( isset( $temp ) && count( $temp ) &gt; 0 && !$this-&gt;is_array_empty( $temp ) ) {&nbsp;</div></li><li><div>                  update_post_meta( $post_id, $field['id'], $temp );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">//  remove old meta if exists</span></span>&nbsp;</div></li><li><div>                  delete_post_meta( $post_id, $field['id'] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">//  remove old meta if exists</span></span>&nbsp;</div></li><li><div>              delete_post_meta( $post_id, $field['id'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Save File Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save_field_file( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $name = $field['id'];&nbsp;</div></li><li><div>          delete_post_meta( $post_id, $name );&nbsp;</div></li><li><div>          if( $new === '' || $new === array() || $new['id'] == '' || $new['url'] == '' ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          update_post_meta( $post_id, $name, $new );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Save repeater File Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       * @deprecated 3.0.7</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function save_field_file_repeater( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Save Checkbox Field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $post_id</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $old</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $new</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function save_field_checkbox( $post_id, $field, $old, $new ) {&nbsp;</div></li><li><div>          $new = $new ? &quot;1&quot; : &quot;0&quot;;&nbsp;</div></li><li><div>          update_post_meta( $post_id, $field['id'], $new );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Add missed values for meta box.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function add_missed_values() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Default values for meta box</span>&nbsp;</div></li><li><div>          $this-&gt;_meta_box = array_merge( array( 'context' =&gt; 'normal', 'priority' =&gt; 'high', 'pages' =&gt; array( 'post' ) ), (array)$this-&gt;_meta_box );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Default values for fields</span>&nbsp;</div></li><li><div>          foreach( $this-&gt;_fields as &$field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $multiple = in_array( $field['type'], array( 'checkbox_list', 'file', 'image' ) );&nbsp;</div></li><li><div>              $std = $multiple ? array() : '';&nbsp;</div></li><li><div>              $format = 'date' == $field['type'] ? 'yy-mm-dd' : ( 'time' == $field['type'] ? 'hh:mm' : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $field = array_merge( array( 'multiple' =&gt; $multiple, 'std' =&gt; $std, 'desc' =&gt; '', 'format' =&gt; $format, 'validate_func' =&gt; '' ), $field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          } <span class="comment"><span class="comment">// End foreach</span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check if field with $type exists.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $type</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function has_field( $type ) {&nbsp;</div></li><li><div>          <span class="comment">//faster search in single dimention array.</span>&nbsp;</div></li><li><div>          if( count( $this-&gt;field_types ) &gt; 0 ) {&nbsp;</div></li><li><div>              return in_array( $type, $this-&gt;field_types );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//run once over all fields and store the types in a local array</span>&nbsp;</div></li><li><div>          $temp = array();&nbsp;</div></li><li><div>          foreach( $this-&gt;_fields as $field ) {&nbsp;</div></li><li><div>              $temp[] = $field['type'];&nbsp;</div></li><li><div>              if( 'repeater' == $field['type'] || 'cond' == $field['type'] ) {&nbsp;</div></li><li><div>                  foreach( (array)$field[&quot;fields&quot;] as $repeater_field ) {&nbsp;</div></li><li><div>                      $temp[] = $repeater_field[&quot;type&quot;];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//remove duplicates</span>&nbsp;</div></li><li><div>          $this-&gt;field_types = array_unique( $temp );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//call this function one more time now that we have an array of field types</span>&nbsp;</div></li><li><div>          return $this-&gt;has_field( $type );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check if current page is edit page.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function is_edit_page() {&nbsp;</div></li><li><div>          global $pagenow;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return in_array( $pagenow, array( 'post.php', 'post-new.php' ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Fixes the odd indexing of multiple file uploads.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * Goes from the format:</span>&nbsp;</div></li><li><div><span class="comment">       * $_FILES['field']['key']['index']</span>&nbsp;</div></li><li><div><span class="comment">       * to</span>&nbsp;</div></li><li><div><span class="comment">       * The More standard and appropriate:</span>&nbsp;</div></li><li><div><span class="comment">       * $_FILES['field']['index']['key']</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $files</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function fix_file_array( &$files ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $files as $key =&gt; $list ) {&nbsp;</div></li><li><div>              foreach( $list as $index =&gt; $value ) {&nbsp;</div></li><li><div>                  $output[$index][$key] = $value;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Get proper JQuery UI version.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * Used in order to not conflict with WP Admin Scripts.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function get_jqueryui_ver() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          global $wp_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( version_compare( $wp_version, '3.1', '&gt;=' ) ) {&nbsp;</div></li><li><div>              return '1.8.10';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return '1.7.3';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Field to meta box (generic function)</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addField( $id, $args ) {&nbsp;</div></li><li><div>          $new_field = array( 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Text Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addText( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'text', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Text Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Number Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addNumber( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'number', 'id' =&gt; $id, 'std' =&gt; '0', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Number Field', 'step' =&gt; '1', 'min' =&gt; '0' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Hidden Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 0.1.3</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addHidden( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'hidden', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Text Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Paragraph to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 0.1.3</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $value  paragraph html</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addParagraph( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'paragraph', 'id' =&gt; $id, 'value' =&gt; '' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Checkbox Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addCheckbox( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'checkbox', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Checkbox Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add CheckboxList Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $options (array)  array of key =&gt; value pairs for select options</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return : remember to call: $checkbox_list = get_post_meta(get_the_ID(), 'meta_name', false);</span>&nbsp;</div></li><li><div><span class="comment">       *   which means the last param as false to get the values in an array</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addCheckboxList( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'checkbox_list', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Checkbox List Field', 'options' =&gt; $options, 'multiple' =&gt; true, );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Textarea Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addTextarea( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'textarea', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Textarea Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      /**&nbsp;</div></li><li><div>       *  Add Select Field to meta box&nbsp;</div></li><li><div>       * @author Ohad Raz&nbsp;</div></li><li><div>       * @since 1.0&nbsp;</div></li><li><div>       * @access public&nbsp;</div></li><li><div>       *&nbsp;</div></li><li><div>       * @param $id string field id, i.e. the meta key&nbsp;</div></li><li><div>       * @param $options (array)  array of key =&gt; value pairs for select options&nbsp;</div></li><li><div>       * @param $args mixed|array&nbsp;</div></li><li><div>       *    'name' =&gt; // field name/label string optional&nbsp;</div></li><li><div>       *    'desc' =&gt; // field description, string optional&nbsp;</div></li><li><div>       *    'std' =&gt; // default value, (array) optional&nbsp;</div></li><li><div>       *    'multiple' =&gt; <span class="comment"><span class="comment">// select</span></span> multiple values, optional. Default is false.&nbsp;</div></li><li><div>       *    'validate_func' =&gt; // validate function, string optional&nbsp;</div></li><li><div>       * @param $repeater bool  is this a field inside a repeatr? true|false(default)&nbsp;</div></li><li><div>       */&nbsp;</div></li><li><div>      public function addSelect( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'select', 'id' =&gt; $id, 'std' =&gt; array(), 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Select Field', 'multiple' =&gt; false, 'options' =&gt; $options );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Radio Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $options (array)  array of key =&gt; value pairs for radio options</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addRadio( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'radio', 'id' =&gt; $id, 'std' =&gt; array(), 'desc' =&gt; '', 'style' =&gt; '', 'name' =&gt; 'Radio Field', 'options' =&gt; $options );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Date Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'format' =&gt; // date format, default yy-mm-dd. Optional. Default &quot;'d MM, yy'&quot;  See more formats here: http://goo.gl/Wcwxn</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addDate( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'date', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'format' =&gt; 'd MM, yy', 'name' =&gt; 'Date Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Time Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string- field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'format' =&gt; // time format, default hh:mm. Optional. See more formats here: http://goo.gl/83woX</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addTime( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'time', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'format' =&gt; 'hh:mm', 'name' =&gt; 'Time Field', 'ampm' =&gt; false );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Color Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addColor( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'color', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'name' =&gt; 'ColorPicker Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Image Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addImage( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'image', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Image Field', 'std' =&gt; array( 'id' =&gt; '', 'url' =&gt; '' ), 'multiple' =&gt; false );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add File Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addFile( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'file', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'File Field', 'multiple' =&gt; false, 'std' =&gt; array( 'id' =&gt; '', 'url' =&gt; '' ) );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Editor Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional Default 'width: 300px; height: 400px'</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addEditor( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'editor', 'id' =&gt; $id, 'std' =&gt; '', 'desc' =&gt; '', 'style' =&gt; 'width: 300px; height: 400px', 'name' =&gt; 'Editor Editor Field' );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Taxonomy Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $options mixed|array options of taxonomy field</span>&nbsp;</div></li><li><div><span class="comment">       *    'taxonomy' =&gt;    // taxonomy name can be category, post_tag or any custom taxonomy default is category</span>&nbsp;</div></li><li><div><span class="comment">       *    'type' =&gt;  // how to show taxonomy? 'select' (default) or 'checkbox_list'</span>&nbsp;</div></li><li><div><span class="comment">       *    'args' =&gt;  // arguments to query taxonomy, see http://goo.gl/uAANN default ('hide_empty' =&gt; false)</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addTaxonomy( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $temp = array(&nbsp;</div></li><li><div>              'args' =&gt; array( 'hide_empty' =&gt; 0 ), &nbsp;</div></li><li><div>              'tax' =&gt; 'category', &nbsp;</div></li><li><div>              'type' =&gt; 'select'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $options = array_merge( $temp, $options );&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'taxonomy', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Taxonomy Field', 'options' =&gt; $options );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add posts Field to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $options mixed|array options of taxonomy field</span>&nbsp;</div></li><li><div><span class="comment">       *    'post_type' =&gt;    // post type name, 'post' (default) 'page' or any custom post type</span>&nbsp;</div></li><li><div><span class="comment">       *    'type' =&gt;  // how to show posts? 'select' (default) or 'checkbox_list'</span>&nbsp;</div></li><li><div><span class="comment">       *    'args' =&gt;  // arguments to query posts, see http://goo.gl/is0yK default ('posts_per_page' =&gt; -1)</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addPosts( $id, $options, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $post_type = isset( $options['post_type'] ) ? $options['post_type'] : ( isset( $args['post_type'] ) ? $args['post_type'] : 'post' );&nbsp;</div></li><li><div>          $type = isset( $options['type'] ) ? $options['type'] : 'select';&nbsp;</div></li><li><div>          $q = array( 'posts_per_page' =&gt; -1, 'post_type' =&gt; $post_type );&nbsp;</div></li><li><div>          if( isset( $options['args'] ) ) {&nbsp;</div></li><li><div>              $q = array_merge( $q, (array)$options['args'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $options = array( 'post_type' =&gt; $post_type, 'type' =&gt; $type, 'args' =&gt; $q );&nbsp;</div></li><li><div>          $new_field = array( 'type' =&gt; 'posts', 'id' =&gt; $id, 'desc' =&gt; '', 'name' =&gt; 'Posts Field', 'options' =&gt; $options, 'multiple' =&gt; false );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add repeater Field Block to meta box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the meta key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'style' =&gt;   // custom style for field, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'fields' =&gt; //fields to repeater</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addRepeaterBlock( $id, $args ) {&nbsp;</div></li><li><div>          $new_field = array(&nbsp;</div></li><li><div>              'type' =&gt; 'repeater', &nbsp;</div></li><li><div>              'id' =&gt; $id, &nbsp;</div></li><li><div>              'name' =&gt; 'Reapeater Field', &nbsp;</div></li><li><div>              'fields' =&gt; array(), &nbsp;</div></li><li><div>              'inline' =&gt; false, &nbsp;</div></li><li><div>              'sortable' =&gt; false&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *  Add Checkbox conditional Field to Page</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.9</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $id string  field id, i.e. the key</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       *    'name' =&gt; // field name/label string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'desc' =&gt; // field description, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'std' =&gt; // default value, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'validate_func' =&gt; // validate function, string optional</span>&nbsp;</div></li><li><div><span class="comment">       *    'fields' =&gt; list of fields to show conditionally.</span>&nbsp;</div></li><li><div><span class="comment">       * @param $repeater bool  is this a field inside a repeatr? true|false(default)</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function addCondition( $id, $args, $repeater = false ) {&nbsp;</div></li><li><div>          $new_field = array(&nbsp;</div></li><li><div>              'type' =&gt; 'cond', &nbsp;</div></li><li><div>              'id' =&gt; $id, &nbsp;</div></li><li><div>              'std' =&gt; '', &nbsp;</div></li><li><div>              'desc' =&gt; '', &nbsp;</div></li><li><div>              'style' =&gt; '', &nbsp;</div></li><li><div>              'name' =&gt; 'Conditional Field', &nbsp;</div></li><li><div>              'fields' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $new_field = array_merge( $new_field, $args );&nbsp;</div></li><li><div>          if( false === $repeater ) {&nbsp;</div></li><li><div>              $this-&gt;_fields[] = $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              return $new_field;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Finish Declaration of Meta Box</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function Finish() {&nbsp;</div></li><li><div>          $this-&gt;add_missed_values();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Helper function to check for empty arrays</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param $args mixed|array</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function is_array_empty( $array ) {&nbsp;</div></li><li><div>          if( !is_array( $array ) ) {&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $array as $a ) {&nbsp;</div></li><li><div>              if( is_array( $a ) ) {&nbsp;</div></li><li><div>                  foreach( $a as $sub_a ) {&nbsp;</div></li><li><div>                      if( !empty( $sub_a ) && $sub_a != '' ) {&nbsp;</div></li><li><div>                          return false;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  if( !empty( $a ) && $a != '' ) {&nbsp;</div></li><li><div>                      return false;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Validate_upload_file_type</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * Checks if the uploaded file is of the expected format</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz &lt;admin@bainternet.info&gt;</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.0.7</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       * @uses get_allowed_mime_types() to check allowed types</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $file uploaded file</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return array file with error on mismatch</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function Validate_upload_file_type( $file ) {&nbsp;</div></li><li><div>          if( isset( $_POST['uploadeType'] ) && !empty( $_POST['uploadeType'] ) && isset( $_POST['uploadeType'] ) && $_POST['uploadeType'] == 'my_meta_box' ) {&nbsp;</div></li><li><div>              $allowed = explode( &quot;|&quot;, $_POST['uploadeType'] );&nbsp;</div></li><li><div>              $ext = substr( strrchr( $file['name'], '.' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( !in_array( $ext, (array)$allowed ) ) {&nbsp;</div></li><li><div>                  $file['error'] = __( 'Sorry, you cannot upload this file type for this field.', 'responsive-mobile' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  return $file;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach( get_allowed_mime_types() as $key =&gt; $value ) {&nbsp;</div></li><li><div>                  if( strpos( $key, $ext ) || $key == $ext ) {&nbsp;</div></li><li><div>                      return $file;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $file['error'] = __( 'Sorry, you cannot upload this file type for this field.', 'responsive-mobile' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $file;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * function to sanitize field id</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz &lt;admin@bainternet.info&gt;</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.0.7</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param  string $str string to sanitize</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return string      sanitized string</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function idfy( $str ) {&nbsp;</div></li><li><div>          return str_replace( &quot; &quot;, &quot;_&quot;, $str );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * stripNumeric Strip number form string</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz &lt;admin@bainternet.info&gt;</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.0.7</span>&nbsp;</div></li><li><div><span class="comment">       * @access public</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param  string $str</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return string number less string</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function stripNumeric( $str ) {&nbsp;</div></li><li><div>          return trim( str_replace( range( 0, 9 ), '', $str ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * load_textdomain</span>&nbsp;</div></li><li><div><span class="comment">       * @author Ohad Raz</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.9.4</span>&nbsp;</div></li><li><div><span class="comment">       * @return void</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function load_textdomain() {&nbsp;</div></li><li><div>          <span class="comment">//In themes/plugins/mu-plugins directory</span>&nbsp;</div></li><li><div>          load_textdomain( 'responsive-mobile', dirname( __FILE__ ) . '/lang/' . get_locale() . 'mo' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } <span class="comment">// End Class</span>&nbsp;</div></li><li><div>endif; <span class="comment">// End Check Class Exists</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>class CyberChimps_Meta_Box extends AT_Meta_Box {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function show_field_image_select( $field, $meta ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>      echo &quot;&lt;div class='image-select'&gt;&quot;;&nbsp;</div></li><li><div>      foreach( $field['options'] as $key =&gt; $option ) {&nbsp;</div></li><li><div>          echo &quot;&lt;img data-key='{$key}' class='&quot; . ( $key == $meta ? ' selected' : '' ) . &quot;' src='{$option}' /&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo &quot;&lt;input type='hidden' name='&quot; . esc_attr( $field['id'] ) . &quot;' /&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function show_field_section_order( $field, $meta ) {&nbsp;</div></li><li><div>      <span class="comment">//Define image path</span>&nbsp;</div></li><li><div>      $image_path = get_template_directory_uri() . &quot;/core/images/&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo &quot;&lt;div class='section-order' id=&quot; . esc_attr( $field['id'] ) . &quot;&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div class='left-list'&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div id='inactive'&gt;Inactive Elements&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div class='list-items'&gt;&quot;;&nbsp;</div></li><li><div>      foreach( $field['options'] as $key =&gt; $option ) {&nbsp;</div></li><li><div>          if( is_array( $meta ) ) {&nbsp;</div></li><li><div>              if( in_array( $key, $meta ) ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo &quot;&lt;div class='list-item'&gt;&quot;;&nbsp;</div></li><li><div>          echo '&lt;span class=&quot;glyphicon glyphicon-minus-sign action&quot;&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>          echo &quot;&lt;span data-key='{$key}'&gt;{$option}&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>          echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo '&lt;div id=&quot;arrow&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-arrow-right&quot;&gt;&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>      echo &quot;&lt;div class='right-list'&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div id='active'&gt;Active Elements&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div class='list-items'&gt;&quot;;&nbsp;</div></li><li><div>      if( is_array( $meta ) ) {&nbsp;</div></li><li><div>          foreach( $meta as $key =&gt; $option ) {&nbsp;</div></li><li><div>              if( !array_key_exists( $option, $field['options'] ) ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              echo &quot;&lt;div class='list-item'&gt;&quot;;&nbsp;</div></li><li><div>              echo '&lt;span class=&quot;glyphicon glyphicon-minus-sign action&quot;&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>              echo '&lt;span data-key=&quot;' . $option . '&quot;&gt;' . $field['options'][$option] . '&lt;/span&gt;';&nbsp;</div></li><li><div>              echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;input class='section-order-tracker' type='hidden' id={$field['id']} name={$field['id']} /&gt;&quot;;&nbsp;</div></li><li><div>      echo '&lt;div id=&quot;values&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Creates re-order field prompt to download plugin</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param $field</span>&nbsp;</div></li><li><div><span class="comment">   * @param $meta</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function show_field_reorder( $field, $meta ) {&nbsp;</div></li><li><div>      $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>      echo &quot;Install the &lt;a href='http:<span class="comment">//wordpress.org/extend/plugins/post-types-order/' target='_blank'&gt;Post Types Order Plugin&lt;/a&gt; to control the order of your custom slides.&lt;/td&gt;&quot;;</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Show Image Field. Overwrites original as images have been saved under [0] rather than source</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $field</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $meta</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function show_field_single_image( $field, $meta ) {&nbsp;</div></li><li><div>      wp_enqueue_media();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_begin( $field, $meta );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if( $meta ) {&nbsp;</div></li><li><div>          echo &quot;&lt;img class='image-preview' src='{$meta}' /&gt;&lt;br/&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo &quot;&lt;input type='button' class='upload-image-button' value='&quot; . __( 'Upload', 'responsive-mobile' ) . &quot;' /&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;div class='upload-desc-field'&gt;&quot; . __( 'or enter URL', 'responsive-mobile' ) . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>      echo &quot;&lt;input class='upload-image-field' type='text' size='50' name='&quot; . esc_attr( $field['id'] ) . &quot;' value='&quot; . esc_attr( $meta ) . &quot;'/&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;show_field_end( $field, $meta );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/****************************** Sanitization Functions Starts *************************************/</span>&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Sanitize editor Field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $input</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @returns string $output</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function sanitize_field_editor( $input ) {&nbsp;</div></li><li><div>      if( current_user_can( 'unfiltered_html' ) ) {&nbsp;</div></li><li><div>          $output = $input;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          global $allowedtags;&nbsp;</div></li><li><div>          $output = wpautop( wp_kses( $input, $allowedtags ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Sanitize text Field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $input</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @returns string $output</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function sanitize_field_text( $input ) {&nbsp;</div></li><li><div>      $output = wp_kses_post( $input );&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Sanitize textarea Field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $input</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @returns string $output</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function sanitize_field_textarea( $input ) {&nbsp;</div></li><li><div>      global $allowedposttags;&nbsp;</div></li><li><div>      $output = wp_kses( $input, $allowedposttags );&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Sanitize unfiltered_textarea Field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $input</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @returns string $output</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function sanitize_field_unfiltered_textarea( $input, $old ) {&nbsp;</div></li><li><div>      if( current_user_can( 'unfiltered_html' ) ) {&nbsp;</div></li><li><div>          return $input;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          return $old;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>theme</li><li><span></span>file</li><li><span></span></li><li><span></span>Responsive Mobile</li><li><span></span>1.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>