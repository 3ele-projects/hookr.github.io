<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="theme" data-version="3.7.2" data-slug="evolve" data-type="file" data-id="98418"><head xmlns="http://www.w3.org/1999/xhtml"><title> library-admin-redux-framework-inc-fields-typography-field-typography | file | Evolve | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, theme, evolve, 3.7.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=20f34192c2f0714213483a2ab88b085a' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/library-admin-redux-framework-inc-fields-typography-field-typography/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibrary-admin-redux-framework-inc-fields-typography-field-typography%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibrary-admin-redux-framework-inc-fields-typography-field-typography%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"theme-evolve-3.7.2-file-library-admin-redux-framework-inc-fields-typography-field-typography","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="library-admin-redux-framework-inc-fields-typography-field-typography" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to themes." href="http://hookr.io/themes/" class=""><span property="name">themes</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to evolve." href="http://hookr.io/themes/evolve/" class="plugin"><span property="name">evolve</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.7.2." href="http://hookr.io/themes/evolve/3.7.2/" class="H_VERSION"><span property="name">3.7.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/themes/evolve/3.7.2/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">library-admin-redux-framework&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="742"><a href="http://hookr.io/themes/evolve/3.7.2/all/" title="All">All <span class="count badge">742</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/themes/evolve/3.7.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="473"><a href="http://hookr.io/themes/evolve/3.7.2/hooks/" title="Hooks">Hooks <span class="count badge">473</span></a></li><li class="" data-id="action" data-count="274"><a href="http://hookr.io/themes/evolve/3.7.2/actions/" title="Actions">Actions <span class="count badge">274</span></a></li><li class="" data-id="filter" data-count="199"><a href="http://hookr.io/themes/evolve/3.7.2/filters/" title="Filters">Filters <span class="count badge">199</span></a></li><li class="" data-id="class" data-count="123"><a href="http://hookr.io/themes/evolve/3.7.2/classes/" title="Classes">Classes <span class="count badge">123</span></a></li><li class="" data-id="constant" data-count="17"><a href="http://hookr.io/themes/evolve/3.7.2/constants/" title="Constants">Constants <span class="count badge">17</span></a></li><li class="" data-id="function" data-count="129"><a href="http://hookr.io/themes/evolve/3.7.2/functions/" title="Functions">Functions <span class="count badge">129</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/themes/evolve/3.7.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class="active"><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/library/admin/redux-framework/inc/fields/typography/field_typography.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Class and Function List:</span>&nbsp;</div></li><li><div><span class="comment"> * Function list:</span>&nbsp;</div></li><li><div><span class="comment"> * - __construct()</span>&nbsp;</div></li><li><div><span class="comment"> * - render()</span>&nbsp;</div></li><li><div><span class="comment"> * - enqueue()</span>&nbsp;</div></li><li><div><span class="comment"> * - makeGoogleWebfontLink()</span>&nbsp;</div></li><li><div><span class="comment"> * - makeGoogleWebfontString()</span>&nbsp;</div></li><li><div><span class="comment"> * - output()</span>&nbsp;</div></li><li><div><span class="comment"> * - getGoogleArray()</span>&nbsp;</div></li><li><div><span class="comment"> * - getSubsets()</span>&nbsp;</div></li><li><div><span class="comment"> * - getVariants()</span>&nbsp;</div></li><li><div><span class="comment"> * Classes list:</span>&nbsp;</div></li><li><div><span class="comment"> * - ReduxFramework_typography</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! class_exists( 'ReduxFramework_typography' ) ) {&nbsp;</div></li><li><div>  class ReduxFramework_typography {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      private $std_fonts = array(&nbsp;</div></li><li><div>          &quot;Arial, Helvetica, sans-serif&quot; =&gt; &quot;Arial, Helvetica, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'Arial Black', Gadget, sans-serif&quot; =&gt; &quot;'Arial Black', Gadget, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'Bookman Old Style', serif&quot; =&gt; &quot;'Bookman Old Style', serif&quot;, &nbsp;</div></li><li><div>          &quot;'Comic Sans MS', cursive&quot; =&gt; &quot;'Comic Sans MS', cursive&quot;, &nbsp;</div></li><li><div>          &quot;Courier, monospace&quot; =&gt; &quot;Courier, monospace&quot;, &nbsp;</div></li><li><div>          &quot;Garamond, serif&quot; =&gt; &quot;Garamond, serif&quot;, &nbsp;</div></li><li><div>          &quot;Georgia, serif&quot; =&gt; &quot;Georgia, serif&quot;, &nbsp;</div></li><li><div>          &quot;Impact, Charcoal, sans-serif&quot; =&gt; &quot;Impact, Charcoal, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'Lucida Console', Monaco, monospace&quot; =&gt; &quot;'Lucida Console', Monaco, monospace&quot;, &nbsp;</div></li><li><div>          &quot;'Lucida Sans Unicode', 'Lucida Grande', sans-serif&quot; =&gt; &quot;'Lucida Sans Unicode', 'Lucida Grande', sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'MS Sans Serif', Geneva, sans-serif&quot; =&gt; &quot;'MS Sans Serif', Geneva, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'MS Serif', 'New York', sans-serif&quot; =&gt; &quot;'MS Serif', 'New York', sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'Palatino Linotype', 'Book Antiqua', Palatino, serif&quot; =&gt; &quot;'Palatino Linotype', 'Book Antiqua', Palatino, serif&quot;, &nbsp;</div></li><li><div>          &quot;Tahoma, Geneva, sans-serif&quot; =&gt; &quot;Tahoma, Geneva, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;'Times New Roman', Times, serif&quot; =&gt; &quot;'Times New Roman', Times, serif&quot;, &nbsp;</div></li><li><div>          &quot;'Trebuchet MS', Helvetica, sans-serif&quot; =&gt; &quot;'Trebuchet MS', Helvetica, sans-serif&quot;, &nbsp;</div></li><li><div>          &quot;Verdana, Geneva, sans-serif&quot; =&gt; &quot;Verdana, Geneva, sans-serif&quot;, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      private $user_fonts = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Field Constructor.</span>&nbsp;</div></li><li><div><span class="comment">       * Required - must call the parent constructor, then assign field and value to vars, and obviously call the render field function</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function __construct( $field = array(), $value = '', $parent ) {&nbsp;</div></li><li><div>          $this-&gt;parent = $parent;&nbsp;</div></li><li><div>          $this-&gt;field = $field;&nbsp;</div></li><li><div>          $this-&gt;value = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Shim out old arg to new</span></span>&nbsp;</div></li><li><div>          if ( isset( $this-&gt;field['all_styles'] ) && ! empty( $this-&gt;field['all_styles'] ) ) {&nbsp;</div></li><li><div>              $this-&gt;field['all-styles'] = $this-&gt;field['all_styles'];&nbsp;</div></li><li><div>              unset ( $this-&gt;field['all_styles'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Set field array defaults.  No errors please</span>&nbsp;</div></li><li><div>          $defaults = array(&nbsp;</div></li><li><div>              'font-family' =&gt; true, &nbsp;</div></li><li><div>              'font-size' =&gt; true, &nbsp;</div></li><li><div>              'font-weight' =&gt; true, &nbsp;</div></li><li><div>              'font-style' =&gt; true, &nbsp;</div></li><li><div>              'font-backup' =&gt; false, &nbsp;</div></li><li><div>              'subsets' =&gt; true, &nbsp;</div></li><li><div>              'custom_fonts' =&gt; true, &nbsp;</div></li><li><div>              'text-align' =&gt; true, &nbsp;</div></li><li><div>              'text-transform' =&gt; false, &nbsp;</div></li><li><div>              'font-variant' =&gt; false, &nbsp;</div></li><li><div>              'text-decoration' =&gt; false, &nbsp;</div></li><li><div>              'color' =&gt; true, &nbsp;</div></li><li><div>              'preview' =&gt; true, &nbsp;</div></li><li><div>              'line-height' =&gt; true, &nbsp;</div></li><li><div>              'multi' =&gt; array(&nbsp;</div></li><li><div>                  'subset' =&gt; false, &nbsp;</div></li><li><div>                  'weight' =&gt; false, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'word-spacing' =&gt; false, &nbsp;</div></li><li><div>              'letter-spacing' =&gt; false, &nbsp;</div></li><li><div>              'google' =&gt; true, &nbsp;</div></li><li><div>              'update_weekly' =&gt; false, <span class="comment">// Enable to force updates of Google Fonts to be weekly</span>&nbsp;</div></li><li><div>              'font_family_clear' =&gt; true&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $this-&gt;field = wp_parse_args( $this-&gt;field, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Set value defaults.</span>&nbsp;</div></li><li><div>          $defaults = array(&nbsp;</div></li><li><div>              'font-family' =&gt; '', &nbsp;</div></li><li><div>              'font-options' =&gt; '', &nbsp;</div></li><li><div>              'font-backup' =&gt; '', &nbsp;</div></li><li><div>              'text-align' =&gt; '', &nbsp;</div></li><li><div>              'text-transform' =&gt; '', &nbsp;</div></li><li><div>              'font-variant' =&gt; '', &nbsp;</div></li><li><div>              'text-decoration' =&gt; '', &nbsp;</div></li><li><div>              'line-height' =&gt; '', &nbsp;</div></li><li><div>              'word-spacing' =&gt; '', &nbsp;</div></li><li><div>              'letter-spacing' =&gt; '', &nbsp;</div></li><li><div>              'subsets' =&gt; '', &nbsp;</div></li><li><div>              'google' =&gt; false, &nbsp;</div></li><li><div>              'font-script' =&gt; '', &nbsp;</div></li><li><div>              'font-weight' =&gt; '', &nbsp;</div></li><li><div>              'font-style' =&gt; '', &nbsp;</div></li><li><div>              'color' =&gt; '', &nbsp;</div></li><li><div>              'font-size' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $this-&gt;value = wp_parse_args( $this-&gt;value, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Get the google array</span>&nbsp;</div></li><li><div>          $this-&gt;getGoogleArray();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty( $this-&gt;field['fonts'] ) ) {&nbsp;</div></li><li><div>              $this-&gt;user_fonts = false;&nbsp;</div></li><li><div>              $this-&gt;field['fonts'] = $this-&gt;std_fonts;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Localize std fonts</span>&nbsp;</div></li><li><div>          $this-&gt;localizeStdFonts();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function localize( $field, $value = &quot;&quot; ) {&nbsp;</div></li><li><div>          $params = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( true == $this-&gt;user_fonts && ! empty( $this-&gt;field['fonts'] ) ) {&nbsp;</div></li><li><div>              $params['std_font'] = $this-&gt;field['fonts'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $params;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Field Render Function.</span>&nbsp;</div></li><li><div><span class="comment">       * Takes the vars and outputs the HTML for the field in the settings</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function render() {&nbsp;</div></li><li><div>          <span class="comment">// Since fonts declared is CSS (@font-face) are not rendered in the preview, </span>&nbsp;</div></li><li><div>          <span class="comment">// they can be declared in a CSS file and passed here so they DO display in</span>&nbsp;</div></li><li><div>          <span class="comment">// font preview.  Do NOT pass style.css in your theme, as that will mess up</span>&nbsp;</div></li><li><div>          <span class="comment">// admin page styling.  It's recommended to pass a CSS file with ONLY font</span>&nbsp;</div></li><li><div>          <span class="comment">// declarations.</span>&nbsp;</div></li><li><div>          <span class="comment">// If field is set and not blank, then enqueue field</span>&nbsp;</div></li><li><div>          if ( isset( $this-&gt;field['ext-font-css'] ) && $this-&gt;field['ext-font-css'] != '' ) {&nbsp;</div></li><li><div>              wp_register_style( 'redux-external-fonts', $this-&gt;field['ext-font-css'] );&nbsp;</div></li><li><div>              wp_enqueue_style( 'redux-external-fonts' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty( $this-&gt;field['units'] ) && ! empty( $this-&gt;field['default']['units'] ) ) {&nbsp;</div></li><li><div>              $this-&gt;field['units'] = $this-&gt;field['default']['units'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty( $this-&gt;field['units'] ) || ! in_array( $this-&gt;field['units'], array(&nbsp;</div></li><li><div>                  'px', &nbsp;</div></li><li><div>                  'em', &nbsp;</div></li><li><div>                  'rem', &nbsp;</div></li><li><div>                  '%'&nbsp;</div></li><li><div> ) )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>              $this-&gt;field['units'] = 'px';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $unit = $this-&gt;field['units'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div id=&quot;' . $this-&gt;field['id'] . '&quot; class=&quot;redux-typography-container&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; data-units=&quot;' . $unit . '&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $this-&gt;field['select2'] ) ) { <span class="comment">// if there are any let's pass them to js</span>&nbsp;</div></li><li><div>              $select2_params = json_encode( $this-&gt;field['select2'] );&nbsp;</div></li><li><div>              $select2_params = htmlspecialchars( $select2_params, ENT_QUOTES );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;select2_params&quot; value=&quot;' . $select2_params . '&quot;&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Family */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-family'] === true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// font family clear</span>&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-font-clear&quot; value=&quot;' . $this-&gt;field['font_family_clear'] . '&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">//if (filter_var($this-&gt;value['google'], FILTER_VALIDATE_BOOLEAN)) {</span>&nbsp;</div></li><li><div>              if ( filter_var( $this-&gt;value['google'], FILTER_VALIDATE_BOOLEAN ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Divide and conquer</span>&nbsp;</div></li><li><div>                  $fontFamily = explode( ', ', $this-&gt;value['font-family'], 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// If array 0 is empty and array 1 is not</span>&nbsp;</div></li><li><div>                  if ( empty( $fontFamily[0] ) && ! empty( $fontFamily[1] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Make array 0 = array 1</span>&nbsp;</div></li><li><div>                      $fontFamily[0] = $fontFamily[1];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Clear array 1</span>&nbsp;</div></li><li><div>                      $fontFamily[1] = &quot;&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// If no fontFamily array exists, create one and set array 0</span>&nbsp;</div></li><li><div>              <span class="comment">// with font value</span>&nbsp;</div></li><li><div>              if ( ! isset( $fontFamily ) ) {&nbsp;</div></li><li><div>                  $fontFamily = array();&nbsp;</div></li><li><div>                  $fontFamily[0] = $this-&gt;value['font-family'];&nbsp;</div></li><li><div>                  $fontFamily[1] = &quot;&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Is selected font a Google font</span>&nbsp;</div></li><li><div>              $isGoogleFont = '0';&nbsp;</div></li><li><div>              if ( isset( $this-&gt;parent-&gt;fonts['google'][ $fontFamily[0] ] ) ) {&nbsp;</div></li><li><div>                  $isGoogleFont = '1';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// If not a Google font, show all font families</span>&nbsp;</div></li><li><div>              if ( $isGoogleFont != '1' ) {&nbsp;</div></li><li><div>                  $fontFamily[0] = $this-&gt;value['font-family'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $userFonts = '0';&nbsp;</div></li><li><div>              if ( true == $this-&gt;user_fonts ) {&nbsp;</div></li><li><div>                  $userFonts = '1';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-typography-font-family ' . $this-&gt;field['class'] . '&quot; data-user-fonts=&quot;' . $userFonts . '&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-family]' . '&quot; value=&quot;' . $this-&gt;value['font-family'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-typography-font-options ' . $this-&gt;field['class'] . '&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-options]' . '&quot; value=&quot;' . $this-&gt;value['font-options'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-typography-google-font&quot; value=&quot;' . $isGoogleFont . '&quot; id=&quot;' . $this-&gt;field['id'] . '-google-font&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-family&quot; style=&quot;width: 220px; margin-right: 5px;&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Family', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              $placeholder = $fontFamily[0] ? $fontFamily[0] : __( 'Font family', 'evolve' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;div class=&quot; redux-typography redux-typography-family select2-container ' . $this-&gt;field['class'] . '&quot; id=&quot;' . $this-&gt;field['id'] . '-family&quot; placeholder=&quot;' . $placeholder . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; data-value=&quot;' . $fontFamily[0] . '&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $googleSet = false;&nbsp;</div></li><li><div>              if ( $this-&gt;field['google'] === true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">// Set a flag so we know to set a header style or not</span></span>&nbsp;</div></li><li><div>                  echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-typography-google ' . $this-&gt;field['class'] . '&quot; id=&quot;' . $this-&gt;field['id'] . '-google&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[google]' . '&quot; type=&quot;text&quot; value=&quot;' . $this-&gt;field['google'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; /&gt;';&nbsp;</div></li><li><div>                  $googleSet = true;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Backup Font */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-family'] === true && $this-&gt;field['google'] === true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( false == $googleSet ) {&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">// Set a flag so we know to set a header style or not</span></span>&nbsp;</div></li><li><div>                  echo '&lt;input type=&quot;hidden&quot; class=&quot;redux-typography-google ' . $this-&gt;field['class'] . '&quot; id=&quot;' . $this-&gt;field['id'] . '-google&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[google]' . '&quot; type=&quot;text&quot; value=&quot;' . $this-&gt;field['google'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $this-&gt;field['font-backup'] === true ) {&nbsp;</div></li><li><div>                  echo '&lt;div class=&quot;select_wrapper typography-family-backup&quot; style=&quot;width: 220px; margin-right: 5px;&quot;&gt;';&nbsp;</div></li><li><div>                  echo '&lt;label&gt;' . __( 'Backup Font Family', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>                  echo '&lt;select data-placeholder=&quot;' . __( 'Backup Font Family', 'evolve' ) . '&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-backup]' . '&quot; class=&quot;redux-typography redux-typography-family-backup ' . $this-&gt;field['class'] . '&quot; id=&quot;' . $this-&gt;field['id'] . '-family-backup&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; data-value=&quot;' . $this-&gt;value['font-backup'] . '&quot;&gt;';&nbsp;</div></li><li><div>                  echo '&lt;option data-google=&quot;false&quot; data-details=&quot;&quot; value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  foreach ( $this-&gt;field['fonts'] as $i =&gt; $family ) {&nbsp;</div></li><li><div>                      echo '&lt;option data-google=&quot;true&quot; value=&quot;' . $i . '&quot;' . selected( $this-&gt;value['font-backup'], $i, false ) . '&gt;' . $family . '&lt;/option&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Style/Weight */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-style'] === true || $this-&gt;field['font-weight'] === true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-style&quot; original-title=&quot;' . __( 'Font style', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Weight &amp; Style', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $style = $this-&gt;value['font-weight'] . $this-&gt;value['font-style'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-font-weight&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-weight]' . '&quot; value=&quot;' . $this-&gt;value['font-weight'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt; ';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-font-style&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-style]' . '&quot; value=&quot;' . $this-&gt;value['font-style'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt; ';&nbsp;</div></li><li><div>              $multi = ( isset( $this-&gt;field['multi']['weight'] ) && $this-&gt;field['multi']['weight'] ) ? ' multiple=&quot;multiple&quot;' : &quot;&quot;;&nbsp;</div></li><li><div>              echo '&lt;select' . $multi . ' data-placeholder=&quot;' . __( 'Style', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-style select ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Font style', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '_style&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; data-value=&quot;' . $style . '&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( empty( $this-&gt;value['subsets'] ) || empty( $this-&gt;value['font-weight'] ) ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $nonGStyles = array(&nbsp;</div></li><li><div>                  '200' =&gt; 'Lighter', &nbsp;</div></li><li><div>                  '400' =&gt; 'Normal', &nbsp;</div></li><li><div>                  '700' =&gt; 'Bold', &nbsp;</div></li><li><div>                  '900' =&gt; 'Bolder'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $gfonts[ $this-&gt;value['font-family'] ] ) ) {&nbsp;</div></li><li><div>                  foreach ( $gfonts[ $this-&gt;value['font-family'] ]['variants'] as $v ) {&nbsp;</div></li><li><div>                      echo '&lt;option value=&quot;' . $v['id'] . '&quot; ' . selected( $this-&gt;value['subsets'], $v['id'], false ) . '&gt;' . $v['name'] . '&lt;/option&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  if ( ! isset( $this-&gt;value['font-weight'] ) && isset( $this-&gt;value['subsets'] ) ) {&nbsp;</div></li><li><div>                      $this-&gt;value['font-weight'] = $this-&gt;value['subsets'];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  foreach ( $nonGStyles as $i =&gt; $style ) {&nbsp;</div></li><li><div>                      if ( ! isset( $this-&gt;value['font-weight'] ) ) {&nbsp;</div></li><li><div>                          $this-&gt;value['font-weight'] = false;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( ! isset( $this-&gt;value['subsets'] ) ) {&nbsp;</div></li><li><div>                          $this-&gt;value['subsets'] = false;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      echo '&lt;option value=&quot;' . $i . '&quot; ' . selected( $this-&gt;value['font-weight'], $i, false ) . '&gt;' . $style . '&lt;/option&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Script */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-family'] == true && $this-&gt;field['subsets'] == true && $this-&gt;field['google'] == true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-script tooltip&quot; original-title=&quot;' . __( 'Font subsets', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-subsets&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[subsets]' . '&quot; value=&quot;' . $this-&gt;value['subsets'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt; ';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Subsets', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              $multi = ( isset( $this-&gt;field['multi']['subset'] ) && $this-&gt;field['multi']['subset'] ) ? ' multiple=&quot;multiple&quot;' : &quot;&quot;;&nbsp;</div></li><li><div>              echo '&lt;select'.$multi.' data-placeholder=&quot;' . __( 'Subsets', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-subsets ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Font script', 'evolve' ) . '&quot;  id=&quot;' . $this-&gt;field['id'] . '-subsets&quot; data-value=&quot;' . $this-&gt;value['subsets'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; &gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( empty( $this-&gt;value['subsets'] ) ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $gfonts[ $this-&gt;value['font-family'] ] ) ) {&nbsp;</div></li><li><div>                  foreach ( $gfonts[ $this-&gt;value['font-family'] ]['subsets'] as $v ) {&nbsp;</div></li><li><div>                      echo '&lt;option value=&quot;' . $v['id'] . '&quot; ' . selected( $this-&gt;value['subsets'], $v['id'], false ) . '&gt;' . $v['name'] . '&lt;/option&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Align */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['text-align'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-align tooltip&quot; original-title=&quot;' . __( 'Text Align', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Text Align', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;select data-placeholder=&quot;' . __( 'Text Align', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-align ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Text Align', 'evolve' ) . '&quot;  id=&quot;' . $this-&gt;field['id'] . '-align&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[text-align]' . '&quot; data-value=&quot;' . $this-&gt;value['text-align'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; &gt;';&nbsp;</div></li><li><div>              echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $align = array(&nbsp;</div></li><li><div>                  'inherit', &nbsp;</div></li><li><div>                  'left', &nbsp;</div></li><li><div>                  'right', &nbsp;</div></li><li><div>                  'center', &nbsp;</div></li><li><div>                  'justify', &nbsp;</div></li><li><div>                  'initial'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $align as $v ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;' . $v . '&quot; ' . selected( $this-&gt;value['text-align'], $v, false ) . '&gt;' . ucfirst( $v ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Text Transform */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['text-transform'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-transform tooltip&quot; original-title=&quot;' . __( 'Text Transform', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Text Transform', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;select data-placeholder=&quot;' . __( 'Text Transform', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-transform ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Text Transform', 'evolve' ) . '&quot;  id=&quot;' . $this-&gt;field['id'] . '-transform&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[text-transform]' . '&quot; data-value=&quot;' . $this-&gt;value['text-transform'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; &gt;';&nbsp;</div></li><li><div>              echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $values = array(&nbsp;</div></li><li><div>                  'none', &nbsp;</div></li><li><div>                  'capitalize', &nbsp;</div></li><li><div>                  'uppercase', &nbsp;</div></li><li><div>                  'lowercase', &nbsp;</div></li><li><div>                  'initial', &nbsp;</div></li><li><div>                  'inherit'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $values as $v ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;' . $v . '&quot; ' . selected( $this-&gt;value['text-transform'], $v, false ) . '&gt;' . ucfirst( $v ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Variant */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-variant'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-font-variant tooltip&quot; original-title=&quot;' . __( 'Font Variant', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Variant', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;select data-placeholder=&quot;' . __( 'Font Variant', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-font-variant ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Font Variant', 'evolve' ) . '&quot;  id=&quot;' . $this-&gt;field['id'] . '-font-variant&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-variant]' . '&quot; data-value=&quot;' . $this-&gt;value['font-variant'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; &gt;';&nbsp;</div></li><li><div>              echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $values = array(&nbsp;</div></li><li><div>                  'inherit', &nbsp;</div></li><li><div>                  'normal', &nbsp;</div></li><li><div>                  'small-caps'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $values as $v ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;' . $v . '&quot; ' . selected( $this-&gt;value['font-variant'], $v, false ) . '&gt;' . ucfirst( $v ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Text Decoration */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['text-decoration'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;select_wrapper typography-decoration tooltip&quot; original-title=&quot;' . __( 'Text Decoration', 'evolve' ) . '&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Text Decoration', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;select data-placeholder=&quot;' . __( 'Text Decoration', 'evolve' ) . '&quot; class=&quot;redux-typography redux-typography-decoration ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Text Decoration', 'evolve' ) . '&quot;  id=&quot;' . $this-&gt;field['id'] . '-decoration&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[text-decoration]' . '&quot; data-value=&quot;' . $this-&gt;value['text-decoration'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; &gt;';&nbsp;</div></li><li><div>              echo '&lt;option value=&quot;&quot;&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $values = array(&nbsp;</div></li><li><div>                  'none', &nbsp;</div></li><li><div>                  'inherit', &nbsp;</div></li><li><div>                  'underline', &nbsp;</div></li><li><div>                  'overline', &nbsp;</div></li><li><div>                  'line-through', &nbsp;</div></li><li><div>                  'blink'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $values as $v ) {&nbsp;</div></li><li><div>                  echo '&lt;option value=&quot;' . $v . '&quot; ' . selected( $this-&gt;value['text-decoration'], $v, false ) . '&gt;' . ucfirst( $v ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/select&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Size */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['font-size'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input_wrapper font-size redux-container-typography&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Size', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input-append&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;span2 redux-typography redux-typography-size mini typography-input ' . $this-&gt;field['class'] . '&quot; title=&quot;' . __( 'Font Size', 'evolve' ) . '&quot; placeholder=&quot;' . __( 'Size', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '-size&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-size]' . '&quot; value=&quot;' . str_replace( $unit, '', $this-&gt;value['font-size'] ) . '&quot; data-value=&quot;' . str_replace( $unit, '', $this-&gt;value['font-size'] ) . '&quot;&gt;&lt;span class=&quot;add-on&quot;&gt;' . $unit . '&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-font-size&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[font-size]' . '&quot; value=&quot;' . $this-&gt;value['font-size'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Line Height */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['line-height'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input_wrapper line-height redux-container-typography&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Line Height', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input-append&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;span2 redux-typography redux-typography-height mini typography-input ' . $this-&gt;field['class'] . '&quot; title=&quot;' . __( 'Line Height', 'evolve' ) . '&quot; placeholder=&quot;' . __( 'Height', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '-height&quot; value=&quot;' . str_replace( $unit, '', $this-&gt;value['line-height'] ) . '&quot; data-value=&quot;' . str_replace( $unit, '', $this-&gt;value['line-height'] ) . '&quot;&gt;&lt;span class=&quot;add-on&quot;&gt;' . $unit . '&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-line-height&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[line-height]' . '&quot; value=&quot;' . $this-&gt;value['line-height'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Word Spacing */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['word-spacing'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input_wrapper word-spacing redux-container-typography&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Word Spacing', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input-append&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;span2 redux-typography redux-typography-word mini typography-input ' . $this-&gt;field['class'] . '&quot; title=&quot;' . __( 'Word Spacing', 'evolve' ) . '&quot; placeholder=&quot;' . __( 'Word Spacing', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '-word&quot; value=&quot;' . str_replace( $unit, '', $this-&gt;value['word-spacing'] ) . '&quot; data-value=&quot;' . str_replace( $unit, '', $this-&gt;value['word-spacing'] ) . '&quot;&gt;&lt;span class=&quot;add-on&quot;&gt;' . $unit . '&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-word-spacing&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[word-spacing]' . '&quot; value=&quot;' . $this-&gt;value['word-spacing'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Letter Spacing */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['letter-spacing'] === true ) {&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input_wrapper letter-spacing redux-container-typography&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Letter Spacing', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;input-append&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;span2 redux-typography redux-typography-letter mini typography-input ' . $this-&gt;field['class'] . '&quot; title=&quot;' . __( 'Letter Spacing', 'evolve' ) . '&quot; placeholder=&quot;' . __( 'Letter Spacing', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '-letter&quot; value=&quot;' . str_replace( $unit, '', $this-&gt;value['letter-spacing'] ) . '&quot; data-value=&quot;' . str_replace( $unit, '', $this-&gt;value['letter-spacing'] ) . '&quot;&gt;&lt;span class=&quot;add-on&quot;&gt;' . $unit . '&lt;/span&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;input type=&quot;hidden&quot; class=&quot;typography-letter-spacing&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[letter-spacing]' . '&quot; value=&quot;' . $this-&gt;value['letter-spacing'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot;  /&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Color */</span>&nbsp;</div></li><li><div>          if ( $this-&gt;field['color'] === true ) {&nbsp;</div></li><li><div>              $default = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( empty( $this-&gt;field['default']['color'] ) && ! empty( $this-&gt;field['color'] ) ) {&nbsp;</div></li><li><div>                  $default = $this-&gt;value['color'];&nbsp;</div></li><li><div>              } else if ( ! empty( $this-&gt;field['default']['color'] ) ) {&nbsp;</div></li><li><div>                  $default = $this-&gt;field['default']['color'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;div class=&quot;picker-wrapper&quot;&gt;';&nbsp;</div></li><li><div>              echo '&lt;label&gt;' . __( 'Font Color', 'evolve' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>              echo '&lt;div id=&quot;' . $this-&gt;field['id'] . '_color_picker&quot; class=&quot;colorSelector typography-color&quot;&gt;&lt;div style=&quot;background-color: ' . $this-&gt;value['color'] . '&quot;&gt;&lt;/div&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>              echo '&lt;input data-default-color=&quot;' . $default . '&quot; class=&quot;redux-color redux-typography-color ' . $this-&gt;field['class'] . '&quot; original-title=&quot;' . __( 'Font color', 'evolve' ) . '&quot; id=&quot;' . $this-&gt;field['id'] . '-color&quot; name=&quot;' . $this-&gt;field['name'] . $this-&gt;field['name_suffix'] . '[color]' . '&quot; type=&quot;text&quot; value=&quot;' . $this-&gt;value['color'] . '&quot; data-id=&quot;' . $this-&gt;field['id'] . '&quot; /&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** Font Preview */</span>&nbsp;</div></li><li><div>          if ( ! isset( $this-&gt;field['preview'] ) || $this-&gt;field['preview'] !== false ) {&nbsp;</div></li><li><div>              if ( isset( $this-&gt;field['preview']['text'] ) ) {&nbsp;</div></li><li><div>                  $g_text = $this-&gt;field['preview']['text'];&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $g_text = '1 2 3 4 5 6 7 8 9 0 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s t u v w x y z';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $style = '';&nbsp;</div></li><li><div>              if ( isset( $this-&gt;field['preview']['always_display'] ) ) {&nbsp;</div></li><li><div>                  if ( true === filter_var( $this-&gt;field['preview']['always_display'], FILTER_VALIDATE_BOOLEAN ) ) {&nbsp;</div></li><li><div>                      if ( $isGoogleFont == true ) {&nbsp;</div></li><li><div>                          $this-&gt;parent-&gt;typography_preview[ $fontFamily[0] ] = array(&nbsp;</div></li><li><div>                              'font-style' =&gt; array( $this-&gt;value['font-weight'] . $this-&gt;value['font-style'] ), &nbsp;</div></li><li><div>                              'subset' =&gt; array( $this-&gt;value['subsets'] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          $protocol = ( ! empty( $_SERVER['HTTPS'] ) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443 ) ? &quot;https:&quot; : &quot;http:&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          wp_deregister_style( 'redux-typography-preview' );&nbsp;</div></li><li><div>                          wp_dequeue_style( 'redux-typography-preview' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          wp_register_style( 'redux-typography-preview', $protocol . $this-&gt;makeGoogleWebfontLink( $this-&gt;parent-&gt;typography_preview ), '', time() );&nbsp;</div></li><li><div>                          wp_enqueue_style( 'redux-typography-preview' );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $style = 'display: block; font-family: ' . $this-&gt;value['font-family'] . '; font-weight: ' . $this-&gt;value['font-weight'] . ';';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $this-&gt;field['preview']['font-size'] ) ) {&nbsp;</div></li><li><div>                  $style .= 'font-size: ' . $this-&gt;field['preview']['font-size'] . ';';&nbsp;</div></li><li><div>                  $inUse = '1';&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  <span class="comment">//$g_size = '';</span>&nbsp;</div></li><li><div>                  $inUse = '0';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;p data-preview-size=&quot;' . $inUse . '&quot; class=&quot;clear ' . $this-&gt;field['id'] . '_previewer typography-preview&quot; ' . 'style=&quot;' . $style . '&quot;&gt;' . $g_text . '&lt;/p&gt;';&nbsp;</div></li><li><div>              echo '&lt;/div&gt;'; <span class="comment">// end typography container</span>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }  <span class="comment"><span class="comment"><span class="comment"><span class="comment">//function</span></span></span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Enqueue Function.</span>&nbsp;</div></li><li><div><span class="comment">       * If this field requires any scripts, or css define this function and register/enqueue the scripts/css</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function enqueue() {&nbsp;</div></li><li><div>          if (!wp_style_is('select2-css')) {&nbsp;</div></li><li><div>              wp_enqueue_style( 'select2-css' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (!wp_style_is('wp-color-picker')) {&nbsp;</div></li><li><div>              wp_enqueue_style( 'wp-color-picker' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (!wp_script_is ( 'redux-field-typography-js' )) {&nbsp;</div></li><li><div>              wp_enqueue_script(&nbsp;</div></li><li><div>                  'redux-field-typography-js', &nbsp;</div></li><li><div>                  ReduxFramework::$_url . 'inc/fields/typography/field_typography' . Redux_Functions::isMin() . '.js', &nbsp;</div></li><li><div>                  array( 'jquery', 'wp-color-picker', 'select2-js', 'redux-js' ), &nbsp;</div></li><li><div>                  time(), &nbsp;</div></li><li><div>                  true&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          wp_localize_script(&nbsp;</div></li><li><div>              'redux-field-typography-js', &nbsp;</div></li><li><div>              'redux_ajax_script', &nbsp;</div></li><li><div>              array( 'ajaxurl' =&gt; admin_url( 'admin-ajax.php' ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($this-&gt;parent-&gt;args['dev_mode']) {&nbsp;</div></li><li><div>              if (!wp_style_is('redux-color-picker-css')) {&nbsp;</div></li><li><div>                  wp_enqueue_style( 'redux-color-picker-css' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (!wp_style_is('redux-field-typography-css')) {&nbsp;</div></li><li><div>                  wp_enqueue_style(&nbsp;</div></li><li><div>                      'redux-field-typography-css', &nbsp;</div></li><li><div>                      ReduxFramework::$_url . 'inc/fields/typography/field_typography.css', &nbsp;</div></li><li><div>                      array(), &nbsp;</div></li><li><div>                      time(), &nbsp;</div></li><li><div>                      'all'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }  <span class="comment"><span class="comment"><span class="comment"><span class="comment">//function</span></span></span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * makeGoogleWebfontLink Function.</span>&nbsp;</div></li><li><div><span class="comment">       * Creates the google fonts link.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function makeGoogleWebfontLink( $fonts ) {&nbsp;</div></li><li><div>          $link = &quot;&quot;;&nbsp;</div></li><li><div>          $subsets = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $fonts as $family =&gt; $font ) {&nbsp;</div></li><li><div>              if ( ! empty( $link ) ) {&nbsp;</div></li><li><div>                  $link .= &quot;%7C&quot;; <span class="comment"><span class="comment">// Append a new font to the string</span></span>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $link .= $family;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $font['font-style'] ) || ! empty( $font['all-styles'] ) ) {&nbsp;</div></li><li><div>                  $link .= ':';&nbsp;</div></li><li><div>                  if ( ! empty( $font['all-styles'] ) ) {&nbsp;</div></li><li><div>                      $link .= implode( ', ', $font['all-styles'] );&nbsp;</div></li><li><div>                  } else if ( ! empty( $font['font-style'] ) ) {&nbsp;</div></li><li><div>                      $link .= implode( ', ', $font['font-style'] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $font['subset'] ) ) {&nbsp;</div></li><li><div>                  foreach ( $font['subset'] as $subset ) {&nbsp;</div></li><li><div>                      if ( ! in_array( $subset, $subsets ) ) {&nbsp;</div></li><li><div>                          array_push( $subsets, $subset );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $subsets ) ) {&nbsp;</div></li><li><div>              $link .= &quot;&amp;subset=&quot; . implode( ', ', $subsets );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return '<span class="comment">//fonts.googleapis.com/css?family=' . str_replace( '|', '%7C', $link );</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * makeGoogleWebfontString Function.</span>&nbsp;</div></li><li><div><span class="comment">       * Creates the google fonts link.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 3.1.8</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function makeGoogleWebfontString( $fonts ) {&nbsp;</div></li><li><div>          $link = &quot;&quot;;&nbsp;</div></li><li><div>          $subsets = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $fonts as $family =&gt; $font ) {&nbsp;</div></li><li><div>              if ( ! empty( $link ) ) {&nbsp;</div></li><li><div>                  $link .= &quot;', '&quot;; <span class="comment"><span class="comment">// Append a new font to the string</span></span>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $link .= $family;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $font['font-style'] ) || ! empty( $font['all-styles'] ) ) {&nbsp;</div></li><li><div>                  $link .= ':';&nbsp;</div></li><li><div>                  if ( ! empty( $font['all-styles'] ) ) {&nbsp;</div></li><li><div>                      $link .= implode( ', ', $font['all-styles'] );&nbsp;</div></li><li><div>                  } else if ( ! empty( $font['font-style'] ) ) {&nbsp;</div></li><li><div>                      $link .= implode( ', ', $font['font-style'] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $font['subset'] ) ) {&nbsp;</div></li><li><div>                  foreach ( $font['subset'] as $subset ) {&nbsp;</div></li><li><div>                      if ( ! in_array( $subset, $subsets ) ) {&nbsp;</div></li><li><div>                          array_push( $subsets, $subset );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $subsets ) ) {&nbsp;</div></li><li><div>              $link .= &quot;&amp;subset=&quot; . implode( ', ', $subsets );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return &quot;'&quot; . $link . &quot;'&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function output() {&nbsp;</div></li><li><div>          $font = $this-&gt;value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Shim out old arg to new</span></span>&nbsp;</div></li><li><div>          if ( isset( $this-&gt;field['all_styles'] ) && ! empty( $this-&gt;field['all_styles'] ) ) {&nbsp;</div></li><li><div>              $this-&gt;field['all-styles'] = $this-&gt;field['all_styles'];&nbsp;</div></li><li><div>              unset ( $this-&gt;field['all_styles'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Check for font-backup.  If it's set, stick it on a variabhle for</span>&nbsp;</div></li><li><div>          <span class="comment">// later use.</span>&nbsp;</div></li><li><div>          if ( ! empty( $font['font-family'] ) && ! empty( $font['font-backup'] ) ) {&nbsp;</div></li><li><div>              $font['font-family'] = str_replace( ', ' . $font['font-backup'], '', $font['font-family'] );&nbsp;</div></li><li><div>              $fontBackup = ', ' . $font['font-backup'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">//                if (strpos($font['font-family'], ' ')) {</span>&nbsp;</div></li><li><div><span class="comment">//                    $font['font-family'] = '&quot;' . $font['font-family'] . '&quot;';</span>&nbsp;</div></li><li><div><span class="comment">//                }</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $style = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $fontValueSet = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $font ) ) {&nbsp;</div></li><li><div>              foreach ( $font as $key =&gt; $value ) {&nbsp;</div></li><li><div>                  if ( ! empty( $value ) && in_array( $key, array( 'font-family', 'font-weight' ) ) ) {&nbsp;</div></li><li><div>                      $fontValueSet = true;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $font ) ) {&nbsp;</div></li><li><div>              foreach ( $font as $key =&gt; $value ) {&nbsp;</div></li><li><div>                  if ( $key == 'font-options' ) {&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  <span class="comment">// Check for font-family key</span>&nbsp;</div></li><li><div>                  if ( 'font-family' == $key ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Enclose font family in quotes if spaces are in the</span>&nbsp;</div></li><li><div>                      <span class="comment">// name.  This is necessary because if there are numerics</span>&nbsp;</div></li><li><div>                      <span class="comment">// in the font name, they will not render properly.</span>&nbsp;</div></li><li><div>                      <span class="comment">// Google should know better.</span>&nbsp;</div></li><li><div>                      if (strpos($value, ' ') && !strpos($value, ', ')) {&nbsp;</div></li><li><div>                          $value = '&quot;' . $value . '&quot;';&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Ensure fontBackup isn't empty (we already option</span>&nbsp;</div></li><li><div>                      <span class="comment">// checked this earlier.  No need to do it again.</span>&nbsp;</div></li><li><div>                      if ( ! empty( $fontBackup ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          <span class="comment">// Apply the backup font to the font-family element</span>&nbsp;</div></li><li><div>                          <span class="comment">// via the saved variable.  We do this here so it</span>&nbsp;</div></li><li><div>                          <span class="comment">// doesn't get appended to the Google stuff below.</span>&nbsp;</div></li><li><div>                          $value .= $fontBackup;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( empty( $value ) && in_array( $key, array(&nbsp;</div></li><li><div>                          'font-weight', &nbsp;</div></li><li><div>                          'font-style'&nbsp;</div></li><li><div> ) ) && $fontValueSet == true&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>                      $value = &quot;normal&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ($key == 'font-weight' && $this-&gt;field['font-weight'] == false) {&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ($key == 'font-style' && $this-&gt;field['font-style'] == false) {&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( $key == &quot;google&quot; || $key == &quot;subsets&quot; || $key == &quot;font-backup&quot; || empty( $value ) ) {&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  $style .= $key . ':' . $value . ';';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if ( isset( $this-&gt;parent-&gt;args['async_typography'] ) && $this-&gt;parent-&gt;args['async_typography'] ) {&nbsp;</div></li><li><div>                  $style .= 'opacity: 1;visibility: visible;-webkit-transition: opacity 0.24s ease-in-out;-moz-transition: opacity 0.24s ease-in-out;transition: opacity 0.24s ease-in-out;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $style ) ) {&nbsp;</div></li><li><div>              if ( ! empty( $this-&gt;field['output'] ) && is_array( $this-&gt;field['output'] ) ) {&nbsp;</div></li><li><div>                  $keys = implode( &quot;, &quot;, $this-&gt;field['output'] );&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;outputCSS .= $keys . &quot;{&quot; . $style . '}';&nbsp;</div></li><li><div>                  if ( isset( $this-&gt;parent-&gt;args['async_typography'] ) && $this-&gt;parent-&gt;args['async_typography'] ) {&nbsp;</div></li><li><div>                      $key_string = &quot;&quot;;&nbsp;</div></li><li><div>                      $key_string_ie = &quot;&quot;;&nbsp;</div></li><li><div>                      foreach ( $this-&gt;field['output'] as $value ) {&nbsp;</div></li><li><div>                          $key_string .= &quot;.wf-loading &quot; . $value . ', ';&nbsp;</div></li><li><div>                          $key_string_ie .= &quot;.ie.wf-loading &quot; . $value . ', ';&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;outputCSS .= $key_string . &quot;{opacity: 0;}&quot;;&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;outputCSS .= $key_string_ie . &quot;{visibility: hidden;}&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $this-&gt;field['compiler'] ) && is_array( $this-&gt;field['compiler'] ) ) {&nbsp;</div></li><li><div>                  $keys = implode( &quot;, &quot;, $this-&gt;field['compiler'] );&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;compilerCSS .= $keys . &quot;{&quot; . $style . '}';&nbsp;</div></li><li><div>                  if ( isset( $this-&gt;parent-&gt;args['async_typography'] ) && $this-&gt;parent-&gt;args['async_typography'] ) {&nbsp;</div></li><li><div>                      $key_string = &quot;&quot;;&nbsp;</div></li><li><div>                      $key_string_ie = &quot;&quot;;&nbsp;</div></li><li><div>                      foreach ( $this-&gt;field['compiler'] as $value ) {&nbsp;</div></li><li><div>                          $key_string .= &quot;.wf-loading &quot; . $value . ', ';&nbsp;</div></li><li><div>                          $key_string_ie .= &quot;.ie.wf-loading &quot; . $value . ', ';&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;compilerCSS .= $key_string . &quot;{opacity: 0;}&quot;;&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;compilerCSS .= $key_string_ie . &quot;{visibility: hidden;}&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Google only stuff!</span>&nbsp;</div></li><li><div>          if ( ! empty( $font['font-family'] ) && ! empty( $this-&gt;field['google'] ) && filter_var( $this-&gt;field['google'], FILTER_VALIDATE_BOOLEAN ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Added standard font matching check to avoid output to Google fonts call - kp</span>&nbsp;</div></li><li><div>              <span class="comment">// If no custom font array was supplied, the load it with default</span>&nbsp;</div></li><li><div>              <span class="comment">// standard fonts.</span>&nbsp;</div></li><li><div>              if ( empty( $this-&gt;field['fonts'] ) ) {&nbsp;</div></li><li><div>                  $this-&gt;field['fonts'] = $this-&gt;std_fonts;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Ensure the fonts array is NOT empty</span>&nbsp;</div></li><li><div>              if ( ! empty( $this-&gt;field['fonts'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">//Make the font keys in the array lowercase, for case-insensitive matching</span>&nbsp;</div></li><li><div>                  $lcFonts = array_change_key_case( $this-&gt;field['fonts'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Rebuild font array with all keys stripped of spaces</span>&nbsp;</div></li><li><div>                  $arr = array();&nbsp;</div></li><li><div>                  foreach ( $lcFonts as $key =&gt; $value ) {&nbsp;</div></li><li><div>                      $key = str_replace( ', ', ', ', $key );&nbsp;</div></li><li><div>                      $arr[ $key ] = $value;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $lcFonts = array_change_key_case( $this-&gt;field['custom_fonts'] );&nbsp;</div></li><li><div>                  foreach ( $lcFonts as $group =&gt; $fontArr ) {&nbsp;</div></li><li><div>                      foreach ( $fontArr as $key =&gt; $value ) {&nbsp;</div></li><li><div>                          $arr[ strtolower( $key ) ] = $key;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $lcFonts = $arr;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  unset( $arr );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// lowercase chosen font for matching purposes</span>&nbsp;</div></li><li><div>                  $lcFont = strtolower( $font['font-family'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Remove spaces after commas in chosen font for mathcing purposes.</span>&nbsp;</div></li><li><div>                  $lcFont = str_replace( ', ', ', ', $lcFont );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// If the lower cased passed font-family is NOT found in the standard font array</span>&nbsp;</div></li><li><div>                  <span class="comment">// Then it's a Google font, so process it for output.</span>&nbsp;</div></li><li><div>                  if ( ! array_key_exists( $lcFont, $lcFonts ) ) {&nbsp;</div></li><li><div>                      $family = $font['font-family'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Strip out spaces in font names and replace with with plus signs</span>&nbsp;</div></li><li><div>                      <span class="comment">// TODO?: This method doesn't respect spaces after commas, hence the reason</span>&nbsp;</div></li><li><div>                      <span class="comment">// for the std_font array keys having no spaces after commas.  This could be</span>&nbsp;</div></li><li><div>                      <span class="comment">// fixed with RegEx in the future.</span>&nbsp;</div></li><li><div>                      $font['font-family'] = str_replace( ' ', '+', $font['font-family'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Push data to parent typography variable.</span>&nbsp;</div></li><li><div>                      if ( empty( $this-&gt;parent-&gt;typography[ $font['font-family'] ] ) ) {&nbsp;</div></li><li><div>                          $this-&gt;parent-&gt;typography[ $font['font-family'] ] = array();&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( isset( $this-&gt;field['all-styles'] ) ) {&nbsp;</div></li><li><div>                          if ( ! isset( $font['font-options'] ) || empty( $font['font-options'] ) ) {&nbsp;</div></li><li><div>                              $this-&gt;getGoogleArray();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              if ( isset( $this-&gt;parent-&gt;googleArray ) && ! empty( $this-&gt;parent-&gt;googleArray ) && isset( $this-&gt;parent-&gt;googleArray[ $family ] ) ) {&nbsp;</div></li><li><div>                                  $font['font-options'] = $this-&gt;parent-&gt;googleArray[ $family ];&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              $font['font-options'] = json_decode( $font['font-options'], true );&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                          <span class="comment">//print_r($font['font-options']);</span>&nbsp;</div></li><li><div>                          <span class="comment">//exit();</span>&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( isset( $font['font-options'] ) && ! empty( $font['font-options'] ) && isset( $this-&gt;field['all-styles'] ) && filter_var( $this-&gt;field['all-styles'], FILTER_VALIDATE_BOOLEAN ) ) {&nbsp;</div></li><li><div>                          if ( isset( $font['font-options'] ) && ! empty( $font['font-options']['variants'] ) ) {&nbsp;</div></li><li><div>                              if ( ! isset( $this-&gt;parent-&gt;typography[ $font['font-family'] ]['all-styles'] ) || empty( $this-&gt;parent-&gt;typography[ $font['font-family'] ]['all-styles'] ) ) {&nbsp;</div></li><li><div>                                  $this-&gt;parent-&gt;typography[ $font['font-family'] ]['all-styles'] = array();&nbsp;</div></li><li><div>                                  foreach ( $font['font-options']['variants'] as $variant ) {&nbsp;</div></li><li><div>                                      $this-&gt;parent-&gt;typography[ $font['font-family'] ]['all-styles'][] = $variant['id'];&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( ! empty( $font['font-weight'] ) ) {&nbsp;</div></li><li><div>                          if ( empty( $this-&gt;parent-&gt;typography[ $font['font-family'] ]['font-weight'] ) || ! in_array( $font['font-weight'], $this-&gt;parent-&gt;typography[ $font['font-family'] ]['font-weight'] ) ) {&nbsp;</div></li><li><div>                              $style = $font['font-weight'];&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( ! empty( $font['font-style'] ) ) {&nbsp;</div></li><li><div>                              $style .= $font['font-style'];&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( empty( $this-&gt;parent-&gt;typography[ $font['font-family'] ]['font-style'] ) || ! in_array( $style, $this-&gt;parent-&gt;typography[ $font['font-family'] ]['font-style'] ) ) {&nbsp;</div></li><li><div>                              $this-&gt;parent-&gt;typography[ $font['font-family'] ]['font-style'][] = $style;&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( ! empty( $font['subsets'] ) ) {&nbsp;</div></li><li><div>                          if ( empty( $this-&gt;parent-&gt;typography[ $font['font-family'] ]['subset'] ) || ! in_array( $font['subsets'], $this-&gt;parent-&gt;typography[ $font['font-family'] ]['subset'] ) ) {&nbsp;</div></li><li><div>                              $this-&gt;parent-&gt;typography[ $font['font-family'] ]['subset'][] = $font['subsets'];&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  } <span class="comment">// !array_key_exists</span>&nbsp;</div></li><li><div>              } <span class="comment">//!empty fonts array</span>&nbsp;</div></li><li><div>          } <span class="comment">// Typography not set</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      private function localizeStdFonts() {&nbsp;</div></li><li><div>          if ( false == $this-&gt;user_fonts ) {&nbsp;</div></li><li><div>              if ( isset( $this-&gt;parent-&gt;fonts['std'] ) && ! empty( $this-&gt;parent-&gt;fonts['std'] ) ) {&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $this-&gt;parent-&gt;font_groups['std'] = array(&nbsp;</div></li><li><div>                  'text' =&gt; __( 'Standard Fonts', 'evolve' ), &nbsp;</div></li><li><div>                  'children' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $this-&gt;field['fonts'] as $font =&gt; $extra ) {&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;font_groups['std']['children'][] = array(&nbsp;</div></li><li><div>                      'id' =&gt; $font, &nbsp;</div></li><li><div>                      'text' =&gt; $font, &nbsp;</div></li><li><div>                      'data-google' =&gt; 'false', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $this-&gt;field['custom_fonts'] !== false ) {&nbsp;</div></li><li><div>              $this-&gt;field['custom_fonts'] = apply_filters( &quot;redux/{$this-&gt;parent-&gt;args['opt_name']}/field/typography/custom_fonts&quot;, array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $this-&gt;field['custom_fonts'] ) ) {&nbsp;</div></li><li><div>                  foreach ( $this-&gt;field['custom_fonts'] as $group =&gt; $fonts ) {&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;font_groups['customfonts'] = array(&nbsp;</div></li><li><div>                          'text' =&gt; $group, &nbsp;</div></li><li><div>                          'children' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      foreach ( $fonts as $family =&gt; $v ) {&nbsp;</div></li><li><div>                          $this-&gt;parent-&gt;font_groups['customfonts']['children'][] = array(&nbsp;</div></li><li><div>                              'id' =&gt; $family, &nbsp;</div></li><li><div>                              'text' =&gt; $family, &nbsp;</div></li><li><div>                              'data-google' =&gt; 'false', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       *   Construct the google array from the stored JSON/HTML</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function getGoogleArray() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ( isset( $this-&gt;parent-&gt;fonts['google'] ) && ! empty( $this-&gt;parent-&gt;fonts['google'] ) ) || isset( $this-&gt;parent-&gt;fonts['google'] ) && $this-&gt;parent-&gt;fonts['google'] == false ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $gFile = dirname( __FILE__ ) . '/googlefonts.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Weekly update</span>&nbsp;</div></li><li><div>          if ( isset( $this-&gt;parent-&gt;args['google_update_weekly'] ) && $this-&gt;parent-&gt;args['google_update_weekly'] && ! empty( $this-&gt;parent-&gt;args['google_api_key'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( file_exists( $gFile ) ) {&nbsp;</div></li><li><div>                  <span class="comment">// Keep the fonts updated weekly</span>&nbsp;</div></li><li><div>                  $weekback = strtotime( date( 'jS F Y', time() + ( 60 * 60 * 24 * - 7 ) ) );&nbsp;</div></li><li><div>                  $last_updated = filemtime( $gFile );&nbsp;</div></li><li><div>                  if ( $last_updated &lt; $weekback ) {&nbsp;</div></li><li><div>                      unlink( $gFile );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! file_exists( $gFile ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $result = @wp_remote_get( apply_filters( 'redux-google-fonts-api-url', 'https:<span class="comment">//www.googleapis.com/webfonts/v1/webfonts?key=' ) . $this-&gt;parent-&gt;args['google_api_key'], array( 'sslverify' =&gt; false ) );</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! is_wp_error( $result ) && $result['response']['code'] == 200 ) {&nbsp;</div></li><li><div>                  $result = json_decode( $result['body'] );&nbsp;</div></li><li><div>                  foreach ( $result-&gt;items as $font ) {&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;googleArray[ $font-&gt;family ] = array(&nbsp;</div></li><li><div>                          'variants' =&gt; $this-&gt;getVariants( $font-&gt;variants ), &nbsp;</div></li><li><div>                          'subsets' =&gt; $this-&gt;getSubsets( $font-&gt;subsets )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( ! empty( $this-&gt;parent-&gt;googleArray ) ) {&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;filesystem-&gt;execute( 'put_contents', $gFile, array( 'content' =&gt; &quot;&lt;?php return json_decode( '&quot; . json_encode( $this-&gt;parent-&gt;googleArray ) . &quot;', true );&quot; ) );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! file_exists( $gFile ) ) {&nbsp;</div></li><li><div>              $this-&gt;parent-&gt;fonts['google'] = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! isset( $this-&gt;parent-&gt;fonts['google'] ) || empty( $this-&gt;parent-&gt;fonts['google'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $fonts = include $gFile;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $fonts === true ) {&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;fonts['google'] = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $fonts ) && ! empty( $fonts ) && is_array( $fonts ) && $fonts != false ) {&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;fonts['google'] = $fonts;&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;googleArray = $fonts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// optgroup</span>&nbsp;</div></li><li><div>                  $this-&gt;parent-&gt;font_groups['google'] = array(&nbsp;</div></li><li><div>                      'text' =&gt; __( 'Google Webfonts', 'evolve' ), &nbsp;</div></li><li><div>                      'children' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// options</span>&nbsp;</div></li><li><div>                  foreach ( $this-&gt;parent-&gt;fonts['google'] as $font =&gt; $extra ) {&nbsp;</div></li><li><div>                      $this-&gt;parent-&gt;font_groups['google']['children'][] = array(&nbsp;</div></li><li><div>                          'id' =&gt; $font, &nbsp;</div></li><li><div>                          'text' =&gt; $font, &nbsp;</div></li><li><div>                          'data-google' =&gt; 'true'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * getSubsets Function.</span>&nbsp;</div></li><li><div><span class="comment">       * Clean up the Google Webfonts subsets to be human readable</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 0.2.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private function getSubsets( $var ) {&nbsp;</div></li><li><div>          $result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $var as $v ) {&nbsp;</div></li><li><div>              if ( strpos( $v, &quot;-ext&quot; ) ) {&nbsp;</div></li><li><div>                  $name = ucfirst( str_replace( &quot;-ext&quot;, &quot; Extended&quot;, $v ) );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $name = ucfirst( $v );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              array_push( $result, array(&nbsp;</div></li><li><div>                  'id' =&gt; $v, &nbsp;</div></li><li><div>                  'name' =&gt; $name&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return array_filter( $result );&nbsp;</div></li><li><div>      }  <span class="comment"><span class="comment"><span class="comment"><span class="comment">//function</span></span></span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * getVariants Function.</span>&nbsp;</div></li><li><div><span class="comment">       * Clean up the Google Webfonts variants to be human readable</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since ReduxFramework 0.2.0</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private function getVariants( $var ) {&nbsp;</div></li><li><div>          $result = array();&nbsp;</div></li><li><div>          $italic = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $var as $v ) {&nbsp;</div></li><li><div>              $name = &quot;&quot;;&nbsp;</div></li><li><div>              if ( $v[0] == 1 ) {&nbsp;</div></li><li><div>                  $name = 'Ultra-Light 100';&nbsp;</div></li><li><div>              } else if ( $v[0] == 2 ) {&nbsp;</div></li><li><div>                  $name = 'Light 200';&nbsp;</div></li><li><div>              } else if ( $v[0] == 3 ) {&nbsp;</div></li><li><div>                  $name = 'Book 300';&nbsp;</div></li><li><div>              } else if ( $v[0] == 4 || $v[0] == &quot;r&quot; || $v[0] == &quot;i&quot; ) {&nbsp;</div></li><li><div>                  $name = 'Normal 400';&nbsp;</div></li><li><div>              } else if ( $v[0] == 5 ) {&nbsp;</div></li><li><div>                  $name = 'Medium 500';&nbsp;</div></li><li><div>              } else if ( $v[0] == 6 ) {&nbsp;</div></li><li><div>                  $name = 'Semi-Bold 600';&nbsp;</div></li><li><div>              } else if ( $v[0] == 7 ) {&nbsp;</div></li><li><div>                  $name = 'Bold 700';&nbsp;</div></li><li><div>              } else if ( $v[0] == 8 ) {&nbsp;</div></li><li><div>                  $name = 'Extra-Bold 800';&nbsp;</div></li><li><div>              } else if ( $v[0] == 9 ) {&nbsp;</div></li><li><div>                  $name = 'Ultra-Bold 900';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $v == &quot;regular&quot; ) {&nbsp;</div></li><li><div>                  $v = &quot;400&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( strpos( $v, &quot;italic&quot; ) || $v == &quot;italic&quot; ) {&nbsp;</div></li><li><div>                  $name .= &quot; Italic&quot;;&nbsp;</div></li><li><div>                  $name = trim( $name );&nbsp;</div></li><li><div>                  if ( $v == &quot;italic&quot; ) {&nbsp;</div></li><li><div>                      $v = &quot;400italic&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  $italic[] = array(&nbsp;</div></li><li><div>                      'id' =&gt; $v, &nbsp;</div></li><li><div>                      'name' =&gt; $name&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $result[] = array(&nbsp;</div></li><li><div>                      'id' =&gt; $v, &nbsp;</div></li><li><div>                      'name' =&gt; $name&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $italic as $item ) {&nbsp;</div></li><li><div>              $result[] = $item;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return array_filter( $result );&nbsp;</div></li><li><div>      }   <span class="comment"><span class="comment"><span class="comment"><span class="comment">//function</span></span></span></span>&nbsp;</div></li><li><div>  }       <span class="comment">//class</span>&nbsp;</div></li><li><div>}           <span class="comment">//class</span> exists&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>theme</li><li><span></span>file</li><li><span></span></li><li><span></span>evolve</li><li><span></span>3.7.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>