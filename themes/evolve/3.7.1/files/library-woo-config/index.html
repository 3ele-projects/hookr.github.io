<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="theme" data-version="3.7.1" data-slug="evolve" data-type="file" data-id="98471"><head xmlns="http://www.w3.org/1999/xhtml"><title> library-woo-config | file | Evolve | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, theme, evolve, 3.7.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=e27f150fa3227690da14fc46df280d25' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/library-woo-config/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibrary-woo-config%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Flibrary-woo-config%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"theme-evolve-3.7.1-file-library-woo-config","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="library-woo-config" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to themes." href="http://hookr.io/themes/" class=""><span property="name">themes</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to evolve." href="http://hookr.io/themes/evolve/" class="plugin"><span property="name">evolve</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.7.1." href="http://hookr.io/themes/evolve/3.7.1/" class="H_VERSION"><span property="name">3.7.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/themes/evolve/3.7.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">library-woo-config</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="742"><a href="http://hookr.io/themes/evolve/3.7.1/all/" title="All">All <span class="count badge">742</span></a></li><li class="" data-id="new" data-count="44"><a href="http://hookr.io/themes/evolve/3.7.1/new/" title="New">New <span class="count badge">44</span></a></li><li class="" data-id="hooks" data-count="473"><a href="http://hookr.io/themes/evolve/3.7.1/hooks/" title="Hooks">Hooks <span class="count badge">473</span></a></li><li class="" data-id="action" data-count="274"><a href="http://hookr.io/themes/evolve/3.7.1/actions/" title="Actions">Actions <span class="count badge">274</span></a></li><li class="" data-id="filter" data-count="199"><a href="http://hookr.io/themes/evolve/3.7.1/filters/" title="Filters">Filters <span class="count badge">199</span></a></li><li class="" data-id="class" data-count="123"><a href="http://hookr.io/themes/evolve/3.7.1/classes/" title="Classes">Classes <span class="count badge">123</span></a></li><li class="" data-id="constant" data-count="17"><a href="http://hookr.io/themes/evolve/3.7.1/constants/" title="Constants">Constants <span class="count badge">17</span></a></li><li class="" data-id="function" data-count="129"><a href="http://hookr.io/themes/evolve/3.7.1/functions/" title="Functions">Functions <span class="count badge">129</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/themes/evolve/3.7.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class="active"><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/library/woo-config.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Theme4Press Framework</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * WARNING: This file is part of the Theme4Press Core Framework.</span>&nbsp;</div></li><li><div><span class="comment"> * Do not edit the core files.</span>&nbsp;</div></li><li><div><span class="comment"> * Add any modifications necessary under a child theme.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package  Theme4Press/Template</span>&nbsp;</div></li><li><div><span class="comment"> * @author   Theme4Press</span>&nbsp;</div></li><li><div><span class="comment"> * @link     http://theme4press.com</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly</span>&nbsp;</div></li><li><div>if (!defined('ABSPATH')) {&nbsp;</div></li><li><div>  die;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if(session_id() == '' || !isset($_SESSION))&nbsp;</div></li><li><div>  session_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('init', 'woocommerce_evolve_ordering');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function woocommerce_evolve_ordering() {&nbsp;</div></li><li><div>  $woocommerce_evolve_ordering = evolve_get_option('evl_woocommerce_evolve_ordering', '0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** remove default shorting option */</span>&nbsp;</div></li><li><div>  remove_action('woocommerce_before_shop_loop', 'woocommerce_catalog_ordering', 30);&nbsp;</div></li><li><div>  if (!$woocommerce_evolve_ordering) {&nbsp;</div></li><li><div>      add_action('woocommerce_before_shop_loop', 'evolve_woocommerce_catalog_ordering', 30);&nbsp;</div></li><li><div>      add_action('woocommerce_get_catalog_ordering_args', 'evolve_woocommerce_get_catalog_ordering_args', 20);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Don't duplicate me!</span>&nbsp;</div></li><li><div>if (!class_exists('t4pTemplateWoo')) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Class to apply woocommerce templates</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 4.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  class t4pTemplateWoo {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function __construct() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_filter('woocommerce_show_page_title', array($this, 'shop_title'), 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_action('woocommerce_before_main_content', array($this, 'add_sidebar_2'), 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          remove_action('woocommerce_before_main_content', 'woocommerce_output_content_wrapper', 10);&nbsp;</div></li><li><div>          remove_action('woocommerce_after_main_content', 'woocommerce_output_content_wrapper_end', 10);&nbsp;</div></li><li><div>          remove_action('woocommerce_before_main_content', 'woocommerce_breadcrumb', 20, 0);&nbsp;</div></li><li><div>          add_action('woocommerce_before_main_content', array($this, 'before_container'), 10);&nbsp;</div></li><li><div>          add_action('woocommerce_after_main_content', array($this, 'after_container'), 10);&nbsp;</div></li><li><div>          add_action('woocommerce_before_main_content', array($this, 'shop_breadcrumb'), 20, 0);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          remove_action('woocommerce_sidebar', 'woocommerce_get_sidebar', 10);&nbsp;</div></li><li><div>          add_action('woocommerce_sidebar', array($this, 'add_sidebar'), 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Products Loop</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          add_action('woocommerce_after_shop_loop_item', array($this, 'before_shop_item_buttons'), 9);&nbsp;</div></li><li><div>          add_action('woocommerce_after_shop_loop_item', array($this, 'after_shop_item_buttons'), 11);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Single Product Page</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          add_action('woocommerce_single_product_summary', array($this, 'add_product_border'), 19);&nbsp;</div></li><li><div>          remove_action('woocommerce_single_product_summary', 'woocommerce_template_single_rating', 10);&nbsp;</div></li><li><div>          remove_action('woocommerce_single_product_summary', 'woocommerce_template_single_price', 10);&nbsp;</div></li><li><div>          add_action('woocommerce_single_product_summary', 'woocommerce_template_single_price', 10);&nbsp;</div></li><li><div>          add_action('woocommerce_single_product_summary', 'woocommerce_template_single_rating', 11);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * WooCommerce 2.3 Remove extra checkout button</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          remove_action('woocommerce_proceed_to_checkout', 'woocommerce_button_proceed_to_checkout', 10);&nbsp;</div></li><li><div>          <span class="comment">// Backwards compatability to 2.2</span>&nbsp;</div></li><li><div>          add_filter('woocommerce_template_path', array($this, 'backwards_compatability'));&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// end __construct();</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filter method to modify path to WooCommerce files if WooCommerce is a version less than 2.3</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.7.2</span>&nbsp;</div></li><li><div><span class="comment">       * @return relative path of WooCommerce template files within the theme</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function backwards_compatability($path) {&nbsp;</div></li><li><div>          if (!self::is_wc_version_gte_2_3()) {&nbsp;</div></li><li><div>              $path = &quot;woocommerce/compatability/2.2/&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          return $path;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Helper method to get the version of the currently installed WooCommerce</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.7.2</span>&nbsp;</div></li><li><div><span class="comment">       * @return string woocommerce version number or null</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private static function get_wc_version() {&nbsp;</div></li><li><div>          return defined('WC_VERSION') && WC_VERSION ? WC_VERSION : null;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Returns true if the installed version of WooCommerce is 2.3 or greater</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.7.2</span>&nbsp;</div></li><li><div><span class="comment">       * @return boolean true if the installed version of WooCommerce is 2.3 or greater</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public static function is_wc_version_gte_2_3() {&nbsp;</div></li><li><div>          return self::get_wc_version() && version_compare(self::get_wc_version(), '2.3', '&gt;=');&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function before_container() {&nbsp;</div></li><li><div>          global $post;&nbsp;</div></li><li><div>          global $wp_query;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (is_shop()) {&nbsp;</div></li><li><div>              $pageID = get_option('woocommerce_shop_page_id');&nbsp;</div></li><li><div>          } elseif (class_exists('Woocommerce') && (is_product_category() || is_product_tag())) {&nbsp;</div></li><li><div>              $pageID = '';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pageID = $post-&gt;ID;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $custom_fields = get_post_custom_values('_wp_page_template', $pageID);&nbsp;</div></li><li><div>          if (is_array($custom_fields) && !empty($custom_fields)) {&nbsp;</div></li><li><div>              $page_template = $custom_fields[0];&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $page_template = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $evolve_layout = evolve_get_option('evl_layout', '2cl');&nbsp;</div></li><li><div>          $evolve_post_layout = evolve_get_option('evl_post_layout', 'two');&nbsp;</div></li><li><div>          $evolve_opt1_width_content = evolve_get_option('evl_opt1_width_content', '8');&nbsp;</div></li><li><div>          $evolve_opt2_width_content = evolve_get_option('evl_opt2_width_content', '6');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $layout_css = '';&nbsp;</div></li><li><div>          echo'&lt;div id=&quot;primary&quot; class=&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($evolve_layout == &quot;1c&quot;) {&nbsp;</div></li><li><div>              $layout_css.= ' col-md-12';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (($evolve_layout == &quot;2cr&quot; && ($evolve_post_layout == &quot;two&quot;) || $evolve_layout == &quot;2cl&quot; && ($evolve_post_layout == &quot;two&quot;))) {&nbsp;</div></li><li><div>                  $layout_css.= 'col-md-12 col-sm-' . $evolve_opt1_width_content . ' col-md-' . $evolve_opt1_width_content . '';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (($evolve_layout == &quot;3cm&quot; || $evolve_layout == &quot;3cl&quot; || $evolve_layout == &quot;3cr&quot;)) {&nbsp;</div></li><li><div>                  $layout_css.= 'col-md-12 col-sm-' . $evolve_opt2_width_content . ' col-md-' . $evolve_opt2_width_content . '';&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $layout_css.= 'col-md-12 col-sm-' . $evolve_opt1_width_content . ' col-md-' . $evolve_opt1_width_content . '';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (is_single() || is_page()) {&nbsp;</div></li><li><div>                  $layout_css.= ' col-single';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo $layout_css;&nbsp;</div></li><li><div>          echo '&quot;&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function shop_title() {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function after_container() {&nbsp;</div></li><li><div>          echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function add_sidebar_2() {&nbsp;</div></li><li><div>          global $wp_query, $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (is_shop()) {&nbsp;</div></li><li><div>              $pageID = get_option('woocommerce_shop_page_id');&nbsp;</div></li><li><div>          } elseif (class_exists('Woocommerce') && (is_product_category() || is_product_tag())) {&nbsp;</div></li><li><div>              $pageID = '';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pageID = $post-&gt;ID;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $get_sidebar = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $evolve_layout = evolve_get_option('evl_layout', '2cl');&nbsp;</div></li><li><div>          $evolve_opt2_width_sidebar2 = evolve_get_option('evl_opt2_width_sidebar2', '3');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($evolve_layout == &quot;3cm&quot; || $evolve_layout == &quot;3cl&quot; || $evolve_layout == &quot;3cr&quot;) {&nbsp;</div></li><li><div>              $get_sidebar = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $sidebar_css = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($get_sidebar) {&nbsp;</div></li><li><div>              <span class="comment">//get_sidebar('2');</span>&nbsp;</div></li><li><div>              if (class_exists('Woocommerce')) {&nbsp;</div></li><li><div>                  if (is_cart() || is_checkout() || is_account_page() || (get_option('woocommerce_thanks_page_id') && is_page(get_option('woocommerce_thanks_page_id')))) {&nbsp;</div></li><li><div>                      $sidebar_css = '';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;div id=&quot;secondary-2&quot; class=&quot;aside ';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">//use PHP switch statement, is easier to understand.</span></span>&nbsp;</div></li><li><div>              switch ($evolve_layout):&nbsp;</div></li><li><div>                  case &quot;1c&quot;:&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment"><span class="comment">//do nothing</span></span></span>&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>                  case &quot;2cl&quot;:&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment"><span class="comment">//do nothing</span></span></span>&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>                  case &quot;2cr&quot;:&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment"><span class="comment">//do nothing</span></span></span>&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>                  case &quot;3cm&quot;:&nbsp;</div></li><li><div>                      $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar2 . ' col-md-' . $evolve_opt2_width_sidebar2 . '';&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>                  case &quot;3cl&quot;:&nbsp;</div></li><li><div>                      $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar2 . ' col-md-' . $evolve_opt2_width_sidebar2 . '';&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>                  case &quot;3cr&quot;:&nbsp;</div></li><li><div>                      $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar2 . ' col-md-' . $evolve_opt2_width_sidebar2 . '';&nbsp;</div></li><li><div>                      break;&nbsp;</div></li><li><div>              endswitch;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo $sidebar_css.'&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              wp_reset_query();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (dynamic_sidebar('sidebar-2')) :&nbsp;</div></li><li><div>              endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function add_sidebar() {&nbsp;</div></li><li><div>          global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (is_shop()) {&nbsp;</div></li><li><div>              $pageID = get_option('woocommerce_shop_page_id');&nbsp;</div></li><li><div>          } elseif (class_exists('Woocommerce') && (is_product_category() || is_product_tag())) {&nbsp;</div></li><li><div>              $pageID = '';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pageID = $post-&gt;ID;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $evolve_layout = evolve_get_option('evl_layout', '2cl');&nbsp;</div></li><li><div>          $evolve_opt1_width_sidebar1 = evolve_get_option('evl_opt1_width_sidebar1', '4');&nbsp;</div></li><li><div>          $evolve_opt2_width_sidebar1 = evolve_get_option('evl_opt2_width_sidebar1', '3');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $sidebar_css = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (class_exists('Woocommerce')) {&nbsp;</div></li><li><div>              if (is_cart() || is_checkout() || is_account_page() || (get_option('woocommerce_thanks_page_id') && is_page(get_option('woocommerce_thanks_page_id')))) {&nbsp;</div></li><li><div>                  $sidebar_css = '';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;div id=&quot;secondary&quot; class=&quot;aside ';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">//use PHP switch statement, is easier to understand.</span></span>&nbsp;</div></li><li><div>          switch ($evolve_layout):&nbsp;</div></li><li><div>              case &quot;1c&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = '';&nbsp;</div></li><li><div>                      echo '&quot;';&nbsp;</div></li><li><div>                      echo &quot;style='display:none;'&quot;;&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case &quot;2cl&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = 'col-sm-' . $evolve_opt1_width_sidebar1 . ' col-md-' . $evolve_opt1_width_sidebar1 . '';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case &quot;2cr&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = 'col-sm-' . $evolve_opt1_width_sidebar1 . ' col-md-' . $evolve_opt1_width_sidebar1 . '';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case &quot;3cm&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar1 . ' col-md-' . $evolve_opt2_width_sidebar1 . '';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case &quot;3cl&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar1 . ' col-md-' . $evolve_opt2_width_sidebar1 . '';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case &quot;3cr&quot;:&nbsp;</div></li><li><div>                  $sidebar_css = 'col-xs-12 col-sm-' . $evolve_opt2_width_sidebar1 . ' col-md-' . $evolve_opt2_width_sidebar1 . '';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>          endswitch;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($evolve_layout != '1c') {&nbsp;</div></li><li><div>              echo $sidebar_css.'&quot;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo '&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_reset_query();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (!dynamic_sidebar('sidebar-1')) :&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo '&lt;/div&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function before_shop_item_buttons() {&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;product-buttons&quot;&gt;&lt;div class=&quot;product-buttons-container clearfix&quot;&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function after_shop_item_buttons() {&nbsp;</div></li><li><div>          echo '&lt;/div&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function add_product_border() {&nbsp;</div></li><li><div>          echo '&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;div class=&quot;product-border&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function shop_breadcrumb() {&nbsp;</div></li><li><div>          $evolve_breadcrumbs = evolve_get_option('evl_breadcrumbs', '1');&nbsp;</div></li><li><div>          $evolve_pagetitlebar_layout = evolve_get_option('evl_pagetitlebar_layout', '0');&nbsp;</div></li><li><div>          if ($evolve_breadcrumbs == &quot;1&quot; && $evolve_pagetitlebar_layout == '0'):&nbsp;</div></li><li><div>              woocommerce_breadcrumb();&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// end t4pTemplateWoo() class</span>&nbsp;</div></li><li><div>  new t4pTemplateWoo();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter('get_product_search_form', 'evolve_product_search_form');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_product_search_form($form) {&nbsp;</div></li><li><div>  $form = '&lt;form role=&quot;search&quot; method=&quot;get&quot; id=&quot;searchform&quot; action=&quot;' . esc_url(home_url('/')) . '&quot;&gt;&nbsp;</div></li><li><div>  &lt;div&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;text&quot; value=&quot;' . get_search_query() . '&quot; name=&quot;s&quot; id=&quot;s&quot; placeholder=&quot;' . __('Search...', 'evolve') . '&quot; /&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;hidden&quot; name=&quot;post_type&quot; value=&quot;product&quot; /&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $form;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>remove_action('woocommerce_before_shop_loop', 'woocommerce_result_count', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Category page show shorting order</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_catalog_ordering() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $woo_items = evolve_get_option('evl_woo_items', '12');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (isset($_SERVER['QUERY_STRING'])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      parse_str($_SERVER['QUERY_STRING'], $params);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $query_string = '?' . $_SERVER['QUERY_STRING'];&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $query_string = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// replace it with theme option</span>&nbsp;</div></li><li><div>  if ($woo_items) {&nbsp;</div></li><li><div>      $per_page = $woo_items;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $per_page = 12;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pob = !empty($params['product_orderby']) ? $params['product_orderby'] : 'default';&nbsp;</div></li><li><div>  $po = !empty($params['product_order']) ? $params['product_order'] : 'asc';&nbsp;</div></li><li><div>  $pc = !empty($params['product_count']) ? $params['product_count'] : $per_page;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html = '';&nbsp;</div></li><li><div>  $html .= '&lt;div class=&quot;catalog-ordering clearfix&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;div class=&quot;orderby-order-container&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;ul class=&quot;orderby order-dropdown&quot;&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;span class=&quot;current-li&quot;&gt;&lt;span class=&quot;current-li-content&quot;&gt;&lt;a&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Default Order', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;ul&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'default') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'default') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Default Order', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'name') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'name') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Name', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'price') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'price') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Price', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'date') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'date') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Date', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'popularity') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'popularity') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Popularity', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pob == 'rating') ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_orderby', 'rating') . '&quot;&gt;' . __('Sort by', 'evolve') . ' &lt;strong&gt;' . __('Rating', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;ul class=&quot;order&quot;&gt;';&nbsp;</div></li><li><div>  if ($po == 'desc'):&nbsp;</div></li><li><div>      $html .= '&lt;li class=&quot;desc&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_order', 'asc') . '&quot;&gt;&lt;i class=&quot;t4p-icon t4p-icon-chevron-up&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  endif;&nbsp;</div></li><li><div>  if ($po == 'asc'):&nbsp;</div></li><li><div>      $html .= '&lt;li class=&quot;asc&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_order', 'desc') . '&quot;&gt;&lt;i class=&quot;t4p-icon t4p-icon-chevron-down&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  endif;&nbsp;</div></li><li><div>  $html .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;ul class=&quot;sort-count order-dropdown&quot;&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;span class=&quot;current-li&quot;&gt;&lt;a&gt;' . __('Show', 'evolve') . ' &lt;strong&gt;' . $per_page . ' ' . __(' Products', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;ul&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pc == $per_page) ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_count', $per_page) . '&quot;&gt;' . __('Show', 'evolve') . ' &lt;strong&gt;' . $per_page . ' ' . __('Products', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pc == $per_page * 2) ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_count', $per_page * 2) . '&quot;&gt;' . __('Show', 'evolve') . ' &lt;strong&gt;' . ($per_page * 2) . ' ' . __('Products', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;li class=&quot;' . (($pc == $per_page * 3) ? 'current' : '') . '&quot;&gt;&lt;a href=&quot;' . t4p_addURLParameter($query_string, 'product_count', $per_page * 3) . '&quot;&gt;' . __('Show', 'evolve') . ' &lt;strong&gt;' . ($per_page * 3) . ' ' . __('Products', 'evolve') . '&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/li&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/ul&gt;';&nbsp;</div></li><li><div>  $html .= '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $html;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_get_catalog_ordering_args($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (isset($_SERVER['QUERY_STRING'])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      parse_str($_SERVER['QUERY_STRING'], $params);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pob = !empty($params['product_orderby']) ? $params['product_orderby'] : 'default';&nbsp;</div></li><li><div>  $po = !empty($params['product_order']) ? $params['product_order'] : 'asc';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ($pob) {&nbsp;</div></li><li><div>      case 'date':&nbsp;</div></li><li><div>          $orderby = 'date';&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          $meta_key = '';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'price':&nbsp;</div></li><li><div>          $orderby = 'meta_value_num';&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          $meta_key = '_price';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'popularity':&nbsp;</div></li><li><div>          $orderby = 'meta_value_num';&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          $meta_key = 'total_sales';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'rating':&nbsp;</div></li><li><div>          $orderby = 'meta_value_num';&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          $meta_key = 'average_rating';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'name':&nbsp;</div></li><li><div>          $orderby = 'title';&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          $meta_key = '';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'default':&nbsp;</div></li><li><div>          return $args;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ($po) {&nbsp;</div></li><li><div>      case 'desc':&nbsp;</div></li><li><div>          $order = 'desc';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'asc':&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      default:&nbsp;</div></li><li><div>          $order = 'asc';&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['orderby'] = $orderby;&nbsp;</div></li><li><div>  $args['order'] = $order;&nbsp;</div></li><li><div>  $args['meta_key'] = $meta_key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($pob == 'rating') {&nbsp;</div></li><li><div>      $args['orderby'] = 'menu_order title';&nbsp;</div></li><li><div>      $args['order'] = $po == 'desc' ? 'desc' : 'asc';&nbsp;</div></li><li><div>      $args['order'] = strtoupper($args['order']);&nbsp;</div></li><li><div>      $args['meta_key'] = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_filter('posts_clauses', 't4p_order_by_rating_post_clauses');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $args;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * t4p_order_by_rating_post_clauses function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @access public</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function t4p_order_by_rating_post_clauses($args) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['fields'] .= &quot;, AVG( $wpdb-&gt;commentmeta.meta_value ) as average_rating &quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['where'] .= &quot; AND ( $wpdb-&gt;commentmeta.meta_key = 'rating' OR $wpdb-&gt;commentmeta.meta_key IS null ) &quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['join'] .= &quot;&nbsp;</div></li><li><div>      LEFT OUTER JOIN $wpdb-&gt;comments ON($wpdb-&gt;posts.ID = $wpdb-&gt;comments.comment_post_ID)&nbsp;</div></li><li><div>      LEFT JOIN $wpdb-&gt;commentmeta ON($wpdb-&gt;comments.comment_ID = $wpdb-&gt;commentmeta.comment_id)&nbsp;</div></li><li><div>  &quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (isset($_SERVER['QUERY_STRING'])) {&nbsp;</div></li><li><div>      parse_str($_SERVER['QUERY_STRING'], $params);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $order = !empty($params['product_order']) ? $params['product_order'] : 'desc';&nbsp;</div></li><li><div>  $order = strtoupper($order);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['orderby'] = &quot;sum_of_comments_approved DESC, average_rating {$order}, $wpdb-&gt;posts.post_date DESC&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args['groupby'] = &quot;$wpdb-&gt;posts.ID&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $args;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter('loop_shop_per_page', 'evolve_loop_shop_per_page');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_loop_shop_per_page() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $woo_items = evolve_get_option('evl_woo_items', '12');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (isset($_SERVER['QUERY_STRING'])) {&nbsp;</div></li><li><div>      parse_str($_SERVER['QUERY_STRING'], $params);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($woo_items) {&nbsp;</div></li><li><div>      $per_page = $woo_items;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $per_page = 12;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pc = !empty($params['product_count']) ? $params['product_count'] : $per_page;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $pc;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_before_shop_loop_item_title', 'evolve_woocommerce_thumbnail', 10);&nbsp;</div></li><li><div>remove_action('woocommerce_before_shop_loop_item_title', 'woocommerce_template_loop_product_thumbnail', 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_thumbnail() {&nbsp;</div></li><li><div>  global $product, $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $items_in_cart = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($woocommerce-&gt;cart-&gt;get_cart() && is_array($woocommerce-&gt;cart-&gt;get_cart())) {&nbsp;</div></li><li><div>      foreach ($woocommerce-&gt;cart-&gt;get_cart() as $cart) {&nbsp;</div></li><li><div>          $items_in_cart[] = $cart['product_id'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $id = get_the_ID();&nbsp;</div></li><li><div>  $in_cart = in_array($id, $items_in_cart);&nbsp;</div></li><li><div>  $size = 'shop_catalog';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $gallery = get_post_meta($id, '_product_image_gallery', true);&nbsp;</div></li><li><div>  $attachment_image = '';&nbsp;</div></li><li><div>  if (!empty($gallery)) {&nbsp;</div></li><li><div>      $gallery = explode(', ', $gallery);&nbsp;</div></li><li><div>      $first_image_id = $gallery[0];&nbsp;</div></li><li><div>      $attachment_image = wp_get_attachment_image($first_image_id, $size, false, array('class' =&gt; 'hover-image'));&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $thumb_image = get_the_post_thumbnail($id, $size);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($attachment_image) {&nbsp;</div></li><li><div>      $classes = 'crossfade-images';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $classes = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;span class=&quot;' . $classes . '&quot;&gt;';&nbsp;</div></li><li><div>  echo $attachment_image;&nbsp;</div></li><li><div>  echo $thumb_image;&nbsp;</div></li><li><div>  if ($in_cart) {&nbsp;</div></li><li><div>      echo '&lt;span class=&quot;cart-loading&quot;&gt;&lt;i class=&quot;t4p-icon t4p-icon-ok&quot;&gt;&lt;/i&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      echo '&lt;span class=&quot;cart-loading&quot;&gt;&lt;i class=&quot;t4p-icon t4p-icon-repeat&quot;&gt;&lt;/i&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo '&lt;span class=&quot;show_details_button&quot;&gt;' . __('Show details', 'evolve') . '&lt;/span&gt;';&nbsp;</div></li><li><div>  echo '&lt;/span&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter('add_to_cart_fragments', 'evolve_woocommerce_header_add_to_cart_fragment');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_header_add_to_cart_fragment($fragments) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $evolve_header_type = evolve_get_option('evl_header_type', 'none');&nbsp;</div></li><li><div>  if ($evolve_header_type == 'h1') {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;cart header-cart&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php if (!$woocommerce-&gt;cart-&gt;cart_contents_count): ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;empty-cart&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php echo wc_price($woocommerce-&gt;cart-&gt;cart_contents_total); ?&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-content&quot; style=&quot;width:180px!important;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;strong style=&quot;padding:7px 10px;line-height:35px;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php _e('Your cart is currently empty.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                      &lt;/strong&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php else: ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;my-cart-link my-cart-link-active&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php echo wc_price($woocommerce-&gt;cart-&gt;cart_contents_total); ?&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php foreach ($woocommerce-&gt;cart-&gt;cart_contents as $cart_item): <span class="comment">//var_dump($cart_item);     ?&gt;</span>&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-content&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink($cart_item['product_id']); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                              $thumbnail_id = ($cart_item['variation_id']) ? $cart_item['variation_id'] : $cart_item['product_id'];&nbsp;</div></li><li><div>                              echo get_the_post_thumbnail($thumbnail_id, 'recent-works-thumbnail');&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;cart-desc&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;cart-title&quot;&gt;&lt;?php echo $cart_item['data']-&gt;post-&gt;post_title; ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;product-quantity&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php echo $cart_item['quantity']; ?&gt; x &lt;?php echo $woocommerce-&gt;cart-&gt;get_product_subtotal($cart_item['data'], $cart_item['quantity']); ?&gt;&nbsp;</div></li><li><div>                                  &lt;/span&gt;&nbsp;</div></li><li><div>                              &lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-checkout&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('View Cart', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;checkout-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_checkout_page_id')); ?&gt;&quot;&gt;&lt;?php _e('Checkout', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&lt;!-- /.cart-contents --&gt;&nbsp;</div></li><li><div>          &lt;?php endif; <span class="comment"><span class="comment">//if(!$woocommerce-&gt;cart-&gt;cart_contents_count):         ?&gt;</span></span>&nbsp;</div></li><li><div>      &lt;/li&gt;&lt;!-- /li.cart --&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      $fragments['.cart.header-cart'] = ob_get_clean();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else if ($evolve_header_type == 'h2') {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;cart header-cart&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php if (!$woocommerce-&gt;cart-&gt;cart_contents_count): ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;empty-cart&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php echo wc_price($woocommerce-&gt;cart-&gt;cart_contents_total); ?&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-content&quot; style=&quot;width:180px!important;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;strong style=&quot;padding:7px 10px;line-height:35px;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php _e('Your cart is currently empty.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                      &lt;/strong&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php else: ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;my-cart-link my-cart-link-active&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php <span class="comment">//echo wc_price($woocommerce-&gt;cart-&gt;cart_contents_total);    ?&gt;</span>&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php foreach ($woocommerce-&gt;cart-&gt;cart_contents as $cart_item): <span class="comment">//var_dump($cart_item);      ?&gt;</span>&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-content&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink($cart_item['product_id']); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                              $thumbnail_id = ($cart_item['variation_id']) ? $cart_item['variation_id'] : $cart_item['product_id'];&nbsp;</div></li><li><div>                              echo get_the_post_thumbnail($thumbnail_id, 'recent-works-thumbnail');&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;cart-desc&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;cart-title&quot;&gt;&lt;?php echo $cart_item['data']-&gt;post-&gt;post_title; ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;product-quantity&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php echo $cart_item['quantity']; ?&gt; x &lt;?php echo $woocommerce-&gt;cart-&gt;get_product_subtotal($cart_item['data'], $cart_item['quantity']); ?&gt;&nbsp;</div></li><li><div>                                  &lt;/span&gt;&nbsp;</div></li><li><div>                              &lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-checkout&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('View Cart', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;checkout-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_checkout_page_id')); ?&gt;&quot;&gt;&lt;?php _e('Checkout', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&lt;!-- /.cart-contents --&gt;&nbsp;</div></li><li><div>          &lt;?php endif; <span class="comment"><span class="comment">//if(!$woocommerce-&gt;cart-&gt;cart_contents_count):         ?&gt;</span></span>&nbsp;</div></li><li><div>      &lt;/li&gt;&lt;!-- /li.cart --&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      $fragments['.cart.header-cart'] = ob_get_clean();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else if ($evolve_header_type == 'h3') {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;cart header-cart&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php if (!$woocommerce-&gt;cart-&gt;cart_contents_count): ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;empty-cart&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php echo wc_price($woocommerce-&gt;cart-&gt;cart_contents_total); ?&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-content&quot; style=&quot;width:180px!important;&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;strong style=&quot;padding:7px 10px;line-height:35px;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php _e('Your cart is currently empty.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                      &lt;/strong&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php else: ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;my-cart-link my-cart-link-active&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;span&gt;&lt;?php echo $woocommerce-&gt;cart-&gt;cart_contents_count; ?&gt; item(s)&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php foreach ($woocommerce-&gt;cart-&gt;cart_contents as $cart_item): <span class="comment">//var_dump($cart_item);         ?&gt;</span>&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-content&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink($cart_item['product_id']); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                              $thumbnail_id = ($cart_item['variation_id']) ? $cart_item['variation_id'] : $cart_item['product_id'];&nbsp;</div></li><li><div>                              echo get_the_post_thumbnail($thumbnail_id, 'recent-works-thumbnail');&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;cart-desc&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;cart-title&quot;&gt;&lt;?php echo $cart_item['data']-&gt;post-&gt;post_title; ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;product-quantity&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php echo $cart_item['quantity']; ?&gt; x &lt;?php echo $woocommerce-&gt;cart-&gt;get_product_subtotal($cart_item['data'], $cart_item['quantity']); ?&gt;&nbsp;</div></li><li><div>                                  &lt;/span&gt;&nbsp;</div></li><li><div>                              &lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-checkout&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('View Cart', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;checkout-link&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_checkout_page_id')); ?&gt;&quot;&gt;&lt;?php _e('Checkout', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&lt;!-- /.cart-contents --&gt;&nbsp;</div></li><li><div>          &lt;?php endif; <span class="comment">//if(!$woocommerce-&gt;cart-&gt;cart_contents_count):           ?&gt;</span>&nbsp;</div></li><li><div>      &lt;/li&gt;&lt;!-- /li.cart --&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      $fragments['.cart.header-cart'] = ob_get_clean();&nbsp;</div></li><li><div>  }else {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;cart&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php if (!$woocommerce-&gt;cart-&gt;cart_contents_count): ?&gt;&nbsp;</div></li><li><div>              &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('0 Item(s)', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-content&quot; style=&quot;width:180px!important;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;strong style=&quot;padding:7px 10px;line-height:35px;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php _e('Your cart is currently empty.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                      &lt;/strong&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php else: ?&gt;&nbsp;</div></li><li><div>              &lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php echo $woocommerce-&gt;cart-&gt;cart_contents_count; ?&gt; &lt;?php _e('Item(s)', 'evolve'); ?&gt; - &lt;?php echo wc_price($woocommerce-&gt;cart-&gt;subtotal); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;cart-contents&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php foreach ($woocommerce-&gt;cart-&gt;cart_contents as $cart_item): ?&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-content&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo get_permalink($cart_item['product_id']); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                              $thumbnail_id = ($cart_item['variation_id']) ? $cart_item['variation_id'] : $cart_item['product_id'];&nbsp;</div></li><li><div>                              echo get_the_post_thumbnail($thumbnail_id, 'recent-works-thumbnail');&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;cart-desc&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;cart-title&quot;&gt;&lt;?php echo $cart_item['data']-&gt;post-&gt;post_title; ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;product-quantity&quot;&gt;&lt;?php echo $cart_item['quantity']; ?&gt; x &lt;?php echo $woocommerce-&gt;cart-&gt;get_product_subtotal($cart_item['data'], 1); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                              &lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;cart-checkout&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;cart-link&quot;&gt;&lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('View Cart', 'evolve'); ?&gt;&lt;/a&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;checkout-link&quot;&gt;&lt;a href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_checkout_page_id')); ?&gt;&quot;&gt;&lt;?php _e('Checkout', 'evolve'); ?&gt;&lt;/a&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      $fragments['.header .cart'] = ob_get_clean();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $fragments;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_after_single_product_summary', 'evolve_woocommerce_after_single_product_summary', 15);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_after_single_product_summary() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $woocommerce_social_links = evolve_get_option('evl_woocommerce_social_links', '1');&nbsp;</div></li><li><div>  $nofollow_social_links = evolve_get_option('evl_nofollow_social_links', '0');&nbsp;</div></li><li><div>  $social = '';&nbsp;</div></li><li><div>  $nofollow = '';&nbsp;</div></li><li><div>  if ($nofollow_social_links) {&nbsp;</div></li><li><div>      $nofollow = ' rel=&quot;nofollow&quot;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ($woocommerce_social_links):&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $social .= '&lt;ul class=&quot;social-share&quot;&gt;&nbsp;</div></li><li><div>  &lt;li class=&quot;facebook&quot;&gt;&nbsp;</div></li><li><div>      &lt;a target=&quot;_blank&quot; class=&quot;tipsytext&quot; title=&quot;' . __('Share On', 'evolve') . ' Facebook&quot; href=&quot;http:<span class="comment">//www.facebook.com/sharer.php?m2w&s=100&p&#91;url&#93;=' . get_permalink() . '&p&#91;title&#93;=' . wp_strip_all_tags(get_the_title(), true) . '&quot; target=&quot;_blank&quot;' . $nofollow . '&gt;</span>&nbsp;</div></li><li><div>          &lt;i class=&quot;t4p-icon-social-facebook&quot;&gt;&lt;/i&gt;              &nbsp;</div></li><li><div>      &lt;/a&gt;&nbsp;</div></li><li><div>  &lt;/li&gt;&nbsp;</div></li><li><div>  &lt;li class=&quot;twitter&quot;&gt;&nbsp;</div></li><li><div>      &lt;a target=&quot;_blank&quot; class=&quot;tipsytext&quot; title=&quot;' . __('Share On', 'evolve') . ' Twitter&quot; href=&quot;https:<span class="comment">//twitter.com/share?text=' . wp_strip_all_tags(get_the_title(), true) . ' ' . get_permalink() . '&quot; target=&quot;_blank&quot;' . $nofollow . '&gt;</span>&nbsp;</div></li><li><div>          &lt;i class=&quot;t4p-icon-social-twitter&quot;&gt;&lt;/i&gt;   &nbsp;</div></li><li><div>  &lt;/a&gt;&nbsp;</div></li><li><div>  &lt;/li&gt;&nbsp;</div></li><li><div>  &lt;li class=&quot;pinterest&quot;&gt;';&nbsp;</div></li><li><div>      $full_image = wp_get_attachment_image_src(get_post_thumbnail_id(), 'full');&nbsp;</div></li><li><div>      $social .= '&lt;a target=&quot;_blank&quot; class=&quot;tipsytext&quot; title=&quot;' . __('Pin to', 'evolve') . ' Pinterest&quot; href=&quot;http:<span class="comment">//pinterest.com/pin/create/button/?url=' . urlencode(wp_strip_all_tags(get_the_title(), true)) . '&amp;description=' . urlencode(get_the_title()) . '&amp;media=' . urlencode($full_image[0]) . '&quot; target=&quot;_blank&quot;' . $nofollow . '&gt;</span>&nbsp;</div></li><li><div>          &lt;i class=&quot;t4p-icon-social-pinterest&quot;&gt;&lt;/i&gt;                  &nbsp;</div></li><li><div>      &lt;/a&gt;&nbsp;</div></li><li><div>  &lt;/li&gt;&nbsp;</div></li><li><div>  &lt;li class=&quot;email&quot;&gt;&nbsp;</div></li><li><div>      &lt;a target=&quot;_blank&quot; class=&quot;tipsytext&quot; title=&quot;' . __('Email to a Friend', 'evolve') . '&quot; href=&quot;mailto:?subject=' . wp_strip_all_tags(get_the_title(), true) . '&amp;body=' . get_permalink() . '&quot;&gt;&nbsp;</div></li><li><div>          &lt;i class=&quot;t4p-icon-social-envelope-o&quot;&gt;&lt;/i&gt;                &nbsp;</div></li><li><div>      &lt;/a&gt;&nbsp;</div></li><li><div>  &lt;/li&gt;&nbsp;</div></li><li><div>&lt;/ul&gt;';&nbsp;</div></li><li><div>  endif;&nbsp;</div></li><li><div>  $social .= '&lt;div style=&quot;clear:both;&quot;&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $social;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>remove_action('woocommerce_after_single_product_summary', 'woocommerce_output_related_products', 20);&nbsp;</div></li><li><div>add_action('woocommerce_after_single_product_summary', 'evolve_woocommerce_output_related_products', 15);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_output_related_products() {&nbsp;</div></li><li><div>  $args = array(&nbsp;</div></li><li><div>      'posts_per_page' =&gt; 4, &nbsp;</div></li><li><div>      'columns' =&gt; 4, &nbsp;</div></li><li><div>      'orderby' =&gt; 'rand'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  woocommerce_related_products(apply_filters('woocommerce_output_related_products_args', $args));&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** variations hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** end variations hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** cart hooks */</span>&nbsp;</div></li><li><div>add_action('woocommerce_before_cart_table', 'evolve_woocommerce_before_cart_table', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_before_cart_table($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html = '&lt;div class=&quot;woocommerce-content-box full-width clearfix&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $html .= '&lt;h2&gt;' . sprintf(__('You Have %d Items In Your Cart', 'evolve'), $woocommerce-&gt;cart-&gt;cart_contents_count) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $html;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_after_cart_table', 'evolve_woocommerce_after_cart_table', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_after_cart_table($args) {&nbsp;</div></li><li><div>  $html = '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $html;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function woocommerce_cross_sell_display($posts_per_page = 3, $columns = 3, $orderby = 'rand') {&nbsp;</div></li><li><div>  wc_get_template('cart/cross-sells.php', array(&nbsp;</div></li><li><div>      'posts_per_page' =&gt; $posts_per_page, &nbsp;</div></li><li><div>      'orderby' =&gt; $orderby, &nbsp;</div></li><li><div>      'columns' =&gt; $columns&nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function cart_shipping_calc() {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (get_option('woocommerce_enable_shipping_calc') === 'no' || !WC()-&gt;cart-&gt;needs_shipping()) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action('woocommerce_before_shipping_calculator');&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;shipping_calculator&quot; action=&quot;&lt;?php echo esc_url(WC()-&gt;cart-&gt;get_cart_url()); ?&gt;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;h2&gt;&lt;?php _e('Calculate Shipping', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;evolve-shipping-calculator-form&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>              &lt;select name=&quot;calc_shipping_country&quot; id=&quot;calc_shipping_country&quot; class=&quot;country_to_state&quot; rel=&quot;calc_shipping_state&quot;&gt;&nbsp;</div></li><li><div>                  &lt;option value=&quot;&quot;&gt;&lt;?php _e('Select a country&hellip;', 'evolve'); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  foreach (WC()-&gt;countries-&gt;get_shipping_countries() as $key =&gt; $value)&nbsp;</div></li><li><div>                      echo '&lt;option value=&quot;' . esc_attr($key) . '&quot;' . selected(WC()-&gt;customer-&gt;get_shipping_country(), esc_attr($key), false) . '&gt;' . esc_html($value) . '&lt;/option&gt;';&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/select&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              $current_cc = WC()-&gt;customer-&gt;get_shipping_country();&nbsp;</div></li><li><div>              $current_r = WC()-&gt;customer-&gt;get_shipping_state();&nbsp;</div></li><li><div>              $states = WC()-&gt;countries-&gt;get_states($current_cc);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Hidden Input</span>&nbsp;</div></li><li><div>              if (is_array($states) && empty($states)) {&nbsp;</div></li><li><div>                  ?&gt;&lt;input type=&quot;hidden&quot; name=&quot;calc_shipping_state&quot; id=&quot;calc_shipping_state&quot; placeholder=&quot;&lt;?php _e('State / county', 'evolve'); ?&gt;&quot; /&gt;&lt;?php&nbsp;</div></li><li><div>                  <span class="comment">// Dropdown Input</span>&nbsp;</div></li><li><div>              } elseif (is_array($states)) {&nbsp;</div></li><li><div>                  ?&gt;&lt;span&gt;&nbsp;</div></li><li><div>                      &lt;select name=&quot;calc_shipping_state&quot; id=&quot;calc_shipping_state&quot; placeholder=&quot;&lt;?php _e('State / county', 'evolve'); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;option value=&quot;&quot;&gt;&lt;?php _e('Select a state&hellip;', 'evolve'); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          foreach ($states as $ckey =&gt; $cvalue)&nbsp;</div></li><li><div>                              echo '&lt;option value=&quot;' . esc_attr($ckey) . '&quot; ' . selected($current_r, $ckey, false) . '&gt;' . esc_html( $cvalue ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                      &lt;/select&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&lt;?php&nbsp;</div></li><li><div>                  <span class="comment">// Standard Input</span>&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  ?&gt;&lt;input type=&quot;text&quot; class=&quot;input-text&quot; value=&quot;&lt;?php echo esc_attr($current_r); ?&gt;&quot; placeholder=&quot;&lt;?php _e('State / county', 'evolve'); ?&gt;&quot; name=&quot;calc_shipping_state&quot; id=&quot;calc_shipping_state&quot; /&gt;&lt;?php&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php if (apply_filters('woocommerce_shipping_calculator_enable_city', false)) : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;input-text&quot; value=&quot;&lt;?php echo esc_attr(WC()-&gt;customer-&gt;get_shipping_city()); ?&gt;&quot; placeholder=&quot;&lt;?php _e('City', 'evolve'); ?&gt;&quot; name=&quot;calc_shipping_city&quot; id=&quot;calc_shipping_city&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (apply_filters('woocommerce_shipping_calculator_enable_postcode', true)) :&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;input-text&quot; value=&quot;&lt;?php echo esc_attr(WC()-&gt;customer-&gt;get_shipping_postcode()); ?&gt;&quot; placeholder=&quot;&lt;?php _e('Postcode / Zip', 'evolve'); ?&gt;&quot; name=&quot;calc_shipping_postcode&quot; id=&quot;calc_shipping_postcode&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;p&gt;&lt;button type=&quot;submit&quot; name=&quot;calc_shipping&quot; value=&quot;1&quot; class=&quot;button&quot;&gt;&lt;?php _e('Update Totals', 'evolve'); ?&gt;&lt;/button&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php wp_nonce_field('woocommerce-cart'); ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  do_action('woocommerce_after_shipping_calculator');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_cart_collaterals', 'evolve_woocommerce_cart_collaterals');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_cart_collaterals($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;shipping-coupon&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      echo cart_shipping_calc();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (WC()-&gt;cart-&gt;coupons_enabled()) {&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;coupon&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;h2&gt;&lt;?php _e('Have A Promotional Code?', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;input name=&quot;coupon_code&quot; type=&quot;text&quot; class=&quot;input-text&quot; id=&quot;coupon_code&quot; value=&quot;&quot; placeholder=&quot;&lt;?php _e('Coupon code', 'evolve'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;submit&quot; class=&quot;button medium default&quot; name=&quot;apply_coupon&quot; value=&quot;&lt;?php _e('Apply', 'evolve'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php do_action('woocommerce_cart_coupon'); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_before_cart_totals', 'evolve_woocommerce_before_cart_totals', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_before_cart_totals($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;form action=&quot;&lt;?php echo esc_url(WC()-&gt;cart-&gt;get_cart_url()); ?&gt;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_action('woocommerce_after_cart', 'evolve_woocommerce_after_cart');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_after_cart($args) {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>remove_action('woocommerce_cart_collaterals', 'woocommerce_cross_sell_display');&nbsp;</div></li><li><div>add_action('woocommerce_cart_collaterals', 'evolve_woocommerce_cross_sell_display', 5);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_cross_sell_display() {&nbsp;</div></li><li><div>  global $product, $woocommerce_loop, $post, $smof_data;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $crosssells = WC()-&gt;cart-&gt;get_cross_sells();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (sizeof($crosssells) == 0)&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $number_of_columns = 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  woocommerce_cross_sell_display(apply_filters('woocommerce_cross_sells_total', -1), $number_of_columns);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** end cart hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** begin checkout hooks */</span>&nbsp;</div></li><li><div>remove_action('woocommerce_before_checkout_form', 'woocommerce_checkout_coupon_form', 10);&nbsp;</div></li><li><div>add_action('woocommerce_before_checkout_form', 'evolve_woocommerce_checkout_coupon_form', 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_checkout_coupon_form($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!WC()-&gt;cart-&gt;coupons_enabled())&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;form class=&quot;woocommerce-content-box full-width checkout_coupon&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;h2 class=&quot;promo-code-heading alignleft&quot;&gt;&lt;?php _e('Have A Promotional Code?', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;coupon-contents alignright&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;form-row form-row-first alignleft coupon-input&quot;&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;text&quot; name=&quot;coupon_code&quot; class=&quot;input-text&quot; placeholder=&quot;&lt;?php _e('Coupon code', 'evolve'); ?&gt;&quot; id=&quot;coupon_code&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;form-row form-row-last alignleft coupon-button&quot;&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;submit&quot; class=&quot;button&quot; name=&quot;apply_coupon&quot; value=&quot;&lt;?php _e('Apply Coupon', 'evolve'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$evolve_woocommerce_option = get_option('evl_options');&nbsp;</div></li><li><div>$woocommerce_one_page_checkout = isset($evolve_woocommerce_option['evl_woocommerce_one_page_checkout']) ? $evolve_woocommerce_option['evl_woocommerce_one_page_checkout'] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ($woocommerce_one_page_checkout != '1') {&nbsp;</div></li><li><div>  add_action('woocommerce_before_checkout_form', 'evolve_woocommerce_before_checkout_form');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_before_checkout_form($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;ul class=&quot;woocommerce-side-nav woocommerce-checkout-nav&quot;&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;active&quot;&gt;&nbsp;</div></li><li><div>          &lt;a data-name=&quot;col-1&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e('Billing Address', 'evolve'); ?&gt;&nbsp;</div></li><li><div>          &lt;/a&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>      &lt;?php if (WC()-&gt;cart-&gt;needs_shipping() && !WC()-&gt;cart-&gt;ship_to_billing_address_only()) : ?&gt;&nbsp;</div></li><li><div>          &lt;li&gt;&nbsp;</div></li><li><div>              &lt;a data-name=&quot;col-2&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php _e('Shipping Address', 'evolve'); ?&gt;&nbsp;</div></li><li><div>              &lt;/a&gt;&nbsp;</div></li><li><div>          &lt;/li&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      elseif (apply_filters('woocommerce_enable_order_notes_field', get_option('woocommerce_enable_order_comments', 'yes') === 'yes')) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (!WC()-&gt;cart-&gt;needs_shipping() || WC()-&gt;cart-&gt;ship_to_billing_address_only()) :&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;li&gt;&nbsp;</div></li><li><div>                  &lt;a data-name=&quot;col-2&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Additional Information', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>      endif;&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;li&gt;&nbsp;</div></li><li><div>          &lt;a data-name=&quot;#order_review&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e('Review &amp; Payment', 'evolve'); ?&gt;&nbsp;</div></li><li><div>          &lt;/a&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>  &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;woocommerce-content-box evolve-checkout&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!$woocommerce_one_page_checkout) {&nbsp;</div></li><li><div>      add_action('woocommerce_after_checkout_form', 'evolve_woocommerce_after_checkout_form');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_after_checkout_form($args) {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ($woocommerce_one_page_checkout) {&nbsp;</div></li><li><div>  add_action('woocommerce_checkout_before_customer_details', 'evolve_woocommerce_checkout_before_customer_details');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function evolve_woocommerce_checkout_before_customer_details($args) {&nbsp;</div></li><li><div>  global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (WC()-&gt;cart-&gt;needs_shipping() && !WC()-&gt;cart-&gt;ship_to_billing_address_only() ||&nbsp;</div></li><li><div>          apply_filters('woocommerce_enable_order_notes_field', get_option('woocommerce_enable_order_comments', 'yes') === 'yes') && (!WC()-&gt;cart-&gt;needs_shipping() || WC()-&gt;cart-&gt;ship_to_billing_address_only() )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;evolve-checkout-no-shipping&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($woocommerce_one_page_checkout) {&nbsp;</div></li><li><div>      add_action('woocommerce_checkout_after_customer_details', 'evolve_woocommerce_checkout_after_customer_details');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_checkout_after_customer_details($args) {&nbsp;</div></li><li><div>      global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (WC()-&gt;cart-&gt;needs_shipping() && !WC()-&gt;cart-&gt;ship_to_billing_address_only() ||&nbsp;</div></li><li><div>              apply_filters('woocommerce_enable_order_notes_field', get_option('woocommerce_enable_order_comments', 'yes') === 'yes') && (!WC()-&gt;cart-&gt;needs_shipping() || WC()-&gt;cart-&gt;ship_to_billing_address_only() )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;woocommerce-content-box full-width clearfix&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_action('woocommerce_checkout_billing', 'evolve_woocommerce_checkout_billing', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_checkout_billing($args) {&nbsp;</div></li><li><div>      global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (WC()-&gt;cart-&gt;needs_shipping() && !WC()-&gt;cart-&gt;ship_to_billing_address_only() ||&nbsp;</div></li><li><div>              apply_filters('woocommerce_enable_order_notes_field', get_option('woocommerce_enable_order_comments', 'yes') === 'yes') && (!WC()-&gt;cart-&gt;needs_shipping() || WC()-&gt;cart-&gt;ship_to_billing_address_only() )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>          $data_name = 'col-2';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $data_name = '#order_review';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $evolve_woocommerce_option = get_option('evl_options');&nbsp;</div></li><li><div>      $woocommerce_one_page_checkout = $evolve_woocommerce_option['evl_woocommerce_one_page_checkout'];&nbsp;</div></li><li><div>      if (!$woocommerce_one_page_checkout) {&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;a data-name=&quot;&lt;?php echo $data_name; ?&gt;&quot; href=&quot;#&quot; class=&quot;button default medium submit t4p-button-default continue-checkout&quot;&gt;&lt;?php _e('Continue', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_action('woocommerce_checkout_shipping', 'evolve_woocommerce_checkout_shipping', 20);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_checkout_shipping($args) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $evolve_woocommerce_option = get_option('evl_options');&nbsp;</div></li><li><div>      $woocommerce_one_page_checkout = $evolve_woocommerce_option['evl_woocommerce_one_page_checkout'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (!$woocommerce_one_page_checkout) {&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;a data-name=&quot;#order_review&quot; href=&quot;#&quot; class=&quot;button default medium submit t4p-button-default continue-checkout&quot;&gt;&lt;?php _e('Continue', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_filter('woocommerce_enable_order_notes_field', 'evolve_enable_order_notes_field');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_enable_order_notes_field() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $woocommerce_enable_order_notes = evolve_get_option('evl_woocommerce_enable_order_notes', '0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (!$woocommerce_enable_order_notes) {&nbsp;</div></li><li><div>          return 0;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return 1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//function under order hooks</span>&nbsp;</div></li><li><div>  remove_action('woocommerce_thankyou', 'woocommerce_order_details_table', 10);&nbsp;</div></li><li><div>  add_action('woocommerce_thankyou', 'evolve_woocommerce_view_order', 10);&nbsp;</div></li><li><div>  <span class="comment">/** end checkout hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** begin my-account hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_action('woocommerce_before_customer_login_form', 'evolve_woocommerce_before_customer_login_form');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_before_customer_login_form() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (get_option('woocommerce_enable_myaccount_registration') !== 'yes') :&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div id=&quot;customer_login&quot; class=&quot;woocommerce-content-box full-width&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_after_customer_login_form', 'evolve_woocommerce_after_customer_login_form');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_after_customer_login_form() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (get_option('woocommerce_enable_myaccount_registration') !== 'yes') :&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      endif;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  add_action('woocommerce_account_dashboard', 'evolve_woocommerce_account_dashboard');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_account_dashboard() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $woocommerce, $current_user;&nbsp;</div></li><li><div>      $woo_acc_msg_1 = evolve_get_option('evl_woo_acc_msg_1', 'Call us - &lt;i class=&quot;t4p-icon-phone&quot;&gt;&lt;/i&gt; 7438 882 764');&nbsp;</div></li><li><div>      $woo_acc_msg_2 = evolve_get_option('evl_woo_acc_msg_2', 'Email us - &lt;i class=&quot;t4p-icon-envelope-o&quot;&gt;&lt;/i&gt; contact@example.com');&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;p class=&quot;evolve_myaccount_user&quot;&gt;&nbsp;</div></li><li><div>          &lt;span class=&quot;myaccount_user_container&quot;&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;username&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  printf(&nbsp;</div></li><li><div>                          __('Hello, %s', 'evolve'), $current_user-&gt;display_name&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;?php if ($woo_acc_msg_1): ?&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;msg&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php echo $woo_acc_msg_1; ?&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>              endif;&nbsp;</div></li><li><div>              if ($woo_acc_msg_2):&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;msg&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php echo $woo_acc_msg_2; ?&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;view-cart&quot;&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;button default medium submit t4p-button-default&quot; href=&quot;&lt;?php echo get_permalink(get_option('woocommerce_cart_page_id')); ?&gt;&quot;&gt;&lt;?php _e('View Cart', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/span&gt;&nbsp;</div></li><li><div>      &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;woocommerce-side-nav&quot;&gt;&nbsp;</div></li><li><div>          &lt;ul class=&quot;woocommerce-side-nav-ul evolve-myaccount-nav&quot;&gt;&nbsp;</div></li><li><div>              &lt;li &lt;?php&nbsp;</div></li><li><div>              if (isset($_SESSION['formvalue'])):&nbsp;</div></li><li><div>              else:&nbsp;</div></li><li><div>                  echo 'class=&quot;active&quot;';&nbsp;</div></li><li><div>              endif;&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>                  &gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;dashboard&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Dashboard', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;li&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;downloads&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('View Downloads', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;li&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;orders&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('View Orders', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;li &lt;?php&nbsp;</div></li><li><div>              if (isset($_SESSION['formvalue'])) {&nbsp;</div></li><li><div>                  echo 'class=&quot;active&quot;';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>                  &gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;address&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Change Address', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;li&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;account&quot; href=&quot;#&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Edit Account', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;/ul&gt;&nbsp;</div></li><li><div>          &lt;ul class=&quot;woocommerce-side-nav-ul woocommerce-side-nav-logout&quot;&gt;&nbsp;</div></li><li><div>              &lt;li&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;logout&quot; href=&quot;&lt;?php echo esc_url(wc_get_endpoint_url('customer-logout', '', wc_get_page_permalink('myaccount'))); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Logout', 'evolve'); ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/li&gt;&nbsp;</div></li><li><div>          &lt;/ul&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;woocommerce-content-box evolve-myaccount-data&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_view_dashboard', 'evolve_woocommerce_view_dashboard');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_view_dashboard($args) {&nbsp;</div></li><li><div>          global $woocommerce, $current_user;&nbsp;</div></li><li><div>          $woo_acc_msg_1 = evolve_get_option('evl_woo_acc_msg_1', 'Call us - &lt;i class=&quot;t4p-icon-phone&quot;&gt;&lt;/i&gt; 7438 882 764');&nbsp;</div></li><li><div>          $woo_acc_msg_2 = evolve_get_option('evl_woo_acc_msg_2', 'Email us - &lt;i class=&quot;t4p-icon-envelope-o&quot;&gt;&lt;/i&gt; contact@example.com');&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;view_dashboard&quot; &lt;?php&nbsp;</div></li><li><div>          if (isset($_SESSION['formvalue'])) {&nbsp;</div></li><li><div>              echo 'style=&quot;display:none&quot;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          ?&gt; &gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  echo sprintf(esc_attr__('Hello %s%s%s (not %2$s? %sSign out%s)', 'evolve'), '&lt;strong&gt;', esc_html($current_user-&gt;display_name), '&lt;/strong&gt;', '&lt;a href=&quot;' . esc_url(wc_get_endpoint_url('customer-logout', '', wc_get_page_permalink('myaccount'))) . '&quot;&gt;', '&lt;/a&gt;');&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  echo sprintf(esc_attr__('From your account dashboard you can view your %1$srecent orders%2$s, manage your %3$sshipping and billing addresses%2$s and %4$sedit your password and account details%2$s.', 'evolve'), '&lt;a href=&quot;' . esc_url(wc_get_endpoint_url('orders')) . '&quot;&gt;', '&lt;/a&gt;', '&lt;a href=&quot;' . esc_url(wc_get_endpoint_url('edit-address')) . '&quot;&gt;', '&lt;a href=&quot;' . esc_url(wc_get_endpoint_url('edit-account')) . '&quot;&gt;');&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_account_orders', 'evolve_woocommerce_before_account_orders');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_before_account_orders($args) {&nbsp;</div></li><li><div>          $order_count = &quot;&quot;;&nbsp;</div></li><li><div>          $my_orders_columns = apply_filters('woocommerce_my_account_my_orders_columns', array(&nbsp;</div></li><li><div>              'order-number' =&gt; __('Order', 'evolve'), &nbsp;</div></li><li><div>              'order-date' =&gt; __('Date', 'evolve'), &nbsp;</div></li><li><div>              'order-status' =&gt; __('Status', 'evolve'), &nbsp;</div></li><li><div>              'order-total' =&gt; __('Total', 'evolve'), &nbsp;</div></li><li><div>              'order-actions' =&gt; '&nbsp;', &nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $customer_orders = get_posts(apply_filters('woocommerce_my_account_my_orders_query', array(&nbsp;</div></li><li><div>              'numberposts' =&gt; $order_count, &nbsp;</div></li><li><div>              'meta_key' =&gt; '_customer_user', &nbsp;</div></li><li><div>              'meta_value' =&gt; get_current_user_id(), &nbsp;</div></li><li><div>              'post_type' =&gt; wc_get_order_types('view-orders'), &nbsp;</div></li><li><div>              'post_status' =&gt; array_keys(wc_get_order_statuses())&nbsp;</div></li><li><div> )));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ($customer_orders) :&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;h2&gt;&lt;?php echo apply_filters('woocommerce_my_account_my_orders_title', __('Recent Orders', 'evolve')); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;table class=&quot;shop_table shop_table_responsive my_account_orders&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;thead&gt;&nbsp;</div></li><li><div>                      &lt;tr&gt;&nbsp;</div></li><li><div>                          &lt;?php foreach ($my_orders_columns as $column_id =&gt; $column_name) : ?&gt;&nbsp;</div></li><li><div>                              &lt;th class=&quot;&lt;?php echo esc_attr($column_id); ?&gt;&quot;&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;?php echo esc_html($column_name); ?&gt;&lt;/span&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                          &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                      &lt;/tr&gt;&nbsp;</div></li><li><div>                  &lt;/thead&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;tbody&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      foreach ($customer_orders as $customer_order) :&nbsp;</div></li><li><div>                          $order = wc_get_order($customer_order);&nbsp;</div></li><li><div>                          $item_count = $order-&gt;get_item_count();&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;order&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php foreach ($my_orders_columns as $column_id =&gt; $column_name) : ?&gt;&nbsp;</div></li><li><div>                                  &lt;td class=&quot;&lt;?php echo esc_attr($column_id); ?&gt;&quot; data-title=&quot;&lt;?php echo esc_attr($column_name); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php if (has_action('woocommerce_my_account_my_orders_column_' . $column_id)) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;?php do_action('woocommerce_my_account_my_orders_column_' . $column_id, $order); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      &lt;?php elseif ('order-number' === $column_id) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;a href=&quot;&lt;?php echo esc_url($order-&gt;get_view_order_url()); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                                              &lt;?php echo _x('#', 'hash before order number', 'evolve') . $order-&gt;get_order_number(); ?&gt;&nbsp;</div></li><li><div>                                          &lt;/a&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      &lt;?php elseif ('order-date' === $column_id) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;?php echo wc_format_datetime( $order-&gt;get_date_created() ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      &lt;?php elseif ('order-status' === $column_id) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;?php echo wc_get_order_status_name($order-&gt;get_status()); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      &lt;?php elseif ('order-total' === $column_id) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;?php echo sprintf(_n('%s for %s item', '%s for %s items', $item_count, 'evolve'), $order-&gt;get_formatted_order_total(), $item_count); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      &lt;?php elseif ('order-actions' === $column_id) : ?&gt;&nbsp;</div></li><li><div>                                          &lt;?php&nbsp;</div></li><li><div>                                          $actions = array(&nbsp;</div></li><li><div>                                              'pay' =&gt; array(&nbsp;</div></li><li><div>                                                  'url' =&gt; $order-&gt;get_checkout_payment_url(), &nbsp;</div></li><li><div>                                                  'name' =&gt; __('Pay', 'evolve')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                                              'view' =&gt; array(&nbsp;</div></li><li><div>                                                  'url' =&gt; $order-&gt;get_view_order_url(), &nbsp;</div></li><li><div>                                                  'name' =&gt; __('View', 'evolve')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                                              'cancel' =&gt; array(&nbsp;</div></li><li><div>                                                  'url' =&gt; $order-&gt;get_cancel_order_url(wc_get_page_permalink('myaccount')), &nbsp;</div></li><li><div>                                                  'name' =&gt; __('Cancel', 'evolve')&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          if (!$order-&gt;needs_payment()) {&nbsp;</div></li><li><div>                                              unset($actions['pay']);&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          if (!in_array($order-&gt;get_status(), apply_filters('woocommerce_valid_order_statuses_for_cancel', array('pending', 'failed'), $order))) {&nbsp;</div></li><li><div>                                              unset($actions['cancel']);&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          if ($actions = apply_filters('woocommerce_my_account_my_orders_actions', $actions, $order)) {&nbsp;</div></li><li><div>                                              foreach ($actions as $key =&gt; $action) {&nbsp;</div></li><li><div>                                                  echo '&lt;a href=&quot;' . esc_url($action['url']) . '&quot; class=&quot;button ' . sanitize_html_class($key) . '&quot;&gt;' . esc_html($action['name']) . '&lt;/a&gt;';&nbsp;</div></li><li><div>                                              }&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>                                          ?&gt;&nbsp;</div></li><li><div>                                      &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                                  &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;/tbody&gt;&nbsp;</div></li><li><div>              &lt;/table&gt;&nbsp;</div></li><li><div>          &lt;?php else : ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;woocommerce-Message woocommerce-Message--info woocommerce-info my_account_orders&quot;&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;woocommerce-Button button&quot; href=&quot;&lt;?php echo esc_url(apply_filters('woocommerce_return_to_shop_redirect', wc_get_page_permalink('shop'))); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e('Go Shop', 'evolve') ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>                  &lt;?php _e('No order has been made yet.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_account_downloads', 'evolve_woocommerce_before_account_downloads');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_before_account_downloads($args) {&nbsp;</div></li><li><div>          if ($downloads = WC()-&gt;customer-&gt;get_downloadable_products()) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              do_action('woocommerce_before_available_downloads');&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;h2&gt;&lt;?php echo apply_filters('woocommerce_my_account_my_downloads_title', __('Available Downloads', 'evolve')); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;ul class=&quot;woocommerce-Downloads digital-downloads&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php foreach ($downloads as $download) : ?&gt;&nbsp;</div></li><li><div>                      &lt;li&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          do_action('woocommerce_available_download_start', $download);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if (is_numeric($download['downloads_remaining'])) {&nbsp;</div></li><li><div>                              $downloads_remaining = $download['downloads_remaining'];&nbsp;</div></li><li><div>                              echo apply_filters('woocommerce_available_download_count', '&lt;span class=&quot;woocommerce-Count count&quot;&gt;' . sprintf( _n( '%s download remaining', '%s downloads remaining', $downloads_remaining, 'evolve' ), $download['downloads_remaining'] ) . '&lt;/span&gt; ', $download);&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          echo apply_filters('woocommerce_available_download_link', '&lt;a href=&quot;' . esc_url($download['download_url']) . '&quot;&gt;' . $download['download_name'] . '&lt;/a&gt;', $download);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          do_action('woocommerce_available_download_end', $download);&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                      &lt;/li&gt;&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>              &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              do_action('woocommerce_after_available_downloads');&nbsp;</div></li><li><div>          else :&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;woocommerce-Message woocommerce-Message--info woocommerce-info digital-downloads&quot;&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;woocommerce-Button button&quot; href=&quot;&lt;?php echo esc_url(apply_filters('woocommerce_return_to_shop_redirect', wc_get_page_permalink('shop'))); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php esc_html_e('Go Shop', 'evolve') ?&gt;&nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>                  &lt;?php esc_html_e('No downloads available yet.', 'evolve'); ?&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          endif;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_account_address', 'evolve_woocommerce_before_my_account');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_before_my_account($args) {&nbsp;</div></li><li><div>          $address_session = '';&nbsp;</div></li><li><div>          if (isset($_SESSION['formvalue'])) {&nbsp;</div></li><li><div>              $address_session = 'style=&quot;display:block&quot;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;myaccount_address&quot; id=&quot;change_address&quot; &lt;?php echo $address_session; ?&gt;&gt;&nbsp;</div></li><li><div>              &lt;h2 class=&quot;edit_address_heading&quot; &lt;?php echo $address_session; ?&gt;&gt;&lt;?php echo apply_filters('woocommerce_my_account_edit_address_title', 'My Address'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              $customer_id = get_current_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (!wc_ship_to_billing_address_only() && wc_shipping_enabled()) {&nbsp;</div></li><li><div>                  $get_addresses = apply_filters('woocommerce_my_account_get_addresses', array(&nbsp;</div></li><li><div>                      'billing' =&gt; __('Billing Address', 'evolve'), &nbsp;</div></li><li><div>                      'shipping' =&gt; __('Shipping Address', 'evolve')&nbsp;</div></li><li><div> ), $customer_id);&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $get_addresses = apply_filters('woocommerce_my_account_get_addresses', array(&nbsp;</div></li><li><div>                      'billing' =&gt; __('Billing Address', 'evolve')&nbsp;</div></li><li><div> ), $customer_id);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $oldcol = 1;&nbsp;</div></li><li><div>              $col = 1;&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php echo apply_filters('woocommerce_my_account_my_address_description', __('The following addresses will be used on the checkout page by default.', 'evolve')); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              if (!wc_ship_to_billing_address_only() && wc_shipping_enabled())&nbsp;</div></li><li><div>                  echo '&lt;div class=&quot;u-columns woocommerce-Addresses col2-set&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ($get_addresses as $name =&gt; $title) :&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;div class=&quot;u-column&lt;?php echo ( ( $col = $col * -1 ) &lt; 0 ) ? 1 : 2; ?&gt; col-&lt;?php echo ( ( $oldcol = $oldcol * -1 ) &lt; 0 ) ? 1 : 2; ?&gt; woocommerce-Address&quot;&gt;&nbsp;</div></li><li><div>                      &lt;header class=&quot;woocommerce-Address-title title&quot;&gt;&nbsp;</div></li><li><div>                          &lt;h3&gt;&lt;?php echo $title; ?&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>                          &lt;a href=&quot;#&quot; data-name=&quot;&lt;?php echo $name; ?&gt;&quot; id=&quot;editaddress_&lt;?php echo $name; ?&gt;&quot; class=&quot;edit woo_editaddress&quot;&gt;&lt;?php _e('Edit', 'evolve'); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                      &lt;/header&gt;&nbsp;</div></li><li><div>                      &lt;address&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          $address = apply_filters('woocommerce_my_account_my_address_formatted_address', array(&nbsp;</div></li><li><div>                              'first_name' =&gt; get_user_meta($customer_id, $name . '_first_name', true), &nbsp;</div></li><li><div>                              'last_name' =&gt; get_user_meta($customer_id, $name . '_last_name', true), &nbsp;</div></li><li><div>                              'company' =&gt; get_user_meta($customer_id, $name . '_company', true), &nbsp;</div></li><li><div>                              'address_1' =&gt; get_user_meta($customer_id, $name . '_address_1', true), &nbsp;</div></li><li><div>                              'address_2' =&gt; get_user_meta($customer_id, $name . '_address_2', true), &nbsp;</div></li><li><div>                              'city' =&gt; get_user_meta($customer_id, $name . '_city', true), &nbsp;</div></li><li><div>                              'state' =&gt; get_user_meta($customer_id, $name . '_state', true), &nbsp;</div></li><li><div>                              'postcode' =&gt; get_user_meta($customer_id, $name . '_postcode', true), &nbsp;</div></li><li><div>                              'country' =&gt; get_user_meta($customer_id, $name . '_country', true)&nbsp;</div></li><li><div> ), $customer_id, $name);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          $formatted_address = WC()-&gt;countries-&gt;get_formatted_address($address);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if (!$formatted_address)&nbsp;</div></li><li><div>                              _e('You have not set up this type of address yet.', 'evolve');&nbsp;</div></li><li><div>                          else&nbsp;</div></li><li><div>                              echo $formatted_address;&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                      &lt;/address&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>              endforeach;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (!wc_ship_to_billing_address_only() && wc_shipping_enabled())&nbsp;</div></li><li><div>                  echo '&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $load_address = 'billing';&nbsp;</div></li><li><div>              $current_user = wp_get_current_user();&nbsp;</div></li><li><div>              $address = WC()-&gt;countries-&gt;get_address_fields(get_user_meta(get_current_user_id(), $load_address . '_country', true), $load_address . '_');&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">// Prepare values</span></span>&nbsp;</div></li><li><div>              foreach ($address as $key =&gt; $field) {&nbsp;</div></li><li><div>                  $value = get_user_meta(get_current_user_id(), $key, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if (!$value) {&nbsp;</div></li><li><div>                      switch ($key) {&nbsp;</div></li><li><div>                          case 'billing_email' :&nbsp;</div></li><li><div>                          case 'shipping_email' :&nbsp;</div></li><li><div>                              $value = $current_user-&gt;user_email;&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                          case 'billing_country' :&nbsp;</div></li><li><div>                          case 'shipping_country' :&nbsp;</div></li><li><div>                              $value = WC()-&gt;countries-&gt;get_base_country();&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                          case 'billing_state' :&nbsp;</div></li><li><div>                          case 'shipping_state' :&nbsp;</div></li><li><div>                              $value = WC()-&gt;countries-&gt;get_base_state();&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $address[$key]['value'] = apply_filters('woocommerce_my_account_edit_address_field_value', $value, $key, $load_address);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $addressform_session = '';&nbsp;</div></li><li><div>                  if (isset($_SESSION['formvalue']) && !empty($field['required']) && isset($_POST[$key])) {&nbsp;</div></li><li><div>                      $addressform_session = 'style=display:block';&nbsp;</div></li><li><div>                  } elseif (isset($_SESSION['formvalue'])) {&nbsp;</div></li><li><div>                      $addressform_session = 'style=display:none';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;h3 class=&quot;editaddress_billing&quot; &lt;?php echo $addressform_session; ?&gt;&gt;&lt;?php _e('Billing Address', 'evolve'); ?&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;editaddress_billing&quot; &lt;?php echo $addressform_session; ?&gt;&gt;&nbsp;</div></li><li><div>                  &lt;form method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      foreach ($address as $key =&gt; $field) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          woocommerce_form_field($key, $field, !empty($_POST[$key]) ? wc_clean($_POST[$key]) : $field['value'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      endforeach;&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;p&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;submit&quot; class=&quot;button small default alignright&quot; id=&quot;saveaddress&quot; name=&quot;save_address&quot; value=&quot;&lt;?php _e('Save Address', 'evolve'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                          &lt;?php wp_nonce_field('woocommerce-edit_address'); ?&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;edit_address&quot; /&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;hidden&quot; name=&quot;formvalue&quot; value=&quot;billing&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;/form&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              $load_address = 'shipping';&nbsp;</div></li><li><div>              $current_user = wp_get_current_user();&nbsp;</div></li><li><div>              $address = WC()-&gt;countries-&gt;get_address_fields(get_user_meta(get_current_user_id(), $load_address . '_country', true), $load_address . '_');&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">// Prepare values</span></span>&nbsp;</div></li><li><div>              foreach ($address as $key =&gt; $field) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $value = get_user_meta(get_current_user_id(), $key, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if (!$value) {&nbsp;</div></li><li><div>                      switch ($key) {&nbsp;</div></li><li><div>                          case 'billing_email' :&nbsp;</div></li><li><div>                          case 'shipping_email' :&nbsp;</div></li><li><div>                              $value = $current_user-&gt;user_email;&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                          case 'billing_country' :&nbsp;</div></li><li><div>                          case 'shipping_country' :&nbsp;</div></li><li><div>                              $value = WC()-&gt;countries-&gt;get_base_country();&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                          case 'billing_state' :&nbsp;</div></li><li><div>                          case 'shipping_state' :&nbsp;</div></li><li><div>                              $value = WC()-&gt;countries-&gt;get_base_state();&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $address[$key]['value'] = apply_filters('woocommerce_my_account_edit_address_field_value', $value, $key, $load_address);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $addressform_session = '';&nbsp;</div></li><li><div>                  if (isset($_SESSION['formvalue']) && !empty($field['required']) && isset($_POST[$key])) {&nbsp;</div></li><li><div>                      $addressform_session = 'style=display:block';&nbsp;</div></li><li><div>                  } elseif (isset($_SESSION['formvalue'])) {&nbsp;</div></li><li><div>                      $addressform_session = 'style=display:none';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;h3 class=&quot;editaddress_shipping&quot; &lt;?php echo $addressform_session; ?&gt;&gt;&lt;?php _e('Shipping Address', 'evolve'); ?&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;editaddress_shipping&quot; &lt;?php echo $addressform_session; ?&gt;&gt;&nbsp;</div></li><li><div>                  &lt;form method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      foreach ($address as $key =&gt; $field) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          woocommerce_form_field($key, $field, !empty($_POST[$key]) ? wc_clean($_POST[$key]) : $field['value'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      endforeach;&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;p&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;submit&quot; class=&quot;button small default alignright&quot; id=&quot;saveaddress&quot; name=&quot;save_address&quot; value=&quot;&lt;?php _e('Save Address', 'evolve'); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                          &lt;?php wp_nonce_field('woocommerce-edit_address'); ?&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;edit_address&quot; /&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;hidden&quot; name=&quot;formvalue&quot; value=&quot;shipping&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;/form&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          unset($_SESSION['formvalue']);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      class evolve_WC_Form_Handler extends WC_Form_Handler {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          public static function init() {&nbsp;</div></li><li><div>              remove_action('template_redirect', array('WC_Form_Handler', 'save_address'));&nbsp;</div></li><li><div>              add_action('template_redirect', array(__CLASS__, 'evolve_save_address'));&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          public static function evolve_save_address() {&nbsp;</div></li><li><div>              global $wp;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $formvalue = '';&nbsp;</div></li><li><div>              if ( isset($_POST['formvalue']) ) {&nbsp;</div></li><li><div>                  $formvalue = $_POST['formvalue'];&nbsp;</div></li><li><div>                  $_SESSION['formvalue'] = $_POST['formvalue'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( isset($_POST['_wp_http_referer']) && strpos($_POST['_wp_http_referer'], '/shipping' ) !== false ) {&nbsp;</div></li><li><div>                  $formvalue = 'shipping';&nbsp;</div></li><li><div>                  $_SESSION['formvalue'] = 'shipping';&nbsp;</div></li><li><div>              } elseif ( isset($_POST['_wp_http_referer']) && strpos($_POST['_wp_http_referer'], '/billing' ) !== false ) {&nbsp;</div></li><li><div>                  $formvalue = 'billing';&nbsp;</div></li><li><div>                  $_SESSION['formvalue'] = 'billing';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ('POST' !== strtoupper($_SERVER['REQUEST_METHOD'])) {&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (empty($_POST['action']) || 'edit_address' !== $_POST['action'] || empty($_POST['_wpnonce']) || !wp_verify_nonce($_POST['_wpnonce'], 'woocommerce-edit_address')) {&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $user_id = get_current_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ($user_id &lt;= 0) {&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $load_address = ( $formvalue == 'shipping' ) ? 'shipping' : 'billing';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $address = WC()-&gt;countries-&gt;get_address_fields(esc_attr($_POST[$load_address . '_country']), $load_address . '_');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ($address as $key =&gt; $field) {&nbsp;</div></li><li><div>                  if (!isset($field['type'])) {&nbsp;</div></li><li><div>                      $field['type'] = 'text';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Get Value.</span>&nbsp;</div></li><li><div>                  switch ($field['type']) {&nbsp;</div></li><li><div>                      case 'checkbox' :&nbsp;</div></li><li><div>                          $_POST[$key] = isset($_POST[$key]) ? 1 : 0;&nbsp;</div></li><li><div>                          break;&nbsp;</div></li><li><div>                      default :&nbsp;</div></li><li><div>                          $_POST[$key] = isset($_POST[$key]) ? wc_clean($_POST[$key]) : '';&nbsp;</div></li><li><div>                          break;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Hook to allow modification of value.</span>&nbsp;</div></li><li><div>                  $_POST[$key] = apply_filters('woocommerce_process_myaccount_field_' . $key, $_POST[$key]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Validation: Required fields.</span>&nbsp;</div></li><li><div>                  if (!empty($field['required']) && empty($_POST[$key])) {&nbsp;</div></li><li><div>                      wc_add_notice($field['label'] . ' ' . __('is a required field.', 'evolve'), 'error');&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if (!empty($_POST[$key])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Validation rules</span>&nbsp;</div></li><li><div>                      if (!empty($field['validate']) && is_array($field['validate'])) {&nbsp;</div></li><li><div>                          foreach ($field['validate'] as $rule) {&nbsp;</div></li><li><div>                              switch ($rule) {&nbsp;</div></li><li><div>                                  case 'postcode' :&nbsp;</div></li><li><div>                                      $_POST[$key] = strtoupper(str_replace(' ', '', $_POST[$key]));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if (!WC_Validation::is_postcode($_POST[$key], $_POST[$load_address . '_country'])) {&nbsp;</div></li><li><div>                                          wc_add_notice(__('Please enter a valid postcode/ZIP.', 'evolve'), 'error');&nbsp;</div></li><li><div>                                      } else {&nbsp;</div></li><li><div>                                          $_POST[$key] = wc_format_postcode($_POST[$key], $_POST[$load_address . '_country']);&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                      break;&nbsp;</div></li><li><div>                                  case 'phone' :&nbsp;</div></li><li><div>                                      $_POST[$key] = wc_format_phone_number($_POST[$key]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if (!WC_Validation::is_phone($_POST[$key])) {&nbsp;</div></li><li><div>                                          wc_add_notice('&lt;strong&gt;' . $field['label'] . '&lt;/strong&gt; ' . __('is not a valid phone number.', 'evolve'), 'error');&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                      break;&nbsp;</div></li><li><div>                                  case 'email' :&nbsp;</div></li><li><div>                                      $_POST[$key] = strtolower($_POST[$key]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if (!is_email($_POST[$key])) {&nbsp;</div></li><li><div>                                          wc_add_notice('&lt;strong&gt;' . $field['label'] . '&lt;/strong&gt; ' . __('is not a valid email address.', 'evolve'), 'error');&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                      break;&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if (wc_notice_count('error') == 0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  foreach ($address as $key =&gt; $field) {&nbsp;</div></li><li><div>                      update_user_meta($user_id, $key, $_POST[$key]);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  wc_add_notice(__('Address changed successfully.', 'evolve'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  do_action('woocommerce_customer_save_address', $user_id, $load_address);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  wp_safe_redirect(wc_get_page_permalink('myaccount'));&nbsp;</div></li><li><div>                  exit;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      evolve_WC_Form_Handler::init();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action('woocommerce_account_editaccount', 'evolve_woocommerce_after_my_account');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function evolve_woocommerce_after_my_account($args) {&nbsp;</div></li><li><div>          global $woocommerce, $wp;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $user = wp_get_current_user();&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;h2 class=&quot;edit-account-heading&quot;&gt;&lt;?php _e('Edit Account', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;form class=&quot;edit-account-form&quot; action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;form-row form-row-first&quot;&gt;&nbsp;</div></li><li><div>                  &lt;label for=&quot;account_first_name&quot;&gt;&lt;?php _e('First name', 'evolve'); ?&gt; &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;input-text&quot; name=&quot;account_first_name&quot; id=&quot;account_first_name&quot; value=&quot;&lt;?php esc_attr($user-&gt;first_name); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;form-row form-row-last&quot;&gt;&nbsp;</div></li><li><div>                  &lt;label for=&quot;account_last_name&quot;&gt;&lt;?php _e('Last name', 'evolve'); ?&gt; &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;input-text&quot; name=&quot;account_last_name&quot; id=&quot;account_last_name&quot; value=&quot;&lt;?php esc_attr($user-&gt;last_name); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                  &lt;label for=&quot;account_email&quot;&gt;&lt;?php _e('Email address', 'evolve'); ?&gt; &lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;email&quot; class=&quot;input-text&quot; name=&quot;account_email&quot; id=&quot;account_email&quot; value=&quot;&lt;?php esc_attr($user-&gt;user_email); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;fieldset&gt;&nbsp;</div></li><li><div>                  &lt;legend&gt;&lt;?php _e('Password Change', 'evolve'); ?&gt;&lt;/legend&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                      &lt;label for=&quot;password_current&quot;&gt;&lt;?php _e('Current Password (leave blank to leave unchanged)', 'evolve'); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;password&quot; class=&quot;input-text&quot; name=&quot;password_current&quot; id=&quot;password_current&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                      &lt;label for=&quot;password_1&quot;&gt;&lt;?php _e('New Password (leave blank to leave unchanged)', 'evolve'); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;password&quot; class=&quot;input-text&quot; name=&quot;password_1&quot; id=&quot;password_1&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;p class=&quot;form-row form-row-wide&quot;&gt;&nbsp;</div></li><li><div>                      &lt;label for=&quot;password_2&quot;&gt;&lt;?php _e('Confirm New Password', 'evolve'); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;password&quot; class=&quot;input-text&quot; name=&quot;password_2&quot; id=&quot;password_2&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;/fieldset&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p&gt;&lt;input type=&quot;submit&quot; class=&quot;button small default alignright&quot; name=&quot;save_account_details&quot; value=&quot;&lt;?php _e('Save changes', 'evolve'); ?&gt;&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php wp_nonce_field('save_account_details'); ?&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;save_account_details&quot; /&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;clearboth&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** end my-account hooks */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** begin order hooks */</span>&nbsp;</div></li><li><div>  remove_action('woocommerce_view_order', 'woocommerce_order_details_table', 10);&nbsp;</div></li><li><div>  add_action('woocommerce_view_order', 'evolve_woocommerce_view_order', 10);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  function evolve_woocommerce_view_order($order_id) {&nbsp;</div></li><li><div>      global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $order = wc_get_order( $order_id );&nbsp;</div></li><li><div>      $order_item_product = new WC_Order_Item_Product();&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;evolve-order-details woocommerce-content-box full-width&quot;&gt;&nbsp;</div></li><li><div>          &lt;h2&gt;&lt;?php _e('Order Details', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>          &lt;table class=&quot;shop_table order_details&quot;&gt;&nbsp;</div></li><li><div>              &lt;thead&gt;&nbsp;</div></li><li><div>                  &lt;tr&gt;&nbsp;</div></li><li><div>                      &lt;th class=&quot;product-name&quot;&gt;&lt;?php _e('Product', 'evolve'); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                      &lt;th class=&quot;product-quantity&quot;&gt;&lt;?php _e('Quantity', 'evolve'); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                      &lt;th class=&quot;product-total&quot;&gt;&lt;?php _e('Total', 'evolve'); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                  &lt;/tr&gt;&nbsp;</div></li><li><div>              &lt;/thead&gt;&nbsp;</div></li><li><div>              &lt;tfoot&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  if ($totals = $order-&gt;get_order_item_totals())&nbsp;</div></li><li><div>                      foreach ($totals as $total) :&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;filler-td&quot;&gt;&nbsp;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;th scope=&quot;row&quot;&gt;&lt;?php echo $total['label']; ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;product-total&quot;&gt;&lt;?php echo $total['value']; ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                      endforeach;&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/tfoot&gt;&nbsp;</div></li><li><div>              &lt;tbody&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  if (sizeof($order-&gt;get_items()) &gt; 0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      foreach ($order-&gt;get_items() as $item) {&nbsp;</div></li><li><div>                          $_product = apply_filters('woocommerce_order_item_product', $order-&gt;get_product_from_item($item), $item);&nbsp;</div></li><li><div>                          $product =  apply_filters( 'woocommerce_order_item_product', $item-&gt;get_product(), $item );&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;&lt;?php echo esc_attr(apply_filters('woocommerce_order_item_class', 'order_item', $item, $order)); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;product-name&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;product-thumbnail&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php&nbsp;</div></li><li><div>                                      $cart_item = '';&nbsp;</div></li><li><div>                                      $cart_item_key = '';&nbsp;</div></li><li><div>                                      $thumbnail = apply_filters('woocommerce_cart_item_thumbnail', $_product-&gt;get_image(), $cart_item, $cart_item_key);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if (!$_product-&gt;is_visible())&nbsp;</div></li><li><div>                                          echo $thumbnail;&nbsp;</div></li><li><div>                                      else&nbsp;</div></li><li><div>                                          printf('&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;', $_product-&gt;get_permalink(), $thumbnail);&nbsp;</div></li><li><div>                                      ?&gt;&nbsp;</div></li><li><div>                                  &lt;/span&gt;&nbsp;</div></li><li><div>                                  &lt;div class=&quot;product-info&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;?php&nbsp;</div></li><li><div>                                      if ($_product && !$_product-&gt;is_visible())&nbsp;</div></li><li><div>                                          echo apply_filters('woocommerce_order_item_name', $item['name'], $item);&nbsp;</div></li><li><div>                                      else&nbsp;</div></li><li><div>                                          echo apply_filters('woocommerce_order_item_name', sprintf('&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;', get_permalink($item['product_id']), $item['name']), $item);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      wc_display_item_meta($item);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if ($_product && $_product-&gt;exists() && $_product-&gt;is_downloadable() && $order-&gt;is_download_permitted()) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          $download_files = $order_item_product-&gt;get_item_downloads();&nbsp;</div></li><li><div>                                          $i = 0;&nbsp;</div></li><li><div>                                          $links = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          foreach ($download_files as $download_id =&gt; $file) {&nbsp;</div></li><li><div>                                              $i++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                              $links[] = '&lt;small&gt;&lt;a href=&quot;' . esc_url($file['download_url']) . '&quot;&gt;' . sprintf(__('Download file%s', 'evolve'), ( count($download_files) &gt; 1 ? ' ' . $i . ': ' : ': ')) . esc_html($file['name']) . '&lt;/a&gt;&lt;/small&gt;';&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                          echo '&lt;br/&gt;' . implode('&lt;br/&gt;', $links);&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                      ?&gt;&nbsp;</div></li><li><div>                                  &lt;/div&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;product-quantity&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;?php echo apply_filters('woocommerce_order_item_quantity_html', $item['qty'], $item); ?&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;product-total&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;?php echo $order-&gt;get_formatted_line_subtotal($item); ?&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          $show_purchase_note = $order-&gt;has_status( apply_filters( 'woocommerce_purchase_note_order_statuses', array( 'completed', 'processing' ) ) );&nbsp;</div></li><li><div>                          $purchase_note = $product ? $product-&gt;get_purchase_note() : '';&nbsp;</div></li><li><div>                          if ( $show_purchase_note && $purchase_note ) {&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                              &lt;tr class=&quot;product-purchase-note&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;td colspan=&quot;3&quot;&gt;&lt;?php echo wpautop( do_shortcode( wp_kses_post( $purchase_note ) ) ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;/tr&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  do_action('woocommerce_order_items_table', $order);&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/tbody&gt;&nbsp;</div></li><li><div>          &lt;/table&gt;&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          &lt;?php  do_action('woocommerce_order_details_after_order_table', $order); ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;div class=&quot;evolve-customer-details woocommerce-content-box full-width&quot;&gt;&nbsp;</div></li><li><div>          &lt;header&gt;&nbsp;</div></li><li><div>              &lt;h2&gt;&lt;?php _e('Customer details', 'evolve'); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>          &lt;/header&gt;&nbsp;</div></li><li><div>          &lt;dl class=&quot;customer_details&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              if ($order-&gt;get_customer_note())&nbsp;</div></li><li><div>                  echo '&lt;dt&gt;' . __('Note:', 'evolve') . '&lt;/dt&gt; &lt;dd&gt;' . $order-&gt;get_customer_note() . '&lt;/dd&gt;';&nbsp;</div></li><li><div>              if ($order-&gt;get_billing_email())&nbsp;</div></li><li><div>                  echo '&lt;dt&gt;' . __('Email:', 'evolve') . '&lt;/dt&gt; &lt;dd&gt;' . $order-&gt;get_billing_email() . '&lt;/dd&gt;';&nbsp;</div></li><li><div>              if ($order-&gt;get_billing_phone())&nbsp;</div></li><li><div>                  echo '&lt;dt&gt;' . __('Telephone:', 'evolve') . '&lt;/dt&gt; &lt;dd&gt;' . $order-&gt;get_billing_phone() . '&lt;/dd&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Additional customer details hook</span>&nbsp;</div></li><li><div>              do_action('woocommerce_order_details_after_customer_details', $order);&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/dl&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php if (get_option('woocommerce_ship_to_billing_address_only') === 'no' && get_option('woocommerce_calc_shipping') !== 'no') : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;div class=&quot;col2-set addresses&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;div class=&quot;col-1&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;header class=&quot;title&quot;&gt;&nbsp;</div></li><li><div>                      &lt;h3&gt;&lt;?php _e('Billing Address', 'evolve'); ?&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>                  &lt;/header&gt;&nbsp;</div></li><li><div>                  &lt;address&gt;&lt;p&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          if (!$order-&gt;get_formatted_billing_address())&nbsp;</div></li><li><div>                              _e('N/A', 'evolve');&nbsp;</div></li><li><div>                          else&nbsp;</div></li><li><div>                              echo $order-&gt;get_formatted_billing_address();&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                      &lt;/p&gt;&lt;/address&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php if (get_option('woocommerce_ship_to_billing_address_only') === 'no' && get_option('woocommerce_calc_shipping') !== 'no') : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;/div&gt;&lt;!-- /.col-1 --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;div class=&quot;col-2&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;header class=&quot;title&quot;&gt;&nbsp;</div></li><li><div>                          &lt;h3&gt;&lt;?php _e('Shipping Address', 'evolve'); ?&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>                      &lt;/header&gt;&nbsp;</div></li><li><div>                      &lt;address&gt;&lt;p&gt;&nbsp;</div></li><li><div>                              &lt;?php&nbsp;</div></li><li><div>                              if (!$order-&gt;get_formatted_shipping_address())&nbsp;</div></li><li><div>                                  _e('N/A', 'evolve');&nbsp;</div></li><li><div>                              else&nbsp;</div></li><li><div>                                  echo $order-&gt;get_formatted_shipping_address();&nbsp;</div></li><li><div>                              ?&gt;&nbsp;</div></li><li><div>                          &lt;/p&gt;&lt;/address&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;/div&gt;&lt;!-- /.col-2 --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;/div&gt;&lt;!-- /.col2-set --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** end order hooks */</span>&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>theme</li><li><span></span>file</li><li><span></span></li><li><span></span>evolve</li><li><span></span>3.7.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>