<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="wordpress" data-id="21081"><head xmlns="http://www.w3.org/1999/xhtml"><title> tag | class | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Tag, class, plugin, gravity-pdf, 4.1.1" /><meta name="description" content="The WordPress Core Tag class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=12063b4197fe345a736cafc7ed5f18e9' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/tag/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ftag%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ftag%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.1.1-class-tag","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="tag" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-pdf." href="http://hookr.io/plugins/gravity-pdf/" class="plugin"><span property="name">gravity-pdf</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.1.1." href="http://hookr.io/plugins/gravity-pdf/4.1.1/" class="H_VERSION"><span property="name">4.1.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-pdf/4.1.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">tag</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="0"><a href="http://hookr.io/4.1.1/all/" title="All">All <span class="count badge">0</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.1.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="0"><a href="http://hookr.io/4.1.1/hooks/" title="Hooks">Hooks <span class="count badge">0</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/4.1.1/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="0"><a href="http://hookr.io/4.1.1/filters/" title="Filters">Filters <span class="count badge">0</span></a></li><li class="active" data-id="class" data-count="0"><a href="http://hookr.io/4.1.1/classes/" title="Classes">Classes <span class="count badge">0</span></a></li><li class="" data-id="constant" data-count="0"><a href="http://hookr.io/4.1.1/constants/" title="Constants">Constants <span class="count badge">0</span></a></li><li class="" data-id="function" data-count="0"><a href="http://hookr.io/4.1.1/functions/" title="Functions">Functions <span class="count badge">0</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/4.1.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>Tag</strong></h1><p>The WordPress Core <strong>Tag</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-pdf/4.1.1/files/vendor-blueliquiddesigns-mpdf-tag/" class="file">/vendor/blueliquiddesigns/mpdf/Tag.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="3" class="block" start="3"><li><div>class Tag&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private $mpdf;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function __construct(mPDF $mpdf)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;mpdf = $mpdf;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function OpenTag($tag, $attr, &$ahtml, &$ihtml)&nbsp;</div></li><li><div>    { // mPDF 6&nbsp;</div></li><li><div>        //Opening tag&nbsp;</div></li><li><div>        // mPDF 6&nbsp;</div></li><li><div>        // Correct for tags where HTML5 specifies optional end tags excluding table elements (cf WriteHTML() )&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;allow_html_optional_endtags) {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'])) {&nbsp;</div></li><li><div>                $closed = false;&nbsp;</div></li><li><div>                // li end tag may be omitted if immediately followed by another li element&nbsp;</div></li><li><div>                if (!$closed && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == 'LI' && $tag == 'LI') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('LI', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // dt end tag may be omitted if immediately followed by another dt element or a dd element&nbsp;</div></li><li><div>                if (!$closed && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == 'DT' && ($tag == 'DT' || $tag == 'DD')) {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('DT', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // dd end tag may be omitted if immediately followed by another dd element or a dt element&nbsp;</div></li><li><div>                if (!$closed && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == 'DD' && ($tag == 'DT' || $tag == 'DD')) {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('DD', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // p end tag may be omitted if immediately followed by an address, article, aside, blockquote, div, dl, fieldset, form, &nbsp;</div></li><li><div>                // h1, h2, h3, h4, h5, h6, hgroup, hr, main, nav, ol, p, pre, section, table, ul&nbsp;</div></li><li><div>                if (!$closed && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == 'P' && ($tag == 'P' || $tag == 'DIV' || $tag == 'H1' || $tag == 'H2' || $tag == 'H3' || $tag == 'H4' || $tag == 'H5' || $tag == 'H6' || $tag == 'UL' || $tag == 'OL' || $tag == 'TABLE' || $tag == 'PRE' || $tag == 'FORM' || $tag == 'ADDRESS' || $tag == 'BLOCKQUOTE' || $tag == 'CENTER' || $tag == 'DL' || $tag == 'HR' || $tag == 'ARTICLE' || $tag == 'ASIDE' || $tag == 'FIELDSET' || $tag == 'HGROUP' || $tag == 'MAIN' || $tag == 'NAV' || $tag == 'SECTION')) {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('P', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // option end tag may be omitted if immediately followed by another option element (or if it is immediately followed by an optgroup element)&nbsp;</div></li><li><div>                if (!$closed && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == 'OPTION' && $tag == 'OPTION') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('OPTION', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // Table elements - see also WriteHTML()&nbsp;</div></li><li><div>                if (!$closed && ($tag == 'TD' || $tag == 'TH') && $this-&gt;mpdf-&gt;lastoptionaltag == 'TD') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag($this-&gt;mpdf-&gt;lastoptionaltag, $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                if (!$closed && ($tag == 'TD' || $tag == 'TH') && $this-&gt;mpdf-&gt;lastoptionaltag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag($this-&gt;mpdf-&gt;lastoptionaltag, $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                if (!$closed && $tag == 'TR' && $this-&gt;mpdf-&gt;lastoptionaltag == 'TR') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag($this-&gt;mpdf-&gt;lastoptionaltag, $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                if (!$closed && $tag == 'TR' && $this-&gt;mpdf-&gt;lastoptionaltag == 'TD') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag($this-&gt;mpdf-&gt;lastoptionaltag, $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('TR', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('THEAD', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                if (!$closed && $tag == 'TR' && $this-&gt;mpdf-&gt;lastoptionaltag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;CloseTag($this-&gt;mpdf-&gt;lastoptionaltag, $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('TR', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $this-&gt;CloseTag('THEAD', $ahtml, $ihtml);&nbsp;</div></li><li><div>                    $closed = true;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $align = array('left' =&gt; 'L', 'center' =&gt; 'C', 'right' =&gt; 'R', 'top' =&gt; 'T', 'text-top' =&gt; 'TT', 'middle' =&gt; 'M', 'baseline' =&gt; 'BS', 'bottom' =&gt; 'B', 'text-bottom' =&gt; 'TB', 'justify' =&gt; 'J');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ($tag) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'DOTTAB':&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['type'] = 'dottab';&nbsp;</div></li><li><div>                $dots = str_repeat('.', 3) . &quot;  &quot;; // minimum number of dots&nbsp;</div></li><li><div>                $objattr['width'] = $this-&gt;mpdf-&gt;GetStringWidth($dots);&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['colorarray'] = $this-&gt;mpdf-&gt;colorarray;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['vertical_align'] = 'BS'; // mPDF 6 DOTTAB&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['OUTDENT'])) {&nbsp;</div></li><li><div>                    $objattr['outdent'] = $this-&gt;mpdf-&gt;ConvertSize($properties['OUTDENT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                } else if (isset($attr['OUTDENT'])) {&nbsp;</div></li><li><div>                    $objattr['outdent'] = $this-&gt;mpdf-&gt;ConvertSize($attr['OUTDENT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['outdent'] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['fontfamily'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>                $objattr['fontsize'] = $this-&gt;mpdf-&gt;FontSizePt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=dottab, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                // Output it to buffers&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0; // reset&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($e);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($e);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'PAGEHEADER':&nbsp;</div></li><li><div>            case 'PAGEFOOTER':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                if ($attr['NAME']) {&nbsp;</div></li><li><div>                    $pname = $attr['NAME'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $pname = '_nonhtmldefault';&nbsp;</div></li><li><div>                } // mPDF 6&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $p = array(); // mPDF 6&nbsp;</div></li><li><div>                $p['L'] = array();&nbsp;</div></li><li><div>                $p['C'] = array();&nbsp;</div></li><li><div>                $p['R'] = array();&nbsp;</div></li><li><div>                $p['L']['font-style'] = '';&nbsp;</div></li><li><div>                $p['C']['font-style'] = '';&nbsp;</div></li><li><div>                $p['R']['font-style'] = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['CONTENT-LEFT'])) {&nbsp;</div></li><li><div>                    $p['L']['content'] = $attr['CONTENT-LEFT'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['CONTENT-CENTER'])) {&nbsp;</div></li><li><div>                    $p['C']['content'] = $attr['CONTENT-CENTER'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['CONTENT-RIGHT'])) {&nbsp;</div></li><li><div>                    $p['R']['content'] = $attr['CONTENT-RIGHT'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['HEADER-STYLE']) || isset($attr['FOOTER-STYLE'])) { // font-family, size, weight, style, color&nbsp;</div></li><li><div>                    if ($tag == 'PAGEHEADER') {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['HEADER-STYLE']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['FOOTER-STYLE']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                        $p['L']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                        $p['C']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                        $p['R']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                        $p['L']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                        $p['C']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                        $p['R']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-WEIGHT']) && $properties['FONT-WEIGHT'] == 'bold') {&nbsp;</div></li><li><div>                        $p['L']['font-style'] = 'B';&nbsp;</div></li><li><div>                        $p['C']['font-style'] = 'B';&nbsp;</div></li><li><div>                        $p['R']['font-style'] = 'B';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-STYLE']) && $properties['FONT-STYLE'] == 'italic') {&nbsp;</div></li><li><div>                        $p['L']['font-style'] .= 'I';&nbsp;</div></li><li><div>                        $p['C']['font-style'] .= 'I';&nbsp;</div></li><li><div>                        $p['R']['font-style'] .= 'I';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                        $p['L']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                        $p['C']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                        $p['R']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['HEADER-STYLE-LEFT']) || isset($attr['FOOTER-STYLE-LEFT'])) {&nbsp;</div></li><li><div>                    if ($tag == 'PAGEHEADER') {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['HEADER-STYLE-LEFT']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['FOOTER-STYLE-LEFT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                        $p['L']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                        $p['L']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-WEIGHT']) && $properties['FONT-WEIGHT'] == 'bold') {&nbsp;</div></li><li><div>                        $p['L']['font-style'] = 'B';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-STYLE']) && $properties['FONT-STYLE'] == 'italic') {&nbsp;</div></li><li><div>                        $p['L']['font-style'] .='I';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                        $p['L']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['HEADER-STYLE-CENTER']) || isset($attr['FOOTER-STYLE-CENTER'])) {&nbsp;</div></li><li><div>                    if ($tag == 'PAGEHEADER') {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['HEADER-STYLE-CENTER']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['FOOTER-STYLE-CENTER']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                        $p['C']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                        $p['C']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-WEIGHT']) && $properties['FONT-WEIGHT'] == 'bold') {&nbsp;</div></li><li><div>                        $p['C']['font-style'] = 'B';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-STYLE']) && $properties['FONT-STYLE'] == 'italic') {&nbsp;</div></li><li><div>                        $p['C']['font-style'] .= 'I';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                        $p['C']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['HEADER-STYLE-RIGHT']) || isset($attr['FOOTER-STYLE-RIGHT'])) {&nbsp;</div></li><li><div>                    if ($tag == 'PAGEHEADER') {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['HEADER-STYLE-RIGHT']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['FOOTER-STYLE-RIGHT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                        $p['R']['font-family'] = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                        $p['R']['font-size'] = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE']) * _MPDFK;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-WEIGHT']) && $properties['FONT-WEIGHT'] == 'bold') {&nbsp;</div></li><li><div>                        $p['R']['font-style'] = 'B';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['FONT-STYLE']) && $properties['FONT-STYLE'] == 'italic') {&nbsp;</div></li><li><div>                        $p['R']['font-style'] .= 'I';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                        $p['R']['color'] = $properties['COLOR'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['LINE']) && $attr['LINE']) { // 0|1|on|off&nbsp;</div></li><li><div>                    if ($attr['LINE'] == '1' || strtoupper($attr['LINE']) == 'ON') {&nbsp;</div></li><li><div>                        $lineset = 1;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $lineset = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $p['line'] = $lineset;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                if ($tag == 'PAGEHEADER') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;DefHeaderByName($pname, $p);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;DefFooterByName($pname, $p);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'SETPAGEHEADER': // mPDF 6&nbsp;</div></li><li><div>            case 'SETPAGEFOOTER':&nbsp;</div></li><li><div>            case 'SETHTMLPAGEHEADER':&nbsp;</div></li><li><div>            case 'SETHTMLPAGEFOOTER':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                if (isset($attr['NAME']) && $attr['NAME']) {&nbsp;</div></li><li><div>                    $pname = $attr['NAME'];&nbsp;</div></li><li><div>                } else if ($tag == 'SETPAGEHEADER' || $tag == 'SETPAGEFOOTER') {&nbsp;</div></li><li><div>                    $pname = '_nonhtmldefault';&nbsp;</div></li><li><div>                } // mPDF 6&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    $pname = '_default';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['PAGE']) && $attr['PAGE']) {  // O|odd|even|E|ALL|[blank]&nbsp;</div></li><li><div>                    if (strtoupper($attr['PAGE']) == 'O' || strtoupper($attr['PAGE']) == 'ODD') {&nbsp;</div></li><li><div>                        $side = 'odd';&nbsp;</div></li><li><div>                    } else if (strtoupper($attr['PAGE']) == 'E' || strtoupper($attr['PAGE']) == 'EVEN') {&nbsp;</div></li><li><div>                        $side = 'even';&nbsp;</div></li><li><div>                    } else if (strtoupper($attr['PAGE']) == 'ALL') {&nbsp;</div></li><li><div>                        $side = 'both';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $side = 'odd';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $side = 'odd';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['VALUE']) && $attr['VALUE']) {  // -1|1|on|off&nbsp;</div></li><li><div>                    if ($attr['VALUE'] == '1' || strtoupper($attr['VALUE']) == 'ON') {&nbsp;</div></li><li><div>                        $set = 1;&nbsp;</div></li><li><div>                    } else if ($attr['VALUE'] == '-1' || strtoupper($attr['VALUE']) == 'OFF') {&nbsp;</div></li><li><div>                        $set = 0;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $set = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $set = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SHOW-THIS-PAGE']) && $attr['SHOW-THIS-PAGE'] && ($tag == 'SETHTMLPAGEHEADER' || $tag == 'SETPAGEHEADER')) {&nbsp;</div></li><li><div>                    $write = 1;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $write = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($side == 'odd' || $side == 'both') {&nbsp;</div></li><li><div>                    if ($set && ($tag == 'SETHTMLPAGEHEADER' || $tag == 'SETPAGEHEADER')) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLHeader($this-&gt;mpdf-&gt;pageHTMLheaders[$pname], 'O', $write);&nbsp;</div></li><li><div>                    } else if ($set && ($tag == 'SETHTMLPAGEFOOTER' || $tag == 'SETPAGEFOOTER')) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLFooter($this-&gt;mpdf-&gt;pageHTMLfooters[$pname], 'O');&nbsp;</div></li><li><div>                    } else if ($tag == 'SETHTMLPAGEHEADER' || $tag == 'SETPAGEHEADER') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLHeader('', 'O');&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLFooter('', 'O');&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($side == 'even' || $side == 'both') {&nbsp;</div></li><li><div>                    if ($set && ($tag == 'SETHTMLPAGEHEADER' || $tag == 'SETPAGEHEADER')) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLHeader($this-&gt;mpdf-&gt;pageHTMLheaders[$pname], 'E', $write);&nbsp;</div></li><li><div>                    } else if ($set && ($tag == 'SETHTMLPAGEFOOTER' || $tag == 'SETPAGEFOOTER')) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLFooter($this-&gt;mpdf-&gt;pageHTMLfooters[$pname], 'E');&nbsp;</div></li><li><div>                    } else if ($tag == 'SETHTMLPAGEHEADER' || $tag == 'SETPAGEHEADER') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLHeader('', 'E');&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetHTMLFooter('', 'E');&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- TOC -- */&nbsp;</div></li><li><div>            case 'TOC': //added custom-tag - set Marker for insertion later of ToC&nbsp;</div></li><li><div>                if (!class_exists('tocontents', false)) {&nbsp;</div></li><li><div>                    include(_MPDF_PATH . 'classes/tocontents.php');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (empty($this-&gt;mpdf-&gt;tocontents)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tocontents = new tocontents($this);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tocontents-&gt;openTagTOC($attr);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TOCPAGEBREAK': // custom-tag - set Marker for insertion later of ToC AND adds PAGEBREAK&nbsp;</div></li><li><div>                if (!class_exists('tocontents', false)) {&nbsp;</div></li><li><div>                    include(_MPDF_PATH . 'classes/tocontents.php');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (empty($this-&gt;mpdf-&gt;tocontents)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tocontents = new tocontents($this-&gt;mpdf);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                list($isbreak, $toc_id) = $this-&gt;mpdf-&gt;tocontents-&gt;openTagTOCPAGEBREAK($attr);&nbsp;</div></li><li><div>                if ($isbreak)&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                if (!isset($attr['RESETPAGENUM']) || $attr['RESETPAGENUM'] &lt; 1) {&nbsp;</div></li><li><div>                    $attr['RESETPAGENUM'] = 1;&nbsp;</div></li><li><div>                } // mPDF 6&nbsp;</div></li><li><div>            // No break - continues as PAGEBREAK...&nbsp;</div></li><li><div>            /** -- END TOC -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'PAGE_BREAK': //custom-tag&nbsp;</div></li><li><div>            case 'PAGEBREAK': //custom-tag&nbsp;</div></li><li><div>            case 'NEWPAGE': //custom-tag&nbsp;</div></li><li><div>            case 'FORMFEED': //custom-tag&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['SHEET-SIZE'])) {&nbsp;</div></li><li><div>                    // Convert to same types as accepted in initial mPDF() A4, A4-L, or array(w, h)&nbsp;</div></li><li><div>                    $prop = preg_split('/\s+/', trim($attr['SHEET-SIZE']));&nbsp;</div></li><li><div>                    if (count($prop) == 2) {&nbsp;</div></li><li><div>                        $newformat = array($this-&gt;mpdf-&gt;ConvertSize($prop[0]), $this-&gt;mpdf-&gt;ConvertSize($prop[1]));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newformat = $attr['SHEET-SIZE'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $newformat = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $save_blklvl = $this-&gt;mpdf-&gt;blklvl;&nbsp;</div></li><li><div>                $save_blk = $this-&gt;mpdf-&gt;blk;&nbsp;</div></li><li><div>                $save_silp = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $save_ilp = $this-&gt;mpdf-&gt;InlineProperties;&nbsp;</div></li><li><div>                $save_bflp = $this-&gt;mpdf-&gt;InlineBDF;&nbsp;</div></li><li><div>                $save_bflpc = $this-&gt;mpdf-&gt;InlineBDFctr; // mPDF 6&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $mgr = $mgl = $mgt = $mgb = $mgh = $mgf = '';&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                    $mgr = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                    $mgl = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-LEFT'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                    $mgt = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-TOP'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                    $mgb = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-HEADER'])) {&nbsp;</div></li><li><div>                    $mgh = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-HEADER'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MARGIN-FOOTER'])) {&nbsp;</div></li><li><div>                    $mgf = $this-&gt;mpdf-&gt;ConvertSize($attr['MARGIN-FOOTER'], $this-&gt;mpdf-&gt;w, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $ohname = $ehname = $ofname = $efname = '';&nbsp;</div></li><li><div>                if (isset($attr['ODD-HEADER-NAME'])) {&nbsp;</div></li><li><div>                    $ohname = $attr['ODD-HEADER-NAME'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['EVEN-HEADER-NAME'])) {&nbsp;</div></li><li><div>                    $ehname = $attr['EVEN-HEADER-NAME'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ODD-FOOTER-NAME'])) {&nbsp;</div></li><li><div>                    $ofname = $attr['ODD-FOOTER-NAME'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['EVEN-FOOTER-NAME'])) {&nbsp;</div></li><li><div>                    $efname = $attr['EVEN-FOOTER-NAME'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $ohvalue = $ehvalue = $ofvalue = $efvalue = 0;&nbsp;</div></li><li><div>                if (isset($attr['ODD-HEADER-VALUE']) && ($attr['ODD-HEADER-VALUE'] == '1' || strtoupper($attr['ODD-HEADER-VALUE']) == 'ON')) {&nbsp;</div></li><li><div>                    $ohvalue = 1;&nbsp;</div></li><li><div>                } else if (isset($attr['ODD-HEADER-VALUE']) && ($attr['ODD-HEADER-VALUE'] == '-1' || strtoupper($attr['ODD-HEADER-VALUE']) == 'OFF')) {&nbsp;</div></li><li><div>                    $ohvalue = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['EVEN-HEADER-VALUE']) && ($attr['EVEN-HEADER-VALUE'] == '1' || strtoupper($attr['EVEN-HEADER-VALUE']) == 'ON')) {&nbsp;</div></li><li><div>                    $ehvalue = 1;&nbsp;</div></li><li><div>                } else if (isset($attr['EVEN-HEADER-VALUE']) && ($attr['EVEN-HEADER-VALUE'] == '-1' || strtoupper($attr['EVEN-HEADER-VALUE']) == 'OFF')) {&nbsp;</div></li><li><div>                    $ehvalue = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ODD-FOOTER-VALUE']) && ($attr['ODD-FOOTER-VALUE'] == '1' || strtoupper($attr['ODD-FOOTER-VALUE']) == 'ON')) {&nbsp;</div></li><li><div>                    $ofvalue = 1;&nbsp;</div></li><li><div>                } else if (isset($attr['ODD-FOOTER-VALUE']) && ($attr['ODD-FOOTER-VALUE'] == '-1' || strtoupper($attr['ODD-FOOTER-VALUE']) == 'OFF')) {&nbsp;</div></li><li><div>                    $ofvalue = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['EVEN-FOOTER-VALUE']) && ($attr['EVEN-FOOTER-VALUE'] == '1' || strtoupper($attr['EVEN-FOOTER-VALUE']) == 'ON')) {&nbsp;</div></li><li><div>                    $efvalue = 1;&nbsp;</div></li><li><div>                } else if (isset($attr['EVEN-FOOTER-VALUE']) && ($attr['EVEN-FOOTER-VALUE'] == '-1' || strtoupper($attr['EVEN-FOOTER-VALUE']) == 'OFF')) {&nbsp;</div></li><li><div>                    $efvalue = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['ORIENTATION']) && (strtoupper($attr['ORIENTATION']) == 'L' || strtoupper($attr['ORIENTATION']) == 'LANDSCAPE')) {&nbsp;</div></li><li><div>                    $orient = 'L';&nbsp;</div></li><li><div>                } else if (isset($attr['ORIENTATION']) && (strtoupper($attr['ORIENTATION']) == 'P' || strtoupper($attr['ORIENTATION']) == 'PORTRAIT')) {&nbsp;</div></li><li><div>                    $orient = 'P';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $orient = $this-&gt;mpdf-&gt;CurOrientation;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['PAGE-SELECTOR']) && $attr['PAGE-SELECTOR']) {&nbsp;</div></li><li><div>                    $pagesel = $attr['PAGE-SELECTOR'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $pagesel = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $pagebreaktype = $this-&gt;mpdf-&gt;defaultPagebreakType;&nbsp;</div></li><li><div>                if ($tag == 'FORMFEED') {&nbsp;</div></li><li><div>                    $pagebreaktype = 'slice';&nbsp;</div></li><li><div>                } // can be overridden by PAGE-BREAK-TYPE&nbsp;</div></li><li><div>                $startpage = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                if (isset($attr['PAGE-BREAK-TYPE'])) {&nbsp;</div></li><li><div>                    if (strtolower($attr['PAGE-BREAK-TYPE']) == 'cloneall' || strtolower($attr['PAGE-BREAK-TYPE']) == 'clonebycss' || strtolower($attr['PAGE-BREAK-TYPE']) == 'slice') {&nbsp;</div></li><li><div>                        $pagebreaktype = strtolower($attr['PAGE-BREAK-TYPE']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($tag == 'TOCPAGEBREAK') {&nbsp;</div></li><li><div>                    $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // Any change in headers/footers (may need to _getHtmlHeight), or page size/orientation, @page selector, or margins - force cloneall&nbsp;</div></li><li><div>                else if ($mgr !== '' || $mgl !== '' || $mgt !== '' || $mgb !== '' || $mgh !== '' || $mgf !== '' ||&nbsp;</div></li><li><div>                    $ohname !== '' || $ehname !== '' || $ofname !== '' || $efname !== '' ||&nbsp;</div></li><li><div>                    $ohvalue || $ehvalue || $ofvalue || $efvalue ||&nbsp;</div></li><li><div>                    $orient != $this-&gt;mpdf-&gt;CurOrientation || $newformat || $pagesel) {&nbsp;</div></li><li><div>                    $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_preForcedPagebreak($pagebreaktype);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $resetpagenum = '';&nbsp;</div></li><li><div>                $pagenumstyle = '';&nbsp;</div></li><li><div>                $suppress = '';&nbsp;</div></li><li><div>                if (isset($attr['RESETPAGENUM'])) {&nbsp;</div></li><li><div>                    $resetpagenum = $attr['RESETPAGENUM'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['PAGENUMSTYLE'])) {&nbsp;</div></li><li><div>                    $pagenumstyle = $attr['PAGENUMSTYLE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SUPPRESS'])) {&nbsp;</div></li><li><div>                    $suppress = $attr['SUPPRESS'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($tag == 'TOCPAGEBREAK') {&nbsp;</div></li><li><div>                    $type = 'NEXT-ODD';&nbsp;</div></li><li><div>                } else if (isset($attr['TYPE'])) {&nbsp;</div></li><li><div>                    $type = strtoupper($attr['TYPE']);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $type = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($type == 'E' || $type == 'EVEN') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($orient, 'E', $resetpagenum, $pagenumstyle, $suppress, $mgl, $mgr, $mgt, $mgb, $mgh, $mgf, $ohname, $ehname, $ofname, $efname, $ohvalue, $ehvalue, $ofvalue, $efvalue, $pagesel, $newformat);&nbsp;</div></li><li><div>                } else if ($type == 'O' || $type == 'ODD') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($orient, 'O', $resetpagenum, $pagenumstyle, $suppress, $mgl, $mgr, $mgt, $mgb, $mgh, $mgf, $ohname, $ehname, $ofname, $efname, $ohvalue, $ehvalue, $ofvalue, $efvalue, $pagesel, $newformat);&nbsp;</div></li><li><div>                } else if ($type == 'NEXT-ODD') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($orient, 'NEXT-ODD', $resetpagenum, $pagenumstyle, $suppress, $mgl, $mgr, $mgt, $mgb, $mgh, $mgf, $ohname, $ehname, $ofname, $efname, $ohvalue, $ehvalue, $ofvalue, $efvalue, $pagesel, $newformat);&nbsp;</div></li><li><div>                } else if ($type == 'NEXT-EVEN') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($orient, 'NEXT-EVEN', $resetpagenum, $pagenumstyle, $suppress, $mgl, $mgr, $mgt, $mgb, $mgh, $mgf, $ohname, $ehname, $ofname, $efname, $ohvalue, $ehvalue, $ofvalue, $efvalue, $pagesel, $newformat);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($orient, '', $resetpagenum, $pagenumstyle, $suppress, $mgl, $mgr, $mgt, $mgb, $mgh, $mgf, $ohname, $ehname, $ofname, $efname, $ohvalue, $ehvalue, $ofvalue, $efvalue, $pagesel, $newformat);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TOC -- */&nbsp;</div></li><li><div>                if ($tag == 'TOCPAGEBREAK') {&nbsp;</div></li><li><div>                    if ($toc_id) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tocontents-&gt;m_TOC[$toc_id]['TOCmark'] = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tocontents-&gt;TOCmark = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END TOC -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_postForcedPagebreak($pagebreaktype, $startpage, $save_blk, $save_blklvl);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = $save_ilp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = $save_bflp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = $save_bflpc; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($save_silp);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- TOC -- */&nbsp;</div></li><li><div>            case 'TOCENTRY':&nbsp;</div></li><li><div>                if (isset($attr['CONTENT']) && $attr['CONTENT']) {&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['CONTENT'] = htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES);&nbsp;</div></li><li><div>                    $objattr['type'] = 'toc';&nbsp;</div></li><li><div>                    $objattr['vertical-align'] = 'T';&nbsp;</div></li><li><div>                    if (isset($attr['LEVEL']) && $attr['LEVEL']) {&nbsp;</div></li><li><div>                        $objattr['toclevel'] = $attr['LEVEL'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['toclevel'] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['NAME']) && $attr['NAME']) {&nbsp;</div></li><li><div>                        $objattr['toc_id'] = $attr['NAME'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['toc_id'] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $e = &quot;\xbb\xa4\xactype=toc, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($e);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                    else { // *TABLES*&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer[] = array($e);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END TOC -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- INDEX -- */&nbsp;</div></li><li><div>            case 'INDEXENTRY':&nbsp;</div></li><li><div>                if (isset($attr['CONTENT']) && $attr['CONTENT']) {&nbsp;</div></li><li><div>                    if (isset($attr['XREF']) && $attr['XREF']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;IndexEntry(htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES), $attr['XREF']);&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['CONTENT'] = htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES);&nbsp;</div></li><li><div>                    $objattr['type'] = 'indexentry';&nbsp;</div></li><li><div>                    $objattr['vertical-align'] = 'T';&nbsp;</div></li><li><div>                    $e = &quot;\xbb\xa4\xactype=indexentry, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($e);&nbsp;</div></li><li><div>                    }  // *TABLES*&nbsp;</div></li><li><div>                    else { // *TABLES*&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer[] = array($e);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'INDEXINSERT':&nbsp;</div></li><li><div>                if (isset($attr['COLLATION'])) {&nbsp;</div></li><li><div>                    $indexCollationLocale = $attr['COLLATION'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $indexCollationLocale = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['COLLATION-GROUP'])) {&nbsp;</div></li><li><div>                    $indexCollationGroup = $attr['COLLATION-GROUP'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $indexCollationGroup = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['USEDIVLETTERS']) && (strtoupper($attr['USEDIVLETTERS']) == 'OFF' || $attr['USEDIVLETTERS'] == -1 || $attr['USEDIVLETTERS'] === '0')) {&nbsp;</div></li><li><div>                    $usedivletters = 0;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $usedivletters = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['LINKS']) && (strtoupper($attr['LINKS']) == 'ON' || $attr['LINKS'] == 1)) {&nbsp;</div></li><li><div>                    $links = true;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $links = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InsertIndex($usedivletters, $links, $indexCollationLocale, $indexCollationGroup);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END INDEX -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- WATERMARK -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'WATERMARKTEXT':&nbsp;</div></li><li><div>                if (isset($attr['CONTENT']) && $attr['CONTENT']) {&nbsp;</div></li><li><div>                    $txt = htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $txt = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ALPHA']) && $attr['ALPHA'] &gt; 0) {&nbsp;</div></li><li><div>                    $alpha = $attr['ALPHA'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $alpha = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetWatermarkText($txt, $alpha);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'WATERMARKIMAGE':&nbsp;</div></li><li><div>                if (isset($attr['SRC'])) {&nbsp;</div></li><li><div>                    $src = $attr['SRC'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $src = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ALPHA']) && $attr['ALPHA'] &gt; 0) {&nbsp;</div></li><li><div>                    $alpha = $attr['ALPHA'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $alpha = -1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SIZE']) && $attr['SIZE']) {&nbsp;</div></li><li><div>                    $size = $attr['SIZE'];&nbsp;</div></li><li><div>                    if (strpos($size, ', ')) {&nbsp;</div></li><li><div>                        $size = explode(', ', $size);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $size = 'D';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['POSITION']) && $attr['POSITION']) {  // mPDF 5.7.2&nbsp;</div></li><li><div>                    $pos = $attr['POSITION'];&nbsp;</div></li><li><div>                    if (strpos($pos, ', ')) {&nbsp;</div></li><li><div>                        $pos = explode(', ', $pos);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $pos = 'P';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetWatermarkImage($src, $alpha, $size, $pos);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END WATERMARK -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- BOOKMARKS -- */&nbsp;</div></li><li><div>            case 'BOOKMARK':&nbsp;</div></li><li><div>                if (isset($attr['CONTENT'])) {&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['CONTENT'] = htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES);&nbsp;</div></li><li><div>                    $objattr['type'] = 'bookmark';&nbsp;</div></li><li><div>                    if (isset($attr['LEVEL']) && $attr['LEVEL']) {&nbsp;</div></li><li><div>                        $objattr['bklevel'] = $attr['LEVEL'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['bklevel'] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $e = &quot;\xbb\xa4\xactype=bookmark, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($e);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                    else { // *TABLES*&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer[] = array($e);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END BOOKMARKS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- ANNOTATIONS -- */&nbsp;</div></li><li><div>            case 'ANNOTATION':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //if (isset($attr['CONTENT']) && !$this-&gt;mpdf-&gt;writingHTMLheader && !$this-&gt;mpdf-&gt;writingHTMLfooter) {    // Stops annotations in FixedPos&nbsp;</div></li><li><div>                if (isset($attr['CONTENT'])) {&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                    $objattr['width'] = 0;&nbsp;</div></li><li><div>                    $objattr['height'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['CONTENT'] = htmlspecialchars_decode($attr['CONTENT'], ENT_QUOTES);&nbsp;</div></li><li><div>                    $objattr['type'] = 'annot';&nbsp;</div></li><li><div>                    $objattr['POPUP'] = '';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['POS-X'])) {&nbsp;</div></li><li><div>                    $objattr['POS-X'] = $attr['POS-X'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['POS-X'] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['POS-Y'])) {&nbsp;</div></li><li><div>                    $objattr['POS-Y'] = $attr['POS-Y'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['POS-Y'] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ICON'])) {&nbsp;</div></li><li><div>                    $objattr['ICON'] = $attr['ICON'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['ICON'] = 'Note';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['AUTHOR'])) {&nbsp;</div></li><li><div>                    $objattr['AUTHOR'] = $attr['AUTHOR'];&nbsp;</div></li><li><div>                } else if (isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                    $objattr['AUTHOR'] = $attr['TITLE'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['AUTHOR'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['FILE'])) {&nbsp;</div></li><li><div>                    $objattr['FILE'] = $attr['FILE'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['FILE'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SUBJECT'])) {&nbsp;</div></li><li><div>                    $objattr['SUBJECT'] = $attr['SUBJECT'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['SUBJECT'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['OPACITY']) && $attr['OPACITY'] &gt; 0 && $attr['OPACITY'] &lt;= 1) {&nbsp;</div></li><li><div>                    $objattr['OPACITY'] = $attr['OPACITY'];&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;annotMargin) {&nbsp;</div></li><li><div>                    $objattr['OPACITY'] = 1;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['OPACITY'] = $this-&gt;mpdf-&gt;annotOpacity;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['COLOR'])) {&nbsp;</div></li><li><div>                    $cor = $this-&gt;mpdf-&gt;ConvertColor($attr['COLOR']);&nbsp;</div></li><li><div>                    if ($cor) {&nbsp;</div></li><li><div>                        $objattr['COLOR'] = $cor;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['COLOR'] = $this-&gt;mpdf-&gt;ConvertColor('yellow');&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['COLOR'] = $this-&gt;mpdf-&gt;ConvertColor('yellow');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['POPUP']) && !empty($attr['POPUP'])) {&nbsp;</div></li><li><div>                    $pop = preg_split('/\s+/', trim($attr['POPUP']));&nbsp;</div></li><li><div>                    if (count($pop) &gt; 1) {&nbsp;</div></li><li><div>                        $objattr['POPUP'] = $pop;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['POPUP'] = true;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=annot, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($e);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                else { // *TABLES*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;textbuffer[] = array($e);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END ANNOTATIONS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- COLUMNS -- */&nbsp;</div></li><li><div>            case 'COLUMNS': //added custom-tag&nbsp;</div></li><li><div>                if (isset($attr['COLUMN-COUNT']) && ($attr['COLUMN-COUNT'] || $attr['COLUMN-COUNT'] === '0')) {&nbsp;</div></li><li><div>                    // Close any open block tags&nbsp;</div></li><li><div>                    for ($b = $this-&gt;mpdf-&gt;blklvl; $b &gt; 0; $b--) {&nbsp;</div></li><li><div>                        $this-&gt;CloseTag($this-&gt;mpdf-&gt;blk[$b]['tag'], $ahtml, $ihtml);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (!empty($this-&gt;mpdf-&gt;textbuffer)) { //Output previously buffered content&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;printbuffer($this-&gt;mpdf-&gt;textbuffer);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer = array();&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($attr['VALIGN']) && $attr['VALIGN']) {&nbsp;</div></li><li><div>                        if ($attr['VALIGN'] == 'J') {&nbsp;</div></li><li><div>                            $valign = 'J';&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $valign = $align[$attr['VALIGN']];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $valign = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['COLUMN-GAP']) && $attr['COLUMN-GAP']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetColumns($attr['COLUMN-COUNT'], $valign, $attr['COLUMN-GAP']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetColumns($attr['COLUMN-COUNT'], $valign);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'COLUMN_BREAK': //custom-tag&nbsp;</div></li><li><div>            case 'COLUMNBREAK': //custom-tag&nbsp;</div></li><li><div>            case 'NEWCOLUMN': //custom-tag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;NewColumn();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ColumnAdjust = false; // disables all column height adjustment for the page.&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- END COLUMNS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TTZ':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ttz = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;setCSS(array('FONT-FAMILY' =&gt; 'czapfdingbats', 'FONT-WEIGHT' =&gt; 'normal', 'FONT-STYLE' =&gt; 'normal'), 'INLINE');&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TTS':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tts = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;setCSS(array('FONT-FAMILY' =&gt; 'csymbol', 'FONT-WEIGHT' =&gt; 'normal', 'FONT-STYLE' =&gt; 'normal'), 'INLINE');&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TTA':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tta = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (in_array($this-&gt;mpdf-&gt;FontFamily, $this-&gt;mpdf-&gt;mono_fonts)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setCSS(array('FONT-FAMILY' =&gt; 'ccourier'), 'INLINE');&nbsp;</div></li><li><div>                } else if (in_array($this-&gt;mpdf-&gt;FontFamily, $this-&gt;mpdf-&gt;serif_fonts)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setCSS(array('FONT-FAMILY' =&gt; 'ctimes'), 'INLINE');&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setCSS(array('FONT-FAMILY' =&gt; 'chelvetica'), 'INLINE');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // INLINE PHRASES OR STYLES&nbsp;</div></li><li><div>            case 'SUB':&nbsp;</div></li><li><div>            case 'SUP':&nbsp;</div></li><li><div>            case 'ACRONYM':&nbsp;</div></li><li><div>            case 'BIG':&nbsp;</div></li><li><div>            case 'SMALL':&nbsp;</div></li><li><div>            case 'INS':&nbsp;</div></li><li><div>            case 'S':&nbsp;</div></li><li><div>            case 'STRIKE':&nbsp;</div></li><li><div>            case 'DEL':&nbsp;</div></li><li><div>            case 'STRONG':&nbsp;</div></li><li><div>            case 'CITE':&nbsp;</div></li><li><div>            case 'Q':&nbsp;</div></li><li><div>            case 'EM':&nbsp;</div></li><li><div>            case 'B':&nbsp;</div></li><li><div>            case 'I':&nbsp;</div></li><li><div>            case 'U':&nbsp;</div></li><li><div>            case 'SAMP':&nbsp;</div></li><li><div>            case 'CODE':&nbsp;</div></li><li><div>            case 'KBD':&nbsp;</div></li><li><div>            case 'TT':&nbsp;</div></li><li><div>            case 'VAR':&nbsp;</div></li><li><div>            case 'FONT':&nbsp;</div></li><li><div>            case 'MARK':&nbsp;</div></li><li><div>            case 'TIME':&nbsp;</div></li><li><div>            case 'BDO': // mPDF 6&nbsp;</div></li><li><div>            case 'BDI': // mPDF 6&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'SPAN':&nbsp;</div></li><li><div>                /** -- ANNOTATIONS -- */&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;title2annots && isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                    $objattr['width'] = 0;&nbsp;</div></li><li><div>                    $objattr['height'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $objattr['CONTENT'] = $attr['TITLE'];&nbsp;</div></li><li><div>                    $objattr['type'] = 'annot';&nbsp;</div></li><li><div>                    $objattr['POS-X'] = 0;&nbsp;</div></li><li><div>                    $objattr['POS-Y'] = 0;&nbsp;</div></li><li><div>                    $objattr['ICON'] = 'Comment';&nbsp;</div></li><li><div>                    $objattr['AUTHOR'] = '';&nbsp;</div></li><li><div>                    $objattr['SUBJECT'] = '';&nbsp;</div></li><li><div>                    $objattr['OPACITY'] = $this-&gt;mpdf-&gt;annotOpacity;&nbsp;</div></li><li><div>                    $objattr['COLOR'] = $this-&gt;mpdf-&gt;ConvertColor('yellow');&nbsp;</div></li><li><div>                    $annot = &quot;\xbb\xa4\xactype=annot, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END ANNOTATIONS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 5.7.3 Inline tags&nbsp;</div></li><li><div>                if (!isset($this-&gt;mpdf-&gt;InlineProperties[$tag])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;InlineProperties[$tag] = array($this-&gt;mpdf-&gt;saveInlineProperties());&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;InlineProperties[$tag][] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($annot)) {  // *ANNOTATIONS*&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;InlineAnnots[$tag])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;InlineAnnots[$tag] = array($annot);&nbsp;</div></li><li><div>                    } // *ANNOTATIONS*&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;InlineAnnots[$tag][] = $annot;&nbsp;</div></li><li><div>                    } // *ANNOTATIONS*&nbsp;</div></li><li><div>                } // *ANNOTATIONS*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>                if (!empty($properties))&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setCSS($properties, 'INLINE');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 Bidirectional formatting for inline elements&nbsp;</div></li><li><div>                $bdf = false;&nbsp;</div></li><li><div>                $bdf2 = '';&nbsp;</div></li><li><div>                $popd = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Get current direction&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'])) {&nbsp;</div></li><li><div>                    $currdir = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $currdir = 'ltr';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel && isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['direction']) && $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['direction'] == 'rtl') {&nbsp;</div></li><li><div>                    $currdir = 'rtl';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['DIR']) and $attr['DIR'] != '') {&nbsp;</div></li><li><div>                    $currdir = strtolower($attr['DIR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['DIRECTION'])) {&nbsp;</div></li><li><div>                    $currdir = strtolower($properties['DIRECTION']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 bidi&nbsp;</div></li><li><div>                // cf. http://www.w3.org/TR/css3-writing-modes/#unicode-bidi&nbsp;</div></li><li><div>                if ($tag == 'BDO') {&nbsp;</div></li><li><div>                    if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x202E;&nbsp;</div></li><li><div>                        $popd = 'RLOPDF';&nbsp;</div></li><li><div>                    } // U+202E RLO&nbsp;</div></li><li><div>                    else if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'ltr') {&nbsp;</div></li><li><div>                        $bdf = 0x202D;&nbsp;</div></li><li><div>                        $popd = 'LROPDF';&nbsp;</div></li><li><div>                    } // U+202D LRO&nbsp;</div></li><li><div>                } else if ($tag == 'BDI') {&nbsp;</div></li><li><div>                    if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x2067;&nbsp;</div></li><li><div>                        $popd = 'RLIPDI';&nbsp;</div></li><li><div>                    } // U+2067 RLI&nbsp;</div></li><li><div>                    else if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'ltr') {&nbsp;</div></li><li><div>                        $bdf = 0x2066;&nbsp;</div></li><li><div>                        $popd = 'LRIPDI';&nbsp;</div></li><li><div>                    } // U+2066 LRI&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x2068;&nbsp;</div></li><li><div>                        $popd = 'FSIPDI';&nbsp;</div></li><li><div>                    } // U+2068 FSI&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'bidi-override') {&nbsp;</div></li><li><div>                    if ($currdir == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x202E;&nbsp;</div></li><li><div>                        $popd = 'RLOPDF';&nbsp;</div></li><li><div>                    } // U+202E RLO&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x202D;&nbsp;</div></li><li><div>                        $popd = 'LROPDF';&nbsp;</div></li><li><div>                    } // U+202D LRO&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'embed') {&nbsp;</div></li><li><div>                    if ($currdir == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x202B;&nbsp;</div></li><li><div>                        $popd = 'RLEPDF';&nbsp;</div></li><li><div>                    } // U+202B RLE&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x202A;&nbsp;</div></li><li><div>                        $popd = 'LREPDF';&nbsp;</div></li><li><div>                    } // U+202A LRE&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'isolate') {&nbsp;</div></li><li><div>                    if ($currdir == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x2067;&nbsp;</div></li><li><div>                        $popd = 'RLIPDI';&nbsp;</div></li><li><div>                    } // U+2067 RLI&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x2066;&nbsp;</div></li><li><div>                        $popd = 'LRIPDI';&nbsp;</div></li><li><div>                    } // U+2066 LRI&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'isolate-override') {&nbsp;</div></li><li><div>                    if ($currdir == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x2067;&nbsp;</div></li><li><div>                        $bdf2 = 0x202E;&nbsp;</div></li><li><div>                        $popd = 'RLIRLOPDFPDI';&nbsp;</div></li><li><div>                    } // U+2067 RLI // U+202E RLO&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x2066;&nbsp;</div></li><li><div>                        $bdf2 = 0x202D;&nbsp;</div></li><li><div>                        $popd = 'LRILROPDFPDI';&nbsp;</div></li><li><div>                    } // U+2066 LRI  // U+202D LRO&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'plaintext') {&nbsp;</div></li><li><div>                    $bdf = 0x2068;&nbsp;</div></li><li><div>                    $popd = 'FSIPDI'; // U+2068 FSI&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x202B;&nbsp;</div></li><li><div>                        $popd = 'RLEPDF';&nbsp;</div></li><li><div>                    } // U+202B RLE&nbsp;</div></li><li><div>                    else if (isset($attr['DIR']) and strtolower($attr['DIR']) == 'ltr') {&nbsp;</div></li><li><div>                        $bdf = 0x202A;&nbsp;</div></li><li><div>                        $popd = 'LREPDF';&nbsp;</div></li><li><div>                    } // U+202A LRE&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($bdf) {&nbsp;</div></li><li><div>                    // mPDF 5.7.3 Inline tags&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;InlineBDF[$tag])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;InlineBDF[$tag] = array(array($popd, $this-&gt;mpdf-&gt;InlineBDFctr));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;InlineBDF[$tag][] = array($popd, $this-&gt;mpdf-&gt;InlineBDFctr);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;InlineBDFctr++;&nbsp;</div></li><li><div>                    if ($bdf2) {&nbsp;</div></li><li><div>                        $bdf2 = code2utf($bdf);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer(code2utf($bdf) . $bdf2);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer(code2utf($bdf) . $bdf2);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;biDirectional = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'A':&nbsp;</div></li><li><div>                if (isset($attr['NAME']) and $attr['NAME'] != '') {&nbsp;</div></li><li><div>                    $e = '';&nbsp;</div></li><li><div>                    /** -- BOOKMARKS -- */&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;anchor2Bookmark) {&nbsp;</div></li><li><div>                        $objattr = array();&nbsp;</div></li><li><div>                        $objattr['CONTENT'] = htmlspecialchars_decode($attr['NAME'], ENT_QUOTES);&nbsp;</div></li><li><div>                        $objattr['type'] = 'bookmark';&nbsp;</div></li><li><div>                        if (isset($attr['LEVEL']) && $attr['LEVEL']) {&nbsp;</div></li><li><div>                            $objattr['bklevel'] = $attr['LEVEL'];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $objattr['bklevel'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $e = &quot;\xbb\xa4\xactype=bookmark, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END BOOKMARKS -- */&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) { // *TABLES*&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, '', $attr['NAME']); // *TABLES*&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                    else { // *TABLES*&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer($e, '', $attr['NAME']); //an internal link (adds a space for recognition)&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['HREF'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;InlineProperties['A'] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>                    if (!empty($properties))&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setCSS($properties, 'INLINE');&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;HREF = $attr['HREF']; // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'LEGEND':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties['LEGEND'] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>                if (!empty($properties))&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setCSS($properties, 'INLINE');&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'PROGRESS':&nbsp;</div></li><li><div>            case 'METER':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;inMeter = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['MAX']) && $attr['MAX']) {&nbsp;</div></li><li><div>                    $max = $attr['MAX'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $max = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MIN']) && $attr['MIN'] && $tag == 'METER') {&nbsp;</div></li><li><div>                    $min = $attr['MIN'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $min = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($max &lt; $min) {&nbsp;</div></li><li><div>                    $max = $min;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['VALUE']) && ($attr['VALUE'] || $attr['VALUE'] === '0')) {&nbsp;</div></li><li><div>                    $value = $attr['VALUE'];&nbsp;</div></li><li><div>                    if ($value &lt; $min) {&nbsp;</div></li><li><div>                        $value = $min;&nbsp;</div></li><li><div>                    } else if ($value &gt; $max) {&nbsp;</div></li><li><div>                        $value = $max;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $value = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['LOW']) && $attr['LOW']) {&nbsp;</div></li><li><div>                    $low = $attr['LOW'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $low = $min;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($low &lt; $min) {&nbsp;</div></li><li><div>                    $low = $min;&nbsp;</div></li><li><div>                } else if ($low &gt; $max) {&nbsp;</div></li><li><div>                    $low = $max;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['HIGH']) && $attr['HIGH']) {&nbsp;</div></li><li><div>                    $high = $attr['HIGH'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $high = $max;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($high &lt; $low) {&nbsp;</div></li><li><div>                    $high = $low;&nbsp;</div></li><li><div>                } else if ($high &gt; $max) {&nbsp;</div></li><li><div>                    $high = $max;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['OPTIMUM']) && $attr['OPTIMUM']) {&nbsp;</div></li><li><div>                    $optimum = $attr['OPTIMUM'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $optimum = $min + (($max - $min) / 2);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($optimum &lt; $min) {&nbsp;</div></li><li><div>                    $optimum = $min;&nbsp;</div></li><li><div>                } else if ($optimum &gt; $max) {&nbsp;</div></li><li><div>                    $optimum = $max;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TYPE']) && $attr['TYPE']) {&nbsp;</div></li><li><div>                    $type = $attr['TYPE'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $type = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_top'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_left'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties ['DISPLAY']) && strtolower($properties ['DISPLAY']) == 'none') {&nbsp;</div></li><li><div>                    return;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr['visibility'] = 'visible';&nbsp;</div></li><li><div>                if (isset($properties['VISIBILITY'])) {&nbsp;</div></li><li><div>                    $v = strtolower($properties['VISIBILITY']);&nbsp;</div></li><li><div>                    if (($v == 'hidden' || $v == 'printonly' || $v == 'screenonly') && $this-&gt;mpdf-&gt;visibility == 'visible') {&nbsp;</div></li><li><div>                        $objattr['visibility'] = $v;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['margin_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['margin_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['padding_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['padding_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['padding_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['padding_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['border_top'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['border_bottom'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['border_left'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['border_right'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                    $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $w = 0;&nbsp;</div></li><li><div>                $h = 0;&nbsp;</div></li><li><div>                if (isset($properties['WIDTH']))&nbsp;</div></li><li><div>                    $w = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                else if (isset($attr['WIDTH']))&nbsp;</div></li><li><div>                    $w = $this-&gt;mpdf-&gt;ConvertSize($attr['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['HEIGHT']))&nbsp;</div></li><li><div>                    $h = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                else if (isset($attr['HEIGHT']))&nbsp;</div></li><li><div>                    $h = $this-&gt;mpdf-&gt;ConvertSize($attr['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['OPACITY']) && $properties['OPACITY'] &gt; 0 && $properties['OPACITY'] &lt;= 1) {&nbsp;</div></li><li><div>                    $objattr['opacity'] = $properties['OPACITY'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;HREF) {&nbsp;</div></li><li><div>                    if (strpos($this-&gt;mpdf-&gt;HREF, &quot;.&quot;) === false && strpos($this-&gt;mpdf-&gt;HREF, &quot;@&quot;) !== 0) {&nbsp;</div></li><li><div>                        $href = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                        while (array_key_exists($href, $this-&gt;mpdf-&gt;internallink))&nbsp;</div></li><li><div>                            $href = &quot;#&quot; . $href;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;internallink[$href] = $this-&gt;mpdf-&gt;AddLink();&nbsp;</div></li><li><div>                        $objattr['link'] = $this-&gt;mpdf-&gt;internallink[$href];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['link'] = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $extraheight = $objattr['padding_top'] + $objattr['padding_bottom'] + $objattr['margin_top'] + $objattr['margin_bottom'] + $objattr['border_top']['w'] + $objattr['border_bottom']['w'];&nbsp;</div></li><li><div>                $extrawidth = $objattr['padding_left'] + $objattr['padding_right'] + $objattr['margin_left'] + $objattr['margin_right'] + $objattr['border_left']['w'] + $objattr['border_right']['w'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Image file&nbsp;</div></li><li><div>                if (!class_exists('meter', false)) {&nbsp;</div></li><li><div>                    include(_MPDF_PATH . 'classes/meter.php');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;meter = new meter();&nbsp;</div></li><li><div>                $svg = $this-&gt;mpdf-&gt;meter-&gt;makeSVG(strtolower($tag), $type, $value, $max, $min, $optimum, $low, $high);&nbsp;</div></li><li><div>                //Save to local file&nbsp;</div></li><li><div>                $srcpath = _MPDF_TEMP_PATH . '_tempSVG' . uniqid(rand(1, 100000), true) . '_' . strtolower($tag) . '.svg';&nbsp;</div></li><li><div>                file_put_contents($srcpath, $svg);&nbsp;</div></li><li><div>                $orig_srcpath = $srcpath;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;GetFullPath($srcpath);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $info = $this-&gt;mpdf-&gt;_getImage($srcpath, true, true, $orig_srcpath);&nbsp;</div></li><li><div>                if (!$info) {&nbsp;</div></li><li><div>                    $info = $this-&gt;mpdf-&gt;_getImage($this-&gt;mpdf-&gt;noImageFile);&nbsp;</div></li><li><div>                    if ($info) {&nbsp;</div></li><li><div>                        $srcpath = $this-&gt;mpdf-&gt;noImageFile;&nbsp;</div></li><li><div>                        $w = ($info['w'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                        $h = ($info['h'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!$info)&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['file'] = $srcpath;&nbsp;</div></li><li><div>                //Default width and height calculation if needed&nbsp;</div></li><li><div>                if ($w == 0 and $h == 0) {&nbsp;</div></li><li><div>                    // SVG units are pixels&nbsp;</div></li><li><div>                    $w = $this-&gt;mpdf-&gt;FontSize / (10 / _MPDFK) * abs($info['w']) / _MPDFK;&nbsp;</div></li><li><div>                    $h = $this-&gt;mpdf-&gt;FontSize / (10 / _MPDFK) * abs($info['h']) / _MPDFK;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // IF WIDTH OR HEIGHT SPECIFIED&nbsp;</div></li><li><div>                if ($w == 0)&nbsp;</div></li><li><div>                    $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                if ($h == 0)&nbsp;</div></li><li><div>                    $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Resize to maximum dimensions of page&nbsp;</div></li><li><div>                $maxWidth = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];&nbsp;</div></li><li><div>                $maxHeight = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;tMargin + $this-&gt;mpdf-&gt;bMargin + 1);&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;fullImageHeight) {&nbsp;</div></li><li><div>                    $maxHeight = $this-&gt;mpdf-&gt;fullImageHeight;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (($w + $extrawidth) &gt; ($maxWidth + 0.0001)) { // mPDF 5.7.4  0.0001 to allow for rounding errors when w==maxWidth&nbsp;</div></li><li><div>                    $w = $maxWidth - $extrawidth;&nbsp;</div></li><li><div>                    $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($h + $extraheight &gt; $maxHeight) {&nbsp;</div></li><li><div>                    $h = $maxHeight - $extraheight;&nbsp;</div></li><li><div>                    $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr['type'] = 'image';&nbsp;</div></li><li><div>                $objattr['itype'] = $info['type'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['orig_h'] = $info['h'];&nbsp;</div></li><li><div>                $objattr['orig_w'] = $info['w'];&nbsp;</div></li><li><div>                $objattr['wmf_x'] = $info['x'];&nbsp;</div></li><li><div>                $objattr['wmf_y'] = $info['y'];&nbsp;</div></li><li><div>                $objattr['height'] = $h + $extraheight;&nbsp;</div></li><li><div>                $objattr['width'] = $w + $extrawidth;&nbsp;</div></li><li><div>                $objattr['image_height'] = $h;&nbsp;</div></li><li><div>                $objattr['image_width'] = $w;&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=image, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'BR':&nbsp;</div></li><li><div>                // Added mPDF 3.0 Float DIV - CLEAR&nbsp;</div></li><li><div>                if (isset($attr['STYLE'])) {&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['STYLE']);&nbsp;</div></li><li><div>                    if (isset($properties['CLEAR'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;ClearFloats(strtoupper($properties['CLEAR']), $this-&gt;mpdf-&gt;blklvl);&nbsp;</div></li><li><div>                    } // *CSS-FLOAT*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 bidi&nbsp;</div></li><li><div>                // Inline&nbsp;</div></li><li><div>                // If unicode-bidi set, any embedding levels, isolates, or overrides started by the inline box are closed at the br and reopened on the other side&nbsp;</div></li><li><div>                $blockpre = '';&nbsp;</div></li><li><div>                $blockpost = '';&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode'])) {&nbsp;</div></li><li><div>                    $blockpre = $this-&gt;mpdf-&gt;_setBidiCodes('end', $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode']);&nbsp;</div></li><li><div>                    $blockpost = $this-&gt;mpdf-&gt;_setBidiCodes('start', $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Inline&nbsp;</div></li><li><div>                // If unicode-bidi set, any embedding levels, isolates, or overrides started by the inline box are closed at the br and reopened on the other side&nbsp;</div></li><li><div>                $inlinepre = '';&nbsp;</div></li><li><div>                $inlinepost = '';&nbsp;</div></li><li><div>                $iBDF = array();&nbsp;</div></li><li><div>                if (count($this-&gt;mpdf-&gt;InlineBDF)) {&nbsp;</div></li><li><div>                    foreach ($this-&gt;mpdf-&gt;InlineBDF AS $k =&gt; $ib) {&nbsp;</div></li><li><div>                        foreach ($ib AS $ib2) {&nbsp;</div></li><li><div>                            $iBDF[$ib2[1]] = $ib2[0];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (count($iBDF)) {&nbsp;</div></li><li><div>                        ksort($iBDF);&nbsp;</div></li><li><div>                        for ($i = count($iBDF) - 1; $i &gt;= 0; $i--) {&nbsp;</div></li><li><div>                            $inlinepre .= $this-&gt;mpdf-&gt;_setBidiCodes('end', $iBDF[$i]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        for ($i = 0; $i &lt; count($iBDF); $i++) {&nbsp;</div></li><li><div>                            $inlinepost .= $this-&gt;mpdf-&gt;_setBidiCodes('start', $iBDF[$i]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;blockjustfinished) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($blockpre . $inlinepre . &quot;\n&quot; . $inlinepost . $blockpost);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($blockpre . $inlinepre . &quot;\n&quot; . $inlinepost . $blockpost);&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0; // reset&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    if (count($this-&gt;mpdf-&gt;textbuffer)) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0] = preg_replace('/ $/', '', $this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0]);&nbsp;</div></li><li><div>                        if (!empty($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][18])) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;otl-&gt;trimOTLdata($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][18], false, true);&nbsp;</div></li><li><div>                        } // *OTL*&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($blockpre . $inlinepre . &quot;\n&quot; . $inlinepost . $blockpost);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blockjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;linebreakjustfinished = true;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** BLOCKS  ********************&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'PRE':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ispre = true; // ADDED - Prevents left trim of textbuffer in printbuffer()&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'DIV':&nbsp;</div></li><li><div>            case 'FORM':&nbsp;</div></li><li><div>            case 'CENTER':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'BLOCKQUOTE':&nbsp;</div></li><li><div>            case 'ADDRESS':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'CAPTION':&nbsp;</div></li><li><div>            case 'P':&nbsp;</div></li><li><div>            case 'H1':&nbsp;</div></li><li><div>            case 'H2':&nbsp;</div></li><li><div>            case 'H3':&nbsp;</div></li><li><div>            case 'H4':&nbsp;</div></li><li><div>            case 'H5':&nbsp;</div></li><li><div>            case 'H6':&nbsp;</div></li><li><div>            case 'DL':&nbsp;</div></li><li><div>            case 'DT':&nbsp;</div></li><li><div>            case 'DD':&nbsp;</div></li><li><div>            case 'UL': // mPDF 6  Lists&nbsp;</div></li><li><div>            case 'OL': // mPDF 6&nbsp;</div></li><li><div>            case 'LI': // mPDF 6&nbsp;</div></li><li><div>            case 'FIELDSET':&nbsp;</div></li><li><div>            case 'DETAILS':&nbsp;</div></li><li><div>            case 'SUMMARY':&nbsp;</div></li><li><div>            case 'ARTICLE':&nbsp;</div></li><li><div>            case 'ASIDE':&nbsp;</div></li><li><div>            case 'FIGURE':&nbsp;</div></li><li><div>            case 'FIGCAPTION':&nbsp;</div></li><li><div>            case 'FOOTER':&nbsp;</div></li><li><div>            case 'HEADER':&nbsp;</div></li><li><div>            case 'HGROUP':&nbsp;</div></li><li><div>            case 'NAV':&nbsp;</div></li><li><div>            case 'SECTION':&nbsp;</div></li><li><div>            case 'MAIN':&nbsp;</div></li><li><div>                // mPDF 6  Lists&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 bidi&nbsp;</div></li><li><div>                // Block&nbsp;</div></li><li><div>                // If unicode-bidi set on current clock, any embedding levels, isolates, or overrides are closed (not inherited)&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode'])) {&nbsp;</div></li><li><div>                    $blockpost = $this-&gt;mpdf-&gt;_setBidiCodes('end', $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode']);&nbsp;</div></li><li><div>                    if ($blockpost) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_saveCellTextBuffer($blockpost);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_saveTextBuffer($blockpost);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $p = $this-&gt;mpdf-&gt;cssmgr-&gt;PreviewBlockCSS($tag, $attr);&nbsp;</div></li><li><div>                if (isset($p['DISPLAY']) && strtolower($p['DISPLAY']) == 'none') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blklvl++;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['hide'] = true;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] = $tag;  // mPDF 6&nbsp;</div></li><li><div>                    return;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($tag == 'CAPTION') {&nbsp;</div></li><li><div>                    // position is written in AdjstHTML&nbsp;</div></li><li><div>                    if (isset($attr['POSITION']) && strtolower($attr['POSITION']) == 'bottom') {&nbsp;</div></li><li><div>                        $divpos = 'B';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $divpos = 'T';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ALIGN']) && strtolower($attr['ALIGN']) == 'bottom') {&nbsp;</div></li><li><div>                        $cappos = 'B';&nbsp;</div></li><li><div>                    } else if (isset($p['CAPTION-SIDE']) && strtolower($p['CAPTION-SIDE']) == 'bottom') {&nbsp;</div></li><li><div>                        $cappos = 'B';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $cappos = 'T';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ALIGN'])) {&nbsp;</div></li><li><div>                        unset($attr['ALIGN']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($cappos != $divpos) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blklvl++;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['hide'] = true;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] = $tag;  // mPDF 6&nbsp;</div></li><li><div>                        return;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- FORMS -- */&nbsp;</div></li><li><div>                if ($tag == 'FORM') {&nbsp;</div></li><li><div>                    if (isset($attr['METHOD']) && strtolower($attr['METHOD']) == 'get') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;mpdfform-&gt;formMethod = 'GET';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;mpdfform-&gt;formMethod = 'POST';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ACTION'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;mpdfform-&gt;formAction = $attr['ACTION'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;mpdfform-&gt;formAction = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END FORMS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- CSS-POSITION -- */&nbsp;</div></li><li><div>                if ((isset($p['POSITION']) && (strtolower($p['POSITION']) == 'fixed' || strtolower($p['POSITION']) == 'absolute')) && $this-&gt;mpdf-&gt;blklvl == 0) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;inFixedPosBlock) {&nbsp;</div></li><li><div>                        throw new MpdfException(&quot;Cannot nest block with position:fixed or position:absolute&quot;);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;inFixedPosBlock = true;&nbsp;</div></li><li><div>                    return;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END CSS-POSITION -- */&nbsp;</div></li><li><div>                // Start Block&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;blockjustfinished && !count($this-&gt;mpdf-&gt;textbuffer) && $this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin && $this-&gt;mpdf-&gt;collapseBlockMargins) {&nbsp;</div></li><li><div>                    $lastbottommargin = $this-&gt;mpdf-&gt;lastblockbottommargin;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $lastbottommargin = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastblockbottommargin = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blockjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = array(); // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = 0; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;divbegin = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;linebreakjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    // If already something on the line&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] &gt; 0 && !$this-&gt;mpdf-&gt;nestedtablejustfinished) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer(&quot;\n&quot;);&nbsp;</div></li><li><div>                        if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                        } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0; // reset&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    // Cannot set block properties inside table - use Bold to indicate h1-h6&nbsp;</div></li><li><div>                    if ($tag == 'CENTER' && $this-&gt;mpdf-&gt;tdbegin) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['a'] = $align['center'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;InlineProperties['BLOCKINTABLE'] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                    if (!empty($properties))&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setCSS($properties, 'INLINE');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // mPDF 6  Lists&nbsp;</div></li><li><div>                    if ($tag == 'UL' || $tag == 'OL') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listlvl++;&nbsp;</div></li><li><div>                        if (isset($attr['START'])) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = intval($attr['START']) - 1;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>                        if ($tag == 'OL')&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl] = 'decimal';&nbsp;</div></li><li><div>                        else if ($tag == 'UL') {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;listlvl % 3 == 1)&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl] = 'disc';&nbsp;</div></li><li><div>                            elseif ($this-&gt;mpdf-&gt;listlvl % 3 == 2)&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl] = 'circle';&nbsp;</div></li><li><div>                            else&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl] = 'square';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // mPDF 6  Lists - in Tables&nbsp;</div></li><li><div>                    if ($tag == 'LI') {&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;listlvl == 0) { //in case of malformed HTML code. Example:(...)&lt;/p&gt;&lt;li&gt;Content&lt;/li&gt;&lt;p&gt;Paragraph1&lt;/p&gt;(...)&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;listlvl++; // first depth level&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] ++;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>                        //if in table - output here as a tabletextbuffer&nbsp;</div></li><li><div>                        //position:inside OR position:outside (always output in table as position:inside)&nbsp;</div></li><li><div>                        switch ($this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl]) {&nbsp;</div></li><li><div>                            case 'upper-alpha':&nbsp;</div></li><li><div>                            case 'upper-latin':&nbsp;</div></li><li><div>                            case 'A':&nbsp;</div></li><li><div>                                $blt = $this-&gt;mpdf-&gt;dec2alpha($this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl], true) . $this-&gt;mpdf-&gt;list_number_suffix;&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'lower-alpha':&nbsp;</div></li><li><div>                            case 'lower-latin':&nbsp;</div></li><li><div>                            case 'a':&nbsp;</div></li><li><div>                                $blt = $this-&gt;mpdf-&gt;dec2alpha($this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl], false) . $this-&gt;mpdf-&gt;list_number_suffix;&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'upper-roman':&nbsp;</div></li><li><div>                            case 'I':&nbsp;</div></li><li><div>                                $blt = $this-&gt;mpdf-&gt;dec2roman($this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl], true) . $this-&gt;mpdf-&gt;list_number_suffix;&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'lower-roman':&nbsp;</div></li><li><div>                            case 'i':&nbsp;</div></li><li><div>                                $blt = $this-&gt;mpdf-&gt;dec2roman($this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl], false) . $this-&gt;mpdf-&gt;list_number_suffix;&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'decimal':&nbsp;</div></li><li><div>                            case '1':&nbsp;</div></li><li><div>                                $blt = $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] . $this-&gt;mpdf-&gt;list_number_suffix;&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            default:&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;listlvl % 3 == 1 && $this-&gt;mpdf-&gt;_charDefined($this-&gt;mpdf-&gt;CurrentFont['cw'], 8226)) {&nbsp;</div></li><li><div>                                    $blt = &quot;\xe2\x80\xa2&quot;;&nbsp;</div></li><li><div>                                }  // &#8226;&nbsp;</div></li><li><div>                                else if ($this-&gt;mpdf-&gt;listlvl % 3 == 2 && $this-&gt;mpdf-&gt;_charDefined($this-&gt;mpdf-&gt;CurrentFont['cw'], 9900)) {&nbsp;</div></li><li><div>                                    $blt = &quot;\xe2\x9a\xac&quot;;&nbsp;</div></li><li><div>                                } // &#9900;&nbsp;</div></li><li><div>                                else if ($this-&gt;mpdf-&gt;listlvl % 3 == 0 && $this-&gt;mpdf-&gt;_charDefined($this-&gt;mpdf-&gt;CurrentFont['cw'], 9642)) {&nbsp;</div></li><li><div>                                    $blt = &quot;\xe2\x96\xaa&quot;;&nbsp;</div></li><li><div>                                } // &#9642;&nbsp;</div></li><li><div>                                else {&nbsp;</div></li><li><div>                                    $blt = '-';&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        // change to &nbsp; spaces&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;usingCoreFont) {&nbsp;</div></li><li><div>                            $ls = str_repeat(chr(160) . chr(160), ($this-&gt;mpdf-&gt;listlvl - 1) * 2) . $blt . ' ';&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $ls = str_repeat(&quot;\xc2\xa0\xc2\xa0&quot;, ($this-&gt;mpdf-&gt;listlvl - 1) * 2) . $blt . ' ';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($ls);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $this-&gt;mpdf-&gt;GetStringWidth($ls);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END TABLES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;lastblocklevelchange == 1) {&nbsp;</div></li><li><div>                    $blockstate = 1;&nbsp;</div></li><li><div>                } // Top margins/padding only&nbsp;</div></li><li><div>                else if ($this-&gt;mpdf-&gt;lastblocklevelchange &lt; 1) {&nbsp;</div></li><li><div>                    $blockstate = 0;&nbsp;</div></li><li><div>                } // NO margins/padding&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;printbuffer($this-&gt;mpdf-&gt;textbuffer, $blockstate);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;textbuffer = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $save_blklvl = $this-&gt;mpdf-&gt;blklvl;&nbsp;</div></li><li><div>                $save_blk = $this-&gt;mpdf-&gt;blk;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $pagesel = '';&nbsp;</div></li><li><div>                /** -- CSS-PAGE -- */&nbsp;</div></li><li><div>                if (isset($p['PAGE'])) {&nbsp;</div></li><li><div>                    $pagesel = $p['PAGE'];&nbsp;</div></li><li><div>                }  // mPDF 6 (uses $p - preview of properties so blklvl can be incremented after page-break)&nbsp;</div></li><li><div>                /** -- END CSS-PAGE -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // If page-box has changed AND/OR PAGE-BREAK-BEFORE&nbsp;</div></li><li><div>                // mPDF 6 (uses $p - preview of properties so blklvl can be imcremented after page-break)&nbsp;</div></li><li><div>                if (!$this-&gt;mpdf-&gt;tableLevel && (($pagesel && (!isset($this-&gt;mpdf-&gt;page_box['current']) || $pagesel != $this-&gt;mpdf-&gt;page_box['current'])) || (isset($p['PAGE-BREAK-BEFORE']) && $p['PAGE-BREAK-BEFORE']))) {&nbsp;</div></li><li><div>                    // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                    $startpage = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                    $pagebreaktype = $this-&gt;mpdf-&gt;defaultPagebreakType;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;lastblocklevelchange = -1;&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                        $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($pagesel && (!isset($this-&gt;mpdf-&gt;page_box['current']) || $pagesel != $this-&gt;mpdf-&gt;page_box['current'])) {&nbsp;</div></li><li><div>                        $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_preForcedPagebreak($pagebreaktype);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($p['PAGE-BREAK-BEFORE'])) {&nbsp;</div></li><li><div>                        if (strtoupper($p['PAGE-BREAK-BEFORE']) == 'RIGHT') {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-ODD', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0, $pagesel);&nbsp;</div></li><li><div>                        } else if (strtoupper($p['PAGE-BREAK-BEFORE']) == 'LEFT') {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-EVEN', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0, $pagesel);&nbsp;</div></li><li><div>                        } else if (strtoupper($p['PAGE-BREAK-BEFORE']) == 'ALWAYS') {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, '', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0, $pagesel);&nbsp;</div></li><li><div>                        } else if ($this-&gt;mpdf-&gt;page_box['current'] != $pagesel) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, '', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0, $pagesel);&nbsp;</div></li><li><div>                        } // *CSS-PAGE*&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- CSS-PAGE -- */&nbsp;</div></li><li><div>                    // Must Add new page if changed page properties&nbsp;</div></li><li><div>                    else if (!isset($this-&gt;mpdf-&gt;page_box['current']) || $pagesel != $this-&gt;mpdf-&gt;page_box['current']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, '', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0, $pagesel);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END CSS-PAGE -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_postForcedPagebreak($pagebreaktype, $startpage, $save_blk, $save_blklvl);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype - moved after pagebreak&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blklvl++;&nbsp;</div></li><li><div>                $currblk = & $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;initialiseBlock($currblk);&nbsp;</div></li><li><div>                $prevblk = & $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1];&nbsp;</div></li><li><div>                $currblk['tag'] = $tag;&nbsp;</div></li><li><div>                $currblk['attr'] = $attr;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('BLOCK', $tag, $attr); // mPDF 6 - moved to after page-break-before&nbsp;</div></li><li><div>                // mPDF 6 page-break-inside:avoid&nbsp;</div></li><li><div>                if (isset($properties['PAGE-BREAK-INSIDE']) && strtoupper($properties['PAGE-BREAK-INSIDE']) == 'AVOID' && !$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;keep_block_together && !isset($attr['PAGEBREAKAVOIDCHECKED'])) { // avoid re-iterating using PAGEBREAKAVOIDCHECKED; set in CloseTag&nbsp;</div></li><li><div>                    $currblk['keep_block_together'] = 1;&nbsp;</div></li><li><div>                    $currblk['array_i'] = $ihtml; // mPDF 6&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kt_y00 = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kt_p00 = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;keep_block_together = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($lastbottommargin && isset($properties['MARGIN-TOP']) && $properties['MARGIN-TOP'] && empty($properties['FLOAT'])) {&nbsp;</div></li><li><div>                    $currblk['lastbottommargin'] = $lastbottommargin;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['Z-INDEX']) && $this-&gt;mpdf-&gt;current_layer == 0) {&nbsp;</div></li><li><div>                    $v = intval($properties['Z-INDEX']);&nbsp;</div></li><li><div>                    if ($v &gt; 0) {&nbsp;</div></li><li><div>                        $currblk['z-index'] = $v;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;BeginLayer($v);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6  Lists&nbsp;</div></li><li><div>                // List-type set by attribute&nbsp;</div></li><li><div>                if ($tag == 'OL' || $tag == 'UL' || $tag == 'LI') {&nbsp;</div></li><li><div>                    if (isset($attr['TYPE']) && $attr['TYPE']) {&nbsp;</div></li><li><div>                        $listtype = $attr['TYPE'];&nbsp;</div></li><li><div>                        switch ($listtype) {&nbsp;</div></li><li><div>                            case 'A':&nbsp;</div></li><li><div>                                $listtype = 'upper-latin';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'a':&nbsp;</div></li><li><div>                                $listtype = 'lower-latin';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'I':&nbsp;</div></li><li><div>                                $listtype = 'upper-roman';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case 'i':&nbsp;</div></li><li><div>                                $listtype = 'lower-roman';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            case '1':&nbsp;</div></li><li><div>                                $listtype = 'decimal';&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $currblk['list_style_type'] = $listtype;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;setCSS($properties, 'BLOCK', $tag); //name(id/class/style) found in the CSS array!&nbsp;</div></li><li><div>                $currblk['InlineProperties'] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['VISIBILITY'])) {&nbsp;</div></li><li><div>                    $v = strtolower($properties['VISIBILITY']);&nbsp;</div></li><li><div>                    if (($v == 'hidden' || $v == 'printonly' || $v == 'screenonly') && $this-&gt;mpdf-&gt;visibility == 'visible' && !$this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $currblk['visibility'] = $v;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetVisibility($v);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                if (isset($attr['ALIGN']) && $attr['ALIGN']) {&nbsp;</div></li><li><div>                    $currblk['block-align'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['HEIGHT'])) {&nbsp;</div></li><li><div>                    $currblk['css_set_height'] = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], ($this-&gt;mpdf-&gt;h - $this-&gt;mpdf-&gt;tMargin - $this-&gt;mpdf-&gt;bMargin), $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    if (($currblk['css_set_height'] + $this-&gt;mpdf-&gt;y) &gt; $this-&gt;mpdf-&gt;PageBreakTrigger && $this-&gt;mpdf-&gt;y &gt; $this-&gt;mpdf-&gt;tMargin + 5 && $currblk['css_set_height'] &lt; ($this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;tMargin + $this-&gt;mpdf-&gt;bMargin))) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $currblk['css_set_height'] = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Added mPDF 3.0 Float DIV&nbsp;</div></li><li><div>                if (isset($prevblk['blockContext'])) {&nbsp;</div></li><li><div>                    $currblk['blockContext'] = $prevblk['blockContext'];&nbsp;</div></li><li><div>                } // *CSS-FLOAT*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['CLEAR'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;ClearFloats(strtoupper($properties['CLEAR']), $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                } // *CSS-FLOAT*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $container_w = $prevblk['inner_width'];&nbsp;</div></li><li><div>                $bdr = $currblk['border_right']['w'];&nbsp;</div></li><li><div>                $bdl = $currblk['border_left']['w'];&nbsp;</div></li><li><div>                $pdr = $currblk['padding_right'];&nbsp;</div></li><li><div>                $pdl = $currblk['padding_left'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($currblk['css_set_width'])) {&nbsp;</div></li><li><div>                    $setwidth = $currblk['css_set_width'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $setwidth = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- CSS-FLOAT -- */&nbsp;</div></li><li><div>                if (isset($properties['FLOAT']) && strtoupper($properties['FLOAT']) == 'RIGHT' && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    // Cancel Keep-Block-together&nbsp;</div></li><li><div>                    $currblk['keep_block_together'] = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kt_y00 = '';&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;keep_block_together = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blockContext++;&nbsp;</div></li><li><div>                    $currblk['blockContext'] = $this-&gt;mpdf-&gt;blockContext;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // DIV is too narrow for text to fit!&nbsp;</div></li><li><div>                    $maxw = $container_w - $l_width - $r_width;&nbsp;</div></li><li><div>                    if (($setwidth + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &gt; $maxw || ($maxw - ($currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr)) &lt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                        // Too narrow to fit - try to move down past L or R float&nbsp;</div></li><li><div>                        if ($l_max &lt; $r_max && ($setwidth + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $r_width) && (($container_w - $r_width) - ($currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('LEFT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else if ($r_max &lt; $l_max && ($setwidth + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $l_width) && (($container_w - $l_width) - ($currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('RIGHT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('BOTH', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($r_exists) {&nbsp;</div></li><li><div>                        $currblk['margin_right'] += $r_width;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $currblk['float'] = 'R';&nbsp;</div></li><li><div>                    $currblk['float_start_y'] = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    if ($currblk['css_set_width']) {&nbsp;</div></li><li><div>                        $currblk['margin_left'] = $container_w - ($setwidth + $bdl + $pdl + $bdr + $pdr + $currblk['margin_right']);&nbsp;</div></li><li><div>                        $currblk['float_width'] = ($setwidth + $bdl + $pdl + $bdr + $pdr + $currblk['margin_right']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        // *** If no width set - would need to buffer and keep track of max width, then Right-align if not full width&nbsp;</div></li><li><div>                        // and do borders and backgrounds - For now - just set to maximum width left&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ($l_exists) {&nbsp;</div></li><li><div>                            $currblk['margin_left'] += $l_width;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $currblk['css_set_width'] = $container_w - ($currblk['margin_left'] + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $currblk['float_width'] = ($currblk['css_set_width'] + $bdl + $pdl + $bdr + $pdr + $currblk['margin_right']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else if (isset($properties['FLOAT']) && strtoupper($properties['FLOAT']) == 'LEFT' && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    // Cancel Keep-Block-together&nbsp;</div></li><li><div>                    $currblk['keep_block_together'] = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kt_y00 = '';&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;keep_block_together = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blockContext++;&nbsp;</div></li><li><div>                    $currblk['blockContext'] = $this-&gt;mpdf-&gt;blockContext;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // DIV is too narrow for text to fit!&nbsp;</div></li><li><div>                    $maxw = $container_w - $l_width - $r_width;&nbsp;</div></li><li><div>                    if (($setwidth + $currblk['margin_left'] + $bdl + $pdl + $bdr + $pdr) &gt; $maxw || ($maxw - ($currblk['margin_left'] + $bdl + $pdl + $bdr + $pdr)) &lt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                        // Too narrow to fit - try to move down past L or R float&nbsp;</div></li><li><div>                        if ($l_max &lt; $r_max && ($setwidth + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $r_width) && (($container_w - $r_width) - ($currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('LEFT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else if ($r_max &lt; $l_max && ($setwidth + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $l_width) && (($container_w - $l_width) - ($currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('RIGHT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('BOTH', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($l_exists) {&nbsp;</div></li><li><div>                        $currblk['margin_left'] += $l_width;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $currblk['float'] = 'L';&nbsp;</div></li><li><div>                    $currblk['float_start_y'] = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    if ($setwidth) {&nbsp;</div></li><li><div>                        $currblk['margin_right'] = $container_w - ($setwidth + $bdl + $pdl + $bdr + $pdr + $currblk['margin_left']);&nbsp;</div></li><li><div>                        $currblk['float_width'] = ($setwidth + $bdl + $pdl + $bdr + $pdr + $currblk['margin_left']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        // *** If no width set - would need to buffer and keep track of max width, then Right-align if not full width&nbsp;</div></li><li><div>                        // and do borders and backgrounds - For now - just set to maximum width left&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ($r_exists) {&nbsp;</div></li><li><div>                            $currblk['margin_right'] += $r_width;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $currblk['css_set_width'] = $container_w - ($currblk['margin_left'] + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $currblk['float_width'] = ($currblk['css_set_width'] + $bdl + $pdl + $bdr + $pdr + $currblk['margin_left']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    // Don't allow overlap - if floats present - adjust padding to avoid overlap with Floats&nbsp;</div></li><li><div>                    list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                    $maxw = $container_w - $l_width - $r_width;&nbsp;</div></li><li><div>                    if (($setwidth + $currblk['margin_left'] + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &gt; $maxw || ($maxw - ($currblk['margin_right'] + $currblk['margin_left'] + $bdl + $pdl + $bdr + $pdr)) &lt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                        // Too narrow to fit - try to move down past L or R float&nbsp;</div></li><li><div>                        if ($l_max &lt; $r_max && ($setwidth + $currblk['margin_left'] + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $r_width) && (($container_w - $r_width) - ($currblk['margin_right'] + $currblk['margin_left'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('LEFT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else if ($r_max &lt; $l_max && ($setwidth + $currblk['margin_left'] + $currblk['margin_right'] + $bdl + $pdl + $bdr + $pdr) &lt;= ($container_w - $l_width) && (($container_w - $l_width) - ($currblk['margin_right'] + $currblk['margin_left'] + $bdl + $pdl + $bdr + $pdr)) &gt; (2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false))) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('RIGHT', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;ClearFloats('BOTH', $this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        list($l_exists, $r_exists, $l_max, $r_max, $l_width, $r_width) = $this-&gt;mpdf-&gt;GetFloatDivInfo($this-&gt;mpdf-&gt;blklvl - 1);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($r_exists) {&nbsp;</div></li><li><div>                        $currblk['padding_right'] = max(($r_width - $currblk['margin_right'] - $bdr), $pdr);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($l_exists) {&nbsp;</div></li><li><div>                        $currblk['padding_left'] = max(($l_width - $currblk['margin_left'] - $bdl), $pdl);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END CSS-FLOAT -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- BORDER-RADIUS -- */&nbsp;</div></li><li><div>                // Automatically increase padding if required for border-radius&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;autoPadding && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    if ($currblk['border_radius_TL_H'] &gt; $currblk['padding_left'] && $currblk['border_radius_TL_V'] &gt; $currblk['padding_top']) {&nbsp;</div></li><li><div>                        if ($currblk['border_radius_TL_H'] &gt; $currblk['border_radius_TL_V']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_TL_H'], $currblk['border_radius_TL_V'], $currblk['padding_left'], $currblk['padding_top']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_TL_V'], $currblk['border_radius_TL_H'], $currblk['padding_top'], $currblk['padding_left']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($currblk['border_radius_TR_H'] &gt; $currblk['padding_right'] && $currblk['border_radius_TR_V'] &gt; $currblk['padding_top']) {&nbsp;</div></li><li><div>                        if ($currblk['border_radius_TR_H'] &gt; $currblk['border_radius_TR_V']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_TR_H'], $currblk['border_radius_TR_V'], $currblk['padding_right'], $currblk['padding_top']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_TR_V'], $currblk['border_radius_TR_H'], $currblk['padding_top'], $currblk['padding_right']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($currblk['border_radius_BL_H'] &gt; $currblk['padding_left'] && $currblk['border_radius_BL_V'] &gt; $currblk['padding_bottom']) {&nbsp;</div></li><li><div>                        if ($currblk['border_radius_BL_H'] &gt; $currblk['border_radius_BL_V']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_BL_H'], $currblk['border_radius_BL_V'], $currblk['padding_left'], $currblk['padding_bottom']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_BL_V'], $currblk['border_radius_BL_H'], $currblk['padding_bottom'], $currblk['padding_left']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($currblk['border_radius_BR_H'] &gt; $currblk['padding_right'] && $currblk['border_radius_BR_V'] &gt; $currblk['padding_bottom']) {&nbsp;</div></li><li><div>                        if ($currblk['border_radius_BR_H'] &gt; $currblk['border_radius_BR_V']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_BR_H'], $currblk['border_radius_BR_V'], $currblk['padding_right'], $currblk['padding_bottom']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_borderPadding($currblk['border_radius_BR_V'], $currblk['border_radius_BR_H'], $currblk['padding_bottom'], $currblk['padding_right']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BORDER-RADIUS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Hanging indent - if negative indent: ensure padding is &gt;= indent&nbsp;</div></li><li><div>                if (!isset($currblk['text_indent'])) {&nbsp;</div></li><li><div>                    $currblk['text_indent'] = null;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!isset($currblk['inner_width'])) {&nbsp;</div></li><li><div>                    $currblk['inner_width'] = null;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $cbti = $this-&gt;mpdf-&gt;ConvertSize($currblk['text_indent'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                if ($cbti &lt; 0) {&nbsp;</div></li><li><div>                    $hangind = -($cbti);&nbsp;</div></li><li><div>                    if (isset($currblk['direction']) && $currblk['direction'] == 'rtl') { // *OTL*&nbsp;</div></li><li><div>                        $currblk['padding_right'] = max($currblk['padding_right'], $hangind); // *OTL*&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                    else { // *OTL*&nbsp;</div></li><li><div>                        $currblk['padding_left'] = max($currblk['padding_left'], $hangind);&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($currblk['css_set_width'])) {&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-LEFT']) && isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-LEFT']) == 'auto' && strtolower($properties['MARGIN-RIGHT']) == 'auto') {&nbsp;</div></li><li><div>                        // Try to reduce margins to accomodate - if still too wide, set margin-right/left=0 (reduces width)&nbsp;</div></li><li><div>                        $anyextra = $prevblk['inner_width'] - ($currblk['css_set_width'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right']);&nbsp;</div></li><li><div>                        if ($anyextra &gt; 0) {&nbsp;</div></li><li><div>                            $currblk['margin_left'] = $currblk['margin_right'] = $anyextra / 2;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $currblk['margin_left'] = $currblk['margin_right'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if (isset($properties['MARGIN-LEFT']) && strtolower($properties['MARGIN-LEFT']) == 'auto') {&nbsp;</div></li><li><div>                        // Try to reduce margin-left to accomodate - if still too wide, set margin-left=0 (reduces width)&nbsp;</div></li><li><div>                        $currblk['margin_left'] = $prevblk['inner_width'] - ($currblk['css_set_width'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right'] + $currblk['margin_right']);&nbsp;</div></li><li><div>                        if ($currblk['margin_left'] &lt; 0) {&nbsp;</div></li><li><div>                            $currblk['margin_left'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if (isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-RIGHT']) == 'auto') {&nbsp;</div></li><li><div>                        // Try to reduce margin-right to accomodate - if still too wide, set margin-right=0 (reduces width)&nbsp;</div></li><li><div>                        $currblk['margin_right'] = $prevblk['inner_width'] - ($currblk['css_set_width'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right'] + $currblk['margin_left']);&nbsp;</div></li><li><div>                        if ($currblk['margin_right'] &lt; 0) {&nbsp;</div></li><li><div>                            $currblk['margin_right'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        if ($currblk['direction'] == 'rtl') { // *OTL*&nbsp;</div></li><li><div>                            // Try to reduce margin-left to accomodate - if still too wide, set margin-left=0 (reduces width)&nbsp;</div></li><li><div>                            $currblk['margin_left'] = $prevblk['inner_width'] - ($currblk['css_set_width'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right'] + $currblk['margin_right']); // *OTL*&nbsp;</div></li><li><div>                            if ($currblk['margin_left'] &lt; 0) { // *OTL*&nbsp;</div></li><li><div>                                $currblk['margin_left'] = 0; // *OTL*&nbsp;</div></li><li><div>                            } // *OTL*&nbsp;</div></li><li><div>                        } // *OTL*&nbsp;</div></li><li><div>                        else { // *OTL*&nbsp;</div></li><li><div>                            // Try to reduce margin-right to accomodate - if still too wide, set margin-right=0 (reduces width)&nbsp;</div></li><li><div>                            $currblk['margin_right'] = $prevblk['inner_width'] - ($currblk['css_set_width'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right'] + $currblk['margin_left']);&nbsp;</div></li><li><div>                            if ($currblk['margin_right'] &lt; 0) {&nbsp;</div></li><li><div>                                $currblk['margin_right'] = 0;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        } // *OTL*&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $currblk['outer_left_margin'] = $prevblk['outer_left_margin'] + $currblk['margin_left'] + $prevblk['border_left']['w'] + $prevblk['padding_left'];&nbsp;</div></li><li><div>                $currblk['outer_right_margin'] = $prevblk['outer_right_margin'] + $currblk['margin_right'] + $prevblk['border_right']['w'] + $prevblk['padding_right'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $currblk['width'] = $this-&gt;mpdf-&gt;pgwidth - ($currblk['outer_right_margin'] + $currblk['outer_left_margin']);&nbsp;</div></li><li><div>                $currblk['inner_width'] = $currblk['width'] - ($currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Check DIV is not now too narrow to fit text&nbsp;</div></li><li><div>                $mw = 2 * $this-&gt;mpdf-&gt;GetCharWidth('W', false);&nbsp;</div></li><li><div>                if ($currblk['inner_width'] &lt; $mw) {&nbsp;</div></li><li><div>                    $currblk['padding_left'] = 0;&nbsp;</div></li><li><div>                    $currblk['padding_right'] = 0;&nbsp;</div></li><li><div>                    $currblk['border_left']['w'] = 0.2;&nbsp;</div></li><li><div>                    $currblk['border_right']['w'] = 0.2;&nbsp;</div></li><li><div>                    $currblk['margin_left'] = 0;&nbsp;</div></li><li><div>                    $currblk['margin_right'] = 0;&nbsp;</div></li><li><div>                    $currblk['outer_left_margin'] = $prevblk['outer_left_margin'] + $currblk['margin_left'] + $prevblk['border_left']['w'] + $prevblk['padding_left'];&nbsp;</div></li><li><div>                    $currblk['outer_right_margin'] = $prevblk['outer_right_margin'] + $currblk['margin_right'] + $prevblk['border_right']['w'] + $prevblk['padding_right'];&nbsp;</div></li><li><div>                    $currblk['width'] = $this-&gt;mpdf-&gt;pgwidth - ($currblk['outer_right_margin'] + $currblk['outer_left_margin']);&nbsp;</div></li><li><div>                    $currblk['inner_width'] = $this-&gt;mpdf-&gt;pgwidth - ($currblk['outer_right_margin'] + $currblk['outer_left_margin'] + $currblk['border_left']['w'] + $currblk['padding_left'] + $currblk['border_right']['w'] + $currblk['padding_right']);&nbsp;</div></li><li><div>//        if ($currblk['inner_width'] &lt; $mw) { throw new MpdfException(&quot;DIV is too narrow for text to fit!&quot;); }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;lMargin + $currblk['outer_left_margin'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-IMAGE']) && $properties['BACKGROUND-IMAGE'] && !$this-&gt;mpdf-&gt;kwt && !$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>                    $ret = $this-&gt;mpdf-&gt;SetBackground($properties, $currblk['inner_width']);&nbsp;</div></li><li><div>                    if ($ret) {&nbsp;</div></li><li><div>                        $currblk['background-image'] = $ret;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;use_kwt && isset($attr['KEEP-WITH-TABLE']) && !$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt = true;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_y0 = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    //$this-&gt;mpdf-&gt;kwt_x0 = $this-&gt;mpdf-&gt;x;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_x0 = $this-&gt;mpdf-&gt;lMargin; // mPDF 6&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_height = 0;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_buffer = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_Links = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_Annots = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_moved = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_saved = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_Reference = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_BMoutlines = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_toc = array();&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt = false;&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                //Save x, y coords in case we need to print borders...&nbsp;</div></li><li><div>                $currblk['y0'] = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                $currblk['initial_y0'] = $this-&gt;mpdf-&gt;y; // mPDF 6&nbsp;</div></li><li><div>                $currblk['x0'] = $this-&gt;mpdf-&gt;x;&nbsp;</div></li><li><div>                $currblk['initial_x0'] = $this-&gt;mpdf-&gt;x; // mPDF 6&nbsp;</div></li><li><div>                $currblk['initial_startpage'] = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                $currblk['startpage'] = $this-&gt;mpdf-&gt;page; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;oldy = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastblocklevelchange = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6  Lists&nbsp;</div></li><li><div>                if ($tag == 'OL' || $tag == 'UL') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;listlvl++;&nbsp;</div></li><li><div>                    if (isset($attr['START']) && $attr['START']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = intval($attr['START']) - 1;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // List-type&nbsp;</div></li><li><div>                    if (!isset($currblk['list_style_type']) || !$currblk['list_style_type']) {&nbsp;</div></li><li><div>                        if ($tag == 'OL')&nbsp;</div></li><li><div>                            $currblk['list_style_type'] = 'decimal';&nbsp;</div></li><li><div>                        else if ($tag == 'UL') {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;listlvl % 3 == 1)&nbsp;</div></li><li><div>                                $currblk['list_style_type'] = 'disc';&nbsp;</div></li><li><div>                            elseif ($this-&gt;mpdf-&gt;listlvl % 3 == 2)&nbsp;</div></li><li><div>                                $currblk['list_style_type'] = 'circle';&nbsp;</div></li><li><div>                            else&nbsp;</div></li><li><div>                                $currblk['list_style_type'] = 'square';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // List-image&nbsp;</div></li><li><div>                    if (!isset($currblk['list_style_image']) || !$currblk['list_style_image']) {&nbsp;</div></li><li><div>                        $currblk['list_style_image'] = 'none';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // List-position&nbsp;</div></li><li><div>                    if (!isset($currblk['list_style_position']) || !$currblk['list_style_position']) {&nbsp;</div></li><li><div>                        $currblk['list_style_position'] = 'outside';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Default indentation using padding&nbsp;</div></li><li><div>                    if (strtolower($this-&gt;mpdf-&gt;list_auto_mode) == 'mpdf' && isset($currblk['list_style_position']) && $currblk['list_style_position'] == 'outside' && isset($currblk['list_style_image']) && $currblk['list_style_image'] == 'none' && (!isset($currblk['list_style_type']) || !preg_match('/U\+([a-fA-F0-9]+)/i', $currblk['list_style_type']))) {&nbsp;</div></li><li><div>                        $autopadding = $this-&gt;mpdf-&gt;_getListMarkerWidth($currblk, $ahtml, $ihtml);&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;listlvl &gt; 1 || $this-&gt;mpdf-&gt;list_indent_first_level) {&nbsp;</div></li><li><div>                            $autopadding += $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;list_indent_default_mpdf, $currblk['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        // autopadding value is applied to left or right according&nbsp;</div></li><li><div>                        // to dir of block. Once a CSS value is set for padding it overrides this default value.&nbsp;</div></li><li><div>                        if (isset($properties['PADDING-RIGHT']) && $properties['PADDING-RIGHT'] == 'auto' && isset($currblk['direction']) && $currblk['direction'] == 'rtl') {&nbsp;</div></li><li><div>                            $currblk['padding_right'] = $autopadding;&nbsp;</div></li><li><div>                        } else if (isset($properties['PADDING-LEFT']) && $properties['PADDING-LEFT'] == 'auto') {&nbsp;</div></li><li><div>                            $currblk['padding_left'] = $autopadding;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        // Initial default value is set by $this-&gt;mpdf-&gt;list_indent_default in config.php; this value is applied to left or right according&nbsp;</div></li><li><div>                        // to dir of block. Once a CSS value is set for padding it overrides this default value.&nbsp;</div></li><li><div>                        if (isset($properties['PADDING-RIGHT']) && $properties['PADDING-RIGHT'] == 'auto' && isset($currblk['direction']) && $currblk['direction'] == 'rtl') {&nbsp;</div></li><li><div>                            $currblk['padding_right'] = $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;list_indent_default, $currblk['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        } else if (isset($properties['PADDING-LEFT']) && $properties['PADDING-LEFT'] == 'auto') {&nbsp;</div></li><li><div>                            $currblk['padding_left'] = $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;list_indent_default, $currblk['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6  Lists&nbsp;</div></li><li><div>                if ($tag == 'LI') {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;listlvl == 0) { //in case of malformed HTML code. Example:(...)&lt;/p&gt;&lt;li&gt;Content&lt;/li&gt;&lt;p&gt;Paragraph1&lt;/p&gt;(...)&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listlvl++; // first depth level&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;listcounter[$this-&gt;mpdf-&gt;listlvl] ++;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Listitem-type&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_setListMarker($currblk['list_style_type'], $currblk['list_style_image'], $currblk['list_style_position']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 Bidirectional formatting for block elements&nbsp;</div></li><li><div>                $bdf = false;&nbsp;</div></li><li><div>                $bdf2 = '';&nbsp;</div></li><li><div>                $popd = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Get current direction&nbsp;</div></li><li><div>                if (isset($currblk['direction'])) {&nbsp;</div></li><li><div>                    $currdir = $currblk['direction'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $currdir = 'ltr';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['DIR']) and $attr['DIR'] != '') {&nbsp;</div></li><li><div>                    $currdir = strtolower($attr['DIR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['DIRECTION'])) {&nbsp;</div></li><li><div>                    $currdir = strtolower($properties['DIRECTION']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 bidi&nbsp;</div></li><li><div>                // cf. http://www.w3.org/TR/css3-writing-modes/#unicode-bidi&nbsp;</div></li><li><div>                if (isset($properties ['UNICODE-BIDI']) && (strtolower($properties ['UNICODE-BIDI']) == 'bidi-override' || strtolower($properties ['UNICODE-BIDI']) == 'isolate-override')) {&nbsp;</div></li><li><div>                    if ($currdir == 'rtl') {&nbsp;</div></li><li><div>                        $bdf = 0x202E;&nbsp;</div></li><li><div>                        $popd = 'RLOPDF';&nbsp;</div></li><li><div>                    } // U+202E RLO&nbsp;</div></li><li><div>                    else {&nbsp;</div></li><li><div>                        $bdf = 0x202D;&nbsp;</div></li><li><div>                        $popd = 'LROPDF';&nbsp;</div></li><li><div>                    } // U+202D LRO&nbsp;</div></li><li><div>                } else if (isset($properties ['UNICODE-BIDI']) && strtolower($properties ['UNICODE-BIDI']) == 'plaintext') {&nbsp;</div></li><li><div>                    $bdf = 0x2068;&nbsp;</div></li><li><div>                    $popd = 'FSIPDI'; // U+2068 FSI&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bdf) {&nbsp;</div></li><li><div>                    if ($bdf2) {&nbsp;</div></li><li><div>                        $bdf2 = code2utf($bdf);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer(code2utf($bdf) . $bdf2);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer(code2utf($bdf) . $bdf2);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;biDirectional = true;&nbsp;</div></li><li><div>                    $currblk['bidicode'] = $popd;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'HR':&nbsp;</div></li><li><div>                // Added mPDF 3.0 Float DIV - CLEAR&nbsp;</div></li><li><div>                if (isset($attr['STYLE'])) {&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;readInlineCSS($attr['STYLE']);&nbsp;</div></li><li><div>                    if (isset($properties['CLEAR'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;ClearFloats(strtoupper($properties['CLEAR']), $this-&gt;mpdf-&gt;blklvl);&nbsp;</div></li><li><div>                    } // *CSS-FLOAT*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['WIDTH'])) {&nbsp;</div></li><li><div>                    $objattr['width'] = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                } else if (isset($attr['WIDTH']) && $attr['WIDTH'] != '')&nbsp;</div></li><li><div>                    $objattr['width'] = $this-&gt;mpdf-&gt;ConvertSize($attr['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ALIGN'])) {&nbsp;</div></li><li><div>                    $objattr['align'] = $align[strtolower($properties['TEXT-ALIGN'])];&nbsp;</div></li><li><div>                } else if (isset($attr['ALIGN']) && $attr['ALIGN'] != '')&nbsp;</div></li><li><div>                    $objattr['align'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-LEFT']) && strtolower($properties['MARGIN-LEFT']) == 'auto') {&nbsp;</div></li><li><div>                    $objattr['align'] = 'R';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-RIGHT']) == 'auto') {&nbsp;</div></li><li><div>                    $objattr['align'] = 'L';&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-RIGHT']) == 'auto' && isset($properties['MARGIN-LEFT']) && strtolower($properties['MARGIN-LEFT']) == 'auto') {&nbsp;</div></li><li><div>                        $objattr['align'] = 'C';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                } else if (isset($attr['COLOR']) && $attr['COLOR'] != '')&nbsp;</div></li><li><div>                    $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($attr['COLOR']);&nbsp;</div></li><li><div>                if (isset($properties['HEIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['linewidth'] = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $objattr['W-PERCENT'] = 100;&nbsp;</div></li><li><div>                    if (isset($properties['WIDTH']) && stristr($properties['WIDTH'], '%')) {&nbsp;</div></li><li><div>                        $properties['WIDTH'] += 0;  //make &quot;90%&quot; become simply &quot;90&quot;&nbsp;</div></li><li><div>                        $objattr['W-PERCENT'] = $properties['WIDTH'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['WIDTH']) && stristr($attr['WIDTH'], '%')) {&nbsp;</div></li><li><div>                        $attr['WIDTH'] += 0;  //make &quot;90%&quot; become simply &quot;90&quot;&nbsp;</div></li><li><div>                        $objattr['W-PERCENT'] = $attr['WIDTH'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END TABLES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['type'] = 'hr';&nbsp;</div></li><li><div>                $objattr['height'] = $objattr['linewidth'] + $objattr['margin_top'] + $objattr['margin_bottom'];&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=image, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Clear properties - tidy up&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                // Output it to buffers&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0; // reset&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- BARCODES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'BARCODE':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>                if (isset($attr['CODE']) && $attr['CODE']) {&nbsp;</div></li><li><div>                    $objattr = array();&nbsp;</div></li><li><div>                    $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                    $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                    $objattr['padding_top'] = 0;&nbsp;</div></li><li><div>                    $objattr['padding_bottom'] = 0;&nbsp;</div></li><li><div>                    $objattr['padding_left'] = 0;&nbsp;</div></li><li><div>                    $objattr['padding_right'] = 0;&nbsp;</div></li><li><div>                    $objattr['width'] = 0;&nbsp;</div></li><li><div>                    $objattr['height'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                    $objattr['code'] = $attr['CODE'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($attr['TYPE'])) {&nbsp;</div></li><li><div>                        $objattr['btype'] = trim(strtoupper($attr['TYPE']));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['btype'] = 'EAN13';&nbsp;</div></li><li><div>                    } // default&nbsp;</div></li><li><div>                    if (preg_match('/^(EAN13|ISBN|ISSN|EAN8|UPCA|UPCE)P([25])$/', $objattr['btype'], $m)) {&nbsp;</div></li><li><div>                        $objattr['btype'] = $m[1];&nbsp;</div></li><li><div>                        $objattr['bsupp'] = $m[2];&nbsp;</div></li><li><div>                        if (preg_match('/^(\S+)\s+(.*)$/', $objattr['code'], $mm)) {&nbsp;</div></li><li><div>                            $objattr['code'] = $mm[1];&nbsp;</div></li><li><div>                            $objattr['bsupp_code'] = $mm[2];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['bsupp'] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($attr['TEXT']) && $attr['TEXT'] == 1) {&nbsp;</div></li><li><div>                        $objattr['showtext'] = 1;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['showtext'] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['SIZE']) && $attr['SIZE'] &gt; 0) {&nbsp;</div></li><li><div>                        $objattr['bsize'] = $attr['SIZE'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['bsize'] = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['HEIGHT']) && $attr['HEIGHT'] &gt; 0) {&nbsp;</div></li><li><div>                        $objattr['bheight'] = $attr['HEIGHT'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['bheight'] = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['PR']) && $attr['PR'] &gt; 0) {&nbsp;</div></li><li><div>                        $objattr['pr_ratio'] = $attr['PR'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['pr_ratio'] = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                    if (isset($properties ['DISPLAY']) && strtolower($properties ['DISPLAY']) == 'none') {&nbsp;</div></li><li><div>                        return;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['margin_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['margin_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['padding_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['padding_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['padding_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['padding_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['border_top'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['border_bottom'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['border_left'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['border_right'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['COLOR']) && $properties['COLOR'] != '') {&nbsp;</div></li><li><div>                        $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['color'] = false;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BACKGROUND-COLOR']) && $properties['BACKGROUND-COLOR'] != '') {&nbsp;</div></li><li><div>                        $objattr['bgcolor'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BACKGROUND-COLOR']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['bgcolor'] = false;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (!class_exists('PDFBarcode', false)) {&nbsp;</div></li><li><div>                        include(_MPDF_PATH . 'classes/barcode.php');&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;barcode = new PDFBarcode();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($objattr['btype'] == 'EAN13' || $objattr['btype'] == 'ISBN' || $objattr['btype'] == 'ISSN' || $objattr['btype'] == 'UPCA' || $objattr['btype'] == 'UPCE' || $objattr['btype'] == 'EAN8') {&nbsp;</div></li><li><div>                        $code = preg_replace('/\-/', '', $objattr['code']);&nbsp;</div></li><li><div>                        if ($objattr['btype'] == 'ISSN' || $objattr['btype'] == 'ISBN') {&nbsp;</div></li><li><div>                            $arrcode = $this-&gt;mpdf-&gt;barcode-&gt;getBarcodeArray($code, 'EAN13');&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $arrcode = $this-&gt;mpdf-&gt;barcode-&gt;getBarcodeArray($code, $objattr['btype']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if ($arrcode === false) {&nbsp;</div></li><li><div>                            throw new MpdfException('Error in barcode string.');&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ($objattr['bsupp'] == 2 || $objattr['bsupp'] == 5) { // EAN-2 or -5 Supplement&nbsp;</div></li><li><div>                            $supparrcode = $this-&gt;mpdf-&gt;barcode-&gt;getBarcodeArray($objattr['bsupp_code'], 'EAN' . $objattr['bsupp']);&nbsp;</div></li><li><div>                            $w = ($arrcode[&quot;maxw&quot;] + $arrcode['lightmL'] + $arrcode['lightmR'] + $supparrcode[&quot;maxw&quot;] + $supparrcode['sepM']) * $arrcode['nom-X'] * $objattr['bsize'];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $w = ($arrcode[&quot;maxw&quot;] + $arrcode['lightmL'] + $arrcode['lightmR']) * $arrcode['nom-X'] * $objattr['bsize'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $h = $arrcode['nom-H'] * $objattr['bsize'] * $objattr['bheight'];&nbsp;</div></li><li><div>                        // Add height for ISBN string + margin from top of bars&nbsp;</div></li><li><div>                        if (($objattr['showtext'] && $objattr['btype'] == 'EAN13') || $objattr['btype'] == 'ISBN' || $objattr['btype'] == 'ISSN') {&nbsp;</div></li><li><div>                            $tisbnm = 1.5 * $objattr['bsize']; // Top margin between TOP TEXT (isbn - if shown) & bars&nbsp;</div></li><li><div>                            $isbn_fontsize = 2.1 * $objattr['bsize'];&nbsp;</div></li><li><div>                            $h += $isbn_fontsize + $tisbnm;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    // QR-code&nbsp;</div></li><li><div>                    else if ($objattr['btype'] == 'QR') {&nbsp;</div></li><li><div>                        $w = $h = $objattr['bsize'] * 25; // Factor of 25mm (default)&nbsp;</div></li><li><div>                        $objattr['errorlevel'] = 'L';&nbsp;</div></li><li><div>                        if (isset($attr['ERROR'])) {&nbsp;</div></li><li><div>                            $objattr['errorlevel'] = $attr['ERROR'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($objattr['btype'] == 'IMB' || $objattr['btype'] == 'RM4SCC' || $objattr['btype'] == 'KIX' || $objattr['btype'] == 'POSTNET' || $objattr['btype'] == 'PLANET') {&nbsp;</div></li><li><div>                        $arrcode = $this-&gt;mpdf-&gt;barcode-&gt;getBarcodeArray($objattr['code'], $objattr['btype']);&nbsp;</div></li><li><div>                        if ($arrcode === false) {&nbsp;</div></li><li><div>                            throw new MpdfException('Error in barcode string.');&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $w = ($arrcode[&quot;maxw&quot;] * $arrcode['nom-X'] * $objattr['bsize']) + $arrcode['quietL'] + $arrcode['quietR'];&nbsp;</div></li><li><div>                        $h = ($arrcode['nom-H'] * $objattr['bsize']) + (2 * $arrcode['quietTB']);&nbsp;</div></li><li><div>                    } else if (in_array($objattr['btype'], array('C128A', 'C128B', 'C128C', 'EAN128A', 'EAN128B', 'EAN128C', 'C39', 'C39+', 'C39E', 'C39E+', 'S25', 'S25+', 'I25', 'I25+', 'I25B', 'I25B+', 'C93', 'MSI', 'MSI+', 'CODABAR', 'CODE11'))) {&nbsp;</div></li><li><div>                        $arrcode = $this-&gt;mpdf-&gt;barcode-&gt;getBarcodeArray($objattr['code'], $objattr['btype'], $objattr['pr_ratio']);&nbsp;</div></li><li><div>                        if ($arrcode === false) {&nbsp;</div></li><li><div>                            throw new MpdfException('Error in barcode string.');&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $w = ($arrcode[&quot;maxw&quot;] + $arrcode['lightmL'] + $arrcode['lightmR']) * $arrcode['nom-X'] * $objattr['bsize'];&nbsp;</div></li><li><div>                        $h = ((2 * $arrcode['lightTB'] * $arrcode['nom-X']) + $arrcode['nom-H']) * $objattr['bsize'] * $objattr['bheight'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $extraheight = $objattr['padding_top'] + $objattr['padding_bottom'] + $objattr['margin_top'] + $objattr['margin_bottom'] + $objattr['border_top']['w'] + $objattr['border_bottom']['w'];&nbsp;</div></li><li><div>                    $extrawidth = $objattr['padding_left'] + $objattr['padding_right'] + $objattr['margin_left'] + $objattr['margin_right'] + $objattr['border_left']['w'] + $objattr['border_right']['w'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $objattr['type'] = 'barcode';&nbsp;</div></li><li><div>                    $objattr['height'] = $h + $extraheight;&nbsp;</div></li><li><div>                    $objattr['width'] = $w + $extrawidth;&nbsp;</div></li><li><div>                    $objattr['barcode_height'] = $h;&nbsp;</div></li><li><div>                    $objattr['barcode_width'] = $w;&nbsp;</div></li><li><div>                    /** -- CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>                    if (!$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;tableLevel && !$this-&gt;mpdf-&gt;listlvl && !$this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                        if (isset($properties['FLOAT']) && (strtoupper($properties['FLOAT']) == 'RIGHT' || strtoupper($properties['FLOAT']) == 'LEFT')) {&nbsp;</div></li><li><div>                            $objattr['float'] = substr(strtoupper($properties['FLOAT']), 0, 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $e = &quot;\xbb\xa4\xactype=barcode, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Clear properties - tidy up&nbsp;</div></li><li><div>                    $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    /** -- TABLES -- */&nbsp;</div></li><li><div>                    // Output it to buffers&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        /** -- END TABLES -- */&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END BARCODES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** FORM ELEMENTS ********************&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- FORMS -- */&nbsp;</div></li><li><div>            case 'SELECT':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = ''; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFont($properties['FONT-FAMILY'], $this-&gt;mpdf-&gt;FontStyle, 0, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                    $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], $this-&gt;mpdf-&gt;default_font_size / _MPDFK);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFontSize($mmsize * _MPDFK, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SPELLCHECK']) && strtolower($attr['SPELLCHECK']) == 'true') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['SPELLCHECK'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['COLOR'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;specialcontent = &quot;type=select&quot;;&nbsp;</div></li><li><div>                if (isset($attr['DISABLED'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['DISABLED'] = $attr['DISABLED'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['READONLY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['READONLY'] = $attr['READONLY'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['REQUIRED'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['REQUIRED'] = $attr['REQUIRED'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['EDITABLE'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['EDITABLE'] = $attr['EDITABLE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['TITLE'] = $attr['TITLE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['MULTIPLE'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['MULTIPLE'] = $attr['MULTIPLE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SIZE']) && $attr['SIZE'] &gt; 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['SIZE'] = $attr['SIZE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                    if (isset($attr['NAME'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;selectoption['NAME'] = $attr['NAME'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ONCHANGE'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;selectoption['ONCHANGE'] = $attr['ONCHANGE'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'OPTION':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;selectoption['ACTIVE'] = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;selectoption['currentSEL'] = false;&nbsp;</div></li><li><div>                if (empty($this-&gt;mpdf-&gt;selectoption)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['MAXWIDTH'] = '';&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['SELECTED'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SELECTED'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['SELECTED'] = '';&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;selectoption['currentSEL'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['VALUE'])) {&nbsp;</div></li><li><div>                    $attr['VALUE'] = strcode2utf($attr['VALUE']);&nbsp;</div></li><li><div>                    $attr['VALUE'] = $this-&gt;mpdf-&gt;lesser_entity_decode($attr['VALUE']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $attr['VALUE'] = mb_convert_encoding($attr['VALUE'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;selectoption['currentVAL'] = $attr['VALUE'];&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TEXTAREA':&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                if (isset($attr['DISABLED'])) {&nbsp;</div></li><li><div>                    $objattr['disabled'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['READONLY'])) {&nbsp;</div></li><li><div>                    $objattr['readonly'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['REQUIRED'])) {&nbsp;</div></li><li><div>                    $objattr['required'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SPELLCHECK']) && strtolower($attr['SPELLCHECK']) == 'true') {&nbsp;</div></li><li><div>                    $objattr['spellcheck'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                    $objattr['title'] = $attr['TITLE'];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $objattr['title'] = mb_convert_encoding($objattr['title'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                    if (isset($attr['NAME'])) {&nbsp;</div></li><li><div>                        $objattr['fieldname'] = $attr['NAME'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['outer']['v'] = 0;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['inner']['v'] = 0;&nbsp;</div></li><li><div>                    if (isset($attr['ONCALCULATE'])) {&nbsp;</div></li><li><div>                        $objattr['onCalculate'] = $attr['ONCALCULATE'];&nbsp;</div></li><li><div>                    } else if (isset($attr['ONCHANGE'])) {&nbsp;</div></li><li><div>                        $objattr['onCalculate'] = $attr['ONCHANGE'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ONVALIDATE'])) {&nbsp;</div></li><li><div>                        $objattr['onValidate'] = $attr['ONVALIDATE'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ONKEYSTROKE'])) {&nbsp;</div></li><li><div>                        $objattr['onKeystroke'] = $attr['ONKEYSTROKE'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($attr['ONFORMAT'])) {&nbsp;</div></li><li><div>                        $objattr['onFormat'] = $attr['ONFORMAT'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFont($properties['FONT-FAMILY'], '', 0, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                    $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], $this-&gt;mpdf-&gt;default_font_size / _MPDFK);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFontSize($mmsize * _MPDFK, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr['fontfamily'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>                $objattr['fontsize'] = $this-&gt;mpdf-&gt;FontSizePt;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                    if (isset($properties['TEXT-ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['text_align'] = $align[strtolower($properties['TEXT-ALIGN'])];&nbsp;</div></li><li><div>                    } else if (isset($attr['ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['text_align'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['OVERFLOW']) && strtolower($properties['OVERFLOW']) == 'hidden') {&nbsp;</div></li><li><div>                        $objattr['donotscroll'] = true;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP-COLOR'])) {&nbsp;</div></li><li><div>                        $objattr['border-col'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BORDER-TOP-COLOR']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BACKGROUND-COLOR'])) {&nbsp;</div></li><li><div>                        $objattr['background-col'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BACKGROUND-COLOR']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetLineHeight('', $this-&gt;mpdf-&gt;mpdfform-&gt;textarea_lineheight);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $w = 0;&nbsp;</div></li><li><div>                $h = 0;&nbsp;</div></li><li><div>                if (isset($properties['WIDTH']))&nbsp;</div></li><li><div>                    $w = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                if (isset($properties['HEIGHT']))&nbsp;</div></li><li><div>                    $h = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                    $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $colsize = 20; //HTML default value&nbsp;</div></li><li><div>                $rowsize = 2; //HTML default value&nbsp;</div></li><li><div>                if (isset($attr['COLS']))&nbsp;</div></li><li><div>                    $colsize = intval($attr['COLS']);&nbsp;</div></li><li><div>                if (isset($attr['ROWS']))&nbsp;</div></li><li><div>                    $rowsize = intval($attr['ROWS']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $charsize = $this-&gt;mpdf-&gt;GetCharWidth('w', false);&nbsp;</div></li><li><div>                if ($w) {&nbsp;</div></li><li><div>                    $colsize = round(($w - ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['outer']['h'] * 2) - ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['inner']['h'] * 2)) / $charsize);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($h) {&nbsp;</div></li><li><div>                    $rowsize = round(($h - ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['outer']['v'] * 2) - ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['inner']['v'] * 2)) / $this-&gt;mpdf-&gt;lineheight);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['type'] = 'textarea';&nbsp;</div></li><li><div>                $objattr['width'] = ($colsize * $charsize) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['outer']['h'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['inner']['h'] * 2);&nbsp;</div></li><li><div>                $objattr['height'] = ($rowsize * $this-&gt;mpdf-&gt;lineheight) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['outer']['v'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['textarea']['inner']['v'] * 2);&nbsp;</div></li><li><div>                $objattr['rows'] = $rowsize;&nbsp;</div></li><li><div>                $objattr['cols'] = $colsize;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;specialcontent = serialize($objattr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) { // *TABLES*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width']; // *TABLES*&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                // Clear properties - tidy up&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** FORM - INPUT ********************&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'INPUT':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>                if (!isset($attr['TYPE']))&nbsp;</div></li><li><div>                    $attr['TYPE'] == 'TEXT';&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['type'] = 'input';&nbsp;</div></li><li><div>                if (isset($attr['DISABLED'])) {&nbsp;</div></li><li><div>                    $objattr['disabled'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['READONLY'])) {&nbsp;</div></li><li><div>                    $objattr['readonly'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['REQUIRED'])) {&nbsp;</div></li><li><div>                    $objattr['required'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SPELLCHECK']) && strtolower($attr['SPELLCHECK']) == 'true') {&nbsp;</div></li><li><div>                    $objattr['spellcheck'] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                    $objattr['title'] = $attr['TITLE'];&nbsp;</div></li><li><div>                } else if (isset($attr['ALT'])) {&nbsp;</div></li><li><div>                    $objattr['title'] = $attr['ALT'];&nbsp;</div></li><li><div>                } else&nbsp;</div></li><li><div>                    $objattr['title'] = '';&nbsp;</div></li><li><div>                $objattr['title'] = strcode2utf($objattr['title']);&nbsp;</div></li><li><div>                $objattr['title'] = $this-&gt;mpdf-&gt;lesser_entity_decode($objattr['title']);&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                    $objattr['title'] = mb_convert_encoding($objattr['title'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                    if (isset($attr['NAME'])) {&nbsp;</div></li><li><div>                        $objattr['fieldname'] = $attr['NAME'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['VALUE'])) {&nbsp;</div></li><li><div>                    $attr['VALUE'] = strcode2utf($attr['VALUE']);&nbsp;</div></li><li><div>                    $attr['VALUE'] = $this-&gt;mpdf-&gt;lesser_entity_decode($attr['VALUE']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $attr['VALUE'] = mb_convert_encoding($attr['VALUE'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                    $objattr['value'] = $attr['VALUE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                $objattr['vertical-align'] = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFont($properties['FONT-FAMILY'], $this-&gt;mpdf-&gt;FontStyle, 0, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                    $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], ($this-&gt;mpdf-&gt;default_font_size / _MPDFK));&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFontSize($mmsize * _MPDFK, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr['fontfamily'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>                $objattr['fontsize'] = $this-&gt;mpdf-&gt;FontSizePt;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                    if (isset($attr['ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['text_align'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>                    } else if (isset($properties['TEXT-ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['text_align'] = $align[strtolower($properties['TEXT-ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP-COLOR'])) {&nbsp;</div></li><li><div>                        $objattr['border-col'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BORDER-TOP-COLOR']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BACKGROUND-COLOR'])) {&nbsp;</div></li><li><div>                        $objattr['background-col'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BACKGROUND-COLOR']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $type = '';&nbsp;</div></li><li><div>                $texto = '';&nbsp;</div></li><li><div>                $height = $this-&gt;mpdf-&gt;FontSize;&nbsp;</div></li><li><div>                $width = 0;&nbsp;</div></li><li><div>                $spacesize = $this-&gt;mpdf-&gt;GetCharWidth(' ', false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $w = 0;&nbsp;</div></li><li><div>                if (isset($properties['WIDTH']))&nbsp;</div></li><li><div>                    $w = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($properties['VERTICAL-ALIGN']) {&nbsp;</div></li><li><div>                    $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch (strtoupper($attr['TYPE'])) {&nbsp;</div></li><li><div>                    case 'HIDDEN':&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;ignorefollowingspaces = true; //Eliminate exceeding left-side spaces&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;mpdfform-&gt;SetFormText(0, 0, $objattr['fieldname'], $objattr['value'], $objattr['value'], '', 0, '', true);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                        break 2;&nbsp;</div></li><li><div>                    case 'CHECKBOX': //Draw Checkbox&nbsp;</div></li><li><div>                        $type = 'CHECKBOX';&nbsp;</div></li><li><div>                        if (isset($attr['CHECKED'])) {&nbsp;</div></li><li><div>                            $objattr['checked'] = true;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $objattr['checked'] = false;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $width = $this-&gt;mpdf-&gt;FontSize;&nbsp;</div></li><li><div>                        $height = $this-&gt;mpdf-&gt;FontSize;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case 'RADIO': //Draw Radio button&nbsp;</div></li><li><div>                        $type = 'RADIO';&nbsp;</div></li><li><div>                        if (isset($attr['CHECKED']))&nbsp;</div></li><li><div>                            $objattr['checked'] = true;&nbsp;</div></li><li><div>                        $width = $this-&gt;mpdf-&gt;FontSize;&nbsp;</div></li><li><div>                        $height = $this-&gt;mpdf-&gt;FontSize;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    /** -- IMAGES-CORE -- */&nbsp;</div></li><li><div>                    case 'IMAGE': // Draw an Image button&nbsp;</div></li><li><div>                        if (isset($attr['SRC'])) {&nbsp;</div></li><li><div>                            $type = 'IMAGE';&nbsp;</div></li><li><div>                            $srcpath = $attr['SRC'];&nbsp;</div></li><li><div>                            $orig_srcpath = $attr['ORIG_SRC'];&nbsp;</div></li><li><div>                            // VSPACE and HSPACE converted to margins in MergeCSS&nbsp;</div></li><li><div>                            if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                                $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                                $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                                $objattr['margin_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                                $objattr['margin_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                                $objattr['border_top'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                                $objattr['border_bottom'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                                $objattr['border_left'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                                $objattr['border_right'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $objattr['padding_top'] = 0;&nbsp;</div></li><li><div>                            $objattr['padding_bottom'] = 0;&nbsp;</div></li><li><div>                            $objattr['padding_left'] = 0;&nbsp;</div></li><li><div>                            $objattr['padding_right'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                                $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $w = 0;&nbsp;</div></li><li><div>                            $h = 0;&nbsp;</div></li><li><div>                            if (isset($properties['WIDTH']))&nbsp;</div></li><li><div>                                $w = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                            if (isset($properties['HEIGHT']))&nbsp;</div></li><li><div>                                $h = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $extraheight = $objattr['margin_top'] + $objattr['margin_bottom'] + $objattr['border_top']['w'] + $objattr['border_bottom']['w'];&nbsp;</div></li><li><div>                            $extrawidth = $objattr['margin_left'] + $objattr['margin_right'] + $objattr['border_left']['w'] + $objattr['border_right']['w'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // Image file&nbsp;</div></li><li><div>                            $info = $this-&gt;mpdf-&gt;_getImage($srcpath, true, true, $orig_srcpath);&nbsp;</div></li><li><div>                            if (!$info) {&nbsp;</div></li><li><div>                                $info = $this-&gt;mpdf-&gt;_getImage($this-&gt;mpdf-&gt;noImageFile);&nbsp;</div></li><li><div>                                if ($info) {&nbsp;</div></li><li><div>                                    $srcpath = $this-&gt;mpdf-&gt;noImageFile;&nbsp;</div></li><li><div>                                    $w = ($info['w'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                                    $h = ($info['h'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (!$info)&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            if ($info['cs'] == 'Indexed') {&nbsp;</div></li><li><div>                                $objattr['Indexed'] = true;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $objattr['file'] = $srcpath;&nbsp;</div></li><li><div>                            //Default width and height calculation if needed&nbsp;</div></li><li><div>                            if ($w == 0 and $h == 0) {&nbsp;</div></li><li><div>                                /** -- IMAGES-WMF -- */&nbsp;</div></li><li><div>                                if ($info['type'] == 'wmf') {&nbsp;</div></li><li><div>                                    // WMF units are twips (1/20pt)&nbsp;</div></li><li><div>                                    // divide by 20 to get points&nbsp;</div></li><li><div>                                    // divide by k to get user units&nbsp;</div></li><li><div>                                    $w = abs($info['w']) / (20 * _MPDFK);&nbsp;</div></li><li><div>                                    $h = abs($info['h']) / (20 * _MPDFK);&nbsp;</div></li><li><div>                                } else&nbsp;</div></li><li><div>                                    /** -- END IMAGES-WMF -- */&nbsp;</div></li><li><div>                                    if ($info['type'] == 'svg') {&nbsp;</div></li><li><div>                                        // SVG units are pixels&nbsp;</div></li><li><div>                                        $w = abs($info['w']) / _MPDFK;&nbsp;</div></li><li><div>                                        $h = abs($info['h']) / _MPDFK;&nbsp;</div></li><li><div>                                    } else {&nbsp;</div></li><li><div>                                        //Put image at default image dpi&nbsp;</div></li><li><div>                                        $w = ($info['w'] / _MPDFK) * (72 / $this-&gt;mpdf-&gt;img_dpi);&nbsp;</div></li><li><div>                                        $h = ($info['h'] / _MPDFK) * (72 / $this-&gt;mpdf-&gt;img_dpi);&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                if (isset($properties['IMAGE-RESOLUTION'])) {&nbsp;</div></li><li><div>                                    if (preg_match('/from-image/i', $properties['IMAGE-RESOLUTION']) && isset($info['set-dpi']) && $info['set-dpi'] &gt; 0) {&nbsp;</div></li><li><div>                                        $w *= $this-&gt;mpdf-&gt;img_dpi / $info['set-dpi'];&nbsp;</div></li><li><div>                                        $h *= $this-&gt;mpdf-&gt;img_dpi / $info['set-dpi'];&nbsp;</div></li><li><div>                                    } else if (preg_match('/(\d+)dpi/i', $properties['IMAGE-RESOLUTION'], $m)) {&nbsp;</div></li><li><div>                                        $dpi = $m[1];&nbsp;</div></li><li><div>                                        if ($dpi &gt; 0) {&nbsp;</div></li><li><div>                                            $w *= $this-&gt;mpdf-&gt;img_dpi / $dpi;&nbsp;</div></li><li><div>                                            $h *= $this-&gt;mpdf-&gt;img_dpi / $dpi;&nbsp;</div></li><li><div>                                        }&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            // IF WIDTH OR HEIGHT SPECIFIED&nbsp;</div></li><li><div>                            if ($w == 0)&nbsp;</div></li><li><div>                                $w = $h * $info['w'] / $info['h'];&nbsp;</div></li><li><div>                            if ($h == 0)&nbsp;</div></li><li><div>                                $h = $w * $info['h'] / $info['w'];&nbsp;</div></li><li><div>                            // Resize to maximum dimensions of page&nbsp;</div></li><li><div>                            $maxWidth = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];&nbsp;</div></li><li><div>                            $maxHeight = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;tMargin + $this-&gt;mpdf-&gt;bMargin + 10);&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;fullImageHeight) {&nbsp;</div></li><li><div>                                $maxHeight = $this-&gt;mpdf-&gt;fullImageHeight;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (($w + $extrawidth) &gt; ($maxWidth + 0.0001)) { // mPDF 5.7.4  0.0001 to allow for rounding errors when w==maxWidth&nbsp;</div></li><li><div>                                $w = $maxWidth - $extrawidth;&nbsp;</div></li><li><div>                                $h = $w * $info['h'] / $info['w'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if ($h + $extraheight &gt; $maxHeight) {&nbsp;</div></li><li><div>                                $h = $maxHeight - $extraheight;&nbsp;</div></li><li><div>                                $w = $h * $info['w'] / $info['h'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $height = $h + $extraheight;&nbsp;</div></li><li><div>                            $width = $w + $extrawidth;&nbsp;</div></li><li><div>                            $objattr['type'] = 'image';&nbsp;</div></li><li><div>                            $objattr['itype'] = $info['type'];&nbsp;</div></li><li><div>                            $objattr['orig_h'] = $info['h'];&nbsp;</div></li><li><div>                            $objattr['orig_w'] = $info['w'];&nbsp;</div></li><li><div>                            /** -- IMAGES-WMF -- */&nbsp;</div></li><li><div>                            if ($info['type'] == 'wmf') {&nbsp;</div></li><li><div>                                $objattr['wmf_x'] = $info['x'];&nbsp;</div></li><li><div>                                $objattr['wmf_y'] = $info['y'];&nbsp;</div></li><li><div>                            } else&nbsp;</div></li><li><div>                                /** -- END IMAGES-WMF -- */&nbsp;</div></li><li><div>                                if ($info['type'] == 'svg') {&nbsp;</div></li><li><div>                                    $objattr['wmf_x'] = $info['x'];&nbsp;</div></li><li><div>                                    $objattr['wmf_y'] = $info['y'];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            $objattr['height'] = $h + $extraheight;&nbsp;</div></li><li><div>                            $objattr['width'] = $w + $extrawidth;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $objattr['image_height'] = $h;&nbsp;</div></li><li><div>                            $objattr['image_width'] = $w;&nbsp;</div></li><li><div>                            $objattr['ID'] = $info['i'];&nbsp;</div></li><li><div>                            $texto = 'X';&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                                if (isset($attr['ONCLICK'])) {&nbsp;</div></li><li><div>                                    $objattr['onClick'] = $attr['ONCLICK'];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                $objattr['type'] = 'input';&nbsp;</div></li><li><div>                                $type = 'IMAGE';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    /** -- END IMAGES-CORE -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case 'BUTTON': // Draw a button&nbsp;</div></li><li><div>                    case 'SUBMIT':&nbsp;</div></li><li><div>                    case 'RESET':&nbsp;</div></li><li><div>                        $type = strtoupper($attr['TYPE']);&nbsp;</div></li><li><div>                        if ($type == 'IMAGE') {&nbsp;</div></li><li><div>                            $type = 'BUTTON';&nbsp;</div></li><li><div>                        } // src path not found&nbsp;</div></li><li><div>                        if (isset($attr['NOPRINT'])) {&nbsp;</div></li><li><div>                            $objattr['noprint'] = true;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (!isset($attr['VALUE'])) {&nbsp;</div></li><li><div>                            $objattr['value'] = ucfirst(strtolower($type));&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $texto = &quot; &quot; . $objattr['value'] . &quot; &quot;;&nbsp;</div></li><li><div>                        $width = $this-&gt;mpdf-&gt;GetStringWidth($texto) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['button']['outer']['h'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['button']['inner']['h'] * 2);&nbsp;</div></li><li><div>                        $height = $this-&gt;mpdf-&gt;FontSize + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['button']['outer']['v'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['button']['inner']['v'] * 2);&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                            if (isset($attr['ONCLICK'])) {&nbsp;</div></li><li><div>                                $objattr['onClick'] = $attr['ONCLICK'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case 'PASSWORD':&nbsp;</div></li><li><div>                    case 'TEXT':&nbsp;</div></li><li><div>                    default:&nbsp;</div></li><li><div>                        if ($type == '') {&nbsp;</div></li><li><div>                            $type = 'TEXT';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (strtoupper($attr['TYPE']) == 'PASSWORD') {&nbsp;</div></li><li><div>                            $type = 'PASSWORD';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($attr['VALUE'])) {&nbsp;</div></li><li><div>                            if ($type == 'PASSWORD') {&nbsp;</div></li><li><div>                                $num_stars = mb_strlen($attr['VALUE'], $this-&gt;mpdf-&gt;mb_enc);&nbsp;</div></li><li><div>                                $texto = str_repeat('*', $num_stars);&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                $texto = $attr['VALUE'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $xw = ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['input']['outer']['h'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['input']['inner']['h'] * 2);&nbsp;</div></li><li><div>                        $xh = ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['input']['outer']['v'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['input']['inner']['v'] * 2);&nbsp;</div></li><li><div>                        if ($w) {&nbsp;</div></li><li><div>                            $width = $w + $xw;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $width = (20 * $spacesize) + $xw;&nbsp;</div></li><li><div>                        } // Default width in chars&nbsp;</div></li><li><div>                        if (isset($attr['SIZE']) and ctype_digit($attr['SIZE']))&nbsp;</div></li><li><div>                            $width = ($attr['SIZE'] * $spacesize) + $xw;&nbsp;</div></li><li><div>                        $height = $this-&gt;mpdf-&gt;FontSize + $xh;&nbsp;</div></li><li><div>                        if (isset($attr['MAXLENGTH']) and ctype_digit($attr['MAXLENGTH']))&nbsp;</div></li><li><div>                            $objattr['maxlength'] = $attr['MAXLENGTH'];&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                            if (isset($attr['ONCALCULATE'])) {&nbsp;</div></li><li><div>                                $objattr['onCalculate'] = $attr['ONCALCULATE'];&nbsp;</div></li><li><div>                            } else if (isset($attr['ONCHANGE'])) {&nbsp;</div></li><li><div>                                $objattr['onCalculate'] = $attr['ONCHANGE'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($attr['ONVALIDATE'])) {&nbsp;</div></li><li><div>                                $objattr['onValidate'] = $attr['ONVALIDATE'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($attr['ONKEYSTROKE'])) {&nbsp;</div></li><li><div>                                $objattr['onKeystroke'] = $attr['ONKEYSTROKE'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($attr['ONFORMAT'])) {&nbsp;</div></li><li><div>                                $objattr['onFormat'] = $attr['ONFORMAT'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['subtype'] = $type;&nbsp;</div></li><li><div>                $objattr['text'] = $texto;&nbsp;</div></li><li><div>                $objattr['width'] = $width;&nbsp;</div></li><li><div>                $objattr['height'] = $height;&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=input, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Clear properties - tidy up&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                // Output it to buffers&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break; // END of INPUT&nbsp;</div></li><li><div>            /** -- END FORMS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** GRAPH  ********************&nbsp;</div></li><li><div>            case 'JPGRAPH':&nbsp;</div></li><li><div>                if (!$this-&gt;mpdf-&gt;useGraphs) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($attr['TABLE']) {&nbsp;</div></li><li><div>                    $gid = strtoupper($attr['TABLE']);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $gid = '0';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!is_array($this-&gt;mpdf-&gt;graphs[$gid]) || count($this-&gt;mpdf-&gt;graphs[$gid]) == 0) {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>                include_once(_MPDF_PATH . 'graph.php');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;graphs[$gid]['attr'] = $attr;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;graphs[$gid]['attr']['WIDTH']) && $this-&gt;mpdf-&gt;graphs[$gid]['attr']['WIDTH']) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;graphs[$gid]['attr']['cWIDTH'] = $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;graphs[$gid]['attr']['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                } // mm&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;graphs[$gid]['attr']['HEIGHT']) && $this-&gt;mpdf-&gt;graphs[$gid]['attr']['HEIGHT']) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;graphs[$gid]['attr']['cHEIGHT'] = $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;graphs[$gid]['attr']['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $graph_img = print_graph($this-&gt;mpdf-&gt;graphs[$gid], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                if ($graph_img) {&nbsp;</div></li><li><div>                    if (isset($attr['ROTATE'])) {&nbsp;</div></li><li><div>                        if ($attr['ROTATE'] == 90 || $attr['ROTATE'] == -90) {&nbsp;</div></li><li><div>                            $tmpw = $graph_img['w'];&nbsp;</div></li><li><div>                            $graph_img['w'] = $graph_img['h'];&nbsp;</div></li><li><div>                            $graph_img['h'] = $tmpw;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $attr['SRC'] = $graph_img['file'];&nbsp;</div></li><li><div>                    $attr['WIDTH'] = $graph_img['w'];&nbsp;</div></li><li><div>                    $attr['HEIGHT'] = $graph_img['h'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** IMAGE  ********************&nbsp;</div></li><li><div>            /** -- IMAGES-CORE -- */&nbsp;</div></li><li><div>            case 'IMG':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_top'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_left'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                if (isset($attr['SRC'])) {&nbsp;</div></li><li><div>                    $srcpath = $attr['SRC'];&nbsp;</div></li><li><div>                    $orig_srcpath = (isset($attr['ORIG_SRC']) ? $attr['ORIG_SRC'] : '');&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('', $tag, $attr);&nbsp;</div></li><li><div>                    if (isset($properties ['DISPLAY']) && strtolower($properties ['DISPLAY']) == 'none') {&nbsp;</div></li><li><div>                        return;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['Z-INDEX']) && $this-&gt;mpdf-&gt;current_layer == 0) {&nbsp;</div></li><li><div>                        $v = intval($properties['Z-INDEX']);&nbsp;</div></li><li><div>                        if ($v &gt; 0) {&nbsp;</div></li><li><div>                            $objattr['z-index'] = $v;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $objattr['visibility'] = 'visible';&nbsp;</div></li><li><div>                    if (isset($properties['VISIBILITY'])) {&nbsp;</div></li><li><div>                        $v = strtolower($properties['VISIBILITY']);&nbsp;</div></li><li><div>                        if (($v == 'hidden' || $v == 'printonly' || $v == 'screenonly') && $this-&gt;mpdf-&gt;visibility == 'visible') {&nbsp;</div></li><li><div>                            $objattr['visibility'] = $v;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // VSPACE and HSPACE converted to margins in MergeCSS&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['margin_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['margin_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['padding_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['padding_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['padding_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['padding_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                        $objattr['border_top'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                        $objattr['border_bottom'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                        $objattr['border_left'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                        $objattr['border_right'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                        $objattr['vertical-align'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $w = 0;&nbsp;</div></li><li><div>                    $h = 0;&nbsp;</div></li><li><div>                    if (isset($properties['WIDTH']))&nbsp;</div></li><li><div>                        $w = $this-&gt;mpdf-&gt;ConvertSize($properties['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['WIDTH']))&nbsp;</div></li><li><div>                        $w = $this-&gt;mpdf-&gt;ConvertSize($attr['WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    if (isset($properties['HEIGHT']))&nbsp;</div></li><li><div>                        $h = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['HEIGHT']))&nbsp;</div></li><li><div>                        $h = $this-&gt;mpdf-&gt;ConvertSize($attr['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    $maxw = $maxh = $minw = $minh = false;&nbsp;</div></li><li><div>                    if (isset($properties['MAX-WIDTH']))&nbsp;</div></li><li><div>                        $maxw = $this-&gt;mpdf-&gt;ConvertSize($properties['MAX-WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['MAX-WIDTH']))&nbsp;</div></li><li><div>                        $maxw = $this-&gt;mpdf-&gt;ConvertSize($attr['MAX-WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    if (isset($properties['MAX-HEIGHT']))&nbsp;</div></li><li><div>                        $maxh = $this-&gt;mpdf-&gt;ConvertSize($properties['MAX-HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['MAX-HEIGHT']))&nbsp;</div></li><li><div>                        $maxh = $this-&gt;mpdf-&gt;ConvertSize($attr['MAX-HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    if (isset($properties['MIN-WIDTH']))&nbsp;</div></li><li><div>                        $minw = $this-&gt;mpdf-&gt;ConvertSize($properties['MIN-WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['MIN-WIDTH']))&nbsp;</div></li><li><div>                        $minw = $this-&gt;mpdf-&gt;ConvertSize($attr['MIN-WIDTH'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    if (isset($properties['MIN-HEIGHT']))&nbsp;</div></li><li><div>                        $minh = $this-&gt;mpdf-&gt;ConvertSize($properties['MIN-HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    else if (isset($attr['MIN-HEIGHT']))&nbsp;</div></li><li><div>                        $minh = $this-&gt;mpdf-&gt;ConvertSize($attr['MIN-HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($properties['OPACITY']) && $properties['OPACITY'] &gt; 0 && $properties['OPACITY'] &lt;= 1) {&nbsp;</div></li><li><div>                        $objattr['opacity'] = $properties['OPACITY'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;HREF) {&nbsp;</div></li><li><div>                        if (strpos($this-&gt;mpdf-&gt;HREF, &quot;.&quot;) === false && strpos($this-&gt;mpdf-&gt;HREF, &quot;@&quot;) !== 0) {&nbsp;</div></li><li><div>                            $href = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                            while (array_key_exists($href, $this-&gt;mpdf-&gt;internallink))&nbsp;</div></li><li><div>                                $href = &quot;#&quot; . $href;&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;internallink[$href] = $this-&gt;mpdf-&gt;AddLink();&nbsp;</div></li><li><div>                            $objattr['link'] = $this-&gt;mpdf-&gt;internallink[$href];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $objattr['link'] = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $extraheight = $objattr['padding_top'] + $objattr['padding_bottom'] + $objattr['margin_top'] + $objattr['margin_bottom'] + $objattr['border_top']['w'] + $objattr['border_bottom']['w'];&nbsp;</div></li><li><div>                    $extrawidth = $objattr['padding_left'] + $objattr['padding_right'] + $objattr['margin_left'] + $objattr['margin_right'] + $objattr['border_left']['w'] + $objattr['border_right']['w'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // mPDF 5.7.3 TRANSFORMS&nbsp;</div></li><li><div>                    if (isset($properties['BACKGROUND-COLOR']) && $properties['BACKGROUND-COLOR'] != '') {&nbsp;</div></li><li><div>                        $objattr['bgcolor'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BACKGROUND-COLOR']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                    if (isset($properties['GRADIENT-MASK']) && preg_match('/(-moz-)*(repeating-)*(linear|radial)-gradient/', $properties['GRADIENT-MASK'])) {&nbsp;</div></li><li><div>                        $objattr['GRADIENT-MASK'] = $properties['GRADIENT-MASK'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // mPDF 6&nbsp;</div></li><li><div>                    $interpolation = false;&nbsp;</div></li><li><div>                    if (isset($properties['IMAGE-RENDERING']) && $properties['IMAGE-RENDERING']) {&nbsp;</div></li><li><div>                        if (strtolower($properties['IMAGE-RENDERING']) == 'crisp-edges') {&nbsp;</div></li><li><div>                            $interpolation = false;&nbsp;</div></li><li><div>                        } else if (strtolower($properties['IMAGE-RENDERING']) == 'optimizequality') {&nbsp;</div></li><li><div>                            $interpolation = true;&nbsp;</div></li><li><div>                        } else if (strtolower($properties['IMAGE-RENDERING']) == 'smooth') {&nbsp;</div></li><li><div>                            $interpolation = true;&nbsp;</div></li><li><div>                        } else if (strtolower($properties['IMAGE-RENDERING']) == 'auto') {&nbsp;</div></li><li><div>                            $interpolation = $this-&gt;mpdf-&gt;interpolateImages;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $interpolation = false;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $info['interpolation'] = $interpolation;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Image file&nbsp;</div></li><li><div>                    $info = $this-&gt;mpdf-&gt;_getImage($srcpath, true, true, $orig_srcpath, $interpolation); // mPDF 6&nbsp;</div></li><li><div>                    if (!$info) {&nbsp;</div></li><li><div>                        $info = $this-&gt;mpdf-&gt;_getImage($this-&gt;mpdf-&gt;noImageFile);&nbsp;</div></li><li><div>                        if ($info) {&nbsp;</div></li><li><div>                            $srcpath = $this-&gt;mpdf-&gt;noImageFile;&nbsp;</div></li><li><div>                            $w = ($info['w'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                            $h = ($info['h'] * (25.4 / $this-&gt;mpdf-&gt;dpi));&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (!$info)&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($attr['ROTATE'])) {&nbsp;</div></li><li><div>                        $image_orientation = $attr['ROTATE'];&nbsp;</div></li><li><div>                    } else if (isset($properties['IMAGE-ORIENTATION'])) {&nbsp;</div></li><li><div>                        $image_orientation = $properties['IMAGE-ORIENTATION'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $image_orientation = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($image_orientation) {&nbsp;</div></li><li><div>                        if ($image_orientation == 90 || $image_orientation == -90 || $image_orientation == 270) {&nbsp;</div></li><li><div>                            $tmpw = $info['w'];&nbsp;</div></li><li><div>                            $info['w'] = $info['h'];&nbsp;</div></li><li><div>                            $info['h'] = $tmpw;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $objattr['ROTATE'] = $image_orientation;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $objattr['file'] = $srcpath;&nbsp;</div></li><li><div>                    //Default width and height calculation if needed&nbsp;</div></li><li><div>                    if ($w == 0 and $h == 0) {&nbsp;</div></li><li><div>                        /** -- IMAGES-WMF -- */&nbsp;</div></li><li><div>                        if ($info['type'] == 'wmf') {&nbsp;</div></li><li><div>                            // WMF units are twips (1/20pt)&nbsp;</div></li><li><div>                            // divide by 20 to get points&nbsp;</div></li><li><div>                            // divide by k to get user units&nbsp;</div></li><li><div>                            $w = abs($info['w']) / (20 * _MPDFK);&nbsp;</div></li><li><div>                            $h = abs($info['h']) / (20 * _MPDFK);&nbsp;</div></li><li><div>                        } else&nbsp;</div></li><li><div>                            /** -- END IMAGES-WMF -- */&nbsp;</div></li><li><div>                            if ($info['type'] == 'svg') {&nbsp;</div></li><li><div>                                // SVG units are pixels&nbsp;</div></li><li><div>                                $w = abs($info['w']) / _MPDFK;&nbsp;</div></li><li><div>                                $h = abs($info['h']) / _MPDFK;&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                //Put image at default image dpi&nbsp;</div></li><li><div>                                $w = ($info['w'] / _MPDFK) * (72 / $this-&gt;mpdf-&gt;img_dpi);&nbsp;</div></li><li><div>                                $h = ($info['h'] / _MPDFK) * (72 / $this-&gt;mpdf-&gt;img_dpi);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        if (isset($properties['IMAGE-RESOLUTION'])) {&nbsp;</div></li><li><div>                            if (preg_match('/from-image/i', $properties['IMAGE-RESOLUTION']) && isset($info['set-dpi']) && $info['set-dpi'] &gt; 0) {&nbsp;</div></li><li><div>                                $w *= $this-&gt;mpdf-&gt;img_dpi / $info['set-dpi'];&nbsp;</div></li><li><div>                                $h *= $this-&gt;mpdf-&gt;img_dpi / $info['set-dpi'];&nbsp;</div></li><li><div>                            } else if (preg_match('/(\d+)dpi/i', $properties['IMAGE-RESOLUTION'], $m)) {&nbsp;</div></li><li><div>                                $dpi = $m[1];&nbsp;</div></li><li><div>                                if ($dpi &gt; 0) {&nbsp;</div></li><li><div>                                    $w *= $this-&gt;mpdf-&gt;img_dpi / $dpi;&nbsp;</div></li><li><div>                                    $h *= $this-&gt;mpdf-&gt;img_dpi / $dpi;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    // IF WIDTH OR HEIGHT SPECIFIED&nbsp;</div></li><li><div>                    if ($w == 0)&nbsp;</div></li><li><div>                        $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                    if ($h == 0)&nbsp;</div></li><li><div>                        $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($minw && $w &lt; $minw) {&nbsp;</div></li><li><div>                        $w = $minw;&nbsp;</div></li><li><div>                        $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($maxw && $w &gt; $maxw) {&nbsp;</div></li><li><div>                        $w = $maxw;&nbsp;</div></li><li><div>                        $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($minh && $h &lt; $minh) {&nbsp;</div></li><li><div>                        $h = $minh;&nbsp;</div></li><li><div>                        $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($maxh && $h &gt; $maxh) {&nbsp;</div></li><li><div>                        $h = $maxh;&nbsp;</div></li><li><div>                        $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Resize to maximum dimensions of page&nbsp;</div></li><li><div>                    $maxWidth = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];&nbsp;</div></li><li><div>                    $maxHeight = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;tMargin + $this-&gt;mpdf-&gt;bMargin + 1);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;fullImageHeight) {&nbsp;</div></li><li><div>                        $maxHeight = $this-&gt;mpdf-&gt;fullImageHeight;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (($w + $extrawidth) &gt; ($maxWidth + 0.0001)) { // mPDF 5.7.4  0.0001 to allow for rounding errors when w==maxWidth&nbsp;</div></li><li><div>                        $w = $maxWidth - $extrawidth;&nbsp;</div></li><li><div>                        $h = abs($w * $info['h'] / $info['w']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($h + $extraheight &gt; $maxHeight) {&nbsp;</div></li><li><div>                        $h = $maxHeight - $extraheight;&nbsp;</div></li><li><div>                        $w = abs($h * $info['w'] / $info['h']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $objattr['type'] = 'image';&nbsp;</div></li><li><div>                    $objattr['itype'] = $info['type'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $objattr['orig_h'] = $info['h'];&nbsp;</div></li><li><div>                    $objattr['orig_w'] = $info['w'];&nbsp;</div></li><li><div>                    /** -- IMAGES-WMF -- */&nbsp;</div></li><li><div>                    if ($info['type'] == 'wmf') {&nbsp;</div></li><li><div>                        $objattr['wmf_x'] = $info['x'];&nbsp;</div></li><li><div>                        $objattr['wmf_y'] = $info['y'];&nbsp;</div></li><li><div>                    } else&nbsp;</div></li><li><div>                        /** -- END IMAGES-WMF -- */&nbsp;</div></li><li><div>                        if ($info['type'] == 'svg') {&nbsp;</div></li><li><div>                            $objattr['wmf_x'] = $info['x'];&nbsp;</div></li><li><div>                            $objattr['wmf_y'] = $info['y'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    $objattr['height'] = $h + $extraheight;&nbsp;</div></li><li><div>                    $objattr['width'] = $w + $extrawidth;&nbsp;</div></li><li><div>                    $objattr['image_height'] = $h;&nbsp;</div></li><li><div>                    $objattr['image_width'] = $w;&nbsp;</div></li><li><div>                    /** -- CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>                    if (!$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;tableLevel && !$this-&gt;mpdf-&gt;listlvl && !$this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                        if (isset($properties['FLOAT']) && (strtoupper($properties['FLOAT']) == 'RIGHT' || strtoupper($properties['FLOAT']) == 'LEFT')) {&nbsp;</div></li><li><div>                            $objattr['float'] = substr(strtoupper($properties['FLOAT']), 0, 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>                    // mPDF 5.7.3 TRANSFORMS&nbsp;</div></li><li><div>                    if (isset($properties['TRANSFORM']) && !$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                        $objattr['transform'] = $properties['TRANSFORM'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $e = &quot;\xbb\xa4\xactype=image, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Clear properties - tidy up&nbsp;</div></li><li><div>                    $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    /** -- TABLES -- */&nbsp;</div></li><li><div>                    // Output it to buffers&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        /** -- END TABLES -- */&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                    } // *TABLES*&nbsp;</div></li><li><div>                    /** -- ANNOTATIONS -- */&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;title2annots && isset($attr['TITLE'])) {&nbsp;</div></li><li><div>                        $objattr = array();&nbsp;</div></li><li><div>                        $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                        $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                        $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                        $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                        $objattr['width'] = 0;&nbsp;</div></li><li><div>                        $objattr['height'] = 0;&nbsp;</div></li><li><div>                        $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                        $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                        $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                        $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                        $objattr['CONTENT'] = $attr['TITLE'];&nbsp;</div></li><li><div>                        $objattr['type'] = 'annot';&nbsp;</div></li><li><div>                        $objattr['POS-X'] = 0;&nbsp;</div></li><li><div>                        $objattr['POS-Y'] = 0;&nbsp;</div></li><li><div>                        $objattr['ICON'] = 'Comment';&nbsp;</div></li><li><div>                        $objattr['AUTHOR'] = '';&nbsp;</div></li><li><div>                        $objattr['SUBJECT'] = '';&nbsp;</div></li><li><div>                        $objattr['OPACITY'] = $this-&gt;mpdf-&gt;annotOpacity;&nbsp;</div></li><li><div>                        $objattr['COLOR'] = $this-&gt;mpdf-&gt;ConvertColor('yellow');&nbsp;</div></li><li><div>                        $e = &quot;\xbb\xa4\xactype=annot, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;tableLevel) { // *TABLES*&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($e); // *TABLES*&nbsp;</div></li><li><div>                        } // *TABLES*&nbsp;</div></li><li><div>                        else { // *TABLES*&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;textbuffer[] = array($e);&nbsp;</div></li><li><div>                        } // *TABLES*&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END ANNOTATIONS -- */&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END IMAGES-CORE -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // *********** CIRCULAR TEXT = TEXTCIRCLE  ********************&nbsp;</div></li><li><div>            case 'TEXTCIRCLE':&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['margin_top'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_left'] = 0;&nbsp;</div></li><li><div>                $objattr['margin_right'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_top'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_bottom'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_left'] = 0;&nbsp;</div></li><li><div>                $objattr['padding_right'] = 0;&nbsp;</div></li><li><div>                $objattr['width'] = 0;&nbsp;</div></li><li><div>                $objattr['height'] = 0;&nbsp;</div></li><li><div>                $objattr['border_top']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_bottom']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_left']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['border_right']['w'] = 0;&nbsp;</div></li><li><div>                $objattr['top-text'] = '';&nbsp;</div></li><li><div>                $objattr['bottom-text'] = '';&nbsp;</div></li><li><div>                $objattr['r'] = 20; // radius (default value here for safety)&nbsp;</div></li><li><div>                $objattr['space-width'] = 120;&nbsp;</div></li><li><div>                $objattr['char-width'] = 100;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties[$tag] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('INLINE', $tag, $attr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties ['DISPLAY']) && strtolower($properties ['DISPLAY']) == 'none') {&nbsp;</div></li><li><div>                    return;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['R'])) {&nbsp;</div></li><li><div>                    $objattr['r'] = $this-&gt;mpdf-&gt;ConvertSize($attr['R'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TOP-TEXT'])) {&nbsp;</div></li><li><div>                    $objattr['top-text'] = strcode2utf($attr['TOP-TEXT']);&nbsp;</div></li><li><div>                    $objattr['top-text'] = $this-&gt;mpdf-&gt;lesser_entity_decode($objattr['top-text']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $objattr['top-text'] = mb_convert_encoding($objattr['top-text'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['BOTTOM-TEXT'])) {&nbsp;</div></li><li><div>                    $objattr['bottom-text'] = strcode2utf($attr['BOTTOM-TEXT']);&nbsp;</div></li><li><div>                    $objattr['bottom-text'] = $this-&gt;mpdf-&gt;lesser_entity_decode($objattr['bottom-text']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $objattr['bottom-text'] = mb_convert_encoding($objattr['bottom-text'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['SPACE-WIDTH']) && $attr['SPACE-WIDTH']) {&nbsp;</div></li><li><div>                    $objattr['space-width'] = $attr['SPACE-WIDTH'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['CHAR-WIDTH']) && $attr['CHAR-WIDTH']) {&nbsp;</div></li><li><div>                    $objattr['char-width'] = $attr['CHAR-WIDTH'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // VISIBILITY&nbsp;</div></li><li><div>                $objattr['visibility'] = 'visible';&nbsp;</div></li><li><div>                if (isset($properties['VISIBILITY'])) {&nbsp;</div></li><li><div>                    $v = strtolower($properties['VISIBILITY']);&nbsp;</div></li><li><div>                    if (($v == 'hidden' || $v == 'printonly' || $v == 'screenonly') && $this-&gt;mpdf-&gt;visibility == 'visible') {&nbsp;</div></li><li><div>                        $objattr['visibility'] = $v;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                    if (strtolower($properties['FONT-SIZE']) == 'auto') {&nbsp;</div></li><li><div>                        if ($objattr['top-text'] && $objattr['bottom-text']) {&nbsp;</div></li><li><div>                            $objattr['fontsize'] = -2;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $objattr['fontsize'] = -1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], ($this-&gt;mpdf-&gt;default_font_size / _MPDFK));&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetFontSize($mmsize * _MPDFK, false);&nbsp;</div></li><li><div>                        $objattr['fontsize'] = $this-&gt;mpdf-&gt;FontSizePt;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['DIVIDER'])) {&nbsp;</div></li><li><div>                    $objattr['divider'] = strcode2utf($attr['DIVIDER']);&nbsp;</div></li><li><div>                    $objattr['divider'] = $this-&gt;mpdf-&gt;lesser_entity_decode($objattr['divider']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;onlyCoreFonts)&nbsp;</div></li><li><div>                        $objattr['divider'] = mb_convert_encoding($objattr['divider'], $this-&gt;mpdf-&gt;mb_enc, 'UTF-8');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $objattr['color'] = $this-&gt;mpdf-&gt;ConvertColor($properties['COLOR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $objattr['fontstyle'] = '';&nbsp;</div></li><li><div>                if (isset($properties['FONT-WEIGHT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-WEIGHT']) == 'BOLD') {&nbsp;</div></li><li><div>                        $objattr['fontstyle'] .= 'B';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-STYLE'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-STYLE']) == 'ITALIC') {&nbsp;</div></li><li><div>                        $objattr['fontstyle'] .= 'I';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFont($properties['FONT-FAMILY'], $this-&gt;mpdf-&gt;FontStyle, 0, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $objattr['fontfamily'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // VSPACE and HSPACE converted to margins in MergeCSS&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['margin_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['margin_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['margin_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['margin_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['padding_top'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['padding_bottom'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['padding_left'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['padding_right'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                    $objattr['border_top'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                    $objattr['border_bottom'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                    $objattr['border_left'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                    $objattr['border_right'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['OPACITY']) && $properties['OPACITY'] &gt; 0 && $properties['OPACITY'] &lt;= 1) {&nbsp;</div></li><li><div>                    $objattr['opacity'] = $properties['OPACITY'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-COLOR']) && $properties['BACKGROUND-COLOR'] != '') {&nbsp;</div></li><li><div>                    $objattr['bgcolor'] = $this-&gt;mpdf-&gt;ConvertColor($properties['BACKGROUND-COLOR']);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $objattr['bgcolor'] = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;HREF) {&nbsp;</div></li><li><div>                    if (strpos($this-&gt;mpdf-&gt;HREF, &quot;.&quot;) === false && strpos($this-&gt;mpdf-&gt;HREF, &quot;@&quot;) !== 0) {&nbsp;</div></li><li><div>                        $href = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                        while (array_key_exists($href, $this-&gt;mpdf-&gt;internallink))&nbsp;</div></li><li><div>                            $href = &quot;#&quot; . $href;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;internallink[$href] = $this-&gt;mpdf-&gt;AddLink();&nbsp;</div></li><li><div>                        $objattr['link'] = $this-&gt;mpdf-&gt;internallink[$href];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $objattr['link'] = $this-&gt;mpdf-&gt;HREF;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $extraheight = $objattr['padding_top'] + $objattr['padding_bottom'] + $objattr['margin_top'] + $objattr['margin_bottom'] + $objattr['border_top']['w'] + $objattr['border_bottom']['w'];&nbsp;</div></li><li><div>                $extrawidth = $objattr['padding_left'] + $objattr['padding_right'] + $objattr['margin_left'] + $objattr['margin_right'] + $objattr['border_left']['w'] + $objattr['border_right']['w'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $w = $objattr['r'] * 2;&nbsp;</div></li><li><div>                $h = $w;&nbsp;</div></li><li><div>                $objattr['height'] = $h + $extraheight;&nbsp;</div></li><li><div>                $objattr['width'] = $w + $extrawidth;&nbsp;</div></li><li><div>                $objattr['type'] = 'textcircle';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=image, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Clear properties - tidy up&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- TABLES -- */&nbsp;</div></li><li><div>                // Output it to buffers&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    /** -- END TABLES -- */&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- TABLES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TABLE': // TABLE-BEGIN&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tdbegin = false;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>                // Disable vertical justification in columns&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;colvAlign = '';&nbsp;</div></li><li><div>                } // *COLUMNS*&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;lastblocklevelchange == 1) {&nbsp;</div></li><li><div>                    $blockstate = 1;&nbsp;</div></li><li><div>                } // Top margins/padding only&nbsp;</div></li><li><div>                else if ($this-&gt;mpdf-&gt;lastblocklevelchange &lt; 1) {&nbsp;</div></li><li><div>                    $blockstate = 0;&nbsp;</div></li><li><div>                } // NO margins/padding&nbsp;</div></li><li><div>                // called from block after new div e.g. &lt;div&gt; ... &lt;table&gt; ...    Outputs block top margin/border and padding&nbsp;</div></li><li><div>                if (count($this-&gt;mpdf-&gt;textbuffer) == 0 && $this-&gt;mpdf-&gt;lastblocklevelchange == 1 && !$this-&gt;mpdf-&gt;tableLevel && !$this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;newFlowingBlock($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['width'], $this-&gt;mpdf-&gt;lineheight, '', false, 1, true, $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction']);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;finishFlowingBlock(true); // true = END of flowing block&nbsp;</div></li><li><div>                } else if (!$this-&gt;mpdf-&gt;tableLevel && count($this-&gt;mpdf-&gt;textbuffer)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;printbuffer($this-&gt;mpdf-&gt;textbuffer, $blockstate);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;textbuffer = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastblocklevelchange = -1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) { // i.e. now a nested table coming...&nbsp;</div></li><li><div>                    // Save current level table&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell['PARENTCELL'] = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['baseProperties'] = $this-&gt;mpdf-&gt;base_table_properties;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cells'] = $this-&gt;mpdf-&gt;cell;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['currrow'] = $this-&gt;mpdf-&gt;row;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['currcol'] = $this-&gt;mpdf-&gt;col;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tableLevel++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel &gt; 1) { // inherit table properties from cell in which nested&nbsp;</div></li><li><div>                    //$this-&gt;mpdf-&gt;base_table_properties['FONT-KERNING'] = ($this-&gt;mpdf-&gt;textvar & FC_KERNING);    // mPDF 6&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['LETTER-SPACING'] = $this-&gt;mpdf-&gt;lSpacingCSS;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['WORD-SPACING'] = $this-&gt;mpdf-&gt;wSpacingCSS;&nbsp;</div></li><li><div>                    // mPDF 6&nbsp;</div></li><li><div>                    $direction = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['direction'];&nbsp;</div></li><li><div>                    $txta = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['a'];&nbsp;</div></li><li><div>                    $cellLineHeight = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['cellLineHeight'];&nbsp;</div></li><li><div>                    $cellLineStackingStrategy = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['cellLineStackingStrategy'];&nbsp;</div></li><li><div>                    $cellLineStackingShift = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['cellLineStackingShift'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel] ++;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel] = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['level'] = $this-&gt;mpdf-&gt;tableLevel;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['levelid'] = $this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel &gt; $this-&gt;mpdf-&gt;innermostTableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;innermostTableLevel = $this-&gt;mpdf-&gt;tableLevel;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel &gt; 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nestedpos'] = array($this-&gt;mpdf-&gt;row, $this-&gt;mpdf-&gt;col, $this-&gt;mpdf-&gt;tbctr[($this-&gt;mpdf-&gt;tableLevel - 1)]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //++++++++++++++++++++++++++++&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;col = -1; //int&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;row = -1; //int&nbsp;</div></li><li><div>                $table = &$this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // New table - any level&nbsp;</div></li><li><div>                $table['direction'] = $this-&gt;mpdf-&gt;directionality;&nbsp;</div></li><li><div>                $table['bgcolor'] = false;&nbsp;</div></li><li><div>                $table['va'] = false;&nbsp;</div></li><li><div>                $table['txta'] = false;&nbsp;</div></li><li><div>                $table['topntail'] = false;&nbsp;</div></li><li><div>                $table['thead-underline'] = false;&nbsp;</div></li><li><div>                $table['border'] = false;&nbsp;</div></li><li><div>                $table['border_details']['R']['w'] = 0;&nbsp;</div></li><li><div>                $table['border_details']['L']['w'] = 0;&nbsp;</div></li><li><div>                $table['border_details']['T']['w'] = 0;&nbsp;</div></li><li><div>                $table['border_details']['B']['w'] = 0;&nbsp;</div></li><li><div>                $table['border_details']['R']['style'] = '';&nbsp;</div></li><li><div>                $table['border_details']['L']['style'] = '';&nbsp;</div></li><li><div>                $table['border_details']['T']['style'] = '';&nbsp;</div></li><li><div>                $table['border_details']['B']['style'] = '';&nbsp;</div></li><li><div>                $table['max_cell_border_width']['R'] = 0;&nbsp;</div></li><li><div>                $table['max_cell_border_width']['L'] = 0;&nbsp;</div></li><li><div>                $table['max_cell_border_width']['T'] = 0;&nbsp;</div></li><li><div>                $table['max_cell_border_width']['B'] = 0;&nbsp;</div></li><li><div>                $table['padding']['L'] = false;&nbsp;</div></li><li><div>                $table['padding']['R'] = false;&nbsp;</div></li><li><div>                $table['padding']['T'] = false;&nbsp;</div></li><li><div>                $table['padding']['B'] = false;&nbsp;</div></li><li><div>                $table['margin']['L'] = false;&nbsp;</div></li><li><div>                $table['margin']['R'] = false;&nbsp;</div></li><li><div>                $table['margin']['T'] = false;&nbsp;</div></li><li><div>                $table['margin']['B'] = false;&nbsp;</div></li><li><div>                $table['a'] = false;&nbsp;</div></li><li><div>                $table['border_spacing_H'] = false;&nbsp;</div></li><li><div>                $table['border_spacing_V'] = false;&nbsp;</div></li><li><div>                $table['decimal_align'] = false;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = array(); // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = 0; // mPDF 6&nbsp;</div></li><li><div>                $table['nc'] = $table['nr'] = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tablethead = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tabletfoot = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tabletheadjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel &gt; 1) { // inherit table properties from cell in which nested&nbsp;</div></li><li><div>                    $table['direction'] = $direction;&nbsp;</div></li><li><div>                    $table['txta'] = $txta;&nbsp;</div></li><li><div>                    $table['cellLineHeight'] = $cellLineHeight;&nbsp;</div></li><li><div>                    $table['cellLineStackingStrategy'] = $cellLineStackingStrategy;&nbsp;</div></li><li><div>                    $table['cellLineStackingShift'] = $cellLineStackingShift;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;blockjustfinished && !count($this-&gt;mpdf-&gt;textbuffer) && $this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin && $this-&gt;mpdf-&gt;collapseBlockMargins && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $lastbottommargin = $this-&gt;mpdf-&gt;lastblockbottommargin;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $lastbottommargin = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastblockbottommargin = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blockjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $table['headernrows'] = 0;&nbsp;</div></li><li><div>                    $table['footernrows'] = 0;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties = array();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // ADDED CSS FUNCIONS FOR TABLE&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl == 1) {&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TOPTABLE', $tag, $attr);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $w = '';&nbsp;</div></li><li><div>                if (isset($properties['WIDTH'])) {&nbsp;</div></li><li><div>                    $w = $properties['WIDTH'];&nbsp;</div></li><li><div>                } else if (isset($attr['WIDTH']) && $attr['WIDTH']) {&nbsp;</div></li><li><div>                    $w = $attr['WIDTH'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['ALIGN']) && isset($align[strtolower($attr['ALIGN'])])) {&nbsp;</div></li><li><div>                    $table['a'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!$table['a']) {&nbsp;</div></li><li><div>                    if ($table['direction'] == 'rtl') {&nbsp;</div></li><li><div>                        $table['a'] = 'R';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $table['a'] = 'L';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['DIRECTION']) && $properties['DIRECTION']) {&nbsp;</div></li><li><div>                    $table['direction'] = strtolower($properties['DIRECTION']);&nbsp;</div></li><li><div>                } else if (isset($attr['DIR']) && $attr['DIR']) {&nbsp;</div></li><li><div>                    $table['direction'] = strtolower($attr['DIR']);&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $table['direction'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-COLOR'])) {&nbsp;</div></li><li><div>                    $table['bgcolor'][-1] = $properties['BACKGROUND-COLOR'];&nbsp;</div></li><li><div>                } else if (isset($properties['BACKGROUND'])) {&nbsp;</div></li><li><div>                    $table['bgcolor'][-1] = $properties['BACKGROUND'];&nbsp;</div></li><li><div>                } else if (isset($attr['BGCOLOR'])) {&nbsp;</div></li><li><div>                    $table['bgcolor'][-1] = $attr['BGCOLOR'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN']) && isset($align[strtolower($properties['VERTICAL-ALIGN'])])) {&nbsp;</div></li><li><div>                    $table['va'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ALIGN']) && isset($align[strtolower($properties['TEXT-ALIGN'])])) {&nbsp;</div></li><li><div>                    $table['txta'] = $align[strtolower($properties['TEXT-ALIGN'])];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['AUTOSIZE']) && $properties['AUTOSIZE'] && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrink_this_table_to_fit = $properties['AUTOSIZE'];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;shrink_this_table_to_fit &lt; 1) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;shrink_this_table_to_fit = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['ROTATE']) && $properties['ROTATE'] && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_rotate = $properties['ROTATE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['TOPNTAIL'])) {&nbsp;</div></li><li><div>                    $table['topntail'] = $properties['TOPNTAIL'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['THEAD-UNDERLINE'])) {&nbsp;</div></li><li><div>                    $table['thead-underline'] = $properties['THEAD-UNDERLINE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BORDER'])) {&nbsp;</div></li><li><div>                    $bord = $this-&gt;mpdf-&gt;border_details($properties['BORDER']);&nbsp;</div></li><li><div>                    if ($bord['s']) {&nbsp;</div></li><li><div>                        $table['border'] = _BORDER_ALL;&nbsp;</div></li><li><div>                        $table['border_details']['R'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['L'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['T'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['B'] = $bord;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-RIGHT'])) {&nbsp;</div></li><li><div>                    if ($table['direction'] == 'rtl') {  // *OTL*&nbsp;</div></li><li><div>                        $table['border_details']['R'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']); // *OTL*&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                    else { // *OTL*&nbsp;</div></li><li><div>                        $table['border_details']['R'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($table['border'], _BORDER_RIGHT, $table['border_details']['R']['s']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-LEFT'])) {&nbsp;</div></li><li><div>                    if ($table['direction'] == 'rtl') {  // *OTL*&nbsp;</div></li><li><div>                        $table['border_details']['L'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']); // *OTL*&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                    else { // *OTL*&nbsp;</div></li><li><div>                        $table['border_details']['L'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                    } // *OTL*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($table['border'], _BORDER_LEFT, $table['border_details']['L']['s']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-BOTTOM'])) {&nbsp;</div></li><li><div>                    $table['border_details']['B'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($table['border'], _BORDER_BOTTOM, $table['border_details']['B']['s']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-TOP'])) {&nbsp;</div></li><li><div>                    $table['border_details']['T'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($table['border'], _BORDER_TOP, $table['border_details']['T']['s']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($table['border']) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_border_css_set = 1;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_border_css_set = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                if (isset($properties['LANG']) && $properties['LANG']) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;autoLangToFont && !$this-&gt;mpdf-&gt;usingCoreFont) {&nbsp;</div></li><li><div>                        if ($properties['LANG'] != $this-&gt;mpdf-&gt;default_lang && $properties['LANG'] != 'UTF-8') {&nbsp;</div></li><li><div>                            list ($coreSuitable, $mpdf_pdf_unifont) = GetLangOpts($properties['LANG'], $this-&gt;mpdf-&gt;useAdobeCJK, $this-&gt;mpdf-&gt;fontdata);&nbsp;</div></li><li><div>                            if ($mpdf_pdf_unifont) {&nbsp;</div></li><li><div>                                $properties['FONT-FAMILY'] = $mpdf_pdf_unifont;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;currentLang = $properties['LANG'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-FAMILY'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;default_font = $properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFont($this-&gt;mpdf-&gt;default_font, '', 0, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;base_table_properties['FONT-FAMILY'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-SIZE'])) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel &gt; 1) {&nbsp;</div></li><li><div>                        $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], $this-&gt;mpdf-&gt;base_table_properties['FONT-SIZE']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $mmsize = $this-&gt;mpdf-&gt;ConvertSize($properties['FONT-SIZE'], $this-&gt;mpdf-&gt;default_font_size / _MPDFK);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($mmsize) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;default_font_size = $mmsize * (_MPDFK);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetFontSize($this-&gt;mpdf-&gt;default_font_size, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;base_table_properties['FONT-SIZE'] = $this-&gt;mpdf-&gt;FontSize . 'mm';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-WEIGHT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-WEIGHT']) == 'BOLD') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;base_table_properties['FONT-WEIGHT'] = 'BOLD';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-STYLE'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-STYLE']) == 'ITALIC') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;base_table_properties['FONT-STYLE'] = 'ITALIC';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['COLOR'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['COLOR'] = $properties['COLOR'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-KERNING'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['FONT-KERNING'] = $properties['FONT-KERNING'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['LETTER-SPACING'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['LETTER-SPACING'] = $properties['LETTER-SPACING'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['WORD-SPACING'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['WORD-SPACING'] = $properties['WORD-SPACING'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                if (isset($properties['HYPHENS'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;base_table_properties['HYPHENS'] = $properties['HYPHENS'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['LINE-HEIGHT']) && $properties['LINE-HEIGHT']) {&nbsp;</div></li><li><div>                    $table['cellLineHeight'] = $this-&gt;mpdf-&gt;fixLineheight($properties['LINE-HEIGHT']);&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $table['cellLineHeight'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['line_height'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['LINE-STACKING-STRATEGY']) && $properties['LINE-STACKING-STRATEGY']) {&nbsp;</div></li><li><div>                    $table['cellLineStackingStrategy'] = strtolower($properties['LINE-STACKING-STRATEGY']);&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;tableLevel == 1 && isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['line_stacking_strategy'])) {&nbsp;</div></li><li><div>                    $table['cellLineStackingStrategy'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['line_stacking_strategy'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $table['cellLineStackingStrategy'] = 'inline-line-height';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['LINE-STACKING-SHIFT']) && $properties['LINE-STACKING-SHIFT']) {&nbsp;</div></li><li><div>                    $table['cellLineStackingShift'] = strtolower($properties['LINE-STACKING-SHIFT']);&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;tableLevel == 1 && isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['line_stacking_shift'])) {&nbsp;</div></li><li><div>                    $table['cellLineStackingShift'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['line_stacking_shift'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $table['cellLineStackingShift'] = 'consider-shifts';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                    $table['padding']['L'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                    $table['padding']['R'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                    $table['padding']['T'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                    $table['padding']['B'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-TOP'])) {&nbsp;</div></li><li><div>                    if ($lastbottommargin) {&nbsp;</div></li><li><div>                        $tmp = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        if ($tmp &gt; $lastbottommargin) {&nbsp;</div></li><li><div>                            $properties['MARGIN-TOP'] -= $lastbottommargin;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $properties['MARGIN-TOP'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $table['margin']['T'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-BOTTOM'])) {&nbsp;</div></li><li><div>                    $table['margin']['B'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-LEFT'])) {&nbsp;</div></li><li><div>                    $table['margin']['L'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-RIGHT'])) {&nbsp;</div></li><li><div>                    $table['margin']['R'] = $this-&gt;mpdf-&gt;ConvertSize($properties['MARGIN-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['MARGIN-LEFT']) && isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-LEFT']) == 'auto' && strtolower($properties['MARGIN-RIGHT']) == 'auto') {&nbsp;</div></li><li><div>                    $table['a'] = 'C';&nbsp;</div></li><li><div>                } else if (isset($properties['MARGIN-LEFT']) && strtolower($properties['MARGIN-LEFT']) == 'auto') {&nbsp;</div></li><li><div>                    $table['a'] = 'R';&nbsp;</div></li><li><div>                } else if (isset($properties['MARGIN-RIGHT']) && strtolower($properties['MARGIN-RIGHT']) == 'auto') {&nbsp;</div></li><li><div>                    $table['a'] = 'L';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BORDER-COLLAPSE']) && strtoupper($properties['BORDER-COLLAPSE']) == 'SEPARATE') {&nbsp;</div></li><li><div>                    $table['borders_separate'] = true;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $table['borders_separate'] = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 5.7.3&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BORDER-SPACING-H'])) {&nbsp;</div></li><li><div>                    $table['border_spacing_H'] = $this-&gt;mpdf-&gt;ConvertSize($properties['BORDER-SPACING-H'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER-SPACING-V'])) {&nbsp;</div></li><li><div>                    $table['border_spacing_V'] = $this-&gt;mpdf-&gt;ConvertSize($properties['BORDER-SPACING-V'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // mPDF 5.7.3&nbsp;</div></li><li><div>                if (!$table['borders_separate']) {&nbsp;</div></li><li><div>                    $table['border_spacing_H'] = $table['border_spacing_V'] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['EMPTY-CELLS'])) {&nbsp;</div></li><li><div>                    $table['empty_cells'] = strtolower($properties['EMPTY-CELLS']);  // 'hide'  or 'show'&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $table['empty_cells'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['PAGE-BREAK-INSIDE']) && strtoupper($properties['PAGE-BREAK-INSIDE']) == 'AVOID' && $this-&gt;mpdf-&gt;tableLevel == 1 && !$this-&gt;mpdf-&gt;writingHTMLfooter) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_keep_together = true;&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_keep_together = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PAGE-BREAK-AFTER']) && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $table['page_break_after'] = strtoupper($properties['PAGE-BREAK-AFTER']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-GRADIENT']) && !$this-&gt;mpdf-&gt;kwt && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $table['gradient'] = $properties['BACKGROUND-GRADIENT'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-IMAGE']) && $properties['BACKGROUND-IMAGE'] && !$this-&gt;mpdf-&gt;kwt && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $ret = $this-&gt;mpdf-&gt;SetBackground($properties, $currblk['inner_width']);&nbsp;</div></li><li><div>                    if ($ret) {&nbsp;</div></li><li><div>                        $table['background-image'] = $ret;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['OVERFLOW'])) {&nbsp;</div></li><li><div>                    $table['overflow'] = strtolower($properties['OVERFLOW']);  // 'hidden' 'wrap' or 'visible' or 'auto'&nbsp;</div></li><li><div>                    if (($this-&gt;mpdf-&gt;ColActive || $this-&gt;mpdf-&gt;tableLevel &gt; 1) && $table['overflow'] == 'visible') {&nbsp;</div></li><li><div>                        unset($table['overflow']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['CELLPADDING'])) {&nbsp;</div></li><li><div>                    $table['cell_padding'] = $attr['CELLPADDING'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $table['cell_padding'] = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['BORDER']) && $attr['BORDER'] == '1') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_border_attr_set = 1;&nbsp;</div></li><li><div>                    $bord = $this-&gt;mpdf-&gt;border_details('#000000 1px solid');&nbsp;</div></li><li><div>                    if ($bord['s']) {&nbsp;</div></li><li><div>                        $table['border'] = _BORDER_ALL;&nbsp;</div></li><li><div>                        $table['border_details']['R'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['L'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['T'] = $bord;&nbsp;</div></li><li><div>                        $table['border_details']['B'] = $bord;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_border_attr_set = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($w) {&nbsp;</div></li><li><div>                    $maxwidth = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];&nbsp;</div></li><li><div>                    if ($table['borders_separate']) {&nbsp;</div></li><li><div>                        $tblblw = $table['margin']['L'] + $table['margin']['R'] + $table['border_details']['L']['w'] / 2 + $table['border_details']['R']['w'] / 2;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $tblblw = $table['margin']['L'] + $table['margin']['R'] + $table['max_cell_border_width']['L'] / 2 + $table['max_cell_border_width']['R'] / 2;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (strpos($w, '%') && $this-&gt;mpdf-&gt;tableLevel == 1 && !$this-&gt;mpdf-&gt;ignore_table_percents) {&nbsp;</div></li><li><div>                        // % needs to be of inner box without table margins etc.&nbsp;</div></li><li><div>                        $maxwidth -= $tblblw;&nbsp;</div></li><li><div>                        $wmm = $this-&gt;mpdf-&gt;ConvertSize($w, $maxwidth, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        $table['w'] = $wmm + $tblblw;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (strpos($w, '%') && $this-&gt;mpdf-&gt;tableLevel &gt; 1 && !$this-&gt;mpdf-&gt;ignore_table_percents && $this-&gt;mpdf-&gt;keep_table_proportions) {&nbsp;</div></li><li><div>                        $table['wpercent'] = $w + 0;  // makes 80% -&gt; 80&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (!strpos($w, '%') && !$this-&gt;mpdf-&gt;ignore_table_widths) {&nbsp;</div></li><li><div>                        $wmm = $this-&gt;mpdf-&gt;ConvertSize($w, $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                        $table['w'] = $wmm + $tblblw;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (!$this-&gt;mpdf-&gt;keep_table_proportions) {&nbsp;</div></li><li><div>                        if (isset($table['w']) && $table['w'] &gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']) {&nbsp;</div></li><li><div>                            $table['w'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['AUTOSIZE']) && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrink_this_table_to_fit = $attr['AUTOSIZE'];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;shrink_this_table_to_fit &lt; 1) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;shrink_this_table_to_fit = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ROTATE']) && $this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_rotate = $attr['ROTATE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //++++++++++++++++++++++++++++&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;table_rotate) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbrot_Links = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbrot_Annots = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbrotForms = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbrot_BMoutlines = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tbrot_toc = array();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;table_rotate) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table_keep_together = true;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_saved = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel == 1 && $this-&gt;mpdf-&gt;useGraphs) {&nbsp;</div></li><li><div>                    if (isset($attr['ID']) && $attr['ID']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;currentGraphId = strtoupper($attr['ID']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;currentGraphId = '0';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;graphs[$this-&gt;mpdf-&gt;currentGraphId] = array();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //++++++++++++++++++++++++++++&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;plainCell_properties = array();&nbsp;</div></li><li><div>                unset($table);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'THEAD':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = $tag; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tablethead = 1;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tabletfoot = 0;&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['FONT-WEIGHT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-WEIGHT']) == 'BOLD') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_weight = 'B';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_weight = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-STYLE'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-STYLE']) == 'ITALIC') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_style = 'I';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_style = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-VARIANT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-VARIANT']) == 'SMALL-CAPS') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_smCaps = 'S';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;thead_font_smCaps = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;thead_valign_default = $properties['VERTICAL-ALIGN'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ALIGN'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;thead_textalign_default = $properties['TEXT-ALIGN'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TFOOT':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = $tag; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tabletfoot = 1;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tablethead = 0;&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>                if (isset($properties['FONT-WEIGHT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-WEIGHT']) == 'BOLD') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_weight = 'B';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_weight = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['FONT-STYLE'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-STYLE']) == 'ITALIC') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_style = 'I';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_style = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['FONT-VARIANT'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['FONT-VARIANT']) == 'SMALL-CAPS') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_smCaps = 'S';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tfoot_font_smCaps = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tfoot_valign_default = $properties['VERTICAL-ALIGN'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ALIGN'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;tfoot_textalign_default = $properties['TEXT-ALIGN'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TBODY':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tablethead = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tabletfoot = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = $tag; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TR':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = $tag; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;row++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nr'] ++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;col = -1;&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (!$this-&gt;mpdf-&gt;simpleTables && (!isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['borders_separate']) || !$this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['borders_separate'])) {&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-LEFT']) && $properties['BORDER-LEFT']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-left'][$this-&gt;mpdf-&gt;row] = $properties['BORDER-LEFT'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-RIGHT']) && $properties['BORDER-RIGHT']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-right'][$this-&gt;mpdf-&gt;row] = $properties['BORDER-RIGHT'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP']) && $properties['BORDER-TOP']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-top'][$this-&gt;mpdf-&gt;row] = $properties['BORDER-TOP'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-BOTTOM']) && $properties['BORDER-BOTTOM']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-bottom'][$this-&gt;mpdf-&gt;row] = $properties['BORDER-BOTTOM'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-COLOR'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$this-&gt;mpdf-&gt;row] = $properties['BACKGROUND-COLOR'];&nbsp;</div></li><li><div>                } else if (isset($attr['BGCOLOR']))&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$this-&gt;mpdf-&gt;row] = $attr['BGCOLOR'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-GRADIENT']) && !$this-&gt;mpdf-&gt;kwt && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'][$this-&gt;mpdf-&gt;row] = $properties['BACKGROUND-GRADIENT'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-IMAGE']) && $properties['BACKGROUND-IMAGE'] && !$this-&gt;mpdf-&gt;kwt && !$this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $ret = $this-&gt;mpdf-&gt;SetBackground($properties, $currblk['inner_width']);&nbsp;</div></li><li><div>                    if ($ret) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'][$this-&gt;mpdf-&gt;row] = $ret;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ROTATE'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;trow_text_rotate = $properties['TEXT-ROTATE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['TEXT-ROTATE']))&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;trow_text_rotate = $attr['TEXT-ROTATE'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead'][$this-&gt;mpdf-&gt;row] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'][$this-&gt;mpdf-&gt;row] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'TH':&nbsp;</div></li><li><div>            case 'TD':&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastoptionaltag = $tag; // Save current HTML specified optional endtag&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = array(); // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = 0; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tdbegin = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;col++;&nbsp;</div></li><li><div>                while (isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;col++;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //Update number column&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc'] &lt; $this-&gt;mpdf-&gt;col + 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc'] = $this-&gt;mpdf-&gt;col + 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $table = &$this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $c = array('a' =&gt; false, &nbsp;</div></li><li><div>                    'R' =&gt; false, &nbsp;</div></li><li><div>                    'nowrap' =&gt; false, &nbsp;</div></li><li><div>                    'bgcolor' =&gt; false, &nbsp;</div></li><li><div>                    'padding' =&gt; array('L' =&gt; false, &nbsp;</div></li><li><div>                        'R' =&gt; false, &nbsp;</div></li><li><div>                        'T' =&gt; false, &nbsp;</div></li><li><div>                        'B' =&gt; false&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;simpleTables && $this-&gt;mpdf-&gt;row == 0 && $this-&gt;mpdf-&gt;col == 0) {&nbsp;</div></li><li><div>                    $table['simple']['border'] = false;&nbsp;</div></li><li><div>                    $table['simple']['border_details']['R']['w'] = 0;&nbsp;</div></li><li><div>                    $table['simple']['border_details']['L']['w'] = 0;&nbsp;</div></li><li><div>                    $table['simple']['border_details']['T']['w'] = 0;&nbsp;</div></li><li><div>                    $table['simple']['border_details']['B']['w'] = 0;&nbsp;</div></li><li><div>                    $table['simple']['border_details']['R']['style'] = '';&nbsp;</div></li><li><div>                    $table['simple']['border_details']['L']['style'] = '';&nbsp;</div></li><li><div>                    $table['simple']['border_details']['T']['style'] = '';&nbsp;</div></li><li><div>                    $table['simple']['border_details']['B']['style'] = '';&nbsp;</div></li><li><div>                } else if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                    $c['border'] = false;&nbsp;</div></li><li><div>                    $c['border_details']['R']['w'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['L']['w'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['T']['w'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['B']['w'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['BL'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['BR'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['RT'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['RB'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['TL'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['TR'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['LT'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['mbw']['LB'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['R']['style'] = '';&nbsp;</div></li><li><div>                    $c['border_details']['L']['style'] = '';&nbsp;</div></li><li><div>                    $c['border_details']['T']['style'] = '';&nbsp;</div></li><li><div>                    $c['border_details']['B']['style'] = '';&nbsp;</div></li><li><div>                    $c['border_details']['R']['s'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['L']['s'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['T']['s'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['B']['s'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['R']['c'] = $this-&gt;mpdf-&gt;ConvertColor(0);&nbsp;</div></li><li><div>                    $c['border_details']['L']['c'] = $this-&gt;mpdf-&gt;ConvertColor(0);&nbsp;</div></li><li><div>                    $c['border_details']['T']['c'] = $this-&gt;mpdf-&gt;ConvertColor(0);&nbsp;</div></li><li><div>                    $c['border_details']['B']['c'] = $this-&gt;mpdf-&gt;ConvertColor(0);&nbsp;</div></li><li><div>                    $c['border_details']['R']['dom'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['L']['dom'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['T']['dom'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['B']['dom'] = 0;&nbsp;</div></li><li><div>                    $c['border_details']['cellposdom'] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($table['va']) {&nbsp;</div></li><li><div>                    $c['va'] = $table['va'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($table['txta']) {&nbsp;</div></li><li><div>                    $c['a'] = $table['txta'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;table_border_attr_set) {&nbsp;</div></li><li><div>                    if ($table['border_details']) {&nbsp;</div></li><li><div>                        if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                            $c['border_details']['R'] = $table['border_details']['R'];&nbsp;</div></li><li><div>                            $c['border_details']['L'] = $table['border_details']['L'];&nbsp;</div></li><li><div>                            $c['border_details']['T'] = $table['border_details']['T'];&nbsp;</div></li><li><div>                            $c['border_details']['B'] = $table['border_details']['B'];&nbsp;</div></li><li><div>                            $c['border'] = $table['border'];&nbsp;</div></li><li><div>                            $c['border_details']['L']['dom'] = 1;&nbsp;</div></li><li><div>                            $c['border_details']['R']['dom'] = 1;&nbsp;</div></li><li><div>                            $c['border_details']['T']['dom'] = 1;&nbsp;</div></li><li><div>                            $c['border_details']['B']['dom'] = 1;&nbsp;</div></li><li><div>                        } else if ($this-&gt;mpdf-&gt;simpleTables && $this-&gt;mpdf-&gt;row == 0 && $this-&gt;mpdf-&gt;col == 0) {&nbsp;</div></li><li><div>                            $table['simple']['border_details']['R'] = $table['border_details']['R'];&nbsp;</div></li><li><div>                            $table['simple']['border_details']['L'] = $table['border_details']['L'];&nbsp;</div></li><li><div>                            $table['simple']['border_details']['T'] = $table['border_details']['T'];&nbsp;</div></li><li><div>                            $table['simple']['border_details']['B'] = $table['border_details']['B'];&nbsp;</div></li><li><div>                            $table['simple']['border'] = $table['border'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // INHERITED THEAD CSS Properties&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;thead_valign_default)&nbsp;</div></li><li><div>                        $c['va'] = $align[strtolower($this-&gt;mpdf-&gt;thead_valign_default)];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;thead_textalign_default)&nbsp;</div></li><li><div>                        $c['a'] = $align[strtolower($this-&gt;mpdf-&gt;thead_textalign_default)];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;thead_font_weight == 'B') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetStyle('B', true);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;thead_font_style == 'I') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetStyle('I', true);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;thead_font_smCaps == 'S') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textvar = ($this-&gt;mpdf-&gt;textvar | FC_SMALLCAPS);&nbsp;</div></li><li><div>                    } // mPDF 5.7.1&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // INHERITED TFOOT CSS Properties&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tfoot_valign_default)&nbsp;</div></li><li><div>                        $c['va'] = $align[strtolower($this-&gt;mpdf-&gt;tfoot_valign_default)];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tfoot_textalign_default)&nbsp;</div></li><li><div>                        $c['a'] = $align[strtolower($this-&gt;mpdf-&gt;tfoot_textalign_default)];&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tfoot_font_weight == 'B') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetStyle('B', true);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tfoot_font_style == 'I') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;SetStyle('I', true);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tfoot_font_style == 'S') {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textvar = ($this-&gt;mpdf-&gt;textvar | FC_SMALLCAPS);&nbsp;</div></li><li><div>                    } // mPDF 5.7.1&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;trow_text_rotate) {&nbsp;</div></li><li><div>                    $c['R'] = $this-&gt;mpdf-&gt;trow_text_rotate;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell_border_dominance_L = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell_border_dominance_R = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell_border_dominance_T = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell_border_dominance_B = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;MergeCSS('TABLE', $tag, $attr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $properties = $this-&gt;mpdf-&gt;cssmgr-&gt;array_merge_recursive_unique($this-&gt;mpdf-&gt;base_table_properties, $properties);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Reset(); // mPDF 6   ?????????????????????&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;setCSS($properties, 'TABLECELL', $tag);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $c['dfs'] = $this-&gt;mpdf-&gt;FontSize; // Default Font size&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-COLOR'])) {&nbsp;</div></li><li><div>                    $c['bgcolor'] = $properties['BACKGROUND-COLOR'];&nbsp;</div></li><li><div>                } else if (isset($properties['BACKGROUND'])) {&nbsp;</div></li><li><div>                    $c['bgcolor'] = $properties['BACKGROUND'];&nbsp;</div></li><li><div>                } else if (isset($attr['BGCOLOR']))&nbsp;</div></li><li><div>                    $c['bgcolor'] = $attr['BGCOLOR'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-GRADIENT'])) {&nbsp;</div></li><li><div>                    $c['gradient'] = $properties['BACKGROUND-GRADIENT'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $c['gradient'] = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['BACKGROUND-IMAGE']) && $properties['BACKGROUND-IMAGE'] && !$this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>                    $ret = $this-&gt;mpdf-&gt;SetBackground($properties, $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width']);&nbsp;</div></li><li><div>                    if ($ret) {&nbsp;</div></li><li><div>                        $c['background-image'] = $ret;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>                if (isset($properties['VERTICAL-ALIGN'])) {&nbsp;</div></li><li><div>                    $c['va'] = $align[strtolower($properties['VERTICAL-ALIGN'])];&nbsp;</div></li><li><div>                } else if (isset($attr['VALIGN']))&nbsp;</div></li><li><div>                    $c['va'] = $align[strtolower($attr['VALIGN'])];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ALIGN']) && $properties['TEXT-ALIGN']) {&nbsp;</div></li><li><div>                    if (substr($properties['TEXT-ALIGN'], 0, 1) == 'D') {&nbsp;</div></li><li><div>                        $c['a'] = $properties['TEXT-ALIGN'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $c['a'] = $align[strtolower($properties['TEXT-ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ALIGN']) && $attr['ALIGN']) {&nbsp;</div></li><li><div>                    if (strtolower($attr['ALIGN']) == 'char') {&nbsp;</div></li><li><div>                        if (isset($attr['CHAR']) && $attr['CHAR']) {&nbsp;</div></li><li><div>                            $char = html_entity_decode($attr['CHAR']);&nbsp;</div></li><li><div>                            $char = strcode2utf($char);&nbsp;</div></li><li><div>                            $d = array_search($char, $this-&gt;mpdf-&gt;decimal_align);&nbsp;</div></li><li><div>                            if ($d !== false) {&nbsp;</div></li><li><div>                                $c['a'] = $d . 'R';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $c['a'] = 'DPR';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $c['a'] = $align[strtolower($attr['ALIGN'])];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6&nbsp;</div></li><li><div>                $c['direction'] = $table['direction'];&nbsp;</div></li><li><div>                if (isset($attr['DIR']) and $attr['DIR'] != '') {&nbsp;</div></li><li><div>                    $c['direction'] = strtolower($attr['DIR']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['DIRECTION'])) {&nbsp;</div></li><li><div>                    $c['direction'] = strtolower($properties['DIRECTION']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (!$c['a']) {&nbsp;</div></li><li><div>                    if (isset($c['direction']) && $c['direction'] == 'rtl') {&nbsp;</div></li><li><div>                        $c['a'] = 'R';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $c['a'] = 'L';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $c['cellLineHeight'] = $table['cellLineHeight'];&nbsp;</div></li><li><div>                if (isset($properties['LINE-HEIGHT'])) {&nbsp;</div></li><li><div>                    $c['cellLineHeight'] = $this-&gt;mpdf-&gt;fixLineheight($properties['LINE-HEIGHT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $c['cellLineStackingStrategy'] = $table['cellLineStackingStrategy'];&nbsp;</div></li><li><div>                if (isset($properties['LINE-STACKING-STRATEGY'])) {&nbsp;</div></li><li><div>                    $c['cellLineStackingStrategy'] = strtolower($properties['LINE-STACKING-STRATEGY']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $c['cellLineStackingShift'] = $table['cellLineStackingShift'];&nbsp;</div></li><li><div>                if (isset($properties['LINE-STACKING-SHIFT'])) {&nbsp;</div></li><li><div>                    $c['cellLineStackingShift'] = strtolower($properties['LINE-STACKING-SHIFT']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['TEXT-ROTATE']) && ($properties['TEXT-ROTATE'] || $properties['TEXT-ROTATE'] === &quot;0&quot;)) {&nbsp;</div></li><li><div>                    $c['R'] = $properties['TEXT-ROTATE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['BORDER'])) {&nbsp;</div></li><li><div>                    $bord = $this-&gt;mpdf-&gt;border_details($properties['BORDER']);&nbsp;</div></li><li><div>                    if ($bord['s']) {&nbsp;</div></li><li><div>                        if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                            $c['border'] = _BORDER_ALL;&nbsp;</div></li><li><div>                            $c['border_details']['R'] = $bord;&nbsp;</div></li><li><div>                            $c['border_details']['L'] = $bord;&nbsp;</div></li><li><div>                            $c['border_details']['T'] = $bord;&nbsp;</div></li><li><div>                            $c['border_details']['B'] = $bord;&nbsp;</div></li><li><div>                            $c['border_details']['L']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_L;&nbsp;</div></li><li><div>                            $c['border_details']['R']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_R;&nbsp;</div></li><li><div>                            $c['border_details']['T']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_T;&nbsp;</div></li><li><div>                            $c['border_details']['B']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_B;&nbsp;</div></li><li><div>                        } else if ($this-&gt;mpdf-&gt;simpleTables && $this-&gt;mpdf-&gt;row == 0 && $this-&gt;mpdf-&gt;col == 0) {&nbsp;</div></li><li><div>                            $table['simple']['border'] = _BORDER_ALL;&nbsp;</div></li><li><div>                            $table['simple']['border_details']['R'] = $bord;&nbsp;</div></li><li><div>                            $table['simple']['border_details']['L'] = $bord;&nbsp;</div></li><li><div>                            $table['simple']['border_details']['T'] = $bord;&nbsp;</div></li><li><div>                            $table['simple']['border_details']['B'] = $bord;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-RIGHT']) && $properties['BORDER-RIGHT']) {&nbsp;</div></li><li><div>                        $c['border_details']['R'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-RIGHT']);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_RIGHT, $c['border_details']['R']['s']);&nbsp;</div></li><li><div>                        $c['border_details']['R']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_R;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-LEFT']) && $properties['BORDER-LEFT']) {&nbsp;</div></li><li><div>                        $c['border_details']['L'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_LEFT, $c['border_details']['L']['s']);&nbsp;</div></li><li><div>                        $c['border_details']['L']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_L;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-BOTTOM']) && $properties['BORDER-BOTTOM']) {&nbsp;</div></li><li><div>                        $c['border_details']['B'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-BOTTOM']);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_BOTTOM, $c['border_details']['B']['s']);&nbsp;</div></li><li><div>                        $c['border_details']['B']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_B;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-TOP']) && $properties['BORDER-TOP']) {&nbsp;</div></li><li><div>                        $c['border_details']['T'] = $this-&gt;mpdf-&gt;border_details($properties['BORDER-TOP']);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_TOP, $c['border_details']['T']['s']);&nbsp;</div></li><li><div>                        $c['border_details']['T']['dom'] = $this-&gt;mpdf-&gt;cell_border_dominance_T;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;simpleTables && $this-&gt;mpdf-&gt;row == 0 && $this-&gt;mpdf-&gt;col == 0) {&nbsp;</div></li><li><div>                    if (isset($properties['BORDER-LEFT']) && $properties['BORDER-LEFT']) {&nbsp;</div></li><li><div>                        $bord = $this-&gt;mpdf-&gt;border_details($properties['BORDER-LEFT']);&nbsp;</div></li><li><div>                        if ($bord['s']) {&nbsp;</div></li><li><div>                            $table['simple']['border'] = _BORDER_ALL;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $table['simple']['border'] = 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $table['simple']['border_details']['R'] = $bord;&nbsp;</div></li><li><div>                        $table['simple']['border_details']['L'] = $bord;&nbsp;</div></li><li><div>                        $table['simple']['border_details']['T'] = $bord;&nbsp;</div></li><li><div>                        $table['simple']['border_details']['B'] = $bord;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;simpleTables && $this-&gt;mpdf-&gt;row == 0 && $this-&gt;mpdf-&gt;col == 0 && !$table['borders_separate'] && $table['simple']['border']) {&nbsp;</div></li><li><div>                    $table['border_details'] = $table['simple']['border_details'];&nbsp;</div></li><li><div>                    $table['border'] = $table['simple']['border'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Border set on TR (if collapsed only)&nbsp;</div></li><li><div>                if (!$table['borders_separate'] && !$this-&gt;mpdf-&gt;simpleTables && isset($table['trborder-left'][$this-&gt;mpdf-&gt;row])) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;col == 0) {&nbsp;</div></li><li><div>                        $left = $this-&gt;mpdf-&gt;border_details($table['trborder-left'][$this-&gt;mpdf-&gt;row]);&nbsp;</div></li><li><div>                        $c['border_details']['L'] = $left;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_LEFT, $c['border_details']['L']['s']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $c['border_details']['B'] = $this-&gt;mpdf-&gt;border_details($table['trborder-bottom'][$this-&gt;mpdf-&gt;row]);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_BOTTOM, $c['border_details']['B']['s']);&nbsp;</div></li><li><div>                    $c['border_details']['T'] = $this-&gt;mpdf-&gt;border_details($table['trborder-top'][$this-&gt;mpdf-&gt;row]);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($c['border'], _BORDER_TOP, $c['border_details']['T']['s']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;packTableData && !$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                    $c['borderbin'] = $this-&gt;mpdf-&gt;_packCellBorder($c);&nbsp;</div></li><li><div>                    unset($c['border']);&nbsp;</div></li><li><div>                    unset($c['border_details']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['PADDING-LEFT'])) {&nbsp;</div></li><li><div>                    $c['padding']['L'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-LEFT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-RIGHT'])) {&nbsp;</div></li><li><div>                    $c['padding']['R'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-RIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-BOTTOM'])) {&nbsp;</div></li><li><div>                    $c['padding']['B'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-BOTTOM'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($properties['PADDING-TOP'])) {&nbsp;</div></li><li><div>                    $c['padding']['T'] = $this-&gt;mpdf-&gt;ConvertSize($properties['PADDING-TOP'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $w = '';&nbsp;</div></li><li><div>                if (isset($properties['WIDTH'])) {&nbsp;</div></li><li><div>                    $w = $properties['WIDTH'];&nbsp;</div></li><li><div>                } else if (isset($attr['WIDTH'])) {&nbsp;</div></li><li><div>                    $w = $attr['WIDTH'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($w) {&nbsp;</div></li><li><div>                    if (strpos($w, '%') && !$this-&gt;mpdf-&gt;ignore_table_percents) {&nbsp;</div></li><li><div>                        $c['wpercent'] = $w + 0;&nbsp;</div></li><li><div>                    } // makes 80% -&gt; 80&nbsp;</div></li><li><div>                    else if (!strpos($w, '%') && !$this-&gt;mpdf-&gt;ignore_table_widths) {&nbsp;</div></li><li><div>                        $c['w'] = $this-&gt;mpdf-&gt;ConvertSize($w, $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['HEIGHT']) && !strpos($properties['HEIGHT'], '%')) {&nbsp;</div></li><li><div>                    $c['h'] = $this-&gt;mpdf-&gt;ConvertSize($properties['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                } else if (isset($attr['HEIGHT']) && !strpos($attr['HEIGHT'], '%'))&nbsp;</div></li><li><div>                    $c['h'] = $this-&gt;mpdf-&gt;ConvertSize($attr['HEIGHT'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($properties['WHITE-SPACE'])) {&nbsp;</div></li><li><div>                    if (strtoupper($properties['WHITE-SPACE']) == 'NOWRAP') {&nbsp;</div></li><li><div>                        $c['nowrap'] = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($attr['TEXT-ROTATE'])) {&nbsp;</div></li><li><div>                    $c['R'] = $attr['TEXT-ROTATE'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['NOWRAP']) && $attr['NOWRAP'])&nbsp;</div></li><li><div>                    $c['nowrap'] = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col] = $c;&nbsp;</div></li><li><div>                unset($c);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $cs = $rs = 1;&nbsp;</div></li><li><div>                if (isset($attr['COLSPAN']) && $attr['COLSPAN'] &gt; 1)&nbsp;</div></li><li><div>                    $cs = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['colspan'] = $attr['COLSPAN'];&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc'] &lt; $this-&gt;mpdf-&gt;col + $cs) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc'] = $this-&gt;mpdf-&gt;col + $cs;&nbsp;</div></li><li><div>                } // following code moved outside if...&nbsp;</div></li><li><div>                for ($l = $this-&gt;mpdf-&gt;col; $l &lt; $this-&gt;mpdf-&gt;col + $cs; $l++) {&nbsp;</div></li><li><div>                    if ($l - $this-&gt;mpdf-&gt;col)&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$l] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($attr['ROWSPAN']) && $attr['ROWSPAN'] &gt; 1)&nbsp;</div></li><li><div>                    $rs = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['rowspan'] = $attr['ROWSPAN'];&nbsp;</div></li><li><div>                for ($k = $this-&gt;mpdf-&gt;row; $k &lt; $this-&gt;mpdf-&gt;row + $rs; $k++) {&nbsp;</div></li><li><div>                    for ($l = $this-&gt;mpdf-&gt;col; $l &lt; $this-&gt;mpdf-&gt;col + $cs; $l++) {&nbsp;</div></li><li><div>                        if ($k - $this-&gt;mpdf-&gt;row || $l - $this-&gt;mpdf-&gt;col)&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l] = 0;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($table);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            /** -- END TABLES -- */&nbsp;</div></li><li><div>        }//end of switch&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function CloseTag($tag, &$ahtml, &$ihtml)&nbsp;</div></li><li><div>    { // mPDF 6&nbsp;</div></li><li><div>        //Closing tag&nbsp;</div></li><li><div>        if ($tag == 'OPTION') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;selectoption['ACTIVE'] = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TTS' or $tag == 'TTA' or $tag == 'TTZ') {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>            $ltag = strtolower($tag);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;$ltag = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'FONT' || $tag == 'SPAN' || $tag == 'CODE' || $tag == 'KBD' || $tag == 'SAMP' || $tag == 'TT' || $tag == 'VAR' || $tag == 'INS' || $tag == 'STRONG' || $tag == 'CITE' || $tag == 'SUB' || $tag == 'SUP' || $tag == 'S' || $tag == 'STRIKE' || $tag == 'DEL' || $tag == 'Q' || $tag == 'EM' || $tag == 'B' || $tag == 'I' || $tag == 'U' | $tag == 'SMALL' || $tag == 'BIG' || $tag == 'ACRONYM' || $tag == 'MARK' || $tag == 'TIME' || $tag == 'PROGRESS' || $tag == 'METER' || $tag == 'BDO' || $tag == 'BDI'&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $annot = false; // mPDF 6&nbsp;</div></li><li><div>            $bdf = false; // mPDF 6&nbsp;</div></li><li><div>            // mPDF 5.7.3 Inline tags&nbsp;</div></li><li><div>            if ($tag == 'PROGRESS' || $tag == 'METER') {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineProperties[$tag]) && $this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineAnnots[$tag]) && $this-&gt;mpdf-&gt;InlineAnnots[$tag]) {&nbsp;</div></li><li><div>                    $annot = $this-&gt;mpdf-&gt;InlineAnnots[$tag];&nbsp;</div></li><li><div>                } // *ANNOTATIONS*&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;InlineAnnots[$tag]); // *ANNOTATIONS*&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineProperties[$tag]) && count($this-&gt;mpdf-&gt;InlineProperties[$tag])) {&nbsp;</div></li><li><div>                    $tmpProps = array_pop($this-&gt;mpdf-&gt;InlineProperties[$tag]); // mPDF 5.7.4&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;restoreInlineProperties($tmpProps);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineAnnots[$tag]) && count($this-&gt;mpdf-&gt;InlineAnnots[$tag])) {  // *ANNOTATIONS*&nbsp;</div></li><li><div>                    $annot = array_pop($this-&gt;mpdf-&gt;InlineAnnots[$tag]);  // *ANNOTATIONS*&nbsp;</div></li><li><div>                } // *ANNOTATIONS*&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineBDF[$tag]) && count($this-&gt;mpdf-&gt;InlineBDF[$tag])) {  // mPDF 6&nbsp;</div></li><li><div>                    $bdfarr = array_pop($this-&gt;mpdf-&gt;InlineBDF[$tag]);&nbsp;</div></li><li><div>                    $bdf = $bdfarr[0];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- ANNOTATIONS -- */&nbsp;</div></li><li><div>            if ($annot) { // mPDF 6&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) { // *TABLES*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][] = array($annot); // *TABLES*&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                else { // *TABLES*&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;textbuffer[] = array($annot);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END ANNOTATIONS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // mPDF 6 bidi&nbsp;</div></li><li><div>            // mPDF 6 Bidirectional formatting for inline elements&nbsp;</div></li><li><div>            if ($bdf) {&nbsp;</div></li><li><div>                $popf = $this-&gt;mpdf-&gt;_setBidiCodes('end', $bdf);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveCellTextBuffer($popf);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_saveTextBuffer($popf);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } // End of (most) Inline elements eg SPAN&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'METER' || $tag == 'PROGRESS') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;inMeter = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'A') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;HREF = '';&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;InlineProperties['A'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties['A']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;InlineProperties['A']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'LEGEND') {&nbsp;</div></li><li><div>            if (count($this-&gt;mpdf-&gt;textbuffer) && !$this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                $leg = $this-&gt;mpdf-&gt;textbuffer[(count($this-&gt;mpdf-&gt;textbuffer) - 1)];&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;textbuffer[(count($this-&gt;mpdf-&gt;textbuffer) - 1)]);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;textbuffer = array_values($this-&gt;mpdf-&gt;textbuffer);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['border_legend'] = $leg;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['margin_top'] += ($leg[11] / 2) / _MPDFK;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['padding_top'] += ($leg[11] / 2) / _MPDFK;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;InlineProperties['LEGEND'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties['LEGEND']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;InlineProperties['LEGEND']);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = true; //Eliminate exceeding left-side spaces&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** -- FORMS -- */&nbsp;</div></li><li><div>        // *********** FORM ELEMENTS ********************&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TEXTAREA') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;specialcontent = '';&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'SELECT') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            $texto = '';&nbsp;</div></li><li><div>            $OTLdata = false;&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['SELECTED'])) {&nbsp;</div></li><li><div>                $texto = $this-&gt;mpdf-&gt;selectoption['SELECTED'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['SELECTED-OTLDATA'])) {&nbsp;</div></li><li><div>                $OTLdata = $this-&gt;mpdf-&gt;selectoption['SELECTED-OTLDATA'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>                $w = $this-&gt;mpdf-&gt;selectoption['MAXWIDTH'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $w = $this-&gt;mpdf-&gt;GetStringWidth($texto, true, $OTLdata);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($w == 0) {&nbsp;</div></li><li><div>                $w = 5;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $objattr['type'] = 'select';&nbsp;</div></li><li><div>            $objattr['text'] = $texto;&nbsp;</div></li><li><div>            $objattr['OTLdata'] = $OTLdata;&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['NAME'])) {&nbsp;</div></li><li><div>                $objattr['fieldname'] = $this-&gt;mpdf-&gt;selectoption['NAME'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['READONLY'])) {&nbsp;</div></li><li><div>                $objattr['readonly'] = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['REQUIRED'])) {&nbsp;</div></li><li><div>                $objattr['required'] = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['SPELLCHECK'])) {&nbsp;</div></li><li><div>                $objattr['spellcheck'] = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['EDITABLE'])) {&nbsp;</div></li><li><div>                $objattr['editable'] = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['ONCHANGE'])) {&nbsp;</div></li><li><div>                $objattr['onChange'] = $this-&gt;mpdf-&gt;selectoption['ONCHANGE'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['ITEMS'])) {&nbsp;</div></li><li><div>                $objattr['items'] = $this-&gt;mpdf-&gt;selectoption['ITEMS'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['MULTIPLE'])) {&nbsp;</div></li><li><div>                $objattr['multiple'] = $this-&gt;mpdf-&gt;selectoption['MULTIPLE'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['DISABLED'])) {&nbsp;</div></li><li><div>                $objattr['disabled'] = $this-&gt;mpdf-&gt;selectoption['DISABLED'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['TITLE'])) {&nbsp;</div></li><li><div>                $objattr['title'] = $this-&gt;mpdf-&gt;selectoption['TITLE'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['COLOR'])) {&nbsp;</div></li><li><div>                $objattr['color'] = $this-&gt;mpdf-&gt;selectoption['COLOR'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;selectoption['SIZE'])) {&nbsp;</div></li><li><div>                $objattr['size'] = $this-&gt;mpdf-&gt;selectoption['SIZE'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['size']) && $objattr['size'] &gt; 1) {&nbsp;</div></li><li><div>                $rows = $objattr['size'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $rows = 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $objattr['fontfamily'] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>            $objattr['fontsize'] = $this-&gt;mpdf-&gt;FontSizePt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $objattr['width'] = $w + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['select']['outer']['h'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['select']['inner']['h'] * 2) + ($this-&gt;mpdf-&gt;FontSize * 1.4);&nbsp;</div></li><li><div>            $objattr['height'] = ($this-&gt;mpdf-&gt;FontSize * $rows) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['select']['outer']['v'] * 2) + ($this-&gt;mpdf-&gt;mpdfform-&gt;form_element_spacing['select']['inner']['v'] * 2);&nbsp;</div></li><li><div>            $e = &quot;\xbb\xa4\xactype=select, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Clear properties - tidy up&nbsp;</div></li><li><div>            $properties = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Output it to buffers&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;tableLevel) { // *TABLES*&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_saveCellTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $objattr['width']; // *TABLES*&nbsp;</div></li><li><div>            } // *TABLES*&nbsp;</div></li><li><div>            else { // *TABLES*&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_saveTextBuffer($e, $this-&gt;mpdf-&gt;HREF);&nbsp;</div></li><li><div>            } // *TABLES*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;selectoption = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;specialcontent = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;InlineProperties[$tag]) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;InlineProperties[$tag]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END FORMS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // *********** BLOCKS ********************&nbsp;</div></li><li><div>        // mPDF 6  Lists&nbsp;</div></li><li><div>        if ($tag == 'P' || $tag == 'DIV' || $tag == 'H1' || $tag == 'H2' || $tag == 'H3' || $tag == 'H4' || $tag == 'H5' || $tag == 'H6' || $tag == 'PRE' || $tag == 'FORM' || $tag == 'ADDRESS' || $tag == 'BLOCKQUOTE' || $tag == 'CENTER' || $tag == 'DT' || $tag == 'DD' || $tag == 'DL' || $tag == 'CAPTION' || $tag == 'FIELDSET' || $tag == 'UL' || $tag == 'OL' || $tag == 'LI' || $tag == 'ARTICLE' || $tag == 'ASIDE' || $tag == 'FIGURE' || $tag == 'FIGCAPTION' || $tag == 'FOOTER' || $tag == 'HEADER' || $tag == 'HGROUP' || $tag == 'MAIN' || $tag == 'NAV' || $tag == 'SECTION' || $tag == 'DETAILS' || $tag == 'SUMMARY'&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // mPDF 6 bidi&nbsp;</div></li><li><div>            // Block&nbsp;</div></li><li><div>            // If unicode-bidi set, any embedding levels, isolates, or overrides started by this box are closed&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode'])) {&nbsp;</div></li><li><div>                $blockpost = $this-&gt;mpdf-&gt;_setBidiCodes('end', $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode']);&nbsp;</div></li><li><div>                if ($blockpost) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($blockpost);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer($blockpost);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = true; //Eliminate exceeding left-side spaces&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;blockjustfinished = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastblockbottommargin = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['margin_bottom'];&nbsp;</div></li><li><div>            // mPDF 6  Lists&nbsp;</div></li><li><div>            if ($tag == 'UL' || $tag == 'OL') {&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;listlvl &gt; 0 && $this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl]))&nbsp;</div></li><li><div>                        unset($this-&gt;mpdf-&gt;listtype[$this-&gt;mpdf-&gt;listlvl]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;listlvl--;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($tag == 'LI') {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;listitem = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (preg_match('/^H\d/', $tag) && !$this-&gt;mpdf-&gt;tableLevel && !$this-&gt;mpdf-&gt;writingToC) {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;h2toc[$tag]) || isset($this-&gt;mpdf-&gt;h2bookmarks[$tag])) {&nbsp;</div></li><li><div>                    $content = '';&nbsp;</div></li><li><div>                    if (count($this-&gt;mpdf-&gt;textbuffer) == 1) {&nbsp;</div></li><li><div>                        $content = $this-&gt;mpdf-&gt;textbuffer[0][0];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        for ($i = 0; $i &lt; count($this-&gt;mpdf-&gt;textbuffer); $i++) {&nbsp;</div></li><li><div>                            if (substr($this-&gt;mpdf-&gt;textbuffer[$i][0], 0, 3) != &quot;\xbb\xa4\xac&quot;) { //inline object&nbsp;</div></li><li><div>                                $content .= $this-&gt;mpdf-&gt;textbuffer[$i][0];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- TOC -- */&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;h2toc[$tag])) {&nbsp;</div></li><li><div>                        $objattr = array();&nbsp;</div></li><li><div>                        $objattr['type'] = 'toc';&nbsp;</div></li><li><div>                        $objattr['toclevel'] = $this-&gt;mpdf-&gt;h2toc[$tag];&nbsp;</div></li><li><div>                        $objattr['CONTENT'] = htmlspecialchars($content);&nbsp;</div></li><li><div>                        $e = &quot;\xbb\xa4\xactype=toc, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                        array_unshift($this-&gt;mpdf-&gt;textbuffer, array($e));&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END TOC -- */&nbsp;</div></li><li><div>                    /** -- BOOKMARKS -- */&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;h2bookmarks[$tag])) {&nbsp;</div></li><li><div>                        $objattr = array();&nbsp;</div></li><li><div>                        $objattr['type'] = 'bookmark';&nbsp;</div></li><li><div>                        $objattr['bklevel'] = $this-&gt;mpdf-&gt;h2bookmarks[$tag];&nbsp;</div></li><li><div>                        $objattr['CONTENT'] = $content;&nbsp;</div></li><li><div>                        $e = &quot;\xbb\xa4\xactype=toc, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                        array_unshift($this-&gt;mpdf-&gt;textbuffer, array($e));&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    /** -- END BOOKMARKS -- */&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- TABLES -- */&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;linebreakjustfinished) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blockjustfinished = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;InlineProperties['BLOCKINTABLE'])) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;InlineProperties['BLOCKINTABLE']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;InlineProperties['BLOCKINTABLE']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    unset($this-&gt;mpdf-&gt;InlineProperties['BLOCKINTABLE']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($tag == 'PRE') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;ispre = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END TABLES -- */&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;divbegin = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;linebreakjustfinished = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;lMargin + $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['outer_left_margin'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- CSS-FLOAT -- */&nbsp;</div></li><li><div>            // If float contained in a float, need to extend bottom to allow for it&nbsp;</div></li><li><div>            $currpos = $this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_endpos']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_endpos'] &gt; $currpos) {&nbsp;</div></li><li><div>                $old_page = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                $new_page = intval($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_endpos'] / 1000);&nbsp;</div></li><li><div>                if ($old_page != $new_page) {&nbsp;</div></li><li><div>                    $s = $this-&gt;mpdf-&gt;PrintPageBackgrounds();&nbsp;</div></li><li><div>                    // Writes after the marker so not overwritten later by page background etc.&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page] = preg_replace('/(___BACKGROUND___PATTERNS' . $this-&gt;mpdf-&gt;uniqstr . ')/', '\\1' . &quot;\n&quot; . $s . &quot;\n&quot;, $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page]);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;pageBackgrounds = array();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;page = $new_page;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;ResetMargins();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;y = (($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_endpos'] * 1000) % 1000000) / 1000; // mod changes operands to integers before processing&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END CSS-FLOAT -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //Print content&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;lastblocklevelchange == 1) {&nbsp;</div></li><li><div>                $blockstate = 3;&nbsp;</div></li><li><div>            } // Top & bottom margins/padding&nbsp;</div></li><li><div>            else if ($this-&gt;mpdf-&gt;lastblocklevelchange == -1) {&nbsp;</div></li><li><div>                $blockstate = 2;&nbsp;</div></li><li><div>            } // Bottom margins/padding only&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $blockstate = 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // called from after e.g. &lt;/table&gt; &lt;/div&gt; &lt;/div&gt; ...    Outputs block margin/border and padding&nbsp;</div></li><li><div>            if (count($this-&gt;mpdf-&gt;textbuffer) && $this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1]) {&nbsp;</div></li><li><div>                if (substr($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0], 0, 3) != &quot;\xbb\xa4\xac&quot;) { // not special content&nbsp;</div></li><li><div>                    // Right trim last content and adjust OTLdata&nbsp;</div></li><li><div>                    if (preg_match('/[ ]+$/', $this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0], $m)) {&nbsp;</div></li><li><div>                        $strip = strlen($m[0]);&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0] = substr($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0], 0, (strlen($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][0]) - $strip));&nbsp;</div></li><li><div>                        /** -- OTL -- */&nbsp;</div></li><li><div>                        if (isset($this-&gt;mpdf-&gt;CurrentFont['useOTL']) && $this-&gt;mpdf-&gt;CurrentFont['useOTL']) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;otl-&gt;trimOTLdata($this-&gt;mpdf-&gt;textbuffer[count($this-&gt;mpdf-&gt;textbuffer) - 1][18], false, true); // mPDF 6  ZZZ99K&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        /** -- END OTL -- */&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (count($this-&gt;mpdf-&gt;textbuffer) == 0 && $this-&gt;mpdf-&gt;lastblocklevelchange != 0) {&nbsp;</div></li><li><div>                //$this-&gt;mpdf-&gt;newFlowingBlock( $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['width'], $this-&gt;mpdf-&gt;lineheight, '', false, 2, true, (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction']) ? $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'] : 'ltr'));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;newFlowingBlock($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['width'], $this-&gt;mpdf-&gt;lineheight, '', false, $blockstate, true, (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction']) ? $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'] : 'ltr'));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;finishFlowingBlock(true); // true = END of flowing block&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;PaintDivBB('', $blockstate);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;printbuffer($this-&gt;mpdf-&gt;textbuffer, $blockstate);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;textbuffer = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;kwt) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;kwt_height = $this-&gt;mpdf-&gt;y - $this-&gt;mpdf-&gt;kwt_y0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;printfloatbuffer();&nbsp;</div></li><li><div>            /** -- END CSS-IMAGE-FLOAT -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($tag == 'PRE') {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ispre = false;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** -- CSS-FLOAT -- */&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float'] == 'R') {&nbsp;</div></li><li><div>                // If width not set, here would need to adjust and output buffer&nbsp;</div></li><li><div>                $s = $this-&gt;mpdf-&gt;PrintPageBackgrounds();&nbsp;</div></li><li><div>                // Writes after the marker so not overwritten later by page background etc.&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page] = preg_replace('/(___BACKGROUND___PATTERNS' . $this-&gt;mpdf-&gt;uniqstr . ')/', '\\1' . &quot;\n&quot; . $s . &quot;\n&quot;, $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page]);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageBackgrounds = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                for ($i = ($this-&gt;mpdf-&gt;blklvl - 1); $i &gt;= 0; $i--) {&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;blk[$i]['float_endpos'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$i]['float_endpos'] = max($this-&gt;mpdf-&gt;blk[$i]['float_endpos'], ($this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$i]['float_endpos'] = $this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;floatDivs[] = array(&nbsp;</div></li><li><div>                    'side' =&gt; 'R', &nbsp;</div></li><li><div>                    'startpage' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'], &nbsp;</div></li><li><div>                    'y0' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y'], &nbsp;</div></li><li><div>                    'startpos' =&gt; ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'] * 1000 + $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y']), &nbsp;</div></li><li><div>                    'endpage' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>                    'y1' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>                    'endpos' =&gt; ($this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y), &nbsp;</div></li><li><div>                    'w' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_width'], &nbsp;</div></li><li><div>                    'blklvl' =&gt; $this-&gt;mpdf-&gt;blklvl, &nbsp;</div></li><li><div>                    'blockContext' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['blockContext']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;y = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;page = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ResetMargins();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float'] == 'L') {&nbsp;</div></li><li><div>                // If width not set, here would need to adjust and output buffer&nbsp;</div></li><li><div>                $s = $this-&gt;mpdf-&gt;PrintPageBackgrounds();&nbsp;</div></li><li><div>                // Writes after the marker so not overwritten later by page background etc.&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page] = preg_replace('/(___BACKGROUND___PATTERNS' . $this-&gt;mpdf-&gt;uniqstr . ')/', '\\1' . &quot;\n&quot; . $s . &quot;\n&quot;, $this-&gt;mpdf-&gt;pages[$this-&gt;mpdf-&gt;page]);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageBackgrounds = array();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                for ($i = ($this-&gt;mpdf-&gt;blklvl - 1); $i &gt;= 0; $i--) {&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;blk[$i]['float_endpos'])) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$i]['float_endpos'] = max($this-&gt;mpdf-&gt;blk[$i]['float_endpos'], ($this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;blk[$i]['float_endpos'] = $this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;floatDivs[] = array(&nbsp;</div></li><li><div>                    'side' =&gt; 'L', &nbsp;</div></li><li><div>                    'startpage' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'], &nbsp;</div></li><li><div>                    'y0' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y'], &nbsp;</div></li><li><div>                    'startpos' =&gt; ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'] * 1000 + $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y']), &nbsp;</div></li><li><div>                    'endpage' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>                    'y1' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>                    'endpos' =&gt; ($this-&gt;mpdf-&gt;page * 1000 + $this-&gt;mpdf-&gt;y), &nbsp;</div></li><li><div>                    'w' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_width'], &nbsp;</div></li><li><div>                    'blklvl' =&gt; $this-&gt;mpdf-&gt;blklvl, &nbsp;</div></li><li><div>                    'blockContext' =&gt; $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['blockContext']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;y = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['float_start_y'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;page = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['startpage'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ResetMargins();&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END CSS-FLOAT -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['visibility']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['visibility'] != 'visible') {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetVisibility('visible');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['page_break_after'])) {&nbsp;</div></li><li><div>                $page_break_after = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['page_break_after'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $page_break_after = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //Reset values&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['z-index']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['z-index'] &gt; 0) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;EndLayer();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // mPDF 6 page-break-inside:avoid&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['keep_block_together']) {&nbsp;</div></li><li><div>                $movepage = false;&nbsp;</div></li><li><div>                // If page-break-inside:avoid section has broken to new page but fits on one side - then move:&nbsp;</div></li><li><div>                if (($this-&gt;mpdf-&gt;page - $this-&gt;mpdf-&gt;kt_p00) == 1 && $this-&gt;mpdf-&gt;y &lt; $this-&gt;mpdf-&gt;kt_y00) {&nbsp;</div></li><li><div>                    $movepage = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (($this-&gt;mpdf-&gt;page - $this-&gt;mpdf-&gt;kt_p00) &gt; 0) {&nbsp;</div></li><li><div>                    for ($i = $this-&gt;mpdf-&gt;page; $i &gt; $this-&gt;mpdf-&gt;kt_p00; $i--) {&nbsp;</div></li><li><div>                        if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bb_painted'][$i])) {&nbsp;</div></li><li><div>                            unset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bb_painted'][$i]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['marginCorrected'][$i])) {&nbsp;</div></li><li><div>                            unset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['marginCorrected'][$i]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;mpdf-&gt;pageoutput[$i])) {&nbsp;</div></li><li><div>                            unset($this-&gt;mpdf-&gt;pageoutput[$i]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;page = $this-&gt;mpdf-&gt;kt_p00;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;keep_block_together = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;pageoutput[$this-&gt;mpdf-&gt;page] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;y = $this-&gt;mpdf-&gt;kt_y00;&nbsp;</div></li><li><div>                $ihtml = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['array_i'] - 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $ahtml[$ihtml + 1] .= ' pagebreakavoidchecked=&quot;true&quot;;'; // avoid re-iterating; read in OpenTag()&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;blklvl--;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                for ($blklvl = 1; $blklvl &lt;= $this-&gt;mpdf-&gt;blklvl; $blklvl++) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$blklvl]['y0'] = $this-&gt;mpdf-&gt;blk[$blklvl]['initial_y0'];&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$blklvl]['x0'] = $this-&gt;mpdf-&gt;blk[$blklvl]['initial_x0'];&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$blklvl]['startpage'] = $this-&gt;mpdf-&gt;blk[$blklvl]['initial_startpage'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['x0'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['x0'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;lMargin;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;lastblocklevelchange = 0;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ResetMargins();&nbsp;</div></li><li><div>                if ($movepage) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;blklvl &gt; 0) { // ==0 SHOULDN'T HAPPEN - NOT XHTML&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['tag'] == $tag) {&nbsp;</div></li><li><div>                    unset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blklvl--;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //else { echo $tag; exit; }    // debug - forces error if incorrectly nested html tags&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastblocklevelchange = -1;&nbsp;</div></li><li><div>            // Reset Inline-type properties&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['InlineProperties'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['InlineProperties']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;lMargin + $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['outer_left_margin'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (!$this-&gt;mpdf-&gt;tableLevel && $page_break_after) {&nbsp;</div></li><li><div>                $save_blklvl = $this-&gt;mpdf-&gt;blklvl;&nbsp;</div></li><li><div>                $save_blk = $this-&gt;mpdf-&gt;blk;&nbsp;</div></li><li><div>                $save_silp = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $save_ilp = $this-&gt;mpdf-&gt;InlineProperties;&nbsp;</div></li><li><div>                $save_bflp = $this-&gt;mpdf-&gt;InlineBDF;&nbsp;</div></li><li><div>                $save_bflpc = $this-&gt;mpdf-&gt;InlineBDFctr; // mPDF 6&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $startpage = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                $pagebreaktype = $this-&gt;mpdf-&gt;defaultPagebreakType;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_preForcedPagebreak($pagebreaktype);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($page_break_after == 'RIGHT') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-ODD', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                } else if ($page_break_after == 'LEFT') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-EVEN', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, '', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_postForcedPagebreak($pagebreaktype, $startpage, $save_blk, $save_blklvl);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = $save_ilp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = $save_bflp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = $save_bflpc; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($save_silp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 6 bidi&nbsp;</div></li><li><div>            // Block&nbsp;</div></li><li><div>            // If unicode-bidi set, any embedding levels, isolates, or overrides reopened in the continuing block&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode'])) {&nbsp;</div></li><li><div>                $blockpre = $this-&gt;mpdf-&gt;_setBidiCodes('start', $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['bidicode']);&nbsp;</div></li><li><div>                if ($blockpre) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;OTLdata = array();&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveCellTextBuffer($blockpre);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;_saveTextBuffer($blockpre);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** -- TABLES -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TH')&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetStyle('B', false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (($tag == 'TH' or $tag == 'TD') && $this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = 'TR';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>            if (!$this-&gt;mpdf-&gt;tdbegin) {&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tdbegin = false;&nbsp;</div></li><li><div>            // Added for correct calculation of cell column width - otherwise misses the last line if not end &lt;/p&gt; etc.&nbsp;</div></li><li><div>            if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                if (!is_array($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col])) {&nbsp;</div></li><li><div>                    throw new MpdfException(&quot;You may have an error in your HTML code e.g. &lt;/td&gt;&lt;/td&gt;&quot;);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>            } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Remove last &lt;br&gt; if at end of cell&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'])) {&nbsp;</div></li><li><div>                $ntb = count($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer']);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $ntb = 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($ntb &gt; 1 && $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][$ntb - 1][0] == &quot;\n&quot;) {&nbsp;</div></li><li><div>                unset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['textbuffer'][$ntb - 1]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead'][$this-&gt;mpdf-&gt;row] = true;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['headernrows'] = max($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['headernrows'], ($this-&gt;mpdf-&gt;row + 1));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'][$this-&gt;mpdf-&gt;row] = true;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;tableLevel == 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['footernrows'] = max($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['footernrows'], ($this-&gt;mpdf-&gt;row + 1 - $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['headernrows']));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TR' && $this-&gt;mpdf-&gt;tableLevel) {&nbsp;</div></li><li><div>            // If Border set on TR - Update right border&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-left'][$this-&gt;mpdf-&gt;row])) {&nbsp;</div></li><li><div>                $c = & $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col];&nbsp;</div></li><li><div>                if ($c) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;packTableData) {&nbsp;</div></li><li><div>                        $cell = $this-&gt;mpdf-&gt;_unpackCellBorder($c['borderbin']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $cell = $c;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $cell['border_details']['R'] = $this-&gt;mpdf-&gt;border_details($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trborder-right'][$this-&gt;mpdf-&gt;row]);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;setBorder($cell['border'], _BORDER_RIGHT, $cell['border_details']['R']['s']);&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;packTableData) {&nbsp;</div></li><li><div>                        $c['borderbin'] = $this-&gt;mpdf-&gt;_packCellBorder($cell);&nbsp;</div></li><li><div>                        unset($c['border']);&nbsp;</div></li><li><div>                        unset($c['border_details']);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $c = $cell;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;trow_text_rotate = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tabletheadjustfinished = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TBODY') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'THEAD') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tablethead = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tabletheadjustfinished = true;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ResetStyles();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;thead_font_weight = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;thead_font_style = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;thead_font_smCaps = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;thead_valign_default = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;thead_textalign_default = '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TFOOT') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tabletfoot = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ResetStyles();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tfoot_font_weight = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tfoot_font_style = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tfoot_font_smCaps = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tfoot_valign_default = '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tfoot_textalign_default = '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag == 'TABLE') { // TABLE-END (&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastoptionaltag = '';&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS[$this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl]);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl--;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ignorefollowingspaces = true; //Eliminate exceeding left-side spaces&nbsp;</div></li><li><div>            // mPDF 5.7.3&nbsp;</div></li><li><div>            // In case a colspan (on a row after first row) exceeded number of columns in table&nbsp;</div></li><li><div>            for ($k = 0; $k &lt; $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nr']; $k++) {&nbsp;</div></li><li><div>                for ($l = 0; $l &lt; $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc']; $l++) {&nbsp;</div></li><li><div>                    if (!isset($this-&gt;mpdf-&gt;cell[$k][$l])) {&nbsp;</div></li><li><div>                        for ($n = $l - 1; $n &gt;= 0; $n--) {&nbsp;</div></li><li><div>                            if (isset($this-&gt;mpdf-&gt;cell[$k][$n]) && $this-&gt;mpdf-&gt;cell[$k][$n] != 0) {&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;cell[$k][$l] = array(&nbsp;</div></li><li><div>                            'a' =&gt; 'C', &nbsp;</div></li><li><div>                            'va' =&gt; 'M', &nbsp;</div></li><li><div>                            'R' =&gt; false, &nbsp;</div></li><li><div>                            'nowrap' =&gt; false, &nbsp;</div></li><li><div>                            'bgcolor' =&gt; false, &nbsp;</div></li><li><div>                            'padding' =&gt; array('L' =&gt; false, 'R' =&gt; false, 'T' =&gt; false, 'B' =&gt; false), &nbsp;</div></li><li><div>                            'gradient' =&gt; false, &nbsp;</div></li><li><div>                            's' =&gt; 0, &nbsp;</div></li><li><div>                            'maxs' =&gt; 0, &nbsp;</div></li><li><div>                            'textbuffer' =&gt; array(), &nbsp;</div></li><li><div>                            'dfs' =&gt; $this-&gt;mpdf-&gt;FontSize, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border'] = 0;&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border_details']['R'] = array('s' =&gt; 0, 'w' =&gt; 0, 'c' =&gt; false, 'style' =&gt; 'none', 'dom' =&gt; 0);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border_details']['L'] = array('s' =&gt; 0, 'w' =&gt; 0, 'c' =&gt; false, 'style' =&gt; 'none', 'dom' =&gt; 0);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border_details']['T'] = array('s' =&gt; 0, 'w' =&gt; 0, 'c' =&gt; false, 'style' =&gt; 'none', 'dom' =&gt; 0);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border_details']['B'] = array('s' =&gt; 0, 'w' =&gt; 0, 'c' =&gt; false, 'style' =&gt; 'none', 'dom' =&gt; 0);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;cell[$k][$l]['border_details']['mbw'] = array('BL' =&gt; 0, 'BR' =&gt; 0, 'RT' =&gt; 0, 'RB' =&gt; 0, 'TL' =&gt; 0, 'TR' =&gt; 0, 'LT' =&gt; 0, 'LB' =&gt; 0);&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;packTableData) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;cell[$k][$l]['borderbin'] = $this-&gt;mpdf-&gt;_packCellBorder($this-&gt;mpdf-&gt;cell[$k][$l]);&nbsp;</div></li><li><div>                                unset($this-&gt;mpdf-&gt;cell[$k][$l]['border']);&nbsp;</div></li><li><div>                                unset($this-&gt;mpdf-&gt;cell[$k][$l]['border_details']);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cells'] = $this-&gt;mpdf-&gt;cell;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['wc'] = array_pad(array(), $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nc'], array('miw' =&gt; 0, 'maw' =&gt; 0));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['hr'] = array_pad(array(), $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nr'], 0);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Move table footer &lt;tfoot&gt; row to end of table&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) && count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'])) {&nbsp;</div></li><li><div>                $tfrows = array();&nbsp;</div></li><li><div>                foreach ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'] AS $r =&gt; $val) {&nbsp;</div></li><li><div>                    if ($val) {&nbsp;</div></li><li><div>                        $tfrows[] = $r;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $temp = array();&nbsp;</div></li><li><div>                $temptf = array();&nbsp;</div></li><li><div>                foreach ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cells'] AS $k =&gt; $row) {&nbsp;</div></li><li><div>                    if (in_array($k, $tfrows)) {&nbsp;</div></li><li><div>                        $temptf[] = $row;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $temp[] = $row;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'] = array();&nbsp;</div></li><li><div>                for ($i = count($temp); $i &lt; (count($temp) + count($temptf)); $i++) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot'][$i] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // Update nestedpos row references&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;table[($this-&gt;mpdf-&gt;tableLevel + 1)]) && count($this-&gt;mpdf-&gt;table[($this-&gt;mpdf-&gt;tableLevel + 1)])) {&nbsp;</div></li><li><div>                    foreach ($this-&gt;mpdf-&gt;table[($this-&gt;mpdf-&gt;tableLevel + 1)] AS $nid =&gt; $nested) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[($this-&gt;mpdf-&gt;tableLevel + 1)][$nid]['nestedpos'][0] -= count($temptf);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cells'] = array_merge($temp, $temptf);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Update other arays set on row number&nbsp;</div></li><li><div>                // [trbackground-images] [trgradients]&nbsp;</div></li><li><div>                $temptrbgi = array();&nbsp;</div></li><li><div>                $temptrbgg = array();&nbsp;</div></li><li><div>                $temptrbgc = array();&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][-1])) {&nbsp;</div></li><li><div>                    $temptrbgc[-1] = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][-1];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                for ($k = 0; $k &lt; $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nr']; $k++) {&nbsp;</div></li><li><div>                    if (!in_array($k, $tfrows)) {&nbsp;</div></li><li><div>                        $temptrbgi[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'][$k] : null);&nbsp;</div></li><li><div>                        $temptrbgg[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'][$k] : null);&nbsp;</div></li><li><div>                        $temptrbgc[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$k] : null);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                for ($k = 0; $k &lt; $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['nr']; $k++) {&nbsp;</div></li><li><div>                    if (in_array($k, $tfrows)) {&nbsp;</div></li><li><div>                        $temptrbgi[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'][$k] : null);&nbsp;</div></li><li><div>                        $temptrbgg[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'][$k] : null);&nbsp;</div></li><li><div>                        $temptrbgc[] = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$k]) ? $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'][$k] : null);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trbackground-images'] = $temptrbgi;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['trgradients'] = $temptrbgg;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['bgcolor'] = $temptrbgc;&nbsp;</div></li><li><div>                // Should Update all other arays set on row number, but cell properties have been set so not needed&nbsp;</div></li><li><div>                // [bgcolor] [trborder-left] [trborder-right] [trborder-top] [trborder-bottom]&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['direction'] == 'rtl') {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_reverseTableDir($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Fix Borders *********************************************&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_fixTableBorders($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table_rotate = 0;&nbsp;</div></li><li><div>            } // *COLUMNS*&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;table_rotate &lt;&gt; 0) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tablebuffer = '';&nbsp;</div></li><li><div>                // Max width for rotated table&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 1);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tbrot_maxh = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'];  // Max width for rotated table&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tbrot_align = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['a'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;shrin_k = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;shrink_tables_to_fit &lt; 1) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;shrink_tables_to_fit = 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (!$this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;shrink_this_table_to_fit = $this-&gt;mpdf-&gt;shrink_tables_to_fit;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;tableLevel &gt; 1) {&nbsp;</div></li><li><div>                // deal with nested table&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]], true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $tmiw = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['miw'];&nbsp;</div></li><li><div>                $tmaw = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['maw'];&nbsp;</div></li><li><div>                $tl = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['tl'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Go down to lower table level&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tableLevel--;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Reset lower level table&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;base_table_properties = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['baseProperties'];&nbsp;</div></li><li><div>                // mPDF 5.7.3&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;default_font = $this-&gt;mpdf-&gt;base_table_properties['FONT-FAMILY'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont($this-&gt;mpdf-&gt;default_font, '', 0, false);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;default_font_size = $this-&gt;mpdf-&gt;ConvertSize($this-&gt;mpdf-&gt;base_table_properties['FONT-SIZE']) * (_MPDFK);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFontSize($this-&gt;mpdf-&gt;default_font_size, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cells'];&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;cell['PARENTCELL'])) {&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;cell['PARENTCELL']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;cell['PARENTCELL']);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    unset($this-&gt;mpdf-&gt;cell['PARENTCELL']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;row = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['currrow'];&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;col = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['currcol'];&nbsp;</div></li><li><div>                $objattr = array();&nbsp;</div></li><li><div>                $objattr['type'] = 'nestedtable';&nbsp;</div></li><li><div>                $objattr['nestedcontent'] = $this-&gt;mpdf-&gt;tbctr[($this-&gt;mpdf-&gt;tableLevel + 1)];&nbsp;</div></li><li><div>                $objattr['table'] = $this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel];&nbsp;</div></li><li><div>                $objattr['row'] = $this-&gt;mpdf-&gt;row;&nbsp;</div></li><li><div>                $objattr['col'] = $this-&gt;mpdf-&gt;col;&nbsp;</div></li><li><div>                $objattr['level'] = $this-&gt;mpdf-&gt;tableLevel;&nbsp;</div></li><li><div>                $e = &quot;\xbb\xa4\xactype=nestedtable, objattr=&quot; . serialize($objattr) . &quot;\xbb\xa4\xac&quot;;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_saveCellTextBuffer($e);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] += $tl;&nbsp;</div></li><li><div>                if (!isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                } elseif ($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] &lt; $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s']) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['maxs'] = $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['s'] = 0; // reset&nbsp;</div></li><li><div>                if ((isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmaw']) && $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmaw'] &lt; $tmaw) || !isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmaw'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmaw'] = $tmaw;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ((isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmiw']) && $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmiw'] &lt; $tmiw) || !isset($this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmiw'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;cell[$this-&gt;mpdf-&gt;row][$this-&gt;mpdf-&gt;col]['nestedmiw'] = $tmiw;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;tdbegin = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;nestedtablejustfinished = true;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;ignorefollowingspaces = true;&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginL = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginR = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginT = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginB = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingL = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingR = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingT = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingB = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;table[1][1]['overflow']) && $this-&gt;mpdf-&gt;table[1][1]['overflow'] == 'visible') {&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;kwt || $this-&gt;mpdf-&gt;table_rotate || $this-&gt;mpdf-&gt;table_keep_together || $this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_rotate = 0;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_keep_together = false;&nbsp;</div></li><li><div>                    //throw new MpdfException(&quot;mPDF Warning: You cannot use CSS overflow:visible together with any of these functions: 'Keep-with-table', rotated tables, page-break-inside:avoid, or columns&quot;);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[1][1], true);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_tableWidth($this-&gt;mpdf-&gt;table[1][1]);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                if (!$this-&gt;mpdf-&gt;kwt_saved) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_height = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                list($check, $tablemiw) = $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[1][1], true);&nbsp;</div></li><li><div>                $save_table = $this-&gt;mpdf-&gt;table;&nbsp;</div></li><li><div>                $reset_to_minimum_width = false;&nbsp;</div></li><li><div>                $added_page = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($check &gt; 1) {&nbsp;</div></li><li><div>                    if ($check &gt; $this-&gt;mpdf-&gt;shrink_this_table_to_fit && $this-&gt;mpdf-&gt;table_rotate) {&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $added_page = true;&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                        //$check = $tablemiw/$this-&gt;mpdf-&gt;tbrot_maxw;     // undo any shrink&nbsp;</div></li><li><div>                        $check = 1;  // undo any shrink&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $reset_to_minimum_width = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($reset_to_minimum_width) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrin_k = $check;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;default_font_size /= $this-&gt;mpdf-&gt;shrin_k;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFontSize($this-&gt;mpdf-&gt;default_font_size, false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrinkTable($this-&gt;mpdf-&gt;table[1][1], $this-&gt;mpdf-&gt;shrin_k);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[1][1], false); // repeat&nbsp;</div></li><li><div>                    // Starting at $this-&gt;mpdf-&gt;innermostTableLevel&nbsp;</div></li><li><div>                    // Shrink table values - and redo columnWidth&nbsp;</div></li><li><div>                    for ($lvl = 2; $lvl &lt;= $this-&gt;mpdf-&gt;innermostTableLevel; $lvl++) {&nbsp;</div></li><li><div>                        for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;shrinkTable($this-&gt;mpdf-&gt;table[$lvl][$nid], $this-&gt;mpdf-&gt;shrin_k);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[$lvl][$nid], false);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Set table cell widths for top level table&nbsp;</div></li><li><div>                // Use $shrin_k to resize but don't change again&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetLineHeight('', $this-&gt;mpdf-&gt;table[1][1]['cellLineHeight']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Top level table&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_tableWidth($this-&gt;mpdf-&gt;table[1][1]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Now work through any nested tables setting child table[w'] = parent cell['w']&nbsp;</div></li><li><div>            // Now do nested tables _tableWidth&nbsp;</div></li><li><div>            for ($lvl = 2; $lvl &lt;= $this-&gt;mpdf-&gt;innermostTableLevel; $lvl++) {&nbsp;</div></li><li><div>                for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                    // HERE set child table width = cell width&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    list($parentrow, $parentcol, $parentnid) = $this-&gt;mpdf-&gt;table[$lvl][$nid]['nestedpos'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $c = & $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['cells'][$parentrow][$parentcol];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (isset($c['colspan']) && $c['colspan'] &gt; 1) {&nbsp;</div></li><li><div>                        $parentwidth = 0;&nbsp;</div></li><li><div>                        for ($cs = 0; $cs &lt; $c['colspan']; $cs++) {&nbsp;</div></li><li><div>                            $parentwidth += $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['wc'][$parentcol + $cs];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $parentwidth = $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['wc'][$parentcol];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    //$parentwidth -= ALLOW FOR PADDING ETC.in parent cell&nbsp;</div></li><li><div>                    if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;packTableData) {&nbsp;</div></li><li><div>                            list($bt, $br, $bb, $bl) = $this-&gt;mpdf-&gt;_getBorderWidths($c['borderbin']);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $br = $c['border_details']['R']['w'];&nbsp;</div></li><li><div>                            $bl = $c['border_details']['L']['w'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;table[$lvl - 1][$parentnid]['borders_separate']) {&nbsp;</div></li><li><div>                            $parentwidth -= $br + $bl + $c['padding']['L'] + $c['padding']['R'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['border_spacing_H'];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $parentwidth -= $br / 2 + $bl / 2 + $c['padding']['L'] + $c['padding']['R'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;table[$lvl - 1][$parentnid]['borders_separate']) {&nbsp;</div></li><li><div>                            $parentwidth -= $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['L']['w'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['R']['w'] + $c['padding']['L'] + $c['padding']['R'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['border_spacing_H'];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $parentwidth -= $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['L']['w'] / 2 + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['R']['w'] / 2 + $c['padding']['L'] + $c['padding']['R'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;table[$lvl][$nid]['wpercent']) && $this-&gt;mpdf-&gt;table[$lvl][$nid]['wpercent'] && $lvl &gt; 1) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $parentwidth;&nbsp;</div></li><li><div>                    } else if ($parentwidth &gt; $this-&gt;mpdf-&gt;table[$lvl][$nid]['maw']) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $this-&gt;mpdf-&gt;table[$lvl][$nid]['maw'];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $parentwidth;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    unset($c);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_tableWidth($this-&gt;mpdf-&gt;table[$lvl][$nid]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Starting at $this-&gt;mpdf-&gt;innermostTableLevel&nbsp;</div></li><li><div>            // Cascade back up nested tables: setting heights back up the tree&nbsp;</div></li><li><div>            for ($lvl = $this-&gt;mpdf-&gt;innermostTableLevel; $lvl &gt; 0; $lvl--) {&nbsp;</div></li><li><div>                for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                    list($tableheight, $maxrowheight, $fullpage, $remainingpage, $maxfirstrowheight) = $this-&gt;mpdf-&gt;_tableHeight($this-&gt;mpdf-&gt;table[$lvl][$nid]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;table[1][1]['overflow'] == 'visible') {&nbsp;</div></li><li><div>                if ($maxrowheight &gt; $fullpage) {&nbsp;</div></li><li><div>                    throw new MpdfException(&quot;mPDF Warning: A Table row is greater than available height. You cannot use CSS overflow:visible&quot;);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($maxfirstrowheight &gt; $remainingpage) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $r = 0;&nbsp;</div></li><li><div>                $c = 0;&nbsp;</div></li><li><div>                $p = 0;&nbsp;</div></li><li><div>                $y = 0;&nbsp;</div></li><li><div>                $finished = false;&nbsp;</div></li><li><div>                while (!$finished) {&nbsp;</div></li><li><div>                    list($finished, $r, $c, $p, $y, $y0) = $this-&gt;mpdf-&gt;_tableWrite($this-&gt;mpdf-&gt;table[1][1], true, $r, $c, $p, $y);&nbsp;</div></li><li><div>                    if (!$finished) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                        // If printed something on first spread, set same y&nbsp;</div></li><li><div>                        if ($r == 0 && $y0 &gt; -1) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;y = $y0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $recalculate = 1;&nbsp;</div></li><li><div>                $forcerecalc = false;&nbsp;</div></li><li><div>                // RESIZING ALGORITHM&nbsp;</div></li><li><div>                if ($maxrowheight &gt; $fullpage) {&nbsp;</div></li><li><div>                    $recalculate = $this-&gt;mpdf-&gt;tbsqrt($maxrowheight / $fullpage, 1);&nbsp;</div></li><li><div>                    $forcerecalc = true;&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;table_rotate) { // NB $remainingpage == $fullpage == the width of the page&nbsp;</div></li><li><div>                    if ($tableheight &gt; $remainingpage) {&nbsp;</div></li><li><div>                        // If can fit on remainder of page whilst respecting autsize value..&nbsp;</div></li><li><div>                        if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, 1)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                            $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, 1);&nbsp;</div></li><li><div>                        } else if (!$added_page) {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $added_page = true;&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                            // 0.001 to force it to recalculate&nbsp;</div></li><li><div>                            $recalculate = (1 / $this-&gt;mpdf-&gt;shrin_k) + 0.001;  // undo any shrink&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $recalculate = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;table_keep_together || ($this-&gt;mpdf-&gt;table[1][1]['nr'] == 1 && !$this-&gt;mpdf-&gt;writingHTMLfooter)) {&nbsp;</div></li><li><div>                    if ($tableheight &gt; $fullpage) {&nbsp;</div></li><li><div>                        if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, 1)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                            $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, 1);&nbsp;</div></li><li><div>                        } else if ($this-&gt;mpdf-&gt;tableMinSizePriority) {&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;table_keep_together = false;&nbsp;</div></li><li><div>                            $recalculate = 1.001;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $added_page = true;&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                            $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, 1);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($tableheight &gt; $remainingpage) {&nbsp;</div></li><li><div>                        // If can fit on remainder of page whilst respecting autsize value..&nbsp;</div></li><li><div>                        if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, 1)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                            $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, 1);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin) {&nbsp;</div></li><li><div>                                // mPDF 6&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;AcceptPageBreak()) {&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                } else if ($this-&gt;mpdf-&gt;ColActive && $tableheight &gt; (($this-&gt;mpdf-&gt;h - $this-&gt;mpdf-&gt;bMargin) - $this-&gt;mpdf-&gt;y0)) {&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $added_page = true;&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                            $recalculate = 1.001;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $recalculate = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $recalculate = 1;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($recalculate &gt; $this-&gt;mpdf-&gt;shrink_this_table_to_fit && !$forcerecalc) {&nbsp;</div></li><li><div>                    $recalculate = $this-&gt;mpdf-&gt;shrink_this_table_to_fit;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $iteration = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // RECALCULATE&nbsp;</div></li><li><div>                while ($recalculate &lt;&gt; 1) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrin_k1 = $recalculate;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;shrin_k *= $recalculate;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;default_font_size /= ($this-&gt;mpdf-&gt;shrin_k1);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetFontSize($this-&gt;mpdf-&gt;default_font_size, false);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;SetLineHeight('', $this-&gt;mpdf-&gt;table[1][1]['cellLineHeight']);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table = $save_table;&nbsp;</div></li><li><div>                    if ($this-&gt;mpdf-&gt;shrin_k &lt;&gt; 1) {&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;shrinkTable($this-&gt;mpdf-&gt;table[1][1], $this-&gt;mpdf-&gt;shrin_k);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[1][1], false); // repeat&nbsp;</div></li><li><div>                    // Starting at $this-&gt;mpdf-&gt;innermostTableLevel&nbsp;</div></li><li><div>                    // Shrink table values - and redo columnWidth&nbsp;</div></li><li><div>                    for ($lvl = 2; $lvl &lt;= $this-&gt;mpdf-&gt;innermostTableLevel; $lvl++) {&nbsp;</div></li><li><div>                        for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                            if ($this-&gt;mpdf-&gt;shrin_k &lt;&gt; 1) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;shrinkTable($this-&gt;mpdf-&gt;table[$lvl][$nid], $this-&gt;mpdf-&gt;shrin_k);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_tableColumnWidth($this-&gt;mpdf-&gt;table[$lvl][$nid], false);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    // Set table cell widths for top level table&nbsp;</div></li><li><div>                    // Top level table&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_tableWidth($this-&gt;mpdf-&gt;table[1][1]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Now work through any nested tables setting child table[w'] = parent cell['w']&nbsp;</div></li><li><div>                    // Now do nested tables _tableWidth&nbsp;</div></li><li><div>                    for ($lvl = 2; $lvl &lt;= $this-&gt;mpdf-&gt;innermostTableLevel; $lvl++) {&nbsp;</div></li><li><div>                        for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                            // HERE set child table width = cell width&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            list($parentrow, $parentcol, $parentnid) = $this-&gt;mpdf-&gt;table[$lvl][$nid]['nestedpos'];&nbsp;</div></li><li><div>                            $c = & $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['cells'][$parentrow][$parentcol];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if (isset($c['colspan']) && $c['colspan'] &gt; 1) {&nbsp;</div></li><li><div>                                $parentwidth = 0;&nbsp;</div></li><li><div>                                for ($cs = 0; $cs &lt; $c['colspan']; $cs++) {&nbsp;</div></li><li><div>                                    $parentwidth += $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['wc'][$parentcol + $cs];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                $parentwidth = $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['wc'][$parentcol];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            //$parentwidth -= ALLOW FOR PADDING ETC.in parent cell&nbsp;</div></li><li><div>                            if (!$this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;packTableData) {&nbsp;</div></li><li><div>                                    list($bt, $br, $bb, $bl) = $this-&gt;mpdf-&gt;_getBorderWidths($c['borderbin']);&nbsp;</div></li><li><div>                                } else {&nbsp;</div></li><li><div>                                    $br = $c['border_details']['R']['w'];&nbsp;</div></li><li><div>                                    $bl = $c['border_details']['L']['w'];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;table[$lvl - 1][$parentnid]['borders_separate']) {&nbsp;</div></li><li><div>                                    $parentwidth -= $br + $bl + $c['padding']['L'] + $c['padding']['R'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['border_spacing_H'];&nbsp;</div></li><li><div>                                } else {&nbsp;</div></li><li><div>                                    $parentwidth -= $br / 2 + $bl / 2 + $c['padding']['L'] + $c['padding']['R'];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            } else if ($this-&gt;mpdf-&gt;simpleTables) {&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;table[$lvl - 1][$parentnid]['borders_separate']) {&nbsp;</div></li><li><div>                                    $parentwidth -= $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['L']['w'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['R']['w'] + $c['padding']['L'] + $c['padding']['R'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['border_spacing_H'];&nbsp;</div></li><li><div>                                } else {&nbsp;</div></li><li><div>                                    $parentwidth -= ($this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['L']['w'] + $this-&gt;mpdf-&gt;table[($lvl - 1)][$parentnid]['simple']['border_details']['R']['w']) / 2 + $c['padding']['L'] + $c['padding']['R'];&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($this-&gt;mpdf-&gt;table[$lvl][$nid]['wpercent']) && $this-&gt;mpdf-&gt;table[$lvl][$nid]['wpercent'] && $lvl &gt; 1) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $parentwidth;&nbsp;</div></li><li><div>                            } else if ($parentwidth &gt; $this-&gt;mpdf-&gt;table[$lvl][$nid]['maw']) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $this-&gt;mpdf-&gt;table[$lvl][$nid]['maw'];&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;table[$lvl][$nid]['w'] = $parentwidth;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            unset($c);&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;_tableWidth($this-&gt;mpdf-&gt;table[$lvl][$nid]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Starting at $this-&gt;mpdf-&gt;innermostTableLevel&nbsp;</div></li><li><div>                    // Cascade back up nested tables: setting heights back up the tree&nbsp;</div></li><li><div>                    for ($lvl = $this-&gt;mpdf-&gt;innermostTableLevel; $lvl &gt; 0; $lvl--) {&nbsp;</div></li><li><div>                        for ($nid = 1; $nid &lt;= $this-&gt;mpdf-&gt;tbctr[$lvl]; $nid++) {&nbsp;</div></li><li><div>                            list($tableheight, $maxrowheight, $fullpage, $remainingpage, $maxfirstrowheight) = $this-&gt;mpdf-&gt;_tableHeight($this-&gt;mpdf-&gt;table[$lvl][$nid]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // RESIZING ALGORITHM&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($maxrowheight &gt; $fullpage) {&nbsp;</div></li><li><div>                        $recalculate = $this-&gt;mpdf-&gt;tbsqrt($maxrowheight / $fullpage, $iteration);&nbsp;</div></li><li><div>                        $iteration++;&nbsp;</div></li><li><div>                    } else if ($this-&gt;mpdf-&gt;table_rotate && $tableheight &gt; $remainingpage && !$added_page) {&nbsp;</div></li><li><div>                        // If can fit on remainder of page whilst respecting autosize value..&nbsp;</div></li><li><div>                        if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, $iteration)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                            $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, $iteration);&nbsp;</div></li><li><div>                            $iteration++;&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            if (!$added_page) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                $added_page = true;&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            // 0.001 to force it to recalculate&nbsp;</div></li><li><div>                            $recalculate = (1 / $this-&gt;mpdf-&gt;shrin_k) + 0.001;  // undo any shrink&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($this-&gt;mpdf-&gt;table_keep_together || ($this-&gt;mpdf-&gt;table[1][1]['nr'] == 1 && !$this-&gt;mpdf-&gt;writingHTMLfooter)) {&nbsp;</div></li><li><div>                        if ($tableheight &gt; $fullpage) {&nbsp;</div></li><li><div>                            if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, $iteration)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                                $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, $iteration);&nbsp;</div></li><li><div>                                $iteration++;&nbsp;</div></li><li><div>                            } else if ($this-&gt;mpdf-&gt;tableMinSizePriority) {&nbsp;</div></li><li><div>                                $this-&gt;mpdf-&gt;table_keep_together = false;&nbsp;</div></li><li><div>                                $recalculate = (1 / $this-&gt;mpdf-&gt;shrin_k) + 0.001;&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                if (!$added_page && $this-&gt;mpdf-&gt;y != $this-&gt;mpdf-&gt;tMargin) {&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                    $added_page = true;&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, $iteration);&nbsp;</div></li><li><div>                                $iteration++;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        } else if ($tableheight &gt; $remainingpage) {&nbsp;</div></li><li><div>                            // If can fit on remainder of page whilst respecting autosize value..&nbsp;</div></li><li><div>                            if (($this-&gt;mpdf-&gt;shrin_k * $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, $iteration)) &lt;= $this-&gt;mpdf-&gt;shrink_this_table_to_fit) {&nbsp;</div></li><li><div>                                $recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $remainingpage, $iteration);&nbsp;</div></li><li><div>                                $iteration++;&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                if (!$added_page) {&nbsp;</div></li><li><div>                                    // mPDF 6&nbsp;</div></li><li><div>                                    if ($this-&gt;mpdf-&gt;AcceptPageBreak()) {&nbsp;</div></li><li><div>                                        $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                    } else if ($this-&gt;mpdf-&gt;ColActive && $tableheight &gt; (($this-&gt;mpdf-&gt;h - $this-&gt;mpdf-&gt;bMargin) - $this-&gt;mpdf-&gt;y0)) {&nbsp;</div></li><li><div>                                        $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                    $added_page = true;&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                                    $this-&gt;mpdf-&gt;tbrot_maxw = $this-&gt;mpdf-&gt;h - ($this-&gt;mpdf-&gt;y + $this-&gt;mpdf-&gt;bMargin + 5) - $this-&gt;mpdf-&gt;kwt_height;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                //$recalculate = $this-&gt;mpdf-&gt;tbsqrt($tableheight / $fullpage, $iteration); $iteration++;&nbsp;</div></li><li><div>                                $recalculate = (1 / $this-&gt;mpdf-&gt;shrin_k) + 0.001;  // undo any shrink&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $recalculate = 1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $recalculate = 1;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($maxfirstrowheight &gt; $remainingpage && !$added_page && !$this-&gt;mpdf-&gt;table_rotate && !$this-&gt;mpdf-&gt;ColActive && !$this-&gt;mpdf-&gt;table_keep_together && !$this-&gt;mpdf-&gt;writingHTMLheader && !$this-&gt;mpdf-&gt;writingHTMLfooter) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation);&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_moved = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // keep-with-table: if page has advanced, print out buffer now, else done in fn. _Tablewrite()&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;kwt_saved && $this-&gt;mpdf-&gt;kwt_moved) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;printkwtbuffer();&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_moved = false;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;kwt_saved = false;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Recursively writes all tables starting at top level&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_tableWrite($this-&gt;mpdf-&gt;table[1][1]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;table_rotate && $this-&gt;mpdf-&gt;tablebuffer) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;PageBreakTrigger = $this-&gt;mpdf-&gt;h - $this-&gt;mpdf-&gt;bMargin;&nbsp;</div></li><li><div>                    $save_tr = $this-&gt;mpdf-&gt;table_rotate;&nbsp;</div></li><li><div>                    $save_y = $this-&gt;mpdf-&gt;y;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_rotate = 0;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;y = $this-&gt;mpdf-&gt;tbrot_y0;&nbsp;</div></li><li><div>                    $h = $this-&gt;mpdf-&gt;tbrot_w;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;DivLn($h, $this-&gt;mpdf-&gt;blklvl, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;table_rotate = $save_tr;&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;y = $save_y;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;printtablebuffer();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;table_rotate = 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x = $this-&gt;mpdf-&gt;lMargin + $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['outer_left_margin'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;maxPosR = max($this-&gt;mpdf-&gt;maxPosR, ($this-&gt;mpdf-&gt;x + $this-&gt;mpdf-&gt;table[1][1]['w']));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;blockjustfinished = true;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;lastblockbottommargin = $this-&gt;mpdf-&gt;table[1][1]['margin']['B'];&nbsp;</div></li><li><div>            //Reset values&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;table[1][1]['page_break_after'])) {&nbsp;</div></li><li><div>                $page_break_after = $this-&gt;mpdf-&gt;table[1][1]['page_break_after'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $page_break_after = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Keep-with-table&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_y0 = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_x0 = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_height = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_buffer = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_Links = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_Annots = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_moved = false;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_saved = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_Reference = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_BMoutlines = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;kwt_toc = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;shrin_k = 1;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;shrink_this_table_to_fit = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;table);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;table = array(); //array&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tableLevel = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;tbctr = array();&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;innermostTableLevel = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tbCSSlvl = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cssmgr-&gt;tablecascadeCSS = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset($this-&gt;mpdf-&gt;cell);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cell = array(); //array&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;col = -1; //int&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;row = -1; //int&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Reset();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingL = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingT = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingR = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cellPaddingB = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginL = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginT = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginR = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;cMarginB = 0;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;default_font_size = $this-&gt;mpdf-&gt;original_default_font_size;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;default_font = $this-&gt;mpdf-&gt;original_default_font;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFontSize($this-&gt;mpdf-&gt;default_font_size, false);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFont($this-&gt;mpdf-&gt;default_font, '', 0, false);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineHeight();&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['InlineProperties'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['InlineProperties']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($page_break_after) {&nbsp;</div></li><li><div>                $save_blklvl = $this-&gt;mpdf-&gt;blklvl;&nbsp;</div></li><li><div>                $save_blk = $this-&gt;mpdf-&gt;blk;&nbsp;</div></li><li><div>                $save_silp = $this-&gt;mpdf-&gt;saveInlineProperties();&nbsp;</div></li><li><div>                $save_ilp = $this-&gt;mpdf-&gt;InlineProperties;&nbsp;</div></li><li><div>                $save_bflp = $this-&gt;mpdf-&gt;InlineBDF;&nbsp;</div></li><li><div>                $save_bflpc = $this-&gt;mpdf-&gt;InlineBDFctr; // mPDF 6&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $startpage = $this-&gt;mpdf-&gt;page;&nbsp;</div></li><li><div>                $pagebreaktype = $this-&gt;mpdf-&gt;defaultPagebreakType;&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                    $pagebreaktype = 'cloneall';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_preForcedPagebreak($pagebreaktype);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($page_break_after == 'RIGHT') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-ODD', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                } else if ($page_break_after == 'LEFT') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, 'NEXT-EVEN', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;AddPage($this-&gt;mpdf-&gt;CurOrientation, '', '', '', '', '', '', '', '', '', '', '', '', '', '', 0, 0, 0, 0);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // mPDF 6 pagebreaktype&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_postForcedPagebreak($pagebreaktype, $startpage, $save_blk, $save_blklvl);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineProperties = $save_ilp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDF = $save_bflp;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;InlineBDFctr = $save_bflpc; // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;restoreInlineProperties($save_silp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END TABLES -- */&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 4.0.4</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/gravity-pdf/4.1.1/classes/tag/" class="active">4.1.1</a></li><li><a href="http://hookr.io/plugins/gravity-pdf/4.1.0/classes/tag/" class="">4.1.0</a></li><li><a href="http://hookr.io/plugins/gravity-pdf/4.0.6/classes/tag/" class="">4.0.6</a></li><li><a href="http://hookr.io/plugins/gravity-pdf/4.0.5/classes/tag/" class="">4.0.5</a></li><li><a href="http://hookr.io/plugins/gravity-pdf/4.0.4/classes/tag/" class="">4.0.4</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Tag</li><li><span></span>wp-plugin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>