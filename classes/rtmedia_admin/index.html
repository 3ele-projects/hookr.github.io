<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="wordpress" data-id="17988"><head xmlns="http://www.w3.org/1999/xhtml"><title> rtmediaadmin | class | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="RTMediaAdmin, class, plugin, rtmedia-for-wordpress-buddypress-and-bbpress, 4.3.1" /><meta name="description" content="RTMediaAdmin class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.15"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=da31f3a8e3d187b0edb3fc8d3e377725' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.15' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/rtmedia_admin/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Frtmedia_admin%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Frtmedia_admin%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.3.1-class-rtmedia_admin","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="rtmedia_admin" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to rtmedia-for-wordpress-buddypr&hellip;." href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/" class="plugin"><span property="name">rtmedia-for-wordpress-buddypr&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.3.1." href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.3.1/" class="H_VERSION"><span property="name">4.3.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.3.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">rtmedia_admin</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="0"><a href="http://hookr.io/4.3.1/all/" title="All">All <span class="count badge">0</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/4.3.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="0"><a href="http://hookr.io/4.3.1/hooks/" title="Hooks">Hooks <span class="count badge">0</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/4.3.1/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="0"><a href="http://hookr.io/4.3.1/filters/" title="Filters">Filters <span class="count badge">0</span></a></li><li class="active" data-id="class" data-count="0"><a href="http://hookr.io/4.3.1/classes/" title="Classes">Classes <span class="count badge">0</span></a></li><li class="" data-id="constant" data-count="0"><a href="http://hookr.io/4.3.1/constants/" title="Constants">Constants <span class="count badge">0</span></a></li><li class="" data-id="function" data-count="0"><a href="http://hookr.io/4.3.1/functions/" title="Functions">Functions <span class="count badge">0</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/4.3.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>RTMediaAdmin</strong></h1><p>RTMediaAdmin class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.3.1/files/app-admin-rtmediaadmin/" class="file">/app/admin/RTMediaAdmin.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="15" class="block" start="15"><li><div>class RTMediaAdmin {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $rtmedia_upgrade;&nbsp;</div></li><li><div>    public $rtmedia_settings;&nbsp;</div></li><li><div>    public $rtmedia_encoding;&nbsp;</div></li><li><div>    public $rtmedia_support;&nbsp;</div></li><li><div>    public $rtmedia_feed;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Constructor - get the plugin hooked in and ready&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function __construct() {&nbsp;</div></li><li><div>        global $rtmedia;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Actions and filters&nbsp;</div></li><li><div>        add_action( 'init', array( $this, 'video_transcoding_survey_response' ) );&nbsp;</div></li><li><div>        add_filter( 'plugin_action_links_' . RTMEDIA_BASE_NAME, array( &$this, 'plugin_add_settings_link' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;rtmedia_support = new RTMediaSupport();&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_select_request', array( $this-&gt;rtmedia_support, 'get_form' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_cancel_request', array( $this-&gt;rtmedia_support, 'rtmedia_cancel_request' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_submit_request', array( $this-&gt;rtmedia_support, 'submit_request' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_linkback', array( $this, 'linkback' ), 1 ); //fixme : is it being used ?&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_rt_album_deactivate', 'BPMediaAlbumimporter::bp_album_deactivate', 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_rt_album_import', 'BPMediaAlbumimporter::bpmedia_ajax_import_callback', 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_rt_album_import_favorites', 'BPMediaAlbumimporter::bpmedia_ajax_import_favorites', 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_rt_album_import_step_favorites', 'BPMediaAlbumimporter::bpmedia_ajax_import_step_favorites', 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_rt_album_cleanup', 'BPMediaAlbumimporter::cleanup_after_install' );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_convert_videos_form', array( $this, 'convert_videos_mailchimp_send' ), 1 ); //fixme : is it being used ?&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_correct_upload_filetypes', array( $this, 'correct_upload_filetypes' ), 1 );&nbsp;</div></li><li><div>        add_filter( 'plugin_row_meta', array( $this, 'plugin_meta_premium_addon_link' ), 1, 2 );&nbsp;</div></li><li><div>        add_action( 'wp_dashboard_setup', array( $this, 'add_dashboard_widgets' ), 0 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_hide_addon_update_notice', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'rtmedia_hide_addon_update_notice', &nbsp;</div></li><li><div> ), 1 );&nbsp;</div></li><li><div>        add_filter( 'media_row_actions', array( $this, 'modify_medialibrary_permalink' ), 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! isset( $rtmedia-&gt;options ) ) {&nbsp;</div></li><li><div>            $rtmedia-&gt;options = rtmedia_get_site_option( 'rtmedia-options' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Show admin notice to install transcoder plugin.&nbsp;</div></li><li><div>        if ( ! class_exists( 'RT_Transcoder_Admin' ) ) {&nbsp;</div></li><li><div>            if ( is_multisite() ) {&nbsp;</div></li><li><div>                add_action( 'network_admin_notices', array( $this, 'install_transcoder_admin_notice' ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            add_action( 'admin_notices', array( $this, 'install_transcoder_admin_notice' ) );&nbsp;</div></li><li><div>            add_action( 'wp_ajax_install_transcoder_hide_admin_notice', array( $this, 'install_transcoder_hide_admin_notice' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $rtmedia_option = filter_input( INPUT_POST, 'rtmedia-options', FILTER_DEFAULT, FILTER_SANITIZE_NUMBER_INT );&nbsp;</div></li><li><div>        if ( isset( $rtmedia_option ) ) {&nbsp;</div></li><li><div>            if ( isset( $rtmedia_option['general_showAdminMenu'] ) && 1 === intval( $rtmedia_option['general_showAdminMenu'] ) ) {&nbsp;</div></li><li><div>                add_action( 'admin_bar_menu', array( $this, 'admin_bar_menu' ), 100, 1 );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            if ( 1 === intval( $rtmedia-&gt;options['general_showAdminMenu'] ) ) {&nbsp;</div></li><li><div>                add_action( 'admin_bar_menu', array( $this, 'admin_bar_menu' ), 100, 1 );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_admin() ) {&nbsp;</div></li><li><div>            add_action( 'admin_enqueue_scripts', array( $this, 'ui' ) );&nbsp;</div></li><li><div>            add_action( 'admin_menu', array( $this, 'menu' ), 1 );&nbsp;</div></li><li><div>            add_action( 'init', array( $this, 'bp_admin_tabs' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( is_multisite() ) {&nbsp;</div></li><li><div>                add_action( 'network_admin_edit_rtmedia', array( $this, 'save_multisite_options' ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;rtmedia_settings = new RTMediaSettings();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! class_exists( 'BuddyPress' ) ) {&nbsp;</div></li><li><div>            add_action( 'admin_init', array( $this, 'check_permalink_admin_notice' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_hide_template_override_notice', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'rtmedia_hide_template_override_notice', &nbsp;</div></li><li><div> ), 1 );&nbsp;</div></li><li><div>        add_action( 'admin_init', array( $this, 'rtmedia_bp_add_update_type' ) );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_hide_inspirebook_release_notice', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'rtmedia_hide_inspirebook_release_notice', &nbsp;</div></li><li><div> ), 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_hide_social_sync_notice', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'rtmedia_hide_social_sync_notice', &nbsp;</div></li><li><div> ), 1 );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_rtmedia_hide_premium_addon_notice', array( $this, 'rtmedia_hide_premium_addon_notice' ), 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        new RTMediaMediaSizeImporter(); // do not delete this line. We only need to create object of this class if we are in admin section&nbsp;</div></li><li><div>        if ( class_exists( 'BuddyPress' ) ) {&nbsp;</div></li><li><div>            new RTMediaActivityUpgrade();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        add_action( 'admin_notices', array( $this, 'rtmedia_admin_notices' ) );&nbsp;</div></li><li><div>        add_action( 'network_admin_notices', array( $this, 'rtmedia_network_admin_notices' ) );&nbsp;</div></li><li><div>        add_action( 'admin_init', array( $this, 'rtmedia_addon_license_save_hook' ) );&nbsp;</div></li><li><div>        add_action( 'admin_init', array( $this, 'rtmedia_migration' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'removable_query_args', array( $this, 'removable_query_args' ), 10, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'admin_footer', array( $this, 'rtm_admin_templates' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Display invalid add-on license notices to admins.&nbsp;</div></li><li><div>        add_action( 'admin_notices', array( $this, 'rtm_addon_license_notice' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Display admin notice.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function install_transcoder_admin_notice() {&nbsp;</div></li><li><div>        $show_notice = get_site_option( 'install_transcoder_admin_notice', 1 );&nbsp;</div></li><li><div>        if ( '1' === $show_notice || 1 === $show_notice ) :&nbsp;</div></li><li><div>    ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;notice notice-info install-transcoder-notice is-dismissible&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php wp_nonce_field( '_install_transcoder_hide_notice_', 'install_transcoder_hide_notice_nonce' ); ?&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $allowed_tags = array(&nbsp;</div></li><li><div>                    'a' =&gt; array(&nbsp;</div></li><li><div>                        'href' =&gt; array(), &nbsp;</div></li><li><div>                        'target' =&gt; array(), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                echo wp_kses( __( 'Install &lt;a href=&quot;https://wordpress.org/plugins/transcoder/&quot; target=&quot;_blank&quot;&gt;Transcoder plugin&lt;/a&gt; to convert audio/video files and thumbnails generation.', 'buddypress-media' ), $allowed_tags );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>            jQuery( document ).ready( function() {&nbsp;</div></li><li><div>                jQuery( '.install-transcoder-notice.is-dismissible' ).on( 'click', '.notice-dismiss', function() {&nbsp;</div></li><li><div>                    var data = {&nbsp;</div></li><li><div>                        action: 'install_transcoder_hide_admin_notice', &nbsp;</div></li><li><div>                        install_transcoder_notice_nonce: jQuery('#install_transcoder_hide_notice_nonce').val()&nbsp;</div></li><li><div>                    };&nbsp;</div></li><li><div>                    jQuery.post( ajaxurl, data, function ( response ) {&nbsp;</div></li><li><div>                        jQuery('.install-transcoder-notice').remove();&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>        endif;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Set option to hide admin notice when user click on dismiss button.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function install_transcoder_hide_admin_notice() {&nbsp;</div></li><li><div>        if ( check_ajax_referer( '_install_transcoder_hide_notice_', 'install_transcoder_notice_nonce' ) ) {&nbsp;</div></li><li><div>            update_site_option( 'install_transcoder_admin_notice', '0' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function rtm_admin_templates() {&nbsp;</div></li><li><div>        foreach ( glob( RTMEDIA_PATH . 'app/admin/templates/*.php' ) as $filename ) {&nbsp;</div></li><li><div>            $slug = rtrim( basename( $filename ), '.php' );&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>            echo '&lt;script type=&quot;text/html&quot; id=&quot;' . esc_attr( $slug ) . '&quot;&gt;';&nbsp;</div></li><li><div>            include $filename;&nbsp;</div></li><li><div>            echo '&lt;/script&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        if( isset( $_GET['page'] ) && 'rtmedia-settings' == sanitize_text_field( $_GET['page'] ) ) {&nbsp;</div></li><li><div>            global $rtmedia;&nbsp;</div></li><li><div>            $display = apply_filters( 'rtmedia_disable_media_in_commented_media', true );&nbsp;</div></li><li><div>            if ( isset( $rtmedia-&gt;options ) && isset( $rtmedia-&gt;options['buddypress_enableOnComment'] ) && 1 == $rtmedia-&gt;options['buddypress_enableOnComment'] && $display ) { ?&gt;&nbsp;</div></li><li><div>                &lt;style type=&quot;text/css&quot;&gt;&nbsp;</div></li><li><div>                    .rtm-option-wrapper .form-table[data-depends=&quot;buddypress_enableOnComment&quot;] {&nbsp;</div></li><li><div>                        display: none !important;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                &lt;/style&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    function modify_medialibrary_permalink( $action, $post ) {&nbsp;</div></li><li><div>        $rtm_id = rtmedia_id( $post-&gt;ID );&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        if ( $rtm_id ) {&nbsp;</div></li><li><div>            $link = get_rtmedia_permalink( $rtm_id );&nbsp;</div></li><li><div>            $title = _draft_or_post_title( $post-&gt;post_parent );&nbsp;</div></li><li><div>            $action['view'] = '&lt;a href=&quot;' . esc_url( $link ) . '&quot; title=&quot;' . esc_attr( sprintf( esc_html__( 'View &#8220;%s&#8221;', 'buddypress-media' ), $title ) ) . '&quot; rel=&quot;permalink&quot;&gt;' . esc_html__( 'View', 'buddypress-media' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        return $action;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    function rtmedia_migration() {&nbsp;</div></li><li><div>        new RTMediaMigration();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    function rtmedia_addon_license_save_hook() {&nbsp;</div></li><li><div>        do_action( 'rtmedia_addon_license_save_hook' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia network admin notices.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_network_admin_notices() {&nbsp;</div></li><li><div>        if ( is_multisite() ) {&nbsp;</div></li><li><div>            $this-&gt;upload_filetypes_error();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia admin notices.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_admin_notices() {&nbsp;</div></li><li><div>        if ( current_user_can( 'list_users' ) ) {&nbsp;</div></li><li><div>            $this-&gt;upload_filetypes_error();&nbsp;</div></li><li><div>            $this-&gt;rtmedia_addon_update_notice();&nbsp;</div></li><li><div>            $this-&gt;rtmedia_update_template_notice();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>                $this-&gt;rtmedia_inspirebook_release_notice();&nbsp;</div></li><li><div>                $this-&gt;rtmedia_premium_addon_notice();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * rtMedia Pro split release admin notice&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_premium_addon_notice() {&nbsp;</div></li><li><div>        $site_option = rtmedia_get_site_option( 'rtmedia_premium_addon_notice' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ( ! $site_option || 'hide' !== $site_option ) ) {&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia_premium_addon_notice', 'show' );&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;updated rtmedia-pro-split-notice&quot;&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&nbsp;</div></li><li><div>                    &lt;span&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                            $product_page = 'https://rtmedia.io/products/?utm_source=dashboard&utm_medium=plugin&utm_campaign=buddypress-media';&nbsp;</div></li><li><div>                            $message = sprintf(&nbsp;</div></li><li><div>                                __( 'Check 30+ premium rtMedia add-ons on our &lt;a href=&quot;%s&quot;&gt;store&lt;/a&gt;.', 'buddypress-media' ), $product_page&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                        &lt;b&gt;&lt;?php esc_html_e( 'rtMedia: ', 'buddypress-media' ); ?&gt;&lt;/b&gt;&nbsp;</div></li><li><div>                        &lt;?php echo $message; ?&gt;&nbsp;</div></li><li><div>                    &lt;/span&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;#&quot;&nbsp;</div></li><li><div>                       onclick=&quot;rtmedia_hide_premium_addon_notice('&lt;?php echo esc_js( wp_create_nonce( 'rtcamp_pro_split' ) ); ?&gt;');&quot;&nbsp;</div></li><li><div>                       style=&quot;float:right&quot;&gt;Dismiss&lt;/a&gt;&nbsp;</div></li><li><div>                &lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                function rtmedia_hide_premium_addon_notice(nonce) {&nbsp;</div></li><li><div>                    var data = {action: 'rtmedia_hide_premium_addon_notice', _rtm_nonce: nonce };&nbsp;</div></li><li><div>                    jQuery.post(ajaxurl, data, function (response) {&nbsp;</div></li><li><div>                        response = response.trim();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if (response === &quot;1&quot;)&nbsp;</div></li><li><div>                            jQuery('.rtmedia-pro-split-notice').remove();&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide pro split release notice&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function rtmedia_hide_premium_addon_notice() {&nbsp;</div></li><li><div>        if ( check_ajax_referer( 'rtcamp_pro_split', '_rtm_nonce' ) && rtmedia_update_site_option( 'rtmedia_premium_addon_notice', 'hide' ) ) {&nbsp;</div></li><li><div>            echo '1';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            echo '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia inspirebook release notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_inspirebook_release_notice() {&nbsp;</div></li><li><div>        $site_option = rtmedia_get_site_option( 'rtmedia_inspirebook_release_notice' );&nbsp;</div></li><li><div>        if ( ( ! $site_option || 'hide' !== $site_option ) && ( 'inspirebook' !== get_stylesheet() ) ) {&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia_inspirebook_release_notice', 'show' );&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;updated rtmedia-inspire-book-notice&quot;&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&nbsp;</div></li><li><div>                    &lt;span&gt;&nbsp;</div></li><li><div>                        &lt;a href=&quot;https://rtmedia.io/products/inspirebook/&quot;&nbsp;</div></li><li><div>                           target=&quot;_blank&quot;&gt;&nbsp;</div></li><li><div>                            &lt;b&gt;&lt;?php esc_html_e( 'Meet InspireBook', 'buddypress-media' ) ?&gt;&lt;/b&gt;&nbsp;</div></li><li><div>                        &lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( ' - First official rtMedia premium theme.', 'buddypress-media' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;/span&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;#&quot; onclick=&quot;rtmedia_hide_inspirebook_notice()&quot; style=&quot;float:right&quot;&gt;Dismiss&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;?php wp_nonce_field( '_rtmedia_hide_inspirebook_notice_', 'rtmedia_hide_inspirebook_nonce' ); ?&gt;&nbsp;</div></li><li><div>                &lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                function rtmedia_hide_inspirebook_notice() {&nbsp;</div></li><li><div>                    var data = {&nbsp;</div></li><li><div>                        action: 'rtmedia_hide_inspirebook_release_notice', &nbsp;</div></li><li><div>                        _rtm_nonce: jQuery('#rtmedia_hide_inspirebook_nonce').val()&nbsp;</div></li><li><div>                    };&nbsp;</div></li><li><div>                    jQuery.post(ajaxurl, data, function (response) {&nbsp;</div></li><li><div>                        response = response.trim();&nbsp;</div></li><li><div>                        if (response === &quot;1&quot;)&nbsp;</div></li><li><div>                            jQuery('.rtmedia-inspire-book-notice').remove();&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide rtmedia inspirebook release notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_hide_inspirebook_release_notice() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( check_ajax_referer( '_rtmedia_hide_inspirebook_notice_', '_rtm_nonce' ) && rtmedia_update_site_option( 'rtmedia_inspirebook_release_notice', 'hide' ) ) {&nbsp;</div></li><li><div>            echo '1';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            echo '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Set rtmedia buddypress update type.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_bp_add_update_type() {&nbsp;</div></li><li><div>        if ( class_exists( 'BuddyPress' ) && function_exists( 'bp_activity_set_action' ) ) {&nbsp;</div></li><li><div>            bp_activity_set_action( 'rtmedia_update', 'rtmedia_update', 'rtMedia Update' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia check permalink admin notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_permalink_admin_notice() {&nbsp;</div></li><li><div>        global $wp_rewrite;&nbsp;</div></li><li><div>        if ( empty( $wp_rewrite-&gt;permalink_structure ) ) {&nbsp;</div></li><li><div>            add_action( 'admin_notices', array( $this, 'rtmedia_permalink_notice' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Define rtmedia permalink notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_permalink_notice() {&nbsp;</div></li><li><div>        echo '&lt;div class=&quot;error rtmedia-permalink-change-notice&quot;&gt;&nbsp;</div></li><li><div>        &lt;p&gt; &lt;b&gt;' . esc_html__( 'rtMedia:', 'buddypress-media' ) . '&lt;/b&gt; ' . esc_html__( ' You must', 'buddypress-media' ) . ' &lt;a href=&quot;' . esc_url( admin_url( 'options-permalink.php' ) ) . '&quot;&gt;' . esc_html__( 'update permalink structure', 'buddypress-media' ) . '&lt;/a&gt; ' . esc_html__( 'to something other than the default for it to work.', 'buddypress-media' ) . ' &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Define rtmedia addon update notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_addon_update_notice() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $site_option = rtmedia_get_site_option( 'rtmedia-addon-update-notice-3_8' );&nbsp;</div></li><li><div>        if ( is_rt_admin() && ( ! $site_option || 'hide' !== $site_option ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! $this-&gt;check_for_addon_update_notice() ) {&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia-addon-update-notice-3_8', 'show' );&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;error rtmedia-addon-upate-notice&quot;&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&nbsp;</div></li><li><div>                    &lt;strong&gt;&lt;?php esc_html_e( 'rtMedia:', 'buddypress-media' ) ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                    &lt;?php esc_html_e( 'Please update all premium add-ons that you have purchased from', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;https://rtmedia.io/my-account/&quot;&nbsp;</div></li><li><div>                       target=&quot;_blank&quot;&gt;&lt;?php esc_html_e( 'your account', 'buddypress-media' ) ?&gt;&lt;/a&gt;.&nbsp;</div></li><li><div>                    &lt;a href=&quot;#&quot; onclick=&quot;rtmedia_hide_addon_update_notice()&quot;&nbsp;</div></li><li><div>                       style=&quot;float:right&quot;&gt;&lt;?php esc_html_e( 'Dismiss', 'buddypress-media' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;?php wp_nonce_field( 'rtmedia-addon-update-notice-3_8', 'rtmedia-addon-notice' ); ?&gt;&nbsp;</div></li><li><div>                &lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                function rtmedia_hide_addon_update_notice() {&nbsp;</div></li><li><div>                    var data = {&nbsp;</div></li><li><div>                        action: 'rtmedia_hide_addon_update_notice', &nbsp;</div></li><li><div>                        _rtm_nonce: jQuery('#rtmedia-addon-notice').val();&nbsp;</div></li><li><div>                };&nbsp;</div></li><li><div>                    jQuery.post(ajaxurl, data, function (response) {&nbsp;</div></li><li><div>                        response = response.trim();&nbsp;</div></li><li><div>                        if (response === &quot;1&quot;)&nbsp;</div></li><li><div>                            jQuery('.rtmedia-addon-upate-notice').remove();&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia addon update notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return bool $return_falg&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function check_for_addon_update_notice() {&nbsp;</div></li><li><div>        $return_falg = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // check for rtMedia Instagram version&nbsp;</div></li><li><div>        if ( defined( 'RTMEDIA_INSTAGRAM_PATH' ) ) {&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_INSTAGRAM_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '2.1.14' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_PHOTO_TAGGING_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Photo Tagging version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_PHOTO_TAGGING_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '2.2.14' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_FFMPEG_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia FFPMEG version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_FFMPEG_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '2.1.14' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_KALTURA_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Kaltura version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_KALTURA_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '3.0.16' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_PRO_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Pro version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_PRO_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '2.6' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_SOCIAL_SYNC_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Social Sync version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_SOCIAL_SYNC_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '1.3.1' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_MEMBERSHIP_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Membership version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_MEMBERSHIP_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '2.1.5' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } elseif ( defined( 'RTMEDIA_WATERMARK_PATH' ) ) {&nbsp;</div></li><li><div>            // check for rtMedia Photo Watermak version&nbsp;</div></li><li><div>            $plugin_info = get_plugin_data( RTMEDIA_WATERMARK_PATH . 'index.php' );&nbsp;</div></li><li><div>            if ( isset( $plugin_info['Version'] ) && ( - 1 === version_compare( $plugin_info['Version'], '1.1.8' ) ) ) {&nbsp;</div></li><li><div>                $return_falg = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $return_falg;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show buddypress admin tabs.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function bp_admin_tabs() {&nbsp;</div></li><li><div>        if ( current_user_can( 'manage_options' ) ) {&nbsp;</div></li><li><div>            add_action( 'bp_admin_tabs', array( $this, 'tab' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Show rtmedia advertisement.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_advertisement() {&nbsp;</div></li><li><div>        $src = RTMEDIA_URL . 'app/assets/admin/img/rtMedia-pro-ad.png'&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class='rtmedia-admin-ad'&gt;&nbsp;</div></li><li><div>            &lt;a href='https://rtmedia.io/products/rtmedia-pro/' target='_blank' title='rtMedia Pro'&gt;&nbsp;</div></li><li><div>                &lt;img src='&lt;?php echo esc_url( $src ); ?&gt;' alt=&quot;&lt;?php esc_attr_e( 'rtMedia Pro is released', 'buddypress-media' ); ?&gt;&quot;/&gt;&nbsp;</div></li><li><div>            &lt;/a&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Create the function to output the contents of our Dashboard Widget&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_dashboard_widget_function() {&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;clearfix&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;rtm-column alignleft&quot;&gt;&nbsp;</div></li><li><div>                &lt;h4 class=&quot;sub&quot;&gt;&lt;?php esc_html_e( 'Media Stats', 'buddypress-media' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;table&gt;&nbsp;</div></li><li><div>                    &lt;tbody&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $rtmedia_model = new RTMediaModel();&nbsp;</div></li><li><div>                    global $wpdb;&nbsp;</div></li><li><div>                    $results = wp_cache_get( 'rt-stats', 'rt-dashboard' );&nbsp;</div></li><li><div>                    if ( false === $results ) {&nbsp;</div></li><li><div>                        $results = $wpdb-&gt;get_results( $wpdb-&gt;prepare( &quot;select media_type, count(id) as count from {$rtmedia_model-&gt;table_name} where blog_id=%d group by media_type&quot;, get_current_blog_id() ) ); // @codingStandardsIgnoreLine&nbsp;</div></li><li><div>                        wp_cache_set( 'stats', $results, 'rt-dashboard', HOUR_IN_SECONDS );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ( $results ) {&nbsp;</div></li><li><div>                        foreach ( $results as $media ) {&nbsp;</div></li><li><div>                            if ( defined( strtoupper( 'RTMEDIA_' . $media-&gt;media_type . '_PLURAL_LABEL' ) ) ) {&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;tr&gt;&nbsp;</div></li><li><div>                                    &lt;td class=&quot;b&quot;&gt; &lt;?php echo esc_html( $media-&gt;count ); ?&gt; &lt;/td&gt;&nbsp;</div></li><li><div>                                    &lt;td class=&quot;t&quot;&gt;&lt;?php echo esc_html( constant( strtoupper( 'RTMEDIA_' . $media-&gt;media_type . '_PLURAL_LABEL' ) ) ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;/tbody&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;rtm-column alignright&quot;&gt;&nbsp;</div></li><li><div>                &lt;h4 class=&quot;sub&quot;&gt;&lt;?php esc_html_e( 'Usage Stats', 'buddypress-media' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;table&gt;&nbsp;</div></li><li><div>                    &lt;tbody&gt; &lt;?php&nbsp;</div></li><li><div>                    $total_count = wp_cache_get( 'total_count', 'rt-dashboard' );&nbsp;</div></li><li><div>                    if ( false === $total_count ) {&nbsp;</div></li><li><div>                        $total_count = $wpdb-&gt;get_var( &quot;select count(*) from {$wpdb-&gt;users}&quot; );&nbsp;</div></li><li><div>                        wp_cache_set( 'total_count', $total_count, 'rt-dashboard', HOUR_IN_SECONDS );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;b&quot;&gt; &lt;?php echo esc_html( $total_count ); ?&gt; &lt;/td&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;t&quot;&gt;&lt;?php esc_html_e( 'Total ', 'buddypress-media' ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $with_media_count = wp_cache_get( 'with_media', 'rt-dashboard' );&nbsp;</div></li><li><div>                    if ( false === $with_media_count ) {&nbsp;</div></li><li><div>                        $with_media_count = $wpdb-&gt;get_var( &quot;select count(distinct media_author) from {$rtmedia_model-&gt;table_name}&quot; ); // @codingStandardsIgnoreLine&nbsp;</div></li><li><div>                        wp_cache_set( 'with_media', $with_media_count, 'rt-dashboard', HOUR_IN_SECONDS );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;b&quot;&gt; &lt;?php echo esc_html( $with_media_count ); ?&gt; &lt;/td&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;t&quot;&gt;&lt;?php esc_html_e( 'With Media', 'buddypress-media' ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $comments = wp_cache_get( 'comments', 'rt-dashboard' );&nbsp;</div></li><li><div>                    if ( false === $comments ) {&nbsp;</div></li><li><div>                        $comments = $wpdb-&gt;get_var( &quot;select count(*) from {$wpdb-&gt;comments} where comment_post_ID in ( select media_id from {$rtmedia_model-&gt;table_name} )&quot; ); // @codingStandardsIgnoreLine&nbsp;</div></li><li><div>                        wp_cache_set( 'comments', $comments, 'rt-dashboard', HOUR_IN_SECONDS );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;b&quot;&gt; &lt;?php echo esc_html( $comments ); ?&gt; &lt;/td&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;t&quot;&gt;&lt;?php esc_html_e( 'Comments ', 'buddypress-media' ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $likes = wp_cache_get( 'likes', 'rt-dashboard' );&nbsp;</div></li><li><div>                    if ( false === $likes ) {&nbsp;</div></li><li><div>                        $likes = $wpdb-&gt;get_var( &quot;select sum(likes) from {$rtmedia_model-&gt;table_name}&quot; ); // @codingStandardsIgnoreLine&nbsp;</div></li><li><div>                        wp_cache_set( 'likes', $likes, 'rt-dashboard', HOUR_IN_SECONDS );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;b&quot;&gt; &lt;?php echo esc_html( $likes ); ?&gt; &lt;/td&gt;&nbsp;</div></li><li><div>                        &lt;td class=&quot;t&quot;&gt;&lt;?php esc_html_e( 'Likes', 'buddypress-media' ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;/tbody&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;rtm-meta-container&quot;&gt;&nbsp;</div></li><li><div>            &lt;ul class=&quot;rtm-meta-links&quot;&gt;&nbsp;</div></li><li><div>                &lt;li&gt;&lt;b&gt;&lt;?php esc_html_e( 'rtMedia Links:', 'buddypress-media' ); ?&gt;&lt;/b&gt;&lt;/li&gt;&nbsp;</div></li><li><div>                &lt;li&gt;&lt;a href=&quot;https://rtmedia.io/&quot;&gt;&lt;?php esc_html_e( 'Homepage', 'buddypress-media' ); ?&gt;&lt;/a&gt;&lt;/li&gt;&nbsp;</div></li><li><div>                &lt;li&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;&lt;?php echo esc_url( admin_url( 'admin.php?page=rtmedia-support#rtmedia-general' ) ); ?&gt;&quot;&gt;&lt;?php esc_html_e( 'Free Support', 'buddypress-media' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                &lt;/li&gt;&nbsp;</div></li><li><div>                &lt;li&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;https://rtmedia.io/products/category/plugins/&quot;&gt;&lt;?php esc_html_e( 'Premium Addons', 'buddypress-media' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                &lt;/li&gt;&nbsp;</div></li><li><div>            &lt;/ul&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Create the function use in the action hook&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_dashboard_widgets() {&nbsp;</div></li><li><div>        wp_add_dashboard_widget( 'rtmedia_dashboard_widget', esc_html__( 'Right Now in rtMedia', 'buddypress-media' ), array(&nbsp;</div></li><li><div>            &$this, &nbsp;</div></li><li><div>            'rtmedia_dashboard_widget_function', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        global $wp_meta_boxes;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get the regular dashboard widgets array&nbsp;</div></li><li><div>        // (which has our new widget already but at the end)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $normal_dashboard = $wp_meta_boxes['dashboard']['normal']['core'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Backup and delete our new dashboard widget from the end of the array&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $example_widget_backup = array( 'rtmedia_dashboard_widget' =&gt; $normal_dashboard['rtmedia_dashboard_widget'] );&nbsp;</div></li><li><div>        unset( $normal_dashboard['rtmedia_dashboard_widget'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Merge the two arrays together so our widget is at the beginning&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $sorted_dashboard = array_merge( $example_widget_backup, $normal_dashboard );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Save the sorted array back into the original metaboxes&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $wp_meta_boxes['dashboard']['normal']['core'] = $sorted_dashboard;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add the plugin settings links&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $links&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array $links&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function plugin_add_settings_link( $links ) {&nbsp;</div></li><li><div>        $settings_link = '&lt;a href=&quot;' . esc_url( admin_url( 'admin.php?page=rtmedia-settings' ) ) . '&quot;&gt;' . esc_html__( 'Settings', 'buddypress-media' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        array_push( $links, $settings_link );&nbsp;</div></li><li><div>        $settings_link = '&lt;a href=&quot;' . esc_url( admin_url( 'admin.php?page=rtmedia-support' ) ) . '&quot;&gt;' . esc_html__( 'Support', 'buddypress-media' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        array_push( $links, $settings_link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $links;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add admin bar menu&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  object $admin_bar&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function admin_bar_menu( $admin_bar ) {&nbsp;</div></li><li><div>        if ( ! current_user_can( 'manage_options' ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                'id' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                'title' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                'href' =&gt; admin_url( 'admin.php?page=rtmedia-settings' ), &nbsp;</div></li><li><div>                'meta' =&gt; array(&nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'rtMedia', 'buddypress-media' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                'id' =&gt; 'rt-media-dashborad', &nbsp;</div></li><li><div>                'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                'title' =&gt; esc_html__( 'Settings', 'buddypress-media' ), &nbsp;</div></li><li><div>                'href' =&gt; admin_url( 'admin.php?page=rtmedia-settings' ), &nbsp;</div></li><li><div>                'meta' =&gt; array(&nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Settings', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                    'id' =&gt; 'rt-media-addons', &nbsp;</div></li><li><div>                    'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Addons', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'href' =&gt; admin_url( 'admin.php?page=rtmedia-addons' ), &nbsp;</div></li><li><div>                    'meta' =&gt; array(&nbsp;</div></li><li><div>                        'title' =&gt; esc_html__( 'Addons', 'buddypress-media' ), &nbsp;</div></li><li><div>                        'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                'id' =&gt; 'rt-media-support', &nbsp;</div></li><li><div>                'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                'title' =&gt; esc_html__( 'Support', 'buddypress-media' ), &nbsp;</div></li><li><div>                'href' =&gt; admin_url( 'admin.php?page=rtmedia-support' ), &nbsp;</div></li><li><div>                'meta' =&gt; array(&nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Support', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                    'id' =&gt; 'rt-media-themes', &nbsp;</div></li><li><div>                    'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Themes', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'href' =&gt; admin_url( 'admin.php?page=rtmedia-themes' ), &nbsp;</div></li><li><div>                    'meta' =&gt; array(&nbsp;</div></li><li><div>                        'title' =&gt; esc_html__( 'Themes', 'buddypress-media' ), &nbsp;</div></li><li><div>                        'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                    'id' =&gt; 'rt-media-hire-us', &nbsp;</div></li><li><div>                    'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Hire Us', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'href' =&gt; admin_url( 'admin.php?page=rtmedia-hire-us' ), &nbsp;</div></li><li><div>                    'meta' =&gt; array(&nbsp;</div></li><li><div>                        'title' =&gt; esc_html__( 'Hire Us', 'buddypress-media' ), &nbsp;</div></li><li><div>                        'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( has_filter( 'rtmedia_license_tabs' ) || has_action( 'rtmedia_addon_license_details' ) ) {&nbsp;</div></li><li><div>            $admin_bar-&gt;add_menu( array(&nbsp;</div></li><li><div>                    'id' =&gt; 'rt-media-license', &nbsp;</div></li><li><div>                    'parent' =&gt; 'rtMedia', &nbsp;</div></li><li><div>                    'title' =&gt; esc_html__( 'Licenses', 'buddypress-media' ), &nbsp;</div></li><li><div>                    'href' =&gt; admin_url( 'admin.php?page=rtmedia-license' ), &nbsp;</div></li><li><div>                    'meta' =&gt; array(&nbsp;</div></li><li><div>                        'title' =&gt; esc_html__( 'Licenses', 'buddypress-media' ), &nbsp;</div></li><li><div>                        'target' =&gt; '_self', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Generates the Admin UI.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  string $hook&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function ui( $hook ) {&nbsp;</div></li><li><div>        $admin_pages = array(&nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-migration', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-kaltura-settings', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-ffmpeg-settings', &nbsp;</div></li><li><div>            'toplevel_page_rtmedia-settings', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-addons', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-support', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-themes', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-hire-us', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-importer', &nbsp;</div></li><li><div>            'rtmedia_page_rtmedia-regenerate', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( has_filter( 'rtmedia_license_tabs' ) || has_action( 'rtmedia_addon_license_details' ) ) {&nbsp;</div></li><li><div>            $admin_pages[] = 'rtmedia_page_rtmedia-license';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $admin_pages = apply_filters( 'rtmedia_filter_admin_pages_array', $admin_pages );&nbsp;</div></li><li><div>        $suffix = ( function_exists( 'rtm_get_script_style_suffix' ) ) ? rtm_get_script_style_suffix() : '.min';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( $hook, $admin_pages, true ) || strpos( $hook, 'rtmedia-migration' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $admin_ajax = admin_url( 'admin-ajax.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** Only one JS file should enqueue */&nbsp;</div></li><li><div>            if ( '' === $suffix ) {&nbsp;</div></li><li><div>                wp_enqueue_script( 'rtmedia-admin-tabs', RTMEDIA_URL . 'app/assets/admin/js/vendors/tabs.js', array( 'backbone' ), RTMEDIA_VERSION );&nbsp;</div></li><li><div>                wp_enqueue_script( 'rtmedia-admin-scripts', RTMEDIA_URL . 'app/assets/admin/js/scripts.js', array( 'backbone' ), RTMEDIA_VERSION );&nbsp;</div></li><li><div>                wp_enqueue_script( 'rtmedia-admin', RTMEDIA_URL . 'app/assets/admin/js/settings.js', array( 'backbone', 'wp-util' ), RTMEDIA_VERSION );&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                wp_enqueue_script( 'rtmedia-admin', RTMEDIA_URL . 'app/assets/admin/js/admin.min.js', array( 'backbone', 'wp-util' ), RTMEDIA_VERSION );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_on_label', esc_html__( 'ON', 'buddypress-media' ) );&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_off_label', esc_html__( 'OFF', 'buddypress-media' ) );&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_admin_ajax', $admin_ajax );&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_admin_url', admin_url() );&nbsp;</div></li><li><div>            /** path for file upload using ajax */&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_fileupload_url', RTMEDIA_URL.'app/helper/rtUploadAttachment.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $rtmedia_admin_strings = array(&nbsp;</div></li><li><div>                'no_refresh' =&gt; esc_html__( 'Please do not refresh this page.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'something_went_wrong' =&gt; esc_html__( 'Something went wrong. Please ', 'buddypress-media' ) . '&lt;a href onclick=&quot;location.reload();&quot;&gt;' . esc_html__( 'refresh', 'buddypress-media' ) . '&lt;/a&gt;' . esc_html__( ' page.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'are_you_sure' =&gt; esc_html__( 'This will subscribe you to the free plan.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'disable_encoding' =&gt; esc_html__( 'Are you sure you want to disable the encoding service?', 'buddypress-media' ), &nbsp;</div></li><li><div>                'enable_encoding' =&gt; esc_html__( 'Are you sure you want to enable the encoding service?', 'buddypress-media' ), &nbsp;</div></li><li><div>                'settings_changed' =&gt; esc_html__( 'Settings have changed, you should save them!', 'buddypress-media' ), &nbsp;</div></li><li><div>                'video_thumbnail_error' =&gt; esc_html__( 'Number of video thumbnails to be generated should be greater than 0 in media sizes settings. Setting it to default value 2.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'video_thumbnail_invalid_value' =&gt; esc_html__( 'Invalid value for number of video thumbnails in media sizes settings. Setting it to round value', 'buddypress-media' ), &nbsp;</div></li><li><div>                'jpeg_quality_negative_error' =&gt; esc_html__( 'Number of percentage in JPEG image quality should be greater than 0 in media sizes settings. Setting it to default value 90.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'jpeg_quality_percentage_error' =&gt; esc_html__( 'Number of percentage in JPEG image quality should be less than 100 in media sizes settings. Setting it to 100.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'jpeg_quality_invalid_value' =&gt; esc_html__( 'Invalid value for percentage in JPEG image quality in media sizes settings. Setting it to round value', 'buddypress-media' ), &nbsp;</div></li><li><div>                'per_page_media_negative_value' =&gt; esc_html__( 'Please enter positive integer value only. Setting number of media per page value to default value 10.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'per_page_media_positive_error' =&gt; esc_html__( 'Please enter positive integer value only. Setting number of media per page value to round value', 'buddypress-media' ), &nbsp;</div></li><li><div>                'request_failed' =&gt; esc_html__( 'Request failed.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'wrong_css_input' =&gt; esc_html__( 'You can not use @import statement in custom css', 'buddypress-media' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_admin_strings', $rtmedia_admin_strings );&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'settings_url', esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-settings' ), ( is_multisite() ? network_admin_url( 'admin.php' ) : admin_url( 'admin.php' ) ) ) ) . '#privacy_enabled' );&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'settings_rt_album_import_url', esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-settings' ), ( is_multisite() ? network_admin_url( 'admin.php' ) : admin_url( 'admin.php' ) ) ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $rtmedia_admin_support_strings = array(&nbsp;</div></li><li><div>                'wp_admin_username_error' =&gt; esc_html__( 'Please enter WP Admin Login.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'wp_admin_pwd_error' =&gt; esc_html__( 'Please enter WP Admin password.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'ssh_ftp_host_error' =&gt; esc_html__( 'Please enter SSH / FTP host.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'ssh_ftp_username_error' =&gt; esc_html__( 'Please enter SSH / FTP login.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'ssh_ftp_pwd_error' =&gt; esc_html__( 'Please enter SSH / FTP password.', 'buddypress-media' ), &nbsp;</div></li><li><div>                'all_fields_error' =&gt; esc_html__( 'Please fill all the fields.', 'buddypress-media' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wp_localize_script( 'rtmedia-admin', 'rtmedia_admin_support_strings', $rtmedia_admin_support_strings );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** Only one CSS file should enqueue */&nbsp;</div></li><li><div>            wp_enqueue_style( 'rtmedia-admin', RTMEDIA_URL . 'app/assets/admin/css/admin' . $suffix . '.css', '', RTMEDIA_VERSION );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /** This CSS is using for &quot;Right Now in rtMedia&quot; Widget section on Dashboard */&nbsp;</div></li><li><div>            wp_enqueue_style( 'rtmedia-widget', RTMEDIA_URL . 'app/assets/admin/css/widget' . $suffix . '.css', '', RTMEDIA_VERSION );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add Admin Menu.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @global string 'buddypress-media'&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function menu() {&nbsp;</div></li><li><div>        add_menu_page( 'rtMedia', 'rtMedia', 'manage_options', 'rtmedia-settings', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'settings_page', &nbsp;</div></li><li><div> ), RTMEDIA_URL . 'app/assets/admin/img/rtmedia-logo.png', '40.1111' );&nbsp;</div></li><li><div>        add_submenu_page( 'rtmedia-settings', esc_html__( 'Settings', 'buddypress-media' ), esc_html__( 'Settings', 'buddypress-media' ), 'manage_options', 'rtmedia-settings', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'settings_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_submenu_page( 'rtmedia-settings', esc_html__( 'Addons', 'buddypress-media' ), esc_html__( 'Addons', 'buddypress-media' ), 'manage_options', 'rtmedia-addons', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'addons_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_submenu_page( 'rtmedia-settings', esc_html__( 'Support', 'buddypress-media' ), esc_html__( 'Support', 'buddypress-media' ), 'manage_options', 'rtmedia-support', array(&nbsp;</div></li><li><div>            $this, &nbsp;</div></li><li><div>            'support_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            add_submenu_page( 'rtmedia-settings', esc_html__( 'Themes', 'buddypress-media' ), esc_html__( 'Themes', 'buddypress-media' ), 'manage_options', 'rtmedia-themes', array(&nbsp;</div></li><li><div>                $this, &nbsp;</div></li><li><div>                'theme_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            add_submenu_page( 'rtmedia-settings', esc_html__( 'Hire Us', 'buddypress-media' ), esc_html__( 'Hire Us', 'buddypress-media' ), 'manage_options', 'rtmedia-hire-us', array(&nbsp;</div></li><li><div>                $this, &nbsp;</div></li><li><div>                'hire_us_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( has_filter( 'rtmedia_license_tabs' ) || has_action( 'rtmedia_addon_license_details' ) ) {&nbsp;</div></li><li><div>            add_submenu_page( 'rtmedia-settings', esc_html__( 'Licenses', 'buddypress-media' ), esc_html__( 'Licenses', 'buddypress-media' ), 'manage_options', 'rtmedia-license', array(&nbsp;</div></li><li><div>                $this, &nbsp;</div></li><li><div>                'license_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide rtmedia addon update notice.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_hide_addon_update_notice() {&nbsp;</div></li><li><div>        if ( check_ajax_referer( 'rtmedia-addon-update-notice-3_8', '_rtm_nonce' ) && rtmedia_update_site_option( 'rtmedia-addon-update-notice-3_8', 'hide' ) ) {&nbsp;</div></li><li><div>            echo '1';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            echo '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the BuddyPress Media Settings page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function settings_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-settings', 'buddypress-media' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the BuddyPress Privacy Settings page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function privacy_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-privacy' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the rtmedia Importer Page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rt_importer_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-importer' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the rtmedia convert videos page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function convert_videos_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-convert-videos' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the BuddyPress Media Addons page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function addons_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-addons' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the BuddyPress Media Support page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function support_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-support' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the rtmedia theme page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function theme_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-themes' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the rtmedia hire us page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function hire_us_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-hire-us' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function license_page() {&nbsp;</div></li><li><div>        $this-&gt;render_page( 'rtmedia-license' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render the rtmedia hire us page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access static&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string | array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static function get_current_tab() {&nbsp;</div></li><li><div>        $page = filter_input( INPUT_GET, 'page', FILTER_SANITIZE_STRING );&nbsp;</div></li><li><div>        return isset( $page ) ? $page : 'rtmedia-settings';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Render BPMedia Settings.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @global      string 'buddypress-media'&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  string $page&nbsp;</div></li><li><div>     * @param  array $option_group&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function render_page( $page, $option_group = null ) {&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;wrap bp-media-admin &lt;?php echo esc_attr( $this-&gt;get_current_tab() ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;div id=&quot;icon-buddypress-media&quot; class=&quot;icon32&quot;&gt;&lt;br&gt;&lt;/div&gt;&nbsp;</div></li><li><div>            &lt;div&gt;&nbsp;</div></li><li><div>                &lt;h2 class=&quot;nav-tab-wrapper&quot;&gt;&lt;?php $this-&gt;rtmedia_tabs(); ?&gt;&nbsp;</div></li><li><div>                    &lt;span class=&quot;alignright by&quot;&gt;&nbsp;</div></li><li><div>                        &lt;a class=&quot;rt-link&quot;&nbsp;</div></li><li><div>                           href=&quot;https://rtmedia.io/?utm_source=dashboard&utm_medium=plugin&utm_campaign=buddypress-media&quot;&nbsp;</div></li><li><div>                           target=&quot;_blank&quot;&nbsp;</div></li><li><div>                           title=&quot;rtCamp : &lt;?php esc_attr_e( 'Empowering The Web With WordPress', 'buddypress-media' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                            &lt;img src=&quot;&lt;?php echo esc_url( RTMEDIA_URL ); ?&gt;app/assets/admin/img/rtcamp-logo.png&quot; alt=&quot;rtCamp&quot;/&gt;&nbsp;</div></li><li><div>                        &lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;/span&gt;&nbsp;</div></li><li><div>                &lt;/h2&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;clearfix rtm-row-container&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;bp-media-settings-boxes&quot; class=&quot;bp-media-settings-boxes-container rtm-setting-container&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    if ( 'rtmedia-settings' === $page ) {&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                        &lt;form id=&quot;bp_media_settings_form&quot; name=&quot;bp_media_settings_form&quot; method=&quot;post&quot;&nbsp;</div></li><li><div>                              enctype=&quot;multipart/form-data&quot;&gt;&nbsp;</div></li><li><div>                        &lt;div class=&quot;bp-media-metabox-holder&quot;&gt;&nbsp;</div></li><li><div>                            &lt;div class=&quot;rtm-button-container top&quot;&gt;&nbsp;</div></li><li><div>                                &lt;?php $is_setting_save = filter_input( INPUT_GET, 'settings-saved', FILTER_VALIDATE_BOOLEAN );&nbsp;</div></li><li><div>                                if ( ! empty( $is_setting_save ) ) { ?&gt;&nbsp;</div></li><li><div>                                    &lt;div class=&quot;rtm-success rtm-fly-warning rtm-save-settings-msg&quot;&gt;&nbsp;</div></li><li><div>                                        &lt;?php esc_html_e( 'Settings saved successfully!', 'buddypress-media' ); ?&gt;&nbsp;</div></li><li><div>                                    &lt;/div&gt;&nbsp;</div></li><li><div>                                &lt;?php } ?&gt;&nbsp;</div></li><li><div>                                &lt;input type=&quot;hidden&quot; name=&quot;rtmedia-options-save&quot; value=&quot;true&quot;&gt;&nbsp;</div></li><li><div>                                &lt;input type=&quot;submit&quot;&nbsp;</div></li><li><div>                                       class=&quot;rtmedia-settings-submit button button-primary button-big&quot;&nbsp;</div></li><li><div>                                       value=&quot;&lt;?php esc_attr_e( 'Save Settings', 'buddypress-media' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            settings_fields( $option_group );&nbsp;</div></li><li><div>                            if ( 'rtmedia-settings' === $page ) {&nbsp;</div></li><li><div>                                echo '&lt;div id=&quot;rtm-settings-tabs&quot;&gt;';&nbsp;</div></li><li><div>                                $sub_tabs = $this-&gt;settings_sub_tabs();&nbsp;</div></li><li><div>                                RTMediaFormHandler::rtForm_settings_tabs_content( $page, $sub_tabs );&nbsp;</div></li><li><div>                                echo '&lt;/div&gt;';&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                do_settings_sections( $page );&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;div class=&quot;rtm-button-container bottom&quot;&gt;&nbsp;</div></li><li><div>                                &lt;div class=&quot;rtm-social-links alignleft&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;a href=&quot;http://twitter.com/rtMediaWP&quot; class=&quot;twitter&quot; target=&quot;_blank&quot;&gt;&lt;span&nbsp;</div></li><li><div>                                            class=&quot;dashicons dashicons-twitter&quot;&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;a href=&quot;https://www.facebook.com/rtmediawp&quot; class=&quot;facebook&quot;&nbsp;</div></li><li><div>                                       target=&quot;_blank&quot;&gt;&lt;span class=&quot;dashicons dashicons-facebook&quot;&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;a href=&quot;http://profiles.wordpress.org/rtcamp&quot; class=&quot;wordpress&quot;&nbsp;</div></li><li><div>                                       target=&quot;_blank&quot;&gt;&lt;span class=&quot;dashicons dashicons-wordpress&quot;&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;a href=&quot;https://rtmedia.io/feed/&quot; class=&quot;rss&quot; target=&quot;_blank&quot;&gt;&lt;span&nbsp;</div></li><li><div>                                            class=&quot;dashicons dashicons-rss&quot;&gt;&lt;/span&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                &lt;input type=&quot;hidden&quot; name=&quot;rtmedia-options-save&quot; value=&quot;true&quot;&gt;&nbsp;</div></li><li><div>                                &lt;input type=&quot;submit&quot;&nbsp;</div></li><li><div>                                       class=&quot;rtmedia-settings-submit button button-primary button-big&quot;&nbsp;</div></li><li><div>                                       value=&quot;&lt;?php esc_attr_e( 'Save Settings', 'buddypress-media' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;/form&gt;&lt;?php&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                        &lt;div class=&quot;bp-media-metabox-holder&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            if ( 'rtmedia-addons' === $page ) {&nbsp;</div></li><li><div>                                RTMediaAddon::render_addons( $page );&nbsp;</div></li><li><div>                            } else if ( 'rtmedia-support' === $page ) {&nbsp;</div></li><li><div>                                $rtmedia_support = new RTMediaSupport( false );&nbsp;</div></li><li><div>                                $rtmedia_support-&gt;render_support( $page );&nbsp;</div></li><li><div>                            } else if ( 'rtmedia-themes' === $page ) {&nbsp;</div></li><li><div>                                RTMediaThemes::render_themes( $page );&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                if ( 'rtmedia-license' === $page ) {&nbsp;</div></li><li><div>                                    RTMediaLicense::render_license( $page );&nbsp;</div></li><li><div>                                } else {&nbsp;</div></li><li><div>                                    do_settings_sections( $page );&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            do_action( 'rtmedia_admin_page_insert', $page );&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        do_action( 'rtmedia_admin_page_append', $page );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;metabox-holder bp-media-metabox-holder rtm-sidebar&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php $this-&gt;admin_sidebar(); ?&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt;&lt;!-- .bp-media-admin --&gt;&lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Adds a tab for Media settings in the BuddyPress settings page&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param       void&nbsp;</div></li><li><div>     * @param       void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string $tabs_html&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function tab() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs_html = '';&nbsp;</div></li><li><div>        $idle_class = 'nav-tab';&nbsp;</div></li><li><div>        $active_class = 'nav-tab nav-tab-active';&nbsp;</div></li><li><div>        $tabs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check to see which tab we are on&nbsp;</div></li><li><div>        $tab = $this-&gt;get_current_tab();&nbsp;</div></li><li><div>        /** rtMedia */&nbsp;</div></li><li><div>        $tabs[] = array(&nbsp;</div></li><li><div>            'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-settings' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'rtMedia', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'rtMedia', 'buddypress-media' ), &nbsp;</div></li><li><div>            'class' =&gt; ( 'rtmedia-settings' === $tab || 'rtmedia-addons' === $tab || 'rtmedia-support' === $tab || 'rtmedia-importer' === $tab ) ? $active_class : $idle_class, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $tabs as $tab ) {&nbsp;</div></li><li><div>            echo '&lt;a id=&quot;bp-media&quot; title= &quot;' . esc_attr( $tab['title'] ) . '&quot;  href=&quot;' . esc_url( $tab['href'] ) . '&quot; class=&quot;' . esc_attr( $tab['class'] ) . '&quot;&gt;' . esc_html( $tab['name'] ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Create core admin tabs.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function rtmedia_tabs() {&nbsp;</div></li><li><div>        // Declare local variables&nbsp;</div></li><li><div>        $idle_class = 'nav-tab';&nbsp;</div></li><li><div>        $active_class = 'nav-tab nav-tab-active';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Setup core admin tabs&nbsp;</div></li><li><div>        $tabs = array(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-settings' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'Settings', 'buddypress-media' ), &nbsp;</div></li><li><div>                'slug' =&gt; 'rtmedia-settings', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-addons' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'Addons', 'buddypress-media' ), &nbsp;</div></li><li><div>                'slug' =&gt; 'rtmedia-addons', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_rtmedia_vip_plugin() ) {&nbsp;</div></li><li><div>            $tabs[] = array(&nbsp;</div></li><li><div>                'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-themes' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'Themes', 'buddypress-media' ), &nbsp;</div></li><li><div>                'slug' =&gt; 'rtmedia-themes', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $tabs[] = array(&nbsp;</div></li><li><div>                'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-hire-us' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'Hire Us', 'buddypress-media' ), &nbsp;</div></li><li><div>                'slug' =&gt; 'rtmedia-hire-us', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[] = array(&nbsp;</div></li><li><div>            'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-support' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Support', 'buddypress-media' ), &nbsp;</div></li><li><div>            'slug' =&gt; 'rtmedia-support', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( has_filter( 'rtmedia_license_tabs' ) || has_action( 'rtmedia_addon_license_details' ) ) {&nbsp;</div></li><li><div>            $tabs[] = array(&nbsp;</div></li><li><div>                'href' =&gt; get_admin_url( null, esc_url( add_query_arg( array( 'page' =&gt; 'rtmedia-license' ), 'admin.php' ) ) ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'Licenses', 'buddypress-media' ), &nbsp;</div></li><li><div>                'slug' =&gt; 'rtmedia-license', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs = apply_filters( 'media_add_tabs', $tabs );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Loop through tabs and build navigation&nbsp;</div></li><li><div>        foreach ( array_values( $tabs ) as $tab_data ) {&nbsp;</div></li><li><div>            $is_current = (bool) ( $tab_data['slug'] === $this-&gt;get_current_tab() );&nbsp;</div></li><li><div>            $tab_class = $is_current ? $active_class : $idle_class;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( isset( $tab_data['class'] ) && is_array( $tab_data['class'] ) ) {&nbsp;</div></li><li><div>                $tab_class .= ' ' . implode( ' ', $tab_data['class'] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo '&lt;a href=&quot;' . esc_url( $tab_data['href'] ) . '&quot; class=&quot;' . esc_attr( $tab_class ) . '&quot;&gt;' . esc_html( $tab_data['name'] ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Create settings content tabs.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  string $page&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function settings_content_tabs( $page ) {&nbsp;</div></li><li><div>        global $wp_settings_sections, $wp_settings_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! isset( $wp_settings_sections ) || ! isset( $wp_settings_sections[ $page ] ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( (array) $wp_settings_sections[ $page ] as $section ) {&nbsp;</div></li><li><div>            if ( $section['title'] ) {&nbsp;</div></li><li><div>                ?&gt;&lt;h3&gt;&lt;?php esc_html( $section['title'] ); ?&gt;&lt;/h3&gt;&lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $section['callback'] ) {&nbsp;</div></li><li><div>                call_user_func( $section['callback'], $section );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! isset( $wp_settings_fields ) || ! isset( $wp_settings_fields[ $page ] ) || ! isset( $wp_settings_fields[ $page ][ $section['id'] ] ) ) {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo '&lt;table class=&quot;form-table&quot;&gt;';&nbsp;</div></li><li><div>            do_settings_fields( $page, $section['id'] );&nbsp;</div></li><li><div>            echo '&lt;/table&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Adds a sub tabs to the BuddyPress Media settings page&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param       void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array $tabs&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function settings_sub_tabs() {&nbsp;</div></li><li><div>        $tabs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check to see which tab we are on&nbsp;</div></li><li><div>        $tab = $this-&gt;get_current_tab();&nbsp;</div></li><li><div>        /** rtMedia */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[7] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-display', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-desktop', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'Display', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Display', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'display_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( class_exists( 'BuddyPress' ) ) {&nbsp;</div></li><li><div>            $tabs[20] = array(&nbsp;</div></li><li><div>                'href' =&gt; '#rtmedia-bp', &nbsp;</div></li><li><div>                'icon' =&gt; 'dashicons-groups', &nbsp;</div></li><li><div>                'title' =&gt; esc_html__( 'rtMedia BuddyPress', 'buddypress-media' ), &nbsp;</div></li><li><div>                'name' =&gt; esc_html__( 'BuddyPress', 'buddypress-media' ), &nbsp;</div></li><li><div>                'callback' =&gt; array( 'RTMediaFormHandler', 'buddypress_content' ), //change it to BuddyPress Content&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[30] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-types', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-editor-video', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'rtMedia Types', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Types', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'types_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[40] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-sizes', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-editor-expand', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'rtMedia Sizes', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Media Sizes', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'sizes_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[50] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-privacy', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-lock', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'rtMedia Privacy', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Privacy', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'privacy_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $tabs[60] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-custom-css-settings', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-clipboard', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'rtMedia Custom CSS', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Custom CSS', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'custom_css_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs = apply_filters( 'rtmedia_add_settings_sub_tabs', $tabs, $tab );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tabs[] = array(&nbsp;</div></li><li><div>            'href' =&gt; '#rtmedia-general', &nbsp;</div></li><li><div>            'icon' =&gt; 'dashicons-admin-tools', &nbsp;</div></li><li><div>            'title' =&gt; esc_html__( 'Other Settings', 'buddypress-media' ), &nbsp;</div></li><li><div>            'name' =&gt; esc_html__( 'Other Settings', 'buddypress-media' ), &nbsp;</div></li><li><div>            'callback' =&gt; array( 'RTMediaFormHandler', 'general_content' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $tabs;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Multisite Save Options - http://wordpress.stackexchange.com/questions/64968/settings-api-in-multisite-missing-update-message#answer-72503&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     * @global type $rtmedia_admin&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param       void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function save_multisite_options() {&nbsp;</div></li><li><div>        global $rtmedia_admin;&nbsp;</div></li><li><div>        do_action( 'rtmedia_sanitize_settings', wp_unslash( $_POST ) ); // @codingStandardsIgnoreLine&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $rtmedia_options = filter_input( INPUT_POST, 'rtmedia_options' );&nbsp;</div></li><li><div>        if ( isset( $rtmedia_options ) ) {&nbsp;</div></li><li><div>            //todo: How we can sanitize array?&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia_options', $rtmedia_options );&nbsp;</div></li><li><div>            //&nbsp;</div></li><li><div>            // redirect to settings page in network&nbsp;</div></li><li><div>            wp_redirect( esc_url_raw( add_query_arg( array(&nbsp;</div></li><li><div>                'page' =&gt; 'rtmedia-settings', &nbsp;</div></li><li><div>                'updated' =&gt; 'true', &nbsp;</div></li><li><div> ), ( is_multisite() ? network_admin_url( 'admin.php' ) : admin_url( 'admin.php' ) ) ) ) );&nbsp;</div></li><li><div>            exit;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Admin Sidebar&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @access public&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param       void&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function admin_sidebar() {&nbsp;</div></li><li><div>        do_action( 'rtmedia_before_default_admin_widgets' );&nbsp;</div></li><li><div>        $current_user = wp_get_current_user();&nbsp;</div></li><li><div>        $message = sprintf( esc_html__( 'I use @rtMediaWP http://rt.cx/rtmedia on %s', 'buddypress-media' ), home_url() );&nbsp;</div></li><li><div>        $addons = '&lt;div id=&quot;social&quot; class=&quot;rtm-social-share&quot;&gt;&nbsp;</div></li><li><div>                        &lt;p&gt;&lt;a href=&quot;http://twitter.com/home/?status=' . esc_attr( $message ) . '&quot; class=&quot;button twitter&quot; target= &quot;_blank&quot; title=&quot;' . esc_attr__( 'Post to Twitter Now', 'buddypress-media' ) . '&quot;&gt;' . esc_html__( 'Post to Twitter', 'buddypress-media' ) . '&lt;span class=&quot;dashicons dashicons-twitter&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;p&gt;&lt;a href=&quot;https://www.facebook.com/sharer/sharer.php?u=https://rtmedia.io/&quot; class=&quot;button facebook&quot; target=&quot;_blank&quot; title=&quot;' . esc_attr__( 'Share on Facebook Now', 'buddypress-media' ) . '&quot;&gt;' . esc_html__( 'Share on Facebook', 'buddypress-media' ) . '&lt;span class=&quot;dashicons dashicons-facebook&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;p&gt;&lt;a href=&quot;https://wordpress.org/support/plugin/buddypress-media/reviews/#new-post&quot; class=&quot;button wordpress&quot; target= &quot;_blank&quot; title=&quot;' . esc_attr__( 'Rate rtMedia on Wordpress.org', 'buddypress-media' ) . '&quot;&gt;' . esc_html__( 'Rate on Wordpress.org', 'buddypress-media' ) . '&lt;span class=&quot;dashicons dashicons-wordpress&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;p&gt;&lt;a href=&quot;' . sprintf( '%s', 'https://rtmedia.io/feed/' ) . '&quot; class=&quot;button rss&quot; target=&quot;_blank&quot; title=&quot;' . esc_attr__( 'Subscribe to our Feeds', 'buddypress-media' ) . '&quot;&gt;' . esc_html__( 'Subscribe to our Feeds', 'buddypress-media' ) . '&lt;span class=&quot;dashicons dashicons-rss&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        new RTMediaAdminWidget( 'spread-the-word', esc_html__( 'Spread the Word', 'buddypress-media' ), $addons );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $branding = '&lt;form action=&quot;http://rtcamp.us1.list-manage1.com/subscribe/post?u=85b65c9c71e2ba3fab8cb1950&amp;id=9e8ded4470&quot; method=&quot;post&quot; id=&quot;mc-embedded-subscribe-form&quot; name=&quot;mc-embedded-subscribe-form&quot; class=&quot;validate&quot; target=&quot;_blank&quot; novalidate&gt;&nbsp;</div></li><li><div>                        &lt;div class=&quot;mc-field-group&quot;&gt;&nbsp;</div></li><li><div>                            &lt;input type=&quot;email&quot; value=&quot;' . esc_attr( $current_user-&gt;user_email ) . '&quot; name=&quot;EMAIL&quot; placeholder=&quot;Email&quot; class=&quot;required email&quot; id=&quot;mce-EMAIL&quot;&gt;&nbsp;</div></li><li><div>                            &lt;input style=&quot;display:none;&quot; type=&quot;checkbox&quot; checked=&quot;checked&quot; value=&quot;1&quot; name=&quot;group[1721][1]&quot; id=&quot;mce-group[1721]-1721-0&quot;&gt;&nbsp;</div></li><li><div>                            &lt;input type=&quot;submit&quot; value=&quot;' . esc_attr__( 'Subscribe', 'buddypress-media' ) . '&quot; name=&quot;subscribe&quot; id=&quot;mc-embedded-subscribe&quot; class=&quot;button&quot;&gt;&nbsp;</div></li><li><div>                            &lt;div id=&quot;mce-responses&quot; class=&quot;clear&quot;&gt;&nbsp;</div></li><li><div>                                &lt;div class=&quot;response&quot; id=&quot;mce-error-response&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                                &lt;div class=&quot;response&quot; id=&quot;mce-success-response&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;/form&gt;';&nbsp;</div></li><li><div>        new RTMediaAdminWidget( 'branding', esc_html__( 'Subscribe', 'buddypress-media' ), $branding );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        do_action( 'rtmedia_after_default_admin_widgets' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function linkback() {&nbsp;</div></li><li><div>        //Fixme: remove code looks like old setting save code new code at app/helper/RTMediaSettings.php&nbsp;</div></li><li><div>        $linkback = filter_input( INPUT_POST, 'linkback' );&nbsp;</div></li><li><div>        if ( isset( $linkback ) && $linkback ) {&nbsp;</div></li><li><div>            return rtmedia_update_site_option( 'rtmedia-add-linkback', true );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            return rtmedia_update_site_option( 'rtmedia-add-linkback', false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function convert_videos_mailchimp_send() {&nbsp;</div></li><li><div>        //todo: nonce required&nbsp;</div></li><li><div>        $interested = filter_input( INPUT_POST, 'linkback', FILTER_SANITIZE_STRING );&nbsp;</div></li><li><div>        $choice = filter_input( INPUT_POST, 'choice', FILTER_SANITIZE_STRING );&nbsp;</div></li><li><div>        $url = filter_input( INPUT_POST, 'url', FILTER_SANITIZE_URL );&nbsp;</div></li><li><div>        $email = filter_input( INPUT_POST, 'email', FILTER_SANITIZE_EMAIL );&nbsp;</div></li><li><div>        if ( 'Yes' === $interested && ! empty( $choice ) ) {&nbsp;</div></li><li><div>            wp_remote_get( esc_url_raw( add_query_arg( array(&nbsp;</div></li><li><div>                'rtmedia-convert-videos-form' =&gt; 1, &nbsp;</div></li><li><div>                'choice' =&gt; $choice, &nbsp;</div></li><li><div>                'url' =&gt; $url, &nbsp;</div></li><li><div>                'email' =&gt; $email, &nbsp;</div></li><li><div> ), 'https://rtmedia.io/' ) ) );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia-survey', 0 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        esc_html_e( 'Thank you for your time.', 'buddypress-media' );&nbsp;</div></li><li><div>        wp_die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function video_transcoding_survey_response() {&nbsp;</div></li><li><div>        $survey_done = filter_input( INPUT_GET, 'survey-done', FILTER_SANITIZE_STRING );&nbsp;</div></li><li><div>        if ( isset( $survey_done ) && ( md5( 'survey-done' ) === $survey_done ) ) {&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia-survey', 0 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function plugin_meta_premium_addon_link( $plugin_meta, $plugin_file ) {&nbsp;</div></li><li><div>        if ( plugin_basename( RTMEDIA_PATH . 'index.php' ) === $plugin_file ) {&nbsp;</div></li><li><div>            $plugin_meta[] = '&lt;a href=&quot;https://rtmedia.io/products/?utm_source=dashboard&#038;utm_medium=plugin&#038;utm_campaign=buddypress-media&quot; title=&quot;' . esc_attr__( 'Premium Add-ons', 'buddypress-media' ) . '&quot;&gt;' . esc_html__( 'Premium Add-ons', 'buddypress-media' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $plugin_meta;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function upload_filetypes_error() {&nbsp;</div></li><li><div>        global $rtmedia;&nbsp;</div></li><li><div>        $upload_filetypes = rtmedia_get_site_option( 'upload_filetypes', 'jpg jpeg png gif' );&nbsp;</div></li><li><div>        $upload_filetypes = explode( ' ', $upload_filetypes );&nbsp;</div></li><li><div>        $flag = false;&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['images_enabled'] ) && $rtmedia-&gt;options['images_enabled'] ) {&nbsp;</div></li><li><div>            $not_supported_image = array_diff( array( 'jpg', 'jpeg', 'png', 'gif' ), $upload_filetypes );&nbsp;</div></li><li><div>            if ( ! empty( $not_supported_image ) ) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;error upload-filetype-network-settings-error&quot;&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                        &lt;?php wp_nonce_field( '_rtm_file_type_error_', 'rtm-file-type-error' ); ?&gt;&nbsp;</div></li><li><div>                        &lt;?php printf( esc_html__( 'You have images enabled on rtMedia but your network allowed filetypes do not permit uploading of %s. Click ', 'buddypress-media' ), esc_html( implode( ', ', $not_supported_image ) ) ) ?&gt;&nbsp;</div></li><li><div>                        &lt;a href='&lt;?php echo esc_url( network_admin_url( 'settings.php#upload_filetypes' ) );?&gt;'&gt;&lt;?php esc_html_e( 'here', 'buddypress-media' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( ' to change your settings manually.', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;strong&gt;&lt;?php esc_html_e( 'Recommended:', 'buddypress-media' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                        &lt;input type=&quot;button&quot; class=&quot;button update-network-settings-upload-filetypes&quot; value=&quot;&lt;?php esc_attr_e( 'Update Network Settings Automatically', 'buddypress-media' );?&gt;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;img style=&quot;display:none;&quot; src=&quot;&lt;?php echo esc_url( admin_url( 'images/wpspin_light.gif' ) ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $flag = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['videos_enabled'] ) && $rtmedia-&gt;options['videos_enabled'] ) {&nbsp;</div></li><li><div>            if ( ! in_array( 'mp4', $upload_filetypes, true ) ) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;error upload-filetype-network-settings-error&quot;&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'You have video enabled on BuddyPress Media but your network allowed filetypes do not permit uploading of mp4. Click ', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;a href='&lt;?php echo esc_url( network_admin_url( 'settings.php#upload_filetypes' ) );?&gt;'&gt;&lt;?php esc_html_e( 'here', 'buddypress-media' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( ' to change your settings manually.', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;strong&gt;&lt;?php esc_html_e( 'Recommended:', 'buddypress-media' );?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                        &lt;input type=&quot;button&quot; class=&quot;button update-network-settings-upload-filetypes&quot; value=&quot;&lt;?php esc_attr_e( 'Update Network Settings Automatically', 'buddypress-media' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;img style=&quot;display:none;&quot; src=&quot;&lt;?php echo esc_url( admin_url( 'images/wpspin_light.gif' ) ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $flag = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['audio_enabled'] ) && $rtmedia-&gt;options['audio_enabled'] ) {&nbsp;</div></li><li><div>            if ( ! in_array( 'mp3', $upload_filetypes, true ) ) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;error upload-filetype-network-settings-error&quot;&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'You have audio enabled on BuddyPress Media but your network allowed filetypes do not permit uploading of mp3. Click ', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;a href='&lt;?php echo esc_url( network_admin_url( 'settings.php#upload_filetypes' ) );?&gt;'&gt;&lt;?php esc_html_e( 'here', 'buddypress-media' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( ' to change your settings manually.', 'buddypress-media' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;strong&gt;&lt;?php esc_html_e( 'Recommended:', 'buddypress-media' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                        &lt;input type=&quot;button&quot; class=&quot;button update-network-settings-upload-filetypes&quot; value=&quot;&lt;?php esc_attr_e( 'Update Network Settings Automatically', 'buddypress-media' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;img style=&quot;display:none;&quot; src=&quot;&lt;?php echo esc_url( admin_url( 'images/wpspin_light.gif' ) ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $flag = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( $flag ) {&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                jQuery('.upload-filetype-network-settings-error').on('click', '.update-network-settings-upload-filetypes', function () {&nbsp;</div></li><li><div>                    jQuery('.update-network-settings-upload-filetypes').siblings('img').show();&nbsp;</div></li><li><div>                    jQuery('.update-network-settings-upload-filetypes').prop('disabled', true);&nbsp;</div></li><li><div>                    jQuery.post(ajaxurl, {action: 'rtmedia_correct_upload_filetypes', _rtm_nonce: jQuery('rtm-file-type-error').val()}, function (response) {&nbsp;</div></li><li><div>                        if (response) {&nbsp;</div></li><li><div>                            jQuery('.upload-filetype-network-settings-error:first').after('&lt;div style=&quot;display: none;&quot; class=&quot;updated rtmedia-network-settings-updated-successfully&quot;&gt;&lt;p&gt;&lt;?php esc_html_e( 'Network settings updated successfully.', 'buddypress-media' ); ?&gt;&lt;/p&gt;&lt;/div&gt;');&nbsp;</div></li><li><div>                            jQuery('.upload-filetype-network-settings-error').remove();&nbsp;</div></li><li><div>                            jQuery('.bp-media-network-settings-updated-successfully').show();&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function correct_upload_filetypes() {&nbsp;</div></li><li><div>        if ( ! check_ajax_referer( '_rtm_file_type_error_', '_rtm_nonce' ) ) {&nbsp;</div></li><li><div>            wp_send_json( false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        global $rtmedia;&nbsp;</div></li><li><div>        $upload_filetypes_orig = $upload_filetypes = rtmedia_get_site_option( 'upload_filetypes', 'jpg jpeg png gif' );&nbsp;</div></li><li><div>        $upload_filetypes = explode( ' ', $upload_filetypes );&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['images_enabled'] ) && $rtmedia-&gt;options['images_enabled'] ) {&nbsp;</div></li><li><div>            $not_supported_image = array_diff( array( 'jpg', 'jpeg', 'png', 'gif' ), $upload_filetypes );&nbsp;</div></li><li><div>            if ( ! empty( $not_supported_image ) ) {&nbsp;</div></li><li><div>                $update_image_support = null;&nbsp;</div></li><li><div>                foreach ( $not_supported_image as $ns ) {&nbsp;</div></li><li><div>                    $update_image_support .= ' ' . $ns;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ( $update_image_support ) {&nbsp;</div></li><li><div>                    $upload_filetypes_orig .= $update_image_support;&nbsp;</div></li><li><div>                    rtmedia_update_site_option( 'upload_filetypes', $upload_filetypes_orig );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['videos_enabled'] ) && $rtmedia-&gt;options['videos_enabled'] ) {&nbsp;</div></li><li><div>            if ( ! in_array( 'mp4', $upload_filetypes, true ) ) {&nbsp;</div></li><li><div>                $upload_filetypes_orig .= ' mp4';&nbsp;</div></li><li><div>                rtmedia_update_site_option( 'upload_filetypes', $upload_filetypes_orig );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( isset( $rtmedia-&gt;options['audio_enabled'] ) && $rtmedia-&gt;options['audio_enabled'] ) {&nbsp;</div></li><li><div>            if ( ! in_array( 'mp3', $upload_filetypes, true ) ) {&nbsp;</div></li><li><div>                $upload_filetypes_orig .= ' mp3';&nbsp;</div></li><li><div>                rtmedia_update_site_option( 'upload_filetypes', $upload_filetypes_orig );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo true;&nbsp;</div></li><li><div>        wp_die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function rtmedia_update_template_notice() {&nbsp;</div></li><li><div>        $site_option = rtmedia_get_site_option( 'rtmedia-update-template-notice-v3_9_4' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $site_option || 'hide' !== $site_option ) {&nbsp;</div></li><li><div>            rtmedia_update_site_option( 'rtmedia-update-template-notice-v3_9_4', 'show' );&nbsp;</div></li><li><div>            if ( is_dir( get_template_directory() . '/rtmedia' ) ) {&nbsp;</div></li><li><div>                echo '&lt;div class=&quot;error rtmedia-update-template-notice&quot;&gt;&lt;p&gt;' . esc_html__( 'Please update rtMedia template files if you have overridden the default rtMedia templates in your theme. If not, you can ignore and hide this notice.', 'buddypress-media' ) . '&lt;a href=&quot;#&quot; onclick=&quot;rtmedia_hide_template_override_notice(\'' . esc_js( wp_create_nonce( 'rtmedia_template_notice' ) ) . '\')&quot; style=&quot;float:right&quot;&gt;' . esc_html__( 'Hide', 'buddypress-media' ) . '&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                    function rtmedia_hide_template_override_notice( rtmedia_template_notice_nonce ) {&nbsp;</div></li><li><div>                        var data = {action: 'rtmedia_hide_template_override_notice', _rtm_nonce: rtmedia_template_notice_nonce };&nbsp;</div></li><li><div>                        jQuery.post(ajaxurl, data, function (response) {&nbsp;</div></li><li><div>                            response = response.trim();&nbsp;</div></li><li><div>                            if ('1' === response)&nbsp;</div></li><li><div>                                jQuery('.rtmedia-update-template-notice').remove();&nbsp;</div></li><li><div>                        });&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                &lt;/script&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function rtmedia_hide_template_override_notice() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( check_ajax_referer( 'rtmedia_template_notice', '_rtm_nonce' ) && rtmedia_update_site_option( 'rtmedia-update-template-notice-v3_9_4', 'hide' ) ) {&nbsp;</div></li><li><div>            echo '1';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            echo '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        die();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function render_admin_ui( $page, $sub_tabs, $args = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // wrapper class&nbsp;</div></li><li><div>        $wrapper_class = '';&nbsp;</div></li><li><div>        if ( ! empty( $args['wrapper_class'] ) && is_array( $args['wrapper_class'] ) ) {&nbsp;</div></li><li><div>            $wrapper_class = implode( ' ', $args['wrapper_class'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // tabs&nbsp;</div></li><li><div>        if ( 'rtmedia-settings' === $page ) {&nbsp;</div></li><li><div>            $sub_tabs = apply_filters( 'rtmedia_pro_settings_tabs_content', $sub_tabs );&nbsp;</div></li><li><div>            ksort( $sub_tabs );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tab_position_class = 'rtm-vertical-tabs';&nbsp;</div></li><li><div>        if ( 'rtmedia-addons' === $page ) {&nbsp;</div></li><li><div>            $tab_position_class = 'rtm-horizotanl-tabs';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div&nbsp;</div></li><li><div>            class=&quot;clearfix &lt;?php echo esc_attr( $tab_position_class ); ?&gt; rtm-admin-tab-container &lt;?php echo esc_attr( $wrapper_class ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;ul class=&quot;rtm-tabs&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $i = 1;&nbsp;</div></li><li><div>                foreach ( $sub_tabs as $tab ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // tab status&nbsp;</div></li><li><div>                    $active_class = $error_class = '';&nbsp;</div></li><li><div>                    if ( ! empty( $tab['args'] ) && ( empty( $tab['args']['status'] ) || 'valid' !== $tab['args']['status'] ) ) {&nbsp;</div></li><li><div>                        $error_class = 'error';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ( 1 === $i ) {&nbsp;</div></li><li><div>                        $active_class = 'active';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // tab icon&nbsp;</div></li><li><div>                    $icon = '';&nbsp;</div></li><li><div>                    if ( isset( $tab['icon'] ) && ! empty( $tab['icon'] ) ) {&nbsp;</div></li><li><div>                        $icon = '&lt;i class=&quot;' . esc_attr( $tab['icon'] ) . ' dashicons rtmicon&quot;&gt;&lt;/i&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;li class=&quot;&lt;?php echo esc_attr( $active_class ) ?&gt; &lt;?php echo esc_attr( $error_class ) ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;a id=&quot;tab-&lt;?php echo esc_attr( substr( $tab['href'], 1 ) ) ?&gt;&quot; title=&quot;&lt;?php echo esc_attr( $tab['title'] ); ?&gt;&quot;&nbsp;</div></li><li><div>                           href=&quot;&lt;?php echo esc_url( $tab['href'] ); ?&gt;&quot;&nbsp;</div></li><li><div>                           class=&quot;rtmedia-tab-title &lt;?php echo esc_attr( sanitize_title( $tab['name'] ) ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php echo $icon ; // @codingStandardsIgnoreLine ?&gt;&lt;span&gt;&lt;?php echo esc_html( $tab['name'] ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                        &lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;/li&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $i ++;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>            &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;tabs-content rtm-tabs-content&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $k = 1;&nbsp;</div></li><li><div>                foreach ( $sub_tabs as $tab ) {&nbsp;</div></li><li><div>                    $active_class = '';&nbsp;</div></li><li><div>                    if ( 1 === $k ) {&nbsp;</div></li><li><div>                        $active_class = ' active';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $k ++;&nbsp;</div></li><li><div>                    if ( isset( $tab['icon'] ) && ! empty( $tab['icon'] ) ) {&nbsp;</div></li><li><div>                        $icon = '&lt;i class=&quot;' . esc_attr( $tab['icon'] ) . '&quot;&gt;&lt;/i&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $tab_without_hash = explode( '#', $tab['href'] );&nbsp;</div></li><li><div>                    $tab_without_hash = $tab_without_hash[1];&nbsp;</div></li><li><div>                    echo '&lt;div class=&quot;rtm-content' . esc_attr( $active_class ) . '&quot; id=&quot;' . esc_attr( $tab_without_hash ) . '&quot;&gt;';&nbsp;</div></li><li><div>                    if ( isset( $tab['args'] ) ) {&nbsp;</div></li><li><div>                        call_user_func( $tab['callback'], $page, $tab['args'] );&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        call_user_func( $tab['callback'], $page );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    echo '&lt;/div&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * To remove setting saved parameter from url once satting saved&nbsp;</div></li><li><div>     * Add parameter to this array WP will remove variable from Query string&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param $removable_query_args&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array $removable_query_args&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function removable_query_args( $removable_query_args ) {&nbsp;</div></li><li><div>        $page = filter_input( INPUT_GET, 'page', FILTER_SANITIZE_STRING );&nbsp;</div></li><li><div>        if ( isset( $page ) && 'rtmedia-settings' === $page ) {&nbsp;</div></li><li><div>            $removable_query_args[] = 'settings-saved';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $removable_query_args;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Display invlaid license notice to admins.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 4.1.7&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return  void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function rtm_addon_license_notice() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $_GET['page'] ) && 'rtmedia-license' === $_GET['page'] ) {&nbsp;</div></li><li><div>            $my_account = 'https://rtmedia.io/my-account';&nbsp;</div></li><li><div>            $license_doc = 'https://rtmedia.io/docs/license/';&nbsp;</div></li><li><div>            $message = sprintf(&nbsp;</div></li><li><div>                __( 'Your license keys can be found on &lt;a href=&quot;%s&quot;&gt;my-account&lt;/a&gt; page. For more details, please refer to &lt;a href=&quot;%s&quot;&gt;License documentation&lt;/a&gt; page.', 'buddypress-media' ), &nbsp;</div></li><li><div>                $my_account, $license_doc&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            echo '&lt;div class=&quot;notice&quot;&gt;&lt;p&gt;' . $message . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $addons = apply_filters( 'rtmedia_license_tabs', array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $addons ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $message = '';&nbsp;</div></li><li><div>        foreach ( $addons as $addon ) {&nbsp;</div></li><li><div>            if ( empty( $addon['args']['status'] ) || 'valid' !== $addon['args']['status'] ) {&nbsp;</div></li><li><div>                $message = sprintf(&nbsp;</div></li><li><div>                    __( 'We found an invalid or expired license key for an rtMedia add-on. Please go to the &lt;a href=&quot;%s&quot;&gt;Licenses page&lt;/a&gt; to fix this issue.', 'buddypress-media' ), &nbsp;</div></li><li><div>                    admin_url( 'admin.php?page=rtmedia-license' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                echo '&lt;div class=&quot;error&quot;&gt;&lt;p&gt;' . $message . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 4.1.8</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.3.1/classes/rtmedia_admin/" class="active">4.3.1</a></li><li><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.3/classes/rtmedia_admin/" class="">4.3</a></li><li><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.2.1/classes/rtmedia_admin/" class="">4.2.1</a></li><li><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.2/classes/rtmedia_admin/" class="">4.2</a></li><li><a href="http://hookr.io/plugins/rtmedia-for-wordpress-buddypress-and-bbpress/4.1.8/classes/rtmedia_admin/" class="">4.1.8</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>RTMediaAdmin</li><li><span></span>wp-plugin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>