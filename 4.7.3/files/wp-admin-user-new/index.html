<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="wordpress" data-version="4.7.3" data-type="file" data-id="4613"><head xmlns="http://www.w3.org/1999/xhtml"><title> wp-admin-user-new | file | WordPress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, wordpress, 4.7.3" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=9ff876f6b6a93160a420f5cebcc7f742' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/wp-admin-user-new/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-user-new%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fwp-admin-user-new%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"wordpress-4.7.3-file-wp-admin-user-new","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wp-admin-user-new" class="blog single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.3." href="http://hookr.io/4.7.3/" class="H_VERSION"><span property="name">4.7.3</span></a><meta property="position" content="2"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wp-admin-user-new</span><meta property="position" content="3"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="6309"><a href="http://hookr.io/4.7.3/all/" title="All">All <span class="count badge">6309</span></a></li><li class="" data-id="new" data-count="1"><a href="http://hookr.io/4.7.3/new/" title="New">New <span class="count badge">1</span></a></li><li class="" data-id="hooks" data-count="2532"><a href="http://hookr.io/4.7.3/hooks/" title="Hooks">Hooks <span class="count badge">2532</span></a></li><li class="" data-id="action" data-count="864"><a href="http://hookr.io/4.7.3/actions/" title="Actions">Actions <span class="count badge">864</span></a></li><li class="" data-id="filter" data-count="1668"><a href="http://hookr.io/4.7.3/filters/" title="Filters">Filters <span class="count badge">1668</span></a></li><li class="" data-id="class" data-count="351"><a href="http://hookr.io/4.7.3/classes/" title="Classes">Classes <span class="count badge">351</span></a></li><li class="" data-id="constant" data-count="566"><a href="http://hookr.io/4.7.3/constants/" title="Constants">Constants <span class="count badge">566</span></a></li><li class="" data-id="function" data-count="2852"><a href="http://hookr.io/4.7.3/functions/" title="Functions">Functions <span class="count badge">2852</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/4.7.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class="active"><a href="http://hookr.io/all/" title="Core">Core</a></li><li class=""><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/wp-admin/user-new.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * New User Administration Screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Administration</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** WordPress Administration Bootstrap */</span>&nbsp;</div></li><li><div>require_once( dirname( __FILE__ ) . '/admin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() ) {&nbsp;</div></li><li><div>  if ( ! current_user_can( 'create_users' ) && ! current_user_can( 'promote_users' ) ) {&nbsp;</div></li><li><div>      wp_die(&nbsp;</div></li><li><div>          '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'Sorry, you are not allowed to add users to this network.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>          403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>} elseif ( ! current_user_can( 'create_users' ) ) {&nbsp;</div></li><li><div>  wp_die(&nbsp;</div></li><li><div>      '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>      '&lt;p&gt;' . __( 'Sorry, you are not allowed to create users.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>      403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() ) {&nbsp;</div></li><li><div>  add_filter( 'wpmu_signup_user_notification_email', 'admin_created_user_email' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( isset($_REQUEST['action']) && 'adduser' == $_REQUEST['action'] ) {&nbsp;</div></li><li><div>  check_admin_referer( 'add-user', '_wpnonce_add-user' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $user_details = null;&nbsp;</div></li><li><div>  $user_email = wp_unslash( $_REQUEST['email'] );&nbsp;</div></li><li><div>  if ( false !== strpos( $user_email, '@' ) ) {&nbsp;</div></li><li><div>      $user_details = get_user_by( 'email', $user_email );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( is_super_admin() ) {&nbsp;</div></li><li><div>          $user_details = get_user_by( 'login', $user_email );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          wp_redirect( add_query_arg( array('update' =&gt; 'enter_email'), 'user-new.php' ) );&nbsp;</div></li><li><div>          die();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$user_details ) {&nbsp;</div></li><li><div>      wp_redirect( add_query_arg( array('update' =&gt; 'does_not_exist'), 'user-new.php' ) );&nbsp;</div></li><li><div>      die();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'promote_user', $user_details-&gt;ID ) ) {&nbsp;</div></li><li><div>      wp_die(&nbsp;</div></li><li><div>          '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'Sorry, you are not allowed to add users to this network.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>          403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Adding an existing user to this blog</span>&nbsp;</div></li><li><div>  $new_user_email = $user_details-&gt;user_email;&nbsp;</div></li><li><div>  $redirect = 'user-new.php';&nbsp;</div></li><li><div>  $username = $user_details-&gt;user_login;&nbsp;</div></li><li><div>  $user_id = $user_details-&gt;ID;&nbsp;</div></li><li><div>  if ( ( $username != null && !is_super_admin( $user_id ) ) && ( array_key_exists($blog_id, get_blogs_of_user($user_id)) ) ) {&nbsp;</div></li><li><div>      $redirect = add_query_arg( array('update' =&gt; 'addexisting'), 'user-new.php' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( isset( $_POST[ 'noconfirmation' ] ) && current_user_can( 'manage_network_users' ) ) {&nbsp;</div></li><li><div>          add_existing_user_to_blog( array( 'user_id' =&gt; $user_id, 'role' =&gt; $_REQUEST[ 'role' ] ) );&nbsp;</div></li><li><div>          $redirect = add_query_arg( array( 'update' =&gt; 'addnoconfirmation' , 'user_id' =&gt; $user_id ), 'user-new.php' );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $newuser_key = substr( md5( $user_id ), 0, 5 );&nbsp;</div></li><li><div>          add_option( 'new_user_' . $newuser_key, array( 'user_id' =&gt; $user_id, 'email' =&gt; $user_details-&gt;user_email, 'role' =&gt; $_REQUEST[ 'role' ] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $roles = get_editable_roles();&nbsp;</div></li><li><div>          $role = $roles[ $_REQUEST['role'] ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Fires immediately after a user is invited to join a site, but before the notification is sent.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 4.4.0</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param int    $user_id     The invited user's ID.</span>&nbsp;</div></li><li><div><span class="comment">           * @param array  $role        The role of invited user.</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $newuser_key The key of the invitation.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          do_action( 'invite_user', $user_id, $role, $newuser_key );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $switched_locale = switch_to_locale( get_user_locale( $user_details ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** translators: 1: Site name, 2: site URL, 3: role, 4: activation URL */</span>&nbsp;</div></li><li><div>          $message = __( 'Hi, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>You\'ve been invited to join \'%1$s\' at&nbsp;</div></li><li><div>%2$s with the role of %3$s.&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>Please click the following link to confirm the invite:&nbsp;</div></li><li><div>%4$s' );&nbsp;</div></li><li><div>          wp_mail( $new_user_email, sprintf( __( '[%s] Joining confirmation' ), wp_specialchars_decode( get_option( 'blogname' ) ) ), sprintf( $message, get_option( 'blogname' ), home_url(), wp_specialchars_decode( translate_user_role( $role['name'] ) ), home_url( &quot;/newbloguser/$newuser_key/&quot; ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $switched_locale ) {&nbsp;</div></li><li><div>              restore_previous_locale();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $redirect = add_query_arg( array('update' =&gt; 'add'), 'user-new.php' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  wp_redirect( $redirect );&nbsp;</div></li><li><div>  die();&nbsp;</div></li><li><div>} elseif ( isset($_REQUEST['action']) && 'createuser' == $_REQUEST['action'] ) {&nbsp;</div></li><li><div>  check_admin_referer( 'create-user', '_wpnonce_create-user' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'create_users' ) ) {&nbsp;</div></li><li><div>      wp_die(&nbsp;</div></li><li><div>          '&lt;h1&gt;' . __( 'Cheatin&#8217; uh?' ) . '&lt;/h1&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;' . __( 'Sorry, you are not allowed to create users.' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>          403&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! is_multisite() ) {&nbsp;</div></li><li><div>      $user_id = edit_user();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_wp_error( $user_id ) ) {&nbsp;</div></li><li><div>          $add_user_errors = $user_id;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          if ( current_user_can( 'list_users' ) )&nbsp;</div></li><li><div>              $redirect = 'users.php?update=add&id=' . $user_id;&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              $redirect = add_query_arg( 'update', 'add', 'user-new.php' );&nbsp;</div></li><li><div>          wp_redirect( $redirect );&nbsp;</div></li><li><div>          die();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">// Adding a new user to this site</span>&nbsp;</div></li><li><div>      $new_user_email = wp_unslash( $_REQUEST['email'] );&nbsp;</div></li><li><div>      $user_details = wpmu_validate_user_signup( $_REQUEST['user_login'], $new_user_email );&nbsp;</div></li><li><div>      if ( is_wp_error( $user_details[ 'errors' ] ) && !empty( $user_details[ 'errors' ]-&gt;errors ) ) {&nbsp;</div></li><li><div>          $add_user_errors = $user_details[ 'errors' ];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the user_login, also known as the username, before it is added to the site.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 2.0.3</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $user_login The sanitized username.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $new_user_login = apply_filters( 'pre_user_login', sanitize_user( wp_unslash( $_REQUEST['user_login'] ), true ) );&nbsp;</div></li><li><div>          if ( isset( $_POST[ 'noconfirmation' ] ) && current_user_can( 'manage_network_users' ) ) {&nbsp;</div></li><li><div>              add_filter( 'wpmu_signup_user_notification', '__return_false' ); <span class="comment">// Disable confirmation email</span>&nbsp;</div></li><li><div>              add_filter( 'wpmu_welcome_user_notification', '__return_false' ); <span class="comment">// Disable welcome email</span>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          wpmu_signup_user( $new_user_login, $new_user_email, array( 'add_to_blog' =&gt; $wpdb-&gt;blogid, 'new_role' =&gt; $_REQUEST['role'] ) );&nbsp;</div></li><li><div>          if ( isset( $_POST[ 'noconfirmation' ] ) && current_user_can( 'manage_network_users' ) ) {&nbsp;</div></li><li><div>              $key = $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT activation_key FROM {$wpdb-&gt;signups} WHERE user_login = %s AND user_email = %s&quot;, $new_user_login, $new_user_email ) );&nbsp;</div></li><li><div>              $new_user = wpmu_activate_signup( $key );&nbsp;</div></li><li><div>              if ( is_wp_error( $new_user ) ) {&nbsp;</div></li><li><div>                  $redirect = add_query_arg( array( 'update' =&gt; 'addnoconfirmation' ), 'user-new.php' );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $redirect = add_query_arg( array( 'update' =&gt; 'addnoconfirmation', 'user_id' =&gt; $new_user['user_id'] ), 'user-new.php' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $redirect = add_query_arg( array('update' =&gt; 'newuserconfirmation'), 'user-new.php' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          wp_redirect( $redirect );&nbsp;</div></li><li><div>          die();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$title = __('Add New User');&nbsp;</div></li><li><div>$parent_file = 'users.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$do_both = false;&nbsp;</div></li><li><div>if ( is_multisite() && current_user_can('promote_users') && current_user_can('create_users') )&nbsp;</div></li><li><div>  $do_both = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$help = '&lt;p&gt;' . __('To add a new user to your site, fill in the form on this screen and click the Add New User button at the bottom.') . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( is_multisite() ) {&nbsp;</div></li><li><div>  $help .= '&lt;p&gt;' . __('Because this is a multisite installation, you may add accounts that already exist on the Network by specifying a username or email, and defining a role. For more options, such as specifying a password, you have to be a Network Administrator and use the hover link under an existing user&#8217;s name to Edit the user profile under Network Admin &gt; All Users.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('New users will receive an email letting them know they&#8217;ve been added as a user for your site. This email will also contain their password. Check the box if you don&#8217;t want the user to receive a welcome email.') . '&lt;/p&gt;';&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>  $help .= '&lt;p&gt;' . __('New users are automatically assigned a password, which they can change after logging in. You can view or edit the assigned password by clicking the Show Password button. The username cannot be changed once the user has been added.') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('By default, new users will receive an email letting them know they&#8217;ve been added as a user for your site. This email will also contain a password reset link. Uncheck the box if you don&#8217;t want to send the new user a welcome email.') . '&lt;/p&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$help .= '&lt;p&gt;' . __('Remember to click the Add New User button at the bottom of this screen when you are finished.') . '&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>  'id' =&gt; 'overview', &nbsp;</div></li><li><div>  'title' =&gt; __('Overview'), &nbsp;</div></li><li><div>  'content' =&gt; $help, &nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>'id' =&gt; 'user-roles', &nbsp;</div></li><li><div>'title' =&gt; __('User Roles'), &nbsp;</div></li><li><div>'content' =&gt; '&lt;p&gt;' . __('Here is a basic overview of the different user roles and the permissions associated with each one:') . '&lt;/p&gt;' .&nbsp;</div></li><li><div>              '&lt;ul&gt;' .&nbsp;</div></li><li><div>              '&lt;li&gt;' . __('Subscribers can read comments/comment/receive newsletters, etc. but cannot create regular site content.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>              '&lt;li&gt;' . __('Contributors can write and manage their posts but not publish posts or upload media files.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>              '&lt;li&gt;' . __('Authors can publish and manage their own posts, and are able to upload files.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>              '&lt;li&gt;' . __('Editors can publish posts, manage posts as well as manage other people&#8217;s posts, etc.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>              '&lt;li&gt;' . __('Administrators have access to all the administration features.') . '&lt;/li&gt;' .&nbsp;</div></li><li><div>              '&lt;/ul&gt;'&nbsp;</div></li><li><div>) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>  '&lt;p&gt;&lt;strong&gt;' . __('For more information:') . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Users_Add_New_Screen&quot;&gt;Documentation on Adding New Users&lt;/a&gt;') . '&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>  '&lt;p&gt;' . __('&lt;a href=&quot;https:<span class="comment">//wordpress.org/support/&quot;&gt;Support Forums&lt;/a&gt;') . '&lt;/p&gt;'</span>&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>wp_enqueue_script('wp-ajax-response');&nbsp;</div></li><li><div>wp_enqueue_script( 'user-profile' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters whether to enable user auto-complete for non-super admins in Multisite.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $enable Whether to enable auto-complete for non-super admins. Default false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( is_multisite() && current_user_can( 'promote_users' ) && ! wp_is_large_network( 'users' )&nbsp;</div></li><li><div>  && ( is_super_admin() || apply_filters( 'autocomplete_users_for_site_admins', false ) )&nbsp;</div></li><li><div>) {&nbsp;</div></li><li><div>  wp_enqueue_script( 'user-suggest' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>require_once( ABSPATH . 'wp-admin/admin-header.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( isset($_GET['update']) ) {&nbsp;</div></li><li><div>  $messages = array();&nbsp;</div></li><li><div>  if ( is_multisite() ) {&nbsp;</div></li><li><div>      $edit_link = '';&nbsp;</div></li><li><div>      if ( ( isset( $_GET['user_id'] ) ) ) {&nbsp;</div></li><li><div>          $user_id_new = absint( $_GET['user_id'] );&nbsp;</div></li><li><div>          if ( $user_id_new ) {&nbsp;</div></li><li><div>              $edit_link = esc_url( add_query_arg( 'wp_http_referer', urlencode( wp_unslash( $_SERVER['REQUEST_URI'] ) ), get_edit_user_link( $user_id_new ) ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      switch ( $_GET['update'] ) {&nbsp;</div></li><li><div>          case &quot;newuserconfirmation&quot;:&nbsp;</div></li><li><div>              $messages[] = __('Invitation email sent to new user. A confirmation link must be clicked before their account is created.');&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case &quot;add&quot;:&nbsp;</div></li><li><div>              $messages[] = __('Invitation email sent to user. A confirmation link must be clicked for them to be added to your site.');&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case &quot;addnoconfirmation&quot;:&nbsp;</div></li><li><div>              if ( empty( $edit_link ) ) {&nbsp;</div></li><li><div>                  $messages[] = __( 'User has been added to your site.' );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  <span class="comment">/** translators: %s: edit page url */</span>&nbsp;</div></li><li><div>                  $messages[] = sprintf( __( 'User has been added to your site. &lt;a href=&quot;%s&quot;&gt;Edit user&lt;/a&gt;' ), $edit_link );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case &quot;addexisting&quot;:&nbsp;</div></li><li><div>              $messages[] = __('That user is already a member of this site.');&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case &quot;does_not_exist&quot;:&nbsp;</div></li><li><div>              $messages[] = __('The requested user does not exist.');&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case &quot;enter_email&quot;:&nbsp;</div></li><li><div>              $messages[] = __('Please enter a valid email address.');&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( 'add' == $_GET['update'] )&nbsp;</div></li><li><div>          $messages[] = __('User added.');&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>&lt;h1 id=&quot;add-new-user&quot;&gt;&lt;?php&nbsp;</div></li><li><div>if ( current_user_can( 'create_users' ) ) {&nbsp;</div></li><li><div>  _e( 'Add New User' );&nbsp;</div></li><li><div>} elseif ( current_user_can( 'promote_users' ) ) {&nbsp;</div></li><li><div>  _e( 'Add Existing User' );&nbsp;</div></li><li><div>} ?&gt;&nbsp;</div></li><li><div>&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( isset($errors) && is_wp_error( $errors ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error&quot;&gt;&nbsp;</div></li><li><div>      &lt;ul&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>          foreach ( $errors-&gt;get_error_messages() as $err )&nbsp;</div></li><li><div>              echo &quot;&lt;li&gt;$err&lt;/li&gt;\n&quot;;&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/ul&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! empty( $messages ) ) {&nbsp;</div></li><li><div>  foreach ( $messages as $msg )&nbsp;</div></li><li><div>      echo '&lt;div id=&quot;message&quot; class=&quot;updated notice is-dismissible&quot;&gt;&lt;p&gt;' . $msg . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>} ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php if ( isset($add_user_errors) && is_wp_error( $add_user_errors ) ) : ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>          foreach ( $add_user_errors-&gt;get_error_messages() as $message )&nbsp;</div></li><li><div>              echo &quot;&lt;p&gt;$message&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&lt;div id=&quot;ajax-response&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>if ( is_multisite() ) {&nbsp;</div></li><li><div>  if ( $do_both )&nbsp;</div></li><li><div>      echo '&lt;h2 id=&quot;add-existing-user&quot;&gt;' . __( 'Add Existing User' ) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>  if ( !is_super_admin() ) {&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __( 'Enter the email address of an existing user on this network to invite them to this site. That person will be sent an email asking them to confirm the invite.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>      $label = __('Email');&nbsp;</div></li><li><div>      $type = 'email';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      echo '&lt;p&gt;' . __( 'Enter the email address or username of an existing user on this network to invite them to this site. That person will be sent an email asking them to confirm the invite.' ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>      $label = __('Email or Username');&nbsp;</div></li><li><div>      $type = 'text';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; name=&quot;adduser&quot; id=&quot;adduser&quot; class=&quot;validate&quot; novalidate=&quot;novalidate&quot;&lt;?php&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires inside the adduser form tag.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'user_new_form_tag' );&nbsp;</div></li><li><div>?&gt;&gt;&nbsp;</div></li><li><div>&lt;input name=&quot;action&quot; type=&quot;hidden&quot; value=&quot;adduser&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field( 'add-user', '_wpnonce_add-user' ) ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;adduser-email&quot;&gt;&lt;?php echo $label; ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;email&quot; type=&quot;&lt;?php echo $type; ?&gt;&quot; id=&quot;adduser-email&quot; class=&quot;wp-suggest-user&quot; value=&quot;&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;adduser-role&quot;&gt;&lt;?php _e('Role'); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;select name=&quot;role&quot; id=&quot;adduser-role&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php wp_dropdown_roles( get_option('default_role') ); ?&gt;&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php if ( current_user_can( 'manage_network_users' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Skip Confirmation Email' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;checkbox&quot; name=&quot;noconfirmation&quot; id=&quot;adduser-noconfirmation&quot; value=&quot;1&quot; /&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;adduser-noconfirmation&quot;&gt;&lt;?php _e( 'Add the user without sending an email that requires their confirmation.' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php } ?&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fires at the end of the new user form.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Passes a contextual string to make both types of new user forms</span>&nbsp;</div></li><li><div><span class="comment"> * uniquely targetable. Contexts are 'add-existing-user' (Multisite), </span>&nbsp;</div></li><li><div><span class="comment"> * and 'add-new-user' (single site and network admin).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type A contextual string specifying which type of new user form the hook follows.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'user_new_form', 'add-existing-user' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;?php submit_button( __( 'Add Existing User' ), 'primary', 'adduser', true, array( 'id' =&gt; 'addusersub' ) ); ?&gt;&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>} <span class="comment">// is_multisite()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( current_user_can( 'create_users') ) {&nbsp;</div></li><li><div>  if ( $do_both )&nbsp;</div></li><li><div>      echo '&lt;h2 id=&quot;create-new-user&quot;&gt;' . __( 'Add New User' ) . '&lt;/h2&gt;';&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;p&gt;&lt;?php _e('Create a brand new user and add them to this site.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&lt;form method=&quot;post&quot; name=&quot;createuser&quot; id=&quot;createuser&quot; class=&quot;validate&quot; novalidate=&quot;novalidate&quot;&lt;?php&nbsp;</div></li><li><div>  <span class="comment"><span class="comment">/** This action is documented in wp-admin/user-new.php */</span></span>&nbsp;</div></li><li><div>  do_action( 'user_new_form_tag' );&nbsp;</div></li><li><div>?&gt;&gt;&nbsp;</div></li><li><div>&lt;input name=&quot;action&quot; type=&quot;hidden&quot; value=&quot;createuser&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php wp_nonce_field( 'create-user', '_wpnonce_create-user' ); ?&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">// Load up the passed data, else set to a default.</span>&nbsp;</div></li><li><div>$creating = isset( $_POST['createuser'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$new_user_login = $creating && isset( $_POST['user_login'] ) ? wp_unslash( $_POST['user_login'] ) : '';&nbsp;</div></li><li><div>$new_user_firstname = $creating && isset( $_POST['first_name'] ) ? wp_unslash( $_POST['first_name'] ) : '';&nbsp;</div></li><li><div>$new_user_lastname = $creating && isset( $_POST['last_name'] ) ? wp_unslash( $_POST['last_name'] ) : '';&nbsp;</div></li><li><div>$new_user_email = $creating && isset( $_POST['email'] ) ? wp_unslash( $_POST['email'] ) : '';&nbsp;</div></li><li><div>$new_user_uri = $creating && isset( $_POST['url'] ) ? wp_unslash( $_POST['url'] ) : '';&nbsp;</div></li><li><div>$new_user_role = $creating && isset( $_POST['role'] ) ? wp_unslash( $_POST['role'] ) : '';&nbsp;</div></li><li><div>$new_user_send_notification = $creating && ! isset( $_POST['send_user_notification'] ) ? false : true;&nbsp;</div></li><li><div>$new_user_ignore_pass = $creating && isset( $_POST['noconfirmation'] ) ? wp_unslash( $_POST['noconfirmation'] ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;user_login&quot;&gt;&lt;?php _e('Username'); ?&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e('(required)'); ?&gt;&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;user_login&quot; type=&quot;text&quot; id=&quot;user_login&quot; value=&quot;&lt;?php echo esc_attr( $new_user_login ); ?&gt;&quot; aria-required=&quot;true&quot; autocapitalize=&quot;none&quot; autocorrect=&quot;off&quot; maxlength=&quot;60&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;email&quot;&gt;&lt;?php _e('Email'); ?&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e('(required)'); ?&gt;&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;email&quot; type=&quot;email&quot; id=&quot;email&quot; value=&quot;&lt;?php echo esc_attr( $new_user_email ); ?&gt;&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php if ( !is_multisite() ) { ?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;first_name&quot;&gt;&lt;?php _e('First Name') ?&gt; &lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;first_name&quot; type=&quot;text&quot; id=&quot;first_name&quot; value=&quot;&lt;?php echo esc_attr($new_user_firstname); ?&gt;&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;last_name&quot;&gt;&lt;?php _e('Last Name') ?&gt; &lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;last_name&quot; type=&quot;text&quot; id=&quot;last_name&quot; value=&quot;&lt;?php echo esc_attr($new_user_lastname); ?&gt;&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;url&quot;&gt;&lt;?php _e('Website') ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;input name=&quot;url&quot; type=&quot;url&quot; id=&quot;url&quot; class=&quot;code&quot; value=&quot;&lt;?php echo esc_attr( $new_user_uri ); ?&gt;&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required user-pass1-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;pass1&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'Password' ); ?&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;description hide-if-js&quot;&gt;&lt;?php _e( '(required)' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;input class=&quot;hidden&quot; value=&quot; &quot; /&gt;&lt;!-- #24364 workaround --&gt;&nbsp;</div></li><li><div>          &lt;button type=&quot;button&quot; class=&quot;button wp-generate-pw hide-if-no-js&quot;&gt;&lt;?php _e( 'Show password' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;wp-pwd hide-if-js&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php $initial_password = wp_generate_password( 24 ); ?&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;password-input-wrapper&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;password&quot; name=&quot;pass1&quot; id=&quot;pass1&quot; class=&quot;regular-text&quot; autocomplete=&quot;off&quot; data-reveal=&quot;1&quot; data-pw=&quot;&lt;?php echo esc_attr( $initial_password ); ?&gt;&quot; aria-describedby=&quot;pass-strength-result&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;button type=&quot;button&quot; class=&quot;button wp-hide-pw hide-if-no-js&quot; data-toggle=&quot;0&quot; aria-label=&quot;&lt;?php esc_attr_e( 'Hide password' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;dashicons dashicons-hidden&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;text&quot;&gt;&lt;?php _e( 'Hide' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/button&gt;&nbsp;</div></li><li><div>              &lt;button type=&quot;button&quot; class=&quot;button wp-cancel-pw hide-if-no-js&quot; data-toggle=&quot;0&quot; aria-label=&quot;&lt;?php esc_attr_e( 'Cancel password change' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;text&quot;&gt;&lt;?php _e( 'Cancel' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/button&gt;&nbsp;</div></li><li><div>              &lt;div style=&quot;display:none&quot; id=&quot;pass-strength-result&quot; aria-live=&quot;polite&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required user-pass2-wrap hide-if-js&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;pass2&quot;&gt;&lt;?php _e( 'Repeat Password' ); ?&gt; &lt;span class=&quot;description&quot;&gt;&lt;?php _e( '(required)' ); ?&gt;&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>      &lt;input name=&quot;pass2&quot; type=&quot;password&quot; id=&quot;pass2&quot; autocomplete=&quot;off&quot; /&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;pw-weak&quot;&gt;&nbsp;</div></li><li><div>      &lt;th&gt;&lt;?php _e( 'Confirm Password' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;label&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;checkbox&quot; name=&quot;pw_weak&quot; class=&quot;pw-checkbox&quot; /&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'Confirm use of weak password' ); ?&gt;&nbsp;</div></li><li><div>          &lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Send User Notification' ) ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;checkbox&quot; name=&quot;send_user_notification&quot; id=&quot;send_user_notification&quot; value=&quot;1&quot; &lt;?php checked( $new_user_send_notification ); ?&gt; /&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;send_user_notification&quot;&gt;&lt;?php _e( 'Send the new user an email about their account.' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&lt;?php } <span class="comment">// !is_multisite ?&gt;</span>&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;role&quot;&gt;&lt;?php _e('Role'); ?&gt;&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&lt;select name=&quot;role&quot; id=&quot;role&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          if ( !$new_user_role )&nbsp;</div></li><li><div>              $new_user_role = !empty($current_role) ? $current_role : get_option('default_role');&nbsp;</div></li><li><div>          wp_dropdown_roles($new_user_role);&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;?php if ( is_multisite() && current_user_can( 'manage_network_users' ) ) { ?&gt;&nbsp;</div></li><li><div>  &lt;tr&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&lt;?php _e( 'Skip Confirmation Email' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;checkbox&quot; name=&quot;noconfirmation&quot; id=&quot;noconfirmation&quot; value=&quot;1&quot; &lt;?php checked( $new_user_ignore_pass ); ?&gt; /&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;noconfirmation&quot;&gt;&lt;?php _e( 'Add the user without sending an email that requires their confirmation.' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;?php } ?&gt;&nbsp;</div></li><li><div>&lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment"><span class="comment">/** This action is documented in wp-admin/user-new.php */</span></span>&nbsp;</div></li><li><div>do_action( 'user_new_form', 'add-new-user' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php submit_button( __( 'Add New User' ), 'primary', 'createuser', true, array( 'id' =&gt; 'createusersub' ) ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php } <span class="comment">// current_user_can('create_users') ?&gt;</span>&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>include( ABSPATH . 'wp-admin/admin-footer.php' );&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>wordpress</li><li><span></span>file</li><li><span></span></li><li><span></span>wp-admin</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>