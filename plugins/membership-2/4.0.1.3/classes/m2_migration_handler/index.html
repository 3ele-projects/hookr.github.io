<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="4.0.1.3" data-slug="membership-2" data-type="class" data-id="23172"><head xmlns="http://www.w3.org/1999/xhtml"><title> m2_migration_handler | class | Membership 2 | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="M2_Migration_Handler, class, plugin, membership-2, 4.0.1.3" /><meta name="description" content="Prepare upgrade to Membership (free) to Membership2 (free)" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=071c1f084f9b68548dbd4a25cda82d35' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/m2_migration_handler/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fm2_migration_handler%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fm2_migration_handler%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-membership-2-4.0.1.3-class-m2_migration_handler","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="m2_migration_handler" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to membership-2." href="http://hookr.io/plugins/membership-2/" class="plugin"><span property="name">membership-2</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.0.1.3." href="http://hookr.io/plugins/membership-2/4.0.1.3/" class="H_VERSION"><span property="name">4.0.1.3</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/membership-2/4.0.1.3/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">m2_migration_handler</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="2618"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/all/" title="All">All <span class="count badge">2618</span></a></li><li class="" data-id="new" data-count="17"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/new/" title="New">New <span class="count badge">17</span></a></li><li class="" data-id="hooks" data-count="1601"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/hooks/" title="Hooks">Hooks <span class="count badge">1601</span></a></li><li class="" data-id="action" data-count="524"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/actions/" title="Actions">Actions <span class="count badge">524</span></a></li><li class="" data-id="filter" data-count="1077"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/filters/" title="Filters">Filters <span class="count badge">1077</span></a></li><li class="active" data-id="class" data-count="738"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/classes/" title="Classes">Classes <span class="count badge">738</span></a></li><li class="" data-id="constant" data-count="34"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/constants/" title="Constants">Constants <span class="count badge">34</span></a></li><li class="" data-id="function" data-count="207"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/functions/" title="Functions">Functions <span class="count badge">207</span></a></li><li class="" data-id="shortcode" data-count="38"><a href="http://hookr.io/plugins/membership-2/4.0.1.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">38</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>M2_Migration_Handler</strong></h1><p>Prepare upgrade to Membership (free) to Membership2 (free).</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/membership-2/4.0.1.3/files/app-old-membershipincludes-classes-class-m2-migration-handler/" class="file">/app_old/membershipincludes/classes/class-m2-migration-handler.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="18" class="block" start="18"><li><div>class M2_Migration_Handler {&nbsp;</div></li><li><div>    const PLUGIN_ID = 'membership2';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * User has to confirm update before updating the plugin to this name.&nbsp;</div></li><li><div>     * I.e. While the NEW plugin keeps its old name no confirmation is displayed&nbsp;</div></li><li><div>     * but once the new plugin contains this phrase in the project name the&nbsp;</div></li><li><div>     * migration process begins by displaying a confirmation message.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    const NEW_PLUGIN_NAME = 'Membership2';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * When the big update is ready a flag is stored in site-options table using&nbsp;</div></li><li><div>     * this option key.&nbsp;</div></li><li><div>     * After the update the new plugin should remove this site-option again.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    const TEMP_OPTION_KEY = '_wporg_update_to_m2';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add hooks to watch all upgrade requests&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static public function setup() {&nbsp;</div></li><li><div>        // Display a custom &quot;Update available&quot; message.&nbsp;</div></li><li><div>        add_action( 'admin_head', array( __CLASS__, 'hook_confirm_message' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Ajax handlers.&nbsp;</div></li><li><div>        add_action( 'wp_ajax_wpmudev-unlock-' . self::PLUGIN_ID, array( __CLASS__, 'ajax_unlock' ) );&nbsp;</div></li><li><div>        add_action( 'wp_ajax_wpmudev-remind-' . self::PLUGIN_ID, array( __CLASS__, 'ajax_remind' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add the admin-notice callback. We do this in the admin_head hook because&nbsp;</div></li><li><div>     * the WPMUDEV Dashboard disables all admin_notices that are added earlier.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Hook: admin_head&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static public function hook_confirm_message() {&nbsp;</div></li><li><div>        if ( ! current_user_can( 'update_plugins' ) ) { return; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $state = self::get_state();&nbsp;</div></li><li><div>        if ( ! $state-&gt;available ) { return false; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( time() &gt; $state-&gt;remind_time ) {&nbsp;</div></li><li><div>            // If on other pages then WPMUDEV Dashboard we check the remind-time setting.&nbsp;</div></li><li><div>            add_action( 'all_admin_notices', array( __CLASS__, 'confirm_message' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Handles clicking the &quot;Unlock Update&quot; button in the update dialog.&nbsp;</div></li><li><div>     * No response is made, but state is updated.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static public function ajax_unlock() {&nbsp;</div></li><li><div>        $state = self::get_state();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Switch to the new version.&nbsp;</div></li><li><div>        membership2_use_m2();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo 'OK';&nbsp;</div></li><li><div>        exit;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Handles clicking the &quot;Remind me later&quot; button in the update dialog.&nbsp;</div></li><li><div>     * No response is made, but state is updated.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static public function ajax_remind() {&nbsp;</div></li><li><div>        $state = self::get_state();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Remind again in one week.&nbsp;</div></li><li><div>        $state-&gt;remind_time = time() + WEEK_IN_SECONDS;&nbsp;</div></li><li><div>        update_site_option( self::TEMP_OPTION_KEY, $state );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo 'OK';&nbsp;</div></li><li><div>        exit;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Returns the current update state.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array Update-status information.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static protected function get_state() {&nbsp;</div></li><li><div>        $state = get_site_option( self::TEMP_OPTION_KEY );&nbsp;</div></li><li><div>        $default_state = (object) array(&nbsp;</div></li><li><div>            'available' =&gt; true, &nbsp;</div></li><li><div>            'remind_time' =&gt; 0, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_object( $state ) ) {&nbsp;</div></li><li><div>            $state = $default_state;&nbsp;</div></li><li><div>            update_site_option( self::TEMP_OPTION_KEY, $state );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $state = (object) array_merge( (array) $default_state, (array) $state );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $state;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Display a message that must be confirmed before making the big update&nbsp;</div></li><li><div>     * available to the user. The message is only displayed when the update is&nbsp;</div></li><li><div>     * ready.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static public function confirm_message() {&nbsp;</div></li><li><div>        // We output the base CSS here, in case the WPMUDEV Dashboard plugin is deactivated.&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;style&gt;&nbsp;</div></li><li><div>        .wpmudev-new {&nbsp;</div></li><li><div>            padding: 10px;&nbsp;</div></li><li><div>            color: #5F5F5F;&nbsp;</div></li><li><div>            border-radius: 2px;&nbsp;</div></li><li><div>            text-shadow: 0 1px 0 #FFF;&nbsp;</div></li><li><div>            -webkit-box-sizing: border-box;&nbsp;</div></li><li><div>            -moz-box-sizing: border-box;&nbsp;</div></li><li><div>            box-sizing: border-box;&nbsp;</div></li><li><div>            background-color: #F0F1F2;&nbsp;</div></li><li><div>            border: 1px solid #CFDFE5;&nbsp;</div></li><li><div>            margin: 5px 15px 15px 0;&nbsp;</div></li><li><div>            position: relative;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .wpmudev-new h4 {&nbsp;</div></li><li><div>            margin: 0 0 10px 0;&nbsp;</div></li><li><div>            font-size: 1.3em;&nbsp;</div></li><li><div>            font-family: 'Helvetica Neue', helvetica, arial, sans-serif;&nbsp;</div></li><li><div>            font-weight: 600;&nbsp;</div></li><li><div>            color: #3C3C3C;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .wpmudev-new .dev-widget-content &gt; h4 {&nbsp;</div></li><li><div>            padding-bottom: 10px;&nbsp;</div></li><li><div>            border-bottom: 1px solid #DCEAF5;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .wpmudev-new h4 strong {&nbsp;</div></li><li><div>            color: #053254;&nbsp;</div></li><li><div>            font-weight: 400;&nbsp;</div></li><li><div>            font-size: 1.3em;&nbsp;</div></li><li><div>            padding-left: 20px;&nbsp;</div></li><li><div>            line-height: 33px;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .dev-content-wrapper {&nbsp;</div></li><li><div>            margin-top: 10px;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .wpmudev-new img {&nbsp;</div></li><li><div>            float: left;&nbsp;</div></li><li><div>            margin-right: 20px;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .dev-cta-wrap {&nbsp;</div></li><li><div>            text-align: right;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .dev-cta-wrap .wpmu-button {&nbsp;</div></li><li><div>            padding: 12px 20px;&nbsp;</div></li><li><div>            background-color: rgba(0, 0, 0, 0);&nbsp;</div></li><li><div>            text-decoration: none;&nbsp;</div></li><li><div>            display: inline-block;&nbsp;</div></li><li><div>            outline: none;&nbsp;</div></li><li><div>            font-weight: bold;&nbsp;</div></li><li><div>            font-family: Helvetica Neue, helvetica, sans-serif !important;&nbsp;</div></li><li><div>            text-rendering: optimizeLegibility;&nbsp;</div></li><li><div>            -moz-border-radius: 3px;&nbsp;</div></li><li><div>            -webkit-border-radius: 3px;&nbsp;</div></li><li><div>            border-radius: 3px;&nbsp;</div></li><li><div>            -moz-background-clip: padding;&nbsp;</div></li><li><div>            -webkit-background-clip: padding-box;&nbsp;</div></li><li><div>            background-clip: padding-box;&nbsp;</div></li><li><div>            -moz-box-shadow: 0 1px 0 #001c33, inset 0 1px 0 #004f8c;&nbsp;</div></li><li><div>            -webkit-box-shadow: 0 1px 0 #001C33, inset 0 1px 0 #004F8C;&nbsp;</div></li><li><div>            box-shadow: 0 1px 0 #001C33, inset 0 1px 0 #004F8C;&nbsp;</div></li><li><div>            background-image: -moz-linear-gradient(bottom, #003866 0%, #00487f 100%);&nbsp;</div></li><li><div>            background-image: -o-linear-gradient(bottom, #003866 0%, #00487f 100%);&nbsp;</div></li><li><div>            background-image: -webkit-linear-gradient(bottom, #003866 0%, #00487F 100%);&nbsp;</div></li><li><div>            background-image: linear-gradient(bottom, #003866 0%, #00487f 100%);&nbsp;</div></li><li><div>            color: #E2ECF4;&nbsp;</div></li><li><div>            font-size: 14px;&nbsp;</div></li><li><div>            text-shadow: 0 -1px 0 #002A4C;&nbsp;</div></li><li><div>            border: none;&nbsp;</div></li><li><div>            -webkit-font-smoothing: antialiased;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        .dev-cta-wrap .wpmu-button:hover, &nbsp;</div></li><li><div>        .dev-cta-wrap .wpmu-button:focus, &nbsp;</div></li><li><div>        .dev-cta-wrap .wpmu-button:active {&nbsp;</div></li><li><div>            color: #FFF;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &lt;/style&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;wpmudev-new notice&quot; id=&quot;message-&lt;?php echo self::PLUGIN_ID; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;dev-widget-content&quot;&gt;&nbsp;</div></li><li><div>                &lt;h4&gt;&nbsp;</div></li><li><div>                    &lt;strong&gt;&lt;?php _e( 'Membership2 Is Available', 'membership' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                &lt;/h4&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;dev-content-wrapper&quot;&gt;&nbsp;</div></li><li><div>                    &lt;img src=&quot;https://premium.wpmudev.org/wp-content/uploads/2014/10/Product-Content-280x158.png&quot; width=&quot;186&quot; height=&quot;105&quot; style=&quot;margin-bottom:20px;&quot;/&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;h4&gt;&lt;?php _e( 'The Best Membership Plugin You Ever Used!', 'membership' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'Membership2 is a &lt;strong&gt;completely rewritten plugin&lt;/strong&gt; with a brand new user interface and new features.&lt;br&gt;We improved workflows and data structure to make the plugin as simple and easy to use as possible for you!', 'membership' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'When you update to the new version we will migrate your Subscription plans and Members to the new data structure automatically.&lt;br&gt;However, the protection rules cannot be migrated. So you have to manually &lt;strong&gt;set up all protection rules again&lt;/strong&gt; after the update.', 'membership' ); ?&gt;&lt;small&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/small&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                    &lt;?php printf( __( '%sRead more about the new version%s on our website!', 'membership' ), '&lt;a href=&quot;http://premium.wpmudev.org/project/membership&quot; target=&quot;_blank&quot;&gt;', '&lt;/a&gt;' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;div class=&quot;dev-cta-wrap&quot;&gt;&nbsp;</div></li><li><div>                        &lt;a href=&quot;#remind-me-later&quot; id=&quot;wpmudev-remind-&lt;?php echo self::PLUGIN_ID; ?&gt;&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                            _e( 'Remind me in a few days', 'membership' );&nbsp;</div></li><li><div>                        ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &nbsp;&nbsp;</div></li><li><div>                        &lt;a href=&quot;#update-now&quot; id=&quot;wpmudev-unlock-&lt;?php echo self::PLUGIN_ID; ?&gt;&quot; class=&quot;wpmu-button&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                            _e( 'I understand. &lt;u&gt;Switch to Membership2 now&lt;/u&gt;!', 'membership' );&nbsp;</div></li><li><div>                        ?&gt;&lt;small&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/small&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;p style=&quot;text-align:right&quot;&gt;&nbsp;</div></li><li><div>                        &lt;small&gt;&lt;sup&gt;*&lt;/sup&gt; &lt;?php _e( 'When you switch to Membership2 your data is migrated and you need to set up your protection rules again. Until this is completed your content is unprotected.', 'membership' ); ?&gt;&lt;/small&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        self::confirm_scripts();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Outputs javascript that handles the confirm/remind-me-later clicks.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static protected function confirm_scripts() {&nbsp;</div></li><li><div>        global $wpmudev_un;&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;script&gt;&nbsp;</div></li><li><div>        (function() {&nbsp;</div></li><li><div>            var unlock = jQuery( '#wpmudev-unlock-&lt;?php echo self::PLUGIN_ID; ?&gt;' ), &nbsp;</div></li><li><div>                remind = jQuery( '#wpmudev-remind-&lt;?php echo self::PLUGIN_ID; ?&gt;' ), &nbsp;</div></li><li><div>                message = jQuery( '#message-&lt;?php echo self::PLUGIN_ID; ?&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function confirmed() {&nbsp;</div></li><li><div>                message.detach();&nbsp;</div></li><li><div>                window.location.reload();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            function postponed() {&nbsp;</div></li><li><div>                message.detach();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unlock.click(function() { jQuery.post(window.ajaxurl, {action:jQuery(this).attr( 'id' )}, confirmed )});&nbsp;</div></li><li><div>            remind.click(function() { jQuery.post(window.ajaxurl, {action:jQuery(this).attr( 'id' )}, postponed )});&nbsp;</div></li><li><div>        })();&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>};&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 4.0.0.2</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/membership-2/4.0.1.3/classes/m2_migration_handler/" class="active">4.0.1.3</a></li><li><a href="http://hookr.io/plugins/membership-2/4.0.1.2/classes/m2_migration_handler/" class="">4.0.1.2</a></li><li><a href="http://hookr.io/plugins/membership-2/4.0.1.0/classes/m2_migration_handler/" class="">4.0.1.0</a></li><li><a href="http://hookr.io/plugins/membership-2/4.0.0.7/classes/m2_migration_handler/" class="">4.0.0.7</a></li><li><a href="http://hookr.io/plugins/membership-2/4.0.0.2/classes/m2_migration_handler/" class="">4.0.0.2</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>M2_Migration_Handler</li><li><span></span>Membership 2</li><li><span></span>4.0.1.3</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>