<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="3.98" data-slug="ads-ez-plugin-for-google-adsense" data-type="class" data-id="21115"><head xmlns="http://www.w3.org/1999/xhtml"><title> ezga | class | Ads Ez Plugin For Google Adsense | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="EzGA, class, plugin, ads-ez-plugin-for-google-adsense, 3.98" /><meta name="description" content="The Ads EZ Plugin for Google AdSense EzGA class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.8"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=7cd228a541d28fd31091849ae3199070' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.8' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/ez_ga/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fez_ga%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fez_ga%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-ads-ez-plugin-for-google-adsense-3.98-class-ez_ga","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="ez_ga" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to ads-ez-plugin-for-google-adse&hellip;." href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/" class="plugin"><span property="name">ads-ez-plugin-for-google-adse&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.98." href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/" class="H_VERSION"><span property="name">3.98</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">ez_ga</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="24"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/all/" title="All">All <span class="count badge">24</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="1"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/hooks/" title="Hooks">Hooks <span class="count badge">1</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="1"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/filters/" title="Filters">Filters <span class="count badge">1</span></a></li><li class="active" data-id="class" data-count="12"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/classes/" title="Classes">Classes <span class="count badge">12</span></a></li><li class="" data-id="constant" data-count="0"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/constants/" title="Constants">Constants <span class="count badge">0</span></a></li><li class="" data-id="function" data-count="10"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/functions/" title="Functions">Functions <span class="count badge">10</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>EzGA</strong></h1><p>The Ads EZ Plugin for Google AdSense <strong>EzGA</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/files/ezga/" class="file">/EzGA.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="15" class="block" start="15"><li><div>class EzGA extends EZWP {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static $metaOptions = array();&nbsp;</div></li><li><div>  static $plgPrice = array('easy-adsense' =&gt; 7.95, &nbsp;</div></li><li><div>      'adsense-now' =&gt; 6.95, &nbsp;</div></li><li><div>      'google-adsense' =&gt; 9.45);&nbsp;</div></li><li><div>  static $border = '';&nbsp;</div></li><li><div>  static $kills = array('feed', 'page', 'sticky', 'home', 'front_page', 'category', &nbsp;</div></li><li><div>      'tag', 'archive', 'search', 'single', 'attachment');&nbsp;</div></li><li><div>  static $unSettable = array('Phone', 'Tablet', 'All', 'Mobile');&nbsp;</div></li><li><div>  static $noAds = false;&nbsp;</div></li><li><div>  static $noAdsReason = '';&nbsp;</div></li><li><div>  static $paras = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function isActive() {&nbsp;</div></li><li><div>    if (strpos(__FILE__, 'mu-plugins') !== false) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (class_exists(&quot;GoogleAdSense&quot;)) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!function_exists('is_plugin_active')) {&nbsp;</div></li><li><div>      include_once ABSPATH . 'wp-admin/includes/plugin.php';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $plgSlug = self::getPlgMode();&nbsp;</div></li><li><div>    $plgSlug = str_replace(&quot;-ultra&quot;, &quot;&quot;, $plgSlug);&nbsp;</div></li><li><div>    $plugin = basename(__DIR__) . &quot;/$plgSlug.php&quot;;&nbsp;</div></li><li><div>    if (is_plugin_active($plugin)) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (is_plugin_active_for_network($plugin)) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function isLoggedIn() {&nbsp;</div></li><li><div>    $isLoggedIn = false;&nbsp;</div></li><li><div>    if (function_exists('current_user_can')) {&nbsp;</div></li><li><div>      if (current_user_can('activate_plugins')) {&nbsp;</div></li><li><div>        $isLoggedIn = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $isLoggedIn;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function doPluginActions() {&nbsp;</div></li><li><div>    $suspend_ads = self::getGenOption('suspend_ads');&nbsp;</div></li><li><div>    if (!empty($suspend_ads)) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $plugin_slug = self::getSlug();&nbsp;</div></li><li><div>    require_once plugin_dir_path(__FILE__) . $plugin_slug . '-frontend.php';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function urlExists($url) {//se passar a URL existe&nbsp;</div></li><li><div>    $c = curl_init();&nbsp;</div></li><li><div>    curl_setopt($c, CURLOPT_URL, $url);&nbsp;</div></li><li><div>    curl_setopt($c, CURLOPT_HEADER, 1); //get the header&nbsp;</div></li><li><div>    curl_setopt($c, CURLOPT_NOBODY, 1); //and *only* get the header&nbsp;</div></li><li><div>    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1); //get the response as a string from curl_exec(), rather than echoing it&nbsp;</div></li><li><div>    curl_setopt($c, CURLOPT_FRESH_CONNECT, 1); //don't use a cached version of the url&nbsp;</div></li><li><div>    if (!curl_exec($c)) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    //$httpcode=curl_getinfo($c, CURLINFO_HTTP_CODE);&nbsp;</div></li><li><div>    //return ($httpcode&lt;400);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function validate_url($url) {&nbsp;</div></li><li><div>    $format = &quot;Use the format http[s]://[www].site.com[/file[?p=v]]&quot;;&nbsp;</div></li><li><div>    if (!filter_var($url, FILTER_VALIDATE_URL)) {&nbsp;</div></li><li><div>      $text = &quot;$format&quot;;&nbsp;</div></li><li><div>      return $text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $pattern = '#^(http(?:s)?\:\/\/[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*\.[a-zA-Z]{2, 6}(?:\/?|(?:\/[\w\-]+)*)(?:\/?|\/\w+\.[a-zA-Z]{2, 4}(?:\?[\w]+\=[\w\-]+)?)?(?:\&[\w]+\=[\w\-]+)*)$#';&nbsp;</div></li><li><div>    if (!preg_match($pattern, $url)) {&nbsp;</div></li><li><div>      $text = &quot;$format&quot;;&nbsp;</div></li><li><div>      return $text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!self::urlExists($url)) {&nbsp;</div></li><li><div>      $text = &quot;URL not accessible&quot;;&nbsp;</div></li><li><div>      return $text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function validate_email($s) {&nbsp;</div></li><li><div>    if (!filter_var($s, FILTER_VALIDATE_EMAIL)) {&nbsp;</div></li><li><div>      return &quot;Bad email address&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function validate_notNull($s) {&nbsp;</div></li><li><div>    $s = trim($s);&nbsp;</div></li><li><div>    if (empty($s)) {&nbsp;</div></li><li><div>      return &quot;Null value not allowed&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function validate_number($s) {&nbsp;</div></li><li><div>    if (!is_numeric($s)) {&nbsp;</div></li><li><div>      return &quot;Need a number here&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function validate_alnum($s) {&nbsp;</div></li><li><div>    $aValid = array('_', '-');&nbsp;</div></li><li><div>    $s = str_replace($aValid, '', $s);&nbsp;</div></li><li><div>    if (!ctype_alnum($s)) {&nbsp;</div></li><li><div>      return &quot;Please use only letters, numbers, - and _&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  // AJAX CRUD implementation. Create.&nbsp;</div></li><li><div>  static function create() { // creates a new DB record&nbsp;</div></li><li><div>    self::update();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  // AJAX CRUD implementation. Delete.&nbsp;</div></li><li><div>  static function read() {&nbsp;</div></li><li><div>    // not implemented&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  // AJAX CRUD implementation. Update using wpdb-&gt;replace()&nbsp;</div></li><li><div>  static function update() {&nbsp;</div></li><li><div>    $posted_pk = $posted_name = $posted_value = $posted_validator = &quot;&quot;;&nbsp;</div></li><li><div>    if (!EzGA::isLoggedIn()) {&nbsp;</div></li><li><div>      http_response_code(400);&nbsp;</div></li><li><div>      die(&quot;Please login before changing options!&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    if (empty($wpdb)) {&nbsp;</div></li><li><div>      http_response_code(400);&nbsp;</div></li><li><div>      die(&quot;Global variable wpdb not set!&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    $row = array();&nbsp;</div></li><li><div>    extract($_POST, EXTR_PREFIX_ALL, 'posted');&nbsp;</div></li><li><div>    if (empty($posted_pk)) {&nbsp;</div></li><li><div>      http_response_code(400);&nbsp;</div></li><li><div>      die(&quot;Empty primary key&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty($posted_name)) {&nbsp;</div></li><li><div>      http_response_code(400);&nbsp;</div></li><li><div>      die(&quot;Empty name ($posted_name) in data&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!isset($posted_value)) { // Checkbox, unchecked&nbsp;</div></li><li><div>      $posted_value = 0;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (is_array($posted_value)) { // Checkbox (from checklist), checked&nbsp;</div></li><li><div>      $posted_value = 1;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($posted_validator)) { // a server-side validator is specified&nbsp;</div></li><li><div>      $fun = &quot;validate_$posted_validator&quot;;&nbsp;</div></li><li><div>      if (method_exists('EzGA', $fun)) {&nbsp;</div></li><li><div>        $valid = self::$fun($posted_value);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        http_response_code(400);&nbsp;</div></li><li><div>        die(&quot;Unknown validator ($posted_validator) specified&quot;);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ($valid !== true) {&nbsp;</div></li><li><div>        http_response_code(400);&nbsp;</div></li><li><div>        die(&quot;$valid&quot;);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $row['name'] = $posted_pk;&nbsp;</div></li><li><div>    $row['value'] = str_ireplace(&quot;_script&quot;, &quot;script&quot;, $posted_value);&nbsp;</div></li><li><div>    foreach (array('plugin_slug', 'theme', 'provider', 'optionset') as $col) {&nbsp;</div></li><li><div>      $posted = &quot;posted_$col&quot;;&nbsp;</div></li><li><div>      if (!empty($$posted)) {&nbsp;</div></li><li><div>        $row[$col] = $$posted;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $row[$col] = &quot;All&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $status = $wpdb-&gt;replace($table, $row);&nbsp;</div></li><li><div>    if ($status === false) {&nbsp;</div></li><li><div>      http_response_code(400);&nbsp;</div></li><li><div>      die(&quot;Database Replace/Insert Error&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    http_response_code(200);&nbsp;</div></li><li><div>    exit();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  // AJAX CRUD implementation. Delete.&nbsp;</div></li><li><div>  static function delete() {&nbsp;</div></li><li><div>    // not implemented&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function isAssoc($options) {&nbsp;</div></li><li><div>    $isAssoc = count(array_filter(array_keys($options), 'is_string')) &gt; 0;&nbsp;</div></li><li><div>    return $isAssoc;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function mkSelectSource($options) {&nbsp;</div></li><li><div>    $isAssoc = self::isAssoc($options);&nbsp;</div></li><li><div>    $source = &quot;[&quot;;&nbsp;</div></li><li><div>    foreach ($options as $k =&gt; $o) {&nbsp;</div></li><li><div>      if ($isAssoc) {&nbsp;</div></li><li><div>        $source .= &quot;{value: '$k', text: '$o'}, &quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $source .= &quot;{value: '$o', text: '$o'}, &quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $source .= &quot;]&quot;;&nbsp;</div></li><li><div>    return $source;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getThemes($killCurrent = true) {&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    $sql = &quot;SELECT DISTINCT theme FROM $table &quot;;&nbsp;</div></li><li><div>    $themsDB = $wpdb-&gt;get_results($sql);&nbsp;</div></li><li><div>    $themes = array();&nbsp;</div></li><li><div>    foreach ($themsDB as $t) {&nbsp;</div></li><li><div>      if ($t-&gt;theme != 'All') {&nbsp;</div></li><li><div>        $themes[] = $t-&gt;theme;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $theme = array(get_option('stylesheet'));&nbsp;</div></li><li><div>    if ($killCurrent) {&nbsp;</div></li><li><div>      $themes = array_diff($themes, $theme);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $themes = array_values($themes);&nbsp;</div></li><li><div>    return $themes;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getOptionSets($settableOnly = false) {&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    $plugin_slug = self::getSlug();&nbsp;</div></li><li><div>    $sql = &quot;SELECT DISTINCT optionset FROM $table WHERE plugin_slug = '$plugin_slug'&quot;;&nbsp;</div></li><li><div>    $optionSetsDB = $wpdb-&gt;get_results($sql);&nbsp;</div></li><li><div>    $optionSets = array();&nbsp;</div></li><li><div>    foreach ($optionSetsDB as $t) {&nbsp;</div></li><li><div>      if ($t-&gt;optionset != 'All') {&nbsp;</div></li><li><div>        $optionSets[] = $t-&gt;optionset;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if ($settableOnly) {&nbsp;</div></li><li><div>      $unSettable = self::$unSettable;&nbsp;</div></li><li><div>      $unSettable[] = self::getGenOption('optionset');&nbsp;</div></li><li><div>      $optionSets = array_diff($optionSets, $unSettable);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $optionSets = array_values($optionSets);&nbsp;</div></li><li><div>    return $optionSets;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function setOptionset($name) {&nbsp;</div></li><li><div>    self::$options = self::getOptions($name);&nbsp;</div></li><li><div>    self::putGenOption('editing', $name);&nbsp;</div></li><li><div>    if (!in_array($name, self::$unSettable)) {&nbsp;</div></li><li><div>      self::putGenOption('optionset', $name);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getAllOptions() {&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    $sql = &quot;SELECT name, value FROM $table WHERE  plugin_slug='All' AND theme='All' AND provider='All' AND optionset='All'&quot;;&nbsp;</div></li><li><div>    $row = $wpdb-&gt;get_results($sql);&nbsp;</div></li><li><div>    $options = array();&nbsp;</div></li><li><div>    if (!empty($row)) {&nbsp;</div></li><li><div>      foreach ($row as $r) {&nbsp;</div></li><li><div>        $options[$r-&gt;name] = $r-&gt;value;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $options;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getOptions($optionset = &quot;&quot;, $provider = &quot;AdSense&quot;) {&nbsp;</div></li><li><div>    $allOptions = self::getAllOptions();&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    if (empty($optionset)) {&nbsp;</div></li><li><div>      if (is_admin()) {&nbsp;</div></li><li><div>        $optionset = self::getGenOption('editing');&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $optionset = self::getGenOption('optionset');&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty($optionset)) {&nbsp;</div></li><li><div>      $optionset = &quot;Default&quot;;&nbsp;</div></li><li><div>      self::setOptionset($optionset);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $plugin_slug = self::getSlug();&nbsp;</div></li><li><div>    $lookup = array('google-adsense' =&gt; 'Google AdSense', 'easy-adsense' =&gt; 'Easy AdSense', 'adsense-now' =&gt; 'AdSense Now!');&nbsp;</div></li><li><div>    $plugin = $lookup[$plugin_slug];&nbsp;</div></li><li><div>    $theme = get_option('stylesheet');&nbsp;</div></li><li><div>    self::putGenOption('theme', $theme);&nbsp;</div></li><li><div>    $sql = &quot;SELECT name, value FROM $table WHERE plugin_slug='$plugin_slug' AND theme='$theme' AND provider='$provider' AND optionset='$optionset'&quot;;&nbsp;</div></li><li><div>    $rows = $wpdb-&gt;get_results($sql);&nbsp;</div></li><li><div>    $defaultText = 'Please generate and paste your ad code here. If left empty, the ad location will be highlighted on your blog pages with a reminder to enter your code.';&nbsp;</div></li><li><div>    $options = compact('plugin', 'theme', 'provider', 'optionset', 'plugin_slug', 'defaultText');&nbsp;</div></li><li><div>    foreach ($rows as $row) {&nbsp;</div></li><li><div>      $options[$row-&gt;name] = $row-&gt;value;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    self::$options = $options = array_merge($allOptions, $options);&nbsp;</div></li><li><div>    require &quot;admin/$plugin_slug-options.php&quot;;&nbsp;</div></li><li><div>    $defaults = EzGA::getDefaults($ezOptions);&nbsp;</div></li><li><div>    self::$options = $options = array_merge($defaults, $options);&nbsp;</div></li><li><div>    return $options;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function info($hide = true) {&nbsp;</div></li><li><div>    if (!function_exists('get_plugin_data')) {&nbsp;</div></li><li><div>      require_once( ABSPATH . 'wp-admin/includes/plugin.php' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $dir = plugin_dir_path(__FILE__);&nbsp;</div></li><li><div>    $slug = '';&nbsp;</div></li><li><div>    foreach (self::$plgPrice as $plg =&gt; $price) {&nbsp;</div></li><li><div>      if (strpos($dir, $plg) !== false) {&nbsp;</div></li><li><div>        $slug = $plg;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty($slug)) {&nbsp;</div></li><li><div>      $slug = 'easy-adsense';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $plugin_data = get_plugin_data(&quot;$dir$slug.php&quot;);&nbsp;</div></li><li><div>    $str = &quot;{$plugin_data['Name']} V{$plugin_data['Version']}&quot;;&nbsp;</div></li><li><div>    if ($hide) {&nbsp;</div></li><li><div>      $str = &quot;&lt;!-- $str --&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $str;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getDefaults($ezOptions, $echo = false) {&nbsp;</div></li><li><div>    $defaults = array();&nbsp;</div></li><li><div>    $msg = '&lt;pre&gt;';&nbsp;</div></li><li><div>    foreach ($ezOptions as $k =&gt; $v) {&nbsp;</div></li><li><div>      if (isset($v['value'])) {&nbsp;</div></li><li><div>        $defaults[$k] = $v['value'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $msg .= &quot;No default for &lt;code&gt;$k&lt;/code&gt;\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $msg .= &quot;&lt;/pre&gt;&quot;;&nbsp;</div></li><li><div>    if ($echo) {&nbsp;</div></li><li><div>      echo $msg;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $defaults;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function putDefaults($ezOptions, $optionset = '', $force = false, $provider = &quot;AdSense&quot;) {&nbsp;</div></li><li><div>    $row = array();&nbsp;</div></li><li><div>    foreach (array('plugin_slug', 'theme', 'provider', 'optionset') as $col) {&nbsp;</div></li><li><div>      $row[$col] = self::$options[$col];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($optionset)) {&nbsp;</div></li><li><div>      $row['optionset'] = $optionset;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    global $wpdb;&nbsp;</div></li><li><div>    $table = $wpdb-&gt;prefix . &quot;ez_adsense_options&quot;;&nbsp;</div></li><li><div>    $defaults = self::getDefaults($ezOptions);&nbsp;</div></li><li><div>    foreach ($defaults as $name =&gt; $value) {&nbsp;</div></li><li><div>      if ($force || !isset(self::$options[$name])) {&nbsp;</div></li><li><div>        $row['name'] = $name;&nbsp;</div></li><li><div>        $row['value'] = $value;&nbsp;</div></li><li><div>        $wpdb-&gt;replace($table, $row);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderOption($pk, $option) {&nbsp;</div></li><li><div>    $optionsDB = EzGA::$options;&nbsp;</div></li><li><div>    if (isset($optionsDB[$pk])) {&nbsp;</div></li><li><div>      $value = $optionsDB[$pk];&nbsp;</div></li><li><div>      $option['value'] = $value;&nbsp;</div></li><li><div>      if (!empty($option['options']) && is_array($option['options']) && self::isAssoc($option['options'])) {&nbsp;</div></li><li><div>        $option['value'] = $option['options'][$value];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return self::renderRow($pk, $option);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderOptionCell($pk, $option) {&nbsp;</div></li><li><div>    $optionsDB = EzGA::$options;&nbsp;</div></li><li><div>    if (isset($optionsDB[$pk])) {&nbsp;</div></li><li><div>      $value = $optionsDB[$pk];&nbsp;</div></li><li><div>      $option['value'] = $value;&nbsp;</div></li><li><div>      if (!empty($option['type']) && $option['type'] == 'select' &&&nbsp;</div></li><li><div>              !empty($option['options']) && is_array($option['options']) &&&nbsp;</div></li><li><div>              self::isAssoc($option['options'])&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>        $option['key'] = $value;&nbsp;</div></li><li><div>        $option['value'] = $option['options'][$value];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $name = $option['name'];&nbsp;</div></li><li><div>    if (!empty($option['type'])) {&nbsp;</div></li><li><div>      $type = $option['type'];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $type = 'text';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $helpAttr = self::renderHelpAttr($pk, $option);&nbsp;</div></li><li><div>    switch ($type) {&nbsp;</div></li><li><div>      case 'textarea':&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;div $helpAttr class='form-group ez-wide'&gt;&lt;label&gt;$name&lt;/label&gt;&lt;span class='form-control' style='display:inline-block;height:120px;overflow-y:scroll'&gt;$value&lt;/span&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'colorpicker': // render as a &lt;div&gt; with a colorpicker&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;div $helpAttr class='ez-row'&gt;&lt;div class='col-lg-5' style='height:43px'&gt;&lt;label class='ez-row' for='$pk-value'&gt;$name&lt;/label&gt;&lt;/div&gt;&lt;div class='col-lg-7'&gt;&lt;div class='input-group colorpicker'&gt;$value&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'colorpicker2': // render as a &lt;div&gt; with a wider colorpicker&nbsp;</div></li><li><div>        $option['type'] = 'colorpicker';&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;div $helpAttr class='ez-row'&gt;&lt;div class='col-lg-3' style='height:43px'&gt;&lt;label class='ez-row' for='$pk-value'&gt;$name&lt;/label&gt;&lt;/div&gt;&lt;div class='col-lg-9'&gt;&lt;div class='input-group colorpicker'&gt;$value&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'radio': // render as &lt;tr&gt;&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;tr $helpAttr&gt;&lt;td&gt;$name&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>        foreach ($option['options'] as $k =&gt; $o) {&nbsp;</div></li><li><div>          if (!empty($optionsDB[$pk]) && $optionsDB[$pk] !== 0 && $optionsDB[$pk] == $o) {&nbsp;</div></li><li><div>            $checked = &quot;checked='checked'&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>            $checked = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $cell .= &quot;&lt;td class='center-text'&gt;&lt;input $checked type='radio' name='$pk' id='$pk-$k' data-value='$o'&gt;&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $cell .= &quot;&lt;/tr&gt;\n&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'radio2': // render as a line&nbsp;</div></li><li><div>        if (empty($option['noCenter'])) {&nbsp;</div></li><li><div>          $class = &quot;class='center-block'&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>          $class = &quot;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $cell = &quot;&lt;div $class $helpAttr&gt;&lt;label&gt;$name&lt;/label&gt;&lt;div style='padding:10px;border: 1px solid #ccc;'&gt;&quot;;&nbsp;</div></li><li><div>        foreach ($option['options'] as $o =&gt; $v) {&nbsp;</div></li><li><div>          if (!empty($optionsDB[$pk]) && $optionsDB[$pk] !== 0 && $optionsDB[$pk] == $o) {&nbsp;</div></li><li><div>            $checked = &quot;checked='checked'&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>            $checked = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $cell .= &quot;&lt;span style='padding-right:10px;display:inline-block'&gt;&lt;input $checked type='radio' name='$pk' id='$pk-$o' data-value='$o'&gt; $v&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $cell .= &quot;&lt;/div&gt;&lt;/div&gt;\n&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'checkbox2': // render in two &lt;td&gt;s&nbsp;</div></li><li><div>        $option['type'] = 'checkbox';&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;td $helpAttr&gt;$name&lt;/td&gt;&lt;td class='center-text'&gt;$value&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      default:&nbsp;</div></li><li><div>        if (empty($option['noCenter'])) {&nbsp;</div></li><li><div>          $center = &quot;center-block&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>          $center = &quot;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $value = self::renderOptionValue($pk, $option);&nbsp;</div></li><li><div>        $cell = &quot;&lt;div $helpAttr class='form-group $center'&gt;&lt;label&gt;$name&lt;/label&gt;&lt;span class='form-control'&gt;$value&lt;/span&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $cell;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderHelpAttr($pk, $option, $tip = false) {&nbsp;</div></li><li><div>    $placement = $type = $dataMode = $name = $more_help = $help = &quot;&quot;;&nbsp;</div></li><li><div>    extract($option);&nbsp;</div></li><li><div>    if (empty($placement)) {&nbsp;</div></li><li><div>      if ($dataMode == 'popup' || $type == 'checkbox') {&nbsp;</div></li><li><div>        $placement = 'bottom';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $placement = 'top';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($more_help)) {&nbsp;</div></li><li><div>      $clickHelp = &quot;class='btn-help'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $clickHelp = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if ($tip) {&nbsp;</div></li><li><div>      return &quot;data-toggle='tooltip' data-placement='top' title='$name&lt;br&gt;$help'p&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      return &quot;data-content='$help' data-help='$more_help' data-toggle='popover' data-placement='$placement' data-trigger='hover' title='$name' $clickHelp&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderOptionHelp($pk, $option, $size = &quot;1.5em&quot;) {&nbsp;</div></li><li><div>    $type = $name = $more_help = $help = &quot;&quot;;&nbsp;</div></li><li><div>    extract($option);&nbsp;</div></li><li><div>    if ($type == 'hidden') {&nbsp;</div></li><li><div>      $tr = '';&nbsp;</div></li><li><div>      return $tr;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($more_help)) {&nbsp;</div></li><li><div>      $clickHelp = &quot;class='btn-help'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $clickHelp = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $helpAttr = self::renderHelpAttr($pk, $option);&nbsp;</div></li><li><div>    $str = &quot;&lt;a style='font-size:$size' $helpAttr&gt;&lt;i class='glyphicon glyphicon-question-sign blue'&gt;&lt;/i&gt;&lt;/a&gt;\n&quot;;&nbsp;</div></li><li><div>    return $str;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderRow($pk, $option) {&nbsp;</div></li><li><div>    $type = $name = &quot;&quot;;&nbsp;</div></li><li><div>    extract($option);&nbsp;</div></li><li><div>    if ($type == 'hidden') {&nbsp;</div></li><li><div>      $str = '';&nbsp;</div></li><li><div>      return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $str = &quot;&lt;tr&gt;&lt;td&gt;$name&lt;/td&gt;&quot;;&nbsp;</div></li><li><div>    $str .= &quot;&lt;td&gt;&quot;&nbsp;</div></li><li><div>            . self::renderOptionValue($pk, $option)&nbsp;</div></li><li><div>            . &quot;&lt;/td&gt;&lt;td class='center-text'&gt;&quot;&nbsp;</div></li><li><div>            . self::renderOptionHelp($pk, $option)&nbsp;</div></li><li><div>            . &quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;;&nbsp;</div></li><li><div>    return $str;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function renderOptionValue($pk, $option, $dbValue = &quot;&quot;) {&nbsp;</div></li><li><div>    $type = 'text';&nbsp;</div></li><li><div>    $dataMode = &quot;data-mode='inline'&quot;;&nbsp;</div></li><li><div>    $options = array(); // for select and radio controls&nbsp;</div></li><li><div>    $value = $more_help = $dataValue = $dataTpl = $dataSource = $slug = $validator = $button = $reveal = &quot;&quot;;&nbsp;</div></li><li><div>    extract($option);&nbsp;</div></li><li><div>    if ($dataMode == 'popup') {&nbsp;</div></li><li><div>      $dataMode = &quot;data-mode='popup'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $dataMode = &quot;data-mode='inline'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($dbValue)) {&nbsp;</div></li><li><div>      $value = $dbValue;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if ($type == 'hidden') {&nbsp;</div></li><li><div>      $str = '';&nbsp;</div></li><li><div>      return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $dataType = &quot;data-type='$type'&quot;;&nbsp;</div></li><li><div>    if (!empty($more_help)) {&nbsp;</div></li><li><div>      $clickHelp = &quot;class='btn-help'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $clickHelp = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty($slug)) {&nbsp;</div></li><li><div>      $slug = &quot;$pk-value&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    switch ($type) {&nbsp;</div></li><li><div>      case 'radio':&nbsp;</div></li><li><div>        return '';&nbsp;</div></li><li><div>      case 'no-edit':&nbsp;</div></li><li><div>        $class = &quot;black&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'checkbox' :&nbsp;</div></li><li><div>        $class = &quot;xedit-checkbox&quot;;&nbsp;</div></li><li><div>        $dataType = &quot;data-type='checklist'&quot;;&nbsp;</div></li><li><div>        $dataMode = '';&nbsp;</div></li><li><div>        $dataValue = &quot;data-value='$value'&quot;;&nbsp;</div></li><li><div>        if ($value) {&nbsp;</div></li><li><div>          $class .= ' btn-sm btn-success';&nbsp;</div></li><li><div>          $value = &quot;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>          $class .= ' btn-sm btn-danger';&nbsp;</div></li><li><div>          $value = &quot;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'select':&nbsp;</div></li><li><div>        $class = &quot;xedit&quot;;&nbsp;</div></li><li><div>        $dataType = &quot;data-type='select'&quot;;&nbsp;</div></li><li><div>        if (!empty($key)) {&nbsp;</div></li><li><div>          $dataValue = &quot;data-value='$key'&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>          $dataValue = &quot;data-value='$value'&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $dataSource = 'data-source=&quot;' . self::mkSelectSource($options) . '&quot;';&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'file': // special case, return from here&nbsp;</div></li><li><div>        $type = '';&nbsp;</div></li><li><div>        $class = 'red';&nbsp;</div></li><li><div>        $value = &quot;&lt;input data-pk='$pk' id='fileinput' type='file' class='file' multiple=true data-show-preview='false' data-show-upload='false'&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'colorpicker':&nbsp;</div></li><li><div>        $str = &quot;&lt;input id='$slug' class='form-control' type='text' value='$value' /&gt;&lt;span class='input-group-addon' style='width:50%'&gt;&lt;i style='width:80%'&gt;&lt;/i&gt;&lt;/span&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'submit':&nbsp;</div></li><li><div>      case 'button':&nbsp;</div></li><li><div>        $class = &quot;btn btn-primary btn-ez&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'textarea':&nbsp;</div></li><li><div>        $str = &quot;&lt;a href='#' class='xedit' data-type='textarea' $dataMode data-pk='$pk' data-name='value'&gt;&quot; . htmlspecialchars(stripslashes($value)) . &quot;&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>      case 'dbselect':&nbsp;</div></li><li><div>      case 'dbeditableselect':&nbsp;</div></li><li><div>      case 'editableselect':&nbsp;</div></li><li><div>      case 'text':&nbsp;</div></li><li><div>      default :&nbsp;</div></li><li><div>        $class = &quot;xedit&quot;;&nbsp;</div></li><li><div>        break;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($validator)) {&nbsp;</div></li><li><div>      $valid = &quot;data-validator='$validator'&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $valid = &quot;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty($button)) {&nbsp;</div></li><li><div>      $fun = &quot;proc_$reveal&quot;;&nbsp;</div></li><li><div>      $options = self::$options;&nbsp;</div></li><li><div>      if (!empty($options[$reveal])) {&nbsp;</div></li><li><div>        $revealOption = $options[$reveal];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $revealOption = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if (method_exists(&quot;EzGA&quot;, $fun)) {&nbsp;</div></li><li><div>        $dataReveal = @self::$fun($revealOption);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $dataReveal = &quot;data-value='$revealOption' class='btn-sm btn-success reveal'&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $reveal = &quot;&lt;a href='#' style='float:right' $dataReveal&gt;$button&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $reveal = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty($str)) {&nbsp;</div></li><li><div>      $str = &quot;&lt;input id='$slug' style='display:none'&gt;&lt;a class='$class' data-name='$slug' data-pk='$pk' $dataType $dataMode $dataValue $dataTpl $dataSource $valid&gt;$value $reveal&lt;/a&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $str;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function isUpdateAvailable() { // not ready yet&nbsp;</div></li><li><div>    return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function randString($len = 32) {&nbsp;</div></li><li><div>    $chars = 'abcdefghijklmnopqrstuvwxyz';&nbsp;</div></li><li><div>    $chars .= strtoupper($chars) . '0123456789';&nbsp;</div></li><li><div>    $charLen = strlen($chars) - 1;&nbsp;</div></li><li><div>    $string = '';&nbsp;</div></li><li><div>    for ($i = 0; $i &lt; $len; $i++) {&nbsp;</div></li><li><div>      $pos = rand(0, $charLen);&nbsp;</div></li><li><div>      $string .= $chars[$pos];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $string;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function flashMsg($msg, $class, $noflash = false, $noPre = false) {&nbsp;</div></li><li><div>    if ($noflash) {&nbsp;</div></li><li><div>      $fun = &quot;show&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $fun = &quot;flash&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $cleaned = str_replace(array(&quot;\n&quot;), array('\n'), $msg);&nbsp;</div></li><li><div>    if (!empty($cleaned)) {&nbsp;</div></li><li><div>      $msg = htmlspecialchars($cleaned);&nbsp;</div></li><li><div>      if (!$noPre) {&nbsp;</div></li><li><div>        $msg = &quot;&lt;pre&gt;$msg&lt;/pre&gt;&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo '&lt;script&gt;$(document).ready(function() {' .&nbsp;</div></li><li><div>      $fun . $class . '(&quot;' . $msg . '&quot;);&nbsp;</div></li><li><div>      });&nbsp;</div></li><li><div>      &lt;/script&gt;';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function flashError($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Error', false, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showError($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Error', true, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function flashWarning($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Warning', false, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showWarning($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Warning', true, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function flashSuccess($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Success', false, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showSuccess($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Success', true, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function flashInfo($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Info', false, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showInfo($msg, $noPre = false) {&nbsp;</div></li><li><div>    self::flashMsg($msg, 'Info', true, $noPre);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function toggleMenu($header) {&nbsp;</div></li><li><div>    if (!empty($_SERVER[&quot;HTTP_REFERER&quot;])) {&nbsp;</div></li><li><div>      $referer = $_SERVER[&quot;HTTP_REFERER&quot;];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $referer = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $standAlone = (strpos($referer, 'wp-admin/options-general.php') === false) && !isset($_REQUEST['inframe']);&nbsp;</div></li><li><div>    if (!$standAlone) {&nbsp;</div></li><li><div>      $search = array('&lt;div class=&quot;col-sm-2 col-lg-2&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;div class=&quot;sidebar-nav&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;div class=&quot;nav-canvas&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;ul class=&quot;nav nav-pills nav-stacked main-menu&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;li class=&quot;accordion&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;ul class=&quot;nav nav-pills nav-stacked&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;a href=&quot;#&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;div id=&quot;content&quot; class=&quot;col-lg-10 col-sm-10&quot;&gt;');&nbsp;</div></li><li><div>      $replace = array('&lt;div&gt;', &nbsp;</div></li><li><div>          '&lt;div&gt;', &nbsp;</div></li><li><div>          '&lt;div&gt;', &nbsp;</div></li><li><div>          '&lt;ul class=&quot;nav nav-pills main-menu&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;li class=&quot;dropdown&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;ul class=&quot;dropdown-menu&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;a href=&quot;#&quot; data-toggle=&quot;dropdown&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;div id=&quot;content&quot; class=&quot;col-lg-12 col-sm-12&quot;&gt;');&nbsp;</div></li><li><div>      $header = str_replace($search, $replace, $header);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $header;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showService() {&nbsp;</div></li><li><div>    $select = rand(0, 4);&nbsp;</div></li><li><div>    echo &quot;&lt;div class='center-block' style='margin-left:10px;'&gt;&lt;a href='http://www.thulasidas.com/professional-php-services/' target='_blank' class='popup-long' title='Professional Services' data-content='The author of this plugin may be able to help you with your WordPress or plugin customization needs and other PHP related development. Find a plugin that almost, but not quite, does what you are looking for? Need any other professional PHP/jQuery dev services? Click here!' data-toggle='popover' data-trigger='hover' data-placement='left'&gt;&lt;img src='img/svcs/300x250-0$select.jpg' style='border:0' alt='Professional Services from the Plugin Author' /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class='clearfix'&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  // Frontend functions&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function preFilter($content, $isWidget = false) {&nbsp;</div></li><li><div>    $plgName = self::getPlgName();&nbsp;</div></li><li><div>    if (self::$noAds) {&nbsp;</div></li><li><div>      $reason = self::$noAdsReason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: PreFiltered - NoAds [ $reason] --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $killed = self::isKilled();&nbsp;</div></li><li><div>    if (!empty($killed)) {&nbsp;</div></li><li><div>      $reason = &quot;is Killed - $killed. &quot;;&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (empty(self::$options['allow_feeds']) && is_feed()) {&nbsp;</div></li><li><div>      $reason = 'is Feed and not allowed. ';&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $metaOptions = self::getMetaOptions();&nbsp;</div></li><li><div>    if (strpos($content, &quot;&lt;!--noadsense--&gt;&quot;) !== false) {&nbsp;</div></li><li><div>      $reason = 'Unfiltered - suppressed by noadsense comment. ';&nbsp;</div></li><li><div>      self::$metaOptions['adsense'] = 'no';&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (isset($metaOptions['adsense']) && $metaOptions['adsense'] == 'no') {&nbsp;</div></li><li><div>      $reason = 'Unfiltered - suppressed by meta option adsense = no. ';&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (self::isBanned()) {&nbsp;</div></li><li><div>      $reason = 'IP is in Banned IP list. ';&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!in_the_loop() && !$isWidget && !is_singular() && !is_front_page()) {&nbsp;</div></li><li><div>      $reason = 'WP is not in the loop. ';&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    self::cacheContent($content);&nbsp;</div></li><li><div>    if (!self::isSafe()) {&nbsp;</div></li><li><div>      self::$noAds = true;&nbsp;</div></li><li><div>      $reason = 'Unfiltered - Content is not Safe. ';&nbsp;</div></li><li><div>      self::$noAdsReason .= $reason;&nbsp;</div></li><li><div>      return $content . &quot; &lt;!-- $plgName: $reason --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $content . &quot; &lt;!-- $plgName: Filtered --&gt;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function showUnreal($print = true) {&nbsp;</div></li><li><div>    $unreal = &quot;&lt;div style='text-align:center;margin-left:auto;margin-right:auto;font-size:0.6em'&gt;&lt;a href='http://www.thulasidas.com/adsense/' target='_blank' title='The simplest way to put AdSense to work for you!'&gt; Easy Plugin for AdSense&lt;/a&gt; by &lt;a href='http://www.Thulasidas.com/' target='_blank' title='Unreal Blog proudly brings you Easy Plugin for AdSense'&gt;Unreal&lt;/a&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>    if ($print) {&nbsp;</div></li><li><div>      echo $unreal;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      return $unreal;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function mkRedBox($w, $h, $p) {&nbsp;</div></li><li><div>    if (!current_user_can('activate_plugins')) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if (!empty(self::$options['suppressBoxes'])) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $line1 = &quot;Your ads will be inserted here by&quot;;&nbsp;</div></li><li><div>    $line2 = self::getPlgName() . &quot;.&quot;;&nbsp;</div></li><li><div>    $option1 = &quot;&lt;u title='Go to your plugin admin page to paste your ad code from your provider or enter your account details'&gt;Setup your Ads&lt;/u&gt;&quot;;&nbsp;</div></li><li><div>    $option2 = &quot;&lt;u title='Use the options in the Ad Alignment panel to suppress this ad slot'&gt;Suppress this ad slot&lt;/u&gt;&quot;;&nbsp;</div></li><li><div>    $option3 = &quot;&lt;u title='Use the Pro option to suppress placement boxes'&gt;Suppress Placement Boxes&lt;/u&gt;&quot;;&nbsp;</div></li><li><div>    $line3 = &quot;Please go to the plugin admin page to &quot;;&nbsp;</div></li><li><div>    $area = $h * $w;&nbsp;</div></li><li><div>    if ($h &gt; 400) {&nbsp;</div></li><li><div>      $or = &quot;&lt;br&gt;&lt;br&gt;OR&lt;br&gt;&lt;br&gt;&quot;;&nbsp;</div></li><li><div>      $br = &quot;&lt;br&gt;&lt;br&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else if ($area &gt; 300 * 250) {&nbsp;</div></li><li><div>      $or = &quot;&lt;br&gt;OR&lt;br&gt;&quot;;&nbsp;</div></li><li><div>      $br = &quot;&lt;br&gt;&lt;br&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else if ($h &gt; 240) {&nbsp;</div></li><li><div>      $or = &quot; or &quot;;&nbsp;</div></li><li><div>      $br = &quot;&lt;br&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $or = &quot; or &quot;;&nbsp;</div></li><li><div>      $br = &quot; &quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if ($area &lt; 468 * 60) {&nbsp;</div></li><li><div>      $or = $line3 = $option1 = $option2 = $option3 = &quot;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else if ($area &lt; 728 * 90) {&nbsp;</div></li><li><div>      $line3 = &quot;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if ($area == 300 * 250) { // default ads&nbsp;</div></li><li><div>      $line4 = &quot;&lt;br&gt;&lt;br&gt;&lt;b&gt;This red box is shown only when logged on as Admin&lt;/b&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else {&nbsp;</div></li><li><div>      $line4 = &quot;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $ret = &quot;&lt;div style='width:{$w}px;height:{$h}px;border:1px solid red;'&gt;&lt;div style='padding:{$p}px;text-align:center;font-family:arial;font-size:8pt;'&gt;$line1 $br $line2 &lt;br&gt; $br $line3 $br $option1 $or $option2 $or $option3.$line4&lt;/div&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>    return $ret;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function handleDefaultText($text, $key = '300x250') {&nbsp;</div></li><li><div>    $ret = $text;&nbsp;</div></li><li><div>    if ($text == self::$options['defaultText'] || strlen(trim($text)) == 0) {&nbsp;</div></li><li><div>      $x = strpos($key, 'x');&nbsp;</div></li><li><div>      $w = substr($key, 0, $x);&nbsp;</div></li><li><div>      $h = substr($key, $x + 1);&nbsp;</div></li><li><div>      $p = (int) (min($w, $h) / 6);&nbsp;</div></li><li><div>      $ret = self::mkRedBox($w, $h, $p);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $ret;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getMetaOptions() {&nbsp;</div></li><li><div>    if (empty(self::$metaOptions)) {&nbsp;</div></li><li><div>      global $post;&nbsp;</div></li><li><div>      if (is_object($post)) {&nbsp;</div></li><li><div>        $postID = $post-&gt;ID;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        global $wp;&nbsp;</div></li><li><div>        $url = home_url(add_query_arg(array(), $wp-&gt;request));&nbsp;</div></li><li><div>        $postID = url_to_postid($url);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $metaOptions = array();&nbsp;</div></li><li><div>      if (!empty($postID)) {&nbsp;</div></li><li><div>        $postMeta = get_post_meta($postID);&nbsp;</div></li><li><div>        $lookup = array('adsense' =&gt; 'adsense', &nbsp;</div></li><li><div>            'show_leadin' =&gt; 'adsense-top', &nbsp;</div></li><li><div>            'show_top' =&gt; 'adsense-top', &nbsp;</div></li><li><div>            'show_midtext' =&gt; 'adsense-middle', &nbsp;</div></li><li><div>            'show_middle' =&gt; 'adsense-middle', &nbsp;</div></li><li><div>            'show_leadout' =&gt; 'adsense-bottom', &nbsp;</div></li><li><div>            'show_bottom' =&gt; 'adsense-bottom', &nbsp;</div></li><li><div>            'show_widget' =&gt; 'adsense-widget', &nbsp;</div></li><li><div>            'title_gsearch' =&gt; 'adsense-search', &nbsp;</div></li><li><div>            'show_lu' =&gt; 'adsense-linkunits');&nbsp;</div></li><li><div>        foreach ($lookup as $optKey =&gt; $metaKey) {&nbsp;</div></li><li><div>          $metaStyle = $metaOptions[$optKey] = '';&nbsp;</div></li><li><div>          if (!empty($postMeta[$metaKey])) {&nbsp;</div></li><li><div>            $metaStyle = strtolower($postMeta[$metaKey][0]);&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else if (!empty(self::$options[$optKey])) {&nbsp;</div></li><li><div>            $metaStyle = self::$options[$optKey];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $style = $metaStyle; // if the option contains CSS directive&nbsp;</div></li><li><div>          switch ($metaStyle) {&nbsp;</div></li><li><div>            case 'left';&nbsp;</div></li><li><div>              $style = 'text-align:left';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>            case 'leftfloat';&nbsp;</div></li><li><div>            case 'floatleft';&nbsp;</div></li><li><div>            case 'leftfloat';&nbsp;</div></li><li><div>              $style = 'float:left;display:block';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>            case 'center';&nbsp;</div></li><li><div>              $style = 'text-align:center';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>            case 'right';&nbsp;</div></li><li><div>              $style = 'text-align:right';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>            case 'rightfloat';&nbsp;</div></li><li><div>            case 'floatright';&nbsp;</div></li><li><div>            case 'rightfloat';&nbsp;</div></li><li><div>              $style = 'float:right;display:block';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>              $style = $metaStyle;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $metaOptions[$optKey] = $style;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      self::$metaOptions = $metaOptions;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return self::$metaOptions;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function findParas($content) {&nbsp;</div></li><li><div>    if (!empty(self::$paras)) {&nbsp;</div></li><li><div>      return self::$paras;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $paras = array();&nbsp;</div></li><li><div>    $paraMarker = &quot;&lt;p&quot;;&nbsp;</div></li><li><div>    if (stripos($content, &quot;&lt;p&quot;) === false) {&nbsp;</div></li><li><div>      $paraMarker = &quot;&lt;br&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    $lastpos = 0;&nbsp;</div></li><li><div>    do {&nbsp;</div></li><li><div>      $paras[] = $lastpos;&nbsp;</div></li><li><div>      $lastpos = stripos($content, $paraMarker, $lastpos + 1);&nbsp;</div></li><li><div>    } while ($lastpos !== false);&nbsp;</div></li><li><div>    self::$paras = $paras;&nbsp;</div></li><li><div>    return $paras;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function getSplit($content) {&nbsp;</div></li><li><div>    $paras = EzGA::findParas($content);&nbsp;</div></li><li><div>    $split = 0;&nbsp;</div></li><li><div>    if (!empty($paras)) {&nbsp;</div></li><li><div>      $nParas = count($paras);&nbsp;</div></li><li><div>      if (!empty(EZGA::$options['para_split'])) {&nbsp;</div></li><li><div>        if ($nParas &gt; EZGA::$options['para_split']) {&nbsp;</div></li><li><div>          $split = $paras[EZGA::$options['para_split']];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>          $split = $nParas;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>        $split = $paras[floor($nParas / 2)];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $split;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function mkBorder() {&nbsp;</div></li><li><div>    if (!empty(self::$options['show_borders']) && empty(self::$border)) {&nbsp;</div></li><li><div>      self::$border = 'border:#' . self::$options['border_normal'] .&nbsp;</div></li><li><div>              ' solid ' . self::$options['border_width'] . 'px;&quot; ' .&nbsp;</div></li><li><div>              ' onmouseover=&quot;this.style.border=\'#' . self::$options['border_color'] .&nbsp;</div></li><li><div>              ' solid ' . self::$options['border_width'] . 'px\'&quot; ' .&nbsp;</div></li><li><div>              'onmouseout=&quot;this.style.border=\'#' . self::$options['border_normal'] .&nbsp;</div></li><li><div>              ' solid ' . self::$options['border_width'] . 'px\'';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return self::$border;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  static function isKilled() {&nbsp;</div></li><li><div>    foreach (self::$kills as $k) {&nbsp;</div></li><li><div>      $fn = &quot;is_$k&quot;;&nbsp;</div></li><li><div>      if (!empty(self::$options[&quot;kill_$k&quot;]) && $fn()) {&nbsp;</div></li><li><div>        return $k;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return EzGAPro::isKilled();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 3.93</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.98/classes/ez_ga/" class="active">3.98</a></li><li><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.97/classes/ez_ga/" class="">3.97</a></li><li><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.96/classes/ez_ga/" class="">3.96</a></li><li><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.95/classes/ez_ga/" class="">3.95</a></li><li><a href="http://hookr.io/plugins/ads-ez-plugin-for-google-adsense/3.93/classes/ez_ga/" class="">3.93</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>EzGA</li><li><span></span>Ads EZ Plugin for Google AdSense</li><li><span></span>3.98</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>