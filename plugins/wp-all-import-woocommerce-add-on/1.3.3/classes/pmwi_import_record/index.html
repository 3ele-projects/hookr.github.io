<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.3.3" data-slug="wp-all-import-woocommerce-add-on" data-type="class" data-id="85555"><head xmlns="http://www.w3.org/1999/xhtml"><title> pmwi_import_record | class | Wp All Import Woocommerce Add On | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="PMWI_Import_Record, class, plugin, wp-all-import-woocommerce-add-on, 1.3.3" /><meta name="description" content="The WP All Import - WooCommerce Add-On PMWI Import Record class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=87797a11d7381bf21332b14508d2f6a5' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/pmwi_import_record/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpmwi_import_record%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpmwi_import_record%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-wp-all-import-woocommerce-add-on-1.3.3-class-pmwi_import_record","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="pmwi_import_record" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to wp-all-import-woocommerce-add&hellip;." href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/" class="plugin"><span property="name">wp-all-import-woocommerce-add&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.3.3." href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/" class="H_VERSION"><span property="name">1.3.3</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">pmwi_import_record</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="48"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/all/" title="All">All <span class="count badge">48</span></a></li><li class="" data-id="new" data-count="1"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/new/" title="New">New <span class="count badge">1</span></a></li><li class="" data-id="hooks" data-count="13"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/hooks/" title="Hooks">Hooks <span class="count badge">13</span></a></li><li class="" data-id="action" data-count="5"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/actions/" title="Actions">Actions <span class="count badge">5</span></a></li><li class="" data-id="filter" data-count="8"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/filters/" title="Filters">Filters <span class="count badge">8</span></a></li><li class="active" data-id="class" data-count="12"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/classes/" title="Classes">Classes <span class="count badge">12</span></a></li><li class="" data-id="constant" data-count="5"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/constants/" title="Constants">Constants <span class="count badge">5</span></a></li><li class="" data-id="function" data-count="17"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/functions/" title="Functions">Functions <span class="count badge">17</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>PMWI_Import_Record</strong></h1><p>The WP All Import - WooCommerce Add-On <strong>PMWI Import Record</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/files/models-import-record/" class="file">/models/import/record.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="3" class="block" start="3"><li><div>class PMWI_Import_Record extends PMWI_Model_Record {        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Associative array of data which will be automatically available as variables when template is rendered&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public $data = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $options = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $previousID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $post_meta_to_update;&nbsp;</div></li><li><div>    public $post_meta_to_insert;&nbsp;</div></li><li><div>    public $existing_meta_keys;&nbsp;</div></li><li><div>    public $articleData;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $reserved_terms = array(&nbsp;</div></li><li><div>                'attachment', 'attachment_id', 'author', 'author_name', 'calendar', 'cat', 'category', 'category__and', &nbsp;</div></li><li><div>                'category__in', 'category__not_in', 'category_name', 'comments_per_page', 'comments_popup', 'cpage', 'day', &nbsp;</div></li><li><div>                'debug', 'error', 'exact', 'feed', 'hour', 'link_category', 'm', 'minute', 'monthnum', 'more', 'name', &nbsp;</div></li><li><div>                'nav_menu', 'nopaging', 'offset', 'order', 'orderby', 'p', 'page', 'page_id', 'paged', 'pagename', 'pb', 'perm', &nbsp;</div></li><li><div>                'post', 'post__in', 'post__not_in', 'post_format', 'post_mime_type', 'post_status', 'post_tag', 'post_type', &nbsp;</div></li><li><div>                'posts', 'posts_per_archive_page', 'posts_per_page', 'preview', 'robots', 's', 'search', 'second', 'sentence', &nbsp;</div></li><li><div>                'showposts', 'static', 'subpost', 'subpost_id', 'tag', 'tag__and', 'tag__in', 'tag__not_in', 'tag_id', &nbsp;</div></li><li><div>                'tag_slug__and', 'tag_slug__in', 'taxonomy', 'tb', 'term', 'type', 'w', 'withcomments', 'withoutcomments', 'year', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Initialize model instance&nbsp;</div></li><li><div>     * @param array[optional] $data Array of record data to initialize object with&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function __construct($data = array()) {&nbsp;</div></li><li><div>        parent::__construct($data);&nbsp;</div></li><li><div>        $this-&gt;setTable(PMXI_Plugin::getInstance()-&gt;getTablePrefix() . 'imports');&nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Perform import operation&nbsp;</div></li><li><div>     * @param string $xml XML string to import&nbsp;</div></li><li><div>     * @param callback[optional] $logger Method where progress messages are submmitted&nbsp;</div></li><li><div>     * @return PMWI_Import_Record&nbsp;</div></li><li><div>     * @chainable&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function parse($parsing_data = array()) { //$import, $count, $xml, $logger = NULL, $chunk = false, $xpath_prefix = &quot;&quot;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($parsing_data['import']-&gt;options['custom_type'] != 'product') return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        extract($parsing_data);        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter('user_has_cap', array($this, '_filter_has_cap_unfiltered_html')); kses_init(); // do not perform special filtering for imported content&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;options = $import-&gt;options;        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $cxpath = $xpath_prefix . $import-&gt;xpath;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;data = array();&nbsp;</div></li><li><div>        $records = array();&nbsp;</div></li><li><div>        $tmp_files = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $chunk == 1 and $logger and call_user_func($logger, __('Composing product data...', 'wpai_woocommerce_addon_plugin'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product types&nbsp;</div></li><li><div>        if ($import-&gt;options['is_multiple_product_type'] != 'yes' and &quot;&quot; != $import-&gt;options['single_product_type']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_types'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_type'], $file)-&gt;parse($records); $tmp_files[] = $file;                                    &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_types'] = array_fill(0, $count, $import-&gt;options['multiple_product_type']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Virtual                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_virtual'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_virtual']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_virtual'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_virtual'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_virtual'] = array_fill(0, $count, $import-&gt;options['is_product_virtual']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Downloadable                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_downloadable'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_downloadable']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_downloadable'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_downloadable'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_downloadable'] = array_fill(0, $count, $import-&gt;options['is_product_downloadable']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Variable Enabled                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_enabled'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_enabled']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_enabled'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_enabled'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_enabled'] = array_fill(0, $count, $import-&gt;options['is_product_enabled']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Featured                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_featured'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_featured']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_featured'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_featured'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_featured'] = array_fill(0, $count, $import-&gt;options['is_product_featured']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Visibility                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_visibility'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_visibility']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_visibility'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_visibility'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_visibility'] = array_fill(0, $count, $import-&gt;options['is_product_visibility']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_sku']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_sku'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_sku'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_sku'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_variation_description']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_variation_description'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_variation_description'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_variation_description'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_url']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_url'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_url'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_url'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_button_text']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_button_text'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_button_text'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_button_text'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_regular_price']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_regular_price'] = array_map(array($this, 'adjust_price'), array_map(array($this, 'prepare_price'), XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_regular_price'], $file)-&gt;parse($records)), array_fill(0, $count, &quot;regular_price&quot;)); $tmp_files[] = $file;            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_regular_price'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($import-&gt;options['is_regular_price_shedule'] and &quot;&quot; != $import-&gt;options['single_sale_price_dates_from']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_sale_price_dates_from'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_sale_price_dates_from'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_sale_price_dates_from'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($import-&gt;options['is_regular_price_shedule'] and &quot;&quot; != $import-&gt;options['single_sale_price_dates_to']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_sale_price_dates_to'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_sale_price_dates_to'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_sale_price_dates_to'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_sale_price']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_sale_price'] = array_map(array($this, 'adjust_price'), array_map(array($this, 'prepare_price'), XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_sale_price'], $file)-&gt;parse($records)), array_fill(0, $count, &quot;sale_price&quot;)); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_sale_price'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_whosale_price']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_whosale_price'] = array_map(array($this, 'prepare_price'), XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_whosale_price'], $file)-&gt;parse($records)); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_whosale_price'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_files']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_files'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_files'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_files'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_files_names']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_files_names'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_files_names'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_files_names'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_download_limit']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_download_limit'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_download_limit'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_download_limit'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_download_expiry']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_download_expiry'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_download_expiry'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_download_expiry'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_download_type']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_download_type'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_download_type'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_download_type'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Composing product Tax Status                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_multiple_product_tax_status'] != 'yes' and &quot;&quot; != $import-&gt;options['single_product_tax_status']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_tax_status'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_tax_status'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_tax_status'] = array_fill(0, $count, $import-&gt;options['multiple_product_tax_status']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Tax Class                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_multiple_product_tax_class'] != 'yes' and &quot;&quot; != $import-&gt;options['single_product_tax_class']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_tax_class'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_tax_class'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_tax_class'] = array_fill(0, $count, $import-&gt;options['multiple_product_tax_class']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Manage stock?                                &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_manage_stock'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_manage_stock']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_manage_stock'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_manage_stock'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_manage_stock'] = array_fill(0, $count, $import-&gt;options['is_product_manage_stock']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_stock_qty']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_stock_qty'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_stock_qty'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_stock_qty'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Stock status                            &nbsp;</div></li><li><div>        if ($import-&gt;options['product_stock_status'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_stock_status']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_stock_status'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_stock_status'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        elseif($import-&gt;options['product_stock_status'] == 'auto') {&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_stock_status'] = array_fill(0, $count, $import-&gt;options['product_stock_status']);&nbsp;</div></li><li><div>            foreach ($this-&gt;data['product_stock_qty'] as $key =&gt; $value) {&nbsp;</div></li><li><div>                if ($this-&gt;data['product_manage_stock'][$key] == 'yes') {&nbsp;</div></li><li><div>                    $this-&gt;data['product_stock_status'][$key] = (( (int) $value === 0 or (int) $value &lt; 0 ) and $value != &quot;&quot;) ? 'outofstock' : 'instock';                    &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $this-&gt;data['product_stock_status'][$key] = 'instock';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_stock_status'] = array_fill(0, $count, $import-&gt;options['product_stock_status']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Allow Backorders?                        &nbsp;</div></li><li><div>        if ($import-&gt;options['product_allow_backorders'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_allow_backorders']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_allow_backorders'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_allow_backorders'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_allow_backorders'] = array_fill(0, $count, $import-&gt;options['product_allow_backorders']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Sold Individually?                    &nbsp;</div></li><li><div>        if ($import-&gt;options['product_sold_individually'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_sold_individually']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_sold_individually'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_sold_individually'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_sold_individually'] = array_fill(0, $count, $import-&gt;options['product_sold_individually']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_weight']) {                        &nbsp;</div></li><li><div>            $this-&gt;data['product_weight'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_weight'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_weight'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_length']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_length'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_length'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_length'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_width']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_width'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_width'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_width'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_height']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_height'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_height'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_height'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product Shipping Class                &nbsp;</div></li><li><div>        if ($import-&gt;options['is_multiple_product_shipping_class'] != 'yes' and &quot;&quot; != $import-&gt;options['single_product_shipping_class']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_shipping_class'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_shipping_class'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_shipping_class'] = array_fill(0, $count, $import-&gt;options['multiple_product_shipping_class']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_up_sells']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_up_sells'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_up_sells'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_up_sells'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_cross_sells']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_cross_sells'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_cross_sells'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_cross_sells'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($import-&gt;options['is_multiple_grouping_product'] != 'yes') {&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            if ($import-&gt;options['grouping_indicator'] == 'xpath') {&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                if (&quot;&quot; != $import-&gt;options['single_grouping_product']) {&nbsp;</div></li><li><div>                    $this-&gt;data['product_grouping_parent'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_grouping_product'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $count and $this-&gt;data['product_grouping_parent'] = array_fill(0, $count, $import-&gt;options['multiple_grouping_product']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                if (&quot;&quot; != $import-&gt;options['custom_grouping_indicator_name'] and &quot;&quot; != $import-&gt;options['custom_grouping_indicator_value'] ) {&nbsp;</div></li><li><div>                    $this-&gt;data['custom_grouping_indicator_name'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['custom_grouping_indicator_name'], $file)-&gt;parse($records); $tmp_files[] = $file;    &nbsp;</div></li><li><div>                    $this-&gt;data['custom_grouping_indicator_value'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['custom_grouping_indicator_value'], $file)-&gt;parse($records); $tmp_files[] = $file;    &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $count and $this-&gt;data['custom_grouping_indicator_name'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>                    $count and $this-&gt;data['custom_grouping_indicator_value'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_grouping_parent'] = array_fill(0, $count, $import-&gt;options['multiple_grouping_product']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_purchase_note']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_purchase_note'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_purchase_note'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_purchase_note'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_menu_order']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_menu_order'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_menu_order'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_menu_order'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Composing product Enable reviews        &nbsp;</div></li><li><div>        if ($import-&gt;options['is_product_enable_reviews'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_product_enable_reviews']) {&nbsp;</div></li><li><div>            $this-&gt;data['product_enable_reviews'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_enable_reviews'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['product_enable_reviews'] = array_fill(0, $count, $import-&gt;options['is_product_enable_reviews']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_id']) {&nbsp;</div></li><li><div>            $this-&gt;data['single_product_ID'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_id'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['single_product_ID'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_parent_id']) {&nbsp;</div></li><li><div>            $this-&gt;data['single_product_parent_ID'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_parent_id'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['single_product_parent_ID'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_id_first_is_parent_id']) {&nbsp;</div></li><li><div>            $this-&gt;data['single_product_id_first_is_parent_ID'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_id_first_is_parent_id'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['single_product_id_first_is_parent_ID'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }        &nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_id_first_is_parent_title']) {&nbsp;</div></li><li><div>            $this-&gt;data['single_product_id_first_is_parent_title'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_id_first_is_parent_title'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['single_product_id_first_is_parent_title'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (&quot;&quot; != $import-&gt;options['single_product_id_first_is_variation']) {&nbsp;</div></li><li><div>            $this-&gt;data['single_product_id_first_is_variation'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_product_id_first_is_variation'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['single_product_id_first_is_variation'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Composing product is Manage stock                                    &nbsp;</div></li><li><div>        if ($import-&gt;options['is_variation_product_manage_stock'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_variation_product_manage_stock']) {&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $this-&gt;data['v_product_manage_stock'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_variation_product_manage_stock'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['v_product_manage_stock'] = array_fill(0, $count, $import-&gt;options['is_variation_product_manage_stock']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Stock Qty&nbsp;</div></li><li><div>        if ($import-&gt;options['variation_stock'] != &quot;&quot;) {&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $this-&gt;data['v_stock'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['variation_stock'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['v_stock'] = array_fill(0, $count, '');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Stock Status&nbsp;</div></li><li><div>        if ($import-&gt;options['variation_stock_status'] == 'xpath' and &quot;&quot; != $import-&gt;options['single_variation_stock_status']) {&nbsp;</div></li><li><div>            $this-&gt;data['v_stock_status'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['single_variation_stock_status'], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        elseif($import-&gt;options['variation_stock_status'] == 'auto') {&nbsp;</div></li><li><div>            $count and $this-&gt;data['v_stock_status'] = array_fill(0, $count, $import-&gt;options['variation_stock_status']);&nbsp;</div></li><li><div>            foreach ($this-&gt;data['v_stock'] as $key =&gt; $value) {&nbsp;</div></li><li><div>                if ($this-&gt;data['v_product_manage_stock'][$key] == 'yes') {&nbsp;</div></li><li><div>                    $this-&gt;data['v_stock_status'][$key] = ( ( (int) $value === 0 or (int) $value &lt; 0 ) and $value != &quot;&quot;) ? 'outofstock' : 'instock';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $this-&gt;data['v_stock_status'][$key] = 'instock';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $count and $this-&gt;data['v_stock_status'] = array_fill(0, $count, $import-&gt;options['variation_stock_status']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($import-&gt;options['matching_parent'] != &quot;auto&quot;) {                    &nbsp;</div></li><li><div>            switch ($import-&gt;options['matching_parent']) {&nbsp;</div></li><li><div>                case 'first_is_parent_id':&nbsp;</div></li><li><div>                    $this-&gt;data['single_product_parent_ID'] = $this-&gt;data['single_product_ID'] = $this-&gt;data['single_product_id_first_is_parent_ID'];&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                case 'first_is_parent_title':&nbsp;</div></li><li><div>                    $this-&gt;data['single_product_parent_ID'] = $this-&gt;data['single_product_ID'] = $this-&gt;data['single_product_id_first_is_parent_title'];&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                case 'first_is_variation':&nbsp;</div></li><li><div>                    $this-&gt;data['single_product_parent_ID'] = $this-&gt;data['single_product_ID'] = $this-&gt;data['single_product_id_first_is_variation'];&nbsp;</div></li><li><div>                    break;                        &nbsp;</div></li><li><div>            }                    &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        if ($import-&gt;options['matching_parent'] == 'manual' and $import-&gt;options['parent_indicator'] == &quot;custom field&quot;) {&nbsp;</div></li><li><div>            if (&quot;&quot; != $import-&gt;options['custom_parent_indicator_name']) {&nbsp;</div></li><li><div>                $this-&gt;data['custom_parent_indicator_name'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['custom_parent_indicator_name'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                $count and $this-&gt;data['custom_parent_indicator_name'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (&quot;&quot; != $import-&gt;options['custom_parent_indicator_value']) {&nbsp;</div></li><li><div>                $this-&gt;data['custom_parent_indicator_value'] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['custom_parent_indicator_value'], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                $count and $this-&gt;data['custom_parent_indicator_value'] = array_fill(0, $count, &quot;&quot;);&nbsp;</div></li><li><div>            }            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Composing variations attributes                    &nbsp;</div></li><li><div>        $chunk == 1 and $logger and call_user_func($logger, __('Composing variations attributes...', 'wpai_woocommerce_addon_plugin'));&nbsp;</div></li><li><div>        $attribute_keys = array(); &nbsp;</div></li><li><div>        $attribute_values = array();    &nbsp;</div></li><li><div>        $attribute_in_variation = array(); &nbsp;</div></li><li><div>        $attribute_is_visible = array();            &nbsp;</div></li><li><div>        $attribute_is_taxonomy = array();    &nbsp;</div></li><li><div>        $attribute_create_taxonomy_terms = array();        &nbsp;</div></li><li><div>                        &nbsp;</div></li><li><div>        if (!empty($import-&gt;options['attribute_name'][0])) {            &nbsp;</div></li><li><div>            foreach ($import-&gt;options['attribute_name'] as $j =&gt; $attribute_name) { if ($attribute_name == &quot;&quot;) continue;                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $attribute_keys[$j] = XmlImportParser::factory($xml, $cxpath, $attribute_name, $file)-&gt;parse($records); $tmp_files[] = $file;                                                &nbsp;</div></li><li><div>                $attribute_values[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['attribute_value'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (empty($import-&gt;options['is_advanced'][$j]))&nbsp;</div></li><li><div>                {                    &nbsp;</div></li><li><div>                    $attribute_in_variation[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['in_variations'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                &nbsp;</div></li><li><div>                    $attribute_is_visible[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['is_visible'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>                    $attribute_is_taxonomy[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['is_taxonomy'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;&nbsp;</div></li><li><div>                    $attribute_create_taxonomy_terms[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['create_taxonomy_in_not_exists'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                                &nbsp;</div></li><li><div>                }                &nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    // Is attribute In Variations&nbsp;</div></li><li><div>                    if ($import-&gt;options['advanced_in_variations'][$j] == 'xpath' and &quot;&quot; != $import-&gt;options['advanced_in_variations_xpath'][$j])&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_in_variation[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_in_variations_xpath'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                                                &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_in_variation[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_in_variations'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ($attribute_in_variation[$j] as $key =&gt; $value) {&nbsp;</div></li><li><div>                        if ( ! in_array($value, array('yes', 'no')))&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_in_variation[$j][$key] = 1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_in_variation[$j][$key] = ($value == 'yes') ? 1 : 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Is attribute Visible&nbsp;</div></li><li><div>                    if ($import-&gt;options['advanced_is_visible'][$j] == 'xpath' and &quot;&quot; != $import-&gt;options['advanced_is_visible_xpath'][$j])&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_is_visible[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_visible_xpath'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_is_visible[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_visible'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ($attribute_is_visible[$j] as $key =&gt; $value) {&nbsp;</div></li><li><div>                        if ( ! in_array($value, array('yes', 'no')))&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_is_visible[$j][$key] = 1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_is_visible[$j][$key] = ($value == 'yes') ? 1 : 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Is attribute Taxonomy&nbsp;</div></li><li><div>                    if ($import-&gt;options['advanced_is_taxonomy'][$j] == 'xpath' and &quot;&quot; != $import-&gt;options['advanced_is_taxonomy_xpath'][$j])&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_is_taxonomy[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_taxonomy_xpath'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_is_taxonomy[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_taxonomy'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ($attribute_is_taxonomy[$j] as $key =&gt; $value) {&nbsp;</div></li><li><div>                        if ( ! in_array($value, array('yes', 'no')))&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_is_taxonomy[$j][$key] = 1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_is_taxonomy[$j][$key] = ($value == 'yes') ? 1 : 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Is auto-create terms&nbsp;</div></li><li><div>                    if ($import-&gt;options['advanced_is_create_terms'][$j] == 'xpath' and &quot;&quot; != $import-&gt;options['advanced_is_create_terms_xpath'][$j])&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_create_taxonomy_terms[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_create_terms_xpath'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $attribute_create_taxonomy_terms[$j] = XmlImportParser::factory($xml, $cxpath, $import-&gt;options['advanced_is_create_terms'][$j], $file)-&gt;parse($records); $tmp_files[] = $file;                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ($attribute_create_taxonomy_terms[$j] as $key =&gt; $value) {&nbsp;</div></li><li><div>                        if ( ! in_array($value, array('yes', 'no')))&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_create_taxonomy_terms[$j][$key] = 1;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $attribute_create_taxonomy_terms[$j][$key] = ($value == 'yes') ? 1 : 0;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }            &nbsp;</div></li><li><div>        }                    &nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // serialized attributes for product variations&nbsp;</div></li><li><div>        $this-&gt;data['serialized_attributes'] = array();&nbsp;</div></li><li><div>        if (!empty($attribute_keys)) {&nbsp;</div></li><li><div>            foreach ($attribute_keys as $j =&gt; $attribute_name) {&nbsp;</div></li><li><div>                            &nbsp;</div></li><li><div>                $this-&gt;data['serialized_attributes'][] = array(&nbsp;</div></li><li><div>                    'names' =&gt; $attribute_name, &nbsp;</div></li><li><div>                    'value' =&gt; $attribute_values[$j], &nbsp;</div></li><li><div>                    'is_visible' =&gt; $attribute_is_visible[$j], &nbsp;</div></li><li><div>                    'in_variation' =&gt; $attribute_in_variation[$j], &nbsp;</div></li><li><div>                    'in_taxonomy' =&gt; $attribute_is_taxonomy[$j], &nbsp;</div></li><li><div>                    'is_create_taxonomy_terms' =&gt; $attribute_create_taxonomy_terms[$j]&nbsp;</div></li><li><div> );                        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }                         &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        remove_filter('user_has_cap', array($this, '_filter_has_cap_unfiltered_html')); kses_init(); // return any filtering rules back if they has been disabled for import procedure&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        foreach ($tmp_files as $file) { // remove all temporary files created&nbsp;</div></li><li><div>            unlink($file);&nbsp;</div></li><li><div>        }        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $this-&gt;data;&nbsp;</div></li><li><div>    }        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function filtering($var) {&nbsp;</div></li><li><div>        return (&quot;&quot; == $var) ? false : true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function is_update_data_allowed($option = '')&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if ($this-&gt;options['is_keep_former_posts'] == 'yes') return false;        &nbsp;</div></li><li><div>        if ($this-&gt;options['update_all_data'] == 'yes') return true;&nbsp;</div></li><li><div>        return (!empty($this-&gt;options[$option])) ? true : false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function import( $importData = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        extract($importData); &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! in_array($importData['post_type'], array('product', 'product_variation'))) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $cxpath = $xpath_prefix . $import-&gt;xpath;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        global $woocommerce;        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        extract($this-&gt;data);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $is_new_product = empty($articleData['ID']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get types&nbsp;</div></li><li><div>        $product_type = 'simple';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($this-&gt;options['update_all_data'] == 'no' and ! $this-&gt;options['is_update_product_type'] and ! $is_new_product ) {&nbsp;</div></li><li><div>            $product = WC()-&gt;product_factory-&gt;get_product($pid);&nbsp;</div></li><li><div>            if ( ! empty($product-&gt;product_type) ) $product_type = $product-&gt;product_type;&nbsp;</div></li><li><div>        }        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;existing_meta_keys = array();&nbsp;</div></li><li><div>        foreach (get_post_meta($pid, '') as $cur_meta_key =&gt; $cur_meta_val) $this-&gt;existing_meta_keys[] = $cur_meta_key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;post_meta_to_update = array(); // for bulk UPDATE SQL query&nbsp;</div></li><li><div>        $this-&gt;post_meta_to_insert = array(); // for bulk INSERT SQL query&nbsp;</div></li><li><div>        $this-&gt;articleData = $articleData;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $total_sales = get_post_meta($pid, 'total_sales', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty($total_sales)) update_post_meta($pid, 'total_sales', '0');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $is_downloadable = $product_downloadable[$i];&nbsp;</div></li><li><div>        $is_virtual = $product_virtual[$i];&nbsp;</div></li><li><div>        $is_featured = $product_featured[$i];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Product type + Downloadable/Virtual&nbsp;</div></li><li><div>        if ($is_new_product or $this-&gt;options['update_all_data'] == 'yes' or ($this-&gt;options['update_all_data'] == 'no' and $this-&gt;options['is_update_product_type'])) {                         &nbsp;</div></li><li><div>            $product_type_term = is_exists_term($product_type, 'product_type', 0);    &nbsp;</div></li><li><div>            if ( ! empty($product_type_term) and ! is_wp_error($product_type_term) ) {                    &nbsp;</div></li><li><div>                $this-&gt;associate_terms( $pid, array( (int) $product_type_term['term_taxonomy_id'] ), 'product_type' );    &nbsp;</div></li><li><div>            }            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $is_new_product )&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            delete_post_meta($pid, '_is_first_variation_created');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_downloadable', ($is_downloadable == &quot;yes&quot;) ? 'yes' : 'no' );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_virtual', ($is_virtual == &quot;yes&quot;) ? 'yes' : 'no' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Update post meta&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_regular_price', ($product_regular_price[$i] == &quot;&quot;) ? '' : stripslashes( $product_regular_price[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_sale_price', ($product_sale_price[$i] == &quot;&quot;) ? '' : stripslashes( $product_sale_price[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_tax_status', stripslashes( $product_tax_status[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_tax_class', stripslashes( $product_tax_class[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_visibility', stripslashes( $product_visibility[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_purchase_note', stripslashes( $product_purchase_note[$i] ) );&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_featured', ($is_featured == &quot;yes&quot;) ? 'yes' : 'no' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Dimensions        &nbsp;</div></li><li><div>        if ( $is_virtual == 'no' ) {            &nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_weight', stripslashes( $product_weight[$i] ) );            &nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_length', stripslashes( $product_length[$i] ) );&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_width', stripslashes( $product_width[$i] ) );&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_height', stripslashes( $product_height[$i] ) );            &nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_weight', '' );&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_length', '' );&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_width', '' );&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_height', '' );            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($is_new_product or $this-&gt;is_update_data_allowed('is_update_comment_status')) $this-&gt;wpdb-&gt;update( $this-&gt;wpdb-&gt;posts, array('comment_status' =&gt; ($product_enable_reviews[$i] == 'yes') ? 'open' : 'closed' ), array('ID' =&gt; $pid));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($is_new_product or $this-&gt;is_update_data_allowed('is_update_menu_order')) $this-&gt;wpdb-&gt;update( $this-&gt;wpdb-&gt;posts, array('menu_order' =&gt; ($product_menu_order[$i] != '') ? (int) $product_menu_order[$i] : 0 ), array('ID' =&gt; $pid));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Save shipping class&nbsp;</div></li><li><div>        if ( pmwi_is_update_taxonomy($articleData, $this-&gt;options, 'product_shipping_class') )&nbsp;</div></li><li><div>        {            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $p_shipping_class = ($product_type != 'external') ? $product_shipping_class[$i] : '';            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $p_shipping_class != '' )&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( (int) $product_shipping_class[$i] !== 0 )&nbsp;</div></li><li><div>                {                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( (int) $product_shipping_class[$i] &gt; 0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $t_shipping_class = get_term_by('slug', $p_shipping_class, 'product_shipping_class');        &nbsp;</div></li><li><div>                        // For compatibility with WPML plugin&nbsp;</div></li><li><div>                        $t_shipping_class = apply_filters('wp_all_import_term_exists', $t_shipping_class, 'product_shipping_class', $p_shipping_class, null);                            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) ) &nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $p_shipping_class = (int) $t_shipping_class-&gt;term_taxonomy_id;                         &nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {                        &nbsp;</div></li><li><div>                            $t_shipping_class = is_exists_term( (int) $p_shipping_class, 'product_shipping_class');&nbsp;</div></li><li><div>                                                &nbsp;</div></li><li><div>                            if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) )&nbsp;</div></li><li><div>                            {                                                &nbsp;</div></li><li><div>                                $p_shipping_class = (int) $t_shipping_class['term_taxonomy_id'];     &nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            else&nbsp;</div></li><li><div>                            {&nbsp;</div></li><li><div>                                $t_shipping_class = wp_insert_term(&nbsp;</div></li><li><div>                                    $p_shipping_class, // the term &nbsp;</div></li><li><div>                                      'product_shipping_class' // the taxonomy                                              &nbsp;</div></li><li><div> );    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) )&nbsp;</div></li><li><div>                                {                                                &nbsp;</div></li><li><div>                                    $p_shipping_class = (int) $t_shipping_class['term_taxonomy_id'];     &nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }                        &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $p_shipping_class = '';&nbsp;</div></li><li><div>                    }                        &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    &nbsp;</div></li><li><div>                    $t_shipping_class = is_exists_term($product_shipping_class[$i], 'product_shipping_class');&nbsp;</div></li><li><div>                    &nbsp;</div></li><li><div>                    if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) )&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $p_shipping_class = (int) $t_shipping_class['term_taxonomy_id'];     &nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $t_shipping_class = is_exists_term(htmlspecialchars(strtolower($product_shipping_class[$i])), 'product_shipping_class');&nbsp;</div></li><li><div>                        &nbsp;</div></li><li><div>                        if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) )&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $p_shipping_class = (int) $t_shipping_class['term_taxonomy_id'];     &nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $t_shipping_class = wp_insert_term(&nbsp;</div></li><li><div>                                $product_shipping_class[$i], // the term &nbsp;</div></li><li><div>                                  'product_shipping_class' // the taxonomy                                              &nbsp;</div></li><li><div> );    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if ( ! empty($t_shipping_class) and ! is_wp_error($t_shipping_class) )&nbsp;</div></li><li><div>                            {                                                &nbsp;</div></li><li><div>                                $p_shipping_class = (int) $t_shipping_class['term_taxonomy_id'];     &nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }                            &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            if ( $p_shipping_class !== false and ! is_wp_error($p_shipping_class)) $this-&gt;associate_terms( $pid, array( $p_shipping_class ), 'product_shipping_class' );    &nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Unique SKU&nbsp;</div></li><li><div>        $sku = ($is_new_product) ? '' : get_post_meta($pid, '_sku', true);&nbsp;</div></li><li><div>        $new_sku = wc_clean( trim( stripslashes( $product_sku[$i] ) ) );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        if ( $new_sku == '' and $this-&gt;options['disable_auto_sku_generation'] ) {&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_sku', '' );                &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        elseif ( $new_sku == '' and ! $this-&gt;options['disable_auto_sku_generation'] ) {&nbsp;</div></li><li><div>            if ($is_new_product or $this-&gt;is_update_cf('_sku')) {&nbsp;</div></li><li><div>                $unique_keys = XmlImportParser::factory($xml, $cxpath, $this-&gt;options['unique_key'], $file)-&gt;parse(); $tmp_files[] = $file;&nbsp;</div></li><li><div>                foreach ($tmp_files as $file) { // remove all temporary files created&nbsp;</div></li><li><div>                    @unlink($file);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $new_sku = substr(md5($unique_keys[$i]), 0, 12);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( $new_sku != '' and $new_sku !== $sku ) {&nbsp;</div></li><li><div>            if ( ! empty( $new_sku ) ) {&nbsp;</div></li><li><div>                if ( ! $this-&gt;options['disable_sku_matching'] and &nbsp;</div></li><li><div>                    $this-&gt;wpdb-&gt;get_var( $this-&gt;wpdb-&gt;prepare(&quot;&nbsp;</div></li><li><div>                        SELECT &quot;.$this-&gt;wpdb-&gt;posts.&quot;.ID&nbsp;</div></li><li><div>                        FROM &quot;.$this-&gt;wpdb-&gt;posts.&quot;&nbsp;</div></li><li><div>                        LEFT JOIN &quot;.$this-&gt;wpdb-&gt;postmeta.&quot; ON (&quot;.$this-&gt;wpdb-&gt;posts.&quot;.ID = &quot;.$this-&gt;wpdb-&gt;postmeta.&quot;.post_id)&nbsp;</div></li><li><div>                        WHERE &quot;.$this-&gt;wpdb-&gt;posts.&quot;.post_type = 'product'&nbsp;</div></li><li><div>                        AND &quot;.$this-&gt;wpdb-&gt;posts.&quot;.post_status = 'publish'&nbsp;</div></li><li><div>                        AND &quot;.$this-&gt;wpdb-&gt;postmeta.&quot;.meta_key = '_sku' AND &quot;.$this-&gt;wpdb-&gt;postmeta.&quot;.meta_value = '%s'&nbsp;</div></li><li><div>                     &quot;, $new_sku ) )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>                    $logger and call_user_func($logger, sprintf(__('&lt;b&gt;WARNING&lt;/b&gt;: Product SKU must be unique.', 'wpai_woocommerce_addon_plugin')));&nbsp;</div></li><li><div>                                    &nbsp;</div></li><li><div>                } else {                    &nbsp;</div></li><li><div>                    $this-&gt;pushmeta($pid, '_sku', $new_sku );                            &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sku', '' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;pushmeta($pid, '_variation_description', wp_kses_post($product_variation_description[$i]) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Save Attributes&nbsp;</div></li><li><div>        $attributes = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $is_variation_attributes_defined = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;options['update_all_data'] == &quot;yes&quot; or ( $this-&gt;options['update_all_data'] == &quot;no&quot; and $this-&gt;options['is_update_attributes']) or $is_new_product) { // Update Product Attributes        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $is_update_attributes = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !empty($serialized_attributes) ) {&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                $attribute_position = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $attr_names = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ($serialized_attributes as $anum =&gt; $attr_data) {    $attr_name = $attr_data['names'][$i];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // if ( in_array( $attr_name, $this-&gt;reserved_terms ) ) {&nbsp;</div></li><li><div>                    //     $attr_name .= 's';&nbsp;</div></li><li><div>                    // }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (empty($attr_name) or in_array($attr_name, $attr_names)) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $attr_names[] = $attr_name; &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $is_visible = intval( $attr_data['is_visible'][$i] );&nbsp;</div></li><li><div>                    $is_variation = intval( $attr_data['in_variation'][$i] );&nbsp;</div></li><li><div>                    $is_taxonomy = intval( $attr_data['in_taxonomy'][$i] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( $is_variation and $attr_data['value'][$i] != &quot;&quot; ) {&nbsp;</div></li><li><div>                         $is_variation_attributes_defined = true;&nbsp;</div></li><li><div>                     }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Update only these Attributes, leave the rest alone&nbsp;</div></li><li><div>                    if ( ! $is_new_product and $this-&gt;options['update_all_data'] == &quot;no&quot; and $this-&gt;options['is_update_attributes'] and $this-&gt;options['update_attributes_logic'] == 'only') {&nbsp;</div></li><li><div>                        if ( ! empty($this-&gt;options['attributes_list']) and is_array($this-&gt;options['attributes_list'])) {&nbsp;</div></li><li><div>                            if ( ! in_array( ( ($is_taxonomy) ? wc_attribute_taxonomy_name( $attr_name ) : $attr_name ) , array_filter($this-&gt;options['attributes_list'], 'trim'))) { &nbsp;</div></li><li><div>                                $attribute_position++;&nbsp;</div></li><li><div>                                continue;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else {&nbsp;</div></li><li><div>                            $is_update_attributes = false;&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Leave these attributes alone, update all other Attributes&nbsp;</div></li><li><div>                    if ( ! $is_new_product and $this-&gt;options['update_all_data'] == &quot;no&quot; and $this-&gt;options['is_update_attributes'] and $this-&gt;options['update_attributes_logic'] == 'all_except') {&nbsp;</div></li><li><div>                        if ( ! empty($this-&gt;options['attributes_list']) and is_array($this-&gt;options['attributes_list'])) {&nbsp;</div></li><li><div>                            if ( in_array( ( ($is_taxonomy) ? wc_attribute_taxonomy_name( $attr_name ) : $attr_name ) , array_filter($this-&gt;options['attributes_list'], 'trim'))) { &nbsp;</div></li><li><div>                                $attribute_position++;&nbsp;</div></li><li><div>                                continue;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( $is_taxonomy ) {                                        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( isset( $attr_data['value'][$i] ) ) {&nbsp;</div></li><li><div>                             &nbsp;</div></li><li><div>                             $values = array_map( 'stripslashes', array_map( 'strip_tags', explode( '|', $attr_data['value'][$i] ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                             // Remove empty items in the array&nbsp;</div></li><li><div>                             $values = array_filter( $values, array($this, &quot;filtering&quot;) );            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                             if (intval($attr_data['is_create_taxonomy_terms'][$i])) $this-&gt;create_taxonomy($attr_name, $logger);                                                                  &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                             if ( ! empty($values) and taxonomy_exists( wc_attribute_taxonomy_name( $attr_name ) )) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                 $attr_values = array();                                                                  &nbsp;</div></li><li><div>                                     &nbsp;</div></li><li><div>                                 foreach ($values as $key =&gt; $val) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                     $value = substr($val, 0, 199);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                     $term = get_term_by('name', $value, wc_attribute_taxonomy_name( $attr_name ), ARRAY_A);&nbsp;</div></li><li><div>                                     &nbsp;</div></li><li><div>                                     // For compatibility with WPML plugin&nbsp;</div></li><li><div>                                     $term = apply_filters('wp_all_import_term_exists', $term, wc_attribute_taxonomy_name( $attr_name ), $value, null);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                     if ( empty($term) and !is_wp_error($term) ) {        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                         $term = is_exists_term($value, wc_attribute_taxonomy_name( $attr_name ));                                         &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                         if ( empty($term) and !is_wp_error($term) ) {                                                                                                                                &nbsp;</div></li><li><div>                                            $term = is_exists_term(htmlspecialchars($value), wc_attribute_taxonomy_name( $attr_name ));    &nbsp;</div></li><li><div>                                            if ( empty($term) and !is_wp_error($term) and intval($attr_data['is_create_taxonomy_terms'][$i])) {        &nbsp;</div></li><li><div>                                                &nbsp;</div></li><li><div>                                                $term = wp_insert_term(&nbsp;</div></li><li><div>                                                    $value, // the term &nbsp;</div></li><li><div>                                                      wc_attribute_taxonomy_name( $attr_name ) // the taxonomy                                              &nbsp;</div></li><li><div> );                                                    &nbsp;</div></li><li><div>                                            }&nbsp;</div></li><li><div>                                        }&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                    if ( ! is_wp_error($term) )                &nbsp;</div></li><li><div>                                    {                                        &nbsp;</div></li><li><div>                                        $attr_values[] = (int) $term['term_taxonomy_id']; &nbsp;</div></li><li><div>                                    }                                                                        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                 }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                 $values = $attr_values;&nbsp;</div></li><li><div>                                 $values = array_map( 'intval', $values );&nbsp;</div></li><li><div>                                $values = array_unique( $values );&nbsp;</div></li><li><div>                             } &nbsp;</div></li><li><div>                             else $values = array();                                                       &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                         }                                                                &nbsp;</div></li><li><div>                         &nbsp;</div></li><li><div>                         // Update post terms&nbsp;</div></li><li><div>                         if ( taxonomy_exists( wc_attribute_taxonomy_name( $attr_name ) ))                         &nbsp;</div></li><li><div>                             $this-&gt;associate_terms( $pid, $values, wc_attribute_taxonomy_name( $attr_name ) );                                          &nbsp;</div></li><li><div>                         &nbsp;</div></li><li><div>                         if ( !empty($values) ) {                                                 &nbsp;</div></li><li><div>                             // Add attribute to array, but don't set values&nbsp;</div></li><li><div>                             $attributes[ sanitize_title(wc_attribute_taxonomy_name( $attr_name )) ] = array(&nbsp;</div></li><li><div>                                 'name' =&gt; wc_attribute_taxonomy_name( $attr_name ), &nbsp;</div></li><li><div>                                 'value' =&gt; '', &nbsp;</div></li><li><div>                                 'position' =&gt; $attribute_position, &nbsp;</div></li><li><div>                                 'is_visible' =&gt; $is_visible, &nbsp;</div></li><li><div>                                 'is_variation' =&gt; $is_variation, &nbsp;</div></li><li><div>                                 'is_taxonomy' =&gt; 1, &nbsp;</div></li><li><div>                                 'is_create_taxonomy_terms' =&gt; (!empty($attr_data['is_create_taxonomy_terms'][$i])) ? 1 : 0&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                         }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                     } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                         if ( taxonomy_exists( wc_attribute_taxonomy_name( $attr_name ) )) {&nbsp;</div></li><li><div>                             //wp_set_object_terms( $pid, NULL, wc_attribute_taxonomy_name( $attr_name ) );                     &nbsp;</div></li><li><div>                             $this-&gt;associate_terms( $pid, NULL, wc_attribute_taxonomy_name( $attr_name ) );    &nbsp;</div></li><li><div>                         }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                         if (!empty($attr_data['value'][$i])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                             // Custom attribute - Add attribute to array and set the values&nbsp;</div></li><li><div>                             $attributes[ sanitize_title( $attr_name ) ] = array(&nbsp;</div></li><li><div>                                 'name' =&gt; sanitize_text_field( $attr_name ), &nbsp;</div></li><li><div>                                 'value' =&gt; $attr_data['value'][$i], &nbsp;</div></li><li><div>                                 'position' =&gt; $attribute_position, &nbsp;</div></li><li><div>                                 'is_visible' =&gt; $is_visible, &nbsp;</div></li><li><div>                                 'is_variation' =&gt; $is_variation, &nbsp;</div></li><li><div>                                 'is_taxonomy' =&gt; 0&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                     }                     &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                     $attribute_position++;&nbsp;</div></li><li><div>                }                            &nbsp;</div></li><li><div>            }                        &nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            if ($is_new_product or $is_update_attributes) {&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                $current_product_attributes = get_post_meta($pid, '_product_attributes', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                update_post_meta($pid, '_product_attributes', ( ! empty($current_product_attributes)) ? array_merge($current_product_attributes, $attributes) : $attributes );                    &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }else{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $is_variation_attributes_defined = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }    // is update attributes&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Sales and prices&nbsp;</div></li><li><div>        if ( ! in_array( $product_type, array( 'grouped' ) ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $date_from = isset( $product_sale_price_dates_from[$i] ) ? $product_sale_price_dates_from[$i] : '';&nbsp;</div></li><li><div>            $date_to = isset( $product_sale_price_dates_to[$i] ) ? $product_sale_price_dates_to[$i] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Dates&nbsp;</div></li><li><div>            if ( $date_from ) {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_from', strtotime( $date_from ));                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_from', '');                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $date_to ) {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_to', strtotime( $date_to ));                                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_to', '');                                                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $date_to && ! $date_from ) {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_from', strtotime( 'NOW', current_time( 'timestamp' ) ) );    &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Update price if on sale            &nbsp;</div></li><li><div>            if ( ! empty($this-&gt;articleData['ID']) and ! $this-&gt;is_update_cf('_sale_price') )&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $product_sale_price[$i] = get_post_meta($pid, '_sale_price', true);                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $product_sale_price[$i] != '' && $date_to == '' && $date_from == '' ) {                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_price', (empty($product_sale_price[$i])) ? '' : stripslashes( $product_sale_price[$i] ));                        &nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_price', ($product_regular_price[$i] == &quot;&quot;) ? '' : stripslashes( $product_regular_price[$i] ));                        &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $product_sale_price[$i] != '' && $date_from && strtotime( $date_from ) &lt; strtotime( 'NOW', current_time( 'timestamp' ) ) ) {                &nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_price', (empty($product_sale_price[$i])) ? '' : stripslashes( $product_sale_price[$i] ));                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $date_to && strtotime( $date_to ) &lt; strtotime( 'NOW', current_time( 'timestamp' ) ) ) {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_price', ($product_regular_price[$i] == &quot;&quot;) ? '' : stripslashes( $product_regular_price[$i] ));                &nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_from', '');                &nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_sale_price_dates_to', '');                                                    &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (in_array( $product_type, array( 'simple', 'external' ) )) { &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($this-&gt;options['is_multiple_grouping_product'] != 'yes') {&nbsp;</div></li><li><div>                if ($this-&gt;options['grouping_indicator'] == 'xpath' and ! is_numeric($product_grouping_parent[$i])) {&nbsp;</div></li><li><div>                    $dpost = pmxi_findDuplicates(array(&nbsp;</div></li><li><div>                        'post_type' =&gt; 'product', &nbsp;</div></li><li><div>                        'ID' =&gt; $pid, &nbsp;</div></li><li><div>                        'post_parent' =&gt; $articleData['post_parent'], &nbsp;</div></li><li><div>                        'post_title' =&gt; $product_grouping_parent[$i]&nbsp;</div></li><li><div> ));                &nbsp;</div></li><li><div>                    if (!empty($dpost))&nbsp;</div></li><li><div>                        $product_grouping_parent[$i] = $dpost[0];    &nbsp;</div></li><li><div>                    else                &nbsp;</div></li><li><div>                        $product_grouping_parent[$i] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                elseif ($this-&gt;options['grouping_indicator'] != 'xpath') {&nbsp;</div></li><li><div>                    $dpost = pmxi_findDuplicates($articleData, $custom_grouping_indicator_name[$i], $custom_grouping_indicator_value[$i], 'custom field');&nbsp;</div></li><li><div>                    if (!empty($dpost))&nbsp;</div></li><li><div>                        $product_grouping_parent[$i] = array_shift($dpost);&nbsp;</div></li><li><div>                    else                &nbsp;</div></li><li><div>                        $product_grouping_parent[$i] = 0;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( &quot;&quot; != $product_grouping_parent[$i] and absint($product_grouping_parent[$i]) &gt; 0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;wpdb-&gt;update( $this-&gt;wpdb-&gt;posts, array('post_parent' =&gt; absint( $product_grouping_parent[$i] ) ), array('ID' =&gt; $pid));&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Update parent if grouped so price sorting works and stays in sync with the cheapest child&nbsp;</div></li><li><div>        if ( $product_type == 'grouped' || ( &quot;&quot; != $product_grouping_parent[$i] and absint($product_grouping_parent[$i]) &gt; 0)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $clear_parent_ids = array();                                                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $product_type == 'grouped' )&nbsp;</div></li><li><div>                $clear_parent_ids[] = $pid;        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( &quot;&quot; != $product_grouping_parent[$i] and absint($product_grouping_parent[$i]) &gt; 0 )&nbsp;</div></li><li><div>                $clear_parent_ids[] = absint( $product_grouping_parent[$i] );                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $clear_parent_ids ) {&nbsp;</div></li><li><div>                foreach( $clear_parent_ids as $clear_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $children_by_price = get_posts( array(&nbsp;</div></li><li><div>                        'post_parent' =&gt; $clear_id, &nbsp;</div></li><li><div>                        'orderby' =&gt; 'meta_value_num', &nbsp;</div></li><li><div>                        'order' =&gt; 'asc', &nbsp;</div></li><li><div>                        'meta_key' =&gt; '_price', &nbsp;</div></li><li><div>                        'posts_per_page'=&gt; 1, &nbsp;</div></li><li><div>                        'post_type' =&gt; 'product', &nbsp;</div></li><li><div>                        'fields' =&gt; 'ids'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>                    if ( $children_by_price ) {&nbsp;</div></li><li><div>                        foreach ( $children_by_price as $child ) {&nbsp;</div></li><li><div>                            $child_price = get_post_meta( $child, '_price', true );                            &nbsp;</div></li><li><div>                            update_post_meta( $clear_id, '_price', $child_price );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Clear cache/transients&nbsp;</div></li><li><div>                    //wc_delete_product_transients( $clear_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Sold Individuall&nbsp;</div></li><li><div>        if ( &quot;yes&quot; == $product_sold_individually[$i] ) {&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_sold_individually', 'yes');            &nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_sold_individually', '');            &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Stock Data&nbsp;</div></li><li><div>        if ( 'yes' === get_option( 'woocommerce_manage_stock' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $manage_stock = 'no';&nbsp;</div></li><li><div>            $backorders = 'no';&nbsp;</div></li><li><div>            $stock_status = wc_clean( $product_stock_status[$i] );            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( 'external' === $product_type ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $stock_status = 'instock';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            } elseif ( 'variable' === $product_type and ! $this-&gt;options['link_all_variations'] ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Stock status is always determined by children so sync later&nbsp;</div></li><li><div>                // $stock_status = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( $product_manage_stock[$i] == 'yes' ) {&nbsp;</div></li><li><div>                    $manage_stock = 'yes';&nbsp;</div></li><li><div>                    $backorders = wc_clean( $product_allow_backorders[$i] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            } elseif ( 'grouped' !== $product_type && $product_manage_stock[$i] == 'yes' ) {&nbsp;</div></li><li><div>                $manage_stock = 'yes';&nbsp;</div></li><li><div>                $backorders = wc_clean( $product_allow_backorders[$i] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_manage_stock', $manage_stock);    &nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, '_backorders', $backorders);    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $stock_status ) {                            &nbsp;</div></li><li><div>                $this-&gt;pushmeta( $pid, '_stock_status', $stock_status );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $current_manage_stock = get_post_meta( $pid, '_manage_stock', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $product_manage_stock[$i] == 'yes' || ! $this-&gt;is_update_cf('_manage_stock') && $current_manage_stock == 'yes') {                &nbsp;</div></li><li><div>                $this-&gt;pushmeta( $pid, '_stock', wc_stock_amount( $product_stock_qty[$i] ) );&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_stock', '');                    &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            update_post_meta( $pid, '_stock_status', wc_clean( $product_stock_status[$i] ) );&nbsp;</div></li><li><div>        }                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Upsells&nbsp;</div></li><li><div>        $this-&gt;import_linked_products($pid, $product_up_sells[$i], '_upsell_ids', $is_new_product, $logger, $import-&gt;id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Cross sells&nbsp;</div></li><li><div>        $this-&gt;import_linked_products($pid, $product_cross_sells[$i], '_crosssell_ids', $is_new_product, $logger, $import-&gt;id);        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Downloadable options&nbsp;</div></li><li><div>        if ( $is_downloadable == 'yes' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $_download_limit = absint( $product_download_limit[$i] );&nbsp;</div></li><li><div>            if ( ! $_download_limit )&nbsp;</div></li><li><div>                $_download_limit = ''; // 0 or blank = unlimited&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $_download_expiry = absint( $product_download_expiry[$i] );&nbsp;</div></li><li><div>            if ( ! $_download_expiry )&nbsp;</div></li><li><div>                $_download_expiry = ''; // 0 or blank = unlimited&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            // file paths will be stored in an array keyed off md5(file path)&nbsp;</div></li><li><div>            if ( !empty( $product_files[$i] ) ) {&nbsp;</div></li><li><div>                $_file_paths = array();&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                $file_paths = explode( $this-&gt;options['product_files_delim'] , $product_files[$i] );&nbsp;</div></li><li><div>                $file_names = explode( $this-&gt;options['product_files_names_delim'] , $product_files_names[$i] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ( $file_paths as $fn =&gt; $file_path ) {&nbsp;</div></li><li><div>                    $file_path = trim( $file_path );                    &nbsp;</div></li><li><div>                    $_file_paths[ md5( $file_path ) ] = array('name' =&gt; ((!empty($file_names[$fn])) ? $file_names[$fn] : basename($file_path)), 'file' =&gt; $file_path);&nbsp;</div></li><li><div>                }                                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_downloadable_files', $_file_paths);    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ( isset( $product_download_limit[$i] ) )&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_download_limit', esc_attr( $_download_limit ));    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( isset( $product_download_expiry[$i] ) )&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_download_expiry', esc_attr( $_download_expiry ));    &nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>            if ( isset( $product_download_type[$i] ) )&nbsp;</div></li><li><div>                $this-&gt;pushmeta($pid, '_download_type', esc_attr( $product_download_type[$i] ));    &nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>        }            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Update product visibility term WC 3.0.0&nbsp;</div></li><li><div>        if ( version_compare(WOOCOMMERCE_VERSION, '3.0') &gt;= 0 ) {&nbsp;</div></li><li><div>            if ( pmwi_is_update_taxonomy($articleData, $this-&gt;options, 'product_visibility') ) {&nbsp;</div></li><li><div>                $associate_terms = array();&nbsp;</div></li><li><div>                if ($is_featured == &quot;yes&quot;) {&nbsp;</div></li><li><div>                    $featured_term = get_term_by( 'name', 'featured', 'product_visibility' );&nbsp;</div></li><li><div>                    if (!empty($featured_term) && !is_wp_error($featured_term)) {&nbsp;</div></li><li><div>                        $associate_terms[] = $featured_term-&gt;term_taxonomy_id;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (in_array($product_visibility[$i], array('hidden', 'catalog'))) {&nbsp;</div></li><li><div>                    $exclude_search_term = get_term_by( 'name', 'exclude-from-search', 'product_visibility' );&nbsp;</div></li><li><div>                    if (!empty($exclude_search_term) && !is_wp_error($exclude_search_term)) {&nbsp;</div></li><li><div>                        $associate_terms[] = $exclude_search_term-&gt;term_taxonomy_id;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (in_array($product_visibility[$i], array('hidden', 'search'))) {&nbsp;</div></li><li><div>                    $exclude_catalog_term = get_term_by( 'name', 'exclude-from-catalog', 'product_visibility' );&nbsp;</div></li><li><div>                    if (!empty($exclude_catalog_term) && !is_wp_error($exclude_catalog_term)) {&nbsp;</div></li><li><div>                        $associate_terms[] = $exclude_catalog_term-&gt;term_taxonomy_id;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $_stock_status = get_post_meta( $pid, '_stock_status', true);&nbsp;</div></li><li><div>                if ( $_stock_status == 'outofstock' ) {&nbsp;</div></li><li><div>                    $outofstock_term = get_term_by( 'name', 'outofstock', 'product_visibility' );&nbsp;</div></li><li><div>                    if (!empty($outofstock_term) && !is_wp_error($outofstock_term)) {&nbsp;</div></li><li><div>                        $associate_terms[] = $outofstock_term-&gt;term_taxonomy_id;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;associate_terms( $pid, $associate_terms, 'product_visibility' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // prepare bulk SQL query&nbsp;</div></li><li><div>        //$this-&gt;executeSQL();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wc_delete_product_transients($pid);&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function saved_post( $importData )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! in_array($importData['import']-&gt;options['custom_type'], array('product', 'product_variation'))) return;                            &nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>        $table = $this-&gt;wpdb-&gt;posts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $p = $this-&gt;wpdb-&gt;get_row($this-&gt;wpdb-&gt;prepare(&quot;SELECT * FROM $table WHERE ID = %d;&quot;, $importData['pid']));            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($p)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $post_to_update_id = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($p-&gt;post_type != 'product_variation')&nbsp;</div></li><li><div>            {                &nbsp;</div></li><li><div>                update_post_meta( $importData['pid'], '_product_version', WC_VERSION );&nbsp;</div></li><li><div>                $post_to_update_id = $importData['pid'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // [associate linked products]&nbsp;</div></li><li><div>                $wp_all_import_not_linked_products = get_option('wp_all_import_not_linked_products_' . $importData['import']-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( ! empty($wp_all_import_not_linked_products) )&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $post_to_update_sku = get_post_meta($post_to_update_id, '_sku', true);                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ($wp_all_import_not_linked_products as $product) &nbsp;</div></li><li><div>                    {                        &nbsp;</div></li><li><div>                        if ( $product['pid'] != $post_to_update_id && ! empty($product['not_linked_products']) )&nbsp;</div></li><li><div>                        {                                                                                &nbsp;</div></li><li><div>                            if ( in_array($post_to_update_sku, $product['not_linked_products']) &nbsp;</div></li><li><div>                                    or in_array( (string) $post_to_update_id, $product['not_linked_products']) &nbsp;</div></li><li><div>                                        or in_array($p-&gt;post_title, $product['not_linked_products']) &nbsp;</div></li><li><div>                                            or in_array($p-&gt;post_name, $product['not_linked_products']) &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div>                            {                                &nbsp;</div></li><li><div>                                $linked_products = get_post_meta($product['pid'], $product['type'], true);                                &nbsp;</div></li><li><div>                                &nbsp;</div></li><li><div>                                if (empty($linked_products)) $linked_products = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if ( ! in_array($post_to_update_id, $linked_products))&nbsp;</div></li><li><div>                                {&nbsp;</div></li><li><div>                                    $linked_products[] = $post_to_update_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                    $importData['logger'] and call_user_func($importData['logger'], sprintf(__('Added to %s list of product ID %d.', 'wpai_woocommerce_addon_plugin'), $product['type'] == '_upsell_ids' ? 'Up-Sells' : 'Cross-Sells', $product['pid']) );        &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                    update_post_meta($product['pid'], $product['type'], $linked_products);&nbsp;</div></li><li><div>                                    &nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }                            &nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // [\associate linked products]&nbsp;</div></li><li><div>            }            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // [update product gallery]&nbsp;</div></li><li><div>            $tmp_gallery = explode(&quot;, &quot;, get_post_meta( $post_to_update_id, '_product_image_gallery_tmp', true));&nbsp;</div></li><li><div>            $gallery = explode(&quot;, &quot;, get_post_meta( $post_to_update_id, '_product_image_gallery', true));&nbsp;</div></li><li><div>            if (is_array($gallery)) {&nbsp;</div></li><li><div>                $gallery = array_filter($gallery);&nbsp;</div></li><li><div>                if ( ! empty($tmp_gallery))&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $gallery = array_unique(array_merge($gallery, $tmp_gallery));&nbsp;</div></li><li><div>                }                    &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            elseif ( ! empty($tmp_gallery))        &nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $gallery = $tmp_gallery;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;pushmeta( $post_to_update_id, '_product_image_gallery', implode(&quot;, &quot;, $gallery) );&nbsp;</div></li><li><div>            // [\update product gallery]&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wc_delete_product_transients($importData['pid']);        &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>                    &nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected function executeSQL() {&nbsp;</div></li><li><div>        // prepare bulk SQL query&nbsp;</div></li><li><div>        $table = _get_meta_table('post');&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        if ( $this-&gt;post_meta_to_insert ) {            &nbsp;</div></li><li><div>            $values = array();&nbsp;</div></li><li><div>            $already_added = array();&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            foreach (array_reverse($this-&gt;post_meta_to_insert) as $key =&gt; $value) {&nbsp;</div></li><li><div>                if ( ! empty($value['meta_key']) and ! in_array($value['pid'] . '-' . $value['meta_key'], $already_added) ) {&nbsp;</div></li><li><div>                    $already_added[] = $value['pid'] . '-' . $value['meta_key'];                        &nbsp;</div></li><li><div>                    $values[] = '(' . $value['pid'] . ', &quot;' . $value['meta_key'] . '&quot;, \'' . maybe_serialize($value['meta_value']) .'\')';                        &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $this-&gt;wpdb-&gt;query(&quot;INSERT INTO $table (`post_id`, `meta_key`, `meta_value`) VALUES &quot; . implode(', ', $values));&nbsp;</div></li><li><div>            $this-&gt;post_meta_to_insert = array();&nbsp;</div></li><li><div>        }    &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected function pushmeta($pid, $meta_key, $meta_value) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (empty($meta_key)) return;        &nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        if ( empty($this-&gt;articleData['ID']) or $this-&gt;is_update_cf($meta_key)) {            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            update_post_meta($pid, $meta_key, $meta_value);&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>        }        &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * &nbsp;</div></li><li><div>    * Is update allowed according to import record matching setting&nbsp;</div></li><li><div>    *&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    protected function is_update_cf( $meta_key ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;options['update_all_data'] == 'yes') return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;options['is_update_custom_fields'] ) return false;            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;options['update_custom_fields_logic'] == &quot;full_update&quot; ) return true;&nbsp;</div></li><li><div>        if ( $this-&gt;options['update_custom_fields_logic'] == &quot;only&quot; and ! empty($this-&gt;options['custom_fields_list']) and is_array($this-&gt;options['custom_fields_list']) and in_array($meta_key, $this-&gt;options['custom_fields_list']) ) return true;&nbsp;</div></li><li><div>        if ( $this-&gt;options['update_custom_fields_logic'] == &quot;all_except&quot; and ( empty($this-&gt;options['custom_fields_list']) or ! in_array($meta_key, $this-&gt;options['custom_fields_list']) )) return true;&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected function associate_terms($pid, $assign_taxes, $tx_name, $logger = false) {                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $terms = wp_get_object_terms( $pid, $tx_name );&nbsp;</div></li><li><div>        $term_ids = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $assign_taxes = (is_array($assign_taxes)) ? array_filter($assign_taxes) : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty($terms) ) {&nbsp;</div></li><li><div>            if ( ! is_wp_error( $terms ) ) {&nbsp;</div></li><li><div>                foreach ($terms as $term_info) {&nbsp;</div></li><li><div>                    $term_ids[] = $term_info-&gt;term_taxonomy_id;&nbsp;</div></li><li><div>                    $this-&gt;wpdb-&gt;query(  $this-&gt;wpdb-&gt;prepare(&quot;UPDATE {$this-&gt;wpdb-&gt;term_taxonomy} SET count = count - 1 WHERE term_taxonomy_id = %d&quot;, $term_info-&gt;term_taxonomy_id) );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $in_tt_ids = &quot;'&quot; . implode( &quot;', '&quot;, $term_ids ) . &quot;'&quot;;&nbsp;</div></li><li><div>                $this-&gt;wpdb-&gt;query( $this-&gt;wpdb-&gt;prepare( &quot;DELETE FROM {$this-&gt;wpdb-&gt;term_relationships} WHERE object_id = %d AND term_taxonomy_id IN ($in_tt_ids)&quot;, $pid ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (empty($assign_taxes)) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // foreach ($assign_taxes as $tt) {&nbsp;</div></li><li><div>        //     $this-&gt;wpdb-&gt;insert( $this-&gt;wpdb-&gt;term_relationships, array( 'object_id' =&gt; $pid, 'term_taxonomy_id' =&gt; $tt ) );&nbsp;</div></li><li><div>        //     $this-&gt;wpdb-&gt;query( &quot;UPDATE {$this-&gt;wpdb-&gt;term_taxonomy} SET count = count + 1 WHERE term_taxonomy_id = $tt&quot; );&nbsp;</div></li><li><div>        // }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $values = array();&nbsp;</div></li><li><div>        $term_order = 0;&nbsp;</div></li><li><div>        foreach ( $assign_taxes as $tt )&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            do_action('wp_all_import_associate_term', $pid, $tt, $tx_name);&nbsp;</div></li><li><div>            $values[] = $this-&gt;wpdb-&gt;prepare( &quot;(%d, %d, %d)&quot;, $pid, $tt, ++$term_order);&nbsp;</div></li><li><div>            $this-&gt;wpdb-&gt;query( &quot;UPDATE {$this-&gt;wpdb-&gt;term_taxonomy} SET count = count + 1 WHERE term_taxonomy_id = $tt&quot; );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $values ) {&nbsp;</div></li><li><div>            if ( false === $this-&gt;wpdb-&gt;query( &quot;INSERT INTO {$this-&gt;wpdb-&gt;term_relationships} (object_id, term_taxonomy_id, term_order) VALUES &quot; . join( ', ', $values ) . &quot; ON DUPLICATE KEY UPDATE term_order = VALUES(term_order)&quot; ) ) {&nbsp;</div></li><li><div>                $logger and call_user_func($logger, __('&lt;b&gt;ERROR&lt;/b&gt; Could not insert term relationship into the database', 'wp_all_import_plugin') . ': '. $this-&gt;wpdb-&gt;last_error);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_cache_delete( $pid, $tx_name . '_relationships' );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>    }        &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    function create_taxonomy($attr_name, $logger) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        global $woocommerce;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! taxonomy_exists( wc_attribute_taxonomy_name( $attr_name ) ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>             // Grab the submitted data                            &nbsp;</div></li><li><div>            $attribute_name = ( isset( $attr_name ) ) ? wc_sanitize_taxonomy_name( stripslashes( (string) $attr_name ) ) : '';&nbsp;</div></li><li><div>            $attribute_label = stripslashes( (string) $attr_name );&nbsp;</div></li><li><div>            $attribute_type = 'select';&nbsp;</div></li><li><div>            $attribute_orderby = 'menu_order';            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // if ( in_array( $attribute_name, $this-&gt;reserved_terms ) ) {&nbsp;</div></li><li><div>            //     $attribute_name .= 's';&nbsp;</div></li><li><div>            // }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( in_array( $attribute_name, $this-&gt;reserved_terms ) ) {&nbsp;</div></li><li><div>                $logger and call_user_func($logger, sprintf(__('- &lt;b&gt;WARNING&lt;/b&gt;: Slug *%s* is not allowed because it is a reserved term. Change it, please.', 'wpai_woocommerce_addon_plugin'), wc_attribute_taxonomy_name( $attribute_name )));&nbsp;</div></li><li><div>            }            &nbsp;</div></li><li><div>            else{                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Register the taxonomy now so that the import works!&nbsp;</div></li><li><div>                $domain = wc_attribute_taxonomy_name( $attr_name );&nbsp;</div></li><li><div>                if (strlen($domain) &lt;= 32) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $this-&gt;wpdb-&gt;insert(&nbsp;</div></li><li><div>                        $this-&gt;wpdb-&gt;prefix . 'woocommerce_attribute_taxonomies', &nbsp;</div></li><li><div>                        array(&nbsp;</div></li><li><div>                            'attribute_label' =&gt; $attribute_label, &nbsp;</div></li><li><div>                            'attribute_name' =&gt; $attribute_name, &nbsp;</div></li><li><div>                            'attribute_type' =&gt; $attribute_type, &nbsp;</div></li><li><div>                            'attribute_orderby' =&gt; $attribute_orderby, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );                                                &nbsp;</div></li><li><div>                                &nbsp;</div></li><li><div>                    register_taxonomy( $domain, &nbsp;</div></li><li><div>                        apply_filters( 'woocommerce_taxonomy_objects_' . $domain, array('product') ), &nbsp;</div></li><li><div>                        apply_filters( 'woocommerce_taxonomy_args_' . $domain, array(&nbsp;</div></li><li><div>                            'hierarchical' =&gt; true, &nbsp;</div></li><li><div>                            'show_ui' =&gt; false, &nbsp;</div></li><li><div>                            'query_var' =&gt; true, &nbsp;</div></li><li><div>                            'rewrite' =&gt; false, &nbsp;</div></li><li><div> ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    delete_transient( 'wc_attribute_taxonomies' );&nbsp;</div></li><li><div>                    $attribute_taxonomies = $this-&gt;wpdb-&gt;get_results( &quot;SELECT * FROM &quot; . $this-&gt;wpdb-&gt;prefix . &quot;woocommerce_attribute_taxonomies&quot; );&nbsp;</div></li><li><div>                    set_transient( 'wc_attribute_taxonomies', $attribute_taxonomies );&nbsp;</div></li><li><div>                    apply_filters( 'woocommerce_attribute_taxonomies', $attribute_taxonomies );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $logger and call_user_func($logger, sprintf(__('- &lt;b&gt;CREATED&lt;/b&gt;: Taxonomy attribute *%s* have been successfully created.', 'wpai_woocommerce_addon_plugin'), wc_attribute_taxonomy_name( $attribute_name )));    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $logger and call_user_func($logger, sprintf(__('- &lt;b&gt;WARNING&lt;/b&gt;: Taxonomy *%s* name is more than 32 characters. Change it, please.', 'wpai_woocommerce_addon_plugin'), $attr_name));&nbsp;</div></li><li><div>                }                &nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>         }&nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function _filter_has_cap_unfiltered_html($caps)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $caps['unfiltered_html'] = true;&nbsp;</div></li><li><div>        return $caps;&nbsp;</div></li><li><div>    }            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function import_linked_products($pid, $products, $type, $is_new_product, $logger, $import_id)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if ( ! $is_new_product and ! $this-&gt;is_update_cf($type) ) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $products ) ) &nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $not_found = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $linked_products = array();&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $ids = array_filter(explode(', ', $products), 'trim');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $ids as $id )&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                // search linked product by _SKU&nbsp;</div></li><li><div>                $args = array(&nbsp;</div></li><li><div>                    'post_type' =&gt; 'product', &nbsp;</div></li><li><div>                    'meta_query' =&gt; array(&nbsp;</div></li><li><div>                        array(&nbsp;</div></li><li><div>                            'key' =&gt; '_sku', &nbsp;</div></li><li><div>                            'value' =&gt; $id, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );            &nbsp;</div></li><li><div>                $query = new WP_Query( $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $linked_product = false;&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                if ( $query-&gt;have_posts() ) &nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $linked_product = get_post($query-&gt;post-&gt;ID);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                wp_reset_postdata();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( ! $linked_product )&nbsp;</div></li><li><div>                {                            &nbsp;</div></li><li><div>                    if (is_numeric($id))&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        // search linked product by ID                        &nbsp;</div></li><li><div>                        $query = new WP_Query( array( 'post_type' =&gt; 'product', 'post__in' =&gt; array( $id ) ) );    &nbsp;</div></li><li><div>                        if ( $query-&gt;have_posts() ) &nbsp;</div></li><li><div>                        {                            &nbsp;</div></li><li><div>                            $linked_product = get_post($query-&gt;post-&gt;ID);&nbsp;</div></li><li><div>                        }                        &nbsp;</div></li><li><div>                        wp_reset_postdata();&nbsp;</div></li><li><div>                    }                &nbsp;</div></li><li><div>                    if ( ! $linked_product )&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        // search linked product by slug&nbsp;</div></li><li><div>                        $args = array(&nbsp;</div></li><li><div>                          'name' =&gt; $id, &nbsp;</div></li><li><div>                          'post_type' =&gt; 'product', &nbsp;</div></li><li><div>                          'post_status' =&gt; 'publish', &nbsp;</div></li><li><div>                          'numberposts' =&gt; 1&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                        $query = get_posts($args);&nbsp;</div></li><li><div>                        if( $query )&nbsp;</div></li><li><div>                        {                            &nbsp;</div></li><li><div>                            $linked_product = $query[0];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        wp_reset_postdata();&nbsp;</div></li><li><div>                    }    &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ($linked_product)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $linked_products[] = $linked_product-&gt;ID;                    &nbsp;</div></li><li><div>                    &nbsp;</div></li><li><div>                    $logger and call_user_func($logger, sprintf(__('Product `%s` with ID `%d` added to %s list.', 'wpai_woocommerce_addon_plugin'), $linked_product-&gt;post_title, $linked_product-&gt;ID, $type == '_upsell_ids' ? 'Up-Sells' : 'Cross-Sells') );        &nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $not_found[] = $id;&nbsp;</div></li><li><div>                }                            &nbsp;</div></li><li><div>            }    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // not all linked products founded&nbsp;</div></li><li><div>            if ( ! empty($not_found))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $not_founded_linked_products = get_option( 'wp_all_import_not_linked_products_' . $import_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (empty($not_founded_linked_products)) $not_founded_linked_products = array();                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $not_founded_linked_products[] = array(                    &nbsp;</div></li><li><div>                    'pid' =&gt; $pid, &nbsp;</div></li><li><div>                    'type' =&gt; $type, &nbsp;</div></li><li><div>                    'not_linked_products' =&gt; $not_found&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                update_option( 'wp_all_import_not_linked_products_' . $import_id, $not_founded_linked_products );&nbsp;</div></li><li><div>            }                    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;pushmeta($pid, $type, $linked_products);    &nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>        } &nbsp;</div></li><li><div>        else &nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            delete_post_meta( $pid, $type );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function is_update_custom_field($existing_meta_keys, $options, $meta_key) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($options['update_all_data'] == 'yes') return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $options['is_update_custom_fields'] ) return false;            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($options['update_custom_fields_logic'] == &quot;full_update&quot;) return true;&nbsp;</div></li><li><div>        if ($options['update_custom_fields_logic'] == &quot;only&quot; and ! empty($options['custom_fields_list']) and is_array($options['custom_fields_list']) and in_array($meta_key, $options['custom_fields_list']) ) return true;&nbsp;</div></li><li><div>        if ($options['update_custom_fields_logic'] == &quot;all_except&quot; and ( empty($options['custom_fields_list']) or ! in_array($meta_key, $options['custom_fields_list']) )) return true;&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    function prepare_price( $price ) {   &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return pmwi_prepare_price( $price, $this-&gt;options['disable_prepare_price'], $this-&gt;options['prepare_price_to_woo_format'], $this-&gt;options['convert_decimal_separator'] );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function adjust_price( $price, $field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return pmwi_adjust_price( $price, $field, $this-&gt;options);&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.2.9</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.3/classes/pmwi_import_record/" class="active">1.3.3</a></li><li><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.2/classes/pmwi_import_record/" class="">1.3.2</a></li><li><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.1/classes/pmwi_import_record/" class="">1.3.1</a></li><li><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.3.0/classes/pmwi_import_record/" class="">1.3.0</a></li><li><a href="http://hookr.io/plugins/wp-all-import-woocommerce-add-on/1.2.9/classes/pmwi_import_record/" class="">1.2.9</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>PMWI_Import_Record</li><li><span></span>WP All Import - WooCommerce Add-On</li><li><span></span>1.3.3</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>