<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.4.3" data-slug="gravity-forms-paystation-3-party-hosted" data-type="class" data-id="80906"><head xmlns="http://www.w3.org/1999/xhtml"><title> gfpaystationfeedadmin | class | Gravity Forms Paystation 3 Party Hosted | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="GFPaystationFeedAdmin, class, plugin, gravity-forms-paystation-3-party-hosted, 1.4.3" /><meta name="description" content="The Gravity Forms Paystation (3 party hosted) GFPaystationFeedAdmin class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.24"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=111cc63e9dc2168e122f8ac9b0dd3599' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.24' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/gfpaystation_feed_admin/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfpaystation_feed_admin%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfpaystation_feed_admin%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-paystation-3-party-hosted-1.4.3-class-gfpaystation_feed_admin","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="gfpaystation_feed_admin" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms-paystation-3-pa&hellip;." href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/" class="plugin"><span property="name">gravity-forms-paystation-3-pa&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.4.3." href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/" class="H_VERSION"><span property="name">1.4.3</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">gfpaystation_feed_admin</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="26"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/all/" title="All">All <span class="count badge">26</span></a></li><li class="" data-id="new" data-count="2"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/new/" title="New">New <span class="count badge">2</span></a></li><li class="" data-id="hooks" data-count="3"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/hooks/" title="Hooks">Hooks <span class="count badge">3</span></a></li><li class="" data-id="action" data-count="3"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/actions/" title="Actions">Actions <span class="count badge">3</span></a></li><li class="" data-id="filter" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/filters/" title="Filters">Filters <span class="count badge">0</span></a></li><li class="active" data-id="class" data-count="13"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/classes/" title="Classes">Classes <span class="count badge">13</span></a></li><li class="" data-id="constant" data-count="9"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/constants/" title="Constants">Constants <span class="count badge">9</span></a></li><li class="" data-id="function" data-count="1"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/functions/" title="Functions">Functions <span class="count badge">1</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>GFPaystationFeedAdmin</strong></h1><p>The Gravity Forms Paystation (3 party hosted) <strong>GFPaystationFeedAdmin</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/files/class-gfpaystationfeedadmin/" class="file">/class.GFPaystationFeedAdmin.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="10" class="block" start="10"><li><div>class GFPaystationFeedAdmin {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected $plugin;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * @param GFPaystationPlugin $plugin handle to the plugin object&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function __construct($plugin) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;plugin = $plugin;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add filters and actions to hook in to admin things&nbsp;</div></li><li><div>        add_filter('wp_print_scripts', array($this, 'removeScripts'));&nbsp;</div></li><li><div>        add_filter('parent_file', array($this, 'filterParentFile'));&nbsp;</div></li><li><div>        add_action('add_meta_boxes_'.GFPAYSTATION_TYPE_FEED, array($this, 'actionAddMetaBoxes'));&nbsp;</div></li><li><div>        add_action('save_post', array($this, 'saveCustomFields'), 10, 2);&nbsp;</div></li><li><div>        add_filter('manage_'.GFPAYSTATION_TYPE_FEED.'_posts_columns', array($this, 'filterManageColumns'));&nbsp;</div></li><li><div>        add_filter('post_row_actions', array($this, 'filterPostRowActions'));&nbsp;</div></li><li><div>        add_filter('wp_insert_post_data', array($this, 'filterInsertPostData'), 10, 2);&nbsp;</div></li><li><div>        add_filter('post_updated_messages', array($this, 'filterPostUpdatedMessages'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add the feed admin javscript file to the list of files to be included in the page source.&nbsp;</div></li><li><div>        wp_enqueue_script('gfpaystation-feed-admin', $this-&gt;plugin-&gt;urlBase . 'js/feed-admin.js', array('jquery'), GFPAYSTATION_PLUGIN_VERSION, true);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * remove some scripts we don't want loaded&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function removeScripts() {&nbsp;</div></li><li><div>        // stop WordPress SEO breaking our tooltips!&nbsp;</div></li><li><div>        wp_dequeue_script('wp-seo-metabox');&nbsp;</div></li><li><div>        wp_dequeue_script('jquery-qtip');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Tell WordPress admin that Gravity Forms menu is parent page.&nbsp;</div></li><li><div>    * @param string $parent_file&nbsp;</div></li><li><div>    * @return string&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function filterParentFile($parent_file) {&nbsp;</div></li><li><div>        global $submenu_file;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Set parent menu for filter return.&nbsp;</div></li><li><div>        $parent_file = 'gf_edit_forms';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Set submenu by side effect.&nbsp;</div></li><li><div>        $submenu_file = 'gfpaystation-options';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $parent_file;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Add meta boxes (these are the boxes seen on the mapping screen) for custom fields.&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function actionAddMetaBoxes($post) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        try {&nbsp;</div></li><li><div>            $feed = new GFPaystationFeed();&nbsp;</div></li><li><div>            if ($post && $post-&gt;ID) {&nbsp;</div></li><li><div>                $feed-&gt;loadFromPost($post);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        catch (GFPaystationException $e) {&nbsp;</div></li><li><div>            // NOP -- we'll have an empty feed&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // The 'metaboxForm', 'metaboxFields', etc are function names below which output the HTML for these boxes.&nbsp;</div></li><li><div>        add_meta_box('meta_'.GFPAYSTATION_TYPE_FEED.'_form', 'Gravity Form', array($this, 'metaboxForm'), &nbsp;</div></li><li><div>            GFPAYSTATION_TYPE_FEED, 'normal', 'high', array('feed' =&gt; $feed));&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        add_meta_box('meta_'.GFPAYSTATION_TYPE_FEED.'_fields', 'Form to Transaction Parameter Mapping', array($this, 'metaboxFields'), &nbsp;</div></li><li><div>            GFPAYSTATION_TYPE_FEED, 'normal', 'high', array('feed' =&gt; $feed));&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        add_meta_box('meta_'.GFPAYSTATION_TYPE_FEED.'_urls', 'Redirect URLs', array($this, 'metaboxURLs'), &nbsp;</div></li><li><div>            GFPAYSTATION_TYPE_FEED, 'normal', 'high', array('feed' =&gt; $feed));&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        add_meta_box('meta_'.GFPAYSTATION_TYPE_FEED.'_opts', 'Notification Settings', array($this, 'metaboxOpts'), &nbsp;</div></li><li><div>            GFPAYSTATION_TYPE_FEED, 'normal', 'high', array('feed' =&gt; $feed));&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Replace standard Publish box with a custom one&nbsp;</div></li><li><div>        remove_meta_box('submitdiv', GFPAYSTATION_TYPE_FEED, 'side');&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        add_meta_box('meta_'.GFPAYSTATION_TYPE_FEED.'_submit', 'Options', array($this, 'metaboxSave'), &nbsp;</div></li><li><div>            GFPAYSTATION_TYPE_FEED, 'side', 'high', array('feed' =&gt; $feed));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * metabox for custom save/publish&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    * @param array $metabox has metabox id, title, callback, and args elements.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function metaboxSave($post, $metabox) {&nbsp;</div></li><li><div>        global $action;&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php submit_button( __( 'Save' ), 'button', 'save' ); ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;major-publishing-actions&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php do_action('post_submitbox_start'); ?&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;delete-action&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        if ( current_user_can( &quot;delete_post&quot;, $post-&gt;ID ) ) {&nbsp;</div></li><li><div>            if ( !EMPTY_TRASH_DAYS )&nbsp;</div></li><li><div>                $delete_text = __('Delete Permanently');&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>                $delete_text = __('Move to Trash');&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;a class=&quot;submitdelete deletion&quot; href=&quot;&lt;?php echo get_delete_post_link($post-&gt;ID); ?&gt;&quot;&gt;&lt;?php echo $delete_text; ?&gt;&lt;/a&gt;&lt;?php&nbsp;</div></li><li><div>        } ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;publishing-action&quot;&gt;&nbsp;</div></li><li><div>        &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>            &lt;input name=&quot;original_publish&quot; type=&quot;hidden&quot; id=&quot;original_publish&quot; value=&quot;Save&quot; /&gt;&nbsp;</div></li><li><div>            &lt;?php submit_button('Save', 'primary button-large', 'publish', false, array() ); ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>            $feedsURL = 'edit.php?post_type=' . GFPAYSTATION_TYPE_FEED;&nbsp;</div></li><li><div>            echo &quot;&lt;a href=\&quot;$feedsURL\&quot;&gt;Return to feed list&lt;/a&gt;.\n&quot;;&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Metabox for Gravity Form field, only listing forms that don't have a feed or are current feed's form (i.e. the select form feld).&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    * @param array $metabox has metabox id, title, callback, and args elements.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function metaboxForm($post, $metabox) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $feed = $metabox['args']['feed'];&nbsp;</div></li><li><div>        $forms = GFFormsModel::get_forms();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $feeds = GFPaystationFeed::getList();&nbsp;</div></li><li><div>        $feedMap = array();&nbsp;</div></li><li><div>        foreach ($feeds as $f) {&nbsp;</div></li><li><div>            $feedMap[$f-&gt;FormID] = 1;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;select size=&quot;1&quot; name=&quot;_gfpaystation_form&quot;&gt;&nbsp;</div></li><li><div>            &lt;option value=&quot;&quot;&gt;(Select form)&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            foreach ($forms as $form) {&nbsp;</div></li><li><div>                // only if form for this feed, or without a feed&nbsp;</div></li><li><div>                if ($form-&gt;id == $feed-&gt;FormID || !isset($feedMap[$form-&gt;id])) {&nbsp;</div></li><li><div>                    $selected = selected($feed-&gt;FormID, $form-&gt;id);&nbsp;</div></li><li><div>                    echo &quot;&lt;option value='{$form-&gt;id}' $selected&gt;&quot;, htmlspecialchars($form-&gt;title), &quot;&lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>        &lt;/select&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Metabox for Redirect URL on failure - only really should be set when the Gravity form is set up to redirect to another page on&nbsp;</div></li><li><div>    * success rather than re-display and output the confirmation message (or error message if there was an error).&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    * @param array $metabox has metabox id, title, callback, and args elements.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function metaboxURLs($post, $metabox) {&nbsp;</div></li><li><div>        $feed = $metabox['args']['feed'];&nbsp;</div></li><li><div>        $UrlFail = htmlspecialchars($feed-&gt;UrlFail);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;strong&gt;Notes:&lt;/strong&gt; &nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            If you have set the Gravity Form up to display the confirmation message after submission (this is the default) then you probably &nbsp;</div></li><li><div>            don't need to specify a failure url here. This is because the error message from Paystation will be displayed instead of the confirmation &nbsp;</div></li><li><div>            message if the payment failed. This also means the form confirmation message you type should say what you want the end-user to see when the payment was successful.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            However, if you have specified on the Gravity Form that it is to redirect somewhere after submission (for example a &quot;thank you&quot; page) then it is&nbsp;</div></li><li><div>            a good idea that you specify a failure url here (for example a &quot;sorry payment failed&quot; page) because this plugin cannot change the text displayed &nbsp;</div></li><li><div>            on whatever page you redirect to in order to inform the user of success or failure.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&lt;label&gt;URL to redirect to on transaction failure (optional):&lt;/label&gt;&lt;br /&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;url&quot; class='large-text' name=&quot;_gfpaystation_url_fail&quot; value=&quot;&lt;?php echo $UrlFail; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Metabox for options related to notification settings.&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    * @param array $metabox has metabox id, title, callback, and args elements.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function metaboxOpts($post, $metabox) {&nbsp;</div></li><li><div>        $feed = $metabox['args']['feed'];&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;strong&gt;Notes:&lt;/strong&gt; &nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            Tick these to only get an email notification when the payment was successful. If you leave these un-ticked you will get a notification&nbsp;</div></li><li><div>            as soon as the end-user has submitted the form, which means before the payment step. You may want a notification before the payment has&nbsp;</div></li><li><div>            been made, but remember to check in the form Entries, or in your Paystation online admin, that the payment was successful before shipping any goods.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;_gfpaystation_delay_notify&quot; value=&quot;1&quot; &lt;?php checked($feed-&gt;DelayNotify); ?&gt; /&gt;&nbsp;</div></li><li><div>         Send admin notification only when payment is received.&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;_gfpaystation_delay_autorespond&quot; value=&quot;1&quot; &lt;?php checked($feed-&gt;DelayAutorespond); ?&gt; /&gt;&nbsp;</div></li><li><div>         Send user notification only when payment is received.&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;_gfpaystation_delay_post&quot; value=&quot;1&quot; &lt;?php checked($feed-&gt;DelayPost); ?&gt; /&gt;&nbsp;</div></li><li><div>         Create post only when payment is received.&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Metabox for Fields to Map to the parameters sent in the payment request.&nbsp;</div></li><li><div>    * @param WP_Post $post&nbsp;</div></li><li><div>    * @param array $metabox has metabox id, title, callback, and args elements.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function metaboxFields($post, $metabox) {&nbsp;</div></li><li><div>        wp_nonce_field(GFPAYSTATION_TYPE_FEED.'_save', GFPAYSTATION_TYPE_FEED.'_wpnonce', false, true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $feed = $metabox['args']['feed'];&nbsp;</div></li><li><div>        $MerchantReference = htmlspecialchars($feed-&gt;MerchantReference);&nbsp;</div></li><li><div>        $CustomerDetails = htmlspecialchars($feed-&gt;CustomerDetails);&nbsp;</div></li><li><div>        $OrderDetails = htmlspecialchars($feed-&gt;OrderDetails);&nbsp;</div></li><li><div>        $PaystationOverrideId = htmlspecialchars($feed-&gt;PaystationOverrideId);&nbsp;</div></li><li><div>        $fields = $feed-&gt;FormID ? self::getFormFields($feed-&gt;FormID) : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;strong&gt;Notes:&lt;/strong&gt; &nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            All these fields are optional, but we highly recommend that you at least set the Merchant Reference to something help you identify&nbsp;</div></li><li><div>            the customer, such as their email address. Customer details could be their name and Order details could be the name of the form.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            The first three fields you map here are displayed in your Paystation Online Admin when looking at transactions. You can also search on the Merchant Reference.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;table class='gfpaystation-feed-fields gfpaystation-details'&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th&gt;Merchant Reference:&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;select size=&quot;1&quot; name=&quot;_gfpaystation_merchant_ref&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php if ($fields) echo self::selectFields($MerchantReference, $fields); ?&gt;&nbsp;</div></li><li><div>                    &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th&gt;Customer Details:&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;select size=&quot;1&quot; name=&quot;_gfpaystation_customer_details&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php if ($fields) echo self::selectFields($CustomerDetails, $fields); ?&gt;&nbsp;</div></li><li><div>                    &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th&gt;Order Details:&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;select size=&quot;1&quot; name=&quot;_gfpaystation_order_details&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php if ($fields) echo self::selectFields($OrderDetails, $fields); ?&gt;&nbsp;</div></li><li><div>                    &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>        &lt;br /&gt;&nbsp;</div></li><li><div>        &lt;p&gt;&nbsp;</div></li><li><div>            &lt;strong&gt;Leave this field empty&lt;/strong&gt; unless instructed otherwise. It is only used for a very specific feature to do with making the payment go in different &nbsp;</div></li><li><div>            Paystation accounts based on user selection on the form such as region, branch, country, etc. Please contact us for more details if you are interested in being able to do this.&nbsp;</div></li><li><div>        &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;table class='gfpaystation-feed-fields gfpaystation-details'&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th&gt;Paystation Id Override:&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;select size=&quot;1&quot; name=&quot;_gfpaystation_override_id&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php if ($fields) echo self::selectFields($PaystationOverrideId, $fields); ?&gt;&nbsp;</div></li><li><div>                    &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Filter insert fields, to set post title from form name.&nbsp;</div></li><li><div>    * @param array $data the post insert data&nbsp;</div></li><li><div>    * @param array $postarr data from the form post&nbsp;</div></li><li><div>    * @return array&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function filterInsertPostData($data, $postarr) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $formID = isset($postarr['_gfpaystation_form']) ? intval($postarr['_gfpaystation_form']) : 0;&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        if ($formID) {&nbsp;</div></li><li><div>            $form = GFFormsModel::get_form($formID);&nbsp;</div></li><li><div>            $data['post_title'] = $form-&gt;title;&nbsp;</div></li><li><div>            $data['post_name'] = sanitize_title($form-&gt;title);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $data;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Save custom fields about the form.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function saveCustomFields($postID) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Check whether this is an auto save routine. If it is, our form has not been submitted, so we don't want to do anything&nbsp;</div></li><li><div>        if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)&nbsp;</div></li><li><div>            return $postID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        global $typenow;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Handle post type&nbsp;</div></li><li><div>        if ($typenow == GFPAYSTATION_TYPE_FEED) {&nbsp;</div></li><li><div>            // verify permission to edit post / page&nbsp;</div></li><li><div>            if (!current_user_can('edit_post', $postID))&nbsp;</div></li><li><div>                return $postID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $fields = array (&nbsp;</div></li><li><div>                '_gfpaystation_form', &nbsp;</div></li><li><div>                '_gfpaystation_url_fail', &nbsp;</div></li><li><div>                '_gfpaystation_url_success', &nbsp;</div></li><li><div>                '_gfpaystation_merchant_ref', &nbsp;</div></li><li><div>                '_gfpaystation_customer_details', &nbsp;</div></li><li><div>                '_gfpaystation_order_details', &nbsp;</div></li><li><div>                '_gfpaystation_override_id', &nbsp;</div></li><li><div>                '_gfpaystation_opt', &nbsp;</div></li><li><div>                '_gfpaystation_delay_post', &nbsp;</div></li><li><div>                '_gfpaystation_delay_notify', &nbsp;</div></li><li><div>                '_gfpaystation_delay_autorespond', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($_POST['_gfpaystation_form'])) {&nbsp;</div></li><li><div>                if (!wp_verify_nonce($_POST[GFPAYSTATION_TYPE_FEED.'_wpnonce'], GFPAYSTATION_TYPE_FEED.'_save'))&nbsp;</div></li><li><div>                    die('Security exception');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($fields as $fieldName) {&nbsp;</div></li><li><div>                if (isset($_POST[$fieldName])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $value = $_POST[$fieldName];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if (empty($value))&nbsp;</div></li><li><div>                        delete_post_meta($postID, $fieldName);&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                        update_post_meta($postID, $fieldName, $value);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    // checkboxes aren't set, so delete them&nbsp;</div></li><li><div>                    delete_post_meta($postID, $fieldName);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $postID;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Remove unwanted actions from list of feeds&nbsp;</div></li><li><div>    * @param array $actions&nbsp;</div></li><li><div>    * @return array&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function filterPostRowActions($actions) {&nbsp;</div></li><li><div>        unset($actions['inline hide-if-no-js']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $actions;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Change the post updated messages&nbsp;</div></li><li><div>    * @param array $messages&nbsp;</div></li><li><div>    * @return array&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function filterPostUpdatedMessages($messages) {&nbsp;</div></li><li><div>        $messages[GFPAYSTATION_TYPE_FEED] = array(&nbsp;</div></li><li><div>             0 =&gt; '', // Unused. Messages start at index 1.&nbsp;</div></li><li><div>             1 =&gt; 'Feed updated.', &nbsp;</div></li><li><div>             2 =&gt; 'Custom field updated.', &nbsp;</div></li><li><div>             3 =&gt; 'Custom field deleted.', &nbsp;</div></li><li><div>             4 =&gt; 'Feed updated.', &nbsp;</div></li><li><div>            /** translators: %s: date and time of the revision */&nbsp;</div></li><li><div>             5 =&gt; isset($_GET['revision']) ? sprintf( 'Feed restored to revision from %s', wp_post_revision_title( (int) $_GET['revision'], false ) ) : false, &nbsp;</div></li><li><div>             6 =&gt; 'Feed published.', &nbsp;</div></li><li><div>             7 =&gt; 'Feed saved.', &nbsp;</div></li><li><div>             8 =&gt; 'Feed submitted.', &nbsp;</div></li><li><div>             9 =&gt; 'Feed scheduled for: ', &nbsp;</div></li><li><div>            10 =&gt; 'Feed draft updated.', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $messages;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Filter to add columns to post list.&nbsp;</div></li><li><div>    * @param array $posts_columns&nbsp;</div></li><li><div>    * @return array&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public function filterManageColumns($posts_columns) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Date isn't useful for this post type&nbsp;</div></li><li><div>        unset($posts_columns['date']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // stop File Gallery adding No. of Attachments&nbsp;</div></li><li><div>        unset($posts_columns['attachment_count']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $posts_columns;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * get a map of GF form field IDs to field names, for populating drop-down lists on the scren where the fields are&nbsp;</div></li><li><div>    * mapped to the gateway parameters&nbsp;</div></li><li><div>    * @param int $formID&nbsp;</div></li><li><div>    * @return array&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public static function getFormFields($formID) {&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $form = GFFormsModel::get_form_meta($formID);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $fields = array(&nbsp;</div></li><li><div>            'form' =&gt; $formID . ' (form ID)', &nbsp;</div></li><li><div>            'title' =&gt; $form['title'] . ' (form title)', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (is_array($form['fields'])) {&nbsp;</div></li><li><div>            foreach ($form['fields'] as $field) {&nbsp;</div></li><li><div>                if (!rgar($field, 'displayOnly')) {&nbsp;</div></li><li><div>                    // pick up simple fields and selected compound fields&nbsp;</div></li><li><div>                    if (empty($field['inputs']) || in_array(GFFormsModel::get_input_type($field), array('name', 'address'))) {&nbsp;</div></li><li><div>                        $fields[(string) $field['id']] = GFCommon::get_label($field);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // pick up subfields&nbsp;</div></li><li><div>                    if (isset($field['inputs']) && is_array($field['inputs'])) {&nbsp;</div></li><li><div>                        foreach($field['inputs'] as $input) {&nbsp;</div></li><li><div>                            $fields[(string) $input['id']] = GFCommon::get_label($field, $input['id']);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $fields;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Return a list of drop-down list items for field mappings&nbsp;</div></li><li><div>    * @param string $current the currently selected option&nbsp;</div></li><li><div>    * @param array $fields&nbsp;</div></li><li><div>    * @return string&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    // ====================================================================================================================================&nbsp;</div></li><li><div>    public static function selectFields($current, $fields) {&nbsp;</div></li><li><div>        $opts = &quot;&lt;option value=''&gt; (not selected) &lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ($fields as $name =&gt; $title) {&nbsp;</div></li><li><div>            $selected = selected($current, $name);&nbsp;</div></li><li><div>            $title = htmlspecialchars($title);&nbsp;</div></li><li><div>            $opts .= &quot;&lt;option value='$name' $selected&gt;$title&lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $opts;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.3.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.3/classes/gfpaystation_feed_admin/" class="active">1.4.3</a></li><li><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.2/classes/gfpaystation_feed_admin/" class="">1.4.2</a></li><li><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.4.0/classes/gfpaystation_feed_admin/" class="">1.4.0</a></li><li><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.3.1/classes/gfpaystation_feed_admin/" class="">1.3.1</a></li><li><a href="http://hookr.io/plugins/gravity-forms-paystation-3-party-hosted/1.3.0/classes/gfpaystation_feed_admin/" class="">1.3.0</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>GFPaystationFeedAdmin</li><li><span></span>Gravity Forms Paystation (3 party hosted)</li><li><span></span>1.4.3</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>