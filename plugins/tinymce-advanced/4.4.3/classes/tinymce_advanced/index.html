<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="4.4.3" data-slug="tinymce-advanced" data-type="class" data-id="15600"><head xmlns="http://www.w3.org/1999/xhtml"><title> tinymce_advanced | class | Tinymce Advanced | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Tinymce_Advanced, class, plugin, tinymce-advanced, 4.4.3" /><meta name="description" content="The TinyMCE Advanced Tinymce Advanced class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=9426f01be0fb8a14a792b9c78dcccf57' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/tinymce_advanced/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ftinymce_advanced%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ftinymce_advanced%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-tinymce-advanced-4.4.3-class-tinymce_advanced","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="tinymce_advanced" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to tinymce-advanced." href="http://hookr.io/plugins/tinymce-advanced/" class="plugin"><span property="name">tinymce-advanced</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.4.3." href="http://hookr.io/plugins/tinymce-advanced/4.4.3/" class="H_VERSION"><span property="name">4.4.3</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/tinymce-advanced/4.4.3/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">tinymce_advanced</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="6"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/all/" title="All">All <span class="count badge">6</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/hooks/" title="Hooks">Hooks <span class="count badge">2</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="2"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/filters/" title="Filters">Filters <span class="count badge">2</span></a></li><li class="active" data-id="class" data-count="1"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/classes/" title="Classes">Classes <span class="count badge">1</span></a></li><li class="" data-id="constant" data-count="3"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/constants/" title="Constants">Constants <span class="count badge">3</span></a></li><li class="" data-id="function" data-count="0"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/functions/" title="Functions">Functions <span class="count badge">0</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>Tinymce_Advanced</strong></h1><p>The TinyMCE Advanced <strong>Tinymce Advanced</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/files/tinymce-advanced/" class="file">/tinymce-advanced.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="32" class="block" start="32"><li><div>class Tinymce_Advanced {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private $required_version = '4.7-beta';&nbsp;</div></li><li><div>    private $user_settings;&nbsp;</div></li><li><div>    private $admin_settings;&nbsp;</div></li><li><div>    private $admin_options;&nbsp;</div></li><li><div>    private $editor_id;&nbsp;</div></li><li><div>    private $disabled_for_editor = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private $plugins;&nbsp;</div></li><li><div>    private $options;&nbsp;</div></li><li><div>    private $toolbar_1;&nbsp;</div></li><li><div>    private $toolbar_2;&nbsp;</div></li><li><div>    private $toolbar_3;&nbsp;</div></li><li><div>    private $toolbar_4;&nbsp;</div></li><li><div>    private $used_buttons = array();&nbsp;</div></li><li><div>    private $all_buttons = array();&nbsp;</div></li><li><div>    private $buttons_filter = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_default_user_settings() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'options' =&gt; 'menubar, advlist', &nbsp;</div></li><li><div>            'toolbar_1' =&gt; 'formatselect, bold, italic, blockquote, bullist, numlist, alignleft, aligncenter, alignright, link, unlink, undo, redo', &nbsp;</div></li><li><div>            'toolbar_2' =&gt; 'fontselect, fontsizeselect, outdent, indent, pastetext, removeformat, charmap, wp_more, forecolor, table, wp_help', &nbsp;</div></li><li><div>            'toolbar_3' =&gt; '', &nbsp;</div></li><li><div>            'toolbar_4' =&gt; '', &nbsp;</div></li><li><div>            'plugins' =&gt; 'anchor, code, insertdatetime, nonbreaking, print, searchreplace, table, visualblocks, visualchars, advlist, wptadv', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_default_admin_settings() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'options' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_all_plugins() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'advlist', &nbsp;</div></li><li><div>            'anchor', &nbsp;</div></li><li><div>            'code', &nbsp;</div></li><li><div>            'contextmenu', &nbsp;</div></li><li><div>            'emoticons', &nbsp;</div></li><li><div>            'importcss', &nbsp;</div></li><li><div>            'insertdatetime', &nbsp;</div></li><li><div>            'link', &nbsp;</div></li><li><div>            'nonbreaking', &nbsp;</div></li><li><div>            'print', &nbsp;</div></li><li><div>            'searchreplace', &nbsp;</div></li><li><div>            'table', &nbsp;</div></li><li><div>            'visualblocks', &nbsp;</div></li><li><div>            'visualchars', &nbsp;</div></li><li><div>            'wptadv', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_all_user_options() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'advlist', &nbsp;</div></li><li><div>            'advlink', &nbsp;</div></li><li><div>            'contextmenu', &nbsp;</div></li><li><div>            'menubar', &nbsp;</div></li><li><div>            'fontsize_formats', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_all_admin_options() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'importcss', &nbsp;</div></li><li><div>            'no_autop', &nbsp;</div></li><li><div>            'paste_images', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function get_editor_locations() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'edit_post_screen', &nbsp;</div></li><li><div>            'rest_of_wpadmin', &nbsp;</div></li><li><div>            'on_front_end', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function __construct() {&nbsp;</div></li><li><div>        if ( ! defined('ABSPATH') ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        register_activation_hook( __FILE__, array( $this, 'check_plugin_version' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'plugins_loaded', array( $this, 'set_paths' ), 50 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_admin() ) {&nbsp;</div></li><li><div>            add_action( 'admin_menu', array( $this, 'add_menu' ) );&nbsp;</div></li><li><div>            add_action( 'admin_enqueue_scripts', array( $this, 'enqueue_scripts' ) );&nbsp;</div></li><li><div>            add_action( 'plugins_loaded', array( $this, 'load_textdomain' ) );&nbsp;</div></li><li><div>            add_filter( 'plugin_action_links', array( $this, 'add_settings_link' ), 10, 2 );&nbsp;</div></li><li><div>            add_action( 'before_wp_tiny_mce', array( $this, 'show_version_warning' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'wp_editor_settings', array( $this, 'disable_for_editor' ), 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'mce_buttons', array( $this, 'mce_buttons_1' ), 999, 2 );&nbsp;</div></li><li><div>        add_filter( 'mce_buttons_2', array( $this, 'mce_buttons_2' ), 999 );&nbsp;</div></li><li><div>        add_filter( 'mce_buttons_3', array( $this, 'mce_buttons_3' ), 999 );&nbsp;</div></li><li><div>        add_filter( 'mce_buttons_4', array( $this, 'mce_buttons_4' ), 999 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'tiny_mce_before_init', array( $this, 'mce_options' ) );&nbsp;</div></li><li><div>        add_filter( 'mce_external_plugins', array( $this, 'mce_external_plugins' ), 999 );&nbsp;</div></li><li><div>        add_filter( 'tiny_mce_plugins', array( $this, 'tiny_mce_plugins' ), 999 );&nbsp;</div></li><li><div>        add_action( 'after_wp_tiny_mce', array( $this, 'after_wp_tiny_mce' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function disable_for_editor( $settings, $editor_id ) {&nbsp;</div></li><li><div>        static $editor_style_added = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $this-&gt;admin_settings ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;disabled_for_editor = false;&nbsp;</div></li><li><div>        $this-&gt;editor_id = $editor_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $this-&gt;admin_settings['disabled_editors'] ) ) {&nbsp;</div></li><li><div>            $disabled_editors = explode( ', ', $this-&gt;admin_settings['disabled_editors'] );&nbsp;</div></li><li><div>            $current_screen = isset( $GLOBALS['current_screen'] ) ? $GLOBALS['current_screen'] : new stdClass;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( is_admin() ) {&nbsp;</div></li><li><div>                if ( $editor_id === 'content' && ( $current_screen-&gt;id === 'post' || $current_screen-&gt;id === 'page' ) ) {&nbsp;</div></li><li><div>                    if ( in_array( 'edit_post_screen', $disabled_editors, true ) ) {&nbsp;</div></li><li><div>                        $this-&gt;disabled_for_editor = true;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } elseif ( in_array( 'rest_of_wpadmin', $disabled_editors, true ) ) {&nbsp;</div></li><li><div>                    $this-&gt;disabled_for_editor = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } elseif ( in_array( 'on_front_end', $disabled_editors, true ) ) {&nbsp;</div></li><li><div>                $this-&gt;disabled_for_editor = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;disabled_for_editor && ! $editor_style_added ) {&nbsp;</div></li><li><div>            if ( $this-&gt;check_admin_setting( 'importcss' ) && $this-&gt;has_editor_style() !== 'present' ) {&nbsp;</div></li><li><div>                add_editor_style();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $editor_style_added = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $settings;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function is_disabled() {&nbsp;</div></li><li><div>        return $this-&gt;disabled_for_editor;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function has_editor_style() {&nbsp;</div></li><li><div>        if ( ! current_theme_supports( 'editor-style' ) ) {&nbsp;</div></li><li><div>            return 'not-supporetd';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $editor_stylesheets = get_editor_stylesheets();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $editor_stylesheets ) ) {&nbsp;</div></li><li><div>            foreach ( $editor_stylesheets as $url ) {&nbsp;</div></li><li><div>                if ( strpos( $url, 'editor-style.css' ) !== false ) {&nbsp;</div></li><li><div>                    return 'present';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return 'not-present';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // When using a plugin that changes the paths dinamically, set these earlier than 'plugins_loaded' 50.&nbsp;</div></li><li><div>    public function set_paths() {&nbsp;</div></li><li><div>        if ( ! defined( 'TADV_URL' ) )&nbsp;</div></li><li><div>            define( 'TADV_URL', plugin_dir_url( __FILE__ ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! defined( 'TADV_PATH' ) )&nbsp;</div></li><li><div>            define( 'TADV_PATH', plugin_dir_path( __FILE__ ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function load_textdomain() {&nbsp;</div></li><li><div>        load_plugin_textdomain( 'tinymce-advanced', false, 'tinymce-advanced/langs' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function enqueue_scripts( $page ) {&nbsp;</div></li><li><div>        if ( 'settings_page_tinymce-advanced' == $page ) {&nbsp;</div></li><li><div>            wp_enqueue_script( 'tadv-js', TADV_URL . 'js/tadv.js', array( 'jquery-ui-sortable' ), '4.0', true );&nbsp;</div></li><li><div>            wp_enqueue_style( 'tadv-mce-skin', includes_url( 'js/tinymce/skins/lightgray/skin.min.css' ), array(), '4.0' );&nbsp;</div></li><li><div>            wp_enqueue_style( 'tadv-css', TADV_URL . 'css/tadv-styles.css', array( 'editor-buttons' ), '4.0' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            add_action( 'admin_footer', array( $this, 'load_mce_translation' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function load_mce_translation() {&nbsp;</div></li><li><div>        if ( ! class_exists( '_WP_Editors' ) ) {&nbsp;</div></li><li><div>            require( ABSPATH . WPINC . '/class-wp-editor.php' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;script&gt;var tadvTranslation = &lt;?php echo _WP_Editors::wp_mce_translation( '', true ); ?&gt;;&lt;/script&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function load_settings() {&nbsp;</div></li><li><div>        if ( empty( $this-&gt;admin_settings ) ) {&nbsp;</div></li><li><div>            $this-&gt;admin_settings = get_option( 'tadv_admin_settings', false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $this-&gt;user_settings ) ) {&nbsp;</div></li><li><div>            $this-&gt;user_settings = get_option( 'tadv_settings', false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // load defaults if the options don't exist...&nbsp;</div></li><li><div>        if ( $this-&gt;admin_settings === false ) {&nbsp;</div></li><li><div>            $this-&gt;admin_settings = $this-&gt;get_default_admin_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;admin_options = ! empty( $this-&gt;admin_settings['options'] ) ? explode( ', ', $this-&gt;admin_settings['options'] ) : array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;user_settings === false ) {&nbsp;</div></li><li><div>            $this-&gt;user_settings = $this-&gt;get_default_user_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;options = ! empty( $this-&gt;user_settings['options'] )   ? explode( ', ', $this-&gt;user_settings['options'] )   : array();&nbsp;</div></li><li><div>        $this-&gt;plugins = ! empty( $this-&gt;user_settings['plugins'] )   ? explode( ', ', $this-&gt;user_settings['plugins'] )   : array();&nbsp;</div></li><li><div>        $this-&gt;toolbar_1 = ! empty( $this-&gt;user_settings['toolbar_1'] ) ? explode( ', ', $this-&gt;user_settings['toolbar_1'] ) : array();&nbsp;</div></li><li><div>        $this-&gt;toolbar_2 = ! empty( $this-&gt;user_settings['toolbar_2'] ) ? explode( ', ', $this-&gt;user_settings['toolbar_2'] ) : array();&nbsp;</div></li><li><div>        $this-&gt;toolbar_3 = ! empty( $this-&gt;user_settings['toolbar_3'] ) ? explode( ', ', $this-&gt;user_settings['toolbar_3'] ) : array();&nbsp;</div></li><li><div>        $this-&gt;toolbar_4 = ! empty( $this-&gt;user_settings['toolbar_4'] ) ? explode( ', ', $this-&gt;user_settings['toolbar_4'] ) : array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;used_buttons = array_merge( $this-&gt;toolbar_1, $this-&gt;toolbar_2, $this-&gt;toolbar_3, $this-&gt;toolbar_4 );&nbsp;</div></li><li><div>        $this-&gt;get_all_buttons();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function show_version_warning() {&nbsp;</div></li><li><div>        if ( is_admin() && current_user_can( 'update_plugins' ) && get_current_screen()-&gt;base === 'post' ) {&nbsp;</div></li><li><div>            $this-&gt;warn_if_unsupported();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function warn_if_unsupported() {&nbsp;</div></li><li><div>        if ( ! $this-&gt;check_minimum_supported_version() ) {&nbsp;</div></li><li><div>            $wp_ver = ! empty( $GLOBALS['wp_version'] ) ? $GLOBALS['wp_version'] : '(undefined)';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;error notice is-dismissible&quot;&gt;&lt;p&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            printf( __( 'TinyMCE Advanced requires WordPress version %1$s or newer. It appears that you are running %2$s. This can make the editor unstable.', 'tinymce-advanced' ), &nbsp;</div></li><li><div>                $this-&gt;required_version, &nbsp;</div></li><li><div>                esc_html( $wp_ver )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo '&lt;br&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            printf( __( 'Please upgrade your WordPress installation or download an &lt;a href=&quot;%s&quot;&gt;older version of the plugin&lt;/a&gt;.', 'tinymce-advanced' ), &nbsp;</div></li><li><div>                'https://wordpress.org/plugins/tinymce-advanced/download/'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Min version&nbsp;</div></li><li><div>    private function check_minimum_supported_version() {&nbsp;</div></li><li><div>        include( ABSPATH . WPINC . '/version.php' ); // get an unmodified $wp_version&nbsp;</div></li><li><div>        $wp_version = str_replace( '-src', '', $wp_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return ( version_compare( $wp_version, $this-&gt;required_version, '&gt;=' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function check_plugin_version() {&nbsp;</div></li><li><div>        $version = get_option( 'tadv_version', 0 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $version || $version &lt; 4000 ) {&nbsp;</div></li><li><div>            // First install or upgrade to TinyMCE 4.0&nbsp;</div></li><li><div>            $this-&gt;user_settings = $this-&gt;get_default_user_settings();&nbsp;</div></li><li><div>            $this-&gt;admin_settings = $this-&gt;get_default_admin_settings();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            update_option( 'tadv_settings', $this-&gt;user_settings );&nbsp;</div></li><li><div>            update_option( 'tadv_admin_settings', $this-&gt;admin_settings );&nbsp;</div></li><li><div>            update_option( 'tadv_version', 4000 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $version &lt; 4000 ) {&nbsp;</div></li><li><div>            // Upgrade to TinyMCE 4.0, clean options&nbsp;</div></li><li><div>            delete_option('tadv_options');&nbsp;</div></li><li><div>            delete_option('tadv_toolbars');&nbsp;</div></li><li><div>            delete_option('tadv_plugins');&nbsp;</div></li><li><div>            delete_option('tadv_btns1');&nbsp;</div></li><li><div>            delete_option('tadv_btns2');&nbsp;</div></li><li><div>            delete_option('tadv_btns3');&nbsp;</div></li><li><div>            delete_option('tadv_btns4');&nbsp;</div></li><li><div>            delete_option('tadv_allbtns');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function get_all_buttons() {&nbsp;</div></li><li><div>        if ( ! empty( $this-&gt;all_buttons ) )&nbsp;</div></li><li><div>            return $this-&gt;all_buttons;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $buttons = array(&nbsp;</div></li><li><div>            // Core&nbsp;</div></li><li><div>            'bold' =&gt; 'Bold', &nbsp;</div></li><li><div>            'italic' =&gt; 'Italic', &nbsp;</div></li><li><div>            'underline' =&gt; 'Underline', &nbsp;</div></li><li><div>            'strikethrough' =&gt; 'Strikethrough', &nbsp;</div></li><li><div>            'alignleft' =&gt; 'Align left', &nbsp;</div></li><li><div>            'aligncenter' =&gt; 'Align center', &nbsp;</div></li><li><div>            'alignright' =&gt; 'Align right', &nbsp;</div></li><li><div>            'alignjustify' =&gt; 'Justify', &nbsp;</div></li><li><div>            'styleselect' =&gt; 'Formats', &nbsp;</div></li><li><div>            'formatselect' =&gt; 'Paragraph', &nbsp;</div></li><li><div>            'fontselect' =&gt; 'Font Family', &nbsp;</div></li><li><div>            'fontsizeselect' =&gt; 'Font Sizes', &nbsp;</div></li><li><div>            'cut' =&gt; 'Cut', &nbsp;</div></li><li><div>            'copy' =&gt; 'Copy', &nbsp;</div></li><li><div>            'paste' =&gt; 'Paste', &nbsp;</div></li><li><div>            'bullist' =&gt; 'Bulleted list', &nbsp;</div></li><li><div>            'numlist' =&gt; 'Numbered list', &nbsp;</div></li><li><div>            'outdent' =&gt; 'Decrease indent', &nbsp;</div></li><li><div>            'indent' =&gt; 'Increase indent', &nbsp;</div></li><li><div>            'blockquote' =&gt; 'Blockquote', &nbsp;</div></li><li><div>            'undo' =&gt; 'Undo', &nbsp;</div></li><li><div>            'redo' =&gt; 'Redo', &nbsp;</div></li><li><div>            'removeformat' =&gt; 'Clear formatting', &nbsp;</div></li><li><div>            'subscript' =&gt; 'Subscript', &nbsp;</div></li><li><div>            'superscript' =&gt; 'Superscript', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // From plugins&nbsp;</div></li><li><div>            'hr' =&gt; 'Horizontal line', &nbsp;</div></li><li><div>            'link' =&gt; 'Insert/edit link', &nbsp;</div></li><li><div>            'unlink' =&gt; 'Remove link', &nbsp;</div></li><li><div>            'image' =&gt; 'Insert/edit image', &nbsp;</div></li><li><div>            'charmap' =&gt; 'Special character', &nbsp;</div></li><li><div>            'pastetext' =&gt; 'Paste as text', &nbsp;</div></li><li><div>            'print' =&gt; 'Print', &nbsp;</div></li><li><div>            'anchor' =&gt; 'Anchor', &nbsp;</div></li><li><div>            'searchreplace' =&gt; 'Find and replace', &nbsp;</div></li><li><div>            'visualblocks' =&gt; 'Show blocks', &nbsp;</div></li><li><div>            'visualchars' =&gt; 'Show invisible characters', &nbsp;</div></li><li><div>            'code' =&gt; 'Source code', &nbsp;</div></li><li><div>            'wp_code' =&gt; 'Code', &nbsp;</div></li><li><div>            'fullscreen' =&gt; 'Fullscreen', &nbsp;</div></li><li><div>            'insertdatetime' =&gt; 'Insert date/time', &nbsp;</div></li><li><div>            'media' =&gt; 'Insert/edit video', &nbsp;</div></li><li><div>            'nonbreaking' =&gt; 'Nonbreaking space', &nbsp;</div></li><li><div>            'table' =&gt; 'Table', &nbsp;</div></li><li><div>            'ltr' =&gt; 'Left to right', &nbsp;</div></li><li><div>            'rtl' =&gt; 'Right to left', &nbsp;</div></li><li><div>            'emoticons' =&gt; 'Emoticons', &nbsp;</div></li><li><div>            'forecolor' =&gt; 'Text color', &nbsp;</div></li><li><div>            'backcolor' =&gt; 'Background color', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Layer plugin ?&nbsp;</div></li><li><div>        //    'insertlayer' =&gt; 'Layer', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // WP&nbsp;</div></li><li><div>            'wp_adv' =&gt; 'Toolbar Toggle', &nbsp;</div></li><li><div>            'wp_help' =&gt; 'Keyboard Shortcuts', &nbsp;</div></li><li><div>            'wp_more' =&gt; 'Read more...', &nbsp;</div></li><li><div>            'wp_page' =&gt; 'Page break', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // add/remove allowed buttons&nbsp;</div></li><li><div>        $buttons = apply_filters( 'tadv_allowed_buttons', $buttons );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;all_buttons = $buttons;&nbsp;</div></li><li><div>        $this-&gt;buttons_filter = array_keys( $buttons );&nbsp;</div></li><li><div>        return $buttons;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function get_plugins( $plugins = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;used_buttons ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'anchor', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'anchor';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'visualchars', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'visualchars';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'visualblocks', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'visualblocks';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'nonbreaking', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'nonbreaking';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'emoticons', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'emoticons';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'insertdatetime', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'insertdatetime';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'table', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'table';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'print', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'print';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'searchreplace', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'searchreplace';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'code', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>            $plugins[] = 'code';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //    if ( in_array( 'insertlayer', $this-&gt;used_buttons, true ) )&nbsp;</div></li><li><div>    //        $plugins[] = 'layer';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // From options&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting( 'advlist' ) )&nbsp;</div></li><li><div>            $plugins[] = 'advlist';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting( 'advlink' ) )&nbsp;</div></li><li><div>            $plugins[] = 'link';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_admin_setting( 'importcss' ) )&nbsp;</div></li><li><div>            $plugins[] = 'importcss';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting( 'contextmenu' ) )&nbsp;</div></li><li><div>            $plugins[] = 'contextmenu';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // add/remove used plugins&nbsp;</div></li><li><div>        $plugins = apply_filters( 'tadv_used_plugins', $plugins, $this-&gt;used_buttons );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return array_unique( $plugins );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function check_user_setting( $setting ) {&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Back-compat for 'fontsize_formats'&nbsp;</div></li><li><div>        if ( $setting === 'fontsize_formats' && $this-&gt;check_admin_setting( 'fontsize_formats' ) ) {&nbsp;</div></li><li><div>            return true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return in_array( $setting, $this-&gt;options, true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function check_admin_setting( $setting ) {&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;admin_options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( strpos( $setting, 'enable_' ) === 0 ) {&nbsp;</div></li><li><div>            $disabled_editors = ! empty( $this-&gt;admin_settings['disabled_editors'] ) ? explode( ', ', $this-&gt;admin_settings['disabled_editors'] ) : array();&nbsp;</div></li><li><div>            return ! in_array( str_replace( 'enable_', '', $setting ), $disabled_editors );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return in_array( $setting, $this-&gt;admin_options, true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_buttons_1( $original, $editor_id ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $original;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $buttons_1 = $this-&gt;toolbar_1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $original ) && ! empty( $original ) ) {&nbsp;</div></li><li><div>            $original = array_diff( $original, $this-&gt;buttons_filter );&nbsp;</div></li><li><div>            $buttons_1 = array_merge( $buttons_1, $original );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $buttons_1;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_buttons_2( $original ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $original;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $buttons_2 = $this-&gt;toolbar_2;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $original ) && ! empty( $original ) ) {&nbsp;</div></li><li><div>            $original = array_diff( $original, $this-&gt;buttons_filter );&nbsp;</div></li><li><div>            $buttons_2 = array_merge( $buttons_2, $original );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $buttons_2;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_buttons_3( $original ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $original;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $buttons_3 = $this-&gt;toolbar_3;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $original ) && ! empty( $original ) ) {&nbsp;</div></li><li><div>            $original = array_diff( $original, $this-&gt;buttons_filter );&nbsp;</div></li><li><div>            $buttons_3 = array_merge( $buttons_3, $original );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $buttons_3;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_buttons_4( $original ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $original;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;options ) ) {&nbsp;</div></li><li><div>            $this-&gt;load_settings();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $buttons_4 = $this-&gt;toolbar_4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $original ) && ! empty( $original ) ) {&nbsp;</div></li><li><div>            $original = array_diff( $original, $this-&gt;buttons_filter );&nbsp;</div></li><li><div>            $buttons_4 = array_merge( $buttons_4, $original );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $buttons_4;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_options( $init ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $init;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $init['image_advtab'] = true;&nbsp;</div></li><li><div>        $init['rel_list'] = '[{text: &quot;None&quot;, value: &quot;&quot;}, {text: &quot;Nofollow&quot;, value: &quot;nofollow&quot;}]';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_admin_setting( 'no_autop' ) ) {&nbsp;</div></li><li><div>            $init['wpautop'] = false;&nbsp;</div></li><li><div>    //        $init['indent'] = true;&nbsp;</div></li><li><div>            $init['tadv_noautop'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting('menubar') ) {&nbsp;</div></li><li><div>            $init['menubar'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! in_array( 'wp_adv', $this-&gt;toolbar_1, true ) ) {&nbsp;</div></li><li><div>            $init['wordpress_adv_hidden'] = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_admin_setting( 'importcss' ) ) {&nbsp;</div></li><li><div>    //        $init['importcss_selector_filter'] = 'function(sel) {return /^\.[a-z0-9]+$/i.test(sel);}';&nbsp;</div></li><li><div>            $init['importcss_file_filter'] = 'editor-style.css';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting( 'fontsize_formats' ) ) {&nbsp;</div></li><li><div>            $init['fontsize_formats'] =  '8px 10px 12px 14px 16px 20px 24px 28px 32px 36px 48px 60px';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;check_user_setting( 'paste_images' ) ) {&nbsp;</div></li><li><div>            $init['paste_data_images'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'table', $this-&gt;plugins, true ) ) {&nbsp;</div></li><li><div>            $init['table_toolbar'] = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $init;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function after_wp_tiny_mce() {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;script&gt;&nbsp;</div></li><li><div>        !function(a, b) {&quot;undefined&quot;!=typeof a&&&quot;undefined&quot;!=typeof b&&a(function() {b.addButton(&quot;sofbg-axcell&quot;, &quot;&para;&quot;, function(b, c) {&nbsp;</div></li><li><div>        var d=a(c), e=a.trim(d.val()), f=&quot;table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|&quot; +&nbsp;</div></li><li><div>        &quot;address|math|style|p|h[1-6]|hr|fieldset|legend|tmadv|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary&quot;;&nbsp;</div></li><li><div>        -1!==e.indexOf(&quot;&lt;/p&gt;&quot;)&&-1===e.indexOf(&quot;\n\n&quot;)&&(e=e.replace(new RegExp(&quot;&lt;(?:&quot;+f+&quot;)(?: [^&gt;]*)?&gt;&quot;, &quot;gi&quot;), &quot;\n$&&quot;), &nbsp;</div></li><li><div>        e=e.replace(new RegExp(&quot;&lt;/(?:&quot;+f+&quot;)&gt;&quot;, &quot;gi&quot;), &quot;$&\n&quot;), e=e.replace(/(&lt;br(?: [^&gt;]*)?&gt;)[\r\n\t]*/gi, &quot;$1\n&quot;), &nbsp;</div></li><li><div>        e=e.replace(/&gt;\n[\r\n\t]+&lt;/g, &quot;&gt;\n&lt;&quot;), e=e.replace(/^&lt;li/gm, &quot;    &lt;li&quot;), e=e.replace(/&lt;td&gt;\u00a0&lt;\/td&gt;/g, &quot;&lt;td&gt;&nbsp;&lt;/td&gt;&quot;), &nbsp;</div></li><li><div>        d.val(a.trim(e)))}, &quot;&quot;, &quot;&quot;, &quot;Fix line breaks&quot;)})}(window.jQuery, window.QTags);&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function htmledit( $content ) {&nbsp;</div></li><li><div>        return $content;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function mce_external_plugins( $mce_plugins ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $mce_plugins;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $this-&gt;plugins ) ) {&nbsp;</div></li><li><div>            $this-&gt;plugins = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;plugins[] = 'wptadv';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;plugins = array_intersect( $this-&gt;plugins, $this-&gt;get_all_plugins() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $plugpath = TADV_URL . 'mce/';&nbsp;</div></li><li><div>        $mce_plugins = (array) $mce_plugins;&nbsp;</div></li><li><div>        $suffix = defined( 'SCRIPT_DEBUG' ) && SCRIPT_DEBUG ? '' : '.min';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $this-&gt;plugins as $plugin ) {&nbsp;</div></li><li><div>            $mce_plugins[&quot;$plugin&quot;] = $plugpath . $plugin . &quot;/plugin{$suffix}.js&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $mce_plugins;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function tiny_mce_plugins( $plugins ) {&nbsp;</div></li><li><div>        if ( $this-&gt;is_disabled() ) {&nbsp;</div></li><li><div>            return $plugins;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( in_array( 'image', $this-&gt;used_buttons, true ) && ! in_array( 'image', $plugins, true ) ) {&nbsp;</div></li><li><div>            $plugins[] = 'image';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ( in_array( 'rtl', $this-&gt;used_buttons, true ) || in_array( 'ltr', $this-&gt;used_buttons, true ) ) &&&nbsp;</div></li><li><div>            ! in_array( 'directionality', (array) $plugins, true ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $plugins[] = 'directionality';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $plugins;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function parse_buttons( $toolbar_id = false, $buttons = false ) {&nbsp;</div></li><li><div>        if ( $toolbar_id && ! $buttons && ! empty( $_POST[$toolbar_id] ) )&nbsp;</div></li><li><div>            $buttons = $_POST[$toolbar_id];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $buttons ) ) {&nbsp;</div></li><li><div>            $_buttons = array_map( array( @$this, 'filter_name' ), $buttons );&nbsp;</div></li><li><div>            return implode( ', ', array_filter( $_buttons ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function filter_name( $str ) {&nbsp;</div></li><li><div>        if ( empty( $str ) || ! is_string( $str ) )&nbsp;</div></li><li><div>            return '';&nbsp;</div></li><li><div>        // Button names&nbsp;</div></li><li><div>        return preg_replace( '/[^a-z0-9_]/i', '', $str );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function sanitize_settings( $settings ) {&nbsp;</div></li><li><div>        $_settings = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $settings ) ) {&nbsp;</div></li><li><div>            return $_settings;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $settings as $name =&gt; $value ) {&nbsp;</div></li><li><div>            $name = preg_replace( '/[^a-z0-9_]+/', '', $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( strpos( $name, 'toolbar_' ) === 0 ) {&nbsp;</div></li><li><div>                $_settings[$name] = $this-&gt;parse_buttons( false, explode( ', ', $value ) );&nbsp;</div></li><li><div>            } else if ( 'options' === $name || 'plugins' === $name || 'disabled_plugins' === $name ) {&nbsp;</div></li><li><div>                $_settings[$name] = preg_replace( '/[^a-z0-9_, ]+/', '', $value );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $_settings;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function validate_settings( $settings, $checklist ) {&nbsp;</div></li><li><div>        if ( empty( $settings ) ) {&nbsp;</div></li><li><div>            return '';&nbsp;</div></li><li><div>        } elseif ( is_string( $settings ) ) {&nbsp;</div></li><li><div>            $settings = explode( ', ', $settings );&nbsp;</div></li><li><div>        } elseif ( ! is_array( $settings ) ) {&nbsp;</div></li><li><div>            return '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $_settings = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $settings as $value ) {&nbsp;</div></li><li><div>            if ( in_array( $value, $checklist, true ) ) {&nbsp;</div></li><li><div>                $_settings[] = $value;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return implode( ', ', $_settings );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function save_settings( $all_settings = null ) {&nbsp;</div></li><li><div>        $settings = $user_settings = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $this-&gt;buttons_filter ) ) {&nbsp;</div></li><li><div>            $this-&gt;get_all_buttons();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $all_settings['settings'] ) ) {&nbsp;</div></li><li><div>            $user_settings = $all_settings['settings'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        for ( $i = 1; $i &lt; 5; $i++ ) {&nbsp;</div></li><li><div>            $toolbar_name = 'toolbar_' . $i;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! empty( $user_settings[ $toolbar_name ] ) ) {&nbsp;</div></li><li><div>                $toolbar = explode( ', ', $user_settings[ $toolbar_name ] );&nbsp;</div></li><li><div>            } elseif ( ! empty( $_POST[ $toolbar_name ] ) && is_array( $_POST[ $toolbar_name ] ) ) {&nbsp;</div></li><li><div>                $toolbar = $_POST[ $toolbar_name ];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $toolbar = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $i &gt; 1 && ( $wp_adv = array_search( 'wp_adv', $toolbar ) ) !== false ) {&nbsp;</div></li><li><div>                unset( $toolbar[ $wp_adv ] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $settings[ $toolbar_name ] = $this-&gt;validate_settings( $toolbar, $this-&gt;buttons_filter );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $user_settings['options'] ) ) {&nbsp;</div></li><li><div>            $options = explode( ', ', $user_settings['options'] );&nbsp;</div></li><li><div>        } elseif ( ! empty( $_POST['options'] ) && is_array( $_POST['options'] ) ) {&nbsp;</div></li><li><div>            $options = $_POST['options'];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $options = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings['options'] = $this-&gt;validate_settings( $options, $this-&gt;get_all_user_options() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $user_settings['plugins'] ) ) {&nbsp;</div></li><li><div>            $plugins = explode( ', ', $user_settings['plugins'] );&nbsp;</div></li><li><div>        } elseif ( ! empty( $_POST['options']['menubar'] ) ) {&nbsp;</div></li><li><div>            $plugins = array( 'anchor', 'code', 'insertdatetime', 'nonbreaking', 'print', 'searchreplace', 'table', 'visualblocks', 'visualchars' );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $plugins = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Merge the submitted plugins with plugins needed for the buttons.&nbsp;</div></li><li><div>        $this-&gt;user_settings = $settings;&nbsp;</div></li><li><div>        $this-&gt;load_settings();&nbsp;</div></li><li><div>        $plugins = $this-&gt;get_plugins( $plugins );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings['plugins'] = $this-&gt;validate_settings( $plugins, $this-&gt;get_all_plugins() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;user_settings = $settings;&nbsp;</div></li><li><div>        $this-&gt;load_settings();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Save the new settings.&nbsp;</div></li><li><div>        update_option( 'tadv_settings', $settings );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_multisite() || current_user_can( 'manage_sites' ) ) {&nbsp;</div></li><li><div>            $this-&gt;save_admin_settings( $all_settings );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private function save_admin_settings( $all_settings = null ) {&nbsp;</div></li><li><div>        $admin_settings = $save_admin_settings = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $all_settings['admin_settings'] ) ) {&nbsp;</div></li><li><div>            $admin_settings = $all_settings['admin_settings'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $admin_settings ) ) {&nbsp;</div></li><li><div>            $save_admin_settings['options'] = $this-&gt;validate_settings( $admin_settings['options'], $this-&gt;get_all_admin_options() );&nbsp;</div></li><li><div>            $disabled_editors = array_intersect( $this-&gt;get_editor_locations(), explode( ', ', $admin_settings['disabled_editors'] ) );&nbsp;</div></li><li><div>        } elseif ( isset( $_POST['tadv-save'] ) ) {&nbsp;</div></li><li><div>            if ( ! empty( $_POST['admin_options'] ) && is_array( $_POST['admin_options'] ) ) {&nbsp;</div></li><li><div>                $save_admin_settings['options'] = $this-&gt;validate_settings( $_POST['admin_options'], $this-&gt;get_all_admin_options() );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! empty( $_POST['tadv_enable_at'] ) && is_array( $_POST['tadv_enable_at'] ) ) {&nbsp;</div></li><li><div>                $tadv_enable_at = $_POST['tadv_enable_at'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $tadv_enable_at = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $disabled_editors = array_diff( $this-&gt;get_editor_locations(), $tadv_enable_at );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $save_admin_settings['disabled_editors'] = implode( ', ', $disabled_editors );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;admin_settings = $save_admin_settings;&nbsp;</div></li><li><div>        update_option( 'tadv_admin_settings', $save_admin_settings );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function settings_page() {&nbsp;</div></li><li><div>        if ( ! defined( 'TADV_ADMIN_PAGE' ) ) {&nbsp;</div></li><li><div>            define( 'TADV_ADMIN_PAGE', true );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        include_once( TADV_PATH . 'tadv_admin.php' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function add_menu() {&nbsp;</div></li><li><div>        add_options_page( 'TinyMCE Advanced', 'TinyMCE Advanced', 'manage_options', 'tinymce-advanced', array( $this, 'settings_page' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add a link to the settings page&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_settings_link( $links, $file ) {&nbsp;</div></li><li><div>        if ( $file === 'tinymce-advanced/tinymce-advanced.php' && current_user_can( 'manage_options' ) ) {&nbsp;</div></li><li><div>            $settings_link = sprintf( '&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;', admin_url( 'options-general.php?page=tinymce-advanced' ), __( 'Settings', 'tinymce-advanced' ) );&nbsp;</div></li><li><div>            array_unshift( $links, $settings_link );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $links;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 4.3.10.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/tinymce-advanced/4.5.6/classes/tinymce_advanced/" class="">4.5.6</a></li><li><a href="http://hookr.io/plugins/tinymce-advanced/4.4.3/classes/tinymce_advanced/" class="active">4.4.3</a></li><li><a href="http://hookr.io/plugins/tinymce-advanced/4.4.1/classes/tinymce_advanced/" class="">4.4.1</a></li><li><a href="http://hookr.io/plugins/tinymce-advanced/4.3.8/classes/tinymce_advanced/" class="">4.3.8</a></li><li><a href="http://hookr.io/plugins/tinymce-advanced/4.3.10.1/classes/tinymce_advanced/" class="">4.3.10.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Tinymce_Advanced</li><li><span></span>TinyMCE Advanced</li><li><span></span>4.5.6</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>