<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="1.5.0.9" data-slug="caldera-forms" data-type="file" data-id="79792"><head xmlns="http://www.w3.org/1999/xhtml"><title> ui-edit | file | Caldera Forms | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, caldera-forms, 1.5.0.9" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=1c9e595dd76f03e8ddb4d73c279fde21' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/ui-edit/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fui-edit%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fui-edit%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-caldera-forms-1.5.0.9-file-ui-edit","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="ui-edit" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to caldera-forms." href="http://hookr.io/plugins/caldera-forms/" class="plugin"><span property="name">caldera-forms</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.5.0.9." href="http://hookr.io/plugins/caldera-forms/1.5.0.9/" class="H_VERSION"><span property="name">1.5.0.9</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/caldera-forms/1.5.0.9/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">ui-edit</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="407"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/all/" title="All">All <span class="count badge">407</span></a></li><li class="" data-id="new" data-count="4"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/new/" title="New">New <span class="count badge">4</span></a></li><li class="" data-id="hooks" data-count="223"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/hooks/" title="Hooks">Hooks <span class="count badge">223</span></a></li><li class="" data-id="action" data-count="67"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/actions/" title="Actions">Actions <span class="count badge">67</span></a></li><li class="" data-id="filter" data-count="156"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/filters/" title="Filters">Filters <span class="count badge">156</span></a></li><li class="" data-id="class" data-count="115"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/classes/" title="Classes">Classes <span class="count badge">115</span></a></li><li class="" data-id="constant" data-count="17"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/constants/" title="Constants">Constants <span class="count badge">17</span></a></li><li class="" data-id="function" data-count="49"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/functions/" title="Functions">Functions <span class="count badge">49</span></a></li><li class="" data-id="shortcode" data-count="3"><a href="http://hookr.io/plugins/caldera-forms/1.5.0.9/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">3</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/ui/edit.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>global $field_type_list, $field_type_templates;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if( ! isset( $_GET['edit'] ) || ! is_string( $_GET['edit'] ) ) {&nbsp;</div></li><li><div>  wp_die( esc_html__( 'Invalid form ID', 'caldera-forms' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div><span class="comment">// Load element</span>&nbsp;</div></li><li><div>$element = $form = Caldera_Forms_Forms::get_form( $_GET['edit'] );&nbsp;</div></li><li><div>if( empty( $element ) || ! is_array( $element ) ) {&nbsp;</div></li><li><div>  wp_die( esc_html__( 'Invalid form', 'caldera-forms' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Runs before form editor is rendered, after form is gotten from DB.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.4.3</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $element Form config</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>do_action( 'caldera_forms_prerender_edit', $element );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter which Magic Tags are available in the form editor</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3.2</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $tags Array of magic registered tags </span>&nbsp;</div></li><li><div><span class="comment"> * @param array $form_id for which this applies.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>$magic_tags = apply_filters( 'caldera_forms_get_magic_tags', array(), $element['ID'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">//dump($element);</span>&nbsp;</div></li><li><div>if(empty($element['success'])) {&nbsp;</div></li><li><div>  $element['success'] = esc_html__( 'Form has successfully been submitted. Thank you.', 'caldera-forms' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if(!isset($element['db_support'])) {&nbsp;</div></li><li><div>  $element['db_support'] = 1;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Convert existing field conditions if old method used</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if( empty( $element['conditional_groups'] ) ) {&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  $element['conditional_groups'] = array();&nbsp;</div></li><li><div>  if( !empty( $element['fields'] ) ) {&nbsp;</div></li><li><div>      foreach( $element['fields'] as $field_id=&gt;$field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( !empty( $field['conditions'] ) && !empty( $field['conditions']['type'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( empty( $field['conditions']['group'] ) ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $element['conditional_groups']['conditions'][ 'con_' . $field['ID'] ] = array(&nbsp;</div></li><li><div>                  'id' =&gt; 'con_' . $field['ID'], &nbsp;</div></li><li><div>                  'name' =&gt; $field['label'], &nbsp;</div></li><li><div>                  'type' =&gt; $field['conditions']['type'], &nbsp;</div></li><li><div>                  'fields'=&gt; array(), &nbsp;</div></li><li><div>                  'group' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach( $field['conditions']['group'] as $groups_id=&gt;$groups ) {&nbsp;</div></li><li><div>                  foreach( $groups as $group_id =&gt; $group ) {&nbsp;</div></li><li><div>                      $element['conditional_groups']['conditions'][ 'con_' . $field['ID'] ]['fields'][ $group_id ] = $group['field'];&nbsp;</div></li><li><div>                      $element['conditional_groups']['conditions'][ 'con_' . $field['ID'] ]['group'][ $groups_id ][ $group_id ] = array(&nbsp;</div></li><li><div>                          'parent' =&gt;    $groups_id, &nbsp;</div></li><li><div>                          'field' =&gt;    $group['field'], &nbsp;</div></li><li><div>                          'compare' =&gt;    $group['compare'], &nbsp;</div></li><li><div>                          'value' =&gt;    $group['value']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $element['fields'][ $field_id ]['conditions'] = array(&nbsp;</div></li><li><div>                  'type' =&gt; 'con_' . $field['ID']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! isset( $element['fields'] ) ) {&nbsp;</div></li><li><div>  $element['fields'] = array();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$element['conditional_groups']['fields'] = $element['fields'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// place nonce field</span>&nbsp;</div></li><li><div>wp_nonce_field( 'cf_edit_element', 'cf_edit_nonce' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Init check</span>&nbsp;</div></li><li><div>echo &quot;&lt;input id=\&quot;last_updated_field\&quot; name=\&quot;config[_last_updated]\&quot; value=\&quot;&quot; . date('r') . &quot;\&quot; type=\&quot;hidden\&quot;&gt;&quot;;&nbsp;</div></li><li><div>echo &quot;&lt;input id=\&quot;form_id_field\&quot; name=\&quot;config[ID]\&quot; value=\&quot;&quot; . $_GET['edit'] . &quot;\&quot; type=\&quot;hidden\&quot;&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>do_action('caldera_forms_edit_start', $element);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Get Fieldtpyes</span>&nbsp;</div></li><li><div>$field_types = Caldera_Forms_Fields::get_all();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Get Elements</span>&nbsp;</div></li><li><div>$panel_extensions = Caldera_Forms_Admin_Panel::get_panels();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$field_type_list = array();&nbsp;</div></li><li><div>$field_type_templates = array();&nbsp;</div></li><li><div>$field_type_defaults = array(&nbsp;</div></li><li><div>  &quot;var fieldtype_defaults = {};&quot;&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// options based template</span>&nbsp;</div></li><li><div>$field_options_template = &quot;&nbsp;</div></li><li><div>&lt;div class=\&quot;caldera-config-group caldera-config-group-full\&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group\&quot;&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;label&gt;&lt;input id=\&quot;{{_id}}_auto\&quot; type=\&quot;checkbox\&quot; class=\&quot;auto-populate-options field-config\&quot; name=\&quot;{{_name}}[auto]\&quot; value=\&quot;1\&quot; {{#if auto}}checked=\&quot;checked\&quot;{{/if}}&gt; &quot;.esc_html__( 'Auto Populate', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>{{#if auto}}{{#script}}jQuery('#{{_id}}_auto').trigger('change');{{/script}}{{/if}}&nbsp;</div></li><li><div>&lt;div class=\&quot;caldera-config-group-auto-options\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Auto Type', 'caldera-forms' ) . &quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config auto-populate-type\&quot; name=\&quot;{{_name}}[auto_type]\&quot;&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;\&quot;&gt;&quot; . esc_html__( 'Select a source', 'caldera-forms' ) . &quot;&lt;/option&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;post_type\&quot;{{#is auto_type value=\&quot;post_type\&quot;}} selected=\&quot;selected\&quot;{{/is}}&gt;&quot; . esc_html__( 'Post Type', 'caldera-forms' ) . &quot;&lt;/option&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;taxonomy\&quot;{{#is auto_type value=\&quot;taxonomy\&quot;}} selected=\&quot;selected\&quot;{{/is}}&gt;&quot; . esc_html__( 'Taxonomy', 'caldera-forms' ) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>              ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * Runs after default field auto-population types options are outputted, inside of the select element.</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * Use this to add new options in UI for auto-population sources</span>&nbsp;</div></li><li><div><span class="comment">               *</span>&nbsp;</div></li><li><div><span class="comment">               * @since unknown</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              do_action( 'caldera_forms_autopopulate_types' );&nbsp;</div></li><li><div>              $field_options_template .= ob_get_clean() . &quot;&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-taxonomy auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Taxonomy', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[taxonomy]\&quot;&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $taxonomies = get_taxonomies();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach($taxonomies as $tax_type=&gt;$tax_name) {&nbsp;</div></li><li><div>              $field_options_template .= &quot;&lt;option value=\&quot;&quot; . $tax_type . &quot;\&quot; {{#is taxonomy value=\&quot;&quot; . $tax_type . &quot;\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&quot; . $tax_name . &quot;&lt;/option&gt;\r\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          $field_options_template .= &quot;&lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-post_type auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;.esc_html__( 'Post Type', 'caldera-forms' ) .&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[post_type]\&quot;&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $post_types = get_post_types(array(), 'objects');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach($post_types as $type) {&nbsp;</div></li><li><div>              $field_options_template .= &quot;&lt;option value=\&quot;&quot; . $type-&gt;name . &quot;\&quot; {{#is post_type value=\&quot;&quot; . $type-&gt;name . &quot;\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&quot; . $type-&gt;labels-&gt;name . &quot;&lt;/option&gt;\r\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $field_options_template .= &quot;&lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-taxonomy caldera-config-group-auto-post_type auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Value', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[value_field]\&quot;&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;name\&quot; {{#is value_field value=\&quot;name\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;Name&lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;id\&quot; {{#is value_field value=\&quot;id\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;ID&lt;/option&gt;\r\n&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-taxonomy auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Orderby', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[orderby_tax]\&quot;&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;count\&quot; {{#is value_field value=\&quot;count\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Count', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;id\&quot; {{#is value_field value=\&quot;id\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'ID', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;name\&quot; {{#is value_field value=\&quot;name\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Name', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;slug\&quot; {{#is value_field value=\&quot;slug\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Slug', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-post_type auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Orderby', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[orderby_post]\&quot;&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;ID\&quot; {{#is value_field value=\&quot;ID\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'ID', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;name\&quot; {{#is value_field value=\&quot;name\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Name (post slug)', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;author\&quot; {{#is value_field value=\&quot;author\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Author', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;title\&quot; {{#is value_field value=\&quot;title\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Title', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;date\&quot; {{#is value_field value=\&quot;date\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Publish Date', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;modified\&quot; {{#is value_field value=\&quot;modified\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Modified Date', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;parent\&quot; {{#is value_field value=\&quot;parent\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Parent ID', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;comment_count\&quot; {{#is value_field value=\&quot;comment_count\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Comment Count', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;menu_order\&quot; {{#is value_field value=\&quot;menu_order\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Menu Order', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-auto-taxonomy caldera-config-group-auto-post_type auto-populate-type-panel\&quot; style=\&quot;display:none;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;label&gt;&quot;. esc_html__( 'Order', 'caldera-forms' ).&quot;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>          &lt;select class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[order]\&quot;&gt;&nbsp;</div></li><li><div>              &lt;option value=\&quot;ASC\&quot; {{#is value_field value=\&quot;ASC\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Ascending', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>              &lt;option value=\&quot;DESC\&quot; {{#is value_field value=\&quot;DESC\&quot;}}selected=\&quot;selected\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>                  &quot; . __( 'Descending', 'caldera-forms' ) .&quot;&nbsp;</div></li><li><div>              &lt;/option&gt;\r\n&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &quot;;&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Runs after default options for auto-populate fields</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Use this to add new options in UI when making custom aut-population types</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since unknown</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'caldera_forms_autopopulate_type_config' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filter to setup presets for option fields</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Use this to add new option presets for option based fields like Checkboxes, radios and selects</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.4.0</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $presets Array of current presets </span>&nbsp;</div></li><li><div><span class="comment">   * @param array $element current structure of form</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $option_presets = apply_filters( 'caldera_forms_field_option_presets', array(), $element );&nbsp;</div></li><li><div>  $preset_options = array();&nbsp;</div></li><li><div>  if( !empty( $option_presets ) && is_array( $option_presets ) ) {&nbsp;</div></li><li><div>      foreach ($option_presets as $preset_name =&gt; $preset ) {&nbsp;</div></li><li><div>          if( empty( $preset['name'] ) ) { continue; }&nbsp;</div></li><li><div>          $preset_options[] = '&lt;option value=&quot;' . esc_attr( $preset_name ) . '&quot;&gt;' . esc_html( $preset['name'] ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $preset_options = implode(' ', $preset_options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $field_options_template .= ob_get_clean() . &quot;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;div class=\&quot;caldera-config-group-toggle-options\&quot; {{#if auto}}style=\&quot;display:none;\&quot;{{/if}}&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-full\&quot;&gt;&nbsp;</div></li><li><div>      &lt;button type=\&quot;button\&quot; class=\&quot;button add-toggle-option\&quot; style=\&quot;width: 180px;\&quot;&gt;&quot; . esc_html__( 'Add Option', 'caldera-forms' ) . &quot;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;button type=\&quot;button\&quot; data-bulk=\&quot;#{{_id}}_bulkwrap\&quot; class=\&quot;button add-toggle-option\&quot; style=\&quot;width: 190px;\&quot;&gt;&quot; . esc_html__( 'Bulk Insert / Preset', 'caldera-forms' ) . &quot;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;div id=\&quot;{{_id}}_bulkwrap\&quot; style=\&quot;display:none; margin-top:10px;\&quot; class=\&quot;bulk-preset-panel\&quot;&gt;&nbsp;</div></li><li><div>      &lt;select data-bulk=\&quot;#{{_id}}_batch\&quot; class=\&quot;preset_options block-input\&quot; style=\&quot;margin-bottom:6px;\&quot;&gt;&nbsp;</div></li><li><div>      &lt;option value=\&quot;\&quot;&gt;&quot; . esc_html__( 'Select a preset', 'caldera-forms' ) . &quot;&lt;/option&gt;&nbsp;</div></li><li><div>      &quot; . $preset_options . &quot;&nbsp;</div></li><li><div>      &lt;/select&gt;        &nbsp;</div></li><li><div>      &lt;textarea style=\&quot;resize:vertical; height:200px;\&quot; class=\&quot;block-input\&quot; id=\&quot;{{_id}}_batch\&quot;&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>      &lt;p class=\&quot;description\&quot;&gt;&quot; . esc_html__( 'Single option per line. These replace the current list.', 'caldera-forms' ) . &quot;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;button type=\&quot;button\&quot; data-options=\&quot;#{{_id}}_batch\&quot; class=\&quot;button block-button add-toggle-option\&quot; style=\&quot;margin: 10px 0;\&quot;&gt;&quot; . esc_html__( 'Insert Options', 'caldera-forms' ) . &quot;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-full\&quot;&gt;&nbsp;</div></li><li><div>  &lt;label style=\&quot;padding: 10px;\&quot;&gt;&lt;input type=\&quot;radio\&quot; class=\&quot;toggle_set_default field-config\&quot; name=\&quot;{{_name}}[default]\&quot; value=\&quot;\&quot; {{#unless default}}checked=\&quot;checked\&quot;{{/unless}}&gt; &quot; . esc_html__( 'No Default', 'caldera-forms' ) . &quot;&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;label class=\&quot;pull-right\&quot; style=\&quot;padding: 10px;\&quot;&gt;&lt;input type=\&quot;checkbox\&quot; class=\&quot;toggle_show_values field-config\&quot; name=\&quot;{{_name}}[show_values]\&quot; value=\&quot;1\&quot; {{#if show_values}}checked=\&quot;checked\&quot;{{/if}}&gt; &quot; . esc_html__( 'Show Values', 'caldera-forms' ) . &quot;&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group-option-labels\&quot; {{#unless show_values}}style=\&quot;display:none;\&quot;{{/unless}}&gt;&nbsp;</div></li><li><div>      &lt;span style=\&quot;display: block; clear: left; padding-left: 65px; float: left; width: 142px;\&quot;&gt;&quot; . esc_html__( 'Value', 'caldera-forms' ) . &quot;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;span style=\&quot;float: left;\&quot;&gt;&quot; . esc_html__( 'Label', 'caldera-forms' ) . &quot;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-group caldera-config-group-full toggle-options caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>      {{#each option}}&nbsp;</div></li><li><div>      &lt;div class=\&quot;toggle_option_row\&quot;&gt;&nbsp;</div></li><li><div>          &lt;i class=\&quot;dashicons dashicons-sort\&quot; style=\&quot;padding: 4px 9px;\&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>          &lt;input type=\&quot;radio\&quot; class=\&quot;toggle_set_default field-config\&quot; name=\&quot;{{../_name}}[default]\&quot; value=\&quot;{{@key}}\&quot; {{#is ../default value=\&quot;@key\&quot;}}checked=\&quot;checked\&quot;{{/is}}&gt;&nbsp;</div></li><li><div>          &lt;span style=\&quot;position: relative; display: inline-block;\&quot;&gt;&lt;input{{#unless ../show_values}} style=\&quot;display:none;\&quot;{{/unless}} type=\&quot;text\&quot; class=\&quot;toggle_value_field field-config required magic-tag-enabled\&quot; name=\&quot;{{../_name}}[option][{{@key}}][value]\&quot; value=\&quot;{{#if ../show_values}}{{value}}{{else}}{{label}}{{/if}}\&quot; placeholder=\&quot;value\&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>          &lt;input{{#unless ../show_values}} style=\&quot;width:245px;\&quot;{{/unless}} type=\&quot;text\&quot; data-option=\&quot;{{@key}}\&quot; class=\&quot;toggle_label_field field-config required\&quot; name=\&quot;{{../_name}}[option][{{@key}}][label]\&quot; value=\&quot;{{label}}\&quot; placeholder=\&quot;label\&quot;&gt;&nbsp;</div></li><li><div>          &lt;button class=\&quot;button button-small toggle-remove-option\&quot; type=\&quot;button\&quot;&gt;&lt;i class=\&quot;icn-delete\&quot;&gt;&lt;/i&gt;&lt;/button&gt;        &nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      {{/each}}&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;div style=\&quot;display:none;\&quot; class=\&quot;notice error\&quot;&gt;&lt;p&gt;&quot; . esc_html__( 'Option values must be unique.', 'caldera-forms' ) . &quot;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$default_template = &quot;&nbsp;</div></li><li><div>&lt;div class=\&quot;caldera-config-group\&quot;&gt;&nbsp;</div></li><li><div>  &lt;label&gt;Default&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;div class=\&quot;caldera-config-field\&quot;&gt;&nbsp;</div></li><li><div>      &lt;input type=\&quot;text\&quot; class=\&quot;block-input field-config\&quot; name=\&quot;{{_name}}[default]\&quot; value=\&quot;{{default}}\&quot;&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// type list</span>&nbsp;</div></li><li><div>$field_type_list = array(&nbsp;</div></li><li><div>  esc_html__( 'Basic', 'caldera-forms' )       =&gt; array(), &nbsp;</div></li><li><div>  esc_html__( 'Select', 'caldera-forms' )         =&gt; array(), &nbsp;</div></li><li><div>  esc_html__( 'eCommerce', 'caldera-forms' )         =&gt; array(), &nbsp;</div></li><li><div>  esc_html__( 'File', 'caldera-forms' )      =&gt; array(), &nbsp;</div></li><li><div>  esc_html__( 'Content', 'caldera-forms' )      =&gt; array(), &nbsp;</div></li><li><div>  esc_html__( 'Special', 'caldera-forms' ) =&gt; array(), &nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Build Field Types List</span>&nbsp;</div></li><li><div>foreach($field_types as $field_slug=&gt;$config) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if(!file_exists($config['file'])) {&nbsp;</div></li><li><div>      if(!function_exists($config['file'])) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $categories = array();&nbsp;</div></li><li><div>  if(!empty($config['category'])) {&nbsp;</div></li><li><div>      $categories = explode(', ', $config['category']);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  foreach((array) $categories as $category) {&nbsp;</div></li><li><div>      if( !isset( $field_type_list[trim($category)] ) ) {&nbsp;</div></li><li><div>          $category = esc_html__( 'Special', 'caldera-forms' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $field_type_list[trim($category)][$field_slug] = $config;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>  do_action('caldera_forms_field_settings_template', $config, $field_slug );&nbsp;</div></li><li><div>  if(!empty($config['setup']['template'])) {&nbsp;</div></li><li><div>      if(file_exists( $config['setup']['template'] )) {&nbsp;</div></li><li><div>          <span class="comment">// create config template block                            </span>&nbsp;</div></li><li><div>          include $config['setup']['template'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $field_type_templates[sanitize_key( $field_slug ) . &quot;_tmpl&quot;] = ob_get_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if(isset($config['options'])) {&nbsp;</div></li><li><div>      if(!isset($field_type_templates[sanitize_key( $field_slug ) . &quot;_tmpl&quot;])) {&nbsp;</div></li><li><div>          $field_type_templates[sanitize_key( $field_slug ) . &quot;_tmpl&quot;] = null;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// has configurable options - include template</span>&nbsp;</div></li><li><div>      $field_type_templates[sanitize_key( $field_slug ) . &quot;_tmpl&quot;] .= $field_options_template;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  if(!empty($config['setup']['default'])) {&nbsp;</div></li><li><div>      $field_type_defaults[] = &quot;fieldtype_defaults.&quot; . sanitize_key( $field_slug ) . &quot;_cfg = &quot; . json_encode($config['setup']['default']) .&quot;;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if(!empty($config['setup']['not_supported'])) {&nbsp;</div></li><li><div>      $field_type_defaults[] = &quot;fieldtype_defaults.&quot; . sanitize_key( $field_slug ) . &quot;_nosupport = &quot; . json_encode($config['setup']['not_supported']) .&quot;;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if(empty($config['setup']['preview']) || !file_exists( $config['setup']['preview'] )) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// if preview is a function</span>&nbsp;</div></li><li><div>      if(!empty($config['setup']['preview']) && function_exists($config['setup']['preview'])) {&nbsp;</div></li><li><div>          $func = $config['setup']['preview'];&nbsp;</div></li><li><div>          $field_type_templates['preview-' . sanitize_key( $field_slug ) . &quot;_tmpl&quot;] = $func($config);&nbsp;</div></li><li><div>      }else{&nbsp;</div></li><li><div>          <span class="comment">// simulate a preview with actual field file</span>&nbsp;</div></li><li><div>          $field = array(&nbsp;</div></li><li><div>              'label' =&gt;    '{{label}}', &nbsp;</div></li><li><div>              'slug' =&gt;    '{{slug}}', &nbsp;</div></li><li><div>              'type' =&gt;    '{{type}}', &nbsp;</div></li><li><div>              'caption' =&gt; '{{caption}}', &nbsp;</div></li><li><div>              'config' =&gt; (!empty($config['setup']['default']) ? $config['setup']['default'] : array() )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $field_name = $field['slug'];&nbsp;</div></li><li><div>          $field_id = 'preview_fld_' . $field['slug'];&nbsp;</div></li><li><div>          $wrapper_before = &quot;&lt;div class=\&quot;preview-caldera-config-group\&quot;&gt;&quot;;&nbsp;</div></li><li><div>          $field_before = &quot;&lt;div class=\&quot;preview-caldera-config-field\&quot;&gt;&quot;;&nbsp;</div></li><li><div>          $field_after = '&lt;/div&gt;';&nbsp;</div></li><li><div>          $wrapper_after = '&lt;/div&gt;';&nbsp;</div></li><li><div>          $field_label = &quot;&lt;label for=\&quot;&quot; . $field_id . &quot;\&quot; class=\&quot;control-label\&quot;&gt;&quot; . $field['label'] . &quot;&lt;/label&gt;\r\n&quot;;&nbsp;</div></li><li><div>          $field_required = &quot;&quot;;&nbsp;</div></li><li><div>          $field_placeholder = 'placeholder=&quot;' . $field['label'] .'&quot;';&nbsp;</div></li><li><div>          $field_caption = &quot;&lt;span class=\&quot;help-block\&quot;&gt;&quot; . $field['caption'] . &quot;&lt;/span&gt;\r\n&quot;;&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">// blank default</span></span></span>&nbsp;</div></li><li><div>          $field_value = null;&nbsp;</div></li><li><div>          $field_class = &quot;preview-field-config&quot;;&nbsp;</div></li><li><div>          if( file_exists( $config[ 'file' ] ) ) {&nbsp;</div></li><li><div>              $file = $config[ 'file' ];&nbsp;</div></li><li><div>          }else{&nbsp;</div></li><li><div>              $file = CFCORE_PATH . 'fields/generic-input';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          ob_start();&nbsp;</div></li><li><div>          include $file;&nbsp;</div></li><li><div>          $field_type_templates['preview-' . sanitize_key( $field_slug ) . &quot;_tmpl&quot;] = ob_get_clean();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }else{&nbsp;</div></li><li><div>      ob_start();&nbsp;</div></li><li><div>      include $config['setup']['preview'];&nbsp;</div></li><li><div>      $field_type_templates['preview-' . sanitize_key( $field_slug ) . &quot;_tmpl&quot;] = ob_get_clean();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function field_wrapper_template($id = '{{id}}', $label = '{{label}}', $slug = '{{slug}}', $caption = '{{caption}}', $hide_label = '{{hide_label}}', $required = '{{required}}', $entry_list = '{{entry_list}}', $type = null, $config_str = '{{json config}}', $conditions_str = '{&quot;type&quot; : &quot;&quot;}') {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if(is_array($config_str)) {&nbsp;</div></li><li><div>      $config = $config_str;&nbsp;</div></li><li><div>      $config_str = json_encode( $config_str );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }else{&nbsp;</div></li><li><div>      $config = json_decode($config_str, true);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $condition_type = '';&nbsp;</div></li><li><div>  if(!empty($conditions_str)) {&nbsp;</div></li><li><div>      $conditions = json_decode($conditions_str, true);&nbsp;</div></li><li><div>      if(!empty($conditions['type'])) {&nbsp;</div></li><li><div>          $condition_type = $conditions['type'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if(!empty($conditions['group'])) {&nbsp;</div></li><li><div>          $groups = array();&nbsp;</div></li><li><div>          foreach ($conditions['group'] as $groupid =&gt; $group) {&nbsp;</div></li><li><div>              $group_tmp = array(&nbsp;</div></li><li><div>                  'id' =&gt; $groupid, &nbsp;</div></li><li><div>                  'type' =&gt; 'fields', &nbsp;</div></li><li><div>                  'lines' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              if(!empty($group)) {&nbsp;</div></li><li><div>                  foreach($group as $line_id =&gt; $line) {&nbsp;</div></li><li><div>                      $group_line = $line;&nbsp;</div></li><li><div>                      $group_line['id'] = $line_id;&nbsp;</div></li><li><div>                      $group_tmp['lines'][] = $group_line;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $groups[] = $group_tmp;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $conditions['group'] = $groups;&nbsp;</div></li><li><div>          $conditions_str = json_encode($conditions);&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }    &nbsp;</div></li><li><div>  <span class="comment">//dump($conditions, 0);</span>&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;caldera-editor-field-config-wrapper caldera-editor-config-wrapper ajax-trigger&quot; &nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  data-request=&quot;setup_field_type&quot; &nbsp;</div></li><li><div>  data-event=&quot;field.drop&quot;&nbsp;</div></li><li><div>  data-load-class=&quot;none&quot;&nbsp;</div></li><li><div>  data-modal=&quot;field_setup&quot;&nbsp;</div></li><li><div>  data-modal-title=&quot;&lt;?php echo esc_html__( 'Fields', 'caldera-forms' ); ?&gt;&quot;&nbsp;</div></li><li><div>  data-template=&quot;#form-fields-selector-tmpl&quot;&nbsp;</div></li><li><div>  data-modal-width=&quot;700&quot;&nbsp;</div></li><li><div>  data-modal-height=&quot;680&quot;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  id=&quot;&lt;?php echo $id; ?&gt;&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;h3 class=&quot;caldera-editor-field-title&quot;&gt;&lt;?php echo $label; ?&gt;&nbsp;&lt;/h3&gt;        &nbsp;</div></li><li><div>      &lt;input type=&quot;hidden&quot; class=&quot;field-config&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][ID]&quot; value=&quot;&lt;?php echo $id; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>      &lt;div id=&quot;&lt;?php echo $id; ?&gt;_settings_pane&quot; class=&quot;wrapper-instance-pane&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_type&quot;&gt;&lt;?php echo esc_html__( 'Field Type', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;select class=&quot;block-input caldera-select-field-type&quot; data-field=&quot;&lt;?php echo $id; ?&gt;&quot; id=&quot;&lt;?php echo $id; ?&gt;_type&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][type]&quot; data-type=&quot;&lt;?php echo $type; ?&gt;&quot;&gt;                    &nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      echo build_field_types($type);&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                  &lt;/select&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_fid&quot;&gt;&lt;?php echo esc_html__( 'ID', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;block-input field-id&quot; id=&quot;&lt;?php echo $id; ?&gt;_fid&quot; value=&quot;&lt;?php echo $id; ?&gt;&quot; readonly=&quot;readonly&quot;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_lable&quot;&gt;&lt;?php echo esc_html__( 'Name', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;block-input field-config field-label required&quot; id=&quot;&lt;?php echo $id; ?&gt;_lable&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][label]&quot; value=&quot;&lt;?php echo sanitize_text_field( $label ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group hide-label-field&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_hide_label&quot;&gt;&lt;?php echo esc_html__( 'Hide Label', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;checkbox&quot; class=&quot;field-config field-checkbox&quot; id=&quot;&lt;?php echo $id; ?&gt;_hide_label&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][hide_label]&quot; value=&quot;1&quot; &lt;?php if($hide_label === 1) { echo 'checked=&quot;checked&quot;'; }else{?&gt;{{#if hide_label}}checked=&quot;checked&quot;{{/if}}&lt;?php } ?&gt;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_slug&quot;&gt;&lt;?php echo esc_html__( 'Slug', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;block-input field-config field-slug required&quot; id=&quot;&lt;?php echo $id; ?&gt;_slug&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][slug]&quot; value=&quot;&lt;?php echo $slug; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_fcond&quot;&gt;&lt;?php echo esc_html__( 'Condition', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;select id=&quot;field-condition-type-&lt;?php echo $id; ?&gt;&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][conditions][type]&quot; data-id=&quot;&lt;?php echo $id; ?&gt;&quot; class=&quot;caldera-conditionals-usetype block-input&quot;&gt;&nbsp;</div></li><li><div>                      &lt;option&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;optgroup class=&quot;cf-conditional-selector&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php if( !in_array( $condition_type, array( 'show', 'hide', 'disable' ) ) ) { ?&gt;&lt;option value=&quot;&lt;?php echo $condition_type; ?&gt;&quot; selected=&quot;selected&quot;&gt;&lt;?php echo esc_html__( 'Disable', 'caldera-forms' ); ?&gt;&lt;/option&gt;&lt;?php } ?&gt;&lt;/optgroup&gt;&nbsp;</div></li><li><div>                      &lt;/optgroup&gt;&nbsp;</div></li><li><div>                  &lt;/select&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;            &nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group required-field&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_required&quot;&gt;&lt;?php echo esc_html__( 'Required', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;checkbox&quot; class=&quot;field-config field-required field-checkbox&quot; id=&quot;&lt;?php echo $id; ?&gt;_required&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][required]&quot; value=&quot;1&quot; &lt;?php if($required === 1) { echo 'checked=&quot;checked&quot;'; }else{?&gt;{{#if required}}checked=&quot;checked&quot;{{/if}}&lt;?php } ?&gt;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group caption-field&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_caption&quot;&gt;&lt;?php echo esc_html__( 'Description', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; class=&quot;block-input field-config&quot; id=&quot;&lt;?php echo $id; ?&gt;_caption&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;]&quot; value=&quot;&lt;?php echo esc_html( $caption ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-group entrylist-field&quot;&gt;&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo $id; ?&gt;_entry_list&quot;&gt;&lt;?php echo esc_html__( 'Show in Entry List', 'caldera-forms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;checkbox&quot; class=&quot;field-config field-checkbox&quot; id=&quot;&lt;?php echo $id; ?&gt;_entry_list&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][entry_list]&quot; value=&quot;1&quot; &lt;?php if($entry_list === 1) { echo 'checked=&quot;checked&quot;'; }else{?&gt;{{#if entry_list}}checked=&quot;checked&quot;{{/if}}&lt;?php } ?&gt;&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-config-field-setup&quot;&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;hidden&quot; class=&quot;field_config_string block-input&quot; value=&quot;&lt;?php echo htmlentities( $config_str ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;hidden&quot; class=&quot;field_conditions_config_string block-input ajax-trigger&quot; data-event=&quot;none&quot; data-autoload=&quot;true&quot; data-request=&quot;build_conditions_config&quot; data-template=&quot;#conditional-group-tmpl&quot; data-id=&quot;&lt;?php echo $id; ?&gt;&quot; data-target=&quot;#&lt;?php echo $id; ?&gt;_conditional_wrap&quot; data-type=&quot;fields&quot; data-callback=&quot;rebuild_field_binding&quot; value=&quot;&lt;?php echo htmlentities( $conditions_str ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>          &lt;br&gt;&nbsp;</div></li><li><div>          &lt;button class=&quot;button delete-field block-button&quot; data-confirm=&quot;&lt;?php echo esc_html__( 'Are you sure you want to remove this field?. \'Cancel\' to stop. \'OK\' to delete', 'caldera-forms' ); ?&gt;&quot; type=&quot;button&quot;&gt;&lt;?php echo esc_html__( 'Delete Field', 'caldera-forms' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function build_field_types($default = null) {&nbsp;</div></li><li><div>  global $field_type_list;&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $out = '';&nbsp;</div></li><li><div>  if(null === $default) {&nbsp;</div></li><li><div>      $out .= '&lt;option&gt;&lt;/option&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach($field_type_list as $category=&gt;$fields) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $out .= &quot;&lt;optgroup label=\&quot; &quot;. $category . &quot;\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>      foreach ($fields as $field =&gt; $config) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $sel = &quot;&quot;;&nbsp;</div></li><li><div>          if( $default === null ) {&nbsp;</div></li><li><div>              $sel = &quot;{{#is type value=\&quot;&quot; . $field . &quot;\&quot;}}selected=\&quot;selected\&quot;{{/is}}&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if($default == $field) {&nbsp;</div></li><li><div>              $sel = 'selected=&quot;selected&quot;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $out .= &quot;&lt;option value=\&quot;&quot;. $field . &quot;\&quot; &quot;. $sel .&quot;&gt;&quot; . $config['field'] . &quot;&lt;/option&gt;\r\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $out .= &quot;&lt;/optgroup&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $out;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function field_line_template($id = '{{id}}', $label = '{{label}}', $group = '{{group}}') {&nbsp;</div></li><li><div>  &nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;li data-field=&quot;&lt;?php echo $id; ?&gt;&quot; class=&quot;caldera-field-line&quot;&gt;&nbsp;</div></li><li><div>      &lt;a href=&quot;#&lt;?php echo $id; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>          &lt;i class=&quot;icn-right pull-right&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>          &lt;i class=&quot;icn-field&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>          &lt;?php echo htmlentities( $label ); ?&gt;&nbsp;</div></li><li><div>      &lt;/a&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;hidden&quot; class=&quot;caldera-config-field-group&quot; value=&quot;&lt;?php echo $group; ?&gt;&quot; name=&quot;config[fields][&lt;?php echo $id; ?&gt;][group]&quot; autocomplete=&quot;off&quot;&gt;&nbsp;</div></li><li><div>  &lt;/li&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return ob_get_clean();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Navigation</span>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;caldera-editor-header&quot;&gt;&nbsp;</div></li><li><div>  &lt;ul class=&quot;caldera-editor-header-nav&quot;&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;caldera-editor-logo&quot;&gt;&nbsp;</div></li><li><div>          &lt;span class=&quot;caldera-forms-name&quot;&gt;Caldera Forms&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>      &lt;li class=&quot;caldera-element-type-label&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php echo $element['name']; ?&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>      &lt;li&gt;&nbsp;</div></li><li><div>          &lt;a href=&quot;#settings-panel&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php esc_html_e( 'Form Settings', 'caldera-forms' ); ?&gt;&nbsp;</div></li><li><div>          &lt;/a&gt;&nbsp;</div></li><li><div>      &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;updated_notice_box&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php esc_html_e( 'Updated Successfully', 'caldera-forms' ); ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;button class=&quot;button button-primary caldera-header-save-button&quot; data-active-class=&quot;none&quot; data-load-element=&quot;#save_indicator&quot; type=&quot;button&quot; disabled=&quot;disabled&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php esc_html_e( 'Save Form', 'caldera-forms' ); ?&gt;&nbsp;</div></li><li><div>      &lt;span id=&quot;save_indicator&quot; class=&quot;spinner&quot; style=&quot;position: absolute; right: -33px;&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>  &lt;/button&gt;&nbsp;</div></li><li><div>  &lt;a class=&quot;button caldera-header-preview-button&quot; target=&quot;_blank&quot; href=&quot;&lt;?php echo esc_url( add_query_arg( 'cf_preview', $element[ 'ID' ], get_home_url() ) ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php esc_html_e( 'Preview Form', 'caldera-forms' ); ?&gt;&nbsp;</div></li><li><div>  &lt;/a&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  if ( !empty( $element['mailer']['preview_email'] ) ) {&nbsp;</div></li><li><div>      $has_email_preview = 'aria-hidden=&quot;false&quot; ';&nbsp;</div></li><li><div>  }else{&nbsp;</div></li><li><div>      $has_email_preview = 'aria-hidden=&quot;true&quot; style=&quot;display:none;visibility:hidden;&quot;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;a class=&quot;button caldera-header-email-preview-button&quot; target=&quot;_blank&quot; href=&quot;&lt;?php echo esc_url( add_query_arg( array(&nbsp;</div></li><li><div>          'cf-email-preview' =&gt; wp_create_nonce( $element[ 'ID' ] ), &nbsp;</div></li><li><div>          'cf-email-preview-form' =&gt; $element[ 'ID' ]&nbsp;</div></li><li><div> ), get_home_url() ) ); ?&gt;&quot; &lt;?php echo $has_email_preview; ?&gt;&gt;&nbsp;</div></li><li><div>      &lt;?php esc_html_e( 'Preview Last Email', 'caldera-forms' ); ?&gt;&nbsp;</div></li><li><div>  &lt;/a&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php include CFCORE_PATH  . 'ui/panels/form-settings.php'; ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;caldera-editor-header caldera-editor-subnav&quot;&gt;&nbsp;</div></li><li><div>      &lt;ul class=&quot;caldera-editor-header-nav&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>      <span class="comment">// PANELS LOWER NAV</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach($panel_extensions as $panel_slug=&gt;$panel) {&nbsp;</div></li><li><div>          if(empty($panel['tabs'])) {&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  <span class="comment">// BUILD ELEMENT SETUP TABS</span>&nbsp;</div></li><li><div>                  if(!empty($panel['tabs'])) {&nbsp;</div></li><li><div>                      <span class="comment">// PANEL BASED TABS</span>&nbsp;</div></li><li><div>                      foreach($panel['tabs'] as $group_slug=&gt;$tab_setup) {&nbsp;</div></li><li><div>                          if($tab_setup['location'] !== 'lower') {&nbsp;</div></li><li><div>                              continue;&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          $active = null;&nbsp;</div></li><li><div>                          if(!empty($tab_setup['active'])) {&nbsp;</div></li><li><div>                              $active = &quot; class=\&quot;active\&quot;&quot;;&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                          echo &quot;&lt;li&quot;.$active.&quot; id=\&quot;tab_&quot;.$group_slug.&quot;\&quot;&gt;&lt;a href=\&quot;#&quot; . $group_slug . &quot;-config-panel\&quot;&gt;&quot; . $tab_setup['name'] . &quot;&lt;/a&gt;&lt;/li&gt;\r\n&quot;;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// CODE BASED TABS</span>&nbsp;</div></li><li><div>                      if(!empty($panel['tabs']['code'])) {&nbsp;</div></li><li><div>                          foreach($panel['tabs']['code'] as $code_slug=&gt;$tab_setup) {&nbsp;</div></li><li><div>                              $active = null;&nbsp;</div></li><li><div>                              if(!empty($tab_setup['active'])) {&nbsp;</div></li><li><div>                                  $active = &quot; class=\&quot;active\&quot;&quot;;&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                              echo &quot;&lt;li&quot;.$active.&quot;&gt;&lt;a href=\&quot;#&quot; . $code_slug . &quot;-code-panel\&quot; data-editor=\&quot;&quot; . $code_slug . &quot;-editor\&quot;&gt;&quot; . $tab_setup['name'] . &quot;&lt;/a&gt;&lt;/li&gt;\r\n&quot;;&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      ?&gt;&nbsp;</div></li><li><div>      &lt;/ul&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// PANEL WRAPPERS & RENDER</span>&nbsp;</div></li><li><div>$repeatable_templates = array();&nbsp;</div></li><li><div>foreach($panel_extensions as $panel) {&nbsp;</div></li><li><div>  if(empty($panel['tabs'])) {&nbsp;</div></li><li><div>      continue;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach($panel['tabs'] as $panel_slug=&gt;$tab_setup) {&nbsp;</div></li><li><div>      $active = &quot;  style=\&quot;display:none;\&quot;&quot;;&nbsp;</div></li><li><div>      if(!empty($tab_setup['active'])) {&nbsp;</div></li><li><div>          $active = null;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      echo &quot;&lt;div id=\&quot;&quot; . $panel_slug . &quot;-config-panel\&quot; class=\&quot;caldera-editor-body caldera-config-editor-panel &quot; . ( !empty($tab_setup['side_panel']) ? &quot;caldera-config-has-side&quot; : &quot;&quot; ) . &quot;\&quot;&quot;.$active.&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>          if( !empty($tab_setup['side_panel']) ) {&nbsp;</div></li><li><div>              echo &quot;&lt;div id=\&quot;&quot; . $panel_slug . &quot;-config-panel-main\&quot; class=\&quot;caldera-config-editor-main-panel\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo '&lt;h3&gt;'.$tab_setup['label'];&nbsp;</div></li><li><div>              if( !empty( $tab_setup['repeat'] ) ) {&nbsp;</div></li><li><div>                  <span class="comment">// add a repeater button</span>&nbsp;</div></li><li><div>                  echo &quot; &lt;a href=\&quot;#&quot; . $panel_slug . &quot;_tag\&quot; class=\&quot;add-new-h2 caldera-add-group\&quot; data-group=\&quot;&quot; . $panel_slug . &quot;\&quot;&gt;&quot; . esc_html__( 'Add New', 'caldera-forms' ) . &quot;&lt;/a&gt;\r\n&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              <span class="comment">// ADD ACTIONS</span>&nbsp;</div></li><li><div>              if(!empty($tab_setup['actions'])) {&nbsp;</div></li><li><div>                  foreach($tab_setup['actions'] as $action) {&nbsp;</div></li><li><div>                      include $action;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          echo '&lt;/h3&gt;';&nbsp;</div></li><li><div>          <span class="comment">// BUILD CONFIG FIELDS</span>&nbsp;</div></li><li><div>          if(!empty($tab_setup['fields'])) {&nbsp;</div></li><li><div>              <span class="comment">// group index for loops</span>&nbsp;</div></li><li><div>              $depth = 1;&nbsp;</div></li><li><div>              if(isset($element['settings'][$panel_slug])) {&nbsp;</div></li><li><div>                  <span class="comment">// find max depth</span>&nbsp;</div></li><li><div>                  foreach($element['settings'][$panel_slug] as &$field_vars) {&nbsp;</div></li><li><div>                      if(count($field_vars) &gt; $depth) {&nbsp;</div></li><li><div>                          $depth = count($field_vars);&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              for($group_index = 0; $group_index &lt; $depth; $group_index++) {&nbsp;</div></li><li><div>                  &nbsp;</div></li><li><div>                  if( !empty( $tab_setup['repeat'] ) ) {&nbsp;</div></li><li><div>                      echo &quot;&lt;div class=\&quot;caldera-config-editor-panel-group\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  foreach($tab_setup['fields'] as $field_slug=&gt;&$field) {&nbsp;</div></li><li><div>                      $wrapper_before = &quot;&lt;div class=\&quot;caldera-config-group\&quot;&gt;&quot;;&nbsp;</div></li><li><div>                      $field_before = &quot;&lt;div class=\&quot;caldera-config-field\&quot;&gt;&quot;;&nbsp;</div></li><li><div>                      $field_after = '&lt;/div&gt;';&nbsp;</div></li><li><div>                      $wrapper_after = '&lt;/div&gt;';&nbsp;</div></li><li><div>                      $field_name = 'config[settings][' . $panel_slug . '][' . $field_slug . ']';&nbsp;</div></li><li><div>                      $field_base_id = $field_id = $panel_slug. '_' . $field_slug . '_' . $group_index;                        &nbsp;</div></li><li><div>                      $field_label = &quot;&lt;label for=\&quot;&quot; . $field_id . &quot;\&quot;&gt;&quot; . $field['label'] . &quot;&lt;/label&gt;\r\n&quot;;&nbsp;</div></li><li><div>                      $field_placeholder = &quot;&quot;;&nbsp;</div></li><li><div>                      $field_required = &quot;&quot;;&nbsp;</div></li><li><div>                      if(!empty($field['hide_label'])) {&nbsp;</div></li><li><div>                          $field_label = &quot;&quot;;&nbsp;</div></li><li><div>                          $field_placeholder = 'placeholder=&quot;' . htmlentities( $field['label'] ) .'&quot;';&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $field_caption = null;&nbsp;</div></li><li><div>                      if(!empty($field['caption'])) {&nbsp;</div></li><li><div>                          $field_caption = &quot;&lt;p class=\&quot;description\&quot;&gt;&quot; . $field['caption'] . &quot;&lt;/p&gt;\r\n&quot;;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment"><span class="comment">// blank default</span></span></span>&nbsp;</div></li><li><div>                      $field_value = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if(isset($field['config']['default'])) {&nbsp;</div></li><li><div>                          $field_value = $field['config']['default'];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      if(isset($element['settings'][$panel_slug][$field_slug])) {&nbsp;</div></li><li><div>                          $field_value = $element['settings'][$panel_slug][$field_slug];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $field_class = &quot;field-config&quot;;&nbsp;</div></li><li><div>                      if(!empty($field['required'])) {&nbsp;</div></li><li><div>                          $field_class .= &quot; required&quot;;                            &nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      include $field_types[$field['type']]['file'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  if( !empty( $tab_setup['repeat'] ) ) {&nbsp;</div></li><li><div>                      echo &quot;&lt;a href=\&quot;#remove_&quot; . $panel_slug . &quot;\&quot; class=\&quot;caldera-config-group-remove\&quot;&gt;&quot; . esc_html__( 'Remove', 'caldera-forms' ) . &quot;&lt;/a&gt;\r\n&quot;;&nbsp;</div></li><li><div>                      echo &quot;&lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">/// CHECK GROUP IS REPEATABLE ADN ADD A TEMPLATE IF IT IS</span>&nbsp;</div></li><li><div>              if( !empty( $tab_setup['repeat'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $field_template = &quot;&lt;script type=\&quot;text/html\&quot; id=\&quot;&quot; . $panel_slug . &quot;_panel_tmpl\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>                  $field_template .= &quot;    &lt;div class=\&quot;caldera-config-editor-panel-group\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  foreach($tab_setup['fields'] as $field_slug=&gt;&$field) {&nbsp;</div></li><li><div>                      &nbsp;</div></li><li><div>                      $field_name = 'config[settings][' . $panel_slug . '][' . $field_slug . '][]';&nbsp;</div></li><li><div>                      $field_id = $panel_slug. '_' . $field_slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment"><span class="comment">// blank default</span></span></span>&nbsp;</div></li><li><div>                      $field_value = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if(isset($field['config']['default'])) {&nbsp;</div></li><li><div>                          $field_value = $field['config']['default'];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $field_template .= &quot;    &lt;div class=\&quot;caldera-config-group\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>                          $field_template .= &quot;        &lt;label for=\&quot;&quot; . $field_id . &quot;\&quot;&gt;&quot; . $field['label'] . &quot;&lt;/label&gt;\r\n&quot;;&nbsp;</div></li><li><div>                          $field_template .= &quot;        &lt;div class=\&quot;caldera-config-field\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>                              ob_start();&nbsp;</div></li><li><div>                              include $field_types[$field['type']]['file'];&nbsp;</div></li><li><div>                              $field_template .= ob_get_clean();&nbsp;</div></li><li><div>                          $field_template .= &quot;        &lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>                      $field_template .= &quot;    &lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  $field_template .= &quot;    &lt;a href=\&quot;#remove-group\&quot; class=\&quot;caldera-config-group-remove\&quot;&gt;&quot; . esc_html__( 'Remove', 'caldera-forms' ) . &quot;&lt;/a&gt;\r\n&quot;;&nbsp;</div></li><li><div>                  $field_template .= &quot;    &lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>                  $field_template .= &quot;&lt;/script&gt;\r\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $repeatable_templates[] = $field_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          }elseif(!empty($tab_setup['canvas'])) {&nbsp;</div></li><li><div>              include $tab_setup['canvas'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if(!empty($tab_setup['side_panel'])) {&nbsp;</div></li><li><div>              echo &quot;&lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>              echo &quot;&lt;div id=\&quot;&quot; . $panel_slug . &quot;-config-panel-side\&quot; class=\&quot;caldera-config-editor-side-panel\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  include $tab_setup['side_panel'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              echo &quot;&lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo &quot;&lt;/div&gt;\r\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  echo &quot;&lt;a name=\&quot;&quot; . $panel_slug . &quot;_tag\&quot;&gt;&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// PROCESSORS</span>&nbsp;</div></li><li><div>do_action('caldera_forms_edit_end', $element);&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;field-options-cofnig-tmpl&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  echo $field_options_template;&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;form-fields-selector-tmpl&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;modal-tab-panel&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      $sorted_field_types = array(&nbsp;</div></li><li><div>          __( 'Basic', 'caldera-forms' ) =&gt; '', &nbsp;</div></li><li><div>          __( 'Select', 'caldera-forms' ) =&gt; '', &nbsp;</div></li><li><div>          __( 'File', 'caldera-forms' ) =&gt; '', &nbsp;</div></li><li><div>          __( 'Content', 'caldera-forms' ) =&gt; '', &nbsp;</div></li><li><div>          __( 'eCommerce', 'caldera-forms' )  =&gt; '', &nbsp;</div></li><li><div>          __( 'Special', 'caldera-forms' ) =&gt; '', &nbsp;</div></li><li><div>          &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if( defined( 'CFCORE_SHOW_DISCONTINUED_FIELDS' ) && CFCORE_SHOW_DISCONTINUED_FIELDS ) {&nbsp;</div></li><li><div>          $sorted_field_types[ __( 'Discontinued', 'caldera-forms' ) ] = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach($field_types as $field_slug=&gt;$config) {&nbsp;</div></li><li><div>          $cats[] = 'General';&nbsp;</div></li><li><div>          if(!empty($config['category'])) {&nbsp;</div></li><li><div>              $cats = explode(', ', $config['category']);&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $svg = false;&nbsp;</div></li><li><div>          $icon = CFCORE_URL . &quot;assets/images/field.png&quot;;&nbsp;</div></li><li><div>          if(!empty($config['icon'])) {&nbsp;</div></li><li><div>              $icon = $config['icon'];&nbsp;</div></li><li><div>              if( false !== strpos( $icon, '.svg' ) ) {&nbsp;</div></li><li><div>                  $svg = true;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          foreach($cats as $cat) {&nbsp;</div></li><li><div>              $cat = trim($cat);&nbsp;</div></li><li><div>              if(  __( 'Discontinued', 'caldera-forms' ) == $cat ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $template = '&lt;div class=&quot;form-modal-add-line&quot;&gt;';&nbsp;</div></li><li><div>                  $template .= '&lt;button type=&quot;button&quot; class=&quot;button info-button set-current-field&quot; data-field=&quot;{{id}}&quot; data-type=&quot;' . $field_slug . '&quot;&gt;' . esc_html__( 'Set Field', 'caldera-forms' ) . '&lt;/button&gt;';&nbsp;</div></li><li><div>                  $class = 'form-modal-lgo';&nbsp;</div></li><li><div>                  if( $svg ) {&nbsp;</div></li><li><div>                      $class .= ' form-modal-lgo-svg';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  $template .= '&lt;img src=&quot;'. $icon .'&quot; class=&quot;' . $class . '&quot; width=&quot;45&quot; height=&quot;45&quot;&gt;';&nbsp;</div></li><li><div>                  $template .= '&lt;strong&gt;' . $config['field'] . '&lt;/strong&gt;';&nbsp;</div></li><li><div>                  $template .= '&lt;p class=&quot;description&quot;&gt;' . (!empty($config['description']) ? esc_html__( $config[ 'description' ] ) : esc_html__( 'No description given', 'caldera-forms' ) ) . '&lt;/p&gt;';&nbsp;</div></li><li><div>              $template .= '&lt;/div&gt;';&nbsp;</div></li><li><div>              if(!isset($sorted_field_types[$cat])) {&nbsp;</div></li><li><div>                  $cat = __( 'Special', 'caldera-forms' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $sorted_field_types[$cat] .= $template;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $cat_show = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach($sorted_field_types as $cat=&gt;$template) {&nbsp;</div></li><li><div>          if(!empty($cat_show)) {&nbsp;</div></li><li><div>              $cat_show = 'style=&quot;display: none;&quot;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          echo '&lt;div id=&quot;modal-category-'. sanitize_key( $cat ) .'&quot; data-tab=&quot;' . esc_attr( $cat ) . '&quot; class=&quot;tab-detail-panel&quot; '.$cat_show.'&gt;';&nbsp;</div></li><li><div>              echo $template;&nbsp;</div></li><li><div>          echo '&lt;/div&gt;';&nbsp;</div></li><li><div>          $cat_show = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;caldera_field_config_wrapper_templ&quot;&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  echo field_wrapper_template();&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;field-option-row-tmpl&quot;&gt;&nbsp;</div></li><li><div>  {{#each option}}&nbsp;</div></li><li><div>  &lt;div class=&quot;toggle_option_row&quot;&gt;&nbsp;</div></li><li><div>      &lt;i class=&quot;dashicons dashicons-sort&quot; style=&quot;padding: 4px 9px;&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;radio&quot; class=&quot;toggle_set_default field-config&quot; name=&quot;{{../_name}}[default]&quot; value=&quot;{{@key}}&quot; {{#is ../default value=&quot;@key&quot;}}checked=&quot;checked&quot;{{/is}}&gt;&nbsp;</div></li><li><div>      &lt;span style=&quot;position: relative; display: inline-block;&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;toggle_value_field field-config magic-tag-enabled&quot; name=&quot;{{../_name}}[option][{{@key}}][value]&quot; value=&quot;{{value}}&quot; placeholder=&quot;value&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;text&quot; class=&quot;toggle_label_field field-config&quot; data-option=&quot;{{@key}}&quot;  name=&quot;{{../_name}}[option][{{@key}}][label]&quot; value=&quot;{{label}}&quot; placeholder=&quot;label&quot;&gt;&nbsp;</div></li><li><div>      &lt;button class=&quot;button button-small toggle-remove-option&quot; type=&quot;button&quot;&gt;&lt;i class=&quot;icn-delete&quot;&gt;&lt;/i&gt;&lt;/button&gt;        &nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  {{/each}}&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;noconfig_field_templ&quot; class=&quot;cf-editor-template&quot;&gt;&nbsp;</div></li><li><div>&lt;div class=&quot;caldera-config-group&quot;&gt;&nbsp;</div></li><li><div>  &lt;label&gt;Default&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;caldera-config-field&quot;&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;text&quot; class=&quot;block-input field-config&quot; name=&quot;{{_name}}[default]&quot; value=&quot;{{default}}&quot;&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/div&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;conditional-group-tmpl&quot;&gt;    &nbsp;</div></li><li><div>  {{#each group}}&nbsp;</div></li><li><div>      &lt;div class=&quot;caldera-condition-group&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-condition-group-label&quot;&gt;&lt;?php echo esc_html__( 'or', 'caldera-forms' ); ?&gt;&lt;/div&gt;            &nbsp;</div></li><li><div>          &lt;div class=&quot;caldera-condition-lines&quot; id=&quot;{{id}}_conditions_lines&quot;&gt;&nbsp;</div></li><li><div>              {{#each lines}}&nbsp;</div></li><li><div>              &lt;div class=&quot;caldera-condition-line&quot;&gt;&nbsp;</div></li><li><div>                  if &nbsp;</div></li><li><div>                  &lt;select name=&quot;config[{{../type}}][{{../../id}}][conditions][group][{{../id}}][{{id}}][field]&quot; data-condition=&quot;{{../type}}&quot; class=&quot;caldera-field-bind caldera-conditional-field-set&quot; data-id=&quot;{{../../id}}&quot; {{#if field}}data-default=&quot;{{field}}&quot;{{/if}} data-line=&quot;{{id}}&quot; data-row=&quot;{{../id}}&quot; data-all=&quot;true&quot; style=&quot;max-width:120px;&quot;&gt;&nbsp;</div></li><li><div>                      {{#if field}}&lt;option value=&quot;{{field}}&quot; class=&quot;bound-field&quot; selected=&quot;selected&quot;&gt;&lt;/option&gt;{{else}}&lt;option value=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/option&gt;{{/if}}&nbsp;</div></li><li><div>                  &lt;/select&gt;&nbsp;</div></li><li><div>                  &lt;select class=&quot;compare-type&quot; name=&quot;config[{{../type}}][{{../../id}}][conditions][group][{{../id}}][{{id}}][compare]&quot; style=&quot;max-width:110px;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;is&quot; {{#is compare value=&quot;is&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'is', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;isnot&quot; {{#is compare value=&quot;isnot&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'is not', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;&gt;&quot; {{#is compare value=&quot;&gt;&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'is greater than', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;&lt;&quot; {{#is compare value=&quot;&lt;&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'is less than', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;startswith&quot; {{#is compare value=&quot;startswith&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'starts with', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;endswith&quot; {{#is compare value=&quot;endswith&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'ends with', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;contains&quot; {{#is compare value=&quot;contains&quot;}}selected=&quot;selected&quot;{{/is}}&gt;&lt;?php echo esc_html__( 'contains', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                  &lt;/select&gt;&nbsp;</div></li><li><div>                  &lt;span style=&quot;padding: 0 12px 0; &quot; class=&quot;caldera-conditional-field-value&quot; data-value=&quot;{{value}}&quot; id=&quot;{{id}}_value&quot;&gt;&lt;input disabled type=&quot;text&quot; value=&quot;&quot; placeholder=&quot;&lt;?php echo esc_html__( 'Select field first', 'caldera-forms' ); ?&gt;&quot; style=&quot;max-width: 165px;&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;button type=&quot;button&quot; class=&quot;button remove-conditional-line pull-right&quot;&gt;&lt;i class=&quot;icon-join&quot;&gt;&lt;/i&gt;&lt;/button&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              {{/each}}&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;button type=&quot;button&quot; class=&quot;button button-small ajax-trigger&quot; data-id=&quot;{{../id}}&quot; data-type=&quot;{{type}}&quot; data-group=&quot;{{id}}&quot; data-request=&quot;new_conditional_line&quot; data-target=&quot;#{{id}}_conditions_lines&quot; data-callback=&quot;rebuild_field_binding&quot; data-template=&quot;#conditional-line-tmpl&quot; data-target-insert=&quot;append&quot;&gt;&lt;?php echo esc_html__( 'Add Condition', 'caldera-forms' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  {{/each}}&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/html&quot; id=&quot;conditional-line-tmpl&quot;&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;caldera-condition-line&quot;&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;caldera-condition-line-label&quot;&gt;&lt;?php echo esc_html__( 'and', 'caldera-forms' ); ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      if &nbsp;</div></li><li><div>      &lt;select name=&quot;{{name}}[field]&quot; class=&quot;caldera-field-bind caldera-conditional-field-set&quot; data-condition=&quot;{{type}}&quot; data-id=&quot;{{id}}&quot; data-line=&quot;{{lineid}}&quot; data-row=&quot;{{rowid}}&quot; data-all=&quot;true&quot; style=&quot;max-width:120px;&quot;&gt;&lt;/select&gt;&nbsp;</div></li><li><div>      &lt;select name=&quot;{{name}}[compare]&quot; style=&quot;max-width:110px;&quot;&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;is&quot;&gt;&lt;?php echo esc_html__( 'is', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;isnot&quot;&gt;&lt;?php echo esc_html__( 'is not', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;&gt;&quot;&gt;&lt;?php echo esc_html__( 'is greater than', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;&lt;&quot;&gt;&lt;?php echo esc_html__( 'is less than', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;startswith&quot;&gt;&lt;?php echo esc_html__( 'starts with', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;endswith&quot;&gt;&lt;?php echo esc_html__( 'ends with', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;contains&quot;&gt;&lt;?php echo esc_html__( 'contains', 'caldera-forms' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>      &lt;/select&gt;&nbsp;</div></li><li><div>      &lt;span class=&quot;caldera-conditional-field-value&quot; id=&quot;{{lineid}}_value&quot;&gt;&lt;input disabled type=&quot;text&quot; value=&quot;&quot; placeholder=&quot;&lt;?php echo esc_html__( 'Select field first', 'caldera-forms' ); ?&gt;&quot; style=&quot;max-width: 165px;&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>      &lt;button type=&quot;button&quot; class=&quot;button remove-conditional-line pull-right&quot;&gt;&lt;i class=&quot;icon-join&quot;&gt;&lt;/i&gt;&lt;/button&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/// Output the field templates</span>&nbsp;</div></li><li><div>foreach($field_type_templates as $key=&gt;$template) {&nbsp;</div></li><li><div>  echo &quot;&lt;script type=\&quot;text/html\&quot; class=\&quot;cf-editor-template\&quot; id=\&quot;&quot; . $key . &quot;\&quot;&gt;\r\n&quot;;&nbsp;</div></li><li><div>      echo $template;&nbsp;</div></li><li><div>  echo &quot;\r\n&lt;/script&gt;\r\n&quot;;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$magic_script = array(&nbsp;</div></li><li><div>  'field' =&gt; array()&nbsp;</div></li><li><div>);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>foreach($magic_tags as $magic_set_key=&gt;$magic_tags_set) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $magic_script[$magic_set_key] = array(&nbsp;</div></li><li><div>      'type' =&gt;    $magic_tags_set['type'], &nbsp;</div></li><li><div>      'tags' =&gt;    array(), &nbsp;</div></li><li><div>      'wrap' =&gt;  $magic_tags_set['wrap']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach($magic_tags_set['tags'] as $tag_key=&gt;$tag_value) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if(is_array($tag_value)) {&nbsp;</div></li><li><div>          foreach($tag_value as $compatibility) {&nbsp;</div></li><li><div>              $magic_script[$magic_set_key]['tags'][$compatibility][] = $tag_key;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }else{&nbsp;</div></li><li><div>          $magic_script[$magic_set_key]['tags']['text'][] = $tag_value;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">// output fieldtype defaults</span>&nbsp;</div></li><li><div>echo implode(&quot;\r\n&quot;, $field_type_defaults);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>var system_values = &lt;?php echo json_encode( $magic_script ); ?&gt;;&nbsp;</div></li><li><div>var preset_options = &lt;?php echo json_encode( $option_presets ); ?&gt;&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>  jQuery('.error, .notice, .notice-error').remove();&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Caldera Forms</li><li><span></span>1.5.0.9</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>