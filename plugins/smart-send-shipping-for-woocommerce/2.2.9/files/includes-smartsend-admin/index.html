<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.2.9" data-slug="smart-send-shipping-for-woocommerce" data-type="file" data-id="64287"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-smartsend-admin | file | Smart Send Shipping For Woocommerce | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, smart-send-shipping-for-woocommerce, 2.2.9" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=bb1103c0c627372ac2f31f442cc8ef90' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-smartsend-admin/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-smartsend-admin%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-smartsend-admin%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-smart-send-shipping-for-woocommerce-2.2.9-file-includes-smartsend-admin","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-smartsend-admin" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to smart-send-shipping-for-wooco&hellip;." href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/" class="plugin"><span property="name">smart-send-shipping-for-wooco&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.2.9." href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/" class="H_VERSION"><span property="name">2.2.9</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-smartsend-admin</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="61"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/all/" title="All">All <span class="count badge">61</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="2"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/hooks/" title="Hooks">Hooks <span class="count badge">2</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="2"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/filters/" title="Filters">Filters <span class="count badge">2</span></a></li><li class="" data-id="class" data-count="5"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/classes/" title="Classes">Classes <span class="count badge">5</span></a></li><li class="" data-id="constant" data-count="14"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/constants/" title="Constants">Constants <span class="count badge">14</span></a></li><li class="" data-id="function" data-count="40"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/functions/" title="Functions">Functions <span class="count badge">40</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/smart-send-shipping-for-woocommerce/2.2.9/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/smartsend-admin.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div>if ( ! defined( 'ABSPATH' ) ) {&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'admin_print_styles', 'smartsend_enqueue_admin_styles', 15);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function smartsend_enqueue_admin_styles()&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  $cssPath = realpath(dirname(__FILE__).'/../assets/css/');&nbsp;</div></li><li><div>  $CSSurl = plugins_url('css/admin.css', $cssPath.'admin.css');&nbsp;</div></li><li><div>  <span class="comment">// Admin Styles</span>&nbsp;</div></li><li><div>  wp_register_style( 'smart_send_admin_styles', $CSSurl);&nbsp;</div></li><li><div>  wp_enqueue_style('smart_send_admin_styles');&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_enqueue_scripts', 'smartsend_enqueue_admin_scripts' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function smartsend_enqueue_admin_scripts($hook) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Only on our settings screen or product edit screen</span>&nbsp;</div></li><li><div>  if (!( ( 'post.php' == $hook && $_GET['action'] == 'edit' && !empty($_GET['post'])) || (  (!empty($_GET['page']) && $_GET['page'] == 'wc-settings') && $_GET['section'] == 'wc_smart_send') ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Product edit screen?</span>&nbsp;</div></li><li><div>  if (!empty($_GET['post']) && get_post_type($_GET['post']) != 'product')&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_enqueue_script( 'smartsend_admin', plugin_dir_url( __FILE__ ) . '../assets/js/smartsend-admin.js' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * ORDER SUMMARY</span>&nbsp;</div></li><li><div><span class="comment"> * Ref. woocommerce/includes/admin/class-wc-admin-post-types.php Line 596</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * $the_order is an instance of woocommerce/includes/class-wc-order.php which is abstracted from woocommerce/wp-content/plugins/woocommerce/includes/abstracts/abstract-wc-order.php</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter('woocommerce_admin_order_actions', 'smart_send_summary_fulfillment_button');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if this order has SSPriceID and SSstatus, if so add manual 'ship' or 'sent' buttons</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param $actions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return $actions</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function smart_send_summary_fulfillment_button( $actions )&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  global $post;&nbsp;</div></li><li><div>  if ( !smart_send_sendable_order($post-&gt;post_status))&nbsp;</div></li><li><div>      return $actions;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ($SSstatus = get_post_meta($post-&gt;ID, 'SSstatus')) && $SSpriceID = get_post_meta($post-&gt;ID, 'SSpriceID') )&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      $status = $SSstatus[0];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $status == 'ordered')&nbsp;</div></li><li><div>      {&nbsp;</div></li><li><div>          $actions['ship'] = array(&nbsp;</div></li><li><div>              'url' =&gt; wp_nonce_url( admin_url( 'admin-ajax.php?iframe=true&width=90%&height=90%&action=smart_send_ship_order&order_id=' . $post-&gt;ID .'&set_status=shipped&priceID='.$SSpriceID[0] ), 'smart-send-ship-order' ), &nbsp;</div></li><li><div><span class="comment">//                'url' =&gt; 'http://support.smartsend.com.au/anonymous_requests/new', </span>&nbsp;</div></li><li><div>              'name' =&gt; __( 'Track', 'smart_send' ), &nbsp;</div></li><li><div>              'action' =&gt; &quot;ss_shipped ss_button ssbuttonstyle&quot;&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( $status == 'pending')&nbsp;</div></li><li><div>      {&nbsp;</div></li><li><div>          $actions['ship'] = array(&nbsp;</div></li><li><div>              'url' =&gt; '', &nbsp;</div></li><li><div>              'name' =&gt; __( 'Shipment Pending', 'smart_send' ), &nbsp;</div></li><li><div>              'action' =&gt; &quot;ss_pending&quot;&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( $status == 'shipped')&nbsp;</div></li><li><div>      {&nbsp;</div></li><li><div>          $actions['ship'] = array(&nbsp;</div></li><li><div>              'url' =&gt; '', &nbsp;</div></li><li><div>              'name' =&gt; __( 'Shipped', 'smart_send' ), &nbsp;</div></li><li><div>              'action' =&gt; &quot;&quot;&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $actions;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'woocommerce_admin_order_actions_end', 'ss_orderview_js' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function ss_orderview_js()&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;script type=&quot;text/javascript&quot; xmlns=&quot;http:<span class="comment">//www.w3.org/1999/html&quot;&gt;</span>&nbsp;</div></li><li><div>      jQuery(&quot;.ss_shipped&quot;).attr(&quot;rel&quot;, &quot;prettyPhoto[iframes]&quot;);&nbsp;</div></li><li><div>  &lt;/script&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * ORDER VIEW</span>&nbsp;</div></li><li><div><span class="comment"> * Smart Send order view details, underneath billing address</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Either buttons or information are shown</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>add_action( 'woocommerce_admin_order_data_after_shipping_address', 'smart_send_order_view_button', 10, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function smart_send_order_view_button($order)&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  $order_id = $order-&gt;id;&nbsp;</div></li><li><div>  $ssOrder = new smartSendOrder($order-&gt;id);&nbsp;</div></li><li><div>  $wcStatus = $order-&gt;post_status;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $orderMeta = $ssOrder-&gt;wcMeta;&nbsp;</div></li><li><div>  $priceID = $ssOrder-&gt;priceId;&nbsp;</div></li><li><div>  $status = $ssOrder-&gt;shippingStatus;&nbsp;</div></li><li><div>  $ssSettings = get_option( 'woocommerce_smart_send_settings', null );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url = wp_nonce_url( admin_url( 'admin-ajax.php?action=smart_send_ship_order&order_id=' . $order_id .'&priceID='.$priceID ), 'smart-send-ship-order' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!empty($ssOrder-&gt;bookingReference) )&nbsp;</div></li><li><div>  {    ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;ss_notice&quot;&gt;&nbsp;</div></li><li><div>          Smart Send reference ID: &lt;?php echo $ssOrder-&gt;bookingReference; ?&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          if (!empty($orderMeta['SSpickupDate']))&nbsp;</div></li><li><div>              echo '&lt;br&gt;Pickup date: '.$orderMeta['SSpickupDate'][0];&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;br clear=left&quot;&gt;&lt;br&gt;&nbsp;</div></li><li><div>      &lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch($status)&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      <span class="comment">// If the order is not in a shippable state</span>&nbsp;</div></li><li><div>      <span class="comment">// TODO: IF order is same day / local 1/2/3/4 hour etc do not show datepicker</span>&nbsp;</div></li><li><div>      case 'quoted':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if (in_array($wcStatus, array('wc-processing', 'wc-completed')))&nbsp;</div></li><li><div>          {&nbsp;</div></li><li><div>              $url .= '&set_status=ordered';&nbsp;</div></li><li><div>              $shipDelay = !empty($ssSettings['ship_delay']) ? $ssSettings['ship_delay'] : 0;&nbsp;</div></li><li><div>              <span class="comment">// 10 hours gmt + shipping delay</span>&nbsp;</div></li><li><div>              $timePlus = time() + 36000 + 86400 * $shipDelay;&nbsp;</div></li><li><div>              if (!$shipDelay)&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>                  $timePlus += (12 * 60 * 60 + 16 * 60); <span class="comment">// Add 12 hours and 16 minutes to push over if past 11:45am</span>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $shipDate = gmdate(&quot;Y-m-d&quot;, $timePlus);&nbsp;</div></li><li><div>              $dayList = smartSendAPI::weekendless($shipDate);&nbsp;</div></li><li><div>              $shipDate = $dayList[0];&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;button ssbuttonstyle ss-show-ship&quot;&gt;Ship Order&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;br&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;shipping-date&quot;&gt;&nbsp;</div></li><li><div>                  Pickup Date:&nbsp;</div></li><li><div>                  &lt;input type=&quot;text&quot; name=&quot;shipdate&quot; class=&quot;shipdate&quot; value=&quot;&lt;?php echo $shipDate?&gt;&quot;/&gt;&nbsp;</div></li><li><div>                  &lt;a class=&quot;button ssaction ssbuttonstyle ss-order-shipping&quot; href=&quot;&lt;?php echo $url; ?&gt;&quot; alt=&quot;&lt;?php echo $shipDate?&gt;&quot;&gt;Book&lt;/a&gt;&lt;br/&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                  jQuery(document).ready(function($) {&nbsp;</div></li><li><div>                      $(&quot;.ss-show-ship&quot;).on(&quot;click&quot;, function() {&nbsp;</div></li><li><div>                          $(&quot;.shipping-date&quot;).css({display: &quot;inline-block&quot;});&nbsp;</div></li><li><div>                      });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      var dt = new Date(), h = dt.getUTCHours() + 10, m = dt.getUTCMinutes(), weekday = dt.getDay(), minDateStart = 0, dayOffset = 7 - weekday;&nbsp;</div></li><li><div>                      if (h &gt;= 24) {&nbsp;</div></li><li><div>                          h = h - 24;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      console.log('Hour = ' + h + ' and minute = ' + m);&nbsp;</div></li><li><div>                      if (h &gt;= 12 || (h == 11 && m &gt;= 44 )) {&nbsp;</div></li><li><div>                          minDateStart = 1;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Saturday or Sunday, make sure datestart is Monday</span>&nbsp;</div></li><li><div>                      <span class="comment">// If Sunday, offset = 1</span>&nbsp;</div></li><li><div>                      <span class="comment">// If Saturday, offset = 2</span>&nbsp;</div></li><li><div>                      if (dayOffset &lt;= 2  && (minDateStart &lt; dayOffset)) {&nbsp;</div></li><li><div>                          minDateStart = dayOffset;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $(&quot;.shipdate&quot;).datepicker({&nbsp;</div></li><li><div>                          minDate: minDateStart, &nbsp;</div></li><li><div>                          maxDate: 14, &nbsp;</div></li><li><div>                          dateFormat: &quot;yy-mm-dd&quot;, &nbsp;</div></li><li><div>                          beforeShowDay: available, &nbsp;</div></li><li><div>                          onSelect: function(textDate, _inst) {&nbsp;</div></li><li><div>                              $(&quot;.ss-order-shipping&quot;).attr(&quot;alt&quot;, textDate);&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      var availableDates = [&quot;&lt;?php echo implode( '&quot;, &quot;', $dayList);?&gt;&quot;];&nbsp;</div></li><li><div>                      function available(date) {&nbsp;</div></li><li><div>                          var dmy = date.getFullYear() + &quot;-&quot; + nPad(date.getMonth()+1) + &quot;-&quot; + nPad(date.getDate());&nbsp;</div></li><li><div>                          if ($.inArray(dmy, availableDates) != -1) {&nbsp;</div></li><li><div>                              return [true, &quot;&quot;, &quot;Available&quot;];&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              return [false, &quot;&quot;, &quot;unAvailable&quot;];&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      function nPad(d) {&nbsp;</div></li><li><div>                          return (d &lt; 10) ? '0' + d.toString() : d.toString();&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  });&nbsp;</div></li><li><div>              &lt;/script&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>          {&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;ss_notice&quot;&gt;Order status must be one of 'Processing' or 'Completed' to enable Smart Send shipping fulfilment&lt;/div&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'ordered':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $url .= '&set_status=shipped&iframe=true&width=75%&height=75%';&nbsp;</div></li><li><div>          $trackingId = $ssOrder-&gt;getTrackingId();&nbsp;</div></li><li><div>          if ($trackingId)&nbsp;</div></li><li><div>          {&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;a class=&quot;button ssbuttonstyle ss-track-shipping&quot; href=&quot;&lt;?php echo $url; ?&gt;&quot; rel=&quot;prettyPhoto[iframes]&quot; target=&quot;_blank&quot;&gt;Track Shipping&lt;/a&gt;&lt;br/&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>              if (!empty($orderMeta['SStrackingID']))&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>                  $labelFile = $ssOrder-&gt;getLabel();&nbsp;</div></li><li><div>                  if (!$labelFile)&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      echo '&lt;p&gt;Shipping Label not available yet.&lt;/p&gt;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      $labelPath = realpath(dirname(__FILE__).'/..').'/labels/';&nbsp;</div></li><li><div>                      ?&gt;&lt;br/&gt;&nbsp;</div></li><li><div>                      &lt;a class=&quot;button ssbuttonstyle&quot; href=&quot;&lt;?php echo plugins_url('labels', $labelPath).'/'.$labelFile; ?&gt;&quot; target=&quot;_blank&quot;&gt;Print / View Shipping Label&lt;/a&gt;&lt;br/&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  echo '&lt;p&gt;Please refresh page to see &lt;b&gt;Shipping Label&lt;/b&gt;&lt;/p&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              echo '&lt;p&gt;No tracking reference ID&lt;/p&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'pending':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $url .= '&set_status=shipped';&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;ss_notice&quot;&gt;Order cannot be completed here, please login to the &lt;br&gt;&lt;a href=&quot;https:<span class="comment">//www.smartsend.com.au/VIP/apiBookings.cfm&quot;&gt;API Bookings&lt;/a&gt; section of the VIP admin dashboard&lt;/div&gt;</span>&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      case 'shipped':&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;ss_notice&quot;&gt;Order has been shipped.&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Show packing instructions</span>&nbsp;</div></li><li><div>  if ($status != 'shipped' )&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      echo '&nbsp;</div></li><li><div>          &lt;h4&gt;Packing Instructions&lt;/h4&gt;';&nbsp;</div></li><li><div>      <span class="comment">// Try to get placking list</span>&nbsp;</div></li><li><div>      $packingList = $ssOrder-&gt;getPackingList();&nbsp;</div></li><li><div>      if ($packingList)&nbsp;</div></li><li><div>      {&nbsp;</div></li><li><div>          <span class="comment">// Get quoted shipping details</span>&nbsp;</div></li><li><div>          $shipQuote = smartSendAPI::getCacheItem('res', $orderMeta['SSpriceID'][0], $orderMeta['SScacheKey'][0]);&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;small&gt;Note: Shipping quote and prices for this order are predicated on these packing instructions. You may be liable for additional costs if the packages collected by the courier do not match those below.&lt;/small&gt;&nbsp;</div></li><li><div>          &lt;table class=&quot;wc-smartsend-packlist&quot; cellpadding=&quot;6&quot;&gt;&nbsp;</div></li><li><div>              &lt;tr&gt;&nbsp;</div></li><li><div>                  &lt;th&gt;Item&lt;/th&gt;&nbsp;</div></li><li><div>                  &lt;th&gt;Quantity&lt;/th&gt;&nbsp;</div></li><li><div>                  &lt;th&gt;Package&lt;/th&gt;&nbsp;</div></li><li><div>              &lt;/tr&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              $packageCompat = true;&nbsp;</div></li><li><div>              foreach( $packingList as $instructions)&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  list( $cartItem, $qty, $package) = $instructions;&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>                  &lt;tr&gt;&nbsp;</div></li><li><div>                      &lt;td&gt;&lt;?php echo $cartItem; ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                      &lt;td&gt;&lt;?php echo $qty; ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                      &lt;td&gt;&lt;?php echo $package; ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                  &lt;/tr&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  if (preg_match( '/^(Fastway|Couriers Please)/', $instructions[2], $bits ))&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      if ($shipQuote['CourierName'] != $bits[1])&nbsp;</div></li><li><div>                      {&nbsp;</div></li><li><div>                          $incompats[] = $instructions[2];&nbsp;</div></li><li><div>                          $packageCompat = false;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/table&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          if (!$packageCompat)&nbsp;</div></li><li><div>          {&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>              &lt;span style=&quot;color: red&quot;&gt;Warning: this consignment will be sent via &lt;b&gt;&lt;?=$shipQuote['CourierName'];?&gt;&lt;/b&gt; * for this shipment please ensure that the items that were to be shipped in &lt;i&gt;&lt;?=implode( ', ', $incompats)?&gt;&lt;/i&gt; are packaged in packaging other than a &lt;i&gt;&lt;?=implode( ', ', $incompats)?&gt;&lt;/i&gt; so as not to cause confusion and possible return or non*delivery.&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>      {&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>          &lt;p&gt;No packing instructions provided.&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;Items will be shipped 'as-is', in their existing packaging.&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'woocommerce_product_options_pricing', 'smart_send_show_product_cost' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment">// Wholesale Price</span></span>&nbsp;</div></li><li><div>function smart_send_show_product_cost() {&nbsp;</div></li><li><div>  woocommerce_wp_text_input( array( 'id' =&gt; 'SScostPrice', &nbsp;</div></li><li><div>                                    'data_type' =&gt; 'price', &nbsp;</div></li><li><div>                                    'label' =&gt; __( 'Cost Price', 'woocommerce' ) . ' (' . get_woocommerce_currency_symbol() . ')', &nbsp;</div></li><li><div>                                    'desc_tip' =&gt; 'true', &nbsp;</div></li><li><div>                                    'description' =&gt; __( 'The price the product cost you, the merchant. Used to calculate Smart Send transport assurance.' )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_process_product_meta_simple', 'smart_send_save_product_cost');&nbsp;</div></li><li><div>function smart_send_save_product_cost($post_id) {&nbsp;</div></li><li><div>  update_post_meta( $post_id, 'SScostPrice', stripslashes( $_POST['SScostPrice'] ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'woocommerce_ajax_save_product_variations', 'smart_send_save_variation_cost', 10, 1);&nbsp;</div></li><li><div>function smart_send_save_variation_cost($parentId)&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  foreach( $_POST['variable_post_id'] as $i =&gt; $id )&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      $val = $_POST['SScostPrice'][$i];&nbsp;</div></li><li><div>      update_post_meta( $id, 'SScostPrice', stripslashes( $val ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Smart Pack box assignment per product</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>add_action('woocommerce_product_after_variable_attributes', 'smart_send_show_product_variation_cost', 10, 3 );&nbsp;</div></li><li><div>function smart_send_show_product_variation_cost($loop, $variationData, $variation) {&nbsp;</div></li><li><div>  $meta = get_post_meta($variation-&gt;ID);&nbsp;</div></li><li><div>  $costPrice = ! empty( $meta['SScostPrice'][0] ) ? $meta['SScostPrice'][0] : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  woocommerce_wp_text_input( array(&nbsp;</div></li><li><div>      'id' =&gt; 'SScostPrice', &nbsp;</div></li><li><div>      'name' =&gt; 'SScostPrice[]', &nbsp;</div></li><li><div>      'data_type' =&gt; 'price', &nbsp;</div></li><li><div>      'label' =&gt; __( 'Cost Price', 'woocommerce' ) . ' (' . get_woocommerce_currency_symbol() . ')', &nbsp;</div></li><li><div>      'desc_tip' =&gt; 'true', &nbsp;</div></li><li><div>      'description' =&gt; __( 'The price the product cost you, the merchant. Used to calculate Smart Send transport assurance.' ), &nbsp;</div></li><li><div>      'value' =&gt; $costPrice&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('woocommerce_product_after_variable_attributes', 'smart_send_show_package_options', 15, 3 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'woocommerce_product_options_shipping', 'smart_send_show_package_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment"><span class="comment">// Wholesale Price</span></span>&nbsp;</div></li><li><div>function smart_send_show_package_options( $loop = null, $variationData = null, $variation = null)&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  global $thepostid;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ($variation)&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      $usepostid = $variation-&gt;ID;&nbsp;</div></li><li><div>      $theparentid = $variation-&gt;post_parent;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $parentProdLength = get_post_meta( $theparentid, '_length', true);&nbsp;</div></li><li><div>      $parentProdWidth = get_post_meta( $theparentid, '_width', true);&nbsp;</div></li><li><div>      $parentProdHeight = get_post_meta( $theparentid, '_height', true);&nbsp;</div></li><li><div>      $parentProdWeight = get_post_meta( $theparentid, '_weight', true);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $usepostid = $thepostid;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $prodLength = get_post_meta( $usepostid, '_length', true);&nbsp;</div></li><li><div>  $prodWidth = get_post_meta( $usepostid, '_width', true);&nbsp;</div></li><li><div>  $prodHeight = get_post_meta( $usepostid, '_height', true);&nbsp;</div></li><li><div>  $prodWeight = get_post_meta( $usepostid, '_weight', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If the child product has no setting, or it's the same as the parents</span>&nbsp;</div></li><li><div>  if (&nbsp;</div></li><li><div>      $variation &&&nbsp;</div></li><li><div>      ( !$prodLength || $prodLength == $parentProdLength ) &&&nbsp;</div></li><li><div>      ( !$prodHeight || $prodHeight == $parentProdHeight ) &&&nbsp;</div></li><li><div>      ( !$prodWidth || $prodWidth == $parentProdWidth ) &&&nbsp;</div></li><li><div>      ( !$prodWeight || $prodWeight == $parentProdWeight )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>      echo '&lt;h3&gt;'._e(&quot;&lt;b&gt;Packing Instructions:&lt;/b&gt; Variation dimensions are same as parent, set packing instructions in 'shipping' tab&quot;, 'smartsend-woo').'&lt;/h3&gt;';&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Use parent dimensions if necessary</span>&nbsp;</div></li><li><div>  if ($variation)&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      $prodLength = $prodLength ? $prodLength : $parentProdLength;&nbsp;</div></li><li><div>      $prodHeight = $prodHeight ? $prodHeight : $parentProdHeight;&nbsp;</div></li><li><div>      $prodWeight = $prodWeight ? $prodWeight : $parentProdWeight;&nbsp;</div></li><li><div>      $prodWidth = $prodWidth ? $prodWidth : $parentProdWidth;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Load in package taxonomies</span>&nbsp;</div></li><li><div>  $shippingPackages = get_terms('product_shipping_package', array('hide_empty' =&gt; false));&nbsp;</div></li><li><div>  $pkgMeta = get_option('smartsend_packages');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $packingInstructions = get_post_meta($usepostid, 'smart_send_packing', true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;options_group packing_instructions_group&quot;&gt;&nbsp;</div></li><li><div>          &lt;h3&gt;&lt;?php _e('Packing Instructions', 'smartsend-woo'); ?&gt; &lt;/h3&gt;&nbsp;</div></li><li><div>          &lt;small&gt;&lt;?php _e(&quot;Specify numbers that will fit in to another package - when calculating shipping, the package dimensions will be used. With multiple options, the cheapest packing instruction will be used.&quot;); ?&gt;&lt;/small&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;smartsend_packing_instructions&quot; rel=&quot;&lt;?php echo $usepostid; ?&gt;&quot; id=&quot;smartsend_packing_instructions_&lt;?php echo $usepostid; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              if ($packingInstructions)&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>                  foreach( $packingInstructions as $packId =&gt; $fillNum)&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      $thisPack = get_term($packId, 'product_shipping_package');&nbsp;</div></li><li><div>                      $mData = $pkgMeta[$packId];&nbsp;</div></li><li><div>                      $fitCount = smartSendQuote::volumeFit(array($prodLength, $prodWidth, $prodHeight, $prodWeight), array($mData['smartsendLength'], $mData['smartsendWidth'], $mData['smartsendDepth'], $mData['maxweight']));&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;packing-row&quot; rel=&quot;&lt;?php echo $packId; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                          &lt;span style=&quot;font-style: italic&quot;&gt;We can fit&lt;/span&gt; &lt;span class=&quot;willHold&quot;&gt;&lt;?php echo $fillNum; ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                          &lt;span style=&quot;font-style: italic&quot;&gt; in to a&lt;/span&gt;&nbsp;</div></li><li><div>                          &lt;span class=&quot;packageSpec&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                              echo $thisPack-&gt;name.&quot; - $mData[smartsendLength]x$mData[smartsendWidth]x$mData[smartsendDepth]&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              if ($mData['maxweight'])&nbsp;</div></li><li><div>                                  echo &quot; (Max. $mData[maxweight]kg)&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              if (!preg_match('/fixed price/', $mData['smartsendClass']))&nbsp;</div></li><li><div>                                  echo &quot; - &lt;b&gt;$mData[smartsendClass]&lt;/b&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                          &lt;?php&nbsp;</div></li><li><div>                          if ($fitCount == 'toobig')&nbsp;</div></li><li><div>                              echo '&lt;span style=&quot;color: red; font-style: italic&quot;&gt; Package too small for product. Review product or package dimensions.&lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ($fitCount == 'tooheavy')&nbsp;</div></li><li><div>                              echo '&lt;span style=&quot;color: red; font-style: italic&quot;&gt; Package too heavy for product. Review product or package weight.&lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( (0+$fitCount)&gt;0 && $mData['maxweight'] && $prodWeight*$fillNum &gt; $mData['maxweight'] )&nbsp;</div></li><li><div>                              echo '&lt;span style=&quot;color: red; font-style: italic&quot;&gt; Warning: '.$fillNum.' of this product will exceed this package\'s maximum weight.&lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( preg_match( '/^(Fastway|Couriers Please)/i', $thisPack-&gt;name))&nbsp;</div></li><li><div>                              echo '&lt;span style=&quot;color: #ff6410; font-style: italic&quot;&gt;Please note: Fixed price road satchels will not deliver to all locations Australia-wide, add another packaging type or risk non-delivery / return of items.&lt;/span&gt;';&nbsp;</div></li><li><div>                          ?&gt;&nbsp;</div></li><li><div>                          &lt;span class=&quot;killIt&quot;&gt;x&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;div class=&quot;add_product_packing&quot; rel=&quot;&lt;?php echo $usepostid; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;div&gt;&nbsp;</div></li><li><div>              &lt;span style=&quot;margin-bottom:5px;&quot;&gt;The package &lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;select class=&quot;product_ship_package&quot; rel=&quot;&lt;?php echo $usepostid; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;option&gt;&lt;?php _e( 'Choose package', 'woocommerce' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>                  if ( $shippingPackages ) {&nbsp;</div></li><li><div>                      foreach ( $shippingPackages as $pkg )&nbsp;</div></li><li><div>                      {&nbsp;</div></li><li><div>                          $mData = $pkgMeta[$pkg-&gt;term_id];&nbsp;</div></li><li><div>                          echo '&lt;option value=&quot;' .$pkg-&gt;term_id.'&quot; data-fits=&quot;';&nbsp;</div></li><li><div>                          echo smartSendQuote::volumeFit(array($prodLength, $prodWidth, $prodHeight, $prodWeight), array($mData['smartsendLength'], $mData['smartsendWidth'], $mData['smartsendDepth'], $mData['maxweight']));&nbsp;</div></li><li><div>                          echo '&quot; data-maxweight=&quot;'.$mData['maxweight'].'&quot;&gt;' . esc_html( $pkg-&gt;name ) . &quot; - $mData[smartsendLength]x$mData[smartsendWidth]x$mData[smartsendDepth]&quot;;&nbsp;</div></li><li><div>                          if ($mData['maxweight'])&nbsp;</div></li><li><div>                              echo &quot; (Max. $mData[maxweight]kg)&quot;;&nbsp;</div></li><li><div>                          if (!preg_match('/fixed price/', $mData['smartsendClass']))&nbsp;</div></li><li><div>                              echo &quot; - &lt;strong&gt;$mData[smartsendClass]&lt;/strong&gt;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>              &lt;/select&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;div id=&quot;add-pack-controls&quot;&gt;&nbsp;</div></li><li><div>                  &lt;button type=&quot;button&quot; class=&quot;button button-primary add_ship_instruction&quot; rel=&quot;&lt;?php echo $usepostid; ?&gt;&quot;&gt;&lt;?php _e( 'Add', 'smartsend-woo' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;span style=&quot;display: inline-block;&quot;&gt; will hold &lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;input type=&quot;number&quot; id=&quot;pack_will_hold_&lt;?php echo $usepostid; ?&gt;&quot; size=&quot;4&quot; style=&quot;width: 50px;&quot;/&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;span style=&quot;display: inline-block;&quot;&gt; of this product&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;package_warnings_&lt;?php echo $usepostid; ?&gt; ss_package_warnings&quot; id=&quot;pkg-size-warning_&lt;?php echo $usepostid; ?&gt;&quot;&gt; Package too small for product. Review product / package dimensions.&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;span class=&quot;package_warnings_&lt;?php echo $usepostid; ?&gt; ss_package_warnings&quot; id=&quot;pkg-weight-warning_&lt;?php echo $usepostid; ?&gt;&quot;&gt; Package too heavy for product. Review product / package weight.&lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *   Functionality for order redemption buttons</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_footer', 'smart_send_order_js' ); <span class="comment">// Write our JS below here</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *  Submit booking request via AJAX; if successful, refresh page, otherwise show warning</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function smart_send_order_js()&nbsp;</div></li><li><div>{ ?&gt;&nbsp;</div></li><li><div>  &lt;script type=&quot;text/javascript&quot; &gt;&nbsp;</div></li><li><div>      jQuery(document).ready(function($) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Trigger on clicking '.ss_button'</span>&nbsp;</div></li><li><div>          $(&quot;.ssaction&quot;).on(&quot;click&quot;, function(ev) {&nbsp;</div></li><li><div>              ev.preventDefault();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              var buttonText = $(this).text(), _self = $(this), ajaxUrl = $(this).attr(&quot;href&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ($(this).attr(&quot;alt&quot;))&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>                  ajaxUrl += &quot;&pickupdate=&quot;+$(this).attr(&quot;alt&quot;);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $(this).text('PROCESSING..');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $.getJSON( ajaxUrl, function(resp) {&nbsp;</div></li><li><div>                  var msg = resp.response;&nbsp;</div></li><li><div>                  if (msg == 'error') {&nbsp;</div></li><li><div>                      _self.text(buttonText);&nbsp;</div></li><li><div>                      alert(resp[0]);&nbsp;</div></li><li><div>                      return false;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if (msg == 'pending')&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      _self.text(buttonText);&nbsp;</div></li><li><div>                      alert(resp[0]);&nbsp;</div></li><li><div>                      location.reload(true);&nbsp;</div></li><li><div>                      return false;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if(_self.hasClass('ss-ship-order'))&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      alert('Shipping booked, reference number '+msg);&nbsp;</div></li><li><div>                      location.reload(true);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  else if(_self.hasClass('ss-track-shipping'))&nbsp;</div></li><li><div>                  {&nbsp;</div></li><li><div>                      alert('Shipping booked, reference number '+msg);&nbsp;</div></li><li><div>                      location.reload(true);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  else {&nbsp;</div></li><li><div>                      _self.text(buttonText);&nbsp;</div></li><li><div>                      alert(msg);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  location.reload(true);&nbsp;</div></li><li><div>              });&nbsp;</div></li><li><div>          });&nbsp;</div></li><li><div>      });&nbsp;</div></li><li><div>  &lt;/script&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *  Check if the status is one that allows shipping buttons</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param $status</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function smart_send_sendable_order($status)&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  if (in_array( $status, array( 'wc-completed', 'wc-processing' ) ))&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * NEW shipping package taxonomy stuff - extra fields associated</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action('product_shipping_package_edit_form_fields', 'wc_smartsend_edit_packages', 10, 2);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Add some extra fields to editing shipping packages</span>&nbsp;</div></li><li><div>function wc_smartsend_edit_packages( $tag )&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  if (isset($tag-&gt;term_id ))&nbsp;</div></li><li><div>  {&nbsp;</div></li><li><div>      $tId = $tag-&gt;term_id;&nbsp;</div></li><li><div>      $getMeta = get_option('smartsend_packages');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if (is_array($getMeta[$tId])) {&nbsp;</div></li><li><div>          $packData = $getMeta[$tId];&nbsp;</div></li><li><div>          extract( $packData );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!isset($smartsendLength))&nbsp;</div></li><li><div>      $smartsendLength = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!isset($smartsendWidth))&nbsp;</div></li><li><div>      $smartsendWidth = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!isset($smartsendDepth))&nbsp;</div></li><li><div>      $smartsendDepth = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!isset($maxweight))&nbsp;</div></li><li><div>      $maxweight = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!isset($smartsendClass))&nbsp;</div></li><li><div>      $smartsendClass = 'Carton';&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required term-shipping-class-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;smartsend-shipping-class&quot;&gt;&lt;?php _ex( 'Smart Send Shipping Class', 'shipping class', 'smartsend-woo' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;select name=&quot;smartsendClass&quot; id=&quot;smartsend-shipping-class&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php&nbsp;</div></li><li><div>              foreach( smartSendAPI::$ssPackageTypes as $sClass )&nbsp;</div></li><li><div>              {&nbsp;</div></li><li><div>                  if (preg_match( '/((road satchel)|(priority satchel))/i', $sClass))&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  echo '&lt;option';&nbsp;</div></li><li><div>                  if ($sClass == $smartsendClass)&nbsp;</div></li><li><div>                      echo ' selected=&quot;selected&quot;';&nbsp;</div></li><li><div>                  echo &quot;&gt;$sClass&lt;/option&gt;\n&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              ?&gt;&nbsp;</div></li><li><div>          &lt;/select&gt;&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&lt;?php _e('The shipping class of the package.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required term-dimensions-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>          &lt;label&gt;&lt;?php _ex( 'Dimensions', 'package dimensions', 'smartsend-woo' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;smartsend-length&quot; style=&quot;display: inline-block;&quot;&gt;Length&lt;/label&gt; &lt;input name=&quot;smartsendLength&quot; id=&quot;smartsend-length&quot; type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr($smartsendLength); ?&gt;&quot; size=&quot;2&quot; aria-required=&quot;true&quot; required/&gt; cm&nbsp;</div></li><li><div>          &lt;label for=&quot;smartsend-width&quot; style=&quot;display: inline-block; margin-left: 10px; padding-left: 10px; border-left: 1px solid gray&quot;&gt;Width&lt;/label&gt; &lt;input name=&quot;smartsendWidth&quot; id=&quot;smartsend-width&quot; type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr($smartsendWidth); ?&gt;&quot; size=&quot;2&quot; aria-required=&quot;true&quot; required/&gt; cm&nbsp;</div></li><li><div>          &lt;label for=&quot;smartsend-depth&quot; style=&quot;display: inline-block; margin-left: 10px; padding-left: 10px; border-left: 1px solid gray&quot;&gt;Depth&lt;/label&gt; &lt;input name=&quot;smartsendDepth&quot; id=&quot;smartsend-depth&quot; type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr($smartsendDepth); ?&gt;&quot; size=&quot;2&quot; /&gt; cm&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&lt;?php _e('Packages must have at least length and width.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;tr class=&quot;form-field form-required term-maxweight-wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>          &lt;label for=&quot;maxweight&quot;&gt;&lt;?php _ex( 'Maximum Weight', 'maximum weight', 'smartsend-woo' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;/th&gt;&nbsp;</div></li><li><div>      &lt;td&gt;&nbsp;</div></li><li><div>          &lt;input name=&quot;maxweight&quot; id=&quot;maxweight&quot; type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr($maxweight); ?&gt;&quot; size=&quot;4&quot; /&gt; kg&nbsp;</div></li><li><div>          &lt;p class=&quot;description&quot;&gt;&lt;?php _e('This is the maximum weight this package can handle.'); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/td&gt;&nbsp;</div></li><li><div>  &lt;/tr&gt;&nbsp;</div></li><li><div>  &lt;br/&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'edited_product_shipping_package', 'wc_smartsend_save_packages', 10, 2);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Save custom packages taxonomy fields</span>&nbsp;</div></li><li><div><span class="comment"> * smartsend-length smartsend-width smartsend-depth + maxweight</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param $termId</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if (!isset($ssPackageSaved))&nbsp;</div></li><li><div>  $ssPackageSaved = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wc_smartsend_save_packages($termId)&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  if (empty($_POST['action']) || !current_user_can( 'edit_products' ))&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Stop the looping madness.. update term at the bottom keeps triggering this, so enough is enough</span>&nbsp;</div></li><li><div>  global $ssPackageSaved;&nbsp;</div></li><li><div>  if ( isset($ssPackageSaved[$termId]) || $_POST['action'] == 'delete-tag')&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $ssPackageSaved[$termId] = true;&nbsp;</div></li><li><div>  $pkgMeta = get_option('smartsend_packages');&nbsp;</div></li><li><div>  <span class="comment">// Init if first time</span>&nbsp;</div></li><li><div>  if (!$pkgMeta)&nbsp;</div></li><li><div>      $pkgMeta = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $length = $_POST['smartsendLength'];&nbsp;</div></li><li><div>  $width = $_POST['smartsendWidth'];&nbsp;</div></li><li><div>  $depth = $_POST['smartsendDepth'];&nbsp;</div></li><li><div>  $weight = $_POST['maxweight'];&nbsp;</div></li><li><div>  $class = $_POST['smartsendClass'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pkgMeta[$termId] = array(&nbsp;</div></li><li><div>      'smartsendLength' =&gt; $length, &nbsp;</div></li><li><div>      'smartsendWidth' =&gt; $width, &nbsp;</div></li><li><div>      'smartsendDepth' =&gt; $depth, &nbsp;</div></li><li><div>      'maxweight' =&gt; $weight, &nbsp;</div></li><li><div>      'smartsendClass' =&gt; $class&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  update_option('smartsend_packages', $pkgMeta);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tDesc = $length.'cm x '.$width.'cm';&nbsp;</div></li><li><div>  if ($depth )&nbsp;</div></li><li><div>      $tDesc .= ' x '.$depth.'cm';&nbsp;</div></li><li><div>  $tDesc .= ' '.$class;&nbsp;</div></li><li><div>  if ($weight)&nbsp;</div></li><li><div>      $tDesc .= ' (Max '.$weight.'kg)';&nbsp;</div></li><li><div>  wp_update_term($termId, 'product_shipping_package', array('description' =&gt; $tDesc));&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Also add fields to new package</span>&nbsp;</div></li><li><div>add_action('product_shipping_package_add_form_fields', 'wc_smartsend_edit_packages', 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Saves new packages</span>&nbsp;</div></li><li><div>add_action('created_product_shipping_package', 'wc_smartsend_save_packages', 10, 2);&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Smart Send Shipping for WooCommerce</li><li><span></span>2.2.9</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>