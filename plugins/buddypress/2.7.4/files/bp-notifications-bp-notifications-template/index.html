<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.7.4" data-slug="buddypress" data-type="file" data-id="49356"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp-notifications-bp-notifications-template | file | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, buddypress, 2.7.4" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.21"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=4520e08eaebff23d054addb0c4289ee3' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.21' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bp-notifications-bp-notifications-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-notifications-bp-notifications-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-notifications-bp-notifications-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.7.4-file-bp-notifications-bp-notifications-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp-notifications-bp-notifications-template" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.7.4." href="http://hookr.io/plugins/buddypress/2.7.4/" class="H_VERSION"><span property="name">2.7.4</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/buddypress/2.7.4/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp-notifications-bp-notificat&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="7768"><a href="http://hookr.io/plugins/buddypress/2.7.4/all/" title="All">All <span class="count badge">7768</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.7.4/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3600"><a href="http://hookr.io/plugins/buddypress/2.7.4/hooks/" title="Hooks">Hooks <span class="count badge">3600</span></a></li><li class="" data-id="action" data-count="1718"><a href="http://hookr.io/plugins/buddypress/2.7.4/actions/" title="Actions">Actions <span class="count badge">1718</span></a></li><li class="" data-id="filter" data-count="1882"><a href="http://hookr.io/plugins/buddypress/2.7.4/filters/" title="Filters">Filters <span class="count badge">1882</span></a></li><li class="" data-id="class" data-count="178"><a href="http://hookr.io/plugins/buddypress/2.7.4/classes/" title="Classes">Classes <span class="count badge">178</span></a></li><li class="" data-id="constant" data-count="160"><a href="http://hookr.io/plugins/buddypress/2.7.4/constants/" title="Constants">Constants <span class="count badge">160</span></a></li><li class="" data-id="function" data-count="3830"><a href="http://hookr.io/plugins/buddypress/2.7.4/functions/" title="Functions">Functions <span class="count badge">3830</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.7.4/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bp-notifications/bp-notifications-template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * BuddyPress Notifications Template Functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package BuddyPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage TonificationsTemplate</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly.</span>&nbsp;</div></li><li><div>defined( 'ABSPATH' ) || exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! buddypress()-&gt;do_autoload ) {&nbsp;</div></li><li><div>  require dirname( __FILE__ ) . '/classes/class-bp-notifications-template.php';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the notifications component slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_slug() {&nbsp;</div></li><li><div>  echo bp_get_notifications_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the notifications component slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Slug of the Notifications component.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_slug() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the notifications component slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Notifications component slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_notifications_slug', buddypress()-&gt;notifications-&gt;slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the notifications permalink for a user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_notifications_permalink( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>      if ( 0 === $user_id ) {&nbsp;</div></li><li><div>          $user_id = bp_loggedin_user_id();&nbsp;</div></li><li><div>          $domain = bp_loggedin_user_domain();&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $domain = bp_core_get_user_domain( (int) $user_id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = trailingslashit( $domain . bp_get_notifications_slug() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  Permalink for the notifications.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_notifications_permalink', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the unread notifications permalink for a user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_unread_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_notifications_unread_permalink( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the unread notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Unread notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_unread_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>      if ( 0 === $user_id ) {&nbsp;</div></li><li><div>          $user_id = bp_loggedin_user_id();&nbsp;</div></li><li><div>          $domain = bp_loggedin_user_domain();&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $domain = bp_core_get_user_domain( (int) $user_id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = trailingslashit( $domain . bp_get_notifications_slug() . '/unread' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the unread notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  Permalink for the unread notifications.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_notifications_unread_permalink', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the read notifications permalink for a user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_read_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_notifications_read_permalink( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the read notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Read notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_read_permalink( $user_id = 0 ) {&nbsp;</div></li><li><div>      if ( 0 === $user_id ) {&nbsp;</div></li><li><div>          $user_id = bp_loggedin_user_id();&nbsp;</div></li><li><div>          $domain = bp_loggedin_user_domain();&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $domain = bp_core_get_user_domain( (int) $user_id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = trailingslashit( $domain . bp_get_notifications_slug() . '/read' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the read notifications permalink.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  Permalink for the read notifications.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_notifications_unread_permalink', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** The Loop ******************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Initialize the notifications loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Based on the $args passed, bp_has_notifications() populates</span>&nbsp;</div></li><li><div><span class="comment"> * buddypress()-&gt;notifications-&gt;query_loop global, enabling the use of BP</span>&nbsp;</div></li><li><div><span class="comment"> * templates and template functions to display a list of notifications.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Arguments for limiting the contents of the notifications loop. Can be</span>&nbsp;</div></li><li><div><span class="comment"> *     passed as an associative array, or as a URL query string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     See {@link BP_Notifications_Notification::get()} for detailed</span>&nbsp;</div></li><li><div><span class="comment"> *     information on the arguments.  In addition, also supports:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $max      Optional. Max items to display. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $page_arg URL argument to use for pagination.</span>&nbsp;</div></li><li><div><span class="comment"> *                            Default: 'npage'.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_notifications( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the default is_new argument.</span>&nbsp;</div></li><li><div>  if ( bp_is_current_action( 'unread' ) ) {&nbsp;</div></li><li><div>      $is_new = 1;&nbsp;</div></li><li><div>  } elseif ( bp_is_current_action( 'read' ) ) {&nbsp;</div></li><li><div>      $is_new = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Not on a notifications page? default to fetch new notifications.</span>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $is_new = 1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the user ID.</span>&nbsp;</div></li><li><div>  if ( bp_displayed_user_id() ) {&nbsp;</div></li><li><div>      $user_id = bp_displayed_user_id();&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $user_id = bp_loggedin_user_id();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set the component action (by default false to get all actions)</span>&nbsp;</div></li><li><div>  $component_action = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['type'] ) ) {&nbsp;</div></li><li><div>      $component_action = sanitize_key( $_REQUEST['type'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set the search terms (by default an empty string to get all notifications)</span>&nbsp;</div></li><li><div>  $search_terms = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['s'] ) ) {&nbsp;</div></li><li><div>      $search_terms = stripslashes( $_REQUEST['s'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Parse the args.</span>&nbsp;</div></li><li><div>  $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>      'id' =&gt; false, &nbsp;</div></li><li><div>      'user_id' =&gt; $user_id, &nbsp;</div></li><li><div>      'secondary_item_id' =&gt; false, &nbsp;</div></li><li><div>      'component_name' =&gt; bp_notifications_get_registered_components(), &nbsp;</div></li><li><div>      'component_action' =&gt; $component_action, &nbsp;</div></li><li><div>      'is_new' =&gt; $is_new, &nbsp;</div></li><li><div>      'search_terms' =&gt; $search_terms, &nbsp;</div></li><li><div>      'order_by' =&gt; 'date_notified', &nbsp;</div></li><li><div>      'sort_order' =&gt; 'DESC', &nbsp;</div></li><li><div>      'meta_query' =&gt; false, &nbsp;</div></li><li><div>      'date_query' =&gt; false, &nbsp;</div></li><li><div>      'page' =&gt; 1, &nbsp;</div></li><li><div>      'per_page' =&gt; 25, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// These are additional arguments that are not available in</span>&nbsp;</div></li><li><div>      <span class="comment">// BP_Notifications_Notification::get().</span>&nbsp;</div></li><li><div>      'max' =&gt; false, &nbsp;</div></li><li><div>      'page_arg' =&gt; 'npage', &nbsp;</div></li><li><div> ), 'has_notifications' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the notifications.</span>&nbsp;</div></li><li><div>  $query_loop = new BP_Notifications_Template( $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Setup the global query loop.</span>&nbsp;</div></li><li><div>  buddypress()-&gt;notifications-&gt;query_loop = $query_loop;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the user has notifications to display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool                      $value      Whether or not there are notifications to display.</span>&nbsp;</div></li><li><div><span class="comment">   * @param BP_Notifications_Template $query_loop BP_Notifications_Template object instance.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array                     $r          Array of arguments passed into the BP_Notifications_Template class.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_has_notifications', $query_loop-&gt;has_notifications(), $query_loop, $r );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the notifications returned by the template loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array List of notifications.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notifications() {&nbsp;</div></li><li><div>  return buddypress()-&gt;notifications-&gt;query_loop-&gt;notifications();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the current notification object in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return object The current notification within the loop.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification() {&nbsp;</div></li><li><div>  return buddypress()-&gt;notifications-&gt;query_loop-&gt;the_notification();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Loop Output ***************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_id() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int ID of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_id() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $id ID of the notification being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_id', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_item_id() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_item_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int ID of the item associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_item_id() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $item_id ID of the associated item.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_item_id', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;item_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the secondary associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_secondary_item_id() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_secondary_item_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the secondary associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int ID of the secondary item associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_secondary_item_id() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the secondary associated item ID of the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $secondary_item_id ID of the secondary associated item.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_secondary_item_id', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;secondary_item_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the name of the component associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_component_name() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_component_name();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the name of the component associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int Name of the component associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_component_name() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the name of the component associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $component_name Name of the component associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_component_name', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;component_name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the name of the action associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_component_action() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_component_action();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the name of the action associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int Name of the action associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_component_action() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the name of the action associated with the notification currently being iterated on.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $component_action Name of the action associated with the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_component_action', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;component_action );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_date_notified() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_date_notified();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_date_notified() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $date_notified Timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_date_notified', buddypress()-&gt;notifications-&gt;query_loop-&gt;notification-&gt;date_notified );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_time_since() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_time_since();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Timestamp of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_time_since() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Get the notified date.</span>&nbsp;</div></li><li><div>      $date_notified = bp_get_the_notification_date_notified();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Notified date has legitimate data.</span>&nbsp;</div></li><li><div>      if ( '0000-00-00 00:00:00' !== $date_notified ) {&nbsp;</div></li><li><div>          $retval = bp_core_time_since( $date_notified );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Notified date is empty, so return a fun string.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $retval = __( 'Date not found', 'buddypress' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the time since value of the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval Time since value for current notification.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_time_since', $retval );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output full-text description for a specific notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_description() {&nbsp;</div></li><li><div>  echo bp_get_the_notification_description();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get full-text description for a specific notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_description() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>      $notification = $bp-&gt;notifications-&gt;query_loop-&gt;notification;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Callback function exists.</span>&nbsp;</div></li><li><div>      if ( isset( $bp-&gt;{ $notification-&gt;component_name }-&gt;notification_callback ) && is_callable( $bp-&gt;{ $notification-&gt;component_name }-&gt;notification_callback ) ) {&nbsp;</div></li><li><div>          $description = call_user_func( $bp-&gt;{ $notification-&gt;component_name }-&gt;notification_callback, $notification-&gt;component_action, $notification-&gt;item_id, $notification-&gt;secondary_item_id, 1, 'string', $notification-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// @deprecated format_notification_function - 1.5</span>&nbsp;</div></li><li><div>      } elseif ( isset( $bp-&gt;{ $notification-&gt;component_name }-&gt;format_notification_function ) && function_exists( $bp-&gt;{ $notification-&gt;component_name }-&gt;format_notification_function ) ) {&nbsp;</div></li><li><div>          $description = call_user_func( $bp-&gt;{ $notification-&gt;component_name }-&gt;format_notification_function, $notification-&gt;component_action, $notification-&gt;item_id, $notification-&gt;secondary_item_id, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Allow non BuddyPress components to hook in.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** This filter is documented in bp-notifications/bp-notifications-functions.php */</span>&nbsp;</div></li><li><div>          $description = apply_filters_ref_array( 'bp_notifications_get_notifications_for_user', array( $notification-&gt;component_action, $notification-&gt;item_id, $notification-&gt;secondary_item_id, 1, 'string', $notification-&gt;component_action, $notification-&gt;component_name, $notification-&gt;id ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the full-text description for a specific notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.3.0 Added the `$notification` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $description  Full-text description for a specific notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param object $notification Notification object.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_description', $description, $notification );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the mark read link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_mark_read_link( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_the_notification_mark_read_link( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the mark read link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_mark_read_link( $user_id = 0 ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = sprintf( '&lt;a href=&quot;%1$s&quot; class=&quot;mark-read primary&quot;&gt;%2$s&lt;/a&gt;', esc_url( bp_get_the_notification_mark_read_url( $user_id ) ), __( 'Read', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the mark read link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  HTML for the mark read link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_mark_read_link', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL used for marking a single notification as read.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Since this function directly outputs a URL, it is escaped.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_mark_read_url( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo esc_url( bp_get_the_notification_mark_read_url( $user_id ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the URL used for marking a single notification as read.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_mark_read_url( $user_id = 0 ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Get the notification ID.</span></span>&nbsp;</div></li><li><div>      $id = bp_get_the_notification_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Get the args to add to the URL.</span></span></span>&nbsp;</div></li><li><div>      $args = array(&nbsp;</div></li><li><div>          'action' =&gt; 'read', &nbsp;</div></li><li><div>          'notification_id' =&gt; $id&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Add the args to the URL.</span></span>&nbsp;</div></li><li><div>      $url = add_query_arg( $args, bp_get_notifications_unread_permalink( $user_id ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Add the nonce.</span></span></span>&nbsp;</div></li><li><div>      $url = wp_nonce_url( $url, 'bp_notification_mark_read_' . $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL used for marking a single notification as read.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $url     URL to use for marking the single notification as read.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_mark_read_url', $url, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the mark unread link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_mark_unread_link( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_the_notification_mark_unread_link();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the mark unread link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_mark_unread_link( $user_id = 0 ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = sprintf( '&lt;a href=&quot;%1$s&quot; class=&quot;mark-unread primary&quot;&gt;%2$s&lt;/a&gt;', esc_url( bp_get_the_notification_mark_unread_url( $user_id ) ), __( 'Unread', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the link used for marking a single notification as unread.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  HTML for the mark unread link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_mark_unread_link', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL used for marking a single notification as unread.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Since this function directly outputs a URL, it is escaped.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_mark_unread_url( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo esc_url( bp_get_the_notification_mark_unread_url( $user_id ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the URL used for marking a single notification as unread.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_mark_unread_url( $user_id = 0 ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Get the notification ID.</span></span>&nbsp;</div></li><li><div>      $id = bp_get_the_notification_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Get the args to add to the URL.</span></span></span>&nbsp;</div></li><li><div>      $args = array(&nbsp;</div></li><li><div>          'action' =&gt; 'unread', &nbsp;</div></li><li><div>          'notification_id' =&gt; $id&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Add the args to the URL.</span></span>&nbsp;</div></li><li><div>      $url = add_query_arg( $args, bp_get_notifications_read_permalink( $user_id ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Add the nonce.</span></span></span>&nbsp;</div></li><li><div>      $url = wp_nonce_url( $url, 'bp_notification_mark_unread_' . $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL used for marking a single notification as unread.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $url     URL to use for marking the single notification as unread.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_mark_unread_url', $url, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the mark link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_mark_link( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_the_notification_mark_link( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the mark link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_mark_link( $user_id = 0 ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_current_action( 'read' ) ) {&nbsp;</div></li><li><div>          $retval = bp_get_the_notification_mark_unread_link( $user_id );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $retval = bp_get_the_notification_mark_read_link( $user_id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the mark link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  The mark link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_mark_link', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the delete link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_delete_link( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo bp_get_the_notification_delete_link( $user_id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the delete link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_delete_link( $user_id = 0 ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = sprintf( '&lt;a href=&quot;%1$s&quot; class=&quot;delete secondary confirm&quot;&gt;%2$s&lt;/a&gt;', esc_url( bp_get_the_notification_delete_url( $user_id ) ), __( 'Delete', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the delete link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval  HTML for the delete link for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_delete_link', $retval, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL used for deleting a single notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Since this function directly outputs a URL, it is escaped.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_delete_url( $user_id = 0 ) {&nbsp;</div></li><li><div>  echo esc_url( bp_get_the_notification_delete_url( $user_id ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the URL used for deleting a single notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_delete_url( $user_id = 0 ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = 0 === $user_id ? bp_displayed_user_id() : $user_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// URL to add nonce to.</span>&nbsp;</div></li><li><div>      if ( bp_is_current_action( 'unread' ) ) {&nbsp;</div></li><li><div>          $link = bp_get_notifications_unread_permalink( $user_id );&nbsp;</div></li><li><div>      } elseif ( bp_is_current_action( 'read' ) ) {&nbsp;</div></li><li><div>          $link = bp_get_notifications_read_permalink( $user_id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Get the ID.</span>&nbsp;</div></li><li><div>      $id = bp_get_the_notification_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Get the args to add to the URL.</span></span></span>&nbsp;</div></li><li><div>      $args = array(&nbsp;</div></li><li><div>          'action' =&gt; 'delete', &nbsp;</div></li><li><div>          'notification_id' =&gt; $id&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add the args.</span>&nbsp;</div></li><li><div>      $url = add_query_arg( $args, $link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment">// Add the nonce.</span></span></span>&nbsp;</div></li><li><div>      $url = wp_nonce_url( $url, 'bp_notification_delete_' . $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL used for deleting a single notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added $user_id as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $url     URL used for deleting a single notification.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id The user ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_delete_url', $url, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the action links for the current notification.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added $user_id as a parameter to $args.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args Array of arguments.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_notification_action_links( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_the_notification_action_links( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the action links for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added $user_id as a parameter to $args.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $before  HTML before the links.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $after   HTML after the links.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $sep     HTML between the links.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type array  $links   Array of links to implode by 'sep'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int    $user_id User ID to fetch action links for. Defaults to displayed user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string HTML links for actions to take on single notifications.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_notification_action_links( $args = '' ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment"><span class="comment">// Set default user ID to use.</span></span></span></span></span></span></span></span>&nbsp;</div></li><li><div>      $user_id = isset( $args['user_id'] ) ? $args['user_id'] : bp_displayed_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Parse.</span>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'before' =&gt; '', &nbsp;</div></li><li><div>          'after' =&gt; '', &nbsp;</div></li><li><div>          'sep' =&gt; ' | ', &nbsp;</div></li><li><div>          'links' =&gt; array(&nbsp;</div></li><li><div>              bp_get_the_notification_mark_link( $user_id ), &nbsp;</div></li><li><div>              bp_get_the_notification_delete_link( $user_id )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Build the links.</span>&nbsp;</div></li><li><div>      $retval = $r['before'] . implode( $r['links'], $r['sep'] ) . $r['after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the action links for the current notification.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval HTML links for actions to take on single notifications.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r      Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_notification_action_links', $retval, $r );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the pagination count for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_pagination_count() {&nbsp;</div></li><li><div>  echo bp_get_notifications_pagination_count();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the pagination count for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string HTML for the pagination count.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_pagination_count() {&nbsp;</div></li><li><div>      $query_loop = buddypress()-&gt;notifications-&gt;query_loop;&nbsp;</div></li><li><div>      $start_num = intval( ( $query_loop-&gt;pag_page - 1 ) * $query_loop-&gt;pag_num ) + 1;&nbsp;</div></li><li><div>      $from_num = bp_core_number_format( $start_num );&nbsp;</div></li><li><div>      $to_num = bp_core_number_format( ( $start_num + ( $query_loop-&gt;pag_num - 1 ) &gt; $query_loop-&gt;total_notification_count ) ? $query_loop-&gt;total_notification_count : $start_num + ( $query_loop-&gt;pag_num - 1 ) );&nbsp;</div></li><li><div>      $total = bp_core_number_format( $query_loop-&gt;total_notification_count );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 1 == $query_loop-&gt;total_notification_count ) {&nbsp;</div></li><li><div>          $pag = __( 'Viewing 1 notification', 'buddypress' );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $pag = sprintf( _n( 'Viewing %1$s - %2$s of %3$s notification', 'Viewing %1$s - %2$s of %3$s notifications', $query_loop-&gt;total_notification_count, 'buddypress' ), $from_num, $to_num, $total );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the pagination count for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $pag HTML for the pagination count.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_notifications_pagination_count', $pag );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the pagination links for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_pagination_links() {&nbsp;</div></li><li><div>  echo bp_get_notifications_pagination_links();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the pagination links for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string HTML for the pagination links.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_notifications_pagination_links() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the pagination links for the current notification loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $pag_links HTML for the pagination links.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_notifications_pagination_links', buddypress()-&gt;notifications-&gt;query_loop-&gt;pag_links );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Form Helpers **************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the form for changing the sort order of notifications.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_sort_order_form() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Setup local variables.</span>&nbsp;</div></li><li><div>  $orders = array( 'DESC', 'ASC' );&nbsp;</div></li><li><div>  $selected = 'DESC';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check for a custom sort_order.</span>&nbsp;</div></li><li><div>  if ( !empty( $_REQUEST['sort_order'] ) ) {&nbsp;</div></li><li><div>      if ( in_array( $_REQUEST['sort_order'], $orders ) ) {&nbsp;</div></li><li><div>          $selected = $_REQUEST['sort_order'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;form action=&quot;&quot; method=&quot;get&quot; id=&quot;notifications-sort-order&quot;&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;notifications-sort-order-list&quot;&gt;&lt;?php esc_html_e( 'Order By:', 'buddypress' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;select id=&quot;notifications-sort-order-list&quot; name=&quot;sort_order&quot; onchange=&quot;this.form.submit();&quot;&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;DESC&quot; &lt;?php selected( $selected, 'DESC' ); ?&gt;&gt;&lt;?php _e( 'Newest First', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;ASC&quot;  &lt;?php selected( $selected, 'ASC' ); ?&gt;&gt;&lt;?php _e( 'Oldest First', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>      &lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;noscript&gt;&nbsp;</div></li><li><div>          &lt;input id=&quot;submit&quot; type=&quot;submit&quot; name=&quot;form-submit&quot; class=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e( 'Go', 'buddypress' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>      &lt;/noscript&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the dropdown for bulk management of notifications.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_notifications_bulk_management_dropdown() {&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>  &lt;label class=&quot;bp-screen-reader-text&quot; for=&quot;notification-select&quot;&gt;&lt;?php&nbsp;</div></li><li><div>      <span class="comment">/** translators: accessibility text */</span>&nbsp;</div></li><li><div>      _e( 'Select Bulk Action', 'buddypress' );&nbsp;</div></li><li><div>  ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>  &lt;select name=&quot;notification_bulk_action&quot; id=&quot;notification-select&quot;&gt;&nbsp;</div></li><li><div>      &lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;&lt;?php _e( 'Bulk Actions', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      &lt;?php if ( bp_is_current_action( 'unread' ) ) : ?&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;read&quot;&gt;&lt;?php _e( 'Mark read', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>      &lt;?php elseif ( bp_is_current_action( 'read' ) ) : ?&gt;&nbsp;</div></li><li><div>          &lt;option value=&quot;unread&quot;&gt;&lt;?php _e( 'Mark unread', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>      &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>      &lt;option value=&quot;delete&quot;&gt;&lt;?php _e( 'Delete', 'buddypress' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>  &lt;/select&gt;&nbsp;</div></li><li><div>  &lt;input type=&quot;submit&quot; id=&quot;notification-bulk-manage&quot; class=&quot;button action&quot; value=&quot;&lt;?php esc_attr_e( 'Apply', 'buddypress' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2020 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>