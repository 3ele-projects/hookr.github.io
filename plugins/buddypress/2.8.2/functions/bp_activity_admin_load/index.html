<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr function lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr function lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr function lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr function ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr function gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr function" data-site="plugin" data-version="2.8.2" data-slug="buddypress" data-type="function" data-id="49637"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp_activity_admin_load | function | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="bp_activity_admin_load, function, plugin, buddypress, 2.8.2" /><meta name="description" content="Set up the Activity admin page." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=3fac8270e65e31a1eb2f6ab162c79478' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/functions/bp_activity_admin_load/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fbp_activity_admin_load%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffunctions%2Fbp_activity_admin_load%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.8.2-function-bp_activity_admin_load","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp_activity_admin_load" class="single single-function single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.2." href="http://hookr.io/plugins/buddypress/2.8.2/" class="H_VERSION"><span property="name">2.8.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to functions." href="http://hookr.io/plugins/buddypress/2.8.2/functions/" class=""><span property="name">functions</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp_activity_admin_load</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="function"><ul role="navigation"><li class="" data-id="all" data-count="7837"><a href="http://hookr.io/plugins/buddypress/2.8.2/all/" title="All">All <span class="count badge">7837</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3621"><a href="http://hookr.io/plugins/buddypress/2.8.2/hooks/" title="Hooks">Hooks <span class="count badge">3621</span></a></li><li class="" data-id="action" data-count="1727"><a href="http://hookr.io/plugins/buddypress/2.8.2/actions/" title="Actions">Actions <span class="count badge">1727</span></a></li><li class="" data-id="filter" data-count="1894"><a href="http://hookr.io/plugins/buddypress/2.8.2/filters/" title="Filters">Filters <span class="count badge">1894</span></a></li><li class="" data-id="class" data-count="181"><a href="http://hookr.io/plugins/buddypress/2.8.2/classes/" title="Classes">Classes <span class="count badge">181</span></a></li><li class="" data-id="constant" data-count="161"><a href="http://hookr.io/plugins/buddypress/2.8.2/constants/" title="Constants">Constants <span class="count badge">161</span></a></li><li class="active" data-id="function" data-count="3874"><a href="http://hookr.io/plugins/buddypress/2.8.2/functions/" title="Functions">Functions <span class="count badge">3874</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>bp_activity_admin_load</strong></h1><p>Set up the Activity admin page.</p> </section> <section id="description"><h2>Description</h2><pre><div>bp_activity_admin_load();&nbsp;</div></pre><p>Does the following: - Register contextual help and screen options for this admin page. - Enqueues scripts and styles. - Catches POST and GET <a href="http://hookr.io/classes/requests" title="requests" class="code class"><code>requests</code></a> related to Activity.</p> </section><hr /> <section id="usage"><h2>Usage</h2><pre><ol><li><div>if ( !function_exists( '<span class="func">bp_activity_admin_load</span>' ) ) {&nbsp;</div></li><li><div>    require_once ABSPATH . PLUGINDIR . 'buddypress/bp-activity/bp-activity-admin.php';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div> &nbsp;</div></li><li><div><span class="comment">// NOTICE! Understand what this does before running.</span>&nbsp;</div></li><li><div><span class="param">$result</span> = <span class="func">bp_activity_admin_load</span>(<span class="param"></span>);&nbsp;</div></li><li><div>   &nbsp;</div></li></ol></pre></section><hr /> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The function is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/buddypress/2.8.2/files/bp-activity-bp-activity-admin/" class="file">/bp-activity/bp-activity-admin.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="26" class="block" start="200"><li><div>function bp_activity_admin_load() {&nbsp;</div></li><li><div>    global $bp_activity_list_table;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $bp =buddypress);&nbsp;</div></li><li><div>    $doaction = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_admin_list_table_current_bulk_action/" data-id="1120667" title="bp_admin_list_table_current_bulk_action" class="function">bp_admin_list_table_current_bulk_action</a>();&nbsp;</div></li><li><div>    $min = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_core_get_minified_asset_suffix/" data-id="1122083" title="bp_core_get_minified_asset_suffix" class="function">bp_core_get_minified_asset_suffix</a>();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Fires at top of Activity admin page.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 1.6.0&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $doaction Current $_GET action being performed in admin screen.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/do_action/" data-id="1123149" title="do_action" class="function">do_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/add_action/bp_activity_admin_load/" data-id="1120096" title="bp_activity_admin_load" class="action">'bp_activity_admin_load'</a>, $doaction );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Edit screen.&nbsp;</div></li><li><div>    if ( 'edit' == $doaction && ! empty( $_GET['aid'] ) ) {&nbsp;</div></li><li><div>        // Columns screen option.&nbsp;</div></li><li><div>        add_screen_option( 'layout_columns', array( 'default' =&gt; 2, 'max' =&gt; 2, ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>            'id' =&gt; 'bp-activity-edit-overview', &nbsp;</div></li><li><div>            'title' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'Overview', buddypress ), &nbsp;</div></li><li><div>            'content' =&gt;&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'You edit activities made on your site similar to the way you edit a comment. This is useful if you need to change which page the activity links to, or when you notice that the author has made a typographical error.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'The two big editing areas for the activity title and content are fixed in place, but you can reposition all the other boxes using drag and drop, and can minimize or expand them by clicking the title bar of each box. Use the Screen Options tab to unhide more boxes (Primary Item/Secondary Item, Link, Type, Author ID) or to choose a 1- or 2-column layout for this screen.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'You can also moderate the activity from this screen using the Status box, where you can also change the timestamp of the activity.', buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>            'id' =&gt; 'bp-activity-edit-advanced', &nbsp;</div></li><li><div>            'title' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'Item, Link, Type', buddypress ), &nbsp;</div></li><li><div>            'content' =&gt;&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;strong&gt;Primary Item/Secondary Item&lt;/strong&gt; - These identify the object that created the activity. For example, the fields could reference a comment left on a specific site. Some types of activity may only use one, or none, of these fields.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;strong&gt;Link&lt;/strong&gt; - Used by some types of activity (e.g blog posts and comments, and forum topics and replies) to store a link back to the original content.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;strong&gt;Type&lt;/strong&gt; - Each distinct kind of activity has its own type. For example, &lt;code&gt;created_group&lt;/code&gt; is used when a group is created and &lt;code&gt;joined_group&lt;/code&gt; is used when a user joins a group.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'For information about when and how <a href="http://hookr.io/plugins/buddypress/2.8.2/classes/buddy_press/" data-id="1129564" title="BuddyPress" class="class">BuddyPress</a> uses all of these settings, see the Managing Activity link in the panel to the side.', buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Help panel - sidebar links.&nbsp;</div></li><li><div>        get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>            '&lt;p&gt;&lt;strong&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'For more information:', buddypress ) . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>            '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;a href=&quot;https://codex.buddypress.org/administrator-guide/activity-stream-management-panels/&quot;&gt;Managing Activity&lt;/a&gt;', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>            '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;a href=&quot;https://buddypress.org/support/&quot;&gt;Support Forums&lt;/a&gt;', buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register metaboxes for the edit screen.&nbsp;</div></li><li><div>        add_meta_box( 'submitdiv', <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Status', 'activity admin edit screen', buddypress ), '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_edit_metabox_status/" data-id="1119762" title="bp_activity_admin_edit_metabox_status" class="function">bp_activity_admin_edit_metabox_status</a>', get_current_screen()-&gt;id, 'side', 'core' );&nbsp;</div></li><li><div>        add_meta_box( 'bp_activity_itemids', <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Primary Item/Secondary Item', 'activity admin edit screen', buddypress ), '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_edit_metabox_itemids/" data-id="1119770" title="bp_activity_admin_edit_metabox_itemids" class="function">bp_activity_admin_edit_metabox_itemids</a>', get_current_screen()-&gt;id, 'normal', 'core' );&nbsp;</div></li><li><div>        add_meta_box( 'bp_activity_link', <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Link', 'activity admin edit screen', buddypress ), '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_edit_metabox_link/" data-id="1119763" title="bp_activity_admin_edit_metabox_link" class="function">bp_activity_admin_edit_metabox_link</a>', get_current_screen()-&gt;id, 'normal', 'core' );&nbsp;</div></li><li><div>        add_meta_box( '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_type/" data-id="1120808" title="bp_activity_type" class="function">bp_activity_type</a>', <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Type', 'activity admin edit screen', buddypress ), '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_edit_metabox_type/" data-id="1119768" title="bp_activity_admin_edit_metabox_type" class="function">bp_activity_admin_edit_metabox_type</a>', get_current_screen()-&gt;id, 'normal', 'core' );&nbsp;</div></li><li><div>        add_meta_box( 'bp_activity_userid', <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Author ID', 'activity admin edit screen', buddypress ), '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_edit_metabox_userid/" data-id="1119765" title="bp_activity_admin_edit_metabox_userid" class="function">bp_activity_admin_edit_metabox_userid</a>', get_current_screen()-&gt;id, 'normal', 'core' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires after the registration of all of the default activity meta boxes.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.4.0&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/do_action/" data-id="1123149" title="do_action" class="function">do_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/bp_activity_admin_meta_boxes/" data-id="1119820" title="bp_activity_admin_meta_boxes" class="action">'bp_activity_admin_meta_boxes'</a> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Enqueue JavaScript files.&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_enqueue_script/" data-id="1123331" title="wp_enqueue_script" class="function">wp_enqueue_script</a>( 'postbox' );&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_enqueue_script/" data-id="1123331" title="wp_enqueue_script" class="function">wp_enqueue_script</a>( 'dashboard' );&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_enqueue_script/" data-id="1123331" title="wp_enqueue_script" class="function">wp_enqueue_script</a>( 'comment' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Index screen.&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        // Create the Activity screen list table.&nbsp;</div></li><li><div>        $bp_activity_list_table = new <a href="http://hookr.io/plugins/buddypress/2.8.2/classes/bp_activity_list_table/" data-id="1119920" title="BP_Activity_List_Table" class="class">BP_Activity_List_Table</a>();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // The per_page screen option.&nbsp;</div></li><li><div>        add_screen_option( 'per_page', array( 'label' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/x/" data-id="1123632" title="_x" class="function">_x</a>( 'Activity', 'Activity items per page (screen options)', buddypress )) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Help panel - overview text.&nbsp;</div></li><li><div>        get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>            'id' =&gt; 'bp-activity-overview', &nbsp;</div></li><li><div>            'title' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'Overview', buddypress ), &nbsp;</div></li><li><div>            'content' =&gt;&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'You can manage activities made on your site similar to the way you manage comments and other content. This screen is customizable in the same ways as other management screens, and you can act on activities using the on-hover action links or the Bulk Actions.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'There are many different types of activities. Some are generated automatically by <a href="http://hookr.io/plugins/buddypress/2.8.2/classes/buddy_press/" data-id="1129564" title="BuddyPress" class="class">BuddyPress</a> and other plugins, and some are entered directly by a user in the form of status update. To help manage the different activity types, use the filter dropdown box to switch between them.', buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Help panel - moderation text.&nbsp;</div></li><li><div>        get_current_screen()-&gt;add_help_tab( array(&nbsp;</div></li><li><div>            'id' =&gt; 'bp-activity-moderating', &nbsp;</div></li><li><div>            'title' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'Moderating Activity', buddypress ), &nbsp;</div></li><li><div>            'content' =&gt;&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'In the &lt;strong&gt;Activity&lt;/strong&gt; column, above each activity it says &#8220;Submitted on, &#8221; followed by the date and time the activity item was generated on your site. Clicking on the date/time link will take you to that activity on your live site. Hovering over any activity gives you options to reply, edit, spam mark, or delete that activity.', buddypress ) . '&lt;/p&gt;' .&nbsp;</div></li><li><div>                '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( &quot;In the &lt;strong&gt;In Response To&lt;/strong&gt; column, if the activity was in reply to another activity, it shows that activity's author's picture and name, and a link to that activity on your live site. If there is a small bubble, the number in it shows how many other activities are related to this one; these are usually comments. Clicking the bubble will filter the activity screen to show only related activity items.&quot;, buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Help panel - sidebar links.&nbsp;</div></li><li><div>        get_current_screen()-&gt;set_help_sidebar(&nbsp;</div></li><li><div>            '&lt;p&gt;&lt;strong&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'For more information:', buddypress ) . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>            '&lt;p&gt;' . <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( '&lt;a href=&quot;https://buddypress.org/support/&quot;&gt;Support Forums&lt;/a&gt;', buddypress ) . '&lt;/p&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add accessible hidden heading and text for Activity screen pagination.&nbsp;</div></li><li><div>        if ( <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_get_major_wp_version/" data-id="1121817" title="bp_get_major_wp_version" class="function">bp_get_major_wp_version</a>() &gt;= 4.4 ) {&nbsp;</div></li><li><div>            get_current_screen()-&gt;set_screen_reader_content( array(&nbsp;</div></li><li><div>                /** translators: accessibility text */&nbsp;</div></li><li><div>                'heading_pagination' =&gt; <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/__/" data-id="1123623" title="__" class="function">__</a>( 'Activity list navigation', buddypress ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Enqueue CSS and JavaScript.&nbsp;</div></li><li><div>    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_enqueue_script/" data-id="1123331" title="wp_enqueue_script" class="function">wp_enqueue_script</a>( 'bp_activity_admin_js', $bp-&gt;plugin_url . &quot;bp-activity/admin/js/admin{$min}.js&quot;, array( 'jquery', 'wp-ajax-response' ), <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_get_version/" data-id="1121977" title="bp_get_version" class="function">bp_get_version</a>(), true );&nbsp;</div></li><li><div>    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_localize_script/" data-id="1123328" title="wp_localize_script" class="function">wp_localize_script</a>( 'bp_activity_admin_js', 'bp_activity_admin_vars', array(&nbsp;</div></li><li><div>        'page' =&gt; get_current_screen()-&gt;id&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_enqueue_style/" data-id="1123375" title="wp_enqueue_style" class="function">wp_enqueue_style</a>( 'bp_activity_admin_css', $bp-&gt;plugin_url . &quot;bp-activity/admin/css/admin{$min}.css&quot;, array(), <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_get_version/" data-id="1121977" title="bp_get_version" class="function">bp_get_version</a>() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    wp_style_add_data( 'bp_activity_admin_css', 'rtl', true );&nbsp;</div></li><li><div>    if ( $min ) {&nbsp;</div></li><li><div>        wp_style_add_data( 'bp_activity_admin_css', 'suffix', $min );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Fires after the activity js and style has been enqueued.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.4.0&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/do_action/" data-id="1123149" title="do_action" class="function">do_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/bp_activity_admin_enqueue_scripts/" data-id="1119821" title="bp_activity_admin_enqueue_scripts" class="action">'bp_activity_admin_enqueue_scripts'</a> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Handle spam/un-spam/delete of activities.&nbsp;</div></li><li><div>    if ( !empty( $doaction ) && ! in_array( $doaction, array( '-1', 'edit', 'save', ) ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Build redirection URL.&nbsp;</div></li><li><div>        $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/remove_query_arg/" data-id="1123168" title="remove_query_arg" class="function">remove_query_arg</a>( array( 'aid', 'deleted', error, 'spammed', 'unspammed', ), <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_get_referer/" data-id="1123179" title="wp_get_referer" class="function">wp_get_referer</a>() );&nbsp;</div></li><li><div>        $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( 'paged', $bp_activity_list_table-&gt;get_pagenum(), $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get activity IDs.&nbsp;</div></li><li><div>        $activity_ids = array_map( '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/absint/" data-id="1123182" title="absint" class="function">absint</a>', (array) $_REQUEST['aid'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters list of IDs being spammed/un-spammed/deleted.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 1.6.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array $activity_ids Activity IDs to spam/un-spam/delete.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $activity_ids = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/apply_filters/" data-id="1123143" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/filters/bp_activity_admin_action_activity_ids/" data-id="1119822" title="bp_activity_admin_action_activity_ids" class="filter">'bp_activity_admin_action_activity_ids'</a>, $activity_ids );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Is this a bulk request?&nbsp;</div></li><li><div>        if ( 'bulk_' == substr( $doaction, 0, 5 ) && ! empty( $_REQUEST['aid'] ) ) {&nbsp;</div></li><li><div>            // Check this is a valid form submission.&nbsp;</div></li><li><div>            check_admin_referer( 'bulk-activities' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Trim 'bulk_' off the action name to avoid duplicating a ton of code.&nbsp;</div></li><li><div>            $doaction = substr( $doaction, 5 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // This is a request to delete, spam, or un-spam, a single item.&nbsp;</div></li><li><div>        } elseif ( !empty( $_REQUEST['aid'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Check this is a valid form submission.&nbsp;</div></li><li><div>            check_admin_referer( 'spam-activity_' . $activity_ids[0] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Initialise counters for how many of each type of item we perform an action on.&nbsp;</div></li><li><div>        $deleted = $spammed = $unspammed = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Store any errors that occurs when updating the database items.&nbsp;</div></li><li><div>        $errors = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // &quot;We'd like to shoot the monster, could you move, please?&quot;&nbsp;</div></li><li><div>        foreach ( $activity_ids as $activity_id ) {&nbsp;</div></li><li><div>            // @todo: Check the permissions on each&nbsp;</div></li><li><div>            // if ( ! current_user_can( 'bp_edit_activity', $activity_id ) )&nbsp;</div></li><li><div>            // continue;&nbsp;</div></li><li><div>            // Get the activity from the database.&nbsp;</div></li><li><div>            $activity = new <a href="http://hookr.io/plugins/buddypress/2.8.2/classes/bp_activity_activity/" data-id="1119906" title="BP_Activity_Activity" class="class">BP_Activity_Activity</a>( $activity_id );&nbsp;</div></li><li><div>            if ( empty( $activity-&gt;component ) ) {&nbsp;</div></li><li><div>                $errors[] = $activity_id;&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            switch ( $doaction ) {&nbsp;</div></li><li><div>                case 'delete' :&nbsp;</div></li><li><div>                    if ( 'activity_comment' == $activity-&gt;type )&nbsp;</div></li><li><div>                        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_delete_comment/" data-id="1120256" title="bp_activity_delete_comment" class="function">bp_activity_delete_comment</a>( $activity-&gt;item_id, $activity-&gt;id );&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_delete/" data-id="1120251" title="bp_activity_delete" class="function">bp_activity_delete</a>( array( 'id' =&gt; $activity-&gt;id ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $deleted++;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                case 'ham' :&nbsp;</div></li><li><div>                    /**&nbsp;</div></li><li><div>                     * Remove moderation and blacklist checks in case we want to ham an activity&nbsp;</div></li><li><div>                     * which contains one of these listed keys.&nbsp;</div></li><li><div>                     */&nbsp;</div></li><li><div>                    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/remove_action/" data-id="1123154" title="remove_action" class="function">remove_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/remove_action/bp_activity_before_save/" data-id="1121342" title="bp_activity_before_save" class="action">'bp_activity_before_save'</a>, '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_check_moderation_keys/" data-id="1119777" title="bp_activity_check_moderation_keys" class="function">bp_activity_check_moderation_keys</a>', 2 );&nbsp;</div></li><li><div>                    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/remove_action/" data-id="1123154" title="remove_action" class="function">remove_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/remove_action/bp_activity_before_save/" data-id="1121342" title="bp_activity_before_save" class="action">'bp_activity_before_save'</a>, '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_check_blacklist_keys/" data-id="1119778" title="bp_activity_check_blacklist_keys" class="function">bp_activity_check_blacklist_keys</a>', 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_mark_as_ham/" data-id="1120278" title="bp_activity_mark_as_ham" class="function">bp_activity_mark_as_ham</a>( $activity );&nbsp;</div></li><li><div>                    $result = $activity-&gt;save();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Check for anyerrorduring activity save.&nbsp;</div></li><li><div>                    if ( ! $result )&nbsp;</div></li><li><div>                        $errors[] = $activity-&gt;id;&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                        $unspammed++;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                case 'spam' :&nbsp;</div></li><li><div>                    <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_mark_as_spam/" data-id="1120276" title="bp_activity_mark_as_spam" class="function">bp_activity_mark_as_spam</a>( $activity );&nbsp;</div></li><li><div>                    $result = $activity-&gt;save();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Check for anyerrorduring activity save.&nbsp;</div></li><li><div>                    if ( ! $result )&nbsp;</div></li><li><div>                        $errors[] = $activity-&gt;id;&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                        $spammed++;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                default:&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Release memory.&nbsp;</div></li><li><div>            unset( $activity );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires before redirect for plugins to do something with activity.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Passes an activity array counts how many were spam, not spam, deleted, and IDs that were errors.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 1.6.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array  $value        Array holding spam, not spam, deleted counts,errorIDs.&nbsp;</div></li><li><div>         * @param string $redirect_to  URL to redirect to.&nbsp;</div></li><li><div>         * @param array  $activity_ids Original array of activity IDs.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/do_action/" data-id="1123149" title="do_action" class="function">do_action</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/bp_activity_admin_action_after/" data-id="1119825" title="bp_activity_admin_action_after" class="action">'bp_activity_admin_action_after'</a>, array( $spammed, $unspammed, $deleted, $errors ), $redirect_to, $activity_ids );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add arguments to the redirect URL so that on page reload, we can easily display what we've just done.&nbsp;</div></li><li><div>        if ( $spammed )&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( 'spammed', $spammed, $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $unspammed )&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( 'unspammed', $unspammed, $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $deleted )&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( 'deleted', $deleted, $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If anerroroccurred, pass back the activity ID that failed.&nbsp;</div></li><li><div>        if ( ! empty( $errors ) )&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( error, implode ( ', ', array_map( '<a href="http://hookr.io/plugins/buddypress/2.8.2/functions/absint/" data-id="1123182" title="absint" class="function">absint</a>', $errors ) ), $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters redirect URL after activity spamming/un-spamming/deletion occurs.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 1.6.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param string $redirect_to URL to redirect to.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_redirect/" data-id="1123782" title="wp_redirect" class="function">wp_redirect</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/apply_filters/" data-id="1123143" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/filters/bp_activity_admin_action_redirect/" data-id="1119826" title="bp_activity_admin_action_redirect" class="filter">'bp_activity_admin_action_redirect'</a>, $redirect_to ) );&nbsp;</div></li><li><div>        exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Save the edit.&nbsp;</div></li><li><div>    } elseif ( $doaction && 'save' == $doaction ) {&nbsp;</div></li><li><div>        // Build redirection URL.&nbsp;</div></li><li><div>        $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/remove_query_arg/" data-id="1123168" title="remove_query_arg" class="function">remove_query_arg</a>( array( 'action', 'aid', 'deleted', error, 'spammed', 'unspammed', ), $_SERVER['REQUEST_URI'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get activity ID.&nbsp;</div></li><li><div>        $activity_id = (int) $_REQUEST['aid'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check this is a valid form submission.&nbsp;</div></li><li><div>        check_admin_referer( 'edit-activity_' . $activity_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get the activity from the database.&nbsp;</div></li><li><div>        $activity = new <a href="http://hookr.io/plugins/buddypress/2.8.2/classes/bp_activity_activity/" data-id="1119906" title="BP_Activity_Activity" class="class">BP_Activity_Activity</a>( $activity_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If the activity doesn't exist, just redirect back to the index.&nbsp;</div></li><li><div>        if ( empty( $activity-&gt;component ) ) {&nbsp;</div></li><li><div>            <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_redirect/" data-id="1123782" title="wp_redirect" class="function">wp_redirect</a>( $redirect_to );&nbsp;</div></li><li><div>            exit;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check the form for the updated properties.&nbsp;</div></li><li><div>        // Store anyerrorthat occurs when updating the database item.&nbsp;</div></li><li><div>        $error = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity spam status.&nbsp;</div></li><li><div>        $prev_spam_status = $new_spam_status = false;&nbsp;</div></li><li><div>        if ( ! empty( $_POST['activity_status'] ) ) {&nbsp;</div></li><li><div>            $prev_spam_status = $activity-&gt;is_spam;&nbsp;</div></li><li><div>            $new_spam_status = ( 'spam' == $_POST['activity_status'] ) ? true : false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity action.&nbsp;</div></li><li><div>        if ( isset( $_POST['bp-activities-action'] ) )&nbsp;</div></li><li><div>            $activity-&gt;action = $_POST['bp-activities-action'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity content.&nbsp;</div></li><li><div>        if ( isset( $_POST['bp-activities-content'] ) )&nbsp;</div></li><li><div>            $activity-&gt;content = $_POST['bp-activities-content'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity primary link.&nbsp;</div></li><li><div>        if ( ! empty( $_POST['bp-activities-link'] ) )&nbsp;</div></li><li><div>            $activity-&gt;primary_link = $_POST['bp-activities-link'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity user ID.&nbsp;</div></li><li><div>        if ( ! empty( $_POST['bp-activities-userid'] ) )&nbsp;</div></li><li><div>            $activity-&gt;user_id = (int) $_POST['bp-activities-userid'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity item primary ID.&nbsp;</div></li><li><div>        if ( isset( $_POST['bp-activities-primaryid'] ) )&nbsp;</div></li><li><div>            $activity-&gt;item_id = (int) $_POST['bp-activities-primaryid'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity item secondary ID.&nbsp;</div></li><li><div>        if ( isset( $_POST['bp-activities-secondaryid'] ) )&nbsp;</div></li><li><div>            $activity-&gt;secondary_item_id = (int) $_POST['bp-activities-secondaryid'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity type.&nbsp;</div></li><li><div>        if ( ! empty( $_POST['bp-activities-type'] ) ) {&nbsp;</div></li><li><div>            $actions = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_get_activity_actions/" data-id="1119767" title="bp_activity_admin_get_activity_actions" class="function">bp_activity_admin_get_activity_actions</a>();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Check that the new type is a registered activity type.&nbsp;</div></li><li><div>            if ( in_array( $_POST['bp-activities-type'], $actions ) ) {&nbsp;</div></li><li><div>                $activity-&gt;type = $_POST['bp-activities-type'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Activity timestamp.&nbsp;</div></li><li><div>        if ( ! empty( $_POST['aa'] ) && ! empty( $_POST['mm'] ) && ! empty( $_POST['jj'] ) && ! empty( $_POST['hh'] ) && ! empty( $_POST['mn'] ) && ! empty( $_POST['ss'] ) ) {&nbsp;</div></li><li><div>            $aa = $_POST['aa'];&nbsp;</div></li><li><div>            $mm = $_POST['mm'];&nbsp;</div></li><li><div>            $jj = $_POST['jj'];&nbsp;</div></li><li><div>            $hh = $_POST['hh'];&nbsp;</div></li><li><div>            $mn = $_POST['mn'];&nbsp;</div></li><li><div>            $ss = $_POST['ss'];&nbsp;</div></li><li><div>            $aa = ( $aa &lt;= 0 ) ? date( 'Y' ) : $aa;&nbsp;</div></li><li><div>            $mm = ( $mm &lt;= 0 ) ? date( 'n' ) : $mm;&nbsp;</div></li><li><div>            $jj = ( $jj &gt; 31 ) ? 31 : $jj;&nbsp;</div></li><li><div>            $jj = ( $jj &lt;= 0 ) ? date( 'j' ) : $jj;&nbsp;</div></li><li><div>            $hh = ( $hh &gt; 23 ) ? $hh -24 : $hh;&nbsp;</div></li><li><div>            $mn = ( $mn &gt; 59 ) ? $mn -60 : $mn;&nbsp;</div></li><li><div>            $ss = ( $ss &gt; 59 ) ? $ss -60 : $ss;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Reconstruct the date into a timestamp.&nbsp;</div></li><li><div>            $gmt_date = sprintf( &quot;%04d-%02d-%02d %02d:%02d:%02d&quot;, $aa, $mm, $jj, $hh, $mn, $ss );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $activity-&gt;date_recorded = $gmt_date;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Has the spam status has changed?&nbsp;</div></li><li><div>        if ( $new_spam_status != $prev_spam_status ) {&nbsp;</div></li><li><div>            if ( $new_spam_status )&nbsp;</div></li><li><div>                <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_mark_as_spam/" data-id="1120276" title="bp_activity_mark_as_spam" class="function">bp_activity_mark_as_spam</a>( $activity );&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>                <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_mark_as_ham/" data-id="1120278" title="bp_activity_mark_as_ham" class="function">bp_activity_mark_as_ham</a>( $activity );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Save.&nbsp;</div></li><li><div>        $result = $activity-&gt;save();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Clear the activity stream first page cache, in case this activity's timestamp was changed.&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_cache_delete/" data-id="1123335" title="wp_cache_delete" class="function">wp_cache_delete</a>( 'bp_activity_sitewide_front', 'bp' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check for anyerrorduring activity save.&nbsp;</div></li><li><div>        if ( false === $result )&nbsp;</div></li><li><div>            $error = $activity-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires before redirect so plugins can do something first on save action.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 1.6.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array $value Array holding activity object and ID that holds error.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/do_action_ref_array/" data-id="1123151" title="do_action_ref_array" class="function">do_action_ref_array</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/actions/bp_activity_admin_edit_after/" data-id="1119827" title="bp_activity_admin_edit_after" class="action">'bp_activity_admin_edit_after'</a>, array( &$activity, $error ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If anerroroccurred, pass back the activity ID that failed.&nbsp;</div></li><li><div>        if ( $error )&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( error, $error, $redirect_to );&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $redirect_to = <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/add_query_arg/" data-id="1123166" title="add_query_arg" class="function">add_query_arg</a>( 'updated', $activity-&gt;id, $redirect_to );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filters URL to redirect to after saving.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 1.6.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param string $redirect_to URL to redirect to.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_redirect/" data-id="1123782" title="wp_redirect" class="function">wp_redirect</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/apply_filters/" data-id="1123143" title="apply_filters" class="function">apply_filters</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/filters/bp_activity_admin_edit_redirect/" data-id="1119828" title="bp_activity_admin_edit_redirect" class="filter">'bp_activity_admin_edit_redirect'</a>, $redirect_to ) );&nbsp;</div></li><li><div>        exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // If a referrer and a nonce is supplied, but no action, redirect back.&nbsp;</div></li><li><div>    } elseif ( ! empty( $_GET['_wp_http_referer'] ) ) {&nbsp;</div></li><li><div>        <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/wp_redirect/" data-id="1123782" title="wp_redirect" class="function">wp_redirect</a>( <a href="http://hookr.io/plugins/buddypress/2.8.2/functions/remove_query_arg/" data-id="1123168" title="remove_query_arg" class="function">remove_query_arg</a>( array( '_wp_http_referer', '_wpnonce' ), stripslashes( $_SERVER['REQUEST_URI'] ) ) );&nbsp;</div></li><li><div>        exit;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.6.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/buddypress/2.8.2/functions/bp_activity_admin_load/" class="active">2.8.2</a></li><li><a href="http://hookr.io/plugins/buddypress/2.8.1/functions/bp_activity_admin_load/" class="">2.8.1</a></li><li><a href="http://hookr.io/plugins/buddypress/2.8.0/functions/bp_activity_admin_load/" class="">2.8.0</a></li><li><a href="http://hookr.io/plugins/buddypress/2.7.5/functions/bp_activity_admin_load/" class="">2.7.5</a></li><li><a href="http://hookr.io/plugins/buddypress/2.7.4/functions/bp_activity_admin_load/" class="">2.7.4</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>function</li><li><span></span>bp_activity_admin_load</li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>