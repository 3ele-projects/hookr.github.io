<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.8.2" data-slug="buddypress" data-type="file" data-id="49319"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp-members-bp-members-template | file | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, buddypress, 2.8.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=865f27df706a7416e15258bc957f86c0' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bp-members-bp-members-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-members-bp-members-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-members-bp-members-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.8.2-file-bp-members-bp-members-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp-members-bp-members-template" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.2." href="http://hookr.io/plugins/buddypress/2.8.2/" class="H_VERSION"><span property="name">2.8.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/buddypress/2.8.2/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp-members-bp-members-template</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="7837"><a href="http://hookr.io/plugins/buddypress/2.8.2/all/" title="All">All <span class="count badge">7837</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3621"><a href="http://hookr.io/plugins/buddypress/2.8.2/hooks/" title="Hooks">Hooks <span class="count badge">3621</span></a></li><li class="" data-id="action" data-count="1727"><a href="http://hookr.io/plugins/buddypress/2.8.2/actions/" title="Actions">Actions <span class="count badge">1727</span></a></li><li class="" data-id="filter" data-count="1894"><a href="http://hookr.io/plugins/buddypress/2.8.2/filters/" title="Filters">Filters <span class="count badge">1894</span></a></li><li class="" data-id="class" data-count="181"><a href="http://hookr.io/plugins/buddypress/2.8.2/classes/" title="Classes">Classes <span class="count badge">181</span></a></li><li class="" data-id="constant" data-count="161"><a href="http://hookr.io/plugins/buddypress/2.8.2/constants/" title="Constants">Constants <span class="count badge">161</span></a></li><li class="" data-id="function" data-count="3874"><a href="http://hookr.io/plugins/buddypress/2.8.2/functions/" title="Functions">Functions <span class="count badge">3874</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bp-members/bp-members-template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * BuddyPress Member Template Tags.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Functions that are safe to use inside your template files and themes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package BuddyPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Members</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly.</span>&nbsp;</div></li><li><div>defined( 'ABSPATH' ) || exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the profile component slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_slug() {&nbsp;</div></li><li><div>  echo bp_get_profile_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the profile component slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_profile_slug() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile component slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Profile component slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_profile_slug', buddypress()-&gt;profile-&gt;slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the members component slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_slug() {&nbsp;</div></li><li><div>  echo bp_get_members_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the members component slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_slug() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the Members component slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Members component slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_members_slug', buddypress()-&gt;members-&gt;slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the members component root slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_root_slug() {&nbsp;</div></li><li><div>  echo bp_get_members_root_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the members component root slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_root_slug() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the Members component root slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Members component root slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_members_root_slug', buddypress()-&gt;members-&gt;root_slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the member type base slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_member_type_base() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_members_member_type_base() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the member type base slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The base slug is the string used as the base prefix when generating member type directory URLs.</span>&nbsp;</div></li><li><div><span class="comment">   * For example, in example.com/members/type/foo/, 'foo' is the member type and 'type' is the</span>&nbsp;</div></li><li><div><span class="comment">   * base slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_member_type_base() {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the member type URL base.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $base</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_members_member_type_base', _x( 'type', 'member type URL base', 'buddypress' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output member directory permalink.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_directory_permalink() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_members_directory_permalink() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return member directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_directory_permalink() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the member directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Members directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_members_directory_permalink', trailingslashit( bp_get_root_domain() . '/' . bp_get_members_root_slug() ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output member type directory permalink.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $member_type Optional. Member type.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_type_directory_permalink( $member_type = '' ) {&nbsp;</div></li><li><div>  echo esc_url( bp_get_member_type_directory_permalink( $member_type ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return member type directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $member_type Optional. Member type. Defaults to current member type.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Member type directory URL on success, an empty string on failure.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_type_directory_permalink( $member_type = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $member_type ) {&nbsp;</div></li><li><div>          $_member_type = $member_type;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// Fall back on the current member type.</span>&nbsp;</div></li><li><div>          $_member_type = bp_get_current_member_type();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $type = bp_get_member_type_object( $_member_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Bail when member type is not found or has no directory.</span>&nbsp;</div></li><li><div>      if ( ! $type || ! $type-&gt;has_directory ) {&nbsp;</div></li><li><div>          return '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the member type directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value       Member type directory permalink.</span>&nbsp;</div></li><li><div><span class="comment">       * @param object $type        Member type object.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $member_type Member type name, as passed to the function.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_type_directory_permalink', trailingslashit( bp_get_members_directory_permalink() . bp_get_members_member_type_base() . '/' . $type-&gt;directory_slug ), $type, $member_type );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the sign-up slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_slug() {&nbsp;</div></li><li><div>  echo bp_get_signup_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the sign-up slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_slug() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $bp-&gt;pages-&gt;register-&gt;slug ) ) {&nbsp;</div></li><li><div>          $slug = $bp-&gt;pages-&gt;register-&gt;slug;&nbsp;</div></li><li><div>      } elseif ( defined( 'BP_REGISTER_SLUG' ) ) {&nbsp;</div></li><li><div>          $slug = BP_REGISTER_SLUG;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $slug = 'register';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the sign-up slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Sign-up slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_slug', $slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the activation slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_activate_slug() {&nbsp;</div></li><li><div>  echo bp_get_activate_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the activation slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_activate_slug() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $bp-&gt;pages-&gt;activate-&gt;slug ) ) {&nbsp;</div></li><li><div>          $slug = $bp-&gt;pages-&gt;activate-&gt;slug;&nbsp;</div></li><li><div>      } elseif ( defined( 'BP_ACTIVATION_SLUG' ) ) {&nbsp;</div></li><li><div>          $slug = BP_ACTIVATION_SLUG;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $slug = 'activate';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the activation slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Activation slug.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_activate_slug', $slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Initialize the members loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Based on the $args passed, bp_has_members() populates the $members_template</span>&nbsp;</div></li><li><div><span class="comment"> * global, enabling the use of BuddyPress templates and template functions to</span>&nbsp;</div></li><li><div><span class="comment"> * display a list of members.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global object $members_template {@link BP_Members_Template}</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Arguments for limiting the contents of the members loop. Most arguments</span>&nbsp;</div></li><li><div><span class="comment"> *     are in the same format as {@link BP_User_Query}. However, because</span>&nbsp;</div></li><li><div><span class="comment"> *     the format of the arguments accepted here differs in a number of ways, </span>&nbsp;</div></li><li><div><span class="comment"> *     and because bp_has_members() determines some default arguments in a</span>&nbsp;</div></li><li><div><span class="comment"> *     dynamic fashion, we list all accepted arguments here as well.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     Arguments can be passed as an associative array, or as a URL query</span>&nbsp;</div></li><li><div><span class="comment"> *     string (eg, 'user_id=4&per_page=3').</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int                   $type                Sort order. Accepts 'active', 'random', 'newest', 'popular', </span>&nbsp;</div></li><li><div><span class="comment"> *                                                      'online', 'alphabetical'. Default: 'active'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int|bool              $page                Page of results to display. Default: 1.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int|bool              $per_page            Number of results per page. Default: 20.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int|bool              $max                 Maximum number of results to return. Default: false (unlimited).</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string                $page_arg            The string used as a query parameter in pagination links.</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      Default: 'bpage'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array|int|string|bool $include             Limit results by a list of user IDs. Accepts an array, a</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      single integer, a comma-separated list of IDs, or false (to</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      disable this limiting). Accepts 'active', 'alphabetical', </span>&nbsp;</div></li><li><div><span class="comment"> *                                                      'newest', or 'random'. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type array|int|string|bool $exclude             Exclude users from results by ID. Accepts an array, a single</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      integer, a comma-separated list of IDs, or false (to disable</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      this limiting). Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int                   $user_id             If provided, results are limited to the friends of the specified</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      user. When on a user's Friends page, defaults to the ID of the</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      displayed user. Otherwise defaults to 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string|array          $member_type         Array or comma-separated list of member types to limit</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      results to.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string|array          $member_type__in     Array or comma-separated list of member types to limit</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      results to.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string|array          $member_type__not_in Array or comma-separated list of member types to exclude</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      from results.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string                $search_terms        Limit results by a search term. Default: value of</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      `$_REQUEST['members_search']` or `$_REQUEST['s']`, if present.</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      Otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string                $meta_key            Limit results by the presence of a usermeta key.</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type mixed                 $meta_value          When used with meta_key, limits results by the a matching</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      usermeta value. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool                  $populate_extras     Whether to fetch optional data, such as friend counts.</span>&nbsp;</div></li><li><div><span class="comment"> *                                                      Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Returns true when blogs are found, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_members( $args = '' ) {&nbsp;</div></li><li><div>  global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Default user ID.</span>&nbsp;</div></li><li><div>  $user_id = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// User filtering.</span>&nbsp;</div></li><li><div>  if ( bp_is_user_friends() && ! bp_is_user_friend_requests() ) {&nbsp;</div></li><li><div>      $user_id = bp_displayed_user_id();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $member_type = bp_get_current_member_type();&nbsp;</div></li><li><div>  if ( ! $member_type && ! empty( $_GET['member_type'] ) ) {&nbsp;</div></li><li><div>      if ( is_array( $_GET['member_type'] ) ) {&nbsp;</div></li><li><div>          $member_type = $_GET['member_type'];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// Can be a comma-separated list.</span>&nbsp;</div></li><li><div>          $member_type = explode( ', ', $_GET['member_type'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $search_terms_default = null;&nbsp;</div></li><li><div>  $search_query_arg = bp_core_get_component_search_query_arg( 'members' );&nbsp;</div></li><li><div>  if ( ! empty( $_REQUEST[ $search_query_arg ] ) ) {&nbsp;</div></li><li><div>      $search_terms_default = stripslashes( $_REQUEST[ $search_query_arg ] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Type: active ( default ) | random | newest | popular | online | alphabetical.</span>&nbsp;</div></li><li><div>  $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>      'type' =&gt; 'active', &nbsp;</div></li><li><div>      'page' =&gt; 1, &nbsp;</div></li><li><div>      'per_page' =&gt; 20, &nbsp;</div></li><li><div>      'max' =&gt; false, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      'page_arg' =&gt; 'upage', <span class="comment">// See https://buddypress.trac.wordpress.org/ticket/3679.</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      'include' =&gt; false, <span class="comment">// Pass a user_id or a list (comma-separated or array) of user_ids to only show these users.</span>&nbsp;</div></li><li><div>      'exclude' =&gt; false, <span class="comment">// Pass a user_id or a list (comma-separated or array) of user_ids to exclude these users.</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      'user_id' =&gt; $user_id, <span class="comment">// Pass a user_id to only show friends of this user.</span>&nbsp;</div></li><li><div>      'member_type' =&gt; $member_type, &nbsp;</div></li><li><div>      'member_type__in' =&gt; '', &nbsp;</div></li><li><div>      'member_type__not_in' =&gt; '', &nbsp;</div></li><li><div>      'search_terms' =&gt; $search_terms_default, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      'meta_key' =&gt; false, <span class="comment">// Only return users with this usermeta.</span>&nbsp;</div></li><li><div>      'meta_value' =&gt; false, <span class="comment">// Only return users where the usermeta value matches. Requires meta_key.</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      'populate_extras' =&gt; true      <span class="comment">// Fetch usermeta? Friend count, last active etc.</span>&nbsp;</div></li><li><div> ), 'has_members' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Pass a filter if ?s= is set.</span>&nbsp;</div></li><li><div>  if ( is_null( $r['search_terms'] ) ) {&nbsp;</div></li><li><div>      if ( !empty( $_REQUEST['s'] ) ) {&nbsp;</div></li><li><div>          $r['search_terms'] = $_REQUEST['s'];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $r['search_terms'] = false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set per_page to max if max is larger than per_page.</span>&nbsp;</div></li><li><div>  if ( !empty( $r['max'] ) && ( $r['per_page'] &gt; $r['max'] ) ) {&nbsp;</div></li><li><div>      $r['per_page'] = $r['max'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Query for members and populate $members_template global.</span>&nbsp;</div></li><li><div>  $members_template = new BP_Core_Members_Template(&nbsp;</div></li><li><div>      $r['type'], &nbsp;</div></li><li><div>      $r['page'], &nbsp;</div></li><li><div>      $r['per_page'], &nbsp;</div></li><li><div>      $r['max'], &nbsp;</div></li><li><div>      $r['user_id'], &nbsp;</div></li><li><div>      $r['search_terms'], &nbsp;</div></li><li><div>      $r['include'], &nbsp;</div></li><li><div>      $r['populate_extras'], &nbsp;</div></li><li><div>      $r['exclude'], &nbsp;</div></li><li><div>      $r['meta_key'], &nbsp;</div></li><li><div>      $r['meta_value'], &nbsp;</div></li><li><div>      $r['page_arg'], &nbsp;</div></li><li><div>      $r['member_type'], &nbsp;</div></li><li><div>      $r['member_type__in'], &nbsp;</div></li><li><div>      $r['member_type__not_in']&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not BuddyPress has members to iterate over.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added the `$r` parameter</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool  $value            Whether or not there are members to iterate over.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $members_template Populated $members_template global.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $r                Array of arguments passed into the BP_Core_Members_Template class.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_has_members', $members_template-&gt;has_members(), $members_template, $r );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set up the current member inside the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return object</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_member() {&nbsp;</div></li><li><div>  global $members_template;&nbsp;</div></li><li><div>  return $members_template-&gt;the_member();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether there are more members to iterate over.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members() {&nbsp;</div></li><li><div>  global $members_template;&nbsp;</div></li><li><div>  return $members_template-&gt;members();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the members pagination count.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_pagination_count() {&nbsp;</div></li><li><div>  echo bp_get_members_pagination_count();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Generate the members pagination count.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_pagination_count() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $members_template-&gt;type ) )&nbsp;</div></li><li><div>          $members_template-&gt;type = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $start_num = intval( ( $members_template-&gt;pag_page - 1 ) * $members_template-&gt;pag_num ) + 1;&nbsp;</div></li><li><div>      $from_num = bp_core_number_format( $start_num );&nbsp;</div></li><li><div>      $to_num = bp_core_number_format( ( $start_num + ( $members_template-&gt;pag_num - 1 ) &gt; $members_template-&gt;total_member_count ) ? $members_template-&gt;total_member_count : $start_num + ( $members_template-&gt;pag_num - 1 ) );&nbsp;</div></li><li><div>      $total = bp_core_number_format( $members_template-&gt;total_member_count );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'active' == $members_template-&gt;type ) {&nbsp;</div></li><li><div>          if ( 1 == $members_template-&gt;total_member_count ) {&nbsp;</div></li><li><div>              $pag = __( 'Viewing 1 active member', 'buddypress' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pag = sprintf( _n( 'Viewing %1$s - %2$s of %3$s active member', 'Viewing %1$s - %2$s of %3$s active members', $members_template-&gt;total_member_count, 'buddypress' ), $from_num, $to_num, $total );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } elseif ( 'popular' == $members_template-&gt;type ) {&nbsp;</div></li><li><div>          if ( 1 == $members_template-&gt;total_member_count ) {&nbsp;</div></li><li><div>              $pag = __( 'Viewing 1 member with friends', 'buddypress' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pag = sprintf( _n( 'Viewing %1$s - %2$s of %3$s member with friends', 'Viewing %1$s - %2$s of %3$s members with friends', $members_template-&gt;total_member_count, 'buddypress' ), $from_num, $to_num, $total );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } elseif ( 'online' == $members_template-&gt;type ) {&nbsp;</div></li><li><div>          if ( 1 == $members_template-&gt;total_member_count ) {&nbsp;</div></li><li><div>              $pag = __( 'Viewing 1 online member', 'buddypress' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pag = sprintf( _n( 'Viewing %1$s - %2$s of %3$s online member', 'Viewing %1$s - %2$s of %3$s online members', $members_template-&gt;total_member_count, 'buddypress' ), $from_num, $to_num, $total );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          if ( 1 == $members_template-&gt;total_member_count ) {&nbsp;</div></li><li><div>              $pag = __( 'Viewing 1 member', 'buddypress' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $pag = sprintf( _n( 'Viewing %1$s - %2$s of %3$s member', 'Viewing %1$s - %2$s of %3$s members', $members_template-&gt;total_member_count, 'buddypress' ), $from_num, $to_num, $total );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the members pagination count.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $pag Pagination count string.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_members_pagination_count', $pag );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the members pagination links.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_pagination_links() {&nbsp;</div></li><li><div>  echo bp_get_members_pagination_links();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fetch the members pagination links.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_pagination_links() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the members pagination link.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $pag_links HTML markup for pagination links.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_members_pagination_links', $members_template-&gt;pag_links );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the ID of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_user_id() {&nbsp;</div></li><li><div>  echo bp_get_member_user_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the ID of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Member ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_user_id() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>      $member_id = isset( $members_template-&gt;member-&gt;id ) ? (int) $members_template-&gt;member-&gt;id : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the ID of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $member_id ID of the member being iterated over.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_user_id', $member_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the row class of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $classes Array of custom classes.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_class( $classes = array() ) {&nbsp;</div></li><li><div>  echo bp_get_member_class( $classes );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the row class of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $classes Array of custom classes.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Row class of the member</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_class( $classes = array() ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add even/odd classes, but only if there's more than 1 member.</span>&nbsp;</div></li><li><div>      if ( $members_template-&gt;member_count &gt; 1 ) {&nbsp;</div></li><li><div>          $pos_in_loop = (int) $members_template-&gt;current_member;&nbsp;</div></li><li><div>          $classes[] = ( $pos_in_loop % 2 ) ? 'even' : 'odd';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If we've only one member in the loop, don't bother with odd and even.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $classes[] = 'bp-single-member';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Maybe add 'is-online' class.</span>&nbsp;</div></li><li><div>      if ( ! empty( $members_template-&gt;member-&gt;last_activity ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Calculate some times.</span>&nbsp;</div></li><li><div>          $current_time = bp_core_current_time( true, 'timestamp' );&nbsp;</div></li><li><div>          $last_activity = strtotime( $members_template-&gt;member-&gt;last_activity );&nbsp;</div></li><li><div>          $still_online = strtotime( '+5 minutes', $last_activity );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Has the user been active recently?</span>&nbsp;</div></li><li><div>          if ( $current_time &lt;= $still_online ) {&nbsp;</div></li><li><div>              $classes[] = 'is-online';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add current user class.</span>&nbsp;</div></li><li><div>      if ( bp_loggedin_user_id() === (int) $members_template-&gt;member-&gt;id ) {&nbsp;</div></li><li><div>          $classes[] = 'is-current-user';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add current user member types.</span>&nbsp;</div></li><li><div>      if ( $member_types = bp_get_member_type( $members_template-&gt;member-&gt;id, false ) ) {&nbsp;</div></li><li><div>          foreach ( $member_types as $member_type ) {&nbsp;</div></li><li><div>              $classes[] = sprintf( 'member-type-%s', esc_attr( $member_type ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the determined classes to add to the HTML element.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $classes Classes to be added to the HTML element.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $classes = apply_filters( 'bp_get_member_class', $classes );&nbsp;</div></li><li><div>      $classes = array_merge( $classes, array() );&nbsp;</div></li><li><div>      $retval = 'class=&quot;' . join( ' ', $classes ) . '&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $retval;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output nicename of current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_user_nicename() {&nbsp;</div></li><li><div>  echo bp_get_member_user_nicename();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the nicename of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Members nicename.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_user_nicename() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the nicename of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $user_nicename Nicename for the current member.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_user_nicename', $members_template-&gt;member-&gt;user_nicename );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output login for current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_user_login() {&nbsp;</div></li><li><div>  echo bp_get_member_user_login();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the login of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Member's login.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_user_login() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the login of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $user_login Login for the current member.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_user_login', $members_template-&gt;member-&gt;user_login );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the email address for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_user_email() {&nbsp;</div></li><li><div>  echo bp_get_member_user_email();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the email address of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Member's email address.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_user_email() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the email address of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $user_email Email address for the current member.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_user_email', $members_template-&gt;member-&gt;user_email );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current member in the loop is the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_is_loggedin_user() {&nbsp;</div></li><li><div>  global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current member in the loop is the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $value Whether current member in the loop is logged in.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_member_is_loggedin_user', bp_loggedin_user_id() == $members_template-&gt;member-&gt;id ? true : false );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a member's avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_member_avatar() for description of arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args See {@link bp_get_member_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_avatar( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters a members avatar.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added the `$args` parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string       $value Formatted HTML &lt;img&gt; element, or raw avatar URL based on $html arg.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args  See {@link bp_get_member_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_member_avatar', bp_get_member_avatar( $args ), $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get a member's avatar.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see bp_core_fetch_avatar() For a description of arguments and</span>&nbsp;</div></li><li><div><span class="comment">   *      return values.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args  {</span>&nbsp;</div></li><li><div><span class="comment">   *     Arguments are listed here with an explanation of their defaults.</span>&nbsp;</div></li><li><div><span class="comment">   *     For more information about the arguments, see</span>&nbsp;</div></li><li><div><span class="comment">   *     {@link bp_core_fetch_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $alt     Default: 'Profile picture of [user name]'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $class   Default: 'avatar'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $type    Default: 'thumb'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $width   Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $height  Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool     $id      Currently unused.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool     $no_grav Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string User avatar string.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_avatar( $args = '' ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $fullname = !empty( $members_template-&gt;member-&gt;fullname ) ? $members_template-&gt;member-&gt;fullname : $members_template-&gt;member-&gt;display_name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $defaults = array(&nbsp;</div></li><li><div>          'type' =&gt; 'thumb', &nbsp;</div></li><li><div>          'width' =&gt; false, &nbsp;</div></li><li><div>          'height' =&gt; false, &nbsp;</div></li><li><div>          'class' =&gt; 'avatar', &nbsp;</div></li><li><div>          'id' =&gt; false, &nbsp;</div></li><li><div>          'alt' =&gt; sprintf( __( 'Profile picture of %s', 'buddypress' ), $fullname )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>      extract( $r, EXTR_SKIP );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters a members avatar.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Formatted HTML &lt;img&gt; element, or raw avatar URL based on $html arg.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r     Array of parsed arguments. See {@link bp_get_member_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_avatar', bp_core_fetch_avatar( array( 'item_id' =&gt; $members_template-&gt;member-&gt;id, 'type' =&gt; $type, 'alt' =&gt; $alt, 'css_id' =&gt; $id, 'class' =&gt; $class, 'width' =&gt; $width, 'height' =&gt; $height, 'email' =&gt; $members_template-&gt;member-&gt;user_email ) ), $r );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the permalink for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_permalink() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_member_permalink() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the permalink for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_permalink() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the permalink for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Permalink for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_permalink', bp_core_get_user_domain( $members_template-&gt;member-&gt;id, $members_template-&gt;member-&gt;user_nicename, $members_template-&gt;member-&gt;user_login ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Alias of {@link bp_member_permalink()}.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_member_link() { echo esc_url( bp_get_member_permalink() ); }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Alias of {@link bp_get_member_permalink()}.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_link() { return bp_get_member_permalink(); }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output display name of current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_name() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the display name of current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Display name for current member.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_member_name', bp_get_member_name() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the display name of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Full name is, by default, pulled from xprofile's Full Name field.</span>&nbsp;</div></li><li><div><span class="comment">   * When this field is empty, we try to get an alternative name from the</span>&nbsp;</div></li><li><div><span class="comment">   * WP users table, in the following order of preference: display_name, </span>&nbsp;</div></li><li><div><span class="comment">   * user_nicename, user_login.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string The user's fullname for display.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_name() {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Generally, this only fires when xprofile is disabled.</span>&nbsp;</div></li><li><div>      if ( empty( $members_template-&gt;member-&gt;fullname ) ) {&nbsp;</div></li><li><div>          <span class="comment">// Our order of preference for alternative fullnames.</span>&nbsp;</div></li><li><div>          $name_stack = array(&nbsp;</div></li><li><div>              'display_name', &nbsp;</div></li><li><div>              'user_nicename', &nbsp;</div></li><li><div>              'user_login'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $name_stack as $source ) {&nbsp;</div></li><li><div>              if ( !empty( $members_template-&gt;member-&gt;{$source} ) ) {&nbsp;</div></li><li><div>                  <span class="comment">// When a value is found, set it as fullname and be done with it.</span>&nbsp;</div></li><li><div>                  $members_template-&gt;member-&gt;fullname = $members_template-&gt;member-&gt;{$source};&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the display name of current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $fullname Display name for current member.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_name', $members_template-&gt;member-&gt;fullname );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  add_filter( 'bp_get_member_name', 'wp_filter_kses' );&nbsp;</div></li><li><div>  add_filter( 'bp_get_member_name', 'stripslashes' );&nbsp;</div></li><li><div>  add_filter( 'bp_get_member_name', 'strip_tags' );&nbsp;</div></li><li><div>  add_filter( 'bp_get_member_name', 'esc_html' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the current member's last active time.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args {@see bp_get_member_last_active()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_last_active( $args = array() ) {&nbsp;</div></li><li><div>  echo bp_get_member_last_active( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the current member's last active time.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0 Added 'relative' as a parameter to $args.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of optional arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type mixed $active_format If true, formatted &quot;active 5 minutes ago&quot;. If false, formatted &quot;5 minutes</span>&nbsp;</div></li><li><div><span class="comment">   *                                ago&quot;. If string, should be sprintf'able like 'last seen %s ago'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool  $relative      If true, will return relative time &quot;5 minutes ago&quot;. If false, will return</span>&nbsp;</div></li><li><div><span class="comment">   *                                date from database. Default: true.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_last_active( $args = array() ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Parse the activity format.</span>&nbsp;</div></li><li><div>      $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>          'active_format' =&gt; true, &nbsp;</div></li><li><div>          'relative' =&gt; true, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Backwards compatibility for anyone forcing a 'true' active_format.</span>&nbsp;</div></li><li><div>      if ( true === $r['active_format'] ) {&nbsp;</div></li><li><div>          $r['active_format'] = __( 'active %s', 'buddypress' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Member has logged in at least one time.</span>&nbsp;</div></li><li><div>      if ( isset( $members_template-&gt;member-&gt;last_activity ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// We do not want relative time, so return now.</span></span>&nbsp;</div></li><li><div>          <span class="comment">// @todo Should the 'bp_member_last_active' filter be applied here?</span>&nbsp;</div></li><li><div>          if ( ! $r['relative'] ) {&nbsp;</div></li><li><div>              return esc_attr( $members_template-&gt;member-&gt;last_activity );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Backwards compatibility for pre 1.5 'ago' strings.</span>&nbsp;</div></li><li><div>          $last_activity = ! empty( $r['active_format'] )&nbsp;</div></li><li><div>              ? bp_core_get_last_activity( $members_template-&gt;member-&gt;last_activity, $r['active_format'] )&nbsp;</div></li><li><div>              : bp_core_time_since( $members_template-&gt;member-&gt;last_activity );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Member has never logged in or been active.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $last_activity = __( 'Never active', 'buddypress' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the current members last active time.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $last_activity Formatted time since last activity.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r             Array of parsed arguments for query.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_member_last_active', $last_activity, $r );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the latest update of the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {@see bp_get_member_latest_update()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_latest_update( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_member_latest_update( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the latest update from the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of optional arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int  $length    Truncation length. Default: 225.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool $view_link Whether to provide a 'View' link for</span>&nbsp;</div></li><li><div><span class="comment">   *                           truncated entries. Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_latest_update( $args = '' ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $defaults = array(&nbsp;</div></li><li><div>          'length' =&gt; 225, &nbsp;</div></li><li><div>          'view_link' =&gt; true&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>      extract( $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !bp_is_active( 'activity' ) || empty( $members_template-&gt;member-&gt;latest_update ) || !$update = maybe_unserialize( $members_template-&gt;member-&gt;latest_update ) )&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the excerpt of the latest update for current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.5</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Excerpt of the latest update for current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r     Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $update_content = apply_filters( 'bp_get_activity_latest_update_excerpt', trim( strip_tags( bp_create_excerpt( $update['content'], $length ) ) ), $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $update_content = sprintf( _x( '- &quot;%s&quot;', 'member latest update in member directory', 'buddypress' ), $update_content );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If $view_link is true and the text returned by bp_create_excerpt() is different from the original text (ie it's</span>&nbsp;</div></li><li><div>      <span class="comment">// been truncated), add the &quot;View&quot; link.</span>&nbsp;</div></li><li><div>      if ( $view_link && ( $update_content != $update['content'] ) ) {&nbsp;</div></li><li><div>          $view = __( 'View', 'buddypress' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $update_content .= '&lt;span class=&quot;activity-read-more&quot;&gt;&lt;a href=&quot;' . bp_activity_get_permalink( $update['id'] ) . '&quot; rel=&quot;nofollow&quot;&gt;' . $view . '&lt;/a&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the latest update from the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $update_content Formatted latest update for current member.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r              Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_member_latest_update', $update_content, $r );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a piece of user profile data.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_member_profile_data() for a description of params.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args See {@link bp_get_member_profile_data()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_profile_data( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_member_profile_data( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get a piece of user profile data.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * When used in a bp_has_members() loop, this function will attempt</span>&nbsp;</div></li><li><div><span class="comment">   * to fetch profile data cached in the template global. It is also safe</span>&nbsp;</div></li><li><div><span class="comment">   * to use outside of the loop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of config parameters.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $field   Name of the profile field.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int    $user_id ID of the user whose data is being fetched.</span>&nbsp;</div></li><li><div><span class="comment">   *                           Defaults to the current member in the loop, or if not</span>&nbsp;</div></li><li><div><span class="comment">   *                           present, to the currently displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string|bool Profile data if found, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_profile_data( $args = '' ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! bp_is_active( 'xprofile' ) ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Declare local variables.</span>&nbsp;</div></li><li><div>      $data = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Guess at default $user_id.</span>&nbsp;</div></li><li><div>      $default_user_id = 0;&nbsp;</div></li><li><div>      if ( ! empty( $members_template-&gt;member-&gt;id ) ) {&nbsp;</div></li><li><div>          $default_user_id = $members_template-&gt;member-&gt;id;&nbsp;</div></li><li><div>      } elseif ( bp_displayed_user_id() ) {&nbsp;</div></li><li><div>          $default_user_id = bp_displayed_user_id();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $defaults = array(&nbsp;</div></li><li><div>          'field' =&gt; false, &nbsp;</div></li><li><div>          'user_id' =&gt; $default_user_id, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If we're in a members loop, get the data from the global.</span>&nbsp;</div></li><li><div>      if ( ! empty( $members_template-&gt;member-&gt;profile_data ) ) {&nbsp;</div></li><li><div>          $profile_data = $members_template-&gt;member-&gt;profile_data;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Otherwise query for the data.</span>&nbsp;</div></li><li><div>      if ( empty( $profile_data ) && method_exists( 'BP_XProfile_ProfileData', 'get_all_for_user' ) ) {&nbsp;</div></li><li><div>          $profile_data = BP_XProfile_ProfileData::get_all_for_user( $r['user_id'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If we're in the members loop, but the profile data has not</span>&nbsp;</div></li><li><div>      <span class="comment">// been loaded into the global, cache it there for later use.</span>&nbsp;</div></li><li><div>      if ( ! empty( $members_template-&gt;member ) && empty( $members_template-&gt;member-&gt;profile_data ) ) {&nbsp;</div></li><li><div>          $members_template-&gt;member-&gt;profile_data = $profile_data;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Get the data for the specific field requested.</span>&nbsp;</div></li><li><div>      if ( ! empty( $profile_data ) && ! empty( $profile_data[ $r['field'] ]['field_type'] ) && ! empty( $profile_data[ $r['field'] ]['field_data'] ) ) {&nbsp;</div></li><li><div>          $data = xprofile_format_profile_field( $profile_data[ $r['field'] ]['field_type'], $profile_data[ $r['field'] ]['field_data'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters resulting piece of member profile data.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|bool $data Profile data if found, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array       $r    Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $data = apply_filters( 'bp_get_member_profile_data', $data, $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the resulting piece of member profile data by field type.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * This is a dynamic filter based on field type of the current field requested.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|bool $data Profile data if found, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array       $r    Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $data = apply_filters( 'bp_get_member_profile_data_' . $profile_data[ $r['field'] ]['field_type'], $data, $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $data;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'registered [x days ago]' string for the current member.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0 Added $args as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Optional. {@see bp_get_member_registered()}</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_registered( $args = array() ) {&nbsp;</div></li><li><div>  echo bp_get_member_registered( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the 'registered [x days ago]' string for the current member.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.7.0 Added $args as a parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of optional parameters.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool $relative Optional. If true, returns relative registered date. eg. registered 5 months ago.</span>&nbsp;</div></li><li><div><span class="comment">   *                          If false, returns registered date value from database.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_member_registered( $args = array() ) {&nbsp;</div></li><li><div>      global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'relative' =&gt; true, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// We do not want relative time, so return now.</span></span>&nbsp;</div></li><li><div>      <span class="comment">// @todo Should the 'bp_member_registered' filter be applied here?</span>&nbsp;</div></li><li><div>      if ( ! $r['relative'] ) {&nbsp;</div></li><li><div>          return esc_attr( $members_template-&gt;member-&gt;user_registered );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $registered = esc_attr( bp_core_get_last_activity( $members_template-&gt;member-&gt;user_registered, _x( 'registered %s', 'Records the timestamp that the user registered into the activity stream', 'buddypress' ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'registered [x days ago]' string for the current member.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $registered The 'registered [x days ago]' string.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_member_registered', $registered );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a random piece of profile data for the current member in the loop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_random_profile_data() {&nbsp;</div></li><li><div>  global $members_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_active( 'xprofile' ) ) { ?&gt;&nbsp;</div></li><li><div>      &lt;?php $random_data = xprofile_get_random_profile_data( $members_template-&gt;member-&gt;id, true ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;&lt;?php echo wp_filter_kses( $random_data[0]-&gt;name ) ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>          &lt;?php echo wp_filter_kses( $random_data[0]-&gt;value ) ?&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output hidden input for preserving member search params on form submit.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_member_hidden_fields() {&nbsp;</div></li><li><div>  $query_arg = bp_core_get_component_search_query_arg( 'members' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST[ $query_arg ] ) ) {&nbsp;</div></li><li><div>      echo '&lt;input type=&quot;hidden&quot; id=&quot;search_terms&quot; value=&quot;' . esc_attr( $_REQUEST[ $query_arg ] ) . '&quot; name=&quot;search_terms&quot; /&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['letter'] ) ) {&nbsp;</div></li><li><div>      echo '&lt;input type=&quot;hidden&quot; id=&quot;selected_letter&quot; value=&quot;' . esc_attr( $_REQUEST['letter'] ) . '&quot; name=&quot;selected_letter&quot; /&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_REQUEST['members_search'] ) ) {&nbsp;</div></li><li><div>      echo '&lt;input type=&quot;hidden&quot; id=&quot;search_terms&quot; value=&quot;' . esc_attr( $_REQUEST['members_search'] ) . '&quot; name=&quot;search_terms&quot; /&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the Members directory search form.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_directory_members_search_form() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $query_arg = bp_core_get_component_search_query_arg( 'members' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $_REQUEST[ $query_arg ] ) ) {&nbsp;</div></li><li><div>      $search_value = stripslashes( $_REQUEST[ $query_arg ] );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $search_value = bp_get_search_default_text( 'members' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $search_form_html = '&lt;form action=&quot;&quot; method=&quot;get&quot; id=&quot;search-members-form&quot;&gt;&nbsp;</div></li><li><div>      &lt;label for=&quot;members_search&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;' . esc_attr( $query_arg ) . '&quot; id=&quot;members_search&quot; placeholder=&quot;'. esc_attr( $search_value ) .'&quot; /&gt;&lt;/label&gt;&nbsp;</div></li><li><div>      &lt;input type=&quot;submit&quot; id=&quot;members_search_submit&quot; name=&quot;members_search_submit&quot; value=&quot;' . __( 'Search', 'buddypress' ) . '&quot; /&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the Members component search form.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $search_form_html HTML markup for the member search form.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_directory_members_search_form', $search_form_html );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the total member count.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_total_site_member_count() {&nbsp;</div></li><li><div>  echo bp_get_total_site_member_count();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the total site member count.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_total_site_member_count() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the total site member count.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $value Number-formatted total site member count.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_total_site_member_count', bp_core_number_format( bp_core_get_total_member_count() ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Navigation and other misc template tags ***********************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render the navigation markup for the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Each component adds to this navigation array within its own</span>&nbsp;</div></li><li><div><span class="comment"> * [component_name]setup_nav() function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This navigation array is the top level navigation, so it contains items such as:</span>&nbsp;</div></li><li><div><span class="comment"> *      [Blog, Profile, Messages, Groups, Friends] ...</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The function will also analyze the current component the user is in, to</span>&nbsp;</div></li><li><div><span class="comment"> * determine whether or not to highlight a particular nav item.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Move to a back-compat file?</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated Does not seem to be called anywhere in BP core.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_loggedin_user_nav() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through each navigation item.</span>&nbsp;</div></li><li><div>  foreach ( (array) $bp-&gt;members-&gt;nav-&gt;get_primary() as $nav_item ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $selected = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If the current component matches the nav item id, then add a highlight CSS class.</span>&nbsp;</div></li><li><div>      if ( ! bp_is_directory() && ! empty( $bp-&gt;active_components[ bp_current_component() ] ) && $bp-&gt;active_components[ bp_current_component() ] == $nav_item-&gt;css_id ) {&nbsp;</div></li><li><div>          $selected = ' class=&quot;current selected&quot;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If we are viewing another person (current_userid does not equal</span>&nbsp;</div></li><li><div>      <span class="comment">// loggedin_user-&gt;id then check to see if the two users are friends.</span>&nbsp;</div></li><li><div>      <span class="comment">// if they are, add a highlight CSS class to the friends nav item</span>&nbsp;</div></li><li><div>      <span class="comment">// if it exists.</span>&nbsp;</div></li><li><div>      if ( !bp_is_my_profile() && bp_displayed_user_id() ) {&nbsp;</div></li><li><div>          $selected = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_active( 'friends' ) ) {&nbsp;</div></li><li><div>              if ( $nav_item-&gt;css_id == $bp-&gt;friends-&gt;id ) {&nbsp;</div></li><li><div>                  if ( friends_check_friendship( bp_loggedin_user_id(), bp_displayed_user_id() ) ) {&nbsp;</div></li><li><div>                      $selected = ' class=&quot;current selected&quot;';&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Echo out the final list item.</span>&nbsp;</div></li><li><div>      echo apply_filters_ref_array( 'bp_get_loggedin_user_nav_' . $nav_item-&gt;css_id, array( '&lt;li id=&quot;li-nav-' . $nav_item-&gt;css_id . '&quot; ' . $selected . '&gt;&lt;a id=&quot;my-' . $nav_item-&gt;css_id . '&quot; href=&quot;' . $nav_item-&gt;link . '&quot;&gt;' . $nav_item-&gt;name . '&lt;/a&gt;&lt;/li&gt;', &$nav_item ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Always add a log out list item to the end of the navigation.</span>&nbsp;</div></li><li><div>  $logout_link = '&lt;li&gt;&lt;a id=&quot;wp-logout&quot; href=&quot;' .  wp_logout_url( bp_get_root_domain() ) . '&quot;&gt;' . __( 'Log Out', 'buddypress' ) . '&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_logout_nav_link', $logout_link );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the contents of the current user's home page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_front_template_part() {&nbsp;</div></li><li><div>  $located = bp_displayed_user_get_front_template();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== $located ) {&nbsp;</div></li><li><div>      $slug = str_replace( '.php', '', $located );&nbsp;</div></li><li><div>      $name = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Let plugins adding an action to bp_get_template_part get it from here</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $slug Template part slug requested.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $name Template part name requested.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      do_action( 'get_template_part_' . $slug, $slug, $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      load_template( $located, true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $located;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Locate a custom user front template if it exists.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  object|null $displayed_user Optional. Falls back to current user if not passed.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool                 Path to front template on success; boolean false on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_get_front_template( $displayed_user = null ) {&nbsp;</div></li><li><div>  if ( ! is_object( $displayed_user ) || empty( $displayed_user-&gt;id ) ) {&nbsp;</div></li><li><div>      $displayed_user = bp_get_displayed_user();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $displayed_user-&gt;id ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $displayed_user-&gt;front_template ) ) {&nbsp;</div></li><li><div>      return $displayed_user-&gt;front_template;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Init the hierarchy</span>&nbsp;</div></li><li><div>  $template_names = array(&nbsp;</div></li><li><div>      'members/single/front-id-' . sanitize_file_name( $displayed_user-&gt;id ) . '.php', &nbsp;</div></li><li><div>      'members/single/front-nicename-' . sanitize_file_name( $displayed_user-&gt;userdata-&gt;user_nicename ) . '.php', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Check for member types and add it to the hierarchy</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Make sure to register your member</span>&nbsp;</div></li><li><div><span class="comment">   * type using the hook 'bp_register_member_types'</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  if ( bp_get_member_types() ) {&nbsp;</div></li><li><div>      $displayed_user_member_type = bp_get_member_type( $displayed_user-&gt;id );&nbsp;</div></li><li><div>      if ( ! $displayed_user_member_type ) {&nbsp;</div></li><li><div>          $displayed_user_member_type = 'none';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $template_names[] = 'members/single/front-member-type-' . sanitize_file_name( $displayed_user_member_type )   . '.php';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add The generic template to the end of the hierarchy</span>&nbsp;</div></li><li><div>  $template_names[] = 'members/single/front.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the hierarchy of user front templates corresponding to a specific user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $template_names Array of template paths.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return bp_locate_template( apply_filters( 'bp_displayed_user_get_front_template', $template_names ), false, true );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if the displayed user has a custom front template.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_has_front_template() {&nbsp;</div></li><li><div>  $displayed_user = bp_get_displayed_user();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return ! empty( $displayed_user-&gt;front_template );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render the navigation markup for the displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_displayed_user_nav() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $bp-&gt;members-&gt;nav-&gt;get_primary() as $user_nav_item ) {&nbsp;</div></li><li><div>      if ( empty( $user_nav_item-&gt;show_for_displayed_user ) && ! bp_is_my_profile() ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $selected = '';&nbsp;</div></li><li><div>      if ( bp_is_current_component( $user_nav_item-&gt;slug ) ) {&nbsp;</div></li><li><div>          $selected = ' class=&quot;current selected&quot;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_loggedin_user_domain() ) {&nbsp;</div></li><li><div>          $link = str_replace( bp_loggedin_user_domain(), bp_displayed_user_domain(), $user_nav_item-&gt;link );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $link = trailingslashit( bp_displayed_user_domain() . $user_nav_item-&gt;link );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the navigation markup for the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * This is a dynamic filter that is dependent on the navigation tab component being rendered.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value         Markup for the tab list item including link.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $user_nav_item Array holding parts used to construct tab list item.</span>&nbsp;</div></li><li><div><span class="comment">       *                              Passed by reference.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      echo apply_filters_ref_array( 'bp_get_displayed_user_nav_' . $user_nav_item-&gt;css_id, array( '&lt;li id=&quot;' . $user_nav_item-&gt;css_id . '-personal-li&quot; ' . $selected . '&gt;&lt;a id=&quot;user-' . $user_nav_item-&gt;css_id . '&quot; href=&quot;' . $link . '&quot;&gt;' . $user_nav_item-&gt;name . '&lt;/a&gt;&lt;/li&gt;', &$user_nav_item ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Cover image ***************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Should we use the cover image header</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the displayed user has a cover image, </span>&nbsp;</div></li><li><div><span class="comment"> *              False otherwise</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_use_cover_image_header() {&nbsp;</div></li><li><div>  return (bool) bp_is_active( 'xprofile', 'cover_image' ) && ! bp_disable_cover_image_uploads() && bp_attachments_is_wp_version_supported();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Avatars *******************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the logged-in user's avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_loggedin_user_avatar() for a description of params.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {@see bp_get_loggedin_user_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_avatar( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_loggedin_user_avatar( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the logged-in user's avatar.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see bp_core_fetch_avatar() For a description of arguments and</span>&nbsp;</div></li><li><div><span class="comment">   *      return values.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args  {</span>&nbsp;</div></li><li><div><span class="comment">   *     Arguments are listed here with an explanation of their defaults.</span>&nbsp;</div></li><li><div><span class="comment">   *     For more information about the arguments, see</span>&nbsp;</div></li><li><div><span class="comment">   *     {@link bp_core_fetch_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $alt    Default: 'Profile picture of [user name]'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool     $html   Default: true.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $type   Default: 'thumb'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $width  Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $height Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string User avatar string.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_loggedin_user_avatar( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'item_id' =&gt; bp_loggedin_user_id(), &nbsp;</div></li><li><div>          'type' =&gt; 'thumb', &nbsp;</div></li><li><div>          'width' =&gt; false, &nbsp;</div></li><li><div>          'height' =&gt; false, &nbsp;</div></li><li><div>          'html' =&gt; true, &nbsp;</div></li><li><div>          'alt' =&gt; sprintf( __( 'Profile picture of %s', 'buddypress' ), bp_get_loggedin_user_fullname() )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the logged in user's avatar.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value User avatar string.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r     Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $args  Array of initial arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_loggedin_user_avatar', bp_core_fetch_avatar( $r ), $r, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the displayed user's avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_displayed_user_avatar() for a description of params.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {@see bp_get_displayed_user_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_avatar( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_displayed_user_avatar( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the displayed user's avatar.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see bp_core_fetch_avatar() For a description of arguments and</span>&nbsp;</div></li><li><div><span class="comment">   *      return values.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args  {</span>&nbsp;</div></li><li><div><span class="comment">   *     Arguments are listed here with an explanation of their defaults.</span>&nbsp;</div></li><li><div><span class="comment">   *     For more information about the arguments, see</span>&nbsp;</div></li><li><div><span class="comment">   *     {@link bp_core_fetch_avatar()}.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $alt    Default: 'Profile picture of [user name]'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type bool     $html   Default: true.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string   $type   Default: 'thumb'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $width  Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int|bool $height Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string User avatar string.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_displayed_user_avatar( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'item_id' =&gt; bp_displayed_user_id(), &nbsp;</div></li><li><div>          'type' =&gt; 'thumb', &nbsp;</div></li><li><div>          'width' =&gt; false, &nbsp;</div></li><li><div>          'height' =&gt; false, &nbsp;</div></li><li><div>          'html' =&gt; true, &nbsp;</div></li><li><div>          'alt' =&gt; sprintf( __( 'Profile picture of %s', 'buddypress' ), bp_get_displayed_user_fullname() )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the displayed user's avatar.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value User avatar string.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r     Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $args  Array of initial arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_displayed_user_avatar', bp_core_fetch_avatar( $r ), $r, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the email address of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_email() {&nbsp;</div></li><li><div>  echo bp_get_displayed_user_email();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the email address of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_displayed_user_email() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If displayed user exists, return email address.</span>&nbsp;</div></li><li><div>      if ( isset( $bp-&gt;displayed_user-&gt;userdata-&gt;user_email ) )&nbsp;</div></li><li><div>          $retval = $bp-&gt;displayed_user-&gt;userdata-&gt;user_email;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $retval = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the email address of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval Email address for displayed user.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_displayed_user_email', esc_attr( $retval ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the &quot;active [x days ago]&quot; string for a user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_last_activity() for a description of parameters.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $user_id See {@link bp_get_last_activity()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_last_activity( $user_id = 0 ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the 'active [x days ago]' string for a user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Formatted 'active [x days ago]' string.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_last_activity', bp_get_last_activity( $user_id ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the &quot;active [x days ago]&quot; string for a user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $user_id ID of the user. Default: displayed user ID.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_last_activity( $user_id = 0 ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $user_id ) )&nbsp;</div></li><li><div>          $user_id = bp_displayed_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $last_activity = bp_core_get_last_activity( bp_get_user_last_activity( $user_id ), __('active %s', 'buddypress') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'active [x days ago]' string for a user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$user_id` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value   Formatted 'active [x days ago]' string.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $user_id ID of the user.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_last_activity', $last_activity, $user_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the calculated first name of the displayed or logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_user_firstname() {&nbsp;</div></li><li><div>  echo bp_get_user_firstname();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Output the first name of a user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Simply takes all the characters before the first space in a name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|bool $name Full name to use when generating first name.</span>&nbsp;</div></li><li><div><span class="comment">   *                          Defaults to displayed user's first name, or to</span>&nbsp;</div></li><li><div><span class="comment">   *                          logged-in user's first name if it's unavailable.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_user_firstname( $name = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Try to get displayed user.</span>&nbsp;</div></li><li><div>      if ( empty( $name ) )&nbsp;</div></li><li><div>          $name = bp_get_displayed_user_fullname();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Fall back on logged in user.</span>&nbsp;</div></li><li><div>      if ( empty( $name ) )&nbsp;</div></li><li><div>          $name = bp_get_loggedin_user_fullname();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $fullname = (array) explode( ' ', $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the first name of a user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value    First name of user.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $fullname Full name of user.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_user_firstname', $fullname[0], $fullname );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_link() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_loggedin_user_link() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_loggedin_user_link() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_loggedin_user_link', bp_loggedin_user_domain() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_link() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_displayed_user_link() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_displayed_user_link() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_displayed_user_link', bp_displayed_user_domain() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Alias of {@link bp_displayed_user_domain()}.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_user_link() { bp_displayed_user_domain(); }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Alias of {@link bp_displayed_user_id()}.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_user_id() { return bp_displayed_user_id(); }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generate the link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_domain() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the generated link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Generated link for the displayed user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_displayed_user_domain', isset( $bp-&gt;displayed_user-&gt;domain ) ? $bp-&gt;displayed_user-&gt;domain : '' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generate the link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_domain() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the generated link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Generated link for the logged-in user's profile.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_loggedin_user_domain', isset( $bp-&gt;loggedin_user-&gt;domain ) ? $bp-&gt;loggedin_user-&gt;domain : '' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the displayed user's display name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_fullname() {&nbsp;</div></li><li><div>  echo bp_get_displayed_user_fullname();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the displayed user's display name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_displayed_user_fullname() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the displayed user's display name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Displayed user's display name.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_displayed_user_fullname', isset( $bp-&gt;displayed_user-&gt;fullname ) ? $bp-&gt;displayed_user-&gt;fullname : '' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Alias of {@link bp_get_displayed_user_fullname()}.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_user_fullname() { echo bp_get_displayed_user_fullname(); }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the logged-in user's display name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_fullname() {&nbsp;</div></li><li><div>  echo bp_get_loggedin_user_fullname();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the logged-in user's display name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_loggedin_user_fullname() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the logged-in user's display name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Logged-in user's display name.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_loggedin_user_fullname', isset( $bp-&gt;loggedin_user-&gt;fullname ) ? $bp-&gt;loggedin_user-&gt;fullname : '' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the username of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_username() {&nbsp;</div></li><li><div>  echo bp_get_displayed_user_username();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the username of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_displayed_user_username() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_displayed_user_id() ) {&nbsp;</div></li><li><div>          $username = bp_core_get_username( bp_displayed_user_id(), $bp-&gt;displayed_user-&gt;userdata-&gt;user_nicename, $bp-&gt;displayed_user-&gt;userdata-&gt;user_login );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $username = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the username of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $username Username of the displayed user.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_displayed_user_username', $username );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the username of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_username() {&nbsp;</div></li><li><div>  echo bp_get_loggedin_user_username();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the username of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_loggedin_user_username() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_loggedin_user_id() ) {&nbsp;</div></li><li><div>          $username = bp_core_get_username( bp_loggedin_user_id(), $bp-&gt;loggedin_user-&gt;userdata-&gt;user_nicename, $bp-&gt;loggedin_user-&gt;userdata-&gt;user_login );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $username = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the username of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $username Username of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_loggedin_user_username', $username );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Echo the current member type message.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_member_type_message() {&nbsp;</div></li><li><div>  echo bp_get_current_member_type_message();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Generate the current member type message.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_current_member_type_message() {&nbsp;</div></li><li><div>      $type_object = bp_get_member_type_object( bp_get_current_member_type() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $message = sprintf( __( 'Viewing members of the type: %s', 'buddypress' ), '&lt;strong&gt;' . $type_object-&gt;labels['singular_name'] . '&lt;/strong&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the current member type message.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $message Message to filter.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_current_member_type_message', $message );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Signup Form ***************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Do we have a working custom sign up page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if page and template exist, false if not.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_custom_signup_page() {&nbsp;</div></li><li><div>  static $has_page = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $has_page ) )&nbsp;</div></li><li><div>      $has_page = bp_get_signup_slug() && bp_locate_template( array( 'registration/register.php', 'members/register.php', 'register.php' ), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return (bool) $has_page;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL to the signup page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_page() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_signup_page() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the URL to the signup page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_page() {&nbsp;</div></li><li><div>      if ( bp_has_custom_signup_page() ) {&nbsp;</div></li><li><div>          $page = trailingslashit( bp_get_root_domain() . '/' . bp_get_signup_slug() );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $page = bp_get_root_domain() . '/wp-signup.php';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL to the signup page.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $page URL to the signup page.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_page', $page );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Do we have a working custom activation page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return boolean True if page and template exist, false if not.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_custom_activation_page() {&nbsp;</div></li><li><div>  static $has_page = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $has_page ) )&nbsp;</div></li><li><div>      $has_page = bp_get_activate_slug() && bp_locate_template( array( 'registration/activate.php', 'members/activate.php', 'activate.php' ), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return (bool) $has_page;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL of the activation page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_activation_page() {&nbsp;</div></li><li><div>  echo esc_url( bp_get_activation_page() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the URL of the activation page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_activation_page() {&nbsp;</div></li><li><div>      if ( bp_has_custom_activation_page() ) {&nbsp;</div></li><li><div>          $page = trailingslashit( bp_get_root_domain() . '/' . bp_get_activate_slug() );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $page = trailingslashit( bp_get_root_domain() ) . 'wp-activate.php';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL of the activation page.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $page URL to the activation page.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_activation_page', $page );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the username submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_username_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_username_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the username submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo This should be properly escaped.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_username_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_username'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_username'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the username submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Username submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_username_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the user email address submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_email_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_email_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the email address submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo This should be properly escaped.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_email_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_email'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_email'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the email address submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Email address submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_email_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'signup_with_blog' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_with_blog_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_with_blog_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the 'signup_with_blog' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_with_blog_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_with_blog'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_with_blog'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'signup_with_blog' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value 'signup_with_blog' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_with_blog_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'signup_blog_url' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_blog_url_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_blog_url_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the 'signup_blog_url' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo Should be properly escaped.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_blog_url_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_blog_url'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_blog_url'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'signup_blog_url' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value 'signup_blog_url' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_blog_url_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the base URL for subdomain installations of WordPress Multisite.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_subdomain_base() {&nbsp;</div></li><li><div>  echo bp_signup_get_subdomain_base();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the base URL for subdomain installations of WordPress Multisite.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Replaces bp_blogs_get_subdomain_base()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string The base URL - eg, 'example.com' for site_url() example.com or www.example.com.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_signup_get_subdomain_base() {&nbsp;</div></li><li><div>      global $current_site;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// In case plugins are still using this filter.</span>&nbsp;</div></li><li><div>      $subdomain_base = apply_filters( 'bp_blogs_subdomain_base', preg_replace( '|^www\.|', '', $current_site-&gt;domain ) . $current_site-&gt;path );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the base URL for subdomain installations of WordPress Multisite.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $subdomain_base The base URL - eg, 'example.com' for</span>&nbsp;</div></li><li><div><span class="comment">       *                               site_url() example.com or www.example.com.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_signup_subdomain_base', $subdomain_base );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'signup_blog_titl' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_blog_title_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_blog_title_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the 'signup_blog_title' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo Should be properly escaped.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_blog_title_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_blog_title'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_blog_title'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'signup_blog_title' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value 'signup_blog_title' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_blog_title_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'signup_blog_privacy' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_blog_privacy_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_blog_privacy_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the 'signup_blog_privacy' value submitted at signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @todo Should be properly escaped.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_blog_privacy_value() {&nbsp;</div></li><li><div>      $value = '';&nbsp;</div></li><li><div>      if ( isset( $_POST['signup_blog_privacy'] ) )&nbsp;</div></li><li><div>          $value = $_POST['signup_blog_privacy'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the 'signup_blog_privacy' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value 'signup_blog_privacy' value submitted during signup.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_blog_privacy_value', $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the avatar dir used during signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_avatar_dir_value() {&nbsp;</div></li><li><div>  echo bp_get_signup_avatar_dir_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the avatar dir used during signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_avatar_dir_value() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Check if signup_avatar_dir is passed.</span>&nbsp;</div></li><li><div>      if ( !empty( $_POST['signup_avatar_dir'] ) )&nbsp;</div></li><li><div>          $signup_avatar_dir = $_POST['signup_avatar_dir'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If not, check if global is set.</span>&nbsp;</div></li><li><div>      elseif ( !empty( $bp-&gt;signup-&gt;avatar_dir ) )&nbsp;</div></li><li><div>          $signup_avatar_dir = $bp-&gt;signup-&gt;avatar_dir;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If not, set false.</span>&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $signup_avatar_dir = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the avatar dir used during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string|bool $signup_avatar_dir Avatar dir used during signup or false.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_avatar_dir_value', $signup_avatar_dir );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the current signup step.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_signup_step() {&nbsp;</div></li><li><div>  echo bp_get_current_signup_step();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the current signup step.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_current_signup_step() {&nbsp;</div></li><li><div>      return buddypress()-&gt;signup-&gt;step;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the user avatar during signup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_signup_avatar() for description of arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args See {@link bp_get_signup_avatar(}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_avatar( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_signup_avatar( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the user avatar during signup.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see bp_core_fetch_avatar() for description of arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of optional arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int    $size  Height/weight in pixels. Default: value of</span>&nbsp;</div></li><li><div><span class="comment">   *                         bp_core_avatar_full_width().</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $class CSS class. Default: 'avatar'.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string $alt   HTML 'alt' attribute. Default: 'Your Avatar'.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_avatar( $args = '' ) {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $defaults = array(&nbsp;</div></li><li><div>          'size' =&gt; bp_core_avatar_full_width(), &nbsp;</div></li><li><div>          'class' =&gt; 'avatar', &nbsp;</div></li><li><div>          'alt' =&gt; __( 'Your Profile Photo', 'buddypress' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>      extract( $r, EXTR_SKIP );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Avatar DIR is found.</span>&nbsp;</div></li><li><div>      if ( $signup_avatar_dir = bp_get_signup_avatar_dir_value() ) {&nbsp;</div></li><li><div>          $gravatar_img = bp_core_fetch_avatar( array(&nbsp;</div></li><li><div>              'item_id' =&gt; $signup_avatar_dir, &nbsp;</div></li><li><div>              'object' =&gt; 'signup', &nbsp;</div></li><li><div>              'avatar_dir' =&gt; 'avatars/signups', &nbsp;</div></li><li><div>              'type' =&gt; 'full', &nbsp;</div></li><li><div>              'width' =&gt; $size, &nbsp;</div></li><li><div>              'height' =&gt; $size, &nbsp;</div></li><li><div>              'alt' =&gt; $alt, &nbsp;</div></li><li><div>              'class' =&gt; $class&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// No avatar DIR was found.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Set default gravatar type.</span>&nbsp;</div></li><li><div>          if ( empty( $bp-&gt;grav_default-&gt;user ) )&nbsp;</div></li><li><div>              $default_grav = 'wavatar';&nbsp;</div></li><li><div>          elseif ( 'mystery' == $bp-&gt;grav_default-&gt;user )&nbsp;</div></li><li><div>              $default_grav = $bp-&gt;plugin_url . 'bp-core/images/mystery-man.jpg';&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              $default_grav = $bp-&gt;grav_default-&gt;user;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the base Gravatar url used for signup avatars when no avatar dir found.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 1.0.2</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $value Gravatar url to use.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $gravatar_url = apply_filters( 'bp_gravatar_url', '<span class="comment">//www.gravatar.com/avatar/' );</span>&nbsp;</div></li><li><div>          $md5_lcase_email = md5( strtolower( bp_get_signup_email_value() ) );&nbsp;</div></li><li><div>          $gravatar_img = '&lt;img src=&quot;' . $gravatar_url . $md5_lcase_email . '?d=' . $default_grav . '&amp;s=' . $size . '&quot; width=&quot;' . $size . '&quot; height=&quot;' . $size . '&quot; alt=&quot;' . $alt . '&quot; class=&quot;' . $class . '&quot; /&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the user avatar during signup.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $gravatar_img Avatar HTML image tag.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $args         Array of parsed args for avatar query.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_avatar', $gravatar_img, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output whether signup is allowed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Remove this function. Echoing a bool is pointless.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_signup_allowed() {&nbsp;</div></li><li><div>  echo bp_get_signup_allowed();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Is user signup allowed?</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_signup_allowed() {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters whether or not new signups are allowed.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param bool $signup_allowed Whether or not new signups are allowed.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_signup_allowed', (bool) bp_get_option( 'users_can_register' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Hook member activity feed to &lt;head&gt;.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_activity_feed() {&nbsp;</div></li><li><div>  if ( !bp_is_active( 'activity' ) || !bp_is_user() )&nbsp;</div></li><li><div>      return; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;&lt;?php bloginfo( 'name' ) ?&gt; | &lt;?php bp_displayed_user_fullname() ?&gt; | &lt;?php _e( 'Activity RSS Feed', 'buddypress' ) ?&gt;&quot; href=&quot;&lt;?php bp_member_activity_feed_link() ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'bp_head', 'bp_members_activity_feed' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a link to a members component subpage.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_members_component_link() for description of parameters.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string      $component See {@bp_get_members_component_link()}.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string      $action See {@bp_get_members_component_link()}.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string      $query_args See {@bp_get_members_component_link()}.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $nonce See {@bp_get_members_component_link()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_members_component_link( $component, $action = '', $query_args = '', $nonce = false ) {&nbsp;</div></li><li><div>  echo esc_url( bp_get_members_component_link( $component, $action, $query_args, $nonce ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Generate a link to a members component subpage.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string       $component  ID of the component (eg 'friends').</span>&nbsp;</div></li><li><div><span class="comment">   * @param string       $action     Optional. 'action' slug (eg 'invites').</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $query_args Optional. Array of URL params to add to the</span>&nbsp;</div></li><li><div><span class="comment">   *                                 URL. See {@link add_query_arg()} for format.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|bool   $nonce      Optional. If provided, the URL will be passed</span>&nbsp;</div></li><li><div><span class="comment">   *                                 through wp_nonce_url() with $nonce as the</span>&nbsp;</div></li><li><div><span class="comment">   *                                 action string.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_members_component_link( $component, $action = '', $query_args = '', $nonce = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Must be displayed user.</span>&nbsp;</div></li><li><div>      if ( !bp_displayed_user_id() )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Append $action to $url if there is no $type.</span>&nbsp;</div></li><li><div>      if ( !empty( $action ) )&nbsp;</div></li><li><div>          $url = bp_displayed_user_domain() . $bp-&gt;{$component}-&gt;slug . '/' . $action;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $url = bp_displayed_user_domain() . $bp-&gt;{$component}-&gt;slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add a slash at the end of our user url.</span>&nbsp;</div></li><li><div>      $url = trailingslashit( $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add possible query arg.</span>&nbsp;</div></li><li><div>      if ( !empty( $query_args ) && is_array( $query_args ) )&nbsp;</div></li><li><div>          $url = add_query_arg( $query_args, $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// To nonce, or not to nonce...</span>&nbsp;</div></li><li><div>      if ( true === $nonce )&nbsp;</div></li><li><div>          $url = wp_nonce_url( $url );&nbsp;</div></li><li><div>      elseif ( is_string( $nonce ) )&nbsp;</div></li><li><div>          $url = wp_nonce_url( $url, $nonce );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Return the url, if there is one.</span>&nbsp;</div></li><li><div>      if ( !empty( $url ) )&nbsp;</div></li><li><div>          return $url;&nbsp;</div></li><li><div>  }&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>