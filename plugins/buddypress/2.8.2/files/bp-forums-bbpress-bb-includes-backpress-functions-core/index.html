<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.8.2" data-slug="buddypress" data-type="file" data-id="49160"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp-forums-bbpress-bb-includes-backpress-functions-core | file | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, buddypress, 2.8.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=08b2055326521372d1d80903876927db' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bp-forums-bbpress-bb-includes-backpress-functions-core/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-forums-bbpress-bb-includes-backpress-functions-core%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-forums-bbpress-bb-includes-backpress-functions-core%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.8.2-file-bp-forums-bbpress-bb-includes-backpress-functions-core","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp-forums-bbpress-bb-includes-backpress-functions-core" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.2." href="http://hookr.io/plugins/buddypress/2.8.2/" class="H_VERSION"><span property="name">2.8.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/buddypress/2.8.2/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp-forums-bbpress-bb-includes&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="7837"><a href="http://hookr.io/plugins/buddypress/2.8.2/all/" title="All">All <span class="count badge">7837</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3621"><a href="http://hookr.io/plugins/buddypress/2.8.2/hooks/" title="Hooks">Hooks <span class="count badge">3621</span></a></li><li class="" data-id="action" data-count="1727"><a href="http://hookr.io/plugins/buddypress/2.8.2/actions/" title="Actions">Actions <span class="count badge">1727</span></a></li><li class="" data-id="filter" data-count="1894"><a href="http://hookr.io/plugins/buddypress/2.8.2/filters/" title="Filters">Filters <span class="count badge">1894</span></a></li><li class="" data-id="class" data-count="181"><a href="http://hookr.io/plugins/buddypress/2.8.2/classes/" title="Classes">Classes <span class="count badge">181</span></a></li><li class="" data-id="constant" data-count="161"><a href="http://hookr.io/plugins/buddypress/2.8.2/constants/" title="Constants">Constants <span class="count badge">161</span></a></li><li class="" data-id="function" data-count="3874"><a href="http://hookr.io/plugins/buddypress/2.8.2/functions/" title="Functions">Functions <span class="count badge">3874</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bp-forums/bbpress/bb-includes/backpress/functions.core.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">// Last sync [WP11544]</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * From WP wp-includes/functions.php</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Missing functions are indicated in comments</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Main BackPress API</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package BackPress</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function mysql2date()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('current_time') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the current time based on specified type.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The 'mysql' type will return the time in the format for MySQL DATETIME field.</span>&nbsp;</div></li><li><div><span class="comment"> * The 'timestamp' type will return the current timestamp.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If $gmt is set to either '1' or 'true', then both types will use GMT time.</span>&nbsp;</div></li><li><div><span class="comment"> * if $gmt is false, the output is adjusted with the GMT offset in the WordPress option.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type Either 'mysql' or 'timestamp'.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $gmt Optional. Whether to use GMT timezone. Default is false.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int|string String if $type is 'gmt', int if $type is 'timestamp'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function current_time( $type, $gmt = 0 ) {&nbsp;</div></li><li><div>  switch ( $type ) {&nbsp;</div></li><li><div>      case 'mysql':&nbsp;</div></li><li><div>          return ( $gmt ) ? gmdate( 'Y-m-d H:i:s' ) : gmdate( 'Y-m-d H:i:s', ( time() + ( backpress_get_option( 'gmt_offset' ) * 3600 ) ) );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'timestamp':&nbsp;</div></li><li><div>          return ( $gmt ) ? time() : time() + ( backpress_get_option( 'gmt_offset' ) * 3600 );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function date_i18n()</span>&nbsp;</div></li><li><div><span class="comment">// ! function number_format_i18n()</span>&nbsp;</div></li><li><div><span class="comment">// ! function size_format()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_weekstartend()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('maybe_unserialize') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Unserialize value only if it was serialized.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $original Maybe unserialized original, if is needed.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Unserialized data can be any type.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function maybe_unserialize( $original ) {&nbsp;</div></li><li><div>  if ( is_serialized( $original ) ) <span class="comment">// don't attempt to unserialize data that wasn't serialized going in</span>&nbsp;</div></li><li><div>      return @unserialize( $original );&nbsp;</div></li><li><div>  return $original;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('is_serialized') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check value to find if it was serialized.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If $data is not an string, then returned value will always be false.</span>&nbsp;</div></li><li><div><span class="comment"> * Serialized data is always a string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.5</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $data Value to check to see if was serialized.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool False if not serialized and true if it was.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_serialized( $data ) {&nbsp;</div></li><li><div>  <span class="comment">// if it isn't a string, it isn't serialized</span>&nbsp;</div></li><li><div>  if ( !is_string( $data ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  $data = trim( $data );&nbsp;</div></li><li><div>  if ( 'N;' == $data )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  if ( !preg_match( '/^([adObis]):/', $data, $badions ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  switch ( $badions[1] ) {&nbsp;</div></li><li><div>      case 'a' :&nbsp;</div></li><li><div>      case 'O' :&nbsp;</div></li><li><div>      case 's' :&nbsp;</div></li><li><div>          if ( preg_match( &quot;/^{$badions[1]}:[0-9]+:.*[;}]\$/s&quot;, $data ) )&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      case 'b' :&nbsp;</div></li><li><div>      case 'i' :&nbsp;</div></li><li><div>      case 'd' :&nbsp;</div></li><li><div>          if ( preg_match( &quot;/^{$badions[1]}:[0-9.E-]+;\$/&quot;, $data ) )&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('is_serialized_string') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether serialized data is of string type.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.5</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $data Serialized data</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool False if not a serialized string, true if it is.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_serialized_string( $data ) {&nbsp;</div></li><li><div>  <span class="comment">// if it isn't a string, it isn't a serialized string</span>&nbsp;</div></li><li><div>  if ( !is_string( $data ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  $data = trim( $data );&nbsp;</div></li><li><div>  if ( preg_match( '/^s:[0-9]+:.*;$/s', $data ) ) <span class="comment">// this should fetch all serialized strings</span>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function get_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_protect_special_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function form_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_alloptions()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_load_alloptions()</span>&nbsp;</div></li><li><div><span class="comment">// ! function update_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function add_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function delete_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function delete_transient()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_transient()</span>&nbsp;</div></li><li><div><span class="comment">// ! function set_transient()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_user_settings()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_user_setting()</span>&nbsp;</div></li><li><div><span class="comment">// ! function set_user_setting()</span>&nbsp;</div></li><li><div><span class="comment">// ! function delete_user_setting()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_all_user_settings()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_set_all_user_settings()</span>&nbsp;</div></li><li><div><span class="comment">// ! function delete_all_user_settings()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('maybe_serialize') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Serialize data, if needed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.5</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $data Data that might be serialized.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed A scalar data</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function maybe_serialize( $data ) {&nbsp;</div></li><li><div>  if ( is_array( $data ) || is_object( $data ) )&nbsp;</div></li><li><div>      return serialize( $data );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_serialized( $data ) )&nbsp;</div></li><li><div>      return serialize( $data );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $data;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function make_url_footnote()</span>&nbsp;</div></li><li><div><span class="comment">// ! function xmlrpc_getposttitle()</span>&nbsp;</div></li><li><div><span class="comment">// ! function xmlrpc_getpostcategory()</span>&nbsp;</div></li><li><div><span class="comment">// ! function xmlrpc_removepostdata()</span>&nbsp;</div></li><li><div><span class="comment">// ! function debug_fopen()</span>&nbsp;</div></li><li><div><span class="comment">// ! function debug_fwrite()</span>&nbsp;</div></li><li><div><span class="comment">// ! function debug_fclose()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_enclose()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_get_http()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_get_http_headers()</span>&nbsp;</div></li><li><div><span class="comment">// ! function is_new_day()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'build_query' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Build URL query based on an associative and, or indexed array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is a convenient function for easily building url queries. It sets the</span>&nbsp;</div></li><li><div><span class="comment"> * separator to '&' and uses _http_build_query() function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see _http_build_query() Used to build the query</span>&nbsp;</div></li><li><div><span class="comment"> * @link http://us2.php.net/manual/en/function.http-build-query.php more on what</span>&nbsp;</div></li><li><div><span class="comment"> *        http_build_query() does.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $data URL-encode key/value pairs.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string URL encoded string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function build_query( $data ) {&nbsp;</div></li><li><div>  return _http_build_query( $data, null, '&', '', false );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'add_query_arg' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve a modified URL query string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * You can rebuild the URL and append a new query variable to the URL query by</span>&nbsp;</div></li><li><div><span class="comment"> * using this function. You can also retrieve the full URL with query data.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Adding a single key & value or an associative array. Setting a key value to</span>&nbsp;</div></li><li><div><span class="comment"> * emptystring removes the key. Omitting oldquery_or_uri uses the $_SERVER</span>&nbsp;</div></li><li><div><span class="comment"> * value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $param1 Either newkey or an associative_array</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $param2 Either newvalue or oldquery or uri</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $param3 Optional. Old query or uri</span>&nbsp;</div></li><li><div><span class="comment"> * @return string New URL query string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function add_query_arg() {&nbsp;</div></li><li><div>  $args = func_get_args();&nbsp;</div></li><li><div>  if ( is_array( $args[0] ) ) {&nbsp;</div></li><li><div>      if ( count( $args ) &lt; 2 || false === $args[1] )&nbsp;</div></li><li><div>          $uri = $_SERVER['REQUEST_URI'];&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $uri = $args[1];&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( count( $args ) &lt; 3 || false === $args[2] )&nbsp;</div></li><li><div>          $uri = $_SERVER['REQUEST_URI'];&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $uri = $args[2];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $frag = strstr( $uri, '#' ) )&nbsp;</div></li><li><div>      $uri = substr( $uri, 0, -strlen( $frag ) );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $frag = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 === stripos( $uri, 'http:<span class="comment"><span class="comment">//' ) ) {</span></span>&nbsp;</div></li><li><div>      $protocol = 'http:<span class="comment"><span class="comment">//';</span></span>&nbsp;</div></li><li><div>      $uri = substr( $uri, 7 );&nbsp;</div></li><li><div>  } elseif ( 0 === stripos( $uri, 'https:<span class="comment"><span class="comment">//' ) ) {</span></span>&nbsp;</div></li><li><div>      $protocol = 'https:<span class="comment"><span class="comment">//';</span></span>&nbsp;</div></li><li><div>      $uri = substr( $uri, 8 );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $protocol = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( strpos( $uri, '?' ) !== false ) {&nbsp;</div></li><li><div>      list( $base, $query ) = explode( '?', $uri, 2 );&nbsp;</div></li><li><div>      $base .= '?';&nbsp;</div></li><li><div>  } elseif ( $protocol || strpos( $uri, '=' ) === false ) {&nbsp;</div></li><li><div>      $base = $uri . '?';&nbsp;</div></li><li><div>      $query = '';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $base = '';&nbsp;</div></li><li><div>      $query = $uri;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_parse_str( $query, $qs );&nbsp;</div></li><li><div>  $qs = urlencode_deep( $qs ); <span class="comment">// this re-URL-encodes things that were already in the query string</span>&nbsp;</div></li><li><div>  if ( is_array( $args[0] ) ) {&nbsp;</div></li><li><div>      foreach ( $args[0] as $k =&gt; $v ) {&nbsp;</div></li><li><div>          $qs[ $k ] = $v;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $qs[ $args[0] ] = $args[1];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $qs as $k =&gt; $v ) {&nbsp;</div></li><li><div>      if ( $v === false )&nbsp;</div></li><li><div>          unset( $qs[$k] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $ret = build_query( $qs );&nbsp;</div></li><li><div>  $ret = trim( $ret, '?' );&nbsp;</div></li><li><div>  $ret = preg_replace( '#=(&|$)#', '$1', $ret );&nbsp;</div></li><li><div>  $ret = $protocol . $base . $ret . $frag;&nbsp;</div></li><li><div>  $ret = rtrim( $ret, '?' );&nbsp;</div></li><li><div>  return $ret;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'remove_query_arg' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Removes an item or list from the query string.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $key Query key or keys to remove.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $query When false uses the $_SERVER value.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string New URL query string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function remove_query_arg( $key, $query=false ) {&nbsp;</div></li><li><div>  if ( is_array( $key ) ) { <span class="comment">// removing multiple keys</span>&nbsp;</div></li><li><div>      foreach ( $key as $k )&nbsp;</div></li><li><div>          $query = add_query_arg( $k, false, $query );&nbsp;</div></li><li><div>      return $query;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return add_query_arg( $key, false, $query );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function add_magic_quotes()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_remote_fopen' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * HTTP request for URI to retrieve content.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.1</span>&nbsp;</div></li><li><div><span class="comment"> * @uses wp_remote_get()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $uri URI/URL of web page to retrieve.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|string HTTP content. False on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_remote_fopen( $uri ) {&nbsp;</div></li><li><div>  $parsed_url = @parse_url( $uri );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$parsed_url || !is_array( $parsed_url ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $options = array();&nbsp;</div></li><li><div>  $options['timeout'] = 10;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $response = wp_remote_get( $uri, $options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_wp_error( $response ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $response['body'];&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function wp()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'get_status_header_desc' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve the description for the HTTP status.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $code HTTP status code.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Empty string if not found, or description if found.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_status_header_desc( $code ) {&nbsp;</div></li><li><div>  global $wp_header_to_desc;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $code = absint( $code );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset( $wp_header_to_desc ) ) {&nbsp;</div></li><li><div>      $wp_header_to_desc = array(&nbsp;</div></li><li><div>          100 =&gt; 'Continue', &nbsp;</div></li><li><div>          101 =&gt; 'Switching Protocols', &nbsp;</div></li><li><div>          102 =&gt; 'Processing', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          200 =&gt; 'OK', &nbsp;</div></li><li><div>          201 =&gt; 'Created', &nbsp;</div></li><li><div>          202 =&gt; 'Accepted', &nbsp;</div></li><li><div>          203 =&gt; 'Non-Authoritative Information', &nbsp;</div></li><li><div>          204 =&gt; 'No Content', &nbsp;</div></li><li><div>          205 =&gt; 'Reset Content', &nbsp;</div></li><li><div>          206 =&gt; 'Partial Content', &nbsp;</div></li><li><div>          207 =&gt; 'Multi-Status', &nbsp;</div></li><li><div>          226 =&gt; 'IM Used', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          300 =&gt; 'Multiple Choices', &nbsp;</div></li><li><div>          301 =&gt; 'Moved Permanently', &nbsp;</div></li><li><div>          302 =&gt; 'Found', &nbsp;</div></li><li><div>          303 =&gt; 'See Other', &nbsp;</div></li><li><div>          304 =&gt; 'Not Modified', &nbsp;</div></li><li><div>          305 =&gt; 'Use Proxy', &nbsp;</div></li><li><div>          306 =&gt; 'Reserved', &nbsp;</div></li><li><div>          307 =&gt; 'Temporary Redirect', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          400 =&gt; 'Bad Request', &nbsp;</div></li><li><div>          401 =&gt; 'Unauthorized', &nbsp;</div></li><li><div>          402 =&gt; 'Payment Required', &nbsp;</div></li><li><div>          403 =&gt; 'Forbidden', &nbsp;</div></li><li><div>          404 =&gt; 'Not Found', &nbsp;</div></li><li><div>          405 =&gt; 'Method Not Allowed', &nbsp;</div></li><li><div>          406 =&gt; 'Not Acceptable', &nbsp;</div></li><li><div>          407 =&gt; 'Proxy Authentication Required', &nbsp;</div></li><li><div>          408 =&gt; 'Request Timeout', &nbsp;</div></li><li><div>          409 =&gt; 'Conflict', &nbsp;</div></li><li><div>          410 =&gt; 'Gone', &nbsp;</div></li><li><div>          411 =&gt; 'Length Required', &nbsp;</div></li><li><div>          412 =&gt; 'Precondition Failed', &nbsp;</div></li><li><div>          413 =&gt; 'Request Entity Too Large', &nbsp;</div></li><li><div>          414 =&gt; 'Request-URI Too Long', &nbsp;</div></li><li><div>          415 =&gt; 'Unsupported Media Type', &nbsp;</div></li><li><div>          416 =&gt; 'Requested Range Not Satisfiable', &nbsp;</div></li><li><div>          417 =&gt; 'Expectation Failed', &nbsp;</div></li><li><div>          422 =&gt; 'Unprocessable Entity', &nbsp;</div></li><li><div>          423 =&gt; 'Locked', &nbsp;</div></li><li><div>          424 =&gt; 'Failed Dependency', &nbsp;</div></li><li><div>          426 =&gt; 'Upgrade Required', &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          500 =&gt; 'Internal Server Error', &nbsp;</div></li><li><div>          501 =&gt; 'Not Implemented', &nbsp;</div></li><li><div>          502 =&gt; 'Bad Gateway', &nbsp;</div></li><li><div>          503 =&gt; 'Service Unavailable', &nbsp;</div></li><li><div>          504 =&gt; 'Gateway Timeout', &nbsp;</div></li><li><div>          505 =&gt; 'HTTP Version Not Supported', &nbsp;</div></li><li><div>          506 =&gt; 'Variant Also Negotiates', &nbsp;</div></li><li><div>          507 =&gt; 'Insufficient Storage', &nbsp;</div></li><li><div>          510 =&gt; 'Not Extended'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $wp_header_to_desc[$code] ) )&nbsp;</div></li><li><div>      return $wp_header_to_desc[$code];&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'status_header' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set HTTP status header.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @uses apply_filters() Calls 'status_header' on status header string, HTTP</span>&nbsp;</div></li><li><div><span class="comment"> *        HTTP code, HTTP code description, and protocol string as separate</span>&nbsp;</div></li><li><div><span class="comment"> *        parameters.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $header HTTP status code</span>&nbsp;</div></li><li><div><span class="comment"> * @return null Does not return anything.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function status_header( $header ) {&nbsp;</div></li><li><div>  $text = get_status_header_desc( $header );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $text ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $protocol = $_SERVER[&quot;SERVER_PROTOCOL&quot;];&nbsp;</div></li><li><div>  if ( 'HTTP/1.1' != $protocol && 'HTTP/1.0' != $protocol )&nbsp;</div></li><li><div>      $protocol = 'HTTP/1.0';&nbsp;</div></li><li><div>  $status_header = &quot;$protocol $header $text&quot;;&nbsp;</div></li><li><div>  if ( function_exists( 'apply_filters' ) )&nbsp;</div></li><li><div>      $status_header = apply_filters( 'status_header', $status_header, $header, $text, $protocol );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return @header( $status_header, true, $header );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_get_nocache_headers' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets the header information to prevent caching.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The several different headers cover the different ways cache prevention is handled</span>&nbsp;</div></li><li><div><span class="comment"> * by different browsers</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @uses apply_filters()</span>&nbsp;</div></li><li><div><span class="comment"> * @return array The associative array of header names and field values.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_nocache_headers() {&nbsp;</div></li><li><div>  $headers = array(&nbsp;</div></li><li><div>      'Expires' =&gt; 'Wed, 11 Jan 1984 05:00:00 GMT', &nbsp;</div></li><li><div>      'Last-Modified' =&gt; gmdate( 'D, d M Y H:i:s' ) . ' GMT', &nbsp;</div></li><li><div>      'Cache-Control' =&gt; 'no-cache, must-revalidate, max-age=0', &nbsp;</div></li><li><div>      'Pragma' =&gt; 'no-cache', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists('apply_filters') ) {&nbsp;</div></li><li><div>      $headers = apply_filters('nocache_headers', $headers);&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $headers;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'nocache_headers' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Sets the headers to prevent caching for the different browsers.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Different browsers support different nocache headers, so several headers must</span>&nbsp;</div></li><li><div><span class="comment"> * be sent so that all of them get the point that no caching should occur.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @uses wp_get_nocache_headers()</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function nocache_headers() {&nbsp;</div></li><li><div>  $headers = wp_get_nocache_headers();&nbsp;</div></li><li><div>  foreach( (array) $headers as $name =&gt; $field_value )&nbsp;</div></li><li><div>      @header(&quot;{$name}: {$field_value}&quot;);&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'cache_javascript_headers' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set the headers for caching for 10 days with JavaScript content type.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function cache_javascript_headers() {&nbsp;</div></li><li><div>  $expiresOffset = 864000; <span class="comment">// 10 days</span>&nbsp;</div></li><li><div>  header( &quot;Content-Type: text/javascript; charset=&quot; . backpress_get_option( 'charset' ) );&nbsp;</div></li><li><div>  header( &quot;Vary: Accept-Encoding&quot; ); <span class="comment">// Handle proxies</span>&nbsp;</div></li><li><div>  header( &quot;Expires: &quot; . gmdate( &quot;D, d M Y H:i:s&quot;, time() + $expiresOffset ) . &quot; GMT&quot; );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function get_num_queries()</span>&nbsp;</div></li><li><div><span class="comment">// ! function bool_from_yn()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_feed()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_feed_rdf()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_feed_rss()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_feed_rss2()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_feed_atom()</span>&nbsp;</div></li><li><div><span class="comment">// ! function do_robots()</span>&nbsp;</div></li><li><div><span class="comment">// ! function is_blog_installed()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_nonce_url()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_nonce_field()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_referer_field' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve or display referer hidden field for forms.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The referer link is the current Request URI from the server super global. The</span>&nbsp;</div></li><li><div><span class="comment"> * input name is '_wp_http_referer', in case you wanted to check manually.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Security</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.4</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $echo Whether to echo or return the referer field.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Referer field.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_referer_field( $echo = true) {&nbsp;</div></li><li><div>  $ref = esc_attr( $_SERVER['REQUEST_URI'] );&nbsp;</div></li><li><div>  $referer_field = '&lt;input type=&quot;hidden&quot; name=&quot;_wp_http_referer&quot; value=&quot;'. $ref . '&quot; /&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $echo )&nbsp;</div></li><li><div>      echo $referer_field;&nbsp;</div></li><li><div>  return $referer_field;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_original_referer_field' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve or display original referer hidden field for forms.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The input name is '_wp_original_http_referer' and will be either the same</span>&nbsp;</div></li><li><div><span class="comment"> * value of {@link wp_referer_field()}, if that was posted already or it will</span>&nbsp;</div></li><li><div><span class="comment"> * be the current page, if it doesn't exist.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Security</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.4</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $echo Whether to echo the original http referer</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $jump_back_to Optional, default is 'current'. Can be 'previous' or page you want to jump back to.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Original referer field.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_original_referer_field( $echo = true, $jump_back_to = 'current' ) {&nbsp;</div></li><li><div>  $jump_back_to = ( 'previous' == $jump_back_to ) ? wp_get_referer() : $_SERVER['REQUEST_URI'];&nbsp;</div></li><li><div>  $ref = ( wp_get_original_referer() ) ? wp_get_original_referer() : $jump_back_to;&nbsp;</div></li><li><div>  $orig_referer_field = '&lt;input type=&quot;hidden&quot; name=&quot;_wp_original_http_referer&quot; value=&quot;' . esc_attr( stripslashes( $ref ) ) . '&quot; /&gt;';&nbsp;</div></li><li><div>  if ( $echo )&nbsp;</div></li><li><div>      echo $orig_referer_field;&nbsp;</div></li><li><div>  return $orig_referer_field;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_get_referer' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve referer from '_wp_http_referer', HTTP referer, or current page respectively.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Security</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.4</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool False on failure. Referer URL on success.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_referer() {&nbsp;</div></li><li><div>  $ref = '';&nbsp;</div></li><li><div>  if ( ! empty( $_REQUEST['_wp_http_referer'] ) )&nbsp;</div></li><li><div>      $ref = $_REQUEST['_wp_http_referer'];&nbsp;</div></li><li><div>  else if ( ! empty( $_SERVER['HTTP_REFERER'] ) )&nbsp;</div></li><li><div>      $ref = $_SERVER['HTTP_REFERER'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $ref !== $_SERVER['REQUEST_URI'] )&nbsp;</div></li><li><div>      return $ref;&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_get_original_referer' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve original referer that was posted, if it exists.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package WordPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage Security</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.4</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool False if no original referer or original referer if set.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_get_original_referer() {&nbsp;</div></li><li><div>  if ( !empty( $_REQUEST['_wp_original_http_referer'] ) )&nbsp;</div></li><li><div>      return $_REQUEST['_wp_original_http_referer'];&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function wp_mkdir_p()</span>&nbsp;</div></li><li><div><span class="comment">// ! function path_is_absolute()</span>&nbsp;</div></li><li><div><span class="comment">// ! function path_join()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_upload_dir()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_unique_filename()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_upload_bits()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_ext2type()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_check_filetype()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_explain_nonce()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_nonce_ays()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_die()</span>&nbsp;</div></li><li><div><span class="comment">// ! function _config_wp_home()</span>&nbsp;</div></li><li><div><span class="comment">// ! function _config_wp_siteurl()</span>&nbsp;</div></li><li><div><span class="comment">// ! function _mce_set_direction()</span>&nbsp;</div></li><li><div><span class="comment">// ! function smilies_init()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('wp_parse_args') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Merge user defined arguments into defaults array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is used throughout WordPress to allow for both string or array</span>&nbsp;</div></li><li><div><span class="comment"> * to be merged into another array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args Value to merge with $defaults</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $defaults Array that serves as the defaults.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Merged user defined values with defaults.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_parse_args( $args, $defaults = '' ) {&nbsp;</div></li><li><div>  if ( is_object( $args ) )&nbsp;</div></li><li><div>      $r = get_object_vars( $args );&nbsp;</div></li><li><div>  elseif ( is_array( $args ) )&nbsp;</div></li><li><div>      $r =& $args;&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      wp_parse_str( $args, $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $defaults ) )&nbsp;</div></li><li><div>      return array_merge( $defaults, $r );&nbsp;</div></li><li><div>  return $r;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function wp_maybe_load_widgets()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_widgets_add_menu()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_ob_end_flush_all()</span>&nbsp;</div></li><li><div><span class="comment">// ! function require_wp_db()</span>&nbsp;</div></li><li><div><span class="comment">// ! function dead_db()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('absint') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Converts value to nonnegative integer.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $maybeint Data you wish to have convered to an nonnegative integer</span>&nbsp;</div></li><li><div><span class="comment"> * @return int An nonnegative integer</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function absint( $maybeint ) {&nbsp;</div></li><li><div>  return abs( intval( $maybeint ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function url_is_accessable_via_ssl()</span>&nbsp;</div></li><li><div><span class="comment">// ! function atom_service_url_filter()</span>&nbsp;</div></li><li><div><span class="comment">// ! function _deprecated_function()</span>&nbsp;</div></li><li><div><span class="comment">// ! function _deprecated_file()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('is_lighttpd_before_150') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the server running earlier than 1.5.0 version of lighttpd</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether the server is running lighttpd &lt; 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_lighttpd_before_150() {&nbsp;</div></li><li><div>  $server_parts = explode( '/', isset( $_SERVER['SERVER_SOFTWARE'] )? $_SERVER['SERVER_SOFTWARE'] : '' );&nbsp;</div></li><li><div>  $server_parts[1] = isset( $server_parts[1] )? $server_parts[1] : '';&nbsp;</div></li><li><div>  return  'lighttpd' == $server_parts[0] && -1 == version_compare( $server_parts[1], '1.5.0' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('apache_mod_loaded') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Does the specified module exist in the apache config?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $mod e.g. mod_rewrite</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $default The default return value if the module is not found</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function apache_mod_loaded($mod, $default = false) {&nbsp;</div></li><li><div>  global $is_apache;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$is_apache )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists('apache_get_modules') ) {&nbsp;</div></li><li><div>      $mods = apache_get_modules();&nbsp;</div></li><li><div>      if ( in_array($mod, $mods) )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>  } elseif ( function_exists('phpinfo') ) {&nbsp;</div></li><li><div>          ob_start();&nbsp;</div></li><li><div>          phpinfo(8);&nbsp;</div></li><li><div>          $phpinfo = ob_get_clean();&nbsp;</div></li><li><div>          if ( false !== strpos($phpinfo, $mod) )&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $default;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('validate_file') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * File validates against allowed set of defined rules.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * A return value of '1' means that the $file contains either '..' or './'. A</span>&nbsp;</div></li><li><div><span class="comment"> * return value of '2' means that the $file contains ':' after the first</span>&nbsp;</div></li><li><div><span class="comment"> * character. A return value of '3' means that the file is not in the allowed</span>&nbsp;</div></li><li><div><span class="comment"> * files list.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $file File path.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $allowed_files List of allowed files.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int 0 means nothing is wrong, greater than 0 means something was wrong.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function validate_file( $file, $allowed_files = '' ) {&nbsp;</div></li><li><div>  if ( false !== strpos( $file, '..' ))&nbsp;</div></li><li><div>      return 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== strpos( $file, './' ))&nbsp;</div></li><li><div>      return 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (':' == substr( $file, 1, 1 ))&nbsp;</div></li><li><div>      return 2;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if (!empty ( $allowed_files ) && (!in_array( $file, $allowed_files ) ) )&nbsp;</div></li><li><div>      return 3;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return 0;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('is_ssl') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if SSL is used.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if SSL, false if not used.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_ssl() {&nbsp;</div></li><li><div>  if ( isset($_SERVER['HTTPS']) ) {&nbsp;</div></li><li><div>      if ( 'on' == strtolower($_SERVER['HTTPS']) )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      if ( '1' == $_SERVER['HTTPS'] )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>  } elseif ( isset($_SERVER['SERVER_PORT']) && ( '443' == $_SERVER['SERVER_PORT'] ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('force_ssl_login') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether SSL login should be forced.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $force Optional.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if forced, false if not forced.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function force_ssl_login($force = '') {&nbsp;</div></li><li><div>  static $forced;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' != $force ) {&nbsp;</div></li><li><div>      $old_forced = $forced;&nbsp;</div></li><li><div>      $forced = $force;&nbsp;</div></li><li><div>      return $old_forced;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $forced;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('force_ssl_admin') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether to force SSL used for the Administration Panels.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $force</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if forced, false if not forced.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function force_ssl_admin($force = '') {&nbsp;</div></li><li><div>  static $forced;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' != $force ) {&nbsp;</div></li><li><div>      $old_forced = $forced;&nbsp;</div></li><li><div>      $forced = $force;&nbsp;</div></li><li><div>      return $old_forced;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $forced;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// ! function wp_guess_url()</span>&nbsp;</div></li><li><div><span class="comment">// ! function wp_suspend_cache_invalidation()</span>&nbsp;</div></li><li><div><span class="comment">// ! function get_site_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function add_site_option()</span>&nbsp;</div></li><li><div><span class="comment">// ! function update_site_option()</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('wp_timezone_override_offset') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * gmt_offset modification for smart timezone handling</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Overrides the gmt_offset option if we have a timezone_string available</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_timezone_override_offset() {&nbsp;</div></li><li><div>  if ( !wp_timezone_supported() ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( !$timezone_string = backpress_get_option( 'timezone_string' ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  @date_default_timezone_set( $timezone_string );&nbsp;</div></li><li><div>  $timezone_object = timezone_open( $timezone_string );&nbsp;</div></li><li><div>  $datetime_object = date_create();&nbsp;</div></li><li><div>  if ( false === $timezone_object || false === $datetime_object ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return round( timezone_offset_get( $timezone_object, $datetime_object ) / 3600, 2 );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('wp_timezone_supported') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check for PHP timezone support</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_timezone_supported() {&nbsp;</div></li><li><div>  $support = false;&nbsp;</div></li><li><div>  if (&nbsp;</div></li><li><div>      function_exists( 'date_default_timezone_set' ) &&&nbsp;</div></li><li><div>      function_exists( 'timezone_identifiers_list' ) &&&nbsp;</div></li><li><div>      function_exists( 'timezone_open' ) &&&nbsp;</div></li><li><div>      function_exists( 'timezone_offset_get' )&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>      $support = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return apply_filters( 'timezone_support', $support );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('_wp_timezone_choice_usort_callback') ) :&nbsp;</div></li><li><div>function _wp_timezone_choice_usort_callback( $a, $b ) {&nbsp;</div></li><li><div>  <span class="comment">// Don't use translated versions of Etc</span>&nbsp;</div></li><li><div>  if ( 'Etc' === $a['continent'] && 'Etc' === $b['continent'] ) {&nbsp;</div></li><li><div>      <span class="comment">// Make the order of these more like the old dropdown</span>&nbsp;</div></li><li><div>      if ( 'GMT+' === substr( $a['city'], 0, 4 ) && 'GMT+' === substr( $b['city'], 0, 4 ) ) {&nbsp;</div></li><li><div>          return -1 * ( strnatcasecmp( $a['city'], $b['city'] ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( 'UTC' === $a['city'] ) {&nbsp;</div></li><li><div>          if ( 'GMT+' === substr( $b['city'], 0, 4 ) ) {&nbsp;</div></li><li><div>              return 1;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          return -1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( 'UTC' === $b['city'] ) {&nbsp;</div></li><li><div>          if ( 'GMT+' === substr( $a['city'], 0, 4 ) ) {&nbsp;</div></li><li><div>              return -1;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          return 1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return strnatcasecmp( $a['city'], $b['city'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( $a['t_continent'] == $b['t_continent'] ) {&nbsp;</div></li><li><div>      if ( $a['t_city'] == $b['t_city'] ) {&nbsp;</div></li><li><div>          return strnatcasecmp( $a['t_subcity'], $b['t_subcity'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return strnatcasecmp( $a['t_city'], $b['t_city'] );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">// Force Etc to the bottom of the list</span>&nbsp;</div></li><li><div>      if ( 'Etc' === $a['continent'] ) {&nbsp;</div></li><li><div>          return 1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( 'Etc' === $b['continent'] ) {&nbsp;</div></li><li><div>          return -1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return strnatcasecmp( $a['t_continent'], $b['t_continent'] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('wp_timezone_choice') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gives a nicely formatted list of timezone strings // temporary! Not in final</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param $selected_zone string Selected Zone</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_timezone_choice( $selected_zone ) {&nbsp;</div></li><li><div>  static $mo_loaded = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $continents = array( 'Africa', 'America', 'Antarctica', 'Arctic', 'Asia', 'Atlantic', 'Australia', 'Europe', 'Indian', 'Pacific', 'Etc' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Load translations for continents and cities</span>&nbsp;</div></li><li><div>  if ( !$mo_loaded ) {&nbsp;</div></li><li><div>      $locale = backpress_get_option( 'language_locale' );&nbsp;</div></li><li><div>      $mofile = backpress_get_option( 'language_directory' ) . 'continents-cities-' . $locale . '.mo';&nbsp;</div></li><li><div>      load_textdomain( 'continents-cities', $mofile );&nbsp;</div></li><li><div>      $mo_loaded = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $zonen = array();&nbsp;</div></li><li><div>  foreach ( timezone_identifiers_list() as $zone ) {&nbsp;</div></li><li><div>      $zone = explode( '/', $zone );&nbsp;</div></li><li><div>      if ( !in_array( $zone[0], $continents ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( 'Etc' === $zone[0] && in_array( $zone[1], array( 'UCT', 'GMT', 'GMT0', 'GMT+0', 'GMT-0', 'Greenwich', 'Universal', 'Zulu' ) ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// This determines what gets set and translated - we don't translate Etc/* strings here, they are done later</span>&nbsp;</div></li><li><div>      $exists = array(&nbsp;</div></li><li><div>          0 =&gt; ( isset( $zone[0] ) && $zone[0] ) ? true : false, &nbsp;</div></li><li><div>          1 =&gt; ( isset( $zone[1] ) && $zone[1] ) ? true : false, &nbsp;</div></li><li><div>          2 =&gt; ( isset( $zone[2] ) && $zone[2] ) ? true : false&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      $exists[3] = ( $exists[0] && 'Etc' !== $zone[0] ) ? true : false;&nbsp;</div></li><li><div>      $exists[4] = ( $exists[1] && $exists[3] ) ? true : false;&nbsp;</div></li><li><div>      $exists[5] = ( $exists[2] && $exists[3] ) ? true : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $zonen[] = array(&nbsp;</div></li><li><div>          'continent' =&gt; ( $exists[0] ? $zone[0] : '' ), &nbsp;</div></li><li><div>          'city' =&gt; ( $exists[1] ? $zone[1] : '' ), &nbsp;</div></li><li><div>          'subcity' =&gt; ( $exists[2] ? $zone[2] : '' ), &nbsp;</div></li><li><div>          't_continent' =&gt; ( $exists[3] ? translate( str_replace( '_', ' ', $zone[0] ), 'continents-cities' ) : '' ), &nbsp;</div></li><li><div>          't_city' =&gt; ( $exists[4] ? translate( str_replace( '_', ' ', $zone[1] ), 'continents-cities' ) : '' ), &nbsp;</div></li><li><div>          't_subcity' =&gt; ( $exists[5] ? translate( str_replace( '_', ' ', $zone[2] ), 'continents-cities' ) : '' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  usort( $zonen, '_wp_timezone_choice_usort_callback' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $structure = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $selected_zone ) ) {&nbsp;</div></li><li><div>      $structure[] = '&lt;option selected=&quot;selected&quot; value=&quot;&quot;&gt;' . __( 'Select a city' ) . '&lt;/option&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $zonen as $key =&gt; $zone ) {&nbsp;</div></li><li><div>      <span class="comment">// Build value in an array to join later</span>&nbsp;</div></li><li><div>      $value = array( $zone['continent'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $zone['city'] ) ) {&nbsp;</div></li><li><div>          <span class="comment">// It's at the continent level (generally won't happen)</span>&nbsp;</div></li><li><div>          $display = $zone['t_continent'];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// It's inside a continent group</span>&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          <span class="comment">// Continent optgroup</span>&nbsp;</div></li><li><div>          if ( !isset( $zonen[$key - 1] ) || $zonen[$key - 1]['continent'] !== $zone['continent'] ) {&nbsp;</div></li><li><div>              $label = ( 'Etc' === $zone['continent'] ) ? __( 'Manual offsets' ) : $zone['t_continent'];&nbsp;</div></li><li><div>              $structure[] = '&lt;optgroup label=&quot;'. esc_attr( $label ) .'&quot;&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          <span class="comment">// Add the city to the value</span>&nbsp;</div></li><li><div>          $value[] = $zone['city'];&nbsp;</div></li><li><div>          if ( 'Etc' === $zone['continent'] ) {&nbsp;</div></li><li><div>              if ( 'UTC' === $zone['city'] ) {&nbsp;</div></li><li><div>                  $display = '';&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $display = str_replace( 'GMT', '', $zone['city'] );&nbsp;</div></li><li><div>                  $display = strtr( $display, '+-', '-+' ) . ':00';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              $display = sprintf( __( 'UTC %s' ), $display );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $display = $zone['t_city'];&nbsp;</div></li><li><div>              if ( !empty( $zone['subcity'] ) ) {&nbsp;</div></li><li><div>                  <span class="comment">// Add the subcity to the value</span>&nbsp;</div></li><li><div>                  $value[] = $zone['subcity'];&nbsp;</div></li><li><div>                  $display .= ' - ' . $zone['t_subcity'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Build the value</span>&nbsp;</div></li><li><div>      $value = join( '/', $value );&nbsp;</div></li><li><div>      $selected = '';&nbsp;</div></li><li><div>      if ( $value === $selected_zone ) {&nbsp;</div></li><li><div>          $selected = 'selected=&quot;selected&quot; ';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $structure[] = '&lt;option ' . $selected . 'value=&quot;' . esc_attr( $value ) . '&quot;&gt;' . esc_html( $display ) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      <span class="comment">// Close continent optgroup</span>&nbsp;</div></li><li><div>      if ( !empty( $zone['city'] ) && ( !isset($zonen[$key + 1]) || (isset( $zonen[$key + 1] ) && $zonen[$key + 1]['continent'] !== $zone['continent']) ) ) {&nbsp;</div></li><li><div>          $structure[] = '&lt;/optgroup&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return join( &quot;\n&quot;, $structure );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('_cleanup_header_comment') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Strip close comment and close php tags from file headers used by WP</span>&nbsp;</div></li><li><div><span class="comment"> * See http://core.trac.wordpress.org/ticket/8497</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.8</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _cleanup_header_comment($str) {&nbsp;</div></li><li><div>  return trim(preg_replace(&quot;/\s*(?:\*\/|\?&gt;).*/&quot;, '', $str));&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * From WP wp-settings.php</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists( 'wp_clone' ) ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Copy an object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Returns a cloned copy of an object.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $object The object to clone</span>&nbsp;</div></li><li><div><span class="comment"> * @return object The cloned object</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wp_clone( $object ) {&nbsp;</div></li><li><div>  static $can_clone;&nbsp;</div></li><li><div>  if ( !isset( $can_clone ) ) {&nbsp;</div></li><li><div>      $can_clone = version_compare( phpversion(), '5.0', '&gt;=' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $can_clone ? clone( $object ) : $object;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * BackPress only below</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('backpress_gmt_strtotime') ) :&nbsp;</div></li><li><div>function backpress_gmt_strtotime( $string ) {&nbsp;</div></li><li><div>  if ( is_numeric($string) )&nbsp;</div></li><li><div>      return $string;&nbsp;</div></li><li><div>  if ( !is_string($string) )&nbsp;</div></li><li><div>      return -1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( stristr($string, 'utc') || stristr($string, 'gmt') || stristr($string, '+0000') )&nbsp;</div></li><li><div>      return strtotime($string);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( -1 == $time = strtotime($string . ' +0000') )&nbsp;</div></li><li><div>      return strtotime($string);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $time;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('backpress_convert_object') ) :&nbsp;</div></li><li><div>function backpress_convert_object( &$object, $output ) {&nbsp;</div></li><li><div>  if ( is_array( $object ) ) {&nbsp;</div></li><li><div>      foreach ( array_keys( $object ) as $key )&nbsp;</div></li><li><div>          backpress_convert_object( $object[$key], $output );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      switch ( $output ) {&nbsp;</div></li><li><div>          case OBJECT  : break;&nbsp;</div></li><li><div>          case ARRAY_A : $object = get_object_vars($object); break;&nbsp;</div></li><li><div>          case ARRAY_N : $object = array_values(get_object_vars($object)); break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( !function_exists('backpress_die') ) :&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Kill BackPress execution and display HTML message with error message.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function calls the die() PHP function. The difference is that a message</span>&nbsp;</div></li><li><div><span class="comment"> * in HTML will be displayed to the user. It is recommended to use this function</span>&nbsp;</div></li><li><div><span class="comment"> * only when the execution should not continue any further. It is not</span>&nbsp;</div></li><li><div><span class="comment"> * recommended to call this function very often and normally you should try to</span>&nbsp;</div></li><li><div><span class="comment"> * handle as many errors as possible silently.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $message Error message.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $title Error title.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args Optional arguments to control behaviour.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function backpress_die( $message, $title = '', $args = array() )&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>  $defaults = array( 'response' =&gt; 500, 'language' =&gt; 'en-US', 'text_direction' =&gt; 'ltr' );&nbsp;</div></li><li><div>  $r = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'is_wp_error' ) && is_wp_error( $message ) ) {&nbsp;</div></li><li><div>      if ( empty( $title ) ) {&nbsp;</div></li><li><div>          $error_data = $message-&gt;get_error_data();&nbsp;</div></li><li><div>          if ( is_array( $error_data ) && isset( $error_data['title'] ) ) {&nbsp;</div></li><li><div>              $title = $error_data['title'];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $errors = $message-&gt;get_error_messages();&nbsp;</div></li><li><div>      switch ( count( $errors ) ) {&nbsp;</div></li><li><div>          case 0:&nbsp;</div></li><li><div>              $message = '';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 1:&nbsp;</div></li><li><div>              $message = '&lt;p&gt;' . $errors[0] . '&lt;/p&gt;';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          default:&nbsp;</div></li><li><div>              $message = &quot;&lt;ul&gt;\n\t\t&lt;li&gt;&quot; . join( &quot;&lt;/li&gt;\n\t\t&lt;li&gt;&quot;, $errors ) . &quot;&lt;/li&gt;\n\t&lt;/ul&gt;&quot;;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( is_string( $message ) ) {&nbsp;</div></li><li><div>      $message = '&lt;p&gt;' . $message . '&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !headers_sent() ) {&nbsp;</div></li><li><div>      status_header( $r['response'] );&nbsp;</div></li><li><div>      nocache_headers();&nbsp;</div></li><li><div>      header( 'Content-Type: text/html; charset=utf-8' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $title ) ) {&nbsp;</div></li><li><div>      if ( function_exists( '__' ) ) {&nbsp;</div></li><li><div>          $title = __( 'BackPress &rsaquo; Error' );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $title = 'BackPress &rsaquo; Error';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['text_direction'] ) {&nbsp;</div></li><li><div>      $language_attributes = ' dir=&quot;' . $r['text_direction'] . '&quot;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $r['language'] ) {&nbsp;</div></li><li><div>      <span class="comment">// Always XHTML 1.1 style</span>&nbsp;</div></li><li><div>      $language_attributes .= ' lang=&quot;' . $r['language'] . '&quot;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&lt;!DOCTYPE html PUBLIC &quot;-<span class="comment">//W3C//DTD XHTML 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;</span>&nbsp;</div></li><li><div>&lt;html xmlns=&quot;http:<span class="comment">//www.w3.org/1999/xhtml&quot;&lt;?php echo $language_attributes; ?&gt;&gt;</span>&nbsp;</div></li><li><div>&lt;head&gt;&nbsp;</div></li><li><div>  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&nbsp;</div></li><li><div>  &lt;title&gt;&lt;?php echo $title ?&gt;&lt;/title&gt;&nbsp;</div></li><li><div>  &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;&nbsp;</div></li><li><div>      html { background: #f7f7f7; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      body {&nbsp;</div></li><li><div>          background: #fff;&nbsp;</div></li><li><div>          color: #333;&nbsp;</div></li><li><div>          font-family: &quot;Lucida Grande&quot;, Verdana, Arial, &quot;Bitstream Vera Sans&quot;, sans-serif;&nbsp;</div></li><li><div>          margin: 2em auto 0 auto;&nbsp;</div></li><li><div>          width: 700px;&nbsp;</div></li><li><div>          padding: 1em 2em;&nbsp;</div></li><li><div>          -moz-border-radius: 11px;&nbsp;</div></li><li><div>          -khtml-border-radius: 11px;&nbsp;</div></li><li><div>          -webkit-border-radius: 11px;&nbsp;</div></li><li><div>          border-radius: 11px;&nbsp;</div></li><li><div>          border: 1px solid #dfdfdf;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      a { color: #2583ad; text-decoration: none; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      a:hover { color: #d54e21; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      h1 {&nbsp;</div></li><li><div>          border-bottom: 1px solid #dadada;&nbsp;</div></li><li><div>          clear: both;&nbsp;</div></li><li><div>          color: #666;&nbsp;</div></li><li><div>          font: 24px Georgia, &quot;Times New Roman&quot;, Times, serif;&nbsp;</div></li><li><div>          margin: 5px 0 0 -4px;&nbsp;</div></li><li><div>          padding: 0;&nbsp;</div></li><li><div>          padding-bottom: 7px;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      h2 { font-size: 16px; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      p, li {&nbsp;</div></li><li><div>          padding-bottom: 2px;&nbsp;</div></li><li><div>          font-size: 12px;&nbsp;</div></li><li><div>          line-height: 18px;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      code { font-size: 13px; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      ul, ol { padding: 5px 5px 5px 22px; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      #error-page { margin-top: 50px; }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      #error-page p {&nbsp;</div></li><li><div>          font-size: 12px;&nbsp;</div></li><li><div>          line-height: 18px;&nbsp;</div></li><li><div>          margin: 25px 0 20px;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      #error-page code { font-family: Consolas, Monaco, Courier, monospace; }&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  if ( $r['text_direction'] === 'rtl') {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>      body {&nbsp;</div></li><li><div>          font-family: Tahoma, &quot;Times New Roman&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      h1 {&nbsp;</div></li><li><div>          font-family: Tahoma, &quot;Times New Roman&quot;;&nbsp;</div></li><li><div>          margin: 5px -4px 0 0;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      ul, ol { padding: 5px 22px 5px 5px; }&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;/style&gt;&nbsp;</div></li><li><div>&lt;/head&gt;&nbsp;</div></li><li><div>&lt;body id=&quot;error-page&quot;&gt;&nbsp;</div></li><li><div>  &lt;?php echo $message; ?&gt;&nbsp;</div></li><li><div>&lt;/body&gt;&nbsp;</div></li><li><div>&lt;/html&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  die();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Acts the same as core PHP setcookie() but its arguments are run through the backpress_set_cookie filter.</span>&nbsp;</div></li><li><div><span class="comment"> * </span>&nbsp;</div></li><li><div><span class="comment"> * If the filter returns false, setcookie() isn't called.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function backpress_set_cookie() {&nbsp;</div></li><li><div>  $args = func_get_args();&nbsp;</div></li><li><div>  $args = apply_filters( 'backpress_set_cookie', $args );&nbsp;</div></li><li><div>  if ( $args === false ) return;&nbsp;</div></li><li><div>  call_user_func_array( 'setcookie', $args );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>