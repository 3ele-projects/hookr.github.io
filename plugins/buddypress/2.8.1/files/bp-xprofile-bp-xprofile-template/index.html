<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.8.1" data-slug="buddypress" data-type="file" data-id="49542"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp-xprofile-bp-xprofile-template | file | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, buddypress, 2.8.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.17"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=cc01de604e79b3f1c8b729d63e14df85' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.17' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bp-xprofile-bp-xprofile-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-xprofile-bp-xprofile-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-xprofile-bp-xprofile-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.8.1-file-bp-xprofile-bp-xprofile-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp-xprofile-bp-xprofile-template" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.1." href="http://hookr.io/plugins/buddypress/2.8.1/" class="H_VERSION"><span property="name">2.8.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/buddypress/2.8.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp-xprofile-bp-xprofile-templ&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="7837"><a href="http://hookr.io/plugins/buddypress/2.8.1/all/" title="All">All <span class="count badge">7837</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3621"><a href="http://hookr.io/plugins/buddypress/2.8.1/hooks/" title="Hooks">Hooks <span class="count badge">3621</span></a></li><li class="" data-id="action" data-count="1727"><a href="http://hookr.io/plugins/buddypress/2.8.1/actions/" title="Actions">Actions <span class="count badge">1727</span></a></li><li class="" data-id="filter" data-count="1894"><a href="http://hookr.io/plugins/buddypress/2.8.1/filters/" title="Filters">Filters <span class="count badge">1894</span></a></li><li class="" data-id="class" data-count="181"><a href="http://hookr.io/plugins/buddypress/2.8.1/classes/" title="Classes">Classes <span class="count badge">181</span></a></li><li class="" data-id="constant" data-count="161"><a href="http://hookr.io/plugins/buddypress/2.8.1/constants/" title="Constants">Constants <span class="count badge">161</span></a></li><li class="" data-id="function" data-count="3874"><a href="http://hookr.io/plugins/buddypress/2.8.1/functions/" title="Functions">Functions <span class="count badge">3874</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bp-xprofile/bp-xprofile-template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * BuddyPress XProfile Template Tags.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package BuddyPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage XProfileTemplate</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly.</span>&nbsp;</div></li><li><div>defined( 'ABSPATH' ) || exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Query for XProfile groups and fields.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global object $profile_template</span>&nbsp;</div></li><li><div><span class="comment"> * @see BP_XProfile_Group::get() for full description of `$args` array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Array of arguments. See BP_XProfile_Group::get() for full description. Those arguments whose defaults differ</span>&nbsp;</div></li><li><div><span class="comment"> *     from that method are described here:</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string|array $member_type            Default: 'any'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool         $hide_empty_groups      Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool         $hide_empty_fields      Defaults to true on the Dashboard, on a user's Edit Profile page, </span>&nbsp;</div></li><li><div><span class="comment"> *                                                or during registration. Otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool         $fetch_visibility_level Defaults to true when an admin is viewing a profile, or when a user is</span>&nbsp;</div></li><li><div><span class="comment"> *                                                viewing her own profile, or during registration. Otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool         $fetch_fields           Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool         $fetch_field_data       Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_profile( $args = '' ) {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Only show empty fields if we're on the Dashboard, or we're on a user's</span>&nbsp;</div></li><li><div>  <span class="comment">// profile edit page, or this is a registration page.</span>&nbsp;</div></li><li><div>  $hide_empty_fields_default = ( ! is_network_admin() && ! is_admin() && ! bp_is_user_profile_edit() && ! bp_is_register_page() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// We only need to fetch visibility levels when viewing your own profile.</span>&nbsp;</div></li><li><div>  if ( bp_is_my_profile() || bp_current_user_can( 'bp_moderate' ) || bp_is_register_page() ) {&nbsp;</div></li><li><div>      $fetch_visibility_level_default = true;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $fetch_visibility_level_default = false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Parse arguments.</span>&nbsp;</div></li><li><div>  $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>      'user_id' =&gt; bp_displayed_user_id(), &nbsp;</div></li><li><div>      'member_type' =&gt; 'any', &nbsp;</div></li><li><div>      'profile_group_id' =&gt; false, &nbsp;</div></li><li><div>      'hide_empty_groups' =&gt; true, &nbsp;</div></li><li><div>      'hide_empty_fields' =&gt; $hide_empty_fields_default, &nbsp;</div></li><li><div>      'fetch_fields' =&gt; true, &nbsp;</div></li><li><div>      'fetch_field_data' =&gt; true, &nbsp;</div></li><li><div>      'fetch_visibility_level' =&gt; $fetch_visibility_level_default, &nbsp;</div></li><li><div>      'exclude_groups' =&gt; false, <span class="comment">// Comma-separated list of profile field group IDs to exclude.</span>&nbsp;</div></li><li><div>      'exclude_fields' =&gt; false, <span class="comment">// Comma-separated list of profile field IDs to exclude.</span>&nbsp;</div></li><li><div>      'update_meta_cache' =&gt; true, &nbsp;</div></li><li><div> ), 'has_profile' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Populate the template loop global.</span>&nbsp;</div></li><li><div>  $profile_template = new BP_XProfile_Data_Template( $r );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not a group has a profile to display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $has_groups       Whether or not there are group profiles to display.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $profile_template Current profile template being used.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $r                Array of arguments passed into the BP_XProfile_Data_Template class.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_has_profile', $profile_template-&gt;has_groups(), $profile_template, $r );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Start off the profile groups.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_groups() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>  return $profile_template-&gt;profile_groups();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set up the profile groups.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>  return $profile_template-&gt;the_profile_group();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether or not the group has fields to display.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_group_has_fields() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>  return $profile_template-&gt;has_fields();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the class attribute for a field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $class Extra classes to append to class attribute.</span>&nbsp;</div></li><li><div><span class="comment"> *                     Pass mutiple class names as an array or</span>&nbsp;</div></li><li><div><span class="comment"> *                     space-delimited string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_field_css_class( $class = false ) {&nbsp;</div></li><li><div>  echo bp_get_field_css_class( $class );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the class attribute for a field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|bool $class Extra classes to append to class attribute.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_field_css_class( $class = false ) {&nbsp;</div></li><li><div>      global $profile_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $css_classes = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $class ) ) {&nbsp;</div></li><li><div>          if ( ! is_array( $class ) ) {&nbsp;</div></li><li><div>              $class = preg_split( '#\s+#', $class );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $css_classes = array_map( 'sanitize_html_class', $class );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Set a class with the field ID.</span>&nbsp;</div></li><li><div>      $css_classes[] = 'field_' . $profile_template-&gt;field-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Set a class with the field name (sanitized).</span>&nbsp;</div></li><li><div>      $css_classes[] = 'field_' . sanitize_title( $profile_template-&gt;field-&gt;name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Set a class indicating whether the field is required or optional.</span>&nbsp;</div></li><li><div>      if ( ! empty( $profile_template-&gt;field-&gt;is_required ) ) {&nbsp;</div></li><li><div>          $css_classes[] = 'required-field';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $css_classes[] = 'optional-field';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add the field visibility level.</span>&nbsp;</div></li><li><div>      $css_classes[] = 'visibility-' . esc_attr( bp_get_the_profile_field_visibility_level() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $profile_template-&gt;current_field % 2 == 1 ) {&nbsp;</div></li><li><div>          $css_classes[] = 'alt';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $css_classes[] = 'field_type_' . sanitize_title( $profile_template-&gt;field-&gt;type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the field classes to be applied to a field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $css_classes Array of classes to be applied to field. Passed by reference.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $css_classes = apply_filters_ref_array( 'bp_field_css_classes', array( &$css_classes ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the class HTML attribute to be used on a field.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value class HTML attribute with imploded classes.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_field_css_class', ' class=&quot;' . implode( ' ', $css_classes ) . '&quot;' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether or not the XProfile field has data to display.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global object $profile_template</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_field_has_data() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the XProfile field has data to display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $value            Whether or not there is data to display.</span>&nbsp;</div></li><li><div><span class="comment">   * @param object $profile_template Profile template object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value            Profile field being displayed.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value            Profile field ID being displayed.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_field_has_data', $profile_template-&gt;field_has_data, $profile_template, $profile_template-&gt;field, $profile_template-&gt;field-&gt;id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Whether or not the XProfile field has public data to display.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global object $profile_template</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_field_has_public_data() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the XProfile field has public data to display.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.8.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $value            Whether or not there is public data to display.</span>&nbsp;</div></li><li><div><span class="comment">   * @param object $profile_template Profile template object.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value            Profile field being displayed.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value            Profile field ID being displayed.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_field_has_public_data', ( ! empty( $profile_template-&gt;field_has_data ) ), $profile_template, $profile_template-&gt;field, $profile_template-&gt;field-&gt;id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_id() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group ID.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_id() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile group ID.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $id ID for the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return (int) apply_filters( 'bp_get_the_profile_group_id', $group-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_name() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_name();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_name() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile group name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $name Name for the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_group_name', $group-&gt;name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_slug() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_slug() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile group slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Slug for the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_group_slug', sanitize_title( $group-&gt;name ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group description.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_description() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_description();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group description.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_description() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile group description.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $description Description for the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_group_description', $group-&gt;description );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group edit form action.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_edit_form_action() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_edit_form_action();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group edit form action.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_edit_form_action() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Build the form action URL.</span>&nbsp;</div></li><li><div>      $form_action = trailingslashit( bp_displayed_user_domain() . bp_get_profile_slug() . '/edit/group/' . $group-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the action for the XProfile group edit form.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value URL for the action attribute on the</span>&nbsp;</div></li><li><div><span class="comment">       *                      profile group edit form.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_group_edit_form_action', $form_action );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group field IDs.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_group_field_ids() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_group_field_ids();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group field IDs.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_group_field_ids() {&nbsp;</div></li><li><div>      global $group;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $field_ids = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $group-&gt;fields ) ) {&nbsp;</div></li><li><div>          foreach ( (array) $group-&gt;fields as $field ) {&nbsp;</div></li><li><div>              $field_ids .= $field-&gt;id . ', ';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return substr( $field_ids, 0, -1 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a comma-separated list of field IDs that are to be submitted on profile edit.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_ids() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_ids();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Generate a comma-separated list of field IDs that are to be submitted on profile edit.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_ids() {&nbsp;</div></li><li><div>      global $profile_template;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $field_ids = array();&nbsp;</div></li><li><div>      foreach ( $profile_template-&gt;groups as $group ) {&nbsp;</div></li><li><div>          if ( ! empty( $group-&gt;fields ) ) {&nbsp;</div></li><li><div>              $field_ids = array_merge( $field_ids, wp_list_pluck( $group-&gt;fields, 'id' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $field_ids = implode( ', ', wp_parse_id_list( $field_ids ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the comma-separated list of field IDs.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field_ids Comma-separated field IDs.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_ids', $field_ids );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the XProfile fields.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_fields() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>  return $profile_template-&gt;profile_fields();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Sets up the XProfile field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field() {&nbsp;</div></li><li><div>  global $profile_template;&nbsp;</div></li><li><div>  return $profile_template-&gt;the_profile_field();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile field ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_id() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile field ID.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_id() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field ID.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $id ID for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return (int) apply_filters( 'bp_get_the_profile_field_id', $field-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_name() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_name();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the XProfile field name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_name() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $name Name for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_name', $field-&gt;name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_value() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the XProfile field value.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_value() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $field-&gt;data-&gt;value = bp_unserialize_profile_field( $field-&gt;data-&gt;value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field value.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Value for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $type  Type for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $id    ID for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_value', $field-&gt;data-&gt;value, $field-&gt;type, $field-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field edit value.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_edit_value() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_edit_value();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the XProfile field edit value.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_edit_value() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Check to see if the posted value is different, if it is re-display this</span>&nbsp;</div></li><li><div><span class="comment">       * value as long as it's not empty and a required field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      if ( ! isset( $field-&gt;data ) ) {&nbsp;</div></li><li><div>          $field-&gt;data = new stdClass;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $field-&gt;data-&gt;value ) ) {&nbsp;</div></li><li><div>          $field-&gt;data-&gt;value = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_POST['field_' . $field-&gt;id] ) && $field-&gt;data-&gt;value != $_POST['field_' . $field-&gt;id] ) {&nbsp;</div></li><li><div>          if ( ! empty( $_POST['field_' . $field-&gt;id] ) ) {&nbsp;</div></li><li><div>              $field-&gt;data-&gt;value = $_POST['field_' . $field-&gt;id];&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $field-&gt;data-&gt;value = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $field_value = isset( $field-&gt;data-&gt;value ) ? bp_unserialize_profile_field( $field-&gt;data-&gt;value ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field edit value.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $field_value Current field edit value.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $type        Type for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $id          ID for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_edit_value', $field_value, $field-&gt;type, $field-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field type.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_type() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_type();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the XProfile field type.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_type() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field type.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $type Type for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_the_profile_field_type', $field-&gt;type );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field description.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_description() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_description();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the XProfile field description.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_description() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the XProfile field description.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $description Description for the profile field.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_description', $field-&gt;description );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs the XProfile field input name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_input_name() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_input_name();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Retursn the XProfile field input name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_input_name() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile field input name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Value used for the name attribute on an input.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_input_name', 'field_' . $field-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Returns the action name for any signup errors related to this profile field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * In the registration templates, signup errors are pulled from the global</span>&nbsp;</div></li><li><div><span class="comment"> * object and rendered at actions that look like 'bp_field_12_errors'. This</span>&nbsp;</div></li><li><div><span class="comment"> * function allows the action name to be easily concatenated and called in the</span>&nbsp;</div></li><li><div><span class="comment"> * following fashion:</span>&nbsp;</div></li><li><div><span class="comment"> *   do_action( bp_get_the_profile_field_errors_action() );</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.8.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The _errors action name corresponding to this profile field.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_the_profile_field_errors_action() {&nbsp;</div></li><li><div>  global $field;&nbsp;</div></li><li><div>  return 'bp_field_' . $field-&gt;id . '_errors';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Displays field options HTML for field types of 'selectbox', 'multiselectbox', </span>&nbsp;</div></li><li><div><span class="comment"> * 'radio', 'checkbox', and 'datebox'.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Specify type for datebox. Allowed 'day', 'month', 'year'.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_options( $args = array() ) {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_options( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Retrieves field options HTML for field types of 'selectbox', 'multiselectbox', 'radio', 'checkbox', and 'datebox'.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment">   *     Array of optional arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type string|bool $type    Type of datebox. False if it's not a</span>&nbsp;</div></li><li><div><span class="comment">   *                                datebox, otherwise 'day, 'month', or 'year'. Default: false.</span>&nbsp;</div></li><li><div><span class="comment">   *     @type int         $user_id ID of the user whose profile values should be</span>&nbsp;</div></li><li><div><span class="comment">   *                                used when rendering options. Default: displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string $vaue Field options markup.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_options( $args = array() ) {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $args = bp_parse_args( $args, array(&nbsp;</div></li><li><div>          'type' =&gt; false, &nbsp;</div></li><li><div>          'user_id' =&gt; bp_displayed_user_id(), &nbsp;</div></li><li><div> ), 'get_the_profile_field_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * In some cases, the $field global is not an instantiation of the BP_XProfile_Field class.</span>&nbsp;</div></li><li><div><span class="comment">       * However, we have to make sure that all data originally in $field gets merged back in, after reinstantiation.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      if ( ! method_exists( $field, 'get_children' ) ) {&nbsp;</div></li><li><div>          $field_obj = xprofile_get_field( $field-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $field as $field_prop =&gt; $field_prop_value ) {&nbsp;</div></li><li><div>              if ( ! isset( $field_obj-&gt;{$field_prop} ) ) {&nbsp;</div></li><li><div>                  $field_obj-&gt;{$field_prop} = $field_prop_value;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $field = $field_obj;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      ob_start();&nbsp;</div></li><li><div>      $field-&gt;type_obj-&gt;edit_field_options_html( $args );&nbsp;</div></li><li><div>      $html = ob_get_contents();&nbsp;</div></li><li><div>      ob_end_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $html;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render whether or not a profile field is required.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_is_required() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_is_required();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return whether or not a profile field is required.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_is_required() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $field-&gt;is_required ) ) {&nbsp;</div></li><li><div>          $retval = $field-&gt;is_required;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters whether or not a profile field is required.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.8.0 Added field ID.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param bool   $retval Whether or not the field is required.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value  Field ID that may be required.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return (bool) apply_filters( 'bp_get_the_profile_field_is_required', $retval, $field-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the visibility level of this field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_visibility_level() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_visibility_level();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the visibility level of this field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_visibility_level() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// On the registration page, values stored in POST should take</span></span>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// precedence over default visibility, so that submitted values</span></span>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// are not lost on failure.</span></span>&nbsp;</div></li><li><div>      if ( bp_is_register_page() && ! empty( $_POST['field_' . $field-&gt;id . '_visibility'] ) ) {&nbsp;</div></li><li><div>          $retval = esc_attr( $_POST['field_' . $field-&gt;id . '_visibility'] );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $retval = ! empty( $field-&gt;visibility_level ) ? $field-&gt;visibility_level : 'public';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile field visibility level.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval Field visibility level.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_visibility_level', $retval );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Echo the visibility level label of this field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_visibility_level_label() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_visibility_level_label();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the visibility level label of this field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_visibility_level_label() {&nbsp;</div></li><li><div>      global $field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// On the registration page, values stored in POST should take</span></span>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// precedence over default visibility, so that submitted values</span></span>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// are not lost on failure.</span></span>&nbsp;</div></li><li><div>      if ( bp_is_register_page() && ! empty( $_POST['field_' . $field-&gt;id . '_visibility'] ) ) {&nbsp;</div></li><li><div>          $level = esc_html( $_POST['field_' . $field-&gt;id . '_visibility'] );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $level = ! empty( $field-&gt;visibility_level ) ? $field-&gt;visibility_level : 'public';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $fields = bp_xprofile_get_visibility_levels();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile field visibility level label.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$level` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval Field visibility level label.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $level  Field visibility level.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_profile_field_visibility_level_label', $fields[ $level ]['label'], $level );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return unserialized profile field data.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $value Content to maybe unserialize.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed|string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_unserialize_profile_field( $value ) {&nbsp;</div></li><li><div>  if ( is_serialized($value) ) {&nbsp;</div></li><li><div>      $field_value = maybe_unserialize($value);&nbsp;</div></li><li><div>      $field_value = implode( ', ', $field_value );&nbsp;</div></li><li><div>      return $field_value;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $value;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output XProfile field data.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args Array of arguments for field data. See {@link bp_get_profile_field_data}</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_field_data( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_profile_field_data( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return XProfile field data.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|array $args {</span>&nbsp;</div></li><li><div><span class="comment">   *    Array of arguments for field data.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string|int|bool $field   Field identifier.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type int             $user_id ID of the user to get field data for.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return mixed</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_profile_field_data( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $r = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'field' =&gt; false, <span class="comment">// Field name or ID.</span>&nbsp;</div></li><li><div>          'user_id' =&gt; bp_displayed_user_id()&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile field data.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$r` parameter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param mixed $value Profile data for a specific field for the user.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $r     Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_profile_field_data', xprofile_get_field_data( $r['field'], $r['user_id'] ), $r );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get all profile field groups.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array $groups</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_get_field_groups() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $groups = wp_cache_get( 'all', 'bp_xprofile_groups' );&nbsp;</div></li><li><div>  if ( false === $groups ) {&nbsp;</div></li><li><div>      $groups = bp_xprofile_get_groups( array( 'fetch_fields' =&gt; true ) );&nbsp;</div></li><li><div>      wp_cache_set( 'all', $groups, 'bp_xprofile_groups' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters all profile field groups.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $groups Array of available profile field groups.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_profile_get_field_groups', $groups );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if there is more than one group of fields for the profile being edited.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if there is more than one profile field group.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_has_multiple_groups() {&nbsp;</div></li><li><div>  $has_multiple_groups = count( (array) bp_profile_get_field_groups() ) &gt; 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters if there is more than one group of fields for the profile being edited.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $has_multiple_groups Whether or not there are multiple groups.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_profile_has_multiple_groups', $has_multiple_groups );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the tabs to switch between profile field groups.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_group_tabs() {&nbsp;</div></li><li><div>  echo bp_get_profile_group_tabs();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Fires at the end of the tab output for switching between profile field</span>&nbsp;</div></li><li><div><span class="comment">   * groups. This action is in a strange place for legacy reasons.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  do_action( 'xprofile_profile_group_tabs' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the XProfile group tabs.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_profile_group_tabs() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get field group data.</span>&nbsp;</div></li><li><div>  $groups = bp_profile_get_field_groups();&nbsp;</div></li><li><div>  $group_name = bp_get_profile_group_name();&nbsp;</div></li><li><div>  $tabs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through field groups and put a tab-lst together.</span>&nbsp;</div></li><li><div>  for ( $i = 0, $count = count( $groups ); $i &lt; $count; ++$i ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Setup the selected class.</span>&nbsp;</div></li><li><div>      $selected = '';&nbsp;</div></li><li><div>      if ( $group_name === $groups[ $i ]-&gt;name ) {&nbsp;</div></li><li><div>          $selected = ' class=&quot;current&quot;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Skip if group has no fields.</span>&nbsp;</div></li><li><div>      if ( empty( $groups[ $i ]-&gt;fields ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Build the profile field group link.</span>&nbsp;</div></li><li><div>      $link = trailingslashit( bp_displayed_user_domain() . bp_get_profile_slug() . '/edit/group/' . $groups[ $i ]-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add tab to end of tabs array.</span>&nbsp;</div></li><li><div>      $tabs[] = sprintf(&nbsp;</div></li><li><div>          '&lt;li %1$s&gt;&lt;a href=&quot;%2$s&quot;&gt;%3$s&lt;/a&gt;&lt;/li&gt;', &nbsp;</div></li><li><div>          $selected, &nbsp;</div></li><li><div>          esc_url( $link ), &nbsp;</div></li><li><div>          esc_html( apply_filters( 'bp_get_the_profile_group_name', $groups[ $i ]-&gt;name ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the tabs to display for profile field groups.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $tabs       Array of tabs to display.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $groups     Array of profile groups.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $group_name Name of the current group displayed.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $tabs = apply_filters( 'xprofile_filter_profile_group_tabs', $tabs, $groups, $group_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return join( '', $tabs );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile group name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $deprecated Deprecated boolean parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|mixed</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_group_name( $deprecated = true ) {&nbsp;</div></li><li><div>  if ( ! $deprecated ) {&nbsp;</div></li><li><div>      return bp_get_profile_group_name();&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      echo bp_get_profile_group_name();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile group name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_profile_group_name() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Check action variable.</span>&nbsp;</div></li><li><div>      $group_id = bp_action_variable( 1 );&nbsp;</div></li><li><div>      if ( empty( $group_id ) || ! is_numeric( $group_id ) ) {&nbsp;</div></li><li><div>          $group_id = 1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Check for cached group.</span>&nbsp;</div></li><li><div>      $group = new BP_XProfile_Group( $group_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the profile group name.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0 Added the `$group_id` parameter</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $name     Name of the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       * @param int    $group_id ID of the profile group.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_profile_group_name', $group-&gt;name, $group_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render a formatted string displaying when a profile was last updated.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_last_updated() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $last_updated = bp_get_profile_last_updated();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $last_updated ) ) {&nbsp;</div></li><li><div>      _e( 'Profile not recently updated.', 'buddypress' );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      echo $last_updated;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return a formatted string displaying when a profile was last updated.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool|string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_profile_last_updated() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $last_updated = bp_get_user_meta( bp_displayed_user_id(), 'profile_last_updated', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $last_updated ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the formatted string used to display when a profile was last updated.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $value Formatted last updated indicator string.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          return apply_filters( 'bp_get_profile_last_updated', sprintf( __( 'Profile updated %s', 'buddypress' ), bp_core_time_since( strtotime( $last_updated ) ) ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the current profile group ID.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_profile_group_id() {&nbsp;</div></li><li><div>  echo bp_get_current_profile_group_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the current profile group ID.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_current_profile_group_id() {&nbsp;</div></li><li><div>      $profile_group_id = bp_action_variable( 1 );&nbsp;</div></li><li><div>      if ( empty( $profile_group_id ) ) {&nbsp;</div></li><li><div>          $profile_group_id = 1;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the current profile group ID.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * Possible values are admin/profile/edit/[group-id].</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $profile_group_id Current profile group ID.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return (int) apply_filters( 'bp_get_current_profile_group_id', $profile_group_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render an avatar delete link.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_avatar_delete_link() {&nbsp;</div></li><li><div>  echo bp_get_avatar_delete_link();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return an avatar delete link.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_avatar_delete_link() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the link used for deleting an avatar.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Nonced URL used for deleting an avatar.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_avatar_delete_link', wp_nonce_url( bp_displayed_user_domain() . bp_get_profile_slug() . '/change-avatar/delete-avatar/', 'bp_delete_avatar_link' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Render an edit profile button.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_edit_profile_button() {&nbsp;</div></li><li><div>  bp_button( array(&nbsp;</div></li><li><div>      'id' =&gt; 'edit_profile', &nbsp;</div></li><li><div>      'component' =&gt; 'xprofile', &nbsp;</div></li><li><div>      'must_be_logged_in' =&gt; true, &nbsp;</div></li><li><div>      'block_self' =&gt; true, &nbsp;</div></li><li><div>      'link_href' =&gt; trailingslashit( bp_displayed_user_domain() . bp_get_profile_slug() . '/edit' ), &nbsp;</div></li><li><div>      'link_class' =&gt; 'edit', &nbsp;</div></li><li><div>      'link_text' =&gt; __( 'Edit Profile', 'buddypress' ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Visibility ****************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Echo the field visibility radio buttons.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args Args for the radio buttons. See {@link bp_profile_get_visibility_radio_buttons}</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_visibility_radio_buttons( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_profile_get_visibility_radio_buttons( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the field visibility radio buttons.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *    Args for the radio buttons.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *    @type int    $field_id     ID of the field to render.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $before       Markup to render before the field.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $after        Markup to render after the field.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $before_radio Markup to render before the radio button.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $after_radio  Markup to render after the radio button.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $class        Class to apply to the field markup.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string $retval</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_profile_get_visibility_radio_buttons( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Parse optional arguments.</span></span>&nbsp;</div></li><li><div>      $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>          'field_id' =&gt; bp_get_the_profile_field_id(), &nbsp;</div></li><li><div>          'before' =&gt; '&lt;ul class=&quot;radio&quot;&gt;', &nbsp;</div></li><li><div>          'after' =&gt; '&lt;/ul&gt;', &nbsp;</div></li><li><div>          'before_radio' =&gt; '&lt;li class=&quot;%s&quot;&gt;', &nbsp;</div></li><li><div>          'after_radio' =&gt; '&lt;/li&gt;', &nbsp;</div></li><li><div>          'class' =&gt; 'bp-xprofile-visibility'&nbsp;</div></li><li><div> ), 'xprofile_visibility_radio_buttons' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Empty return value, filled in below if a valid field ID is found.</span></span>&nbsp;</div></li><li><div>      $retval = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Only do-the-do if there's a valid field ID.</span></span>&nbsp;</div></li><li><div>      if ( ! empty( $r['field_id'] ) ) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Start the output buffer.</span></span>&nbsp;</div></li><li><div>          ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Output anything before.</span></span>&nbsp;</div></li><li><div>          echo $r['before']; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php if ( bp_current_user_can( 'bp_xprofile_change_field_visibility' ) ) : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php foreach( bp_xprofile_get_visibility_levels() as $level ) : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php printf( $r['before_radio'], esc_attr( $level['id'] ) ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;label for=&quot;&lt;?php echo esc_attr( 'see-field_' . $r['field_id'] . '_' . $level['id'] ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;radio&quot; id=&quot;&lt;?php echo esc_attr( 'see-field_' . $r['field_id'] . '_' . $level['id'] ); ?&gt;&quot; name=&quot;&lt;?php echo esc_attr( 'field_' . $r['field_id'] . '_visibility' ); ?&gt;&quot; value=&quot;&lt;?php echo esc_attr( $level['id'] ); ?&gt;&quot; &lt;?php checked( $level['id'], bp_get_the_profile_field_visibility_level() ); ?&gt; /&gt;&nbsp;</div></li><li><div>                      &lt;span class=&quot;field-visibility-text&quot;&gt;&lt;?php echo esc_html( $level['label'] ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php echo $r['after_radio']; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Output anything after.</span></span>&nbsp;</div></li><li><div>          echo $r['after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Get the output buffer and empty it.</span></span>&nbsp;</div></li><li><div>          $retval = ob_get_clean();&nbsp;</div></li><li><div>      endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the radio buttons for setting visibility.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval HTML output for the visibility radio buttons.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r      Parsed arguments to be used with display.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $args   Original passed in arguments to be used with display.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_profile_get_visibility_radio_buttons', $retval, $r, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the XProfile field visibility select list for settings.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args Args for the select list. See {@link bp_profile_get_settings_visibility_select}</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_profile_settings_visibility_select( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_profile_get_settings_visibility_select( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the XProfile field visibility select list for settings.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args {</span>&nbsp;</div></li><li><div><span class="comment">   *    Args for the select list.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   *    @type int    $field_id ID of the field to render.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $before   Markup to render before the field.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $before_controls  markup before form controls.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $after    Markup to render after the field.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $after_controls Markup after the form controls.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $class    Class to apply to the field markup.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $label_class Class to apply for the label element.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $notoggle_tag Markup element to use for notoggle tag.</span>&nbsp;</div></li><li><div><span class="comment">   *    @type string $notoggle_class Class to apply to the notoggle element.</span>&nbsp;</div></li><li><div><span class="comment">   * }</span>&nbsp;</div></li><li><div><span class="comment">   * @return string $retval</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_profile_get_settings_visibility_select( $args = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Parse optional arguments.</span></span>&nbsp;</div></li><li><div>      $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>          'field_id' =&gt; bp_get_the_profile_field_id(), &nbsp;</div></li><li><div>          'before' =&gt; '', &nbsp;</div></li><li><div>          'before_controls' =&gt; '', &nbsp;</div></li><li><div>          'after' =&gt; '', &nbsp;</div></li><li><div>          'after_controls' =&gt; '', &nbsp;</div></li><li><div>          'class' =&gt; 'bp-xprofile-visibility', &nbsp;</div></li><li><div>          'label_class' =&gt; 'bp-screen-reader-text', &nbsp;</div></li><li><div>          'notoggle_tag' =&gt; 'span', &nbsp;</div></li><li><div>          'notoggle_class' =&gt; 'field-visibility-settings-notoggle', &nbsp;</div></li><li><div> ), 'xprofile_settings_visibility_select' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Empty return value, filled in below if a valid field ID is found.</span></span>&nbsp;</div></li><li><div>      $retval = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Only do-the-do if there's a valid field ID.</span></span>&nbsp;</div></li><li><div>      if ( ! empty( $r['field_id'] ) ) :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Start the output buffer.</span></span>&nbsp;</div></li><li><div>          ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Output anything before.</span></span>&nbsp;</div></li><li><div>          echo $r['before']; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php if ( bp_current_user_can( 'bp_xprofile_change_field_visibility' ) ) : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php echo $r['before_controls']; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;label for=&quot;&lt;?php echo esc_attr( 'field_' . $r['field_id'] ) ; ?&gt;_visibility&quot; class=&quot;&lt;?php echo esc_attr( $r['label_class'] ); ?&gt;&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                  <span class="comment">/** translators: accessibility text */</span>&nbsp;</div></li><li><div>                  _e( 'Select visibility', 'buddypress' );&nbsp;</div></li><li><div>              ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>              &lt;select class=&quot;&lt;?php echo esc_attr( $r['class'] ); ?&gt;&quot; name=&quot;&lt;?php echo esc_attr( 'field_' . $r['field_id'] ) ; ?&gt;_visibility&quot; id=&quot;&lt;?php echo esc_attr( 'field_' . $r['field_id'] ) ; ?&gt;_visibility&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php foreach ( bp_xprofile_get_visibility_levels() as $level ) : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      &lt;option value=&quot;&lt;?php echo esc_attr( $level['id'] ); ?&gt;&quot; &lt;?php selected( $level['id'], bp_get_the_profile_field_visibility_level() ); ?&gt;&gt;&lt;?php echo esc_html( $level['label'] ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php echo $r['after_controls']; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php else : ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;&lt;?php echo esc_html( $r['notoggle_tag'] ); ?&gt; class=&quot;&lt;?php echo esc_attr( $r['notoggle_class'] ); ?&gt;&quot;&gt;&lt;?php bp_the_profile_field_visibility_level_label(); ?&gt;&lt;/&lt;?php echo esc_html( $r['notoggle_tag'] ); ?&gt;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          &lt;?php endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Output anything after.</span></span>&nbsp;</div></li><li><div>          echo $r['after'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Get the output buffer and empty it.</span></span>&nbsp;</div></li><li><div>          $retval = ob_get_clean();&nbsp;</div></li><li><div>      endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the dropdown list for setting visibility.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $retval HTML output for the visibility dropdown list.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $r      Parsed arguments to be used with display.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $args   Original passed in arguments to be used with display.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_profile_settings_visibility_select', $retval, $r, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'required' markup in extended profile field labels.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_profile_field_required_label() {&nbsp;</div></li><li><div>  echo bp_get_the_profile_field_required_label();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the 'required' markup in extended profile field labels.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string HTML for the required label.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_profile_field_required_label() {&nbsp;</div></li><li><div>      $retval = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_get_the_profile_field_is_required() ) {&nbsp;</div></li><li><div>          $translated_string = __( '(required)', 'buddypress' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $retval = ' &lt;span class=&quot;bp-required-field-label&quot;&gt;';&nbsp;</div></li><li><div>          $retval .= apply_filters( 'bp_get_the_profile_field_required_label', $translated_string, bp_get_the_profile_field_id() );&nbsp;</div></li><li><div>          $retval .= '&lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $retval;&nbsp;</div></li><li><div>  }&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2019 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>