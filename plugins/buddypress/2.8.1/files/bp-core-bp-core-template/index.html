<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.8.1" data-slug="buddypress" data-type="file" data-id="49037"><head xmlns="http://www.w3.org/1999/xhtml"><title> bp-core-bp-core-template | file | Buddypress | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, buddypress, 2.8.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.24"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=cc5c54a9ee68efd781c565451465f3d9' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.24' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bp-core-bp-core-template/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-core-bp-core-template%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbp-core-bp-core-template%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-buddypress-2.8.1-file-bp-core-bp-core-template","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bp-core-bp-core-template" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to buddypress." href="http://hookr.io/plugins/buddypress/" class="plugin"><span property="name">buddypress</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.1." href="http://hookr.io/plugins/buddypress/2.8.1/" class="H_VERSION"><span property="name">2.8.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/buddypress/2.8.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bp-core-bp-core-template</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="7837"><a href="http://hookr.io/plugins/buddypress/2.8.1/all/" title="All">All <span class="count badge">7837</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="3621"><a href="http://hookr.io/plugins/buddypress/2.8.1/hooks/" title="Hooks">Hooks <span class="count badge">3621</span></a></li><li class="" data-id="action" data-count="1727"><a href="http://hookr.io/plugins/buddypress/2.8.1/actions/" title="Actions">Actions <span class="count badge">1727</span></a></li><li class="" data-id="filter" data-count="1894"><a href="http://hookr.io/plugins/buddypress/2.8.1/filters/" title="Filters">Filters <span class="count badge">1894</span></a></li><li class="" data-id="class" data-count="181"><a href="http://hookr.io/plugins/buddypress/2.8.1/classes/" title="Classes">Classes <span class="count badge">181</span></a></li><li class="" data-id="constant" data-count="161"><a href="http://hookr.io/plugins/buddypress/2.8.1/constants/" title="Constants">Constants <span class="count badge">161</span></a></li><li class="" data-id="function" data-count="3874"><a href="http://hookr.io/plugins/buddypress/2.8.1/functions/" title="Functions">Functions <span class="count badge">3874</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/buddypress/2.8.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bp-core/bp-core-template.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Core component template tag functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package BuddyPress</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage TemplateFunctions</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly.</span>&nbsp;</div></li><li><div>defined( 'ABSPATH' ) || exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the &quot;options nav&quot;, the secondary-level single item navigation menu.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Uses the component's nav global to render out the sub navigation for the</span>&nbsp;</div></li><li><div><span class="comment"> * current component. Each component adds to its sub navigation array within</span>&nbsp;</div></li><li><div><span class="comment"> * its own setup_nav() function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This sub navigation array is the secondary level navigation, so for profile</span>&nbsp;</div></li><li><div><span class="comment"> * it contains:</span>&nbsp;</div></li><li><div><span class="comment"> *      [Public, Edit Profile, Change Avatar]</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The function will also analyze the current action for the current component</span>&nbsp;</div></li><li><div><span class="comment"> * to determine whether or not to highlight a particular sub nav item.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *       viewed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $parent_slug Options nav slug.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_options_nav( $parent_slug = '' ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If we are looking at a member profile, then the we can use the current</span>&nbsp;</div></li><li><div>  <span class="comment">// component as an index. Otherwise we need to use the component's root_slug.</span>&nbsp;</div></li><li><div>  $component_index = !empty( $bp-&gt;displayed_user ) ? bp_current_component() : bp_get_root_slug( bp_current_component() );&nbsp;</div></li><li><div>  $selected_item = bp_current_action();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Default to the Members nav.</span>&nbsp;</div></li><li><div>  if ( ! bp_is_single_item() ) {&nbsp;</div></li><li><div>      <span class="comment">// Set the parent slug, if not provided.</span>&nbsp;</div></li><li><div>      if ( empty( $parent_slug ) ) {&nbsp;</div></li><li><div>          $parent_slug = $component_index;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $secondary_nav_items = $bp-&gt;members-&gt;nav-&gt;get_secondary( array( 'parent_slug' =&gt; $parent_slug ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $secondary_nav_items ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// For a single item, try to use the component's nav.</span>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $current_item = bp_current_item();&nbsp;</div></li><li><div>      $single_item_component = bp_current_component();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Adjust the selected nav item for the current single item if needed.</span>&nbsp;</div></li><li><div>      if ( ! empty( $parent_slug ) ) {&nbsp;</div></li><li><div>          $current_item = $parent_slug;&nbsp;</div></li><li><div>          $selected_item = bp_action_variable( 0 );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If the nav is not defined by the parent component, look in the Members nav.</span>&nbsp;</div></li><li><div>      if ( ! isset( $bp-&gt;{$single_item_component}-&gt;nav ) ) {&nbsp;</div></li><li><div>          $secondary_nav_items = $bp-&gt;members-&gt;nav-&gt;get_secondary( array( 'parent_slug' =&gt; $current_item ) );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $secondary_nav_items = $bp-&gt;{$single_item_component}-&gt;nav-&gt;get_secondary( array( 'parent_slug' =&gt; $current_item ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $secondary_nav_items ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through each navigation item.</span>&nbsp;</div></li><li><div>  foreach ( $secondary_nav_items as $subnav_item ) {&nbsp;</div></li><li><div>      if ( empty( $subnav_item-&gt;user_has_access ) ) {&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If the current action or an action variable matches the nav item id, then add a highlight CSS class.</span>&nbsp;</div></li><li><div>      if ( $subnav_item-&gt;slug === $selected_item ) {&nbsp;</div></li><li><div>          $selected = ' class=&quot;current selected&quot;';&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $selected = '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// List type depends on our current component.</span>&nbsp;</div></li><li><div>      $list_type = bp_is_group() ? 'groups' : 'personal';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the &quot;options nav&quot;, the secondary-level single item navigation menu.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * This is a dynamic filter that is dependent on the provided css_id value.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value         HTML list item for the submenu item.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $subnav_item   Submenu array item being displayed.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $selected_item Current action.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      echo apply_filters( 'bp_get_options_nav_' . $subnav_item-&gt;css_id, '&lt;li id=&quot;' . esc_attr( $subnav_item-&gt;css_id . '-' . $list_type . '-li' ) . '&quot; ' . $selected . '&gt;&lt;a id=&quot;' . esc_attr( $subnav_item-&gt;css_id ) . '&quot; href=&quot;' . esc_url( $subnav_item-&gt;link ) . '&quot;&gt;' . $subnav_item-&gt;name . '&lt;/a&gt;&lt;/li&gt;', $subnav_item, $selected_item );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the 'bp_options_title' property from the BP global.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_options_title() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $bp-&gt;bp_options_title ) ) {&nbsp;</div></li><li><div>      $bp-&gt;bp_options_title = __( 'Options', 'buddypress' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo apply_filters( 'bp_get_options_title', esc_attr( $bp-&gt;bp_options_title ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the directory title for a component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Used for the &lt;title&gt; element and the page header on the component directory</span>&nbsp;</div></li><li><div><span class="comment"> * page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Component to get directory title for.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_directory_title( $component = '' ) {&nbsp;</div></li><li><div>  $title = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Use the string provided by the component.</span>&nbsp;</div></li><li><div>  if ( ! empty( buddypress()-&gt;{$component}-&gt;directory_title ) ) {&nbsp;</div></li><li><div>      $title = buddypress()-&gt;{$component}-&gt;directory_title;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If none is found, concatenate.</span>&nbsp;</div></li><li><div>  } elseif ( isset( buddypress()-&gt;{$component}-&gt;name ) ) {&nbsp;</div></li><li><div>      $title = sprintf( __( '%s Directory', 'buddypress' ), buddypress()-&gt;{$component}-&gt;name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the directory title for a component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $title     Text to be used in &lt;title&gt; tag.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component Current componet being displayed.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_get_directory_title', $title, $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Avatars *******************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check to see if there is an options avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * An options avatar is an avatar for something like a group, or a friend.</span>&nbsp;</div></li><li><div><span class="comment"> * Basically an avatar that appears in the sub nav options bar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool $value Returns true if an options avatar has been set, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_has_options_avatar() {&nbsp;</div></li><li><div>  return (bool) buddypress()-&gt;bp_options_avatar;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the options avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_options_avatar() {&nbsp;</div></li><li><div>  echo apply_filters( 'bp_get_options_avatar', buddypress()-&gt;bp_options_avatar );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a comment author's avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_comment_author_avatar() {&nbsp;</div></li><li><div>  global $comment;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'bp_core_fetch_avatar' ) ) {&nbsp;</div></li><li><div>      echo apply_filters( 'bp_comment_author_avatar', bp_core_fetch_avatar( array(&nbsp;</div></li><li><div>          'item_id' =&gt; $comment-&gt;user_id, &nbsp;</div></li><li><div>          'type' =&gt; 'thumb', &nbsp;</div></li><li><div>          'alt' =&gt; sprintf( __( 'Profile photo of %s', 'buddypress' ), bp_core_get_user_displayname( $comment-&gt;user_id ) )&nbsp;</div></li><li><div> ) ) );&nbsp;</div></li><li><div>  } elseif ( function_exists( 'get_avatar' ) ) {&nbsp;</div></li><li><div>      get_avatar();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output a post author's avatar.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_post_author_avatar() {&nbsp;</div></li><li><div>  global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'bp_core_fetch_avatar' ) ) {&nbsp;</div></li><li><div>      echo apply_filters( 'bp_post_author_avatar', bp_core_fetch_avatar( array(&nbsp;</div></li><li><div>          'item_id' =&gt; $post-&gt;post_author, &nbsp;</div></li><li><div>          'type' =&gt; 'thumb', &nbsp;</div></li><li><div>          'alt' =&gt; sprintf( __( 'Profile photo of %s', 'buddypress' ), bp_core_get_user_displayname( $post-&gt;post_author ) )&nbsp;</div></li><li><div> ) ) );&nbsp;</div></li><li><div>  } elseif ( function_exists( 'get_avatar' ) ) {&nbsp;</div></li><li><div>      get_avatar();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the current avatar upload step.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_avatar_admin_step() {&nbsp;</div></li><li><div>  echo bp_get_avatar_admin_step();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the current avatar upload step.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string The current avatar upload step. Returns 'upload-image'</span>&nbsp;</div></li><li><div><span class="comment">   *         if none is found.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_avatar_admin_step() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>      $step = isset( $bp-&gt;avatar_admin-&gt;step )&nbsp;</div></li><li><div>          ? $step = $bp-&gt;avatar_admin-&gt;step&nbsp;</div></li><li><div>          : 'upload-image';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the current avatar upload step.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $step The current avatar upload step.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_avatar_admin_step', $step );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the URL of the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_avatar_to_crop() {&nbsp;</div></li><li><div>  echo bp_get_avatar_to_crop();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the URL of the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string URL of the avatar awaiting cropping.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_avatar_to_crop() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>      $url = isset( $bp-&gt;avatar_admin-&gt;image-&gt;url )&nbsp;</div></li><li><div>          ? $bp-&gt;avatar_admin-&gt;image-&gt;url&nbsp;</div></li><li><div>          : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the URL of the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $url URL for the avatar.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_avatar_to_crop', $url );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the relative file path to the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_avatar_to_crop_src() {&nbsp;</div></li><li><div>  echo bp_get_avatar_to_crop_src();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the relative file path to the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Relative file path to the avatar.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_avatar_to_crop_src() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>      $src = isset( $bp-&gt;avatar_admin-&gt;image-&gt;dir )&nbsp;</div></li><li><div>          ? str_replace( WP_CONTENT_DIR, '', $bp-&gt;avatar_admin-&gt;image-&gt;dir )&nbsp;</div></li><li><div>          : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the relative file path to the avatar to crop.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $src Relative file path for the avatar.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_avatar_to_crop_src', $src );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the avatar cropper &lt;img&gt; markup.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * No longer used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_avatar_cropper() {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;img id=&quot;avatar-to-crop&quot; class=&quot;avatar&quot; src=&quot;&lt;?php echo esc_url( buddypress()-&gt;avatar_admin-&gt;image ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the name of the BP site. Used in RSS headers.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_site_name() {&nbsp;</div></li><li><div>  echo bp_get_site_name();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the name of the BP site. Used in RSS headers.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_site_name() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the name of the BP site. Used in RSS headers.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value Current BP site name.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_site_name', get_bloginfo( 'name', 'display' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Format a date based on a UNIX timestamp.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function can be used to turn a UNIX timestamp into a properly formatted</span>&nbsp;</div></li><li><div><span class="comment"> * (and possibly localized) string, userful for ouputting the date & time an</span>&nbsp;</div></li><li><div><span class="comment"> * action took place.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not to be confused with `bp_core_time_since()`, this function is best used</span>&nbsp;</div></li><li><div><span class="comment"> * for displaying a more exact date and time vs. a human-readable time.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Note: This function may be improved or removed at a later date, as it is</span>&nbsp;</div></li><li><div><span class="comment"> * hardly used and adds an additional layer of complexity to calculating dates</span>&nbsp;</div></li><li><div><span class="comment"> * and times together with timezone offsets and i18n.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|string $time         The UNIX timestamp to be formatted.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool       $exclude_time Optional. True to return only the month + day, false</span>&nbsp;</div></li><li><div><span class="comment"> *                                 to return month, day, and time. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool       $gmt          Optional. True to display in local time, false to</span>&nbsp;</div></li><li><div><span class="comment"> *                                  leave in GMT. Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed A string representation of $time, in the format</span>&nbsp;</div></li><li><div><span class="comment"> *               &quot;March 18, 2014 at 2:00 pm&quot; (or whatever your</span>&nbsp;</div></li><li><div><span class="comment"> *               'date_format' and 'time_format' settings are</span>&nbsp;</div></li><li><div><span class="comment"> *               on your root blog). False on failure.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_format_time( $time = '', $exclude_time = false, $gmt = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Bail if time is empty or not numeric</span>&nbsp;</div></li><li><div>  <span class="comment">// @todo We should output something smarter here.</span>&nbsp;</div></li><li><div>  if ( empty( $time ) || ! is_numeric( $time ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get GMT offset from root blog.</span>&nbsp;</div></li><li><div>  if ( true === $gmt ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Use Timezone string if set.</span>&nbsp;</div></li><li><div>      $timezone_string = bp_get_option( 'timezone_string' );&nbsp;</div></li><li><div>      if ( ! empty( $timezone_string ) ) {&nbsp;</div></li><li><div>          $timezone_object = timezone_open( $timezone_string );&nbsp;</div></li><li><div>          $datetime_object = date_create( &quot;@{$time}&quot; );&nbsp;</div></li><li><div>          $timezone_offset = timezone_offset_get( $timezone_object, $datetime_object ) / HOUR_IN_SECONDS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Fall back on less reliable gmt_offset.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $timezone_offset = bp_get_option( 'gmt_offset' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Calculate time based on the offset.</span>&nbsp;</div></li><li><div>      $calculated_time = $time + ( $timezone_offset * HOUR_IN_SECONDS );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// No localizing, so just use the time that was submitted.</span>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $calculated_time = $time;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Formatted date: &quot;March 18, 2014&quot;.</span>&nbsp;</div></li><li><div>  $formatted_date = date_i18n( bp_get_option( 'date_format' ), $calculated_time, $gmt );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Should we show the time also?</span>&nbsp;</div></li><li><div>  if ( true !== $exclude_time ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Formatted time: &quot;2:00 pm&quot;.</span>&nbsp;</div></li><li><div>      $formatted_time = date_i18n( bp_get_option( 'time_format' ), $calculated_time, $gmt );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Return string formatted with date and time.</span>&nbsp;</div></li><li><div>      $formatted_date = sprintf( esc_html__( '%1$s at %2$s', 'buddypress' ), $formatted_date, $formatted_time );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the date based on a UNIX timestamp.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $formatted_date Formatted date from the timestamp.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_format_time', $formatted_date );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Select between two dynamic strings, according to context.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function can be used in cases where a phrase used in a template will</span>&nbsp;</div></li><li><div><span class="comment"> * differ for a user looking at his own profile and a user looking at another</span>&nbsp;</div></li><li><div><span class="comment"> * user's profile (eg, &quot;My Friends&quot; and &quot;Joe's Friends&quot;). Pass both versions</span>&nbsp;</div></li><li><div><span class="comment"> * of the phrase, and bp_word_or_name() will detect which is appropriate, and</span>&nbsp;</div></li><li><div><span class="comment"> * do the necessary argument swapping for dynamic phrases.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $youtext    The &quot;you&quot; version of the phrase (eg &quot;Your Friends&quot;).</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $nametext   The other-user version of the phrase. Should be in</span>&nbsp;</div></li><li><div><span class="comment"> *                           a format appropriate for sprintf() - use %s in place of the displayed</span>&nbsp;</div></li><li><div><span class="comment"> *                           user's name (eg &quot;%'s Friends&quot;).</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $capitalize Optional. Force into title case. Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool   $echo       Optional. True to echo the results, false to return them.</span>&nbsp;</div></li><li><div><span class="comment"> *                           Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|null $nametext If ! $echo, returns the appropriate string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_word_or_name( $youtext, $nametext, $capitalize = true, $echo = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $capitalize ) ) {&nbsp;</div></li><li><div>      $youtext = bp_core_ucfirst( $youtext );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_displayed_user_id() == bp_loggedin_user_id() ) {&nbsp;</div></li><li><div>      if ( true == $echo ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the text used based on context of own profile or someone else's profile.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $youtext Context-determined string to display.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          echo apply_filters( 'bp_word_or_name', $youtext );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">/** This filter is documented in bp-core/bp-core-template.php */</span></span></span>&nbsp;</div></li><li><div>          return apply_filters( 'bp_word_or_name', $youtext );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $fullname = bp_get_displayed_user_fullname();&nbsp;</div></li><li><div>      $fullname = (array) explode( ' ', $fullname );&nbsp;</div></li><li><div>      $nametext = sprintf( $nametext, $fullname[0] );&nbsp;</div></li><li><div>      if ( true == $echo ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">/** This filter is documented in bp-core/bp-core-template.php */</span></span></span>&nbsp;</div></li><li><div>          echo apply_filters( 'bp_word_or_name', $nametext );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">/** This filter is documented in bp-core/bp-core-template.php */</span></span></span>&nbsp;</div></li><li><div>          return apply_filters( 'bp_word_or_name', $nametext );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Do the 'bp_styles' action, and call wp_print_styles().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * No longer used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_styles() {&nbsp;</div></li><li><div>  do_action( 'bp_styles' );&nbsp;</div></li><li><div>  wp_print_styles();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Search Form ***************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the &quot;action&quot; attribute for search forms.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string URL action attribute for search forms, eg example.com/search/.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_form_action() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the &quot;action&quot; attribute for search forms.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Search form action url.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_search_form_action', trailingslashit( bp_get_root_domain() . '/' . bp_get_search_slug() ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generate the basic search form as used in BP-Default's header.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string HTML &lt;select&gt; element.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_form_type_select() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $options = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_active( 'xprofile' ) ) {&nbsp;</div></li><li><div>      $options['members'] = _x( 'Members', 'search form', 'buddypress' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_active( 'groups' ) ) {&nbsp;</div></li><li><div>      $options['groups'] = _x( 'Groups', 'search form', 'buddypress' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_active( 'blogs' ) && is_multisite() ) {&nbsp;</div></li><li><div>      $options['blogs'] = _x( 'Blogs', 'search form', 'buddypress' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_active( 'forums' ) && bp_forums_is_installed_correctly() && bp_forums_has_directory() ) {&nbsp;</div></li><li><div>      $options['forums'] = _x( 'Forums', 'search form', 'buddypress' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $options['posts'] = _x( 'Posts', 'search form', 'buddypress' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Eventually this won't be needed and a page will be built to integrate all search results.</span>&nbsp;</div></li><li><div>  $selection_box = '&lt;label for=&quot;search-which&quot; class=&quot;accessibly-hidden&quot;&gt;' . _x( 'Search these:', 'search form', 'buddypress' ) . '&lt;/label&gt;';&nbsp;</div></li><li><div>  $selection_box .= '&lt;select name=&quot;search-which&quot; id=&quot;search-which&quot; style=&quot;width: auto&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters all of the component options available for search scope.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $options Array of options to add to select field.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $options = apply_filters( 'bp_search_form_type_select_options', $options );&nbsp;</div></li><li><div>  foreach( (array) $options as $option_value =&gt; $option_title ) {&nbsp;</div></li><li><div>      $selection_box .= sprintf( '&lt;option value=&quot;%s&quot;&gt;%s&lt;/option&gt;', $option_value, $option_title );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $selection_box .= '&lt;/select&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the complete &lt;select&gt; input used for search scope.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $selection_box &lt;select&gt; input for selecting search scope.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_search_form_type_select', $selection_box );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the 'name' attribute for search form input element.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component See bp_get_search_input_name().</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_input_name( $component = '' ) {&nbsp;</div></li><li><div>  echo esc_attr( bp_get_search_input_name( $component ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the 'name' attribute for the search form input element.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Component name. Defaults to current component.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Text for the 'name' attribute.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_search_input_name( $component = '' ) {&nbsp;</div></li><li><div>  if ( ! $component ) {&nbsp;</div></li><li><div>      $component = bp_current_component();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $name = '';&nbsp;</div></li><li><div>  if ( isset( $bp-&gt;{$component}-&gt;id ) ) {&nbsp;</div></li><li><div>      $name = $bp-&gt;{$component}-&gt;id . '_search';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $name;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the placeholder text for the search box for a given component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component See bp_get_search_placeholder().</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_placeholder( $component = '' ) {&nbsp;</div></li><li><div>  echo esc_attr( bp_get_search_placeholder( $component ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the placeholder text for the search box for a given component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Component name. Defaults to current component.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Placeholder text for the search field.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_search_placeholder( $component = '' ) {&nbsp;</div></li><li><div>  $query_arg = bp_core_get_component_search_query_arg( $component );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $query_arg && ! empty( $_REQUEST[ $query_arg ] ) ) {&nbsp;</div></li><li><div>      $placeholder = wp_unslash( $_REQUEST[ $query_arg ] );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $placeholder = bp_get_search_default_text( $component );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $placeholder;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the default text for the search box for a given component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_search_default_text()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component See {@link bp_get_search_default_text()}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_default_text( $component = '' ) {&nbsp;</div></li><li><div>  echo bp_get_search_default_text( $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the default text for the search box for a given component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component Component name. Default: current component.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string Placeholder text for search field.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_search_default_text( $component = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $component ) ) {&nbsp;</div></li><li><div>          $component = bp_current_component();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $default_text = __( 'Search anything...', 'buddypress' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Most of the time, $component will be the actual component ID.</span>&nbsp;</div></li><li><div>      if ( !empty( $component ) ) {&nbsp;</div></li><li><div>          if ( !empty( $bp-&gt;{$component}-&gt;search_string ) ) {&nbsp;</div></li><li><div>              $default_text = $bp-&gt;{$component}-&gt;search_string;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              <span class="comment">// When the request comes through AJAX, we need to get the component</span>&nbsp;</div></li><li><div>              <span class="comment">// name out of $bp-&gt;pages.</span>&nbsp;</div></li><li><div>              if ( !empty( $bp-&gt;pages-&gt;{$component}-&gt;slug ) ) {&nbsp;</div></li><li><div>                  $key = $bp-&gt;pages-&gt;{$component}-&gt;slug;&nbsp;</div></li><li><div>                  if ( !empty( $bp-&gt;{$key}-&gt;search_string ) ) {&nbsp;</div></li><li><div>                      $default_text = $bp-&gt;{$key}-&gt;search_string;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the default text for the search box for a given component.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $default_text Default text for search box.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $component    Current component displayed.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_search_default_text', $default_text, $component );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fire the 'bp_custom_profile_boxes' action.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * No longer used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_custom_profile_boxes() {&nbsp;</div></li><li><div>  do_action( 'bp_custom_profile_boxes' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fire the 'bp_custom_profile_sidebar_boxes' action.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * No longer used in BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_custom_profile_sidebar_boxes() {&nbsp;</div></li><li><div>  do_action( 'bp_custom_profile_sidebar_boxes' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the attributes for a form field.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name       The field name to output attributes for.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $attributes Array of existing attributes to add.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_form_field_attributes( $name = '', $attributes = array() ) {&nbsp;</div></li><li><div>  echo bp_get_form_field_attributes( $name, $attributes );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the attributes for a form field.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Primarily to add better support for touchscreen devices, but plugin devs</span>&nbsp;</div></li><li><div><span class="comment">   * can use the 'bp_get_form_field_extra_attributes' filter for further</span>&nbsp;</div></li><li><div><span class="comment">   * manipulation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $name       The field name to get attributes for.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $attributes Array of existing attributes to add.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_form_field_attributes( $name = '', $attributes = array() ) {&nbsp;</div></li><li><div>      $retval = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $attributes ) ) {&nbsp;</div></li><li><div>          $attributes = array();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $name = strtolower( $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      switch ( $name ) {&nbsp;</div></li><li><div>          case 'username' :&nbsp;</div></li><li><div>          case 'blogname' :&nbsp;</div></li><li><div>              $attributes['autocomplete'] = 'off';&nbsp;</div></li><li><div>              $attributes['autocapitalize'] = 'none';&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'email' :&nbsp;</div></li><li><div>              if ( wp_is_mobile() ) {&nbsp;</div></li><li><div>                  $attributes['autocapitalize'] = 'none';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'password' :&nbsp;</div></li><li><div>              $attributes['spellcheck'] = 'false';&nbsp;</div></li><li><div>              $attributes['autocomplete'] = 'off';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( wp_is_mobile() ) {&nbsp;</div></li><li><div>                  $attributes['autocorrect'] = 'false';&nbsp;</div></li><li><div>                  $attributes['autocapitalize'] = 'none';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filter the attributes for a field before rendering output.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $attributes The field attributes.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $name       The field name.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $attributes = (array) apply_filters( 'bp_get_form_field_attributes', $attributes, $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach( $attributes as $attr =&gt; $value ) {&nbsp;</div></li><li><div>          $retval .= sprintf( ' %s=&quot;%s&quot;', sanitize_key( $attr ), esc_attr( $value ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $retval;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create and output a button.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.6</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see bp_get_button()</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|string $args See {@link BP_Button}.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_button( $args = '' ) {&nbsp;</div></li><li><div>  echo bp_get_button( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Create and return a button.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.6</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @see BP_Button for a description of arguments and return value.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|string $args See {@link BP_Button}.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string HTML markup for the button.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_button( $args = '' ) {&nbsp;</div></li><li><div>      $button = new BP_Button( $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the requested button output.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.6</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string    $contents  Button context to be used.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array     $args      Array of args for the button.</span>&nbsp;</div></li><li><div><span class="comment">       * @param BP_Button $button    BP_Button object.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_button', $button-&gt;contents, $args, $button );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Truncate text.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Cuts a string to the length of $length and replaces the last characters</span>&nbsp;</div></li><li><div><span class="comment"> * with the ending if the text is longer than length.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is borrowed from CakePHP v2.0, under the MIT license. See</span>&nbsp;</div></li><li><div><span class="comment"> * http://book.cakephp.org/view/1469/Text#truncate-1625</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Added 'strip_tags' and 'remove_links' as $options args.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text   String to truncate.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int    $length Optional. Length of returned string, including ellipsis.</span>&nbsp;</div></li><li><div><span class="comment"> *                       Default: 225.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $options {</span>&nbsp;</div></li><li><div><span class="comment"> *     An array of HTML attributes and options. Each item is optional.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $ending            The string used after truncation.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default: ' [&hellip;]'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $exact             If true, $text will be trimmed to exactly $length.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     If false, $text will not be cut mid-word. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $html              If true, don't include HTML tags when calculating</span>&nbsp;</div></li><li><div><span class="comment"> *                                     excerpt length. Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $filter_shortcodes If true, shortcodes will be stripped.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $strip_tags        If true, HTML tags will be stripped. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Only applicable if $html is set to false.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $remove_links      If true, URLs will be stripped. Default: false.</span>&nbsp;</div></li><li><div><span class="comment"> *                                     Only applicable if $html is set to false.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Trimmed string.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_create_excerpt( $text, $length = 225, $options = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Backward compatibility. The third argument used to be a boolean $filter_shortcodes.</span>&nbsp;</div></li><li><div>  $filter_shortcodes_default = is_bool( $options ) ? $options : true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r = bp_parse_args( $options, array(&nbsp;</div></li><li><div>      'ending' =&gt; __( ' [&hellip;]', 'buddypress' ), &nbsp;</div></li><li><div>      'exact' =&gt; false, &nbsp;</div></li><li><div>      'html' =&gt; true, &nbsp;</div></li><li><div>      'filter_shortcodes' =&gt; $filter_shortcodes_default, &nbsp;</div></li><li><div>      'strip_tags' =&gt; false, &nbsp;</div></li><li><div>      'remove_links' =&gt; false, &nbsp;</div></li><li><div> ), 'create_excerpt' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Save the original text, to be passed along to the filter.</span>&nbsp;</div></li><li><div>  $original_text = $text;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the excerpt length to trim text to.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $length Length of returned string, including ellipsis.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $length = apply_filters( 'bp_excerpt_length', $length );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the excerpt appended text value.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $value Text to append to the end of the excerpt.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $ending = apply_filters( 'bp_excerpt_append_text', $r['ending'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Remove shortcodes if necessary.</span>&nbsp;</div></li><li><div>  if ( ! empty( $r['filter_shortcodes'] ) ) {&nbsp;</div></li><li><div>      $text = strip_shortcodes( $text );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// When $html is true, the excerpt should be created without including HTML tags in the</span>&nbsp;</div></li><li><div>  <span class="comment">// excerpt length.</span>&nbsp;</div></li><li><div>  if ( ! empty( $r['html'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// The text is short enough. No need to truncate.</span>&nbsp;</div></li><li><div>      if ( mb_strlen( preg_replace( '/&lt;.*?&gt;/', '', $text ) ) &lt;= $length ) {&nbsp;</div></li><li><div>          return $text;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $totalLength = mb_strlen( strip_tags( $ending ) );&nbsp;</div></li><li><div>      $openTags = array();&nbsp;</div></li><li><div>      $truncate = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Find all the tags and HTML comments and put them in a stack for later use.</span>&nbsp;</div></li><li><div>      preg_match_all( '/(&lt;\/?([\w+!]+)[^&gt;]*&gt;)?([^&lt;&gt;]*)/', $text, $tags, PREG_SET_ORDER );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $tags as $tag ) {&nbsp;</div></li><li><div>          <span class="comment">// Process tags that need to be closed.</span>&nbsp;</div></li><li><div>          if ( !preg_match( '/img|br|input|hr|area|base|basefont|col|frame|isindex|link|meta|param/s', $tag[2] ) ) {&nbsp;</div></li><li><div>              if ( preg_match( '/&lt;[\w]+[^&gt;]*&gt;/s', $tag[0] ) ) {&nbsp;</div></li><li><div>                  array_unshift( $openTags, $tag[2] );&nbsp;</div></li><li><div>              } elseif ( preg_match('/&lt;\/([\w]+)[^&gt;]*&gt;/s', $tag[0], $closeTag ) ) {&nbsp;</div></li><li><div>                  $pos = array_search( $closeTag[1], $openTags );&nbsp;</div></li><li><div>                  if ( $pos !== false ) {&nbsp;</div></li><li><div>                      array_splice( $openTags, $pos, 1 );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $truncate     .= $tag[1];&nbsp;</div></li><li><div>          $contentLength = mb_strlen( preg_replace( '/&[0-9a-z]{2, 8};|&#[0-9]{1, 7};|&#x[0-9a-f]{1, 6};/i', ' ', $tag[3] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $contentLength + $totalLength &gt; $length ) {&nbsp;</div></li><li><div>              $left = $length - $totalLength;&nbsp;</div></li><li><div>              $entitiesLength = 0;&nbsp;</div></li><li><div>              if ( preg_match_all( '/&[0-9a-z]{2, 8};|&#[0-9]{1, 7};|&#x[0-9a-f]{1, 6};/i', $tag[3], $entities, PREG_OFFSET_CAPTURE ) ) {&nbsp;</div></li><li><div>                  foreach ( $entities[0] as $entity ) {&nbsp;</div></li><li><div>                      if ( $entity[1] + 1 - $entitiesLength &lt;= $left ) {&nbsp;</div></li><li><div>                          $left--;&nbsp;</div></li><li><div>                          $entitiesLength += mb_strlen( $entity[0] );&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          break;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $truncate .= mb_substr( $tag[3], 0 , $left + $entitiesLength );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $truncate .= $tag[3];&nbsp;</div></li><li><div>              $totalLength += $contentLength;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( $totalLength &gt;= $length ) {&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">// Strip HTML tags if necessary.</span>&nbsp;</div></li><li><div>      if ( ! empty( $r['strip_tags'] ) ) {&nbsp;</div></li><li><div>          $text = strip_tags( $text );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Remove links if necessary.</span>&nbsp;</div></li><li><div>      if ( ! empty( $r['remove_links'] ) ) {&nbsp;</div></li><li><div>          $text = preg_replace( '#^\s*(https?:<span class="comment">//[^\s&quot;]+)\s*$#im', '', $text );</span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( mb_strlen( $text ) &lt;= $length ) {&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters the final generated excerpt.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $truncate      Generated excerpt.</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $original_text Original text provided.</span>&nbsp;</div></li><li><div><span class="comment">           * @param int    $length        Length of returned string, including ellipsis.</span>&nbsp;</div></li><li><div><span class="comment">           * @param array  $options       Array of HTML attributes and options.</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          return apply_filters( 'bp_create_excerpt', $text, $original_text, $length, $options );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $truncate = mb_substr( $text, 0, $length - mb_strlen( $ending ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If $exact is false, we can't break on words.</span>&nbsp;</div></li><li><div>  if ( empty( $r['exact'] ) ) {&nbsp;</div></li><li><div>      <span class="comment">// Find the position of the last space character not part of a tag.</span>&nbsp;</div></li><li><div>      preg_match_all( '/&lt;[a-z\!\/][^&gt;]*&gt;/', $truncate, $_truncate_tags, PREG_OFFSET_CAPTURE );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Rekey tags by the string index of their last character.</span>&nbsp;</div></li><li><div>      $truncate_tags = array();&nbsp;</div></li><li><div>      if ( ! empty( $_truncate_tags[0] ) ) {&nbsp;</div></li><li><div>          foreach ( $_truncate_tags[0] as $_tt ) {&nbsp;</div></li><li><div>              $_tt['start'] = $_tt[1];&nbsp;</div></li><li><div>              $_tt['end'] = $_tt[1] + strlen( $_tt[0] );&nbsp;</div></li><li><div>              $truncate_tags[ $_tt['end'] ] = $_tt;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $truncate_length = mb_strlen( $truncate );&nbsp;</div></li><li><div>      $spacepos = $truncate_length + 1;&nbsp;</div></li><li><div>      for ( $pos = $truncate_length - 1; $pos &gt;= 0; $pos-- ) {&nbsp;</div></li><li><div>          <span class="comment">// Word boundaries are spaces and the close of HTML tags, when the tag is preceded by a space.</span>&nbsp;</div></li><li><div>          $is_word_boundary = ' ' === $truncate[ $pos ];&nbsp;</div></li><li><div>          if ( ! $is_word_boundary && isset( $truncate_tags[ $pos - 1 ] ) ) {&nbsp;</div></li><li><div>              $preceding_tag = $truncate_tags[ $pos - 1 ];&nbsp;</div></li><li><div>              if ( ' ' === $truncate[ $preceding_tag['start'] - 1 ] ) {&nbsp;</div></li><li><div>                  $is_word_boundary = true;&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! $is_word_boundary ) {&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If there are no tags in the string, the first space found is the right one.</span>&nbsp;</div></li><li><div>          if ( empty( $truncate_tags ) ) {&nbsp;</div></li><li><div>              $spacepos = $pos;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Look at each tag to see if the space is inside of it.</span>&nbsp;</div></li><li><div>          $intag = false;&nbsp;</div></li><li><div>          foreach ( $truncate_tags as $tt ) {&nbsp;</div></li><li><div>              if ( $pos &gt; $tt['start'] && $pos &lt; $tt['end'] ) {&nbsp;</div></li><li><div>                  $intag = true;&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! $intag ) {&nbsp;</div></li><li><div>              $spacepos = $pos;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $r['html'] ) {&nbsp;</div></li><li><div>          $bits = mb_substr( $truncate, $spacepos );&nbsp;</div></li><li><div>          preg_match_all( '/&lt;\/([a-z]+)&gt;/', $bits, $droppedTags, PREG_SET_ORDER );&nbsp;</div></li><li><div>          if ( !empty( $droppedTags ) ) {&nbsp;</div></li><li><div>              foreach ( $droppedTags as $closingTag ) {&nbsp;</div></li><li><div>                  if ( !in_array( $closingTag[1], $openTags ) ) {&nbsp;</div></li><li><div>                      array_unshift( $openTags, $closingTag[1] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $truncate = rtrim( mb_substr( $truncate, 0, $spacepos ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $truncate .= $ending;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $r['html'] ) ) {&nbsp;</div></li><li><div>      foreach ( $openTags as $tag ) {&nbsp;</div></li><li><div>          $truncate .= '&lt;/' . $tag . '&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** This filter is documented in /bp-core/bp-core-template.php */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_create_excerpt', $truncate, $original_text, $length, $options );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'bp_create_excerpt', 'stripslashes_deep' );&nbsp;</div></li><li><div>add_filter( 'bp_create_excerpt', 'force_balance_tags' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the total member count for the site.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_total_member_count() {&nbsp;</div></li><li><div>  echo bp_get_total_member_count();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the total member count in your BP instance.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Since BuddyPress 1.6, this function has used bp_core_get_active_member_count(), </span>&nbsp;</div></li><li><div><span class="comment">   * which counts non-spam, non-deleted users who have last_activity.</span>&nbsp;</div></li><li><div><span class="comment">   * This value will correctly match the total member count number used</span>&nbsp;</div></li><li><div><span class="comment">   * for pagination on member directories.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Before BuddyPress 1.6, this function used bp_core_get_total_member_count(), </span>&nbsp;</div></li><li><div><span class="comment">   * which did not take into account last_activity, and thus often</span>&nbsp;</div></li><li><div><span class="comment">   * resulted in higher counts than shown by member directory pagination.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int Member count.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_total_member_count() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the total member count in your BP instance.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param int $value Member count.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_total_member_count', bp_core_get_active_member_count() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  add_filter( 'bp_get_total_member_count', 'bp_core_number_format' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output whether blog signup is allowed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Deprecate. It doesn't make any sense to echo a boolean.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_blog_signup_allowed() {&nbsp;</div></li><li><div>  echo bp_get_blog_signup_allowed();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Is blog signup allowed?</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Returns true if is_multisite() and blog creation is enabled at</span>&nbsp;</div></li><li><div><span class="comment">   * Network Admin &gt; Settings.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool True if blog signup is allowed, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_blog_signup_allowed() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_multisite() ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $status = bp_core_get_root_option( 'registration' );&nbsp;</div></li><li><div>      if ( ( 'none' !== $status ) && ( 'user' !== $status ) ) {&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether an activation has just been completed.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the activation_complete global flag has been set, </span>&nbsp;</div></li><li><div><span class="comment"> *              otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_account_was_activated() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $activation_complete = !empty( $bp-&gt;activation_complete )&nbsp;</div></li><li><div>      ? $bp-&gt;activation_complete&nbsp;</div></li><li><div>      : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $activation_complete;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether registrations require activation on this installation.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * On a normal BuddyPress installation, all registrations require email</span>&nbsp;</div></li><li><div><span class="comment"> * activation. This filter exists so that customizations that omit activation</span>&nbsp;</div></li><li><div><span class="comment"> * can remove certain notification text from the registration screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True by default.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_registration_needs_activation() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether registrations require activation on this installation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $value Whether registrations require activation. Default true.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_registration_needs_activation', true );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve a client friendly version of the root blog name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The blogname option is escaped with esc_html on the way into the database in</span>&nbsp;</div></li><li><div><span class="comment"> * sanitize_option, we want to reverse this for the plain text arena of emails.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0 No longer used by BuddyPress, but not deprecated in case any existing plugins use it.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see https://buddypress.trac.wordpress.org/ticket/4401</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     Array of optional parameters.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $before  String to appear before the site name in the</span>&nbsp;</div></li><li><div><span class="comment"> *                           email subject. Default: '['.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $after   String to appear after the site name in the</span>&nbsp;</div></li><li><div><span class="comment"> *                           email subject. Default: ']'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $default The default site name, to be used when none is</span>&nbsp;</div></li><li><div><span class="comment"> *                           found in the database. Default: 'Community'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $text    Text to append to the site name (ie, the main text of</span>&nbsp;</div></li><li><div><span class="comment"> *                           the email subject).</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Sanitized email subject.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_email_subject( $args = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $r = bp_parse_args( $args, array(&nbsp;</div></li><li><div>      'before' =&gt; '[', &nbsp;</div></li><li><div>      'after' =&gt; ']', &nbsp;</div></li><li><div>      'default' =&gt; __( 'Community', 'buddypress' ), &nbsp;</div></li><li><div>      'text' =&gt; ''&nbsp;</div></li><li><div> ), 'get_email_subject' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $subject = $r['before'] . wp_specialchars_decode( bp_get_option( 'blogname', $r['default'] ), ENT_QUOTES ) . $r['after'] . ' ' . $r['text'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters a client friendly version of the root blog name.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $subject Client friendy version of the root blog name.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $r       Array of arguments for the email subject.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_get_email_subject', $subject, $r );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Allow templates to pass parameters directly into the template loops via AJAX.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * For the most part this will be filtered in a theme's functions.php for</span>&nbsp;</div></li><li><div><span class="comment"> * example in the default theme it is filtered via bp_dtheme_ajax_querystring().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * By using this template tag in the templates it will stop them from showing</span>&nbsp;</div></li><li><div><span class="comment"> * errors if someone copies the templates from the default theme into another</span>&nbsp;</div></li><li><div><span class="comment"> * WordPress theme without coping the functions from functions.php.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $object Current template component.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The AJAX querystring.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_ajax_querystring( $object = false ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $bp-&gt;ajax_querystring ) ) {&nbsp;</div></li><li><div>      $bp-&gt;ajax_querystring = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the template paramenters to be used in the query string.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Allows templates to pass parameters into the template loops via AJAX.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $ajax_querystring Current query string.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $object           Current template component.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_ajax_querystring', $bp-&gt;ajax_querystring, $object );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Template Classes and _is functions ****************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the name of the current component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Component name.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_component() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $current_component = !empty( $bp-&gt;current_component )&nbsp;</div></li><li><div>      ? $bp-&gt;current_component&nbsp;</div></li><li><div>      : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the name of the current component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|bool $current_component Current component if available or false.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_current_component', $current_component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the name of the current action.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Action name.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_action() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $current_action = !empty( $bp-&gt;current_action )&nbsp;</div></li><li><div>      ? $bp-&gt;current_action&nbsp;</div></li><li><div>      : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the name of the current action.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $current_action Current action.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_current_action', $current_action );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the name of the current item.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_current_item() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $current_item = !empty( $bp-&gt;current_item )&nbsp;</div></li><li><div>      ? $bp-&gt;current_item&nbsp;</div></li><li><div>      : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the name of the current item.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|bool $current_item Current item if available or false.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_current_item', $current_item );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the value of $bp-&gt;action_variables.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|bool $action_variables The action variables array, or false</span>&nbsp;</div></li><li><div><span class="comment"> *                                      if the array is empty.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_action_variables() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $action_variables = !empty( $bp-&gt;action_variables )&nbsp;</div></li><li><div>      ? $bp-&gt;action_variables&nbsp;</div></li><li><div>      : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the value of $bp-&gt;action_variables.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|bool $action_variables Available action variables.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_action_variables', $action_variables );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the value of a given action variable.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $position The key of the action_variables array that you want.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool $action_variable The value of that position in the</span>&nbsp;</div></li><li><div><span class="comment"> *                                      array, or false if not found.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_action_variable( $position = 0 ) {&nbsp;</div></li><li><div>  $action_variables = bp_action_variables();&nbsp;</div></li><li><div>  $action_variable = isset( $action_variables[ $position ] )&nbsp;</div></li><li><div>      ? $action_variables[ $position ]&nbsp;</div></li><li><div>      : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the value of a given action variable.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string|bool $action_variable Requested action variable based on position.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int         $position        The key of the action variable requested.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_action_variable', $action_variable, $position );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the &quot;root domain&quot;, the URL of the BP root blog.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_root_domain() {&nbsp;</div></li><li><div>  echo bp_get_root_domain();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the &quot;root domain&quot;, the URL of the BP root blog.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string URL of the BP root blog.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_root_domain() {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bp-&gt;root_domain ) ) {&nbsp;</div></li><li><div>          $domain = $bp-&gt;root_domain;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $domain = bp_core_get_root_domain();&nbsp;</div></li><li><div>          $bp-&gt;root_domain = $domain;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the &quot;root domain&quot;, the URL of the BP root blog.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $domain URL of the BP root blog.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_root_domain', $domain );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the root slug for a given component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component The component name.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_root_slug( $component = '' ) {&nbsp;</div></li><li><div>  echo bp_get_root_slug( $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the root slug for given component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * The &quot;root slug&quot; is the string used when concatenating component</span>&nbsp;</div></li><li><div><span class="comment">   * directory URLs. For example, on an installation where the Groups</span>&nbsp;</div></li><li><div><span class="comment">   * component's directory is located at http://example.com/groups/, the</span>&nbsp;</div></li><li><div><span class="comment">   * root slug for the Groups component is 'groups'. This string</span>&nbsp;</div></li><li><div><span class="comment">   * generally corresponds to page_name of the component's directory</span>&nbsp;</div></li><li><div><span class="comment">   * page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * In order to maintain backward compatibility, the following procedure</span>&nbsp;</div></li><li><div><span class="comment">   * is used:</span>&nbsp;</div></li><li><div><span class="comment">   * 1) Use the short slug to get the canonical component name from the</span>&nbsp;</div></li><li><div><span class="comment">   *    active component array.</span>&nbsp;</div></li><li><div><span class="comment">   * 2) Use the component name to get the root slug out of the</span>&nbsp;</div></li><li><div><span class="comment">   *    appropriate part of the $bp global.</span>&nbsp;</div></li><li><div><span class="comment">   * 3) If nothing turns up, it probably means that $component is itself</span>&nbsp;</div></li><li><div><span class="comment">   *    a root slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Example: If your groups directory is at /community/companies, this</span>&nbsp;</div></li><li><div><span class="comment">   * function first uses the short slug 'companies' (ie the current</span>&nbsp;</div></li><li><div><span class="comment">   * component) to look up the canonical name 'groups' in</span>&nbsp;</div></li><li><div><span class="comment">   * $bp-&gt;active_components. Then it uses 'groups' to get the root slug, </span>&nbsp;</div></li><li><div><span class="comment">   * from $bp-&gt;groups-&gt;root_slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component Optional. Defaults to the current component.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string $root_slug The root slug.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_root_slug( $component = '' ) {&nbsp;</div></li><li><div>      $bp = buddypress();&nbsp;</div></li><li><div>      $root_slug = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Use current global component if none passed.</span>&nbsp;</div></li><li><div>      if ( empty( $component ) ) {&nbsp;</div></li><li><div>          $component = bp_current_component();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Component is active.</span>&nbsp;</div></li><li><div>      if ( ! empty( $bp-&gt;active_components[ $component ] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Backward compatibility: in legacy plugins, the canonical component id</span>&nbsp;</div></li><li><div>          <span class="comment">// was stored as an array value in $bp-&gt;active_components.</span>&nbsp;</div></li><li><div>          $component_name = ( '1' == $bp-&gt;active_components[ $component ] )&nbsp;</div></li><li><div>              ? $component&nbsp;</div></li><li><div>              : $bp-&gt;active_components[$component];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Component has specific root slug.</span>&nbsp;</div></li><li><div>          if ( ! empty( $bp-&gt;{$component_name}-&gt;root_slug ) ) {&nbsp;</div></li><li><div>              $root_slug = $bp-&gt;{$component_name}-&gt;root_slug;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// No specific root slug, so fall back to component slug.</span>&nbsp;</div></li><li><div>      if ( empty( $root_slug ) ) {&nbsp;</div></li><li><div>          $root_slug = $component;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the root slug for given component.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $root_slug Root slug for given component.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $component Current component.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_root_slug', $root_slug, $component );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return the component name based on a root slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $root_slug Needle to our active component haystack.</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed False if none found, component name if found.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_name_from_root_slug( $root_slug = '' ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If no slug is passed, look at current_component.</span>&nbsp;</div></li><li><div>  if ( empty( $root_slug ) ) {&nbsp;</div></li><li><div>      $root_slug = bp_current_component();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// No current component or root slug, so flee.</span>&nbsp;</div></li><li><div>  if ( empty( $root_slug ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through active components and look for a match.</span>&nbsp;</div></li><li><div>  foreach ( array_keys( $bp-&gt;active_components ) as $component ) {&nbsp;</div></li><li><div>      if ( ( ! empty( $bp-&gt;{$component}-&gt;slug ) && ( $bp-&gt;{$component}-&gt;slug == $root_slug ) ) || ( ! empty( $bp-&gt;{$component}-&gt;root_slug ) && ( $bp-&gt;{$component}-&gt;root_slug === $root_slug ) ) ) {&nbsp;</div></li><li><div>          return $bp-&gt;{$component}-&gt;name;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Returns whether or not a user has access.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_user_has_access() {&nbsp;</div></li><li><div>  $has_access = bp_current_user_can( 'bp_moderate' ) || bp_is_my_profile();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not a user has access.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $has_access Whether or not user has access.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_user_has_access', $has_access );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output the search slug.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_search_slug() {&nbsp;</div></li><li><div>  echo bp_get_search_slug();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Return the search slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string The search slug. Default: 'search'.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_search_slug() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the search slug.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @const string BP_SEARCH_SLUG The search slug. Default &quot;search&quot;.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_search_slug', BP_SEARCH_SLUG );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the ID of the currently displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int $id ID of the currently displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_displayed_user_id() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $id = !empty( $bp-&gt;displayed_user-&gt;id )&nbsp;</div></li><li><div>      ? $bp-&gt;displayed_user-&gt;id&nbsp;</div></li><li><div>      : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the ID of the currently displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $id ID of the currently displayed user.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (int) apply_filters( 'bp_displayed_user_id', $id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the ID of the currently logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int ID of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_loggedin_user_id() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $id = !empty( $bp-&gt;loggedin_user-&gt;id )&nbsp;</div></li><li><div>      ? $bp-&gt;loggedin_user-&gt;id&nbsp;</div></li><li><div>      : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the ID of the currently logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int $id ID of the currently logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (int) apply_filters( 'bp_loggedin_user_id', $id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** The is_() functions to determine the current page *****************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check to see whether the current page belongs to the specified component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is designed to be generous, accepting several different kinds</span>&nbsp;</div></li><li><div><span class="comment"> * of value for the $component parameter. It checks $component_name against:</span>&nbsp;</div></li><li><div><span class="comment"> * - the component's root_slug, which matches the page slug in $bp-&gt;pages.</span>&nbsp;</div></li><li><div><span class="comment"> * - the component's regular slug.</span>&nbsp;</div></li><li><div><span class="comment"> * - the component's id, or 'canonical' name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Name of the component being checked.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Returns true if the component matches, or else false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_current_component( $component = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Default is no match. We'll check a few places for matches.</span>&nbsp;</div></li><li><div>  $is_current_component = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Always return false if a null value is passed to the function.</span>&nbsp;</div></li><li><div>  if ( empty( $component ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Backward compatibility: 'xprofile' should be read as 'profile'.</span>&nbsp;</div></li><li><div>  if ( 'xprofile' === $component ) {&nbsp;</div></li><li><div>      $component = 'profile';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Only check if BuddyPress found a current_component.</span>&nbsp;</div></li><li><div>  if ( ! empty( $bp-&gt;current_component ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// First, check to see whether $component_name and the current</span>&nbsp;</div></li><li><div>      <span class="comment">// component are a simple match.</span>&nbsp;</div></li><li><div>      if ( $bp-&gt;current_component == $component ) {&nbsp;</div></li><li><div>          $is_current_component = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Since the current component is based on the visible URL slug let's</span>&nbsp;</div></li><li><div>      <span class="comment">// check the component being passed and see if its root_slug matches.</span>&nbsp;</div></li><li><div>      } elseif ( isset( $bp-&gt;{$component}-&gt;root_slug ) && $bp-&gt;{$component}-&gt;root_slug == $bp-&gt;current_component ) {&nbsp;</div></li><li><div>          $is_current_component = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Because slugs can differ from root_slugs, we should check them too.</span>&nbsp;</div></li><li><div>      } elseif ( isset( $bp-&gt;{$component}-&gt;slug ) && $bp-&gt;{$component}-&gt;slug == $bp-&gt;current_component ) {&nbsp;</div></li><li><div>          $is_current_component = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Next, check to see whether $component is a canonical, </span>&nbsp;</div></li><li><div>      <span class="comment">// non-translatable component name. If so, we can return its</span>&nbsp;</div></li><li><div>      <span class="comment">// corresponding slug from $bp-&gt;active_components.</span>&nbsp;</div></li><li><div>      } elseif ( $key = array_search( $component, $bp-&gt;active_components ) ) {&nbsp;</div></li><li><div>          if ( strstr( $bp-&gt;current_component, $key ) ) {&nbsp;</div></li><li><div>              $is_current_component = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If we haven't found a match yet, check against the root_slugs</span>&nbsp;</div></li><li><div>      <span class="comment">// created by $bp-&gt;pages, as well as the regular slugs.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          foreach ( $bp-&gt;active_components as $id ) {&nbsp;</div></li><li><div>              <span class="comment">// If the $component parameter does not match the current_component, </span>&nbsp;</div></li><li><div>              <span class="comment">// then move along, these are not the droids you are looking for.</span>&nbsp;</div></li><li><div>              if ( empty( $bp-&gt;{$id}-&gt;root_slug ) || $bp-&gt;{$id}-&gt;root_slug != $bp-&gt;current_component ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $id == $component ) {&nbsp;</div></li><li><div>                  $is_current_component = true;&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current page belongs to the specified component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $is_current_component Whether or not the current page belongs to specified component.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component            Name of the component being checked.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_is_current_component', $is_current_component, $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check to see whether the current page matches a given action.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Along with bp_is_current_component() and bp_is_action_variable(), this</span>&nbsp;</div></li><li><div><span class="comment"> * function is mostly used to help determine when to use a given screen</span>&nbsp;</div></li><li><div><span class="comment"> * function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * In BP parlance, the current_action is the URL chunk that comes directly</span>&nbsp;</div></li><li><div><span class="comment"> * after the current item slug. E.g., in</span>&nbsp;</div></li><li><div><span class="comment"> *   http://example.com/groups/my-group/members</span>&nbsp;</div></li><li><div><span class="comment"> * the current_action is 'members'.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $action The action being tested against.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current action matches $action.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_current_action( $action = '' ) {&nbsp;</div></li><li><div>  return (bool) ( $action === bp_current_action() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check to see whether the current page matches a given action_variable.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Along with bp_is_current_component() and bp_is_current_action(), this</span>&nbsp;</div></li><li><div><span class="comment"> * function is mostly used to help determine when to use a given screen</span>&nbsp;</div></li><li><div><span class="comment"> * function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * In BP parlance, action_variables are an array made up of the URL chunks</span>&nbsp;</div></li><li><div><span class="comment"> * appearing after the current_action in a URL. For example, </span>&nbsp;</div></li><li><div><span class="comment"> *   http://example.com/groups/my-group/admin/group-settings</span>&nbsp;</div></li><li><div><span class="comment"> * $action_variables[0] is 'group-settings'.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string   $action_variable The action_variable being tested against.</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|bool $position        Optional. The array key you're testing against. If you</span>&nbsp;</div></li><li><div><span class="comment"> *                                  don't provide a $position, the function will return true if the</span>&nbsp;</div></li><li><div><span class="comment"> *                                  $action_variable is found *anywhere* in the action variables array.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if $action_variable matches at the $position provided.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_action_variable( $action_variable = '', $position = false ) {&nbsp;</div></li><li><div>  $is_action_variable = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== $position ) {&nbsp;</div></li><li><div>      <span class="comment">// When a $position is specified, check that slot in the action_variables array.</span>&nbsp;</div></li><li><div>      if ( $action_variable ) {&nbsp;</div></li><li><div>          $is_action_variable = $action_variable == bp_action_variable( $position );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          <span class="comment">// If no $action_variable is provided, we are essentially checking to see</span>&nbsp;</div></li><li><div>          <span class="comment">// whether the slot is empty.</span>&nbsp;</div></li><li><div>          $is_action_variable = !bp_action_variable( $position );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      <span class="comment">// When no $position is specified, check the entire array.</span>&nbsp;</div></li><li><div>      $is_action_variable = in_array( $action_variable, (array)bp_action_variables() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether the current page matches a given action_variable.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $is_action_variable Whether the current page matches a given action_variable.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $action_variable    The action_variable being tested against.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $position           The array key tested against.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_is_action_variable', $is_action_variable, $action_variable, $position );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check against the current_item.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $item The item being checked.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if $item is the current item.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_current_item( $item = '' ) {&nbsp;</div></li><li><div>  $retval = ( $item === bp_current_item() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not an item is the current item.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $retval Whether or not an item is the current item.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $item   The item being checked.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_current_item', $retval, $item );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Are we looking at a single item? (group, user, etc).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if looking at a single item, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_single_item() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $bp-&gt;is_single_item ) ) {&nbsp;</div></li><li><div>      $retval = $bp-&gt;is_single_item;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not an item is the a single item. (group, user, etc)</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not an item is a single item.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_single_item', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the logged-in user an admin for the current item?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current user is an admin for the current item, </span>&nbsp;</div></li><li><div><span class="comment"> *              otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_item_admin() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $bp-&gt;is_item_admin ) ) {&nbsp;</div></li><li><div>      $retval = $bp-&gt;is_item_admin;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the logged-in user is an admin for the current item.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not the logged-in user is an admin.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_item_admin', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the logged-in user a mod for the current item?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current user is a mod for the current item, </span>&nbsp;</div></li><li><div><span class="comment"> *              otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_item_mod() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $bp-&gt;is_item_mod ) ) {&nbsp;</div></li><li><div>      $retval = $bp-&gt;is_item_mod;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the logged-in user is a mod for the current item.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not the logged-in user is a mod.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_item_mod', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a component directory page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a component directory, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_directory() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $bp-&gt;is_directory ) ) {&nbsp;</div></li><li><div>      $retval = $bp-&gt;is_directory;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not user is on a component directory page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not user is on a component directory page.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_directory', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check to see if a component's URL should be in the root, not under a member page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * - Yes ('groups' is root)    : http://example.com/groups/the-group</span>&nbsp;</div></li><li><div><span class="comment"> * - No  ('groups' is not-root): http://example.com/members/andy/groups/the-group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is on the chopping block. It's currently only used by a few</span>&nbsp;</div></li><li><div><span class="comment"> * already deprecated functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component_name Component name to check.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if root component, else false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_root_component( $component_name = '' ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Default to the current component if none is passed.</span></span></span>&nbsp;</div></li><li><div>  if ( empty( $component_name ) ) {&nbsp;</div></li><li><div>      $component_name = bp_current_component();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through active components and check for key/slug matches.</span>&nbsp;</div></li><li><div>  if ( ! empty( $bp-&gt;active_components ) ) {&nbsp;</div></li><li><div>      foreach ( (array) $bp-&gt;active_components as $key =&gt; $slug ) {&nbsp;</div></li><li><div>          if ( ( $key === $component_name ) || ( $slug === $component_name ) ) {&nbsp;</div></li><li><div>              $retval = true;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not a component's URL should be in the root, not under a member page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not URL should be in the root.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_root_component', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if the specified BuddyPress component directory is set to be the front page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Corresponds to the setting in wp-admin's Settings &gt; Reading screen.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @global int $current_blog WordPress global for the current blog.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Optional. Name of the component to check for.</span>&nbsp;</div></li><li><div><span class="comment"> *                          Default: current component.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the specified component is set to be the site's front</span>&nbsp;</div></li><li><div><span class="comment"> *              page, otherwise false.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_component_front_page( $component = '' ) {&nbsp;</div></li><li><div>  global $current_blog;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Default to the current component if none is passed.</span></span></span>&nbsp;</div></li><li><div>  if ( empty( $component ) ) {&nbsp;</div></li><li><div>      $component = bp_current_component();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the path for the current blog/site.</span>&nbsp;</div></li><li><div>  $path = is_main_site()&nbsp;</div></li><li><div>      ? bp_core_get_site_path()&nbsp;</div></li><li><div>      : $current_blog-&gt;path;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the front page variables.</span>&nbsp;</div></li><li><div>  $show_on_front = get_option( 'show_on_front' );&nbsp;</div></li><li><div>  $page_on_front = get_option( 'page_on_front' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ( 'page' !== $show_on_front ) || empty( $component ) || empty( $bp-&gt;pages-&gt;{$component} ) || ( $_SERVER['REQUEST_URI'] !== $path ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not the specified BuddyPress component directory is set to be the front page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $value     Whether or not the specified component directory is set as front page.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component Current component being checked.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_component_front_page', ( $bp-&gt;pages-&gt;{$component}-&gt;id == $page_on_front ), $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a blog page, ie a non-BP page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * You can tell if a page is displaying BP content by whether the</span>&nbsp;</div></li><li><div><span class="comment"> * current_component has been defined.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if it's a non-BP page, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_blog_page() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $is_blog_page = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Generally, we can just check to see that there's no current component.</span>&nbsp;</div></li><li><div>  <span class="comment">// The one exception is single user home tabs, where $bp-&gt;current_component</span>&nbsp;</div></li><li><div>  <span class="comment">// is unset. Thus the addition of the bp_is_user() check.</span>&nbsp;</div></li><li><div>  if ( ! bp_current_component() && ! bp_is_user() ) {&nbsp;</div></li><li><div>      $is_blog_page = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not current page is a blog page or not.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $is_blog_page Whether or not current page is a blog page.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (bool) apply_filters( 'bp_is_blog_page', $is_blog_page );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a BuddyPress component?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * You can tell if a page is displaying BP content by whether the</span>&nbsp;</div></li><li><div><span class="comment"> * current_component has been defined.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Generally, we can just check to see that there's no current component.</span>&nbsp;</div></li><li><div><span class="comment"> * The one exception is single user home tabs, where $bp-&gt;current_component</span>&nbsp;</div></li><li><div><span class="comment"> * is unset. Thus the addition of the bp_is_user() check.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if it's a BuddyPress page, false otherwise.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_buddypress() {&nbsp;</div></li><li><div>  $retval = (bool) ( bp_current_component() || bp_is_user() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not this is a BuddyPress component.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $retval Whether or not this is a BuddyPress component.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'is_buddypress', $retval );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Components ****************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether a given component (or feature of a component) is active.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0 See r2539.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0 Added $feature as a parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component The component name.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $feature   The feature name.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_active( $component = '', $feature = '' ) {&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment"><span class="comment"><span class="comment">// Default to the current component if none is passed.</span></span></span>&nbsp;</div></li><li><div>  if ( empty( $component ) ) {&nbsp;</div></li><li><div>      $component = bp_current_component();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Is component in either the active or required components arrays.</span>&nbsp;</div></li><li><div>  if ( isset( buddypress()-&gt;active_components[ $component ] ) || isset( buddypress()-&gt;required_components[ $component ] ) ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Is feature active?</span>&nbsp;</div></li><li><div>      if ( ! empty( $feature ) ) {&nbsp;</div></li><li><div>          <span class="comment">// The xProfile component is specific.</span>&nbsp;</div></li><li><div>          if ( 'xprofile' === $component ) {&nbsp;</div></li><li><div>              $component = 'profile';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty( buddypress()-&gt;$component-&gt;features ) || false === in_array( $feature, buddypress()-&gt;$component-&gt;features, true ) ) {&nbsp;</div></li><li><div>              $retval = false;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Filters whether or not a given feature for a component is active.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * This is a variable filter that is based on the component and feature</span>&nbsp;</div></li><li><div><span class="comment">           * that you are checking of active status of.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @param bool $retval</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $retval = apply_filters( &quot;bp_is_{$component}_{$feature}_active&quot;, $retval );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not a given component has been activated by the admin.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $retval    Whether or not a given component has been activated by the admin.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $component Current component being checked.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_is_active', $retval, $component );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Members component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Members component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_members_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'members' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Profile component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Profile component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_profile_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'xprofile' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Activity component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Activity component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_activity_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'activity' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Blogs component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Blogs component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_blogs_component() {&nbsp;</div></li><li><div>  return (bool) ( is_multisite() && bp_is_current_component( 'blogs' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Messages component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Messages component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_messages_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'messages' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Friends component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Friends component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_friends_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'friends' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Groups component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Groups component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_groups_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'groups' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Forums component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Forums component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_forums_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'forums' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Notifications component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Notifications component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_notifications_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'notifications' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether the current page is part of the Settings component.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the Settings component.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_settings_component() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'settings' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current component an active core component?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Use this function when you need to check if the current component is an</span>&nbsp;</div></li><li><div><span class="comment"> * active core component of BuddyPress. If the current component is inactive, it</span>&nbsp;</div></li><li><div><span class="comment"> * will return false. If the current component is not part of BuddyPress core, </span>&nbsp;</div></li><li><div><span class="comment"> * it will return false. If the current component is active, and is part of</span>&nbsp;</div></li><li><div><span class="comment"> * BuddyPress core, it will return true.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current component is active and is one of BP's</span>&nbsp;</div></li><li><div><span class="comment"> *              packaged components.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_current_component_core() {&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( bp_core_get_packaged_component_ids() as $active_component ) {&nbsp;</div></li><li><div>      if ( bp_is_current_component( $active_component ) ) {&nbsp;</div></li><li><div>          $retval = true;&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $retval;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Activity ******************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the activity directory?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the activity directory.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_activity_directory() {&nbsp;</div></li><li><div>  if ( ! bp_displayed_user_id() && bp_is_activity_component() && ! bp_current_action() ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a single activity item permalink?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a single activity item permalink.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_single_activity() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_activity_component() && is_numeric( bp_current_action() ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** User **********************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the members directory?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the members directory.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_members_directory() {&nbsp;</div></li><li><div>  if ( ! bp_is_user() && bp_is_members_component() ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of the profile of the logged-in user?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will return true for any subpage of the logged-in user's profile, eg</span>&nbsp;</div></li><li><div><span class="comment"> * http://example.com/members/joe/friends/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the profile of the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_my_profile() {&nbsp;</div></li><li><div>  if ( is_user_logged_in() && bp_loggedin_user_id() == bp_displayed_user_id() ) {&nbsp;</div></li><li><div>      $my_profile = true;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $my_profile = false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters whether or not current page is part of the profile for the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.2.4</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool $my_profile Whether or not current page is part of the profile for the logged-in user.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_is_my_profile', $my_profile );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will return true anytime there is a displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user() {&nbsp;</div></li><li><div>  return (bool) bp_displayed_user_id();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user custom front page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will return true anytime there is a custom front page for the displayed user.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user custom front page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_front() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_current_component( 'front' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's activity stream page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/activity/ (or any subpages thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's activity stream page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_activity() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_activity_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Friends activity stream?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/friends/</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Friends activity stream.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_friends_activity() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! bp_is_active( 'friends' ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $slug = bp_get_friends_slug();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $slug ) ) {&nbsp;</div></li><li><div>      $slug = 'friends';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_user_activity() && bp_is_current_action( $slug ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Groups activity stream?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/groups/</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Groups activity stream.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_groups_activity() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! bp_is_active( 'groups' ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $slug = ( bp_get_groups_slug() )&nbsp;</div></li><li><div>      ? bp_get_groups_slug()&nbsp;</div></li><li><div>      : 'groups';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_user_activity() && bp_is_current_action( $slug ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's extended profile?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/profile/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a user's extended profile.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_profile() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_profile_component() || bp_is_current_component( 'profile' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's profile editing section?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/profile/edit/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's profile edit page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_profile_edit() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_profile_component() && bp_is_current_action( 'edit' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's profile avatar editing section?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/profile/change-avatar/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the user's avatar edit page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_change_avatar() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_profile_component() && bp_is_current_action( 'change-avatar' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the a user's change cover image profile page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/profile/change-cover-image/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's profile edit cover image page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_change_cover_image() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_profile_component() && bp_is_current_action( 'change-cover-image' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's forums page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/forums/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's forums page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_forums() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! bp_is_active( 'forums' ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_user() && bp_is_forums_component() ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's &quot;Topics Started&quot; page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/forums/topics/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Topics Started page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_forums_started() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_forums() && bp_is_current_action( 'topics' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's &quot;Replied To&quot; page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/forums/replies/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Replied To forums page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_forums_replied_to() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_forums() && bp_is_current_action( 'replies' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's Groups page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/groups/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Groups page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_groups() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_groups_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's Blogs page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/blogs/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Blogs page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_blogs() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_blogs_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Recent Blog Posts page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/blogs/recent-posts/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Recent Blog Posts page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_recent_posts() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_blogs() && bp_is_current_action( 'recent-posts' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Recent Blog Comments page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/blogs/recent-comments/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Recent Blog Comments page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_recent_commments() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_blogs() && bp_is_current_action( 'recent-comments' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Friends page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/blogs/friends/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Friends page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_friends() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_friends_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Friend Requests page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/friends/requests/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Friends Requests page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_friend_requests() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_friends() && bp_is_current_action( 'requests' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's notifications page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/notifications/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.9.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Notifications page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_notifications() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_notifications_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's settings page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/settings/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Settings page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_settings() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_settings_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's General Settings page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/settings/general/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's General Settings page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_settings_general() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_settings() && bp_is_current_action( 'general' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's Notification Settings page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/settings/notifications/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Notification Settings page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_settings_notifications() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_settings() && bp_is_current_action( 'notifications' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's Account Deletion page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/settings/delete-account/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Delete Account page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_settings_account_delete() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_settings() && bp_is_current_action( 'delete-account' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is this a user's profile settings?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/settings/profile/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Profile Settings page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_settings_profile() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_settings() && bp_is_current_action( 'profile' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Groups ********************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the groups directory?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return True if the current page is the groups directory.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_groups_directory() {&nbsp;</div></li><li><div>  if ( bp_is_groups_component() && ! bp_is_group() && ( ! bp_current_action() || ( bp_action_variable() && bp_is_current_action( bp_get_groups_group_type_base() ) ) ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Does the current page belong to a single group?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Will return true for any subpage of a single group.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a single group.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group() {&nbsp;</div></li><li><div>  $retval = bp_is_active( 'groups' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $retval ) ) {&nbsp;</div></li><li><div>      $retval = bp_is_groups_component() && groups_get_current_group();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return (bool) $retval;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a single group's home page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * URL will vary depending on which group tab is set to be the &quot;home&quot;. By</span>&nbsp;</div></li><li><div><span class="comment"> * default, it's the group's recent activity.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a single group's home page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_home() {&nbsp;</div></li><li><div>  if ( bp_is_single_item() && bp_is_groups_component() && ( ! bp_current_action() || bp_is_current_action( 'home' ) ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of the group creation process?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of the group creation process.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_create() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_groups_component() && bp_is_current_action( 'create' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a single group's admin screens?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/groups/mygroup/admin/settings/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a single group's admin.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_admin_page() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'admin' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group's forum page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Only applies to legacy bbPress forums.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a group forum page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_forum() {&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// At a forum URL.</span>&nbsp;</div></li><li><div>  if ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'forum' ) ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If at a forum URL, set back to false if forums are inactive, or not</span>&nbsp;</div></li><li><div>      <span class="comment">// installed correctly.</span>&nbsp;</div></li><li><div>      if ( ! bp_is_active( 'forums' ) || ! bp_forums_is_installed_correctly() ) {&nbsp;</div></li><li><div>          $retval = false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $retval;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group's activity page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return True if the current page is a group's activity page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_activity() {&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'activity' ) ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_group_home() && bp_is_active( 'activity' ) && ! bp_is_group_custom_front() ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $retval;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group forum topic?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Only applies to legacy bbPress (1.x) forums.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a group forum topic.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_forum_topic() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'forum' ) && bp_is_action_variable( 'topic', 0 ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group forum topic edit page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Only applies to legacy bbPress (1.x) forums.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a group forum topic edit page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_forum_topic_edit() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'forum' ) && bp_is_action_variable( 'topic', 0 ) && bp_is_action_variable( 'edit', 2 ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group's Members page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/groups/mygroup/members/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a group's Members page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_members() {&nbsp;</div></li><li><div>  $retval = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_single_item() && bp_is_groups_component() && bp_is_current_action( 'members' ) ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_group_home() && ! bp_is_active( 'activity' ) && ! bp_is_group_custom_front() ) {&nbsp;</div></li><li><div>      $retval = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $retval;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group's Invites page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/groups/mygroup/send-invites/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a group's Send Invites page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_invites() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_groups_component() && bp_is_current_action( 'send-invites' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a group's Request Membership page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/groups/mygroup/request-membership/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a group's Request Membership page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_membership_request() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_groups_component() && bp_is_current_action( 'request-membership' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a leave group attempt?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a Leave Group attempt.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_leave() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_groups_component() && bp_is_single_item() && bp_is_current_action( 'leave-group' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a single group?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used by BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @todo How is this functionally different from bp_is_group()?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a single group.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_single() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_groups_component() && bp_is_single_item() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current group page a custom front?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current group page is a custom front.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_group_custom_front() {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  return (bool) bp_is_group_home() && ! empty( $bp-&gt;groups-&gt;current_group-&gt;front_template );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the Create a Blog page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/sites/create/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the Create a Blog page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_create_blog() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_blogs_component() && bp_is_current_action( 'create' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the blogs directory ?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return True if the current page is the blogs directory.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_blogs_directory() {&nbsp;</div></li><li><div>  if ( is_multisite() && bp_is_blogs_component() && ! bp_current_action() ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Messages ******************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page part of a user's Messages pages?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/messages/ (or a subpage thereof).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is part of a user's Messages pages.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_user_messages() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user() && bp_is_messages_component() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Messages Inbox?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/messages/inbox/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Messages Inbox.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_messages_inbox() {&nbsp;</div></li><li><div>  if ( bp_is_user_messages() && ( ! bp_current_action() || bp_is_current_action( 'inbox' ) ) ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Messages Sentbox?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/messages/sentbox/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Messages Sentbox.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_messages_sentbox() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_messages() && bp_is_current_action( 'sentbox' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a user's Messages Compose screen??</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/messages/compose/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is a user's Messages Compose screen.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_messages_compose_screen() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_messages() && bp_is_current_action( 'compose' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the Notices screen?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/members/joe/messages/notices/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the Notices screen.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_notices() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_messages() && bp_is_current_action( 'notices' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page a single Messages conversation thread?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.6.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page a single Messages conversation thread?</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_messages_conversation() {&nbsp;</div></li><li><div>  return (bool) ( bp_is_user_messages() && ( bp_is_current_action( 'view' ) ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Not currently used by BuddyPress.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Current component to check for.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback  Callback to invoke.</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_single( $component, $callback ) {&nbsp;</div></li><li><div>  return (bool) ( bp_is_current_component( $component ) && ( true === call_user_func( $callback ) ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Registration **************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the Activate page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/activate/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the Activate page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_activation_page() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'activate' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Is the current page the Register page?</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Eg http://example.com/register/.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool True if the current page is the Register page.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_is_register_page() {&nbsp;</div></li><li><div>  return (bool) bp_is_current_component( 'register' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the title parts of the BuddyPress displayed page</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.3</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $seplocation Location for the separator.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array the title parts</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_title_parts( $seplocation = 'right' ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Defaults to an empty array.</span>&nbsp;</div></li><li><div>  $bp_title_parts = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If this is not a BP page, return the empty array.</span>&nbsp;</div></li><li><div>  if ( bp_is_blog_page() ) {&nbsp;</div></li><li><div>      return $bp_title_parts;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If this is a 404, return the empty array.</span>&nbsp;</div></li><li><div>  if ( is_404() ) {&nbsp;</div></li><li><div>      return $bp_title_parts;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If this is the front page of the site, return the empty array.</span>&nbsp;</div></li><li><div>  if ( is_front_page() || is_home() ) {&nbsp;</div></li><li><div>      return $bp_title_parts;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Return the empty array if not a BuddyPress page.</span>&nbsp;</div></li><li><div>  if ( ! is_buddypress() ) {&nbsp;</div></li><li><div>      return $bp_title_parts;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Now we can build the BP Title Parts</span>&nbsp;</div></li><li><div>  <span class="comment">// Is there a displayed user, and do they have a name?</span>&nbsp;</div></li><li><div>  $displayed_user_name = bp_get_displayed_user_fullname();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Displayed user.</span>&nbsp;</div></li><li><div>  if ( ! empty( $displayed_user_name ) && ! is_404() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Get the component's ID to try and get its name.</span>&nbsp;</div></li><li><div>      $component_id = $component_name = bp_current_component();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Set empty subnav name.</span>&nbsp;</div></li><li><div>      $component_subnav_name = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bp-&gt;members-&gt;nav ) ) {&nbsp;</div></li><li><div>          $primary_nav_item = $bp-&gt;members-&gt;nav-&gt;get_primary( array( 'slug' =&gt; $component_id ), false );&nbsp;</div></li><li><div>          $primary_nav_item = reset( $primary_nav_item );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Use the component nav name.</span>&nbsp;</div></li><li><div>      if ( ! empty( $primary_nav_item-&gt;name ) ) {&nbsp;</div></li><li><div>          $component_name = _bp_strip_spans_from_title( $primary_nav_item-&gt;name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Fall back on the component ID.</span>&nbsp;</div></li><li><div>      } elseif ( ! empty( $bp-&gt;{$component_id}-&gt;id ) ) {&nbsp;</div></li><li><div>          $component_name = ucwords( $bp-&gt;{$component_id}-&gt;id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bp-&gt;members-&gt;nav ) ) {&nbsp;</div></li><li><div>          $secondary_nav_item = $bp-&gt;members-&gt;nav-&gt;get_secondary( array(&nbsp;</div></li><li><div>              'parent_slug' =&gt; $component_id, &nbsp;</div></li><li><div>              'slug' =&gt; bp_current_action()&nbsp;</div></li><li><div> ), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $secondary_nav_item ) {&nbsp;</div></li><li><div>              $secondary_nav_item = reset( $secondary_nav_item );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Append action name if we're on a member component sub-page.</span>&nbsp;</div></li><li><div>      if ( ! empty( $secondary_nav_item-&gt;name ) && ! empty( $bp-&gt;canonical_stack['action'] ) ) {&nbsp;</div></li><li><div>          $component_subnav_name = $secondary_nav_item-&gt;name;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If on the user profile's landing page, just use the fullname.</span>&nbsp;</div></li><li><div>      if ( bp_is_current_component( $bp-&gt;default_component ) && ( bp_get_requested_url() === bp_displayed_user_domain() ) ) {&nbsp;</div></li><li><div>          $bp_title_parts[] = $displayed_user_name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Use component name on member pages.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $bp_title_parts = array_merge( $bp_title_parts, array_map( 'strip_tags', array(&nbsp;</div></li><li><div>              $displayed_user_name, &nbsp;</div></li><li><div>              $component_name, &nbsp;</div></li><li><div> ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If we have a subnav name, add it separately for localization.</span>&nbsp;</div></li><li><div>          if ( ! empty( $component_subnav_name ) ) {&nbsp;</div></li><li><div>              $bp_title_parts[] = strip_tags( $component_subnav_name );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// A single item from a component other than Members.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_single_item() ) {&nbsp;</div></li><li><div>      $component_id = bp_current_component();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bp-&gt;{$component_id}-&gt;nav ) ) {&nbsp;</div></li><li><div>          $secondary_nav_item = $bp-&gt;{$component_id}-&gt;nav-&gt;get_secondary( array(&nbsp;</div></li><li><div>              'parent_slug' =&gt; bp_current_item(), &nbsp;</div></li><li><div>              'slug' =&gt; bp_current_action()&nbsp;</div></li><li><div> ), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $secondary_nav_item ) {&nbsp;</div></li><li><div>              $secondary_nav_item = reset( $secondary_nav_item );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $single_item_subnav = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $secondary_nav_item-&gt;name ) ) {&nbsp;</div></li><li><div>          $single_item_subnav = $secondary_nav_item-&gt;name;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bp_title_parts = array( $bp-&gt;bp_options_title, $single_item_subnav );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// An index or directory.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_directory() ) {&nbsp;</div></li><li><div>      $current_component = bp_current_component();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// No current component (when does this happen?).</span>&nbsp;</div></li><li><div>      $bp_title_parts = array( _x( 'Directory', 'component directory title', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $current_component ) ) {&nbsp;</div></li><li><div>          $bp_title_parts = array( bp_get_directory_title( $current_component ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Sign up page.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_register_page() ) {&nbsp;</div></li><li><div>      $bp_title_parts = array( __( 'Create an Account', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Activation page.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_activation_page() ) {&nbsp;</div></li><li><div>      $bp_title_parts = array( __( 'Activate Your Account', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Group creation page.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_group_create() ) {&nbsp;</div></li><li><div>      $bp_title_parts = array( __( 'Create a Group', 'buddypress' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Blog creation page.</span>&nbsp;</div></li><li><div>  } elseif ( bp_is_create_blog() ) {&nbsp;</div></li><li><div>      $bp_title_parts = array( __( 'Create a Site', 'buddypress' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Strip spans.</span>&nbsp;</div></li><li><div>  $bp_title_parts = array_map( '_bp_strip_spans_from_title', $bp_title_parts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Sep on right, so reverse the order.</span>&nbsp;</div></li><li><div>  if ( 'right' === $seplocation ) {&nbsp;</div></li><li><div>      $bp_title_parts = array_reverse( $bp_title_parts );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filter BuddyPress title parts before joining.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.4.3</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $bp_title_parts Current BuddyPress title parts.</span>&nbsp;</div></li><li><div><span class="comment">   * @return array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return (array) apply_filters( 'bp_get_title_parts', $bp_title_parts );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Customize the body class, according to the currently displayed BP content.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_the_body_class() {&nbsp;</div></li><li><div>  echo bp_get_the_body_class();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Customize the body class, according to the currently displayed BP content.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Uses the above is_() functions to output a body class for each scenario.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array      $wp_classes     The body classes coming from WP.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array|bool $custom_classes Classes that were passed to get_body_class().</span>&nbsp;</div></li><li><div><span class="comment">   * @return array $classes The BP-adjusted body classes.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_get_the_body_class( $wp_classes = array(), $custom_classes = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bp_classes = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Pages *************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_front_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'home-page';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_directory() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'directory';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_single_item() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'single-item';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Components ********************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! bp_is_blog_page() ) {&nbsp;</div></li><li><div>          if ( bp_is_user_profile() )  {&nbsp;</div></li><li><div>              $bp_classes[] = 'xprofile';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_activity_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'activity';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_blogs_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'blogs';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_messages_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'messages';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_friends_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'friends';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_groups_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'groups';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_settings_component() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'settings';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** User **************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'bp-user';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Add current user member types.</span>&nbsp;</div></li><li><div>          if ( $member_types = bp_get_member_type( bp_displayed_user_id(), false ) ) {&nbsp;</div></li><li><div>              foreach( $member_types as $member_type ) {&nbsp;</div></li><li><div>                  $bp_classes[] = sprintf( 'member-type-%s', esc_attr( $member_type ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! bp_is_directory() ) {&nbsp;</div></li><li><div>          if ( bp_is_user_blogs() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'my-blogs';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_user_groups() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'my-groups';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( bp_is_user_activity() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'my-activity';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          if ( bp_get_current_member_type() ) {&nbsp;</div></li><li><div>              $bp_classes[] = 'type';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_my_profile() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'my-account';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_profile() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'my-profile';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_friends() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'my-friends';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_messages() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'my-messages';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_recent_commments() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'recent-comments';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_recent_posts() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'recent-posts';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_change_avatar() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'change-avatar';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_profile_edit() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'profile-edit';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_friends_activity() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'friends-activity';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_groups_activity() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'groups-activity';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Messages **********************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_messages_inbox() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'inbox';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_messages_sentbox() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'sentbox';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_messages_compose_screen() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'compose';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_notices() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'notices';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_user_friend_requests() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'friend-requests';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_create_blog() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'create-blog';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Groups ************************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-' . groups_get_current_group()-&gt;slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Add current group types.</span>&nbsp;</div></li><li><div>          if ( $group_types = bp_groups_get_group_type( bp_get_current_group_id(), false ) ) {&nbsp;</div></li><li><div>              foreach ( $group_types as $group_type ) {&nbsp;</div></li><li><div>                  $bp_classes[] = sprintf( 'group-type-%s', esc_attr( $group_type ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_leave() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'leave-group';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_invites() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-invites';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_members() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-members';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_forum_topic() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-forum-topic';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_forum_topic_edit() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-forum-topic-edit';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_forum() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-forum';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_admin_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-admin';&nbsp;</div></li><li><div>          $bp_classes[] = bp_get_group_current_admin_tab();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_create() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-create';&nbsp;</div></li><li><div>          $bp_classes[] = bp_get_groups_current_create_step();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_group_home() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'group-home';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_single_activity() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'activity-permalink';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Registration ******************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_register_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'registration';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( bp_is_activation_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'activation';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Current Component & Action ****************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! bp_is_blog_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = bp_current_component();&nbsp;</div></li><li><div>          $bp_classes[] = bp_current_action();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** Clean up ***********************************************************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add BuddyPress class if we are within a BuddyPress page.</span>&nbsp;</div></li><li><div>      if ( ! bp_is_blog_page() ) {&nbsp;</div></li><li><div>          $bp_classes[] = 'buddypress';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Merge WP classes with BuddyPress classes and remove any duplicates.</span>&nbsp;</div></li><li><div>      $classes = array_unique( array_merge( (array) $bp_classes, (array) $wp_classes ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the BuddyPress classes to be added to body_class()</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.1.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $classes        Array of body classes to add.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $bp_classes     Array of BuddyPress-based classes.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $wp_classes     Array of WordPress-based classes.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $custom_classes Array of classes that were passed to get_body_class().</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_get_the_body_class', $classes, $bp_classes, $wp_classes, $custom_classes );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  add_filter( 'body_class', 'bp_get_the_body_class', 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Customizes the post CSS class according to BuddyPress content.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Hooked to the 'post_class' filter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $wp_classes The post classes coming from WordPress.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_the_post_class( $wp_classes = array() ) {&nbsp;</div></li><li><div>  <span class="comment">// Don't do anything if we're not on a BP page.</span>&nbsp;</div></li><li><div>  if ( ! is_buddypress() ) {&nbsp;</div></li><li><div>      return $wp_classes;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $bp_classes = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( bp_is_user() || bp_is_single_activity() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_members';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_group() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_group';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_activity_component() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_activity';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_blogs_component() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_blogs';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_register_page() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_register';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_activation_page() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_activate';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( bp_is_forums_component() && bp_is_directory() ) {&nbsp;</div></li><li><div>      $bp_classes[] = 'bp_forum';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $bp_classes ) ) {&nbsp;</div></li><li><div>      return $wp_classes;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Emulate post type css class.</span>&nbsp;</div></li><li><div>  foreach ( $bp_classes as $bp_class ) {&nbsp;</div></li><li><div>      $bp_classes[] = &quot;type-{$bp_class}&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Okay let's merge!</span>&nbsp;</div></li><li><div>  return array_unique( array_merge( $bp_classes, $wp_classes ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'post_class', 'bp_get_the_post_class' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Sort BuddyPress nav menu items by their position property.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is an internal convenience function and it will probably be removed in</span>&nbsp;</div></li><li><div><span class="comment"> * a later release. Do not use.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @access private</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $a First item.</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $b Second item.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int Returns an integer less than, equal to, or greater than zero if</span>&nbsp;</div></li><li><div><span class="comment"> *             the first argument is considered to be respectively less than, </span>&nbsp;</div></li><li><div><span class="comment"> *             equal to, or greater than the second.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function _bp_nav_menu_sort( $a, $b ) {&nbsp;</div></li><li><div>  if ( $a['position'] == $b['position'] ) {&nbsp;</div></li><li><div>      return 0;&nbsp;</div></li><li><div>  } elseif ( $a['position'] &lt; $b['position'] ) {&nbsp;</div></li><li><div>      return -1;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return 1;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the items registered in the primary and secondary BuddyPress navigation menus.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0 Introduced the `$component` parameter.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Optional. Component whose nav items are being fetched.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array A multidimensional array of all navigation items.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_get_nav_menu_items( $component = 'members' ) {&nbsp;</div></li><li><div>  $bp = buddypress();&nbsp;</div></li><li><div>  $menus = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! isset( $bp-&gt;{$component}-&gt;nav ) ) {&nbsp;</div></li><li><div>      return $menus;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get the item nav and build the menus.</span>&nbsp;</div></li><li><div>  foreach ( $bp-&gt;{$component}-&gt;nav-&gt;get_item_nav() as $nav_menu ) {&nbsp;</div></li><li><div>      <span class="comment">// Get the correct menu link. See https://buddypress.trac.wordpress.org/ticket/4624.</span>&nbsp;</div></li><li><div>      $link = bp_loggedin_user_domain() ? str_replace( bp_loggedin_user_domain(), bp_displayed_user_domain(), $nav_menu-&gt;link ) : trailingslashit( bp_displayed_user_domain() . $nav_menu-&gt;link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add this menu.</span>&nbsp;</div></li><li><div>      $menu = new stdClass;&nbsp;</div></li><li><div>      $menu-&gt;class = array( 'menu-parent' );&nbsp;</div></li><li><div>      $menu-&gt;css_id = $nav_menu-&gt;css_id;&nbsp;</div></li><li><div>      $menu-&gt;link = $link;&nbsp;</div></li><li><div>      $menu-&gt;name = $nav_menu-&gt;name;&nbsp;</div></li><li><div>      $menu-&gt;parent = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $nav_menu-&gt;children ) ) {&nbsp;</div></li><li><div>          $submenus = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach( $nav_menu-&gt;children as $sub_menu ) {&nbsp;</div></li><li><div>              $submenu = new stdClass;&nbsp;</div></li><li><div>              $submenu-&gt;class = array( 'menu-child' );&nbsp;</div></li><li><div>              $submenu-&gt;css_id = $sub_menu-&gt;css_id;&nbsp;</div></li><li><div>              $submenu-&gt;link = $sub_menu-&gt;link;&nbsp;</div></li><li><div>              $submenu-&gt;name = $sub_menu-&gt;name;&nbsp;</div></li><li><div>              $submenu-&gt;parent = $nav_menu-&gt;slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// If we're viewing this item's screen, record that we need to mark its parent menu to be selected.</span>&nbsp;</div></li><li><div>              if ( $sub_menu-&gt;slug == bp_current_action() ) {&nbsp;</div></li><li><div>                  $menu-&gt;class[] = 'current-menu-parent';&nbsp;</div></li><li><div>                  $submenu-&gt;class[] = 'current-menu-item';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $submenus[] = $submenu;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $menus[] = $menu;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $submenus ) ) {&nbsp;</div></li><li><div>          $menus = array_merge( $menus, $submenus );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the items registered in the primary and secondary BuddyPress navigation menus.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $menus Array of items registered in the primary and secondary BuddyPress navigation.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  return apply_filters( 'bp_get_nav_menu_items', $menus );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display a navigation menu.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $args {</span>&nbsp;</div></li><li><div><span class="comment"> *     An array of optional arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $after           Text after the link text. Default: ''.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $before          Text before the link text. Default: ''.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $container       The name of the element to wrap the navigation</span>&nbsp;</div></li><li><div><span class="comment"> *                                   with. 'div' or 'nav'. Default: 'div'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $container_class The class that is applied to the container.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default: 'menu-bp-container'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $container_id    The ID that is applied to the container.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default: ''.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type int    $depth           How many levels of the hierarchy are to be included.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   0 means all. Default: 0.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $echo            True to echo the menu, false to return it.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default: true.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type bool   $fallback_cb     If the menu doesn't exist, should a callback</span>&nbsp;</div></li><li><div><span class="comment"> *                                   function be fired? Default: false (no fallback).</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $items_wrap      How the list items should be wrapped. Should be</span>&nbsp;</div></li><li><div><span class="comment"> *                                   in the form of a printf()-friendly string, using numbered</span>&nbsp;</div></li><li><div><span class="comment"> *                                   placeholders. Default: '&lt;ul id=&quot;%1$s&quot; class=&quot;%2$s&quot;&gt;%3$s&lt;/ul&gt;'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $link_after      Text after the link. Default: ''.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $link_before     Text before the link. Default: ''.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $menu_class      CSS class to use for the &lt;ul&gt; element which</span>&nbsp;</div></li><li><div><span class="comment"> *                                   forms the menu. Default: 'menu'.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $menu_id         The ID that is applied to the &lt;ul&gt; element which</span>&nbsp;</div></li><li><div><span class="comment"> *                                   forms the menu. Default: 'menu-bp', incremented.</span>&nbsp;</div></li><li><div><span class="comment"> *     @type string $walker          Allows a custom walker class to be specified.</span>&nbsp;</div></li><li><div><span class="comment"> *                                   Default: 'BP_Walker_Nav_Menu'.</span>&nbsp;</div></li><li><div><span class="comment"> * }</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|null If $echo is false, returns a string containing the nav</span>&nbsp;</div></li><li><div><span class="comment"> *                     menu markup.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_nav_menu( $args = array() ) {&nbsp;</div></li><li><div>  static $menu_id_slugs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'after' =&gt; '', &nbsp;</div></li><li><div>      'before' =&gt; '', &nbsp;</div></li><li><div>      'container' =&gt; 'div', &nbsp;</div></li><li><div>      'container_class' =&gt; '', &nbsp;</div></li><li><div>      'container_id' =&gt; '', &nbsp;</div></li><li><div>      'depth' =&gt; 0, &nbsp;</div></li><li><div>      'echo' =&gt; true, &nbsp;</div></li><li><div>      'fallback_cb' =&gt; false, &nbsp;</div></li><li><div>      'items_wrap' =&gt; '&lt;ul id=&quot;%1$s&quot; class=&quot;%2$s&quot;&gt;%3$s&lt;/ul&gt;', &nbsp;</div></li><li><div>      'link_after' =&gt; '', &nbsp;</div></li><li><div>      'link_before' =&gt; '', &nbsp;</div></li><li><div>      'menu_class' =&gt; 'menu', &nbsp;</div></li><li><div>      'menu_id' =&gt; '', &nbsp;</div></li><li><div>      'walker' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  $args = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the parsed bp_nav_menu arguments.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args Array of parsed arguments.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $args = apply_filters( 'bp_nav_menu_args', $args );&nbsp;</div></li><li><div>  $args = (object) $args;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $items = $nav_menu = '';&nbsp;</div></li><li><div>  $show_container = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Create custom walker if one wasn't set.</span>&nbsp;</div></li><li><div>  if ( empty( $args-&gt;walker ) ) {&nbsp;</div></li><li><div>      $args-&gt;walker = new BP_Walker_Nav_Menu;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Sanitise values for class and ID.</span>&nbsp;</div></li><li><div>  $args-&gt;container_class = sanitize_html_class( $args-&gt;container_class );&nbsp;</div></li><li><div>  $args-&gt;container_id = sanitize_html_class( $args-&gt;container_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Whether to wrap the ul, and what to wrap it with.</span>&nbsp;</div></li><li><div>  if ( $args-&gt;container ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters the allowed tags for the wp_nav_menu_container.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $value Array of allowed tags. Default 'div' and 'nav'.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $allowed_tags = apply_filters( 'wp_nav_menu_container_allowedtags', array( 'div', 'nav', ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( in_array( $args-&gt;container, $allowed_tags ) ) {&nbsp;</div></li><li><div>          $show_container = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $class = $args-&gt;container_class ? ' class=&quot;' . esc_attr( $args-&gt;container_class ) . '&quot;' : ' class=&quot;menu-bp-container&quot;';&nbsp;</div></li><li><div>          $id = $args-&gt;container_id    ? ' id=&quot;' . esc_attr( $args-&gt;container_id ) . '&quot;'       : '';&nbsp;</div></li><li><div>          $nav_menu .= '&lt;' . $args-&gt;container . $id . $class . '&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the BuddyPress menu objects.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $value Array of nav menu objects.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args  Array of arguments for the menu.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $menu_items = apply_filters( 'bp_nav_menu_objects', bp_get_nav_menu_items(), $args );&nbsp;</div></li><li><div>  $items = walk_nav_menu_tree( $menu_items, $args-&gt;depth, $args );&nbsp;</div></li><li><div>  unset( $menu_items );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Set the ID that is applied to the ul element which forms the menu.</span>&nbsp;</div></li><li><div>  if ( ! empty( $args-&gt;menu_id ) ) {&nbsp;</div></li><li><div>      $wrap_id = $args-&gt;menu_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $wrap_id = 'menu-bp';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If a specific ID wasn't requested, and there are multiple menus on the same screen, make sure the autogenerated ID is unique.</span>&nbsp;</div></li><li><div>      while ( in_array( $wrap_id, $menu_id_slugs ) ) {&nbsp;</div></li><li><div>          if ( preg_match( '#-(\d+)$#', $wrap_id, $matches ) ) {&nbsp;</div></li><li><div>              $wrap_id = preg_replace('#-(\d+)$#', '-' . ++$matches[1], $wrap_id );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $wrap_id = $wrap_id . '-1';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $menu_id_slugs[] = $wrap_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the BuddyPress menu items.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Allow plugins to hook into the menu to add their own &lt;li&gt;'s</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $items Array of nav menu items.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $args  Array of arguments for the menu.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $items = apply_filters( 'bp_nav_menu_items', $items, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Build the output.</span>&nbsp;</div></li><li><div>  $wrap_class = $args-&gt;menu_class ? $args-&gt;menu_class : '';&nbsp;</div></li><li><div>  $nav_menu   .= sprintf( $args-&gt;items_wrap, esc_attr( $wrap_id ), esc_attr( $wrap_class ), $items );&nbsp;</div></li><li><div>  unset( $items );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If we've wrapped the ul, close it.</span>&nbsp;</div></li><li><div>  if ( ! empty( $show_container ) ) {&nbsp;</div></li><li><div>      $nav_menu .= '&lt;/' . $args-&gt;container . '&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters the final BuddyPress menu output.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.7.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $nav_menu Final nav menu output.</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $args     Array of arguments for the menu.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $nav_menu = apply_filters( 'bp_nav_menu', $nav_menu, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $args-&gt;echo ) ) {&nbsp;</div></li><li><div>      echo $nav_menu;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return $nav_menu;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Prints the Recipient Salutation.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $settings Email Settings.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function bp_email_the_salutation( $settings = array() ) {&nbsp;</div></li><li><div>  echo bp_email_get_salutation( $settings );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Gets the Recipient Salutation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $settings Email Settings.</span>&nbsp;</div></li><li><div><span class="comment">   * @return string The Recipient Salutation.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bp_email_get_salutation( $settings = array() ) {&nbsp;</div></li><li><div>      $token = '{{recipient.name}}';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filters The Recipient Salutation inside the Email Template.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value    The Recipient Salutation.</span>&nbsp;</div></li><li><div><span class="comment">       * @param array  $settings Email Settings.</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $token    The Recipient token.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      return apply_filters( 'bp_email_get_salutation', sprintf( _x( 'Hi %s, ', 'recipient salutation', 'buddypress' ), $token ), $settings, $token );&nbsp;</div></li><li><div>  }&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>BuddyPress</li><li><span></span>2.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>