<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="2.7.5" data-slug="mailpoet-newsletters" data-type="class" data-id="41245"><head xmlns="http://www.w3.org/1999/xhtml"><title> wysija_view_back | class | Mailpoet Newsletters | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="WYSIJA_view_back, class, plugin, mailpoet-newsletters, 2.7.5" /><meta name="description" content="The MailPoet Newsletters WYSIJA view back class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.8"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=bff4bc96b35168df52102b9eaaf4665d' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.8' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/wysija_view_back/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwysija_view_back%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwysija_view_back%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-mailpoet-newsletters-2.7.5-class-wysija_view_back","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="wysija_view_back" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to mailpoet-newsletters." href="http://hookr.io/plugins/mailpoet-newsletters/" class="plugin"><span property="name">mailpoet-newsletters</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.7.5." href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/" class="H_VERSION"><span property="name">2.7.5</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">wysija_view_back</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="299"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/all/" title="All">All <span class="count badge">299</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="104"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/hooks/" title="Hooks">Hooks <span class="count badge">104</span></a></li><li class="" data-id="action" data-count="30"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/actions/" title="Actions">Actions <span class="count badge">30</span></a></li><li class="" data-id="filter" data-count="74"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/filters/" title="Filters">Filters <span class="count badge">74</span></a></li><li class="active" data-id="class" data-count="132"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/classes/" title="Classes">Classes <span class="count badge">132</span></a></li><li class="" data-id="constant" data-count="52"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/constants/" title="Constants">Constants <span class="count badge">52</span></a></li><li class="" data-id="function" data-count="8"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/functions/" title="Functions">Functions <span class="count badge">8</span></a></li><li class="" data-id="shortcode" data-count="3"><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">3</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>WYSIJA_view_back</strong></h1><p>The MailPoet Newsletters <strong>WYSIJA view back</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/files/views-back/" class="file">/views/back.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="4" class="block" start="4"><li><div>class WYSIJA_view_back extends WYSIJA_view{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $column_actions=array();/**list of actions possible through links in the list*/&nbsp;</div></li><li><div>    var $column_action_list='';/**name of the column that will contain the list of action*/&nbsp;</div></li><li><div>    var $arrayMenus=array();&nbsp;</div></li><li><div>    var $bulks=array();&nbsp;</div></li><li><div>    var $action='';&nbsp;</div></li><li><div>    var $statuses=array();&nbsp;</div></li><li><div>    var $skip_header = false; // simply returns the wrapper if true&nbsp;</div></li><li><div>    var $listingHeader = '';&nbsp;</div></li><li><div>    var $hiddenFields = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function __construct() {&nbsp;</div></li><li><div>        /** the default actions to be linked in a listing */&nbsp;</div></li><li><div>        if(!$this-&gt;column_actions)  $this-&gt;column_actions=array('view'=&gt;__('View', WYSIJA), 'edit'=&gt;__('Edit', WYSIJA), 'delete'=&gt;__('Delete', WYSIJA));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;bulks[&quot;delete&quot;]=array(&quot;name&quot;=&gt;__(&quot;Delete&quot;, WYSIJA));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * creation of a generic listing view&nbsp;</div></li><li><div>     * @param type $data&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function main($data) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;form method=&quot;post&quot; action=&quot;admin.php?page='.  esc_attr($_REQUEST['page']).'&quot; id=&quot;posts-filter&quot;&gt;';&nbsp;</div></li><li><div>        $this-&gt;filtersLink();&nbsp;</div></li><li><div>        $this-&gt;searchBox();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;listing($data);&nbsp;</div></li><li><div>        echo '&lt;/form&gt;';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function menuTop($actionmenu=false) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $menu=&quot;&quot;;&nbsp;</div></li><li><div>        if(!empty($this-&gt;arrayMenus)) {&nbsp;</div></li><li><div>           foreach($this-&gt;arrayMenus as $action =&gt;$actiontrans) {&nbsp;</div></li><li><div>                $menu.= '&lt;a href=&quot;admin.php?page='.  esc_attr($_REQUEST['page']).'&action='.$action.'&quot; class=&quot;button-secondary2&quot;&gt;'.$actiontrans.'&lt;/a&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $menu;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard view of wordpress admin view here is the header part&nbsp;</div></li><li><div>     * @param type $methodView&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function header($data='') {&nbsp;</div></li><li><div>        echo '&lt;div id=&quot;wysija-app&quot; class=&quot;wrap&quot;&gt;';/**start div class wrap*/&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if($this-&gt;skip_header === true) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $header = '&lt;div class=&quot;icon32&quot; id=&quot;'.$this-&gt;icon.'&quot;&gt;&lt;br/&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>        $full_title = __($this-&gt;title, WYSIJA);&nbsp;</div></li><li><div>        $action = $sub_title = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( isset($_REQUEST['action']) ) {&nbsp;</div></li><li><div>            $action = $_REQUEST['action'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(isset($this-&gt;titlelink)) {&nbsp;</div></li><li><div>            $my_title = '&lt;a href=&quot;admin.php?page='.  esc_attr($_REQUEST['page']).'&quot;&gt;'.$full_title.'&lt;/a&gt; ';&nbsp;</div></li><li><div>        }else{&nbsp;</div></li><li><div>            $my_title = $full_title . ' ';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $header .= '&lt;h2&gt;'.$my_title.$sub_title.$this-&gt;menuTop($this-&gt;action, $data).'&lt;/h2&gt;';&nbsp;</div></li><li><div>        $header .= $this-&gt;messages();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo $header;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard view of wordpress admin view here is the footer part&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function footer() {&nbsp;</div></li><li><div>        echo '&lt;/div&gt;';/**end div class wrap*/&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard listing of a wordpress admin, here is the list of links appearing on top&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function filtersLink() {&nbsp;</div></li><li><div>        if($this-&gt;statuses) {&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;filter&quot;&gt;&nbsp;</div></li><li><div>                &lt;ul class=&quot;subsubsub&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $last_key = key(array_slice($this-&gt;statuses, -1, 1, TRUE));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        foreach($this-&gt;statuses as $keyst=&gt;$status) {&nbsp;</div></li><li><div>                            $class='';&nbsp;</div></li><li><div>                            if(isset($_REQUEST['link_filter']) && $_REQUEST['link_filter'] === $status['key']) $class='current';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // set item count: defaults to 0&nbsp;</div></li><li><div>                            $count = (isset($status['count'])) ? (int)$status['count'] : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if(isset($status['uri'])) {&nbsp;</div></li><li><div>                                echo '&lt;li&gt;&lt;a class=&quot;'.$class.'&quot; href=&quot;'.$status['uri'].'&quot;&gt;'.$status['title'].' &lt;span class=&quot;count&quot;&gt;('.$count.')&lt;/span&gt;&lt;/a&gt;';&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                echo '&lt;li&gt;&lt;a class=&quot;'.$class.'&quot; href=&quot;javascript:;&quot;&gt;'.$status['title'].' &lt;span class=&quot;count&quot;&gt;('.$count.')&lt;/span&gt;&lt;/a&gt;';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if($last_key!=$keyst) echo ' | ';&nbsp;</div></li><li><div>                            echo '&lt;/li&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/ul&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard listing of a wordpress admin, here is the search box&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function searchBox() {&nbsp;</div></li><li><div>        $search=&quot;&quot;;&nbsp;</div></li><li><div>        if(isset($_REQUEST['search'])) $search =stripslashes($_REQUEST['search']);&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>            &lt;p class=&quot;search-box&quot;&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;wysija-search-input&quot; class=&quot;screen-reader-text&quot;&gt;&lt;?php echo $this-&gt;search['title'] ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr($search) ?&gt;&quot; class=&quot;searchbox&quot; name=&quot;search&quot; id=&quot;wysija-search-input&quot;&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;submit&quot; class=&quot;searchsub button&quot; value=&quot;&lt;?php echo esc_attr($this-&gt;search['title']) ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard listing of a wordpress admin, here is the table header/footer of the listing&nbsp;</div></li><li><div>     * @param type $data&nbsp;</div></li><li><div>     * @return type&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function buildHeaderListing($data) {&nbsp;</div></li><li><div>        //building the headers labels&nbsp;</div></li><li><div>        if(!$data) {&nbsp;</div></li><li><div>            //$this-&gt;notice(__(&quot;There is no data at the moment.&quot;, WYSIJA));&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;listingHeader='&lt;tr class=&quot;thead&quot;&gt;';&nbsp;</div></li><li><div>        $columns=$data[0];&nbsp;</div></li><li><div>        $sorting=array();&nbsp;</div></li><li><div>        //dbg($columns);&nbsp;</div></li><li><div>        foreach($columns as $row =&gt;$colss) {&nbsp;</div></li><li><div>            $sorting[$row]=&quot; sortable desc&quot;;&nbsp;</div></li><li><div>            if(isset($_REQUEST[&quot;orderby&quot;]) && $_REQUEST[&quot;orderby&quot;]==$row) $sorting[$row]=&quot; sorted &quot;.$_REQUEST[&quot;ordert&quot;];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $hiddenOrder=&quot;&quot;;&nbsp;</div></li><li><div>        if(isset($_REQUEST[&quot;orderby&quot;])) {&nbsp;</div></li><li><div>            $hiddenOrder='&lt;input type=&quot;hidden&quot; name=&quot;orderby&quot; id=&quot;wysija-orderby&quot; value=&quot;'.esc_attr($_REQUEST[&quot;orderby&quot;]).'&quot;/&gt;';&nbsp;</div></li><li><div>            $hiddenOrder.='&lt;input type=&quot;hidden&quot; name=&quot;ordert&quot; id=&quot;wysija-ordert&quot; value=&quot;'.esc_attr($_REQUEST[&quot;ordert&quot;]).'&quot;/&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $nk=false;&nbsp;</div></li><li><div>        if(isset($columns[$this-&gt;model-&gt;pk])) {&nbsp;</div></li><li><div>            $nk=str_replace(&quot;_&quot;, '-', $this-&gt;model-&gt;pk);&nbsp;</div></li><li><div>            unset($columns[$this-&gt;model-&gt;pk]);&nbsp;</div></li><li><div>            $this-&gt;cols_nks[$this-&gt;model-&gt;pk]=$nk;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if($this-&gt;bulks) {&nbsp;</div></li><li><div>            if($nk) {&nbsp;</div></li><li><div>                $this-&gt;listingHeader='&lt;th class=&quot;manage-column column-'.$nk.' check-column&quot; id=&quot;'.$nk.'&quot; scope=&quot;col&quot;&gt;&lt;input type=&quot;checkbox&quot;&gt;&lt;/th&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach($columns as $key =&gt; $value) {&nbsp;</div></li><li><div>            $nk=str_replace(&quot;_&quot;, '-', $key);&nbsp;</div></li><li><div>            $this-&gt;listingHeader.='&lt;th class=&quot;manage-column column-'.$nk.$sorting[$key].'&quot; id=&quot;'.$nk.'&quot; scope=&quot;col&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if(isset($this-&gt;model-&gt;columns[$key]['label'])) $label=$this-&gt;model-&gt;columns[$key]['label'];&nbsp;</div></li><li><div>            else  $label=ucfirst($key);&nbsp;</div></li><li><div>            $this-&gt;listingHeader.='&lt;a class=&quot;orderlink&quot; href=&quot;#&quot;&gt;&lt;span&gt;'.$label.'&lt;/span&gt;&lt;span class=&quot;sorting-indicator&quot;&gt;&lt;/span&gt;&lt;/a&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;listingHeader.='&lt;/th&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;cols_nks[$key]=$value;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;hiddenFields=$hiddenOrder;&nbsp;</div></li><li><div>        $this-&gt;listingHeader.='&lt;/tr&gt;';&nbsp;</div></li><li><div>        return $this-&gt;listingHeader;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * to help reproduce the standard listing of a wordpress admin, here is the bulk action dropdown applied to selected rows&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function globalActions($data=false, $second=false) {&nbsp;</div></li><li><div>         ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;tablenav&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php if($this-&gt;bulks) { ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;alignleft actions&quot;&gt;&nbsp;</div></li><li><div>                &lt;select name=&quot;action2&quot; class=&quot;global-action&quot;&gt;&nbsp;</div></li><li><div>                    &lt;option selected=&quot;selected&quot; value=&quot;&quot;&gt;&lt;?php echo esc_attr(__('Bulk Actions', WYSIJA)); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                        foreach($this-&gt;bulks as $key=&gt; $bulk) {&nbsp;</div></li><li><div>                            echo '&lt;option value=&quot;bulk_'.$key.'&quot;&gt;'.$bulk['name'].'&lt;/option&gt;';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;submit&quot; class=&quot;bulksubmit button-secondary action&quot; name=&quot;doaction&quot; value=&quot;&lt;?php echo  esc_attr(__('Apply', WYSIJA)); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php if(!$second)$this-&gt;secure('bulk_delete'); ?&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;?php } ?&gt;&nbsp;</div></li><li><div>            &lt;?php $this-&gt;pagination('', $second); ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Pagination for listing pages.&nbsp;</div></li><li><div>    function pagination($paramsurl='', $second=false) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $number_of_pages = 1;&nbsp;</div></li><li><div>        $number_of_pages = ceil($this-&gt;model-&gt;countRows/$this-&gt;model-&gt;limit);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;div class=&quot;tablenav-pages&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $current_page = 1;&nbsp;</div></li><li><div>        if (isset($_REQUEST['pagi'])) {&nbsp;</div></li><li><div>            $current_page = (int)$_REQUEST['pagi'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($number_of_pages &gt; 1) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Pagination input box to manually enter the page requested.&nbsp;</div></li><li><div>            $pagination_input = &quot;&quot;;&nbsp;</div></li><li><div>            $suffix = &quot;&quot;;&nbsp;</div></li><li><div>            if ($second) {&nbsp;</div></li><li><div>                $suffix = &quot;-2&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $pagination_input = '&lt;input id=&quot;wysija-pagination' . $suffix . '&quot; type=&quot;text&quot; name=&quot;pagi' . $suffix . '&quot; size=&quot;4&quot; value=&quot;' . $current_page . '&quot; /&gt;';&nbsp;</div></li><li><div>            $pagination_input .= '&lt;input id=&quot;wysija-pagination-max' . $suffix . '&quot; type=&quot;hidden&quot; name=&quot;pagimax' . $suffix . '&quot; value=&quot;' . $number_of_pages . '&quot; /&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Final pagination container.&nbsp;</div></li><li><div>            $pagi = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Pagination Previous Arrows.&nbsp;</div></li><li><div>            if ($current_page != 1) {&nbsp;</div></li><li><div>                $pagi .= '&lt;a class=&quot;prev page-numbers&quot; href=&quot;admin.php?page='.esc_attr($_REQUEST['page']).'&pagi=1'.$paramsurl.'&quot; alt=&quot;1&quot; title=&quot;'.sprintf(__('Page %1$s', WYSIJA), 1).'&quot;&gt;&laquo;&lt;/a&gt;';&nbsp;</div></li><li><div>                if ($current_page&gt;2) {&nbsp;</div></li><li><div>                    $pagi .= '&lt;a class=&quot;prev page-numbers&quot; href=&quot;admin.php?page='.esc_attr($_REQUEST['page']).'&pagi='.($current_page-1).$paramsurl.'&quot; alt=&quot;'.($current_page-1).'&quot; title=&quot;'.sprintf(__('Page %1$s', WYSIJA), ($current_page-1)).'&quot; &gt;&lsaquo;&lt;/a&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Input field and total pages.&nbsp;</div></li><li><div>            $pagi .= $pagination_input;&nbsp;</div></li><li><div>            $pagi.= '&lt;span class=&quot;total-pages&quot;&gt;' . sprintf(__('of %1$s', WYSIJA), $number_of_pages) . '&lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Pagination Next arrows.&nbsp;</div></li><li><div>            if($number_of_pages &gt; 1 && $current_page != $number_of_pages) {&nbsp;</div></li><li><div>                if (($number_of_pages - $current_page) &gt;= 2) {&nbsp;</div></li><li><div>                    $pagi .= '&lt;a class=&quot;next page-numbers&quot; href=&quot;admin.php?page='.esc_attr($_REQUEST['page']).'&pagi='.($current_page+1).$paramsurl.'&quot; alt=&quot;'.($current_page+1).'&quot; title=&quot;'.sprintf(__('Page %1$s', WYSIJA), ($current_page+1)).'&quot;&gt;&rsaquo;&lt;/a&gt;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $pagi .= '&lt;a class=&quot;next page-numbers&quot; href=&quot;admin.php?page='.esc_attr($_REQUEST['page']).'&pagi='.$number_of_pages.$paramsurl.'&quot; alt=&quot;'.$number_of_pages.'&quot; title=&quot;'.sprintf(__('Page %1$s', WYSIJA), $number_of_pages).'&quot; &gt;&raquo;&lt;/a&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo $pagi;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * limit of records to show per page&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function limitPerPage() {&nbsp;</div></li><li><div>        $limitPerpageS=array(5, 10, 20, 50, 100);&nbsp;</div></li><li><div>        if($this-&gt;model-&gt;countRows &lt;= $limitPerpageS[0]) return true;&nbsp;</div></li><li><div>        $limitPerpage=array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach($limitPerpageS as $k =&gt; $count) {&nbsp;</div></li><li><div>            $limitPerpage[] = $count;&nbsp;</div></li><li><div>            if($this-&gt;model-&gt;countRows &lt; $count) break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if(!$limitPerpage) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $pagi='';&nbsp;</div></li><li><div>        if(isset($this-&gt;limit_pp)) $pagi.='&lt;input id=&quot;wysija-pagelimit&quot; type=&quot;hidden&quot; name=&quot;limit_pp&quot; value=&quot;'.$this-&gt;limit_pp.'&quot; /&gt;';&nbsp;</div></li><li><div>        foreach($limitPerpage as $k =&gt; $count) {&nbsp;</div></li><li><div>            $numperofpages=ceil($this-&gt;model-&gt;countRows/$count);&nbsp;</div></li><li><div>            $titleLink=' title=&quot;'.(isset($this-&gt;viewObj-&gt;title) ? $this-&gt;viewObj-&gt;title : sprintf(__('Split subscribers into %1$s pages.', WYSIJA), $numperofpages)).'&quot; ';&nbsp;</div></li><li><div>            /**if($urlbase)    $linkk=$urlbase.'&limit_pp='.$count;&nbsp;</div></li><li><div>            else    $linkk='admin.php?page='.$_REQUEST['page'].'&limit_pp='.$count;*/&nbsp;</div></li><li><div>            $linkk='javascript:;';&nbsp;</div></li><li><div>            if(isset($_REQUEST['limit_pp'])) {&nbsp;</div></li><li><div>                if($_REQUEST['limit_pp']==$count) $pagi.='&lt;span '.$titleLink.'  class=&quot;page-limit current&quot;&gt;'.$count.'&lt;/span&gt;';&nbsp;</div></li><li><div>                else $pagi.='&lt;a href=&quot;'.$linkk.'&quot; '.$titleLink.' class=&quot;page-limit&quot; &gt;'.$count.'&lt;/a&gt;';&nbsp;</div></li><li><div>            }else{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($this-&gt;model-&gt;limit==$count) $pagi.='&lt;span class=&quot;page-limit current&quot; '.$titleLink.' &gt;'.$count.'&lt;/span&gt;';&nbsp;</div></li><li><div>                else $pagi.='&lt;a href=&quot;'.$linkk.'&quot; '.$titleLink.' class=&quot;page-limit&quot; &gt;'.$count.'&lt;/a&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if($k+1 &lt; count($limitPerpage)) $pagi.=&quot; | &quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;tablenav-limits subsubsub&quot;&gt;&nbsp;</div></li><li><div>            &lt;span class=&quot;displaying-limits&quot;&gt;&lt;?php&nbsp;</div></li><li><div>            if(isset($this-&gt;viewObj-&gt;msgPerPage)) {&nbsp;</div></li><li><div>                echo $this-&gt;viewObj-&gt;msgPerPage;&nbsp;</div></li><li><div>            }else{&nbsp;</div></li><li><div>                _e('Subscribers to show per page:', WYSIJA);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>             ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>                echo $pagi;&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * here is a helper for each column value on a listing view&nbsp;</div></li><li><div>     * @param type $key&nbsp;</div></li><li><div>     * @param type $val&nbsp;</div></li><li><div>     * @param type $type&nbsp;</div></li><li><div>     * @return type&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function fieldListHTML($key, $val, $params=array()) {&nbsp;</div></li><li><div>        /**get the params of that field if there is*/&nbsp;</div></li><li><div>        $field_type = (isset($params['type']) ? $params['type'] : '');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch($field_type) {&nbsp;</div></li><li><div>            case 'pk':&nbsp;</div></li><li><div>                return '&lt;th class=&quot;check-column&quot; scope=&quot;col&quot;&gt;&lt;input class=&quot;checkboxselec&quot; type=&quot;checkbox&quot; value=&quot;'.$val.'&quot; id=&quot;'.$key.'_'.$val.'&quot; name=&quot;wysija['.$this-&gt;model-&gt;table_name.']['.$key.'][]&quot;&gt;&lt;/th&gt;';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'boolean':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap='&lt;td class=&quot;'.$key.' column-'.$key.'&quot;&gt;';&nbsp;</div></li><li><div>                $wrap.=$params['values'][$val];&nbsp;</div></li><li><div>                $wrap.='&lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'date':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap='&lt;td class=&quot;'.$key.' column-'.$key.'&quot;&gt;';&nbsp;</div></li><li><div>                $wrap.=$this-&gt;fieldListHTML_created_at($val);&nbsp;</div></li><li><div>                $wrap.='&lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'time':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(!isset($params['format']))$params['format']='';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap='&lt;td class=&quot;'.$key.' column-'.$key.'&quot;&gt;';&nbsp;</div></li><li><div>                $wrap.=$this-&gt;fieldListHTML_created_at($val, $params['format']);&nbsp;</div></li><li><div>                $wrap.='&lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                $wrap='&lt;td class=&quot;column-'.$key.'&quot;&gt;';&nbsp;</div></li><li><div>                $specialMethod=&quot;fieldListHTML_&quot;.$key;&nbsp;</div></li><li><div>                if(method_exists($this, $specialMethod)) $wrap.=$this-&gt;$specialMethod($val);&nbsp;</div></li><li><div>                else $wrap.=$val;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$this-&gt;getActionLinksList($key);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.='&lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>         return $wrap;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * this function adds a list of action links under the column valued in a listing&nbsp;</div></li><li><div>     * @param type $column&nbsp;</div></li><li><div>     * @return string&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function getActionLinksList($column, $manual=false) {&nbsp;</div></li><li><div>        $wrap='';&nbsp;</div></li><li><div>        if($this-&gt;column_action_list==$column ||$manual) {&nbsp;</div></li><li><div>            $wrap='&lt;div class=&quot;row-actions&quot;&gt;';&nbsp;</div></li><li><div>            end($this-&gt;column_actions);&nbsp;</div></li><li><div>            $lastkey=key($this-&gt;column_actions);&nbsp;</div></li><li><div>            reset($this-&gt;column_actions);&nbsp;</div></li><li><div>            foreach($this-&gt;column_actions as $action =&gt; $title) {&nbsp;</div></li><li><div>                switch($action) {&nbsp;</div></li><li><div>                    case &quot;delete&quot;:&nbsp;</div></li><li><div>                        $noncefield='&_wpnonce='.$this-&gt;secure(array('action'=&gt;$action, 'id'=&gt;$this-&gt;valPk), true);&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    default:&nbsp;</div></li><li><div>                        $noncefield=&quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $separator='';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($action!=$lastkey)   $separator=' | ';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(!isset($this-&gt;model-&gt;model_name)) $this-&gt;model-&gt;model_name=$this-&gt;model-&gt;table_name;&nbsp;</div></li><li><div>                if(!isset($this-&gt;model-&gt;model_prefix)) $this-&gt;model-&gt;model_prefix=$this-&gt;model-&gt;table_prefix;&nbsp;</div></li><li><div>                $wrap.='&lt;span class=&quot;'.$action.'&quot;&gt;&nbsp;</div></li><li><div>                    &lt;a href=&quot;admin.php?page='.$this-&gt;model-&gt;model_prefix.'_'.$this-&gt;model-&gt;model_name.'&id='.$this-&gt;valPk.'&action='.$action.$noncefield.'&quot; class=&quot;submit'.$action.'&quot;&gt;'.$title.'&lt;/a&gt;'.$separator.'&nbsp;</div></li><li><div>                &lt;/span&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $wrap.='&lt;/div&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $wrap;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * this function is here to help in generic forms&nbsp;</div></li><li><div>     * @param type $key&nbsp;</div></li><li><div>     * @param type $val&nbsp;</div></li><li><div>     * @param type $type&nbsp;</div></li><li><div>     * @return type&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function fieldFormHTML($key, $wrapped) {&nbsp;</div></li><li><div>        if(isset($this-&gt;model-&gt;columns[$key]['label'])) $label=$this-&gt;model-&gt;columns[$key]['label'];&nbsp;</div></li><li><div>        else  $label=ucfirst($key);&nbsp;</div></li><li><div>        $desc='';&nbsp;</div></li><li><div>        if(isset($this-&gt;model-&gt;columns[$key]['desc'])) $desc='&lt;p class=&quot;description&quot;&gt;'.$this-&gt;model-&gt;columns[$key]['desc'].'&lt;/p&gt;';&nbsp;</div></li><li><div>        $wrap='&lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>                    &lt;label for=&quot;'.$key.'&quot;&gt;'.$label.$desc.' &lt;/label&gt;&nbsp;</div></li><li><div>                &lt;/th&gt;&lt;td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $wrap.=$wrapped;&nbsp;</div></li><li><div>        $wrap.='&lt;/td&gt;';&nbsp;</div></li><li><div>        return $wrap;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function buildMyForm($form_fields, $data, $model, $required=false) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_html = '';&nbsp;</div></li><li><div>        foreach($form_fields as $form_key =&gt;$col_params) {&nbsp;</div></li><li><div>            $class = $value = '';&nbsp;</div></li><li><div>            $params_column = false;&nbsp;</div></li><li><div>            if(isset($col_params['rowclass'])) $class = ' class=&quot;'.$col_params['rowclass'].'&quot; ';&nbsp;</div></li><li><div>            if(isset($col_params['row_id'])) $class.= ' id=&quot;'.$col_params['row_id'].'&quot; ';&nbsp;</div></li><li><div>            $form_html .= '&lt;tr '.$class.'&gt;';&nbsp;</div></li><li><div>            if($model == 'config') {&nbsp;</div></li><li><div>                $value = $this-&gt;model-&gt;getValue($form_key);&nbsp;</div></li><li><div>            }else{&nbsp;</div></li><li><div>                if($form_key != 'lists')   {&nbsp;</div></li><li><div>                    if(is_array($model)) {&nbsp;</div></li><li><div>                        foreach($model as $mod) {&nbsp;</div></li><li><div>                            if(isset($data[$mod][$form_key])) {&nbsp;</div></li><li><div>                                $value=$data[$mod][$form_key];&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }else{&nbsp;</div></li><li><div>                        if(isset($col_params['isparams'])) {&nbsp;</div></li><li><div>                            $params=$data[$model][$col_params['isparams']];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $value='';&nbsp;</div></li><li><div>                            if(isset($params[$form_key]))    $value=$params[$form_key];&nbsp;</div></li><li><div>                            $params_column=$col_params['isparams'];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if(isset($data[$model][$form_key])) $value=$data[$model][$form_key];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if($value) $value;&nbsp;</div></li><li><div>                    elseif(isset($_REQUEST['wysija'][$this-&gt;model-&gt;table_name][$form_key])) $value=$_REQUEST['wysija'][$this-&gt;model-&gt;table_name][$form_key];&nbsp;</div></li><li><div>                    elseif(isset($col_params['default'])) $value=$col_params['default'];&nbsp;</div></li><li><div>                    else $value='';&nbsp;</div></li><li><div>                }elseif(isset($data[$form_key])) $value=$data[$form_key];&nbsp;</div></li><li><div>                elseif(isset($col_params['default'])) $value=$col_params['default'];&nbsp;</div></li><li><div>                else $value='';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if($required && !isset($col_params['class']))   $col_params['class']=$this-&gt;getClassValidate($this-&gt;model-&gt;columns[$form_key], true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if(isset($col_params['label'])) $label=$col_params['label'];&nbsp;</div></li><li><div>            else  $label=ucfirst($form_key);&nbsp;</div></li><li><div>            $desc='';&nbsp;</div></li><li><div>            if(isset($col_params['desc'])) {&nbsp;</div></li><li><div>                if(isset($col_params['link'])) $col_params['desc']=str_replace(array('[link]', '[/link]'), array($col_params['link'], '&lt;/a&gt;'), $col_params['desc']);&nbsp;</div></li><li><div>                $desc='&lt;p class=&quot;description&quot;&gt;'.$col_params['desc'].'&lt;/p&gt;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $colspan=' colspan=&quot;2&quot; ';&nbsp;</div></li><li><div>            if(!isset($col_params['1col'])) {&nbsp;</div></li><li><div>                $form_html.='&lt;th scope=&quot;row&quot;&gt;';&nbsp;</div></li><li><div>                if(!isset($col_params['labeloff'])) $form_html.='&lt;label for=&quot;'.$form_key.'&quot;&gt;';&nbsp;</div></li><li><div>                $form_html.=$label.$desc;&nbsp;</div></li><li><div>                if(!isset($col_params['labeloff']))  $form_html.=' &lt;/label&gt;';&nbsp;</div></li><li><div>                $form_html.='&lt;/th&gt;';&nbsp;</div></li><li><div>                $colspan='';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $form_html.='&lt;td '.$colspan.'&gt;';&nbsp;</div></li><li><div>            $form_html.=$this-&gt;fieldHTML($form_key, $value, $model, $col_params, $params_column);&nbsp;</div></li><li><div>            $form_html.='&lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $form_html.='&lt;/tr&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $form_html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param type $key&nbsp;</div></li><li><div>     * @param type $val&nbsp;</div></li><li><div>     * @param type $type&nbsp;</div></li><li><div>     * @return type&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function fieldHTML($key, $val='', $model='', $params=array(), $paramscolumn=false) {&nbsp;</div></li><li><div>        $classValidate=$wrap='';&nbsp;</div></li><li><div>        // get the params of that field if there is&nbsp;</div></li><li><div>        $type=$params['type'];&nbsp;</div></li><li><div>        // js validator class setup&nbsp;</div></li><li><div>        if($params)  $classValidate=$this-&gt;getClassValidate($params);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if($paramscolumn) {&nbsp;</div></li><li><div>            $col=$paramscolumn.']['.$key;&nbsp;</div></li><li><div>        }else $col=$key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $id_field=$key;&nbsp;</div></li><li><div>        if(isset($params['id'])) {&nbsp;</div></li><li><div>            $id_field=$params['id'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $field_name='wysija['.$model.']['.$col.']';&nbsp;</div></li><li><div>        $helper_forms=WYSIJA::get('forms', 'helper');&nbsp;</div></li><li><div>        switch($type) {&nbsp;</div></li><li><div>            case 'pk':&nbsp;</div></li><li><div>                return '&lt;input type=&quot;hidden&quot; value=&quot;'.$val.'&quot; id=&quot;'.$id_field.'&quot; name=&quot;'.$field_name.'&quot;&gt;';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'boolean':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;dropdown(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $params['values'], $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'roles':&nbsp;</div></li><li><div>                $wptools=WYSIJA::get('wp_tools', 'helper');&nbsp;</div></li><li><div>                $editable_roles=$wptools-&gt;wp_get_editable_roles();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;dropdown(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $editable_roles, $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'password':&nbsp;</div></li><li><div>                if(!isset($params['size'])) {&nbsp;</div></li><li><div>                    $classValidate.=' size=&quot;80&quot;';&nbsp;</div></li><li><div>                }else {&nbsp;</div></li><li><div>                    $classValidate.=' size=&quot;'.$params['size'].'&quot;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;input(array('type'=&gt;'password', 'id'=&gt;$id_field, 'name'=&gt;$field_name), $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'disabled_radio':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;radios(array('id'=&gt;$id_field, 'name'=&gt;$field_name, 'disabled'=&gt;'disabled'), $params['values'], $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'radio':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;radios(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $params['values'], $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'dropdown_keyval':&nbsp;</div></li><li><div>                $newoption=array();&nbsp;</div></li><li><div>                foreach($params['values'] as $vall) {&nbsp;</div></li><li><div>                    $newoption[$vall]=$vall;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;dropdown(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $newoption, $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'dropdown':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wrap.=$helper_forms-&gt;dropdown(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $params['values'], $val, $classValidate);&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'wysija_pages_list':&nbsp;</div></li><li><div>                $wrapd=get_pages( array('post_type'=&gt;&quot;wysijap&quot;, 'echo'=&gt;0, 'name'=&gt;$field_name, 'id'=&gt;$id_field, 'selected' =&gt; $val, 'class'=&gt;$classValidate) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'pages_list':&nbsp;</div></li><li><div>                $wrap.=wp_dropdown_pages( array('echo'=&gt;0, 'name'=&gt;$field_name, 'id'=&gt;$id_field, 'selected' =&gt; $val, 'class'=&gt;$classValidate) );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                if(!isset($params['size'])) {&nbsp;</div></li><li><div>                    $classValidate.=' size=&quot;80&quot;';&nbsp;</div></li><li><div>                }else{&nbsp;</div></li><li><div>                    $classValidate.=' size=&quot;'.$params['size'].'&quot;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if(isset($params['class'])) {&nbsp;</div></li><li><div>                    $classValidate.=' class=&quot;'.$params['class'].'&quot;';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $specialMethod='fieldFormHTML_'.$type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(method_exists($this, $specialMethod)) $wrap.=$this-&gt;$specialMethod($key, $val, $model, $params);&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if(method_exists($helper_forms, $type)) {&nbsp;</div></li><li><div>                        $dataInput=array('id'=&gt;$id_field, 'name'=&gt;$field_name);&nbsp;</div></li><li><div>                        if(isset($params['cols']))$dataInput['cols']=$params['cols'];&nbsp;</div></li><li><div>                        if(isset($params['rows']))$dataInput['rows']=$params['rows'];&nbsp;</div></li><li><div>                        $wrap.=$helper_forms-&gt;$type($dataInput, $val, $classValidate);&nbsp;</div></li><li><div>                    }else{&nbsp;</div></li><li><div>                        $wrap.=$helper_forms-&gt;input(array('id'=&gt;$id_field, 'name'=&gt;$field_name), $val, $classValidate);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $wrap;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * this function is the default listing function&nbsp;</div></li><li><div>     * @param type $data&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function listing($data, $simple=false) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(!$simple)    $this-&gt;globalActions();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $html='&lt;table cellspacing=&quot;0&quot; class=&quot;widefat fixed&quot;&gt;&nbsp;</div></li><li><div>                &lt;thead&gt;';&nbsp;</div></li><li><div>            $html.=$this-&gt;buildHeaderListing($data);&nbsp;</div></li><li><div>            $html.='&lt;/thead&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>             $html.='&lt;tfoot&gt;';&nbsp;</div></li><li><div>             $html.=$this-&gt;listingHeader;&nbsp;</div></li><li><div>             $html.='&lt;/tfoot&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>             $html.='&lt;tbody class=&quot;list:'.$this-&gt;model-&gt;table_name.' '.$this-&gt;model-&gt;table_name.'-list&quot; id=&quot;wysija-'.$this-&gt;model-&gt;table_name.'&quot; &gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $listingRows='';&nbsp;</div></li><li><div>                        $alt=true;&nbsp;</div></li><li><div>                        foreach($data as $row =&gt;$columns) {&nbsp;</div></li><li><div>                            $classRow='';&nbsp;</div></li><li><div>                            if($alt) $classRow=' class=&quot;alternate&quot; ';&nbsp;</div></li><li><div>                             $listingRows.='&lt;tr'.$classRow.' id=&quot;'.$this-&gt;model-&gt;table_name.'-'.$this-&gt;model-&gt;table_name.'&quot;&gt;';&nbsp;</div></li><li><div>                             $valpkcol=false;&nbsp;</div></li><li><div>                             if(isset($columns[$this-&gt;model-&gt;pk])) {&nbsp;</div></li><li><div>                                $this-&gt;valPk=$columns[$this-&gt;model-&gt;pk];&nbsp;</div></li><li><div>                                $valpkcol=$this-&gt;model-&gt;columns[$this-&gt;model-&gt;pk];&nbsp;</div></li><li><div>                                $this-&gt;model-&gt;columns[$this-&gt;model-&gt;pk]['type']='pk';&nbsp;</div></li><li><div>                                unset($columns[$this-&gt;model-&gt;pk]);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if($this-&gt;bulks) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if($valpkcol) {&nbsp;</div></li><li><div>                                    $listingRows.=$this-&gt;fieldListHTML($this-&gt;model-&gt;pk, $this-&gt;valPk, $this-&gt;model-&gt;columns[$this-&gt;model-&gt;pk]);&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            foreach($columns as $key =&gt; $value) {&nbsp;</div></li><li><div>                                if(isset($this-&gt;model-&gt;columns[$key])) $val=$this-&gt;model-&gt;columns[$key];&nbsp;</div></li><li><div>                                else $val='';&nbsp;</div></li><li><div>                                $listingRows.=$this-&gt;fieldListHTML($key, $value, $val);&nbsp;</div></li><li><div>                                $listingRows.='&lt;/th&gt;';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $alt=!$alt;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $html.= $listingRows;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>           $html.=' &lt;/tbody&gt;&nbsp;</div></li><li><div>            &lt;/table&gt;';&nbsp;</div></li><li><div>           if(!$simple) echo $html;&nbsp;</div></li><li><div>            if(!$simple) {&nbsp;</div></li><li><div>                $this-&gt;globalActions(false, true);&nbsp;</div></li><li><div>                $this-&gt;limitPerPage();&nbsp;</div></li><li><div>                echo $this-&gt;hiddenFields;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if($simple) return $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * here is a generic form view&nbsp;</div></li><li><div>     * @param type $data&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function edit($data) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $formid='wysija-'.$_REQUEST['action'];&nbsp;</div></li><li><div>        if($_REQUEST['action']==&quot;edit&quot;) {&nbsp;</div></li><li><div>            $buttonName=__('Modify', WYSIJA);&nbsp;</div></li><li><div>        }else{&nbsp;</div></li><li><div>            $buttonName=__('Add', WYSIJA);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;form name=&quot;&lt;?php echo $formid ?&gt;&quot; method=&quot;post&quot; id=&quot;&lt;?php echo $formid ?&gt;&quot; action=&quot;&quot; class=&quot;form-valid&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>                &lt;tbody&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    foreach($data as $row =&gt;$columns) {&nbsp;</div></li><li><div>                        $formFields='&lt;tr&gt;';&nbsp;</div></li><li><div>                        if(isset($columns[$this-&gt;model-&gt;pk])) {&nbsp;</div></li><li><div>                            $this-&gt;valPk=$columns[$this-&gt;model-&gt;pk];&nbsp;</div></li><li><div>                            $this-&gt;model-&gt;columns[$this-&gt;model-&gt;pk]['type']=&quot;pk&quot;;&nbsp;</div></li><li><div>                            $formFields.=$this-&gt;fieldHTML($this-&gt;model-&gt;pk, $this-&gt;valPk, $this-&gt;model-&gt;table_name, $this-&gt;model-&gt;columns[$this-&gt;model-&gt;pk ]);&nbsp;</div></li><li><div>                            unset($columns[$this-&gt;model-&gt;pk]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        foreach($columns as $key =&gt; $value) {&nbsp;</div></li><li><div>                            $formFields.=$this-&gt;fieldFormHTML($key, $this-&gt;fieldHTML($key, $value, $this-&gt;model-&gt;table_name, $this-&gt;model-&gt;columns[$key]));&nbsp;</div></li><li><div>                            $formFields.='&lt;/tr&gt;';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        echo $formFields;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/tbody&gt;&nbsp;</div></li><li><div>            &lt;/table&gt;&nbsp;</div></li><li><div>            &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php $this-&gt;secure(array('action'=&gt;&quot;save&quot;, 'id'=&gt; $this-&gt;valPk)); ?&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; value=&quot;save&quot; name=&quot;action&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;submit&quot; value=&quot;&lt;?php echo esc_attr($buttonName); ?&gt;&quot; class=&quot;button-primary wysija&quot;&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/form&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>     /**&nbsp;</div></li><li><div>     * here is a generic form view&nbsp;</div></li><li><div>     * @param type $data&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function view($data, $echo=true) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>           $html=' &lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>                &lt;tbody&gt;';&nbsp;</div></li><li><div>                    foreach($data as $row =&gt;$columns) {&nbsp;</div></li><li><div>                        $formFields='&lt;tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        foreach($columns as $key =&gt; $value) {&nbsp;</div></li><li><div>                            $formFields.=$this-&gt;fieldFormHTML($key, $value);&nbsp;</div></li><li><div>                            $formFields.='&lt;/tr&gt;';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $html.= $formFields;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>             $html.='   &lt;/tbody&gt;&nbsp;</div></li><li><div>            &lt;/table&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if($echo) echo $html;&nbsp;</div></li><li><div>          else return $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function fieldFormHTML_fromname($key, $val, $model, $params) {&nbsp;</div></li><li><div>        $formObj=WYSIJA::get('forms', 'helper');&nbsp;</div></li><li><div>        $disableEmail=false;&nbsp;</div></li><li><div>        if($model!='config') $model='email';&nbsp;</div></li><li><div>        if($key=='from_name')   $keyemail='from_email';&nbsp;</div></li><li><div>        else    $keyemail='replyto_email';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //$dataInputEmail=array('class'=&gt;'validate[required]', 'id'=&gt;$keyemail, 'name'=&gt;&quot;wysija[$model][$keyemail]&quot;, 'size'=&gt;40);&nbsp;</div></li><li><div>        $dataInputEmail=array('class'=&gt;'validate[required, custom[email]]', 'id'=&gt;$keyemail, 'name'=&gt;&quot;wysija[$model][$keyemail]&quot;, 'size'=&gt;40);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(isset($this-&gt;data['email'][$key])) {&nbsp;</div></li><li><div>            $valname=$this-&gt;data['email'][$key];&nbsp;</div></li><li><div>            $valemail=$this-&gt;data['email'][$keyemail];&nbsp;</div></li><li><div>        }else{&nbsp;</div></li><li><div>            $valname=$this-&gt;model-&gt;getValue($key);&nbsp;</div></li><li><div>            $valemail=$this-&gt;model-&gt;getValue($keyemail);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //if from email and sending method is gmail then the email is blocked to the smtp_login&nbsp;</div></li><li><div>        if($key=='from_name') {&nbsp;</div></li><li><div>            $modelConfig=WYSIJA::get('config', 'model');&nbsp;</div></li><li><div>            switch($modelConfig-&gt;getValue('sending_method')) {&nbsp;</div></li><li><div>                case 'gmail':&nbsp;</div></li><li><div>                    $dataInputEmail['readonly']='readonly';&nbsp;</div></li><li><div>                    $dataInputEmail['class']='disabled';&nbsp;</div></li><li><div>                    $valemail=$modelConfig-&gt;getValue('smtp_login');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    //if the user didn't enter the email address then we put it ourself&nbsp;</div></li><li><div>                    if(strpos($valemail, '@')===false && strpos($valemail, '@gmail.com')===false) {&nbsp;</div></li><li><div>                        $valemail.='@gmail.com';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $from_name_field=$formObj-&gt;input($dataInputEmail , $valemail);&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                case 'network':&nbsp;</div></li><li><div>                    $from_name_field='&nbsp;&nbsp;'.$modelConfig-&gt;getValue('ms_from_email').$formObj-&gt;hidden($dataInputEmail , $valemail);&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                default :&nbsp;</div></li><li><div>                    $from_name_field=$formObj-&gt;input($dataInputEmail , $valemail);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }else{&nbsp;</div></li><li><div>            $from_name_field=$formObj-&gt;input($dataInputEmail , $valemail);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $fieldHtml=$formObj-&gt;input( array('class'=&gt;'validate[required]', 'id'=&gt;$key, 'name'=&gt;&quot;wysija[$model][$key]&quot;), $valname);&nbsp;</div></li><li><div>        $fieldHtml.=$from_name_field;&nbsp;</div></li><li><div>        return $fieldHtml;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _savebuttonsecure($data, $action=&quot;save&quot;, $button=false, $warning=false) {&nbsp;</div></li><li><div>        if(!$button) $button=__(&quot;Save&quot;, WYSIJA);&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>            &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $secure=array('action'=&gt;$action);&nbsp;</div></li><li><div>                if(isset($data[$this-&gt;model-&gt;table_name][$this-&gt;model-&gt;pk]))    $secure[&quot;id&quot;]=$data[$this-&gt;model-&gt;table_name][$this-&gt;model-&gt;pk];&nbsp;</div></li><li><div>                $this-&gt;secure($secure); ?&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; name=&quot;wysija[&lt;?php echo $this-&gt;model-&gt;table_name ?&gt;][&lt;?php echo $this-&gt;model-&gt;pk ?&gt;]&quot; id=&quot;&lt;?php echo $this-&gt;model-&gt;pk ?&gt;&quot; value=&quot;&lt;?php if(isset($data[$this-&gt;model-&gt;table_name][$this-&gt;model-&gt;pk])) echo esc_attr($data[$this-&gt;model-&gt;table_name][$this-&gt;model-&gt;pk]) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; value=&quot;&lt;?php echo $action ?&gt;&quot; name=&quot;action&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;submit&quot; id=&quot;next-steptmpl&quot; value=&quot;&lt;?php echo esc_attr($button) ?&gt;&quot; name=&quot;submit-draft&quot; class=&quot;button-primary wysija&quot;/&gt;&nbsp;</div></li><li><div>                &lt;?php if($warning)  echo $warning; ?&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.5/classes/wysija_view_back/" class="active">2.7.5</a></li><li><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.4/classes/wysija_view_back/" class="">2.7.4</a></li><li><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.3/classes/wysija_view_back/" class="">2.7.3</a></li><li><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.2/classes/wysija_view_back/" class="">2.7.2</a></li><li><a href="http://hookr.io/plugins/mailpoet-newsletters/2.7.1/classes/wysija_view_back/" class="">2.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>WYSIJA_view_back</li><li><span></span>MailPoet Newsletters</li><li><span></span>2.7.5</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>