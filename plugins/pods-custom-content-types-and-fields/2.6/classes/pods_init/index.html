<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="2.6" data-slug="pods-custom-content-types-and-fields" data-type="class" data-id="59575"><head xmlns="http://www.w3.org/1999/xhtml"><title> podsinit | class | Pods Custom Content Types And Fields | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="PodsInit, class, plugin, pods-custom-content-types-and-fields, 2.6" /><meta name="description" content="The Pods - Custom Content Types and Fields PodsInit class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.17"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=b8ff9d09130ea8d82dd34c6888aafebb' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.17' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/pods_init/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpods_init%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpods_init%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-pods-custom-content-types-and-fields-2.6-class-pods_init","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="pods_init" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to pods-custom-content-types-and&hellip;." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/" class="plugin"><span property="name">pods-custom-content-types-and&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.6." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/" class="H_VERSION"><span property="name">2.6</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">pods_init</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="726"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/all/" title="All">All <span class="count badge">726</span></a></li><li class="" data-id="new" data-count="5"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/new/" title="New">New <span class="count badge">5</span></a></li><li class="" data-id="hooks" data-count="474"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/hooks/" title="Hooks">Hooks <span class="count badge">474</span></a></li><li class="" data-id="action" data-count="109"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/actions/" title="Actions">Actions <span class="count badge">109</span></a></li><li class="" data-id="filter" data-count="365"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/filters/" title="Filters">Filters <span class="count badge">365</span></a></li><li class="active" data-id="class" data-count="70"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/classes/" title="Classes">Classes <span class="count badge">70</span></a></li><li class="" data-id="constant" data-count="18"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/constants/" title="Constants">Constants <span class="count badge">18</span></a></li><li class="" data-id="function" data-count="156"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/functions/" title="Functions">Functions <span class="count badge">156</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>PodsInit</strong></h1><p>The Pods - Custom Content Types and Fields <strong>PodsInit</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/files/classes-podsinit/" class="file">/classes/PodsInit.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="5" class="block" start="5"><li><div>class PodsInit {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var PodsInit&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $instance = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $no_conflict = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $content_types_registered = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var PodsComponents&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $components;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var PodsMeta&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $meta;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var PodsAdmin&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $admin;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var mixed|void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var mixed|void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $version_last;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @var mixed|void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $db_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Upgrades to trigger (last installed version =&gt; upgrade version)&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $upgrades = array(&nbsp;</div></li><li><div>        '1.0.0' =&gt; '2.0.0'&nbsp;</div></li><li><div>        //'2.0.0' =&gt; '2.1.0'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Whether an Upgrade for 1.x has happened&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $upgraded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Whether an Upgrade is needed&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @var bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    static $upgrade_needed = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Singleton handling for a basic pods_init() request&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return \PodsInit&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.3.5&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function init () {&nbsp;</div></li><li><div>        if ( !is_object( self::$instance ) )&nbsp;</div></li><li><div>            self::$instance = new PodsInit();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return self::$instance;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Setup and Initiate Pods&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return \PodsInit&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @license http://www.gnu.org/licenses/gpl-2.0.html&nbsp;</div></li><li><div>     * @since 1.8.9&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function __construct () {&nbsp;</div></li><li><div>        self::$version = get_option( 'pods_framework_version' );&nbsp;</div></li><li><div>        self::$version_last = get_option( 'pods_framework_version_last' );&nbsp;</div></li><li><div>        self::$db_version = get_option( 'pods_framework_db_version' );&nbsp;</div></li><li><div>        self::$upgraded = (int) get_option( 'pods_framework_upgraded_1_x' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( self::$version_last ) && 0 &lt; strlen( get_option( 'pods_version' ) ) ) {&nbsp;</div></li><li><div>            $old_version = get_option( 'pods_version' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !empty( $old_version ) ) {&nbsp;</div></li><li><div>                if ( false === strpos( $old_version, '.' ) )&nbsp;</div></li><li><div>                    $old_version = pods_version_to_point( $old_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                update_option( 'pods_framework_version_last', $old_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                self::$version_last = $old_version;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$upgrade_needed = $this-&gt;needs_upgrade();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'plugins_loaded', array( $this, 'plugins_loaded' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'init', array( $this, 'activate_install' ), 9 );&nbsp;</div></li><li><div>        add_action( 'wp_loaded', array( $this, 'flush_rewrite_rules' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !empty( self::$version ) ) {&nbsp;</div></li><li><div>            $this-&gt;run();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Load the plugin textdomain and set default constants&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function plugins_loaded () {&nbsp;</div></li><li><div>        if ( !defined( 'PODS_LIGHT' ) )&nbsp;</div></li><li><div>            define( 'PODS_LIGHT', false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !defined( 'PODS_TABLELESS' ) )&nbsp;</div></li><li><div>            define( 'PODS_TABLELESS', false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        load_plugin_textdomain( 'pods', false, dirname( plugin_basename( PODS_DIR . 'init.php' ) ) . '/languages/' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Load Pods Components&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function load_components () {&nbsp;</div></li><li><div>        if ( !defined( 'PODS_LIGHT' ) || !PODS_LIGHT )&nbsp;</div></li><li><div>            self::$components = pods_components();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Load Pods Meta&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function load_meta () {&nbsp;</div></li><li><div>        self::$meta = pods_meta()-&gt;core();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Set up the Pods core&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function core () {&nbsp;</div></li><li><div>        // Session start&nbsp;</div></li><li><div>        pods_session_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_shortcode( 'pods', 'pods_shortcode' );&nbsp;</div></li><li><div>        add_shortcode( 'pods-form', 'pods_shortcode_form' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $security_settings = array(&nbsp;</div></li><li><div>            'pods_disable_file_browser' =&gt; 0, &nbsp;</div></li><li><div>            'pods_files_require_login' =&gt; 1, &nbsp;</div></li><li><div>            'pods_files_require_login_cap' =&gt; '', &nbsp;</div></li><li><div>            'pods_disable_file_upload' =&gt; 0, &nbsp;</div></li><li><div>            'pods_upload_require_login' =&gt; 1, &nbsp;</div></li><li><div>            'pods_upload_require_login_cap' =&gt; ''&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $security_settings as $security_setting =&gt; $setting ) {&nbsp;</div></li><li><div>            $setting = get_option( $security_setting );&nbsp;</div></li><li><div>            if ( !empty( $setting ) )&nbsp;</div></li><li><div>                $security_settings[ $security_setting ] = $setting;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $security_settings as $security_setting =&gt; $setting ) {&nbsp;</div></li><li><div>            if ( 0 == $setting )&nbsp;</div></li><li><div>                $setting = false;&nbsp;</div></li><li><div>            elseif ( 1 == $setting )&nbsp;</div></li><li><div>                $setting = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( in_array( $security_setting, array( 'pods_files_require_login', 'pods_upload_require_login' ) ) ) {&nbsp;</div></li><li><div>                if ( 0 &lt; strlen( $security_settings[ $security_setting . '_cap' ] ) )&nbsp;</div></li><li><div>                    $setting = $security_settings[ $security_setting . '_cap' ];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            elseif ( in_array( $security_setting, array( 'pods_files_require_login_cap', 'pods_upload_require_login_cap' ) ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !defined( strtoupper( $security_setting ) ) )&nbsp;</div></li><li><div>                define( strtoupper( $security_setting ), $setting );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;register_pods();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $avatar = PodsForm::field_loader( 'avatar' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( method_exists( $avatar, 'get_avatar' ) )&nbsp;</div></li><li><div>            add_filter( 'get_avatar', array( $avatar, 'get_avatar' ), 10, 4 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register Scripts and Styles&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function register_assets () {&nbsp;</div></li><li><div>        if ( !wp_style_is( 'jquery-ui', 'registered' ) )&nbsp;</div></li><li><div>            wp_register_style( 'jquery-ui', PODS_URL . 'ui/css/smoothness/jquery-ui.custom.css', array(), '1.8.16' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_script( 'pods-json', PODS_URL . 'ui/js/jquery.json.js', array( 'jquery' ), '2.3' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! wp_style_is( 'jquery-qtip2', 'registered' ) ) {&nbsp;</div></li><li><div>            wp_register_style( 'jquery-qtip2', PODS_URL . 'ui/css/jquery.qtip.min.css', array(), '2.2' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! wp_script_is( 'jquery-qtip2', 'registered' ) ) {&nbsp;</div></li><li><div>            wp_register_script( 'jquery-qtip2', PODS_URL . 'ui/js/jquery.qtip.min.js', array( 'jquery' ), '2.2' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_script( 'pods', PODS_URL . 'ui/js/jquery.pods.js', array( 'jquery', 'pods-json', 'jquery-qtip2' ), PODS_VERSION );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_style( 'pods-form', PODS_URL . 'ui/css/pods-form.css', array(), PODS_VERSION );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_style( 'pods-cleditor', PODS_URL . 'ui/css/jquery.cleditor.css', array(), '1.3.0' );&nbsp;</div></li><li><div>        wp_register_script( 'pods-cleditor', PODS_URL . 'ui/js/jquery.cleditor.min.js', array( 'jquery' ), '1.3.0' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_style( 'pods-codemirror', PODS_URL . 'ui/css/codemirror.css', array(), '4.8' );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror', PODS_URL . 'ui/js/codemirror.js', array(), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-loadmode', PODS_URL . 'ui/js/codemirror/addon/mode/loadmode.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-overlay', PODS_URL . 'ui/js/codemirror/addon/mode/overlay.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-hints', PODS_URL . 'ui/js/codemirror/addon/mode/show-hint.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-mode-xml', PODS_URL . 'ui/js/codemirror/mode/xml/xml.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-mode-html', PODS_URL . 'ui/js/codemirror/mode/htmlmixed/htmlmixed.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>        wp_register_script( 'pods-codemirror-mode-css', PODS_URL . 'ui/js/codemirror/mode/css/css.js', array( 'pods-codemirror' ), '4.8', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !wp_style_is( 'jquery-ui-timepicker', 'registered' ) )&nbsp;</div></li><li><div>            wp_register_style( 'jquery-ui-timepicker', PODS_URL . 'ui/css/jquery.ui.timepicker.css', array(), '1.1.1' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !wp_script_is( 'jquery-ui-timepicker', 'registered' ) ) {&nbsp;</div></li><li><div>            wp_register_script( 'jquery-ui-timepicker', PODS_URL . 'ui/js/jquery.ui.timepicker.min.js', array(&nbsp;</div></li><li><div>                'jquery', &nbsp;</div></li><li><div>                'jquery-ui-core', &nbsp;</div></li><li><div>                'jquery-ui-datepicker', &nbsp;</div></li><li><div>                'jquery-ui-slider'&nbsp;</div></li><li><div> ), '1.1.1' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_style( 'pods-attach', PODS_URL . 'ui/css/jquery.pods.attach.css', array(), PODS_VERSION );&nbsp;</div></li><li><div>        wp_register_script( 'pods-attach', PODS_URL . 'ui/js/jquery.pods.attach.js', array(), PODS_VERSION );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_style( 'pods-select2', PODS_URL . 'ui/js/select2/select2.css', array(), '3.3.1' );&nbsp;</div></li><li><div>        wp_register_script( 'pods-select2', PODS_URL . 'ui/js/select2/select2.min.js', array( 'jquery' ), '3.3.1' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_register_script( 'pods-handlebars', PODS_URL . 'ui/js/handlebars.js', array(), '1.0.0.beta.6' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register internal Post Types&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function register_pods () {&nbsp;</div></li><li><div>        $args = array(&nbsp;</div></li><li><div>            'label' =&gt; 'Pods', &nbsp;</div></li><li><div>            'labels' =&gt; array( 'singular_name' =&gt; 'Pod' ), &nbsp;</div></li><li><div>            'public' =&gt; false, &nbsp;</div></li><li><div>            'can_export' =&gt; false, &nbsp;</div></li><li><div>            'query_var' =&gt; false, &nbsp;</div></li><li><div>            'rewrite' =&gt; false, &nbsp;</div></li><li><div>            'capability_type' =&gt; 'pods_pod', &nbsp;</div></li><li><div>            'has_archive' =&gt; false, &nbsp;</div></li><li><div>            'hierarchical' =&gt; false, &nbsp;</div></li><li><div>            'supports' =&gt; array( 'title', 'author' ), &nbsp;</div></li><li><div>            'menu_icon' =&gt; 'dashicons-pods'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args = self::object_label_fix( $args, 'post_type' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        register_post_type( '_pods_pod', apply_filters( 'pods_internal_register_post_type_pod', $args ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args = array(&nbsp;</div></li><li><div>            'label' =&gt; 'Pod Fields', &nbsp;</div></li><li><div>            'labels' =&gt; array( 'singular_name' =&gt; 'Pod Field' ), &nbsp;</div></li><li><div>            'public' =&gt; false, &nbsp;</div></li><li><div>            'can_export' =&gt; false, &nbsp;</div></li><li><div>            'query_var' =&gt; false, &nbsp;</div></li><li><div>            'rewrite' =&gt; false, &nbsp;</div></li><li><div>            'capability_type' =&gt; 'pods_pod', &nbsp;</div></li><li><div>            'has_archive' =&gt; false, &nbsp;</div></li><li><div>            'hierarchical' =&gt; true, &nbsp;</div></li><li><div>            'supports' =&gt; array( 'title', 'editor', 'author' ), &nbsp;</div></li><li><div>            'menu_icon' =&gt; 'dashicons-pods'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args = self::object_label_fix( $args, 'post_type' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        register_post_type( '_pods_field', apply_filters( 'pods_internal_register_post_type_field', $args ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Include Admin&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function admin_init () {&nbsp;</div></li><li><div>        self::$admin = pods_admin();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register Post Types and Taxonomies&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function setup_content_types ( $force = false ) {&nbsp;</div></li><li><div>        $post_types = PodsMeta::$post_types;&nbsp;</div></li><li><div>        $taxonomies = PodsMeta::$taxonomies;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $existing_post_types = get_post_types();&nbsp;</div></li><li><div>        $existing_taxonomies = get_taxonomies();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $pods_cpt_ct = pods_transient_get( 'pods_wp_cpt_ct' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $cpt_positions = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $pods_cpt_ct ) && ( !empty( $post_types ) || !empty( $taxonomies ) ) )&nbsp;</div></li><li><div>            $force = true;&nbsp;</div></li><li><div>        elseif ( !empty( $pods_cpt_ct ) && empty( $pods_cpt_ct[ 'post_types' ] ) && !empty( $post_types ) )&nbsp;</div></li><li><div>            $force = true;&nbsp;</div></li><li><div>        elseif ( !empty( $pods_cpt_ct ) && empty( $pods_cpt_ct[ 'taxonomies' ] ) && !empty( $taxonomies ) )&nbsp;</div></li><li><div>            $force = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false === $pods_cpt_ct || $force ) {&nbsp;</div></li><li><div>            /**&nbsp;</div></li><li><div>             * @var WP_Query&nbsp;</div></li><li><div>             */&nbsp;</div></li><li><div>            global $wp_query;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $reserved_query_vars = array(&nbsp;</div></li><li><div>                'post_type', &nbsp;</div></li><li><div>                'taxonomy', &nbsp;</div></li><li><div>                'output'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( is_object( $wp_query ) ) {&nbsp;</div></li><li><div>                $reserved_query_vars = array_merge( $reserved_query_vars, array_keys( $wp_query-&gt;fill_query_vars( array() ) ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $pods_cpt_ct = array(&nbsp;</div></li><li><div>                'post_types' =&gt; array(), &nbsp;</div></li><li><div>                'taxonomies' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $pods_post_types = $pods_taxonomies = array();&nbsp;</div></li><li><div>            $supported_post_types = $supported_taxonomies = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $post_types as $post_type ) {&nbsp;</div></li><li><div>                // Post Type exists already&nbsp;</div></li><li><div>                if ( isset( $pods_cpt_ct[ 'post_types' ][ $post_type[ 'name' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                elseif ( !empty( $post_type[ 'object' ] ) && isset( $existing_post_types[ $post_type[ 'object' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                elseif ( !$force && isset( $existing_post_types[ $post_type[ 'name' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $post_type[ 'options' ][ 'name' ] = $post_type[ 'name' ];&nbsp;</div></li><li><div>                $post_type = array_merge( $post_type, (array) $post_type[ 'options' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $post_type_name = pods_var( 'name', $post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Labels&nbsp;</div></li><li><div>                $cpt_label = esc_html( pods_var_raw( 'label', $post_type, ucwords( str_replace( '_', ' ', pods_var_raw( 'name', $post_type ) ) ), null, true ) );&nbsp;</div></li><li><div>                $cpt_singular = esc_html( pods_var_raw( 'label_singular', $post_type, ucwords( str_replace( '_', ' ', pods_var_raw( 'label', $post_type, $post_type_name, null, true ) ) ), null, true ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $cpt_labels = array();&nbsp;</div></li><li><div>                $cpt_labels[ 'name' ] = $cpt_label;&nbsp;</div></li><li><div>                $cpt_labels[ 'singular_name' ] = $cpt_singular;&nbsp;</div></li><li><div>                $cpt_labels[ 'menu_name' ] = pods_var_raw( 'menu_name', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'add_new' ] = pods_var_raw( 'label_add_new', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'add_new_item' ] = pods_var_raw( 'label_add_new_item', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'new_item' ] = pods_var_raw( 'label_new_item', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'edit' ] = pods_var_raw( 'label_edit', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'edit_item' ] = pods_var_raw( 'label_edit_item', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'view' ] = pods_var_raw( 'label_view', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'view_item' ] = pods_var_raw( 'label_view_item', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'all_items' ] = pods_var_raw( 'label_all_items', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'search_items' ] = pods_var_raw( 'label_search_items', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'not_found' ] = pods_var_raw( 'label_not_found', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'not_found_in_trash' ] = pods_var_raw( 'label_not_found_in_trash', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'parent' ] = pods_var_raw( 'label_parent', $post_type, '', null, true );&nbsp;</div></li><li><div>                $cpt_labels[ 'parent_item_colon' ] = pods_var_raw( 'label_parent_item_colon', $post_type, '', null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Supported&nbsp;</div></li><li><div>                $cpt_supported = array(&nbsp;</div></li><li><div>                    'title' =&gt; (boolean) pods_var( 'supports_title', $post_type, false ), &nbsp;</div></li><li><div>                    'editor' =&gt; (boolean) pods_var( 'supports_editor', $post_type, false ), &nbsp;</div></li><li><div>                    'author' =&gt; (boolean) pods_var( 'supports_author', $post_type, false ), &nbsp;</div></li><li><div>                    'thumbnail' =&gt; (boolean) pods_var( 'supports_thumbnail', $post_type, false ), &nbsp;</div></li><li><div>                    'excerpt' =&gt; (boolean) pods_var( 'supports_excerpt', $post_type, false ), &nbsp;</div></li><li><div>                    'trackbacks' =&gt; (boolean) pods_var( 'supports_trackbacks', $post_type, false ), &nbsp;</div></li><li><div>                    'custom-fields' =&gt; (boolean) pods_var( 'supports_custom_fields', $post_type, false ), &nbsp;</div></li><li><div>                    'comments' =&gt; (boolean) pods_var( 'supports_comments', $post_type, false ), &nbsp;</div></li><li><div>                    'revisions' =&gt; (boolean) pods_var( 'supports_revisions', $post_type, false ), &nbsp;</div></li><li><div>                    'page-attributes' =&gt; (boolean) pods_var( 'supports_page_attributes', $post_type, false ), &nbsp;</div></li><li><div>                    'post-formats' =&gt; (boolean) pods_var( 'supports_post_formats', $post_type, false )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Custom Supported&nbsp;</div></li><li><div>                $cpt_supported_custom = pods_var( 'supports_custom', $post_type, '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( !empty( $cpt_supported_custom ) ) {&nbsp;</div></li><li><div>                    $cpt_supported_custom = explode( ', ', $cpt_supported_custom );&nbsp;</div></li><li><div>                    $cpt_supported_custom = array_filter( array_unique( $cpt_supported_custom ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ( $cpt_supported_custom as $cpt_support ) {&nbsp;</div></li><li><div>                        $cpt_supported[ $cpt_support ] = true;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Genesis Support&nbsp;</div></li><li><div>                if ( function_exists( 'genesis' ) ) {&nbsp;</div></li><li><div>                    $cpt_supported[ 'genesis-seo' ] = (boolean) pods_var( 'supports_genesis_seo', $post_type, false );&nbsp;</div></li><li><div>                    $cpt_supported[ 'genesis-layouts' ] = (boolean) pods_var( 'supports_genesis_layouts', $post_type, false );&nbsp;</div></li><li><div>                    $cpt_supported[ 'genesis-simple-sidebars' ] = (boolean) pods_var( 'supports_genesis_simple_sidebars', $post_type, false );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // YARPP Support&nbsp;</div></li><li><div>                if ( defined( 'YARPP_VERSION' ) ) {&nbsp;</div></li><li><div>                    $cpt_supported[ 'yarpp_support' ] = (boolean) pods_var( 'supports_yarpp_support', $post_type, false );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Jetpack Support&nbsp;</div></li><li><div>                if ( class_exists( 'Jetpack' ) ) {&nbsp;</div></li><li><div>                    $cpt_supported[ 'supports_jetpack_publicize' ] = (boolean) pods_var( 'supports_jetpack_publicize', $post_type, false );&nbsp;</div></li><li><div>                    $cpt_supported[ 'supports_jetpack_markdown' ] = (boolean) pods_var( 'supports_jetpack_markdown', $post_type, false );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // WP needs something, if this was empty and none were enabled, it would show title+editor pre 3.5 :(&nbsp;</div></li><li><div>                $cpt_supports = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( !pods_version_check( 'wp', '3.5' ) )&nbsp;</div></li><li><div>                    $cpt_supports = array( '_bug_fix_pre_35' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ( $cpt_supported as $cpt_support =&gt; $supported ) {&nbsp;</div></li><li><div>                    if ( true === $supported )&nbsp;</div></li><li><div>                        $cpt_supports[] = $cpt_support;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( empty( $cpt_supports ) && pods_version_check( 'wp', '3.5' ) )&nbsp;</div></li><li><div>                    $cpt_supports = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Rewrite&nbsp;</div></li><li><div>                $cpt_rewrite = (boolean) pods_var( 'rewrite', $post_type, true );&nbsp;</div></li><li><div>                $cpt_rewrite_array = array(&nbsp;</div></li><li><div>                    'slug' =&gt; pods_var( 'rewrite_custom_slug', $post_type, str_replace( '_', '-', $post_type_name ), null, true ), &nbsp;</div></li><li><div>                    'with_front' =&gt; (boolean) pods_var( 'rewrite_with_front', $post_type, true ), &nbsp;</div></li><li><div>                    'feeds' =&gt; (boolean) pods_var( 'rewrite_feeds', $post_type, (boolean) pods_var( 'has_archive', $post_type, false ) ), &nbsp;</div></li><li><div>                    'pages' =&gt; (boolean) pods_var( 'rewrite_pages', $post_type, true )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( false !== $cpt_rewrite )&nbsp;</div></li><li><div>                    $cpt_rewrite = $cpt_rewrite_array;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $capability_type = pods_var( 'capability_type', $post_type, 'post' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( 'custom' == $capability_type )&nbsp;</div></li><li><div>                    $capability_type = pods_var( 'capability_type_custom', $post_type, 'post' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $show_in_menu = (boolean) pods_var( 'show_in_menu', $post_type, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( $show_in_menu && 0 &lt; strlen( pods_var_raw( 'menu_location_custom', $post_type ) ) )&nbsp;</div></li><li><div>                    $show_in_menu = pods_var_raw( 'menu_location_custom', $post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $menu_icon = pods_var( 'menu_icon', $post_type, null, null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( !empty( $menu_icon ) ) {&nbsp;</div></li><li><div>                    $menu_icon = pods_evaluate_tags( $menu_icon );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Register Post Type&nbsp;</div></li><li><div>                $pods_post_types[ $post_type_name ] = array(&nbsp;</div></li><li><div>                    'label' =&gt; $cpt_label, &nbsp;</div></li><li><div>                    'labels' =&gt; $cpt_labels, &nbsp;</div></li><li><div>                    'description' =&gt; esc_html( pods_var_raw( 'description', $post_type ) ), &nbsp;</div></li><li><div>                    'public' =&gt; (boolean) pods_var( 'public', $post_type, true ), &nbsp;</div></li><li><div>                    'publicly_queryable' =&gt; (boolean) pods_var( 'publicly_queryable', $post_type, (boolean) pods_var( 'public', $post_type, true ) ), &nbsp;</div></li><li><div>                    'exclude_from_search' =&gt; (boolean) pods_var( 'exclude_from_search', $post_type, ( (boolean) pods_var( 'public', $post_type, true ) ? false : true ) ), &nbsp;</div></li><li><div>                    'show_ui' =&gt; (boolean) pods_var( 'show_ui', $post_type, (boolean) pods_var( 'public', $post_type, true ) ), &nbsp;</div></li><li><div>                    'show_in_menu' =&gt; $show_in_menu, &nbsp;</div></li><li><div>                    'show_in_nav_menus' =&gt; (boolean) pods_var( 'show_in_nav_menus', $post_type, (boolean) pods_var( 'public', $post_type, true ) ), &nbsp;</div></li><li><div>                    'show_in_admin_bar' =&gt; (boolean) pods_var( 'show_in_admin_bar', $post_type, (boolean) pods_var( 'show_in_menu', $post_type, true ) ), &nbsp;</div></li><li><div>                    'menu_position' =&gt; (int) pods_var( 'menu_position', $post_type, 0, null, true ), &nbsp;</div></li><li><div>                    'menu_icon' =&gt; $menu_icon, &nbsp;</div></li><li><div>                    'capability_type' =&gt; $capability_type, &nbsp;</div></li><li><div>                    //'capabilities' =&gt; $cpt_capabilities, &nbsp;</div></li><li><div>                    'map_meta_cap' =&gt; (boolean) pods_var( 'capability_type_extra', $post_type, true ), &nbsp;</div></li><li><div>                    'hierarchical' =&gt; (boolean) pods_var( 'hierarchical', $post_type, false ), &nbsp;</div></li><li><div>                    'supports' =&gt; $cpt_supports, &nbsp;</div></li><li><div>                    //'register_meta_box_cb' =&gt; array($this, 'manage_meta_box'), &nbsp;</div></li><li><div>                    //'permalink_epmask' =&gt; EP_PERMALINK, &nbsp;</div></li><li><div>                    'has_archive' =&gt; pods_v( 'has_archive_slug', $post_type, (boolean) pods_v( 'has_archive', $post_type, false ), true ), &nbsp;</div></li><li><div>                    'rewrite' =&gt; $cpt_rewrite, &nbsp;</div></li><li><div>                    'query_var' =&gt; ( false !== (boolean) pods_var( 'query_var', $post_type, true ) ? pods_var( 'query_var_string', $post_type, $post_type_name, null, true ) : false ), &nbsp;</div></li><li><div>                    'can_export' =&gt; (boolean) pods_var( 'can_export', $post_type, true )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // YARPP doesn't use 'supports' array option (yet)&nbsp;</div></li><li><div>                if ( ! empty( $cpt_supports[ 'yarpp_support' ] ) ) {&nbsp;</div></li><li><div>                    $pods_post_types[ $post_type_name ][ 'yarpp_support' ] = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Prevent reserved query_var issues&nbsp;</div></li><li><div>                if ( in_array( $pods_post_types[ $post_type_name ][ 'query_var' ], $reserved_query_vars ) ) {&nbsp;</div></li><li><div>                    $pods_post_types[ $post_type_name ][ 'query_var' ] = 'post_type_' . $pods_post_types[ $post_type_name ][ 'query_var' ];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( 25 == $pods_post_types[ $post_type_name ][ 'menu_position' ] )&nbsp;</div></li><li><div>                    $pods_post_types[ $post_type_name ][ 'menu_position' ]++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( $pods_post_types[ $post_type_name ][ 'menu_position' ] &lt; 1 || in_array( $pods_post_types[ $post_type_name ][ 'menu_position' ], $cpt_positions ) )&nbsp;</div></li><li><div>                    unset( $pods_post_types[ $post_type_name ][ 'menu_position' ] );&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    $cpt_positions[] = $pods_post_types[ $post_type_name ][ 'menu_position' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // This would be nice if WP supported floats in menu_position&nbsp;</div></li><li><div>                    // $pods_post_types[ $post_type_name ][ 'menu_position' ] = $pods_post_types[ $post_type_name ][ 'menu_position' ] . '.1';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Taxonomies&nbsp;</div></li><li><div>                $cpt_taxonomies = array();&nbsp;</div></li><li><div>                $_taxonomies = get_taxonomies();&nbsp;</div></li><li><div>                $_taxonomies = array_merge_recursive( $_taxonomies, $pods_taxonomies );&nbsp;</div></li><li><div>                $ignore = array( 'nav_menu', 'link_category', 'post_format' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ( $_taxonomies as $taxonomy =&gt; $label ) {&nbsp;</div></li><li><div>                    if ( in_array( $taxonomy, $ignore ) )&nbsp;</div></li><li><div>                        continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( false !== (boolean) pods_var( 'built_in_taxonomies_' . $taxonomy, $post_type, false ) ) {&nbsp;</div></li><li><div>                        $cpt_taxonomies[] = $taxonomy;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( isset( $supported_post_types[ $taxonomy ] ) && !in_array( $post_type_name, $supported_post_types[ $taxonomy ] ) )&nbsp;</div></li><li><div>                            $supported_post_types[ $taxonomy ][] = $post_type_name;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( isset( $supported_taxonomies[ $post_type_name ] ) )&nbsp;</div></li><li><div>                    $supported_taxonomies[ $post_type_name ] = array_merge( (array) $supported_taxonomies[ $post_type_name ], $cpt_taxonomies );&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                    $supported_taxonomies[ $post_type_name ] = $cpt_taxonomies;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $taxonomies as $taxonomy ) {&nbsp;</div></li><li><div>                // Taxonomy Type exists already&nbsp;</div></li><li><div>                if ( isset( $pods_cpt_ct[ 'taxonomies' ][ $taxonomy[ 'name' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                elseif ( !empty( $taxonomy[ 'object' ] ) && isset( $existing_taxonomies[ $taxonomy[ 'object' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                elseif ( !$force && isset( $existing_taxonomies[ $taxonomy[ 'name' ] ] ) )&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $taxonomy[ 'options' ][ 'name' ] = $taxonomy[ 'name' ];&nbsp;</div></li><li><div>                $taxonomy = array_merge( $taxonomy, (array) $taxonomy[ 'options' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $taxonomy_name = pods_var( 'name', $taxonomy );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Labels&nbsp;</div></li><li><div>                $ct_label = esc_html( pods_var_raw( 'label', $taxonomy, ucwords( str_replace( '_', ' ', pods_var_raw( 'name', $taxonomy ) ) ), null, true ) );&nbsp;</div></li><li><div>                $ct_singular = esc_html( pods_var_raw( 'label_singular', $taxonomy, ucwords( str_replace( '_', ' ', pods_var_raw( 'label', $taxonomy, pods_var_raw( 'name', $taxonomy ), null, true ) ) ), null, true ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $ct_labels = array();&nbsp;</div></li><li><div>                $ct_labels[ 'name' ] = $ct_label;&nbsp;</div></li><li><div>                $ct_labels[ 'singular_name' ] = $ct_singular;&nbsp;</div></li><li><div>                $ct_labels[ 'menu_name' ] = pods_var_raw( 'menu_name', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'search_items' ] = pods_var_raw( 'label_search_items', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'popular_items' ] = pods_var_raw( 'label_popular_items', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'all_items' ] = pods_var_raw( 'label_all_items', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'parent_item' ] = pods_var_raw( 'label_parent_item', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'parent_item_colon' ] = pods_var_raw( 'label_parent_item_colon', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'edit_item' ] = pods_var_raw( 'label_edit_item', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'update_item' ] = pods_var_raw( 'label_update_item', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'add_new_item' ] = pods_var_raw( 'label_add_new_item', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'new_item_name' ] = pods_var_raw( 'label_new_item_name', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'separate_items_with_commas' ] = pods_var_raw( 'label_separate_items_with_commas', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'add_or_remove_items' ] = pods_var_raw( 'label_add_or_remove_items', $taxonomy, '', null, true );&nbsp;</div></li><li><div>                $ct_labels[ 'choose_from_most_used' ] = pods_var_raw( 'label_choose_from_the_most_used', $taxonomy, '', null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Rewrite&nbsp;</div></li><li><div>                $ct_rewrite = (boolean) pods_var( 'rewrite', $taxonomy, true );&nbsp;</div></li><li><div>                $ct_rewrite_array = array(&nbsp;</div></li><li><div>                    'slug' =&gt; pods_var( 'rewrite_custom_slug', $taxonomy, str_replace( '_', '-', $taxonomy_name ), null, true ), &nbsp;</div></li><li><div>                    'with_front' =&gt; (boolean) pods_var( 'rewrite_with_front', $taxonomy, true ), &nbsp;</div></li><li><div>                    'hierarchical' =&gt; (boolean) pods_var( 'rewrite_hierarchical', $taxonomy, (boolean) pods_var( 'hierarchical', $taxonomy, false ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( false !== $ct_rewrite )&nbsp;</div></li><li><div>                    $ct_rewrite = $ct_rewrite_array;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Register Taxonomy&nbsp;</div></li><li><div>                $pods_taxonomies[ $taxonomy_name ] = array(&nbsp;</div></li><li><div>                    'label' =&gt; $ct_label, &nbsp;</div></li><li><div>                    'labels' =&gt; $ct_labels, &nbsp;</div></li><li><div>                    'public' =&gt; (boolean) pods_var( 'public', $taxonomy, true ), &nbsp;</div></li><li><div>                    'show_in_nav_menus' =&gt; (boolean) pods_var( 'show_in_nav_menus', $taxonomy, (boolean) pods_var( 'public', $taxonomy, true ) ), &nbsp;</div></li><li><div>                    'show_ui' =&gt; (boolean) pods_var( 'show_ui', $taxonomy, (boolean) pods_var( 'public', $taxonomy, true ) ), &nbsp;</div></li><li><div>                    'show_tagcloud' =&gt; (boolean) pods_var( 'show_tagcloud', $taxonomy, (boolean) pods_var( 'show_ui', $taxonomy, (boolean) pods_var( 'public', $taxonomy, true ) ) ), &nbsp;</div></li><li><div>                    'hierarchical' =&gt; (boolean) pods_var( 'hierarchical', $taxonomy, false ), &nbsp;</div></li><li><div>                    'update_count_callback' =&gt; pods_var( 'update_count_callback', $taxonomy, null, null, true ), &nbsp;</div></li><li><div>                    'query_var' =&gt; ( false !== (boolean) pods_var( 'query_var', $taxonomy, true ) ? pods_var( 'query_var_string', $taxonomy, $taxonomy_name, null, true ) : false ), &nbsp;</div></li><li><div>                    'rewrite' =&gt; $ct_rewrite, &nbsp;</div></li><li><div>                    'show_admin_column' =&gt; (boolean) pods_var( 'show_admin_column', $taxonomy, false ), &nbsp;</div></li><li><div>                    'sort' =&gt; (boolean) pods_var( 'sort', $taxonomy, false )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( is_array( $ct_rewrite ) && !$pods_taxonomies[ $taxonomy_name ][ 'query_var' ] )&nbsp;</div></li><li><div>                    $pods_taxonomies[ $taxonomy_name ]['query_var'] = pods_var( 'query_var_string', $taxonomy, $taxonomy_name, null, true );;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Prevent reserved query_var issues&nbsp;</div></li><li><div>                if ( in_array( $pods_taxonomies[ $taxonomy_name ][ 'query_var' ], $reserved_query_vars ) ) {&nbsp;</div></li><li><div>                    $pods_taxonomies[ $taxonomy_name ][ 'query_var' ] = 'taxonomy_' . $pods_taxonomies[ $taxonomy_name ][ 'query_var' ];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Integration for Single Value Taxonomy UI&nbsp;</div></li><li><div>                if ( function_exists( 'tax_single_value_meta_box' ) ) {&nbsp;</div></li><li><div>                    $pods_taxonomies[ $taxonomy_name ][ 'single_value' ] = (boolean) pods_var( 'single_value', $taxonomy, false );&nbsp;</div></li><li><div>                    $pods_taxonomies[ $taxonomy_name ][ 'required' ] = (boolean) pods_var( 'single_value_required', $taxonomy, false );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Post Types&nbsp;</div></li><li><div>                $ct_post_types = array();&nbsp;</div></li><li><div>                $_post_types = get_post_types();&nbsp;</div></li><li><div>                $_post_types = array_merge_recursive( $_post_types, $pods_post_types );&nbsp;</div></li><li><div>                $ignore = array( 'revision' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ( $_post_types as $post_type =&gt; $options ) {&nbsp;</div></li><li><div>                    if ( in_array( $post_type, $ignore ) )&nbsp;</div></li><li><div>                        continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( false !== (boolean) pods_var( 'built_in_post_types_' . $post_type, $taxonomy, false ) ) {&nbsp;</div></li><li><div>                        $ct_post_types[] = $post_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( isset( $supported_taxonomies[ $post_type ] ) && !in_array( $taxonomy_name, $supported_taxonomies[ $post_type ] ) )&nbsp;</div></li><li><div>                            $supported_taxonomies[ $post_type ][] = $taxonomy_name;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( isset( $supported_post_types[ $taxonomy_name ] ) )&nbsp;</div></li><li><div>                    $supported_post_types[ $taxonomy_name ] = array_merge( $supported_post_types[ $taxonomy_name ], $ct_post_types );&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                    $supported_post_types[ $taxonomy_name ] = $ct_post_types;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $pods_post_types = apply_filters( 'pods_wp_post_types', $pods_post_types );&nbsp;</div></li><li><div>            $pods_taxonomies = apply_filters( 'pods_wp_taxonomies', $pods_taxonomies );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $supported_post_types = apply_filters( 'pods_wp_supported_post_types', $supported_post_types );&nbsp;</div></li><li><div>            $supported_taxonomies = apply_filters( 'pods_wp_supported_taxonomies', $supported_taxonomies );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $pods_taxonomies as $taxonomy =&gt; $options ) {&nbsp;</div></li><li><div>                $ct_post_types = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( isset( $supported_post_types[ $taxonomy ] ) && !empty( $supported_post_types[ $taxonomy ] ) )&nbsp;</div></li><li><div>                    $ct_post_types = $supported_post_types[ $taxonomy ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $pods_cpt_ct[ 'taxonomies' ][ $taxonomy ] = array(&nbsp;</div></li><li><div>                    'post_types' =&gt; $ct_post_types, &nbsp;</div></li><li><div>                    'options' =&gt; $options&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $pods_post_types as $post_type =&gt; $options ) {&nbsp;</div></li><li><div>                if ( isset( $supported_taxonomies[ $post_type ] ) && !empty( $supported_taxonomies[ $post_type ] ) )&nbsp;</div></li><li><div>                    $options[ 'taxonomies' ] = $supported_taxonomies[ $post_type ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $pods_cpt_ct[ 'post_types' ][ $post_type ] = $options;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_transient_set( 'pods_wp_cpt_ct', $pods_cpt_ct );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $pods_cpt_ct[ 'taxonomies' ] as $taxonomy =&gt; $options ) {&nbsp;</div></li><li><div>            if ( isset( self::$content_types_registered[ 'taxonomies' ] ) && in_array( $taxonomy, self::$content_types_registered[ 'taxonomies' ] ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $ct_post_types = $options[ 'post_types' ];&nbsp;</div></li><li><div>            $options = $options[ 'options' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $options = apply_filters( 'pods_register_taxonomy_' . $taxonomy, $options, $taxonomy );&nbsp;</div></li><li><div>            $options = apply_filters( 'pods_register_taxonomy', $options, $taxonomy );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $options = self::object_label_fix( $options, 'taxonomy' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Max length for taxonomies are 32 characters&nbsp;</div></li><li><div>            $taxonomy = substr( $taxonomy, 0, 32 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // i18n compatibility for plugins that override it&nbsp;</div></li><li><div>            if ( is_array( $options[ 'rewrite' ] ) && isset( $options[ 'rewrite' ][ 'slug' ] ) && !empty( $options[ 'rewrite' ][ 'slug' ] ) )&nbsp;</div></li><li><div>                $options[ 'rewrite' ][ 'slug' ] = _x( $options[ 'rewrite' ][ 'slug' ], 'URL taxonomy slug', 'pods' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( 1 == pods_var( 'pods_debug_register', 'get', 0 ) && pods_is_admin( array( 'pods' ) ) )&nbsp;</div></li><li><div>                pods_debug( array( $taxonomy, $ct_post_types, $options ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            register_taxonomy( $taxonomy, $ct_post_types, $options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !isset( self::$content_types_registered[ 'taxonomies' ] ) )&nbsp;</div></li><li><div>                self::$content_types_registered[ 'taxonomies' ] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            self::$content_types_registered[ 'taxonomies' ][] = $taxonomy;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $pods_cpt_ct[ 'post_types' ] as $post_type =&gt; $options ) {&nbsp;</div></li><li><div>            if ( isset( self::$content_types_registered[ 'post_types' ] ) && in_array( $post_type, self::$content_types_registered[ 'post_types' ] ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $options = apply_filters( 'pods_register_post_type_' . $post_type, $options, $post_type );&nbsp;</div></li><li><div>            $options = apply_filters( 'pods_register_post_type', $options, $post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $options = self::object_label_fix( $options, 'post_type' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Max length for post types are 20 characters&nbsp;</div></li><li><div>            $post_type = substr( $post_type, 0, 20 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // i18n compatibility for plugins that override it&nbsp;</div></li><li><div>            if ( is_array( $options[ 'rewrite' ] ) && isset( $options[ 'rewrite' ][ 'slug' ] ) && !empty( $options[ 'rewrite' ][ 'slug' ] ) )&nbsp;</div></li><li><div>                $options[ 'rewrite' ][ 'slug' ] = _x( $options[ 'rewrite' ][ 'slug' ], 'URL slug', 'pods' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( 1 == pods_var( 'pods_debug_register', 'get', 0 ) && pods_is_admin( array( 'pods' ) ) )&nbsp;</div></li><li><div>                pods_debug( array( $post_type, $options ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            register_post_type( $post_type, $options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !isset( self::$content_types_registered[ 'post_types' ] ) )&nbsp;</div></li><li><div>                self::$content_types_registered[ 'post_types' ] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            self::$content_types_registered[ 'post_types' ][] = $post_type;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Check if we need to flush WordPress rewrite rules&nbsp;</div></li><li><div>     * This gets run during 'init' action late in the game to give other plugins time to register their rewrite rules&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function flush_rewrite_rules() {&nbsp;</div></li><li><div>        $flush = pods_transient_get( 'pods_flush_rewrites' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 1 == $flush ) {&nbsp;</div></li><li><div>            global $wp_rewrite;&nbsp;</div></li><li><div>            $wp_rewrite-&gt;flush_rules();&nbsp;</div></li><li><div>            $wp_rewrite-&gt;init();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_transient_set( 'pods_flush_rewrites', 0 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Update Post Type messages&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $messages&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     * @since 2.0.2&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function setup_updated_messages ( $messages ) {&nbsp;</div></li><li><div>        global $post, $post_ID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_types = PodsMeta::$post_types;&nbsp;</div></li><li><div>        $existing_post_types = get_post_types();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $pods_cpt_ct = pods_transient_get( 'pods_wp_cpt_ct' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $pods_cpt_ct ) || empty( $post_types ) )&nbsp;</div></li><li><div>            return $messages;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $post_types as $post_type ) {&nbsp;</div></li><li><div>            if ( !isset( $pods_cpt_ct[ 'post_types' ][ $post_type[ 'name' ] ] ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $labels = self::object_label_fix( $pods_cpt_ct[ 'post_types' ][ $post_type[ 'name' ] ], 'post_type' );&nbsp;</div></li><li><div>            $labels = $labels[ 'labels' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $messages[ $post_type[ 'name' ] ] = array(&nbsp;</div></li><li><div>                1 =&gt; sprintf( __( '%s updated. &lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;', 'pods' ), $labels[ 'singular_name' ], esc_url( get_permalink( $post_ID ) ), $labels[ 'view_item' ] ), &nbsp;</div></li><li><div>                2 =&gt; __( 'Custom field updated.', 'pods' ), &nbsp;</div></li><li><div>                3 =&gt; __( 'Custom field deleted.', 'pods' ), &nbsp;</div></li><li><div>                4 =&gt; sprintf( __( '%s updated.', 'pods' ), $labels[ 'singular_name' ] ), &nbsp;</div></li><li><div>                /** translators: %s: date and time of the revision */&nbsp;</div></li><li><div>                5 =&gt; isset( $_GET[ 'revision' ] ) ? sprintf( __( '%s restored to revision from %s', 'pods' ), $labels[ 'singular_name' ], wp_post_revision_title( (int) $_GET[ 'revision' ], false ) ) : false, &nbsp;</div></li><li><div>                6 =&gt; sprintf( __( '%s published. &lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;', 'pods' ), $labels[ 'singular_name' ], esc_url( get_permalink( $post_ID ) ), $labels[ 'view_item' ] ), &nbsp;</div></li><li><div>                7 =&gt; sprintf( __( '%s saved.', 'pods' ), $labels[ 'singular_name' ] ), &nbsp;</div></li><li><div>                8 =&gt; sprintf( __( '%s submitted. &lt;a target=&quot;_blank&quot; href=&quot;%s&quot;&gt;Preview %s&lt;/a&gt;', 'pods' ), $labels[ 'singular_name' ], esc_url( add_query_arg( 'preview', 'true', get_permalink( $post_ID ) ) ), $labels[ 'singular_name' ] ), &nbsp;</div></li><li><div>                9 =&gt; sprintf( __( '%s scheduled for: &lt;strong&gt;%s&lt;/strong&gt;. &lt;a target=&quot;_blank&quot; href=&quot;%s&quot;&gt;Preview %s&lt;/a&gt;', 'pods' ), &nbsp;</div></li><li><div>                    $labels[ 'singular_name' ], &nbsp;</div></li><li><div>                    // translators: Publish box date format, see http://php.net/date&nbsp;</div></li><li><div>                    date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post-&gt;post_date ) ), &nbsp;</div></li><li><div>                    esc_url( get_permalink( $post_ID ) ), &nbsp;</div></li><li><div>                    $labels[ 'singular_name' ]&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                10 =&gt; sprintf( __( '%s draft updated. &lt;a target=&quot;_blank&quot; href=&quot;%s&quot;&gt;Preview %s&lt;/a&gt;', 'pods' ), $labels[ 'singular_name' ], esc_url( add_query_arg( 'preview', 'true', get_permalink( $post_ID ) ) ), $labels[ 'singular_name' ] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( false === (boolean) $pods_cpt_ct[ 'post_types' ][ $post_type[ 'name' ] ][ 'public' ] ) {&nbsp;</div></li><li><div>                $messages[ $post_type[ 'name' ] ][ 1 ] = sprintf( __( '%s updated.', 'pods' ), $labels[ 'singular_name' ] );&nbsp;</div></li><li><div>                $messages[ $post_type[ 'name' ] ][ 6 ] = sprintf( __( '%s published.', 'pods' ), $labels[ 'singular_name' ] );&nbsp;</div></li><li><div>                $messages[ $post_type[ 'name' ] ][ 8 ] = sprintf( __( '%s submitted.', 'pods' ), $labels[ 'singular_name' ] );&nbsp;</div></li><li><div>                $messages[ $post_type[ 'name' ] ][ 9 ] = sprintf( __( '%s scheduled for: &lt;strong&gt;%1$s&lt;/strong&gt;.', 'pods' ), &nbsp;</div></li><li><div>                    $labels[ 'singular_name' ], &nbsp;</div></li><li><div>                    // translators: Publish box date format, see http://php.net/date&nbsp;</div></li><li><div>                    date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post-&gt;post_date ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                $messages[ $post_type[ 'name' ] ][ 10 ] = sprintf( __( '%s draft updated.', 'pods' ), $labels[ 'singular_name' ] );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $messages;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param $args&nbsp;</div></li><li><div>     * @param string $type&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function object_label_fix ( $args, $type = 'post_type' ) {&nbsp;</div></li><li><div>        if ( empty( $args ) || !is_array( $args ) )&nbsp;</div></li><li><div>            $args = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !isset( $args[ 'labels' ] ) || !is_array( $args[ 'labels' ] ) )&nbsp;</div></li><li><div>            $args[ 'labels' ] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $label = pods_var_raw( 'name', $args[ 'labels' ], pods_var_raw( 'label', $args, __( 'Items', 'pods' ), null, true ), null, true );&nbsp;</div></li><li><div>        $singular_label = pods_var_raw( 'singular_name', $args[ 'labels' ], pods_var_raw( 'label_singular', $args, __( 'Item', 'pods' ), null, true ), null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $labels = $args[ 'labels' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $labels[ 'name' ] = $label;&nbsp;</div></li><li><div>        $labels[ 'singular_name' ] = $singular_label;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'post_type' == $type ) {&nbsp;</div></li><li><div>            $labels[ 'menu_name' ] = pods_var_raw( 'menu_name', $labels, $label, null, true );&nbsp;</div></li><li><div>            $labels[ 'add_new' ] = pods_var_raw( 'add_new', $labels, __( 'Add New', 'pods' ), null, true );&nbsp;</div></li><li><div>            $labels[ 'add_new_item' ] = pods_var_raw( 'add_new_item', $labels, sprintf( __( 'Add New %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'new_item' ] = pods_var_raw( 'new_item', $labels, sprintf( __( 'New %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'edit' ] = pods_var_raw( 'edit', $labels, __( 'Edit', 'pods' ), null, true );&nbsp;</div></li><li><div>            $labels[ 'edit_item' ] = pods_var_raw( 'edit_item', $labels, sprintf( __( 'Edit %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'view' ] = pods_var_raw( 'view', $labels, sprintf( __( 'View %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'view_item' ] = pods_var_raw( 'view_item', $labels, sprintf( __( 'View %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'all_items' ] = pods_var_raw( 'all_items', $labels, sprintf( __( 'All %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'search_items' ] = pods_var_raw( 'search_items', $labels, sprintf( __( 'Search %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'not_found' ] = pods_var_raw( 'not_found', $labels, sprintf( __( 'No %s Found', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'not_found_in_trash' ] = pods_var_raw( 'not_found_in_trash', $labels, sprintf( __( 'No %s Found in Trash', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'parent' ] = pods_var_raw( 'parent', $labels, sprintf( __( 'Parent %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'parent_item_colon' ] = pods_var_raw( 'parent_item_colon', $labels, sprintf( __( 'Parent %s:', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        elseif ( 'taxonomy' == $type ) {&nbsp;</div></li><li><div>            $labels[ 'menu_name' ] = pods_var_raw( 'menu_name', $labels, $label, null, true );&nbsp;</div></li><li><div>            $labels[ 'search_items' ] = pods_var_raw( 'search_items', $labels, sprintf( __( 'Search %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'popular_items' ] = pods_var_raw( 'popular_items', $labels, sprintf( __( 'Popular %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'all_items' ] = pods_var_raw( 'all_items', $labels, sprintf( __( 'All %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'parent_item' ] = pods_var_raw( 'parent_item', $labels, sprintf( __( 'Parent %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'parent_item_colon' ] = pods_var_raw( 'parent_item_colon', $labels, sprintf( __( 'Parent %s :', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'edit_item' ] = pods_var_raw( 'edit_item', $labels, sprintf( __( 'Edit %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'update_item' ] = pods_var_raw( 'update_item', $labels, sprintf( __( 'Update %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'add_new_item' ] = pods_var_raw( 'add_new_item', $labels, sprintf( __( 'Add New %s', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'new_item_name' ] = pods_var_raw( 'new_item_name', $labels, sprintf( __( 'New %s Name', 'pods' ), $singular_label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'separate_items_with_commas' ] = pods_var_raw( 'separate_items_with_commas', $labels, sprintf( __( 'Separate %s with commas', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'add_or_remove_items' ] = pods_var_raw( 'add_or_remove_items', $labels, sprintf( __( 'Add or remove %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>            $labels[ 'choose_from_most_used' ] = pods_var_raw( 'choose_from_most_used', $labels, sprintf( __( 'Choose from the most used %s', 'pods' ), $label ), null, true );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args[ 'labels' ] = $labels;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $args;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Activate and Install&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function activate_install () {&nbsp;</div></li><li><div>        register_activation_hook( PODS_DIR . 'init.php', array( $this, 'activate' ) );&nbsp;</div></li><li><div>        register_deactivation_hook( PODS_DIR . 'init.php', array( $this, 'deactivate' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wpmu_new_blog', array( $this, 'new_blog' ), 10, 6 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( self::$version ) || version_compare( self::$version, PODS_VERSION, '&lt;' ) || version_compare( self::$version, PODS_DB_VERSION, '&lt;=' ) || self::$upgrade_needed )&nbsp;</div></li><li><div>            $this-&gt;setup();&nbsp;</div></li><li><div>        elseif ( self::$version != PODS_VERSION ) {&nbsp;</div></li><li><div>            delete_option( 'pods_framework_version' );&nbsp;</div></li><li><div>            add_option( 'pods_framework_version', PODS_VERSION, '', 'yes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_api()-&gt;cache_flush_pods();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function activate () {&nbsp;</div></li><li><div>        global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( function_exists( 'is_multisite' ) && is_multisite() && isset( $_GET[ 'networkwide' ] ) && 1 == $_GET[ 'networkwide' ] ) {&nbsp;</div></li><li><div>            $_blog_ids = $wpdb-&gt;get_col( &quot;SELECT `blog_id` FROM `{$wpdb-&gt;blogs}`&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ( $_blog_ids as $_blog_id ) {&nbsp;</div></li><li><div>                $this-&gt;setup( $_blog_id );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $this-&gt;setup();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function deactivate () {&nbsp;</div></li><li><div>        pods_api()-&gt;cache_flush_pods();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function needs_upgrade ( $current = null, $last = null ) {&nbsp;</div></li><li><div>        if ( null === $current )&nbsp;</div></li><li><div>            $current = self::$version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( null === $last )&nbsp;</div></li><li><div>            $last = self::$version_last;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $upgrade_needed = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !empty( $current ) ) {&nbsp;</div></li><li><div>            foreach ( self::$upgrades as $old_version =&gt; $new_version ) {&nbsp;</div></li><li><div>                /**if ( '2.1.0' == $new_version && ( is_developer() ) )&nbsp;</div></li><li><div>                    continue;*/&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( version_compare( $last, $old_version, '&gt;=' )&nbsp;</div></li><li><div>                     && version_compare( $last, $new_version, '&lt;' )&nbsp;</div></li><li><div>                     && version_compare( $current, $new_version, '&gt;=' )&nbsp;</div></li><li><div>                     && 1 != self::$upgraded&nbsp;</div></li><li><div> ) {&nbsp;</div></li><li><div>                    $upgrade_needed = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $upgrade_needed;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param $_blog_id&nbsp;</div></li><li><div>     * @param $user_id&nbsp;</div></li><li><div>     * @param $domain&nbsp;</div></li><li><div>     * @param $path&nbsp;</div></li><li><div>     * @param $site_id&nbsp;</div></li><li><div>     * @param $meta&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function new_blog ( $_blog_id, $user_id, $domain, $path, $site_id, $meta ) {&nbsp;</div></li><li><div>        if ( function_exists( 'is_multisite' ) && is_multisite() && is_plugin_active_for_network( basename( PODS_DIR ) . '/init.php' ) )&nbsp;</div></li><li><div>            $this-&gt;setup( $_blog_id );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param null $_blog_id&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function setup ( $_blog_id = null ) {&nbsp;</div></li><li><div>        global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Switch DB table prefixes&nbsp;</div></li><li><div>        if ( null !== $_blog_id && $_blog_id != $wpdb-&gt;blogid )&nbsp;</div></li><li><div>            switch_to_blog( pods_absint( $_blog_id ) );&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $_blog_id = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Setup DB tables&nbsp;</div></li><li><div>        $pods_version = get_option( 'pods_framework_version' );&nbsp;</div></li><li><div>        $pods_version_last = get_option( 'pods_framework_version_last' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Install Pods&nbsp;</div></li><li><div>        if ( empty( $pods_version ) ) {&nbsp;</div></li><li><div>            pods_upgrade()-&gt;install( $_blog_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $old_version = get_option( 'pods_version' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !empty( $old_version ) ) {&nbsp;</div></li><li><div>                if ( false === strpos( $old_version, '.' ) )&nbsp;</div></li><li><div>                    $old_version = pods_version_to_point( $old_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                delete_option( 'pods_framework_version_last' );&nbsp;</div></li><li><div>                add_option( 'pods_framework_version_last', $pods_version, '', 'yes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                self::$version_last = $old_version;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // Upgrade Wizard needed&nbsp;</div></li><li><div>        elseif ( $this-&gt;needs_upgrade( $pods_version, $pods_version_last ) ) {&nbsp;</div></li><li><div>            // Do not do anything&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // Update Pods and run any required DB updates&nbsp;</div></li><li><div>        elseif ( version_compare( $pods_version, PODS_VERSION, '&lt;=' ) ) {&nbsp;</div></li><li><div>            if ( false !== apply_filters( 'pods_update_run', null, PODS_VERSION, $pods_version, $_blog_id ) && !isset( $_GET[ 'pods_bypass_update' ] ) ) {&nbsp;</div></li><li><div>                do_action( 'pods_update', PODS_VERSION, $pods_version, $_blog_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Update 2.0 alpha / beta sites&nbsp;</div></li><li><div>                if ( version_compare( '2.0.0-a-1', $pods_version, '&lt;=' ) && version_compare( $pods_version, '2.0.0-b-15', '&lt;=' ) )&nbsp;</div></li><li><div>                    include( PODS_DIR . 'sql/update-2.0-beta.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( version_compare( $pods_version, PODS_DB_VERSION, '&lt;=' ) )&nbsp;</div></li><li><div>                    include( PODS_DIR . 'sql/update.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                do_action( 'pods_update_post', PODS_VERSION, $pods_version, $_blog_id );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            delete_option( 'pods_framework_version_last' );&nbsp;</div></li><li><div>            add_option( 'pods_framework_version_last', $pods_version, '', 'yes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            self::$version_last = $pods_version;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        delete_option( 'pods_framework_version' );&nbsp;</div></li><li><div>        add_option( 'pods_framework_version', PODS_VERSION, '', 'yes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        delete_option( 'pods_framework_db_version' );&nbsp;</div></li><li><div>        add_option( 'pods_framework_db_version', PODS_DB_VERSION, '', 'yes' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        pods_api()-&gt;cache_flush_pods();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Restore DB table prefix (if switched)&nbsp;</div></li><li><div>        if ( null !== $_blog_id )&nbsp;</div></li><li><div>            restore_current_blog();&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $this-&gt;run();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param null $_blog_id&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function reset ( $_blog_id = null ) {&nbsp;</div></li><li><div>        global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Switch DB table prefixes&nbsp;</div></li><li><div>        if ( null !== $_blog_id && $_blog_id != $wpdb-&gt;blogid )&nbsp;</div></li><li><div>            switch_to_blog( pods_absint( $_blog_id ) );&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $_blog_id = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $api = pods_api();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $pods = $api-&gt;load_pods( array( 'names_ids' =&gt; true ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $pods as $pod_id =&gt; $pod_label ) {&nbsp;</div></li><li><div>            $api-&gt;delete_pod( array( 'id' =&gt; $pod_id ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $templates = $api-&gt;load_templates();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $templates as $template ) {&nbsp;</div></li><li><div>            $api-&gt;delete_template( array( 'id' =&gt; $template[ 'id' ] ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $pages = $api-&gt;load_pages();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $pages as $page ) {&nbsp;</div></li><li><div>            $api-&gt;delete_page( array( 'id' =&gt; $page[ 'id' ] ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $helpers = $api-&gt;load_helpers();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $helpers as $helper ) {&nbsp;</div></li><li><div>            $api-&gt;delete_helper( array( 'id' =&gt; $helper[ 'id' ] ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tables = $wpdb-&gt;get_results( &quot;SHOW TABLES LIKE '{$wpdb-&gt;prefix}pods%'&quot;, ARRAY_N );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !empty( $tables ) ) {&nbsp;</div></li><li><div>            foreach ( $tables as $table ) {&nbsp;</div></li><li><div>                $table = $table[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                pods_query( &quot;DROP TABLE `{$table}`&quot;, false );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Remove any orphans&nbsp;</div></li><li><div>        $wpdb-&gt;query( &quot;&nbsp;</div></li><li><div>                DELETE `p`, `pm`&nbsp;</div></li><li><div>                FROM `{$wpdb-&gt;posts}` AS `p`&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;postmeta}` AS `pm`&nbsp;</div></li><li><div>                    ON `pm`.`post_id` = `p`.`ID`&nbsp;</div></li><li><div>                WHERE&nbsp;</div></li><li><div>                    `p`.`post_type` LIKE '_pods_%'&nbsp;</div></li><li><div>            &quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        delete_option( 'pods_framework_version' );&nbsp;</div></li><li><div>        delete_option( 'pods_framework_db_version' );&nbsp;</div></li><li><div>        delete_option( 'pods_framework_upgrade_2_0' );&nbsp;</div></li><li><div>        delete_option( 'pods_framework_upgraded_1_x' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // @todo Make sure all entries are being cleaned and do something about the pods_framework_upgrade_{version} dynamic entries created by PodsUpgrade&nbsp;</div></li><li><div>        delete_option( 'pods_framework_upgrade_2_0_0' );&nbsp;</div></li><li><div>        delete_option( 'pods_framework_upgrade_2_0_sister_ids' );&nbsp;</div></li><li><div>        delete_option( 'pods_framework_version_last' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        delete_option( 'pods_component_settings' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $api-&gt;cache_flush_pods();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        pods_transient_clear( 'pods_flush_rewrites' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$version = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Restore DB table prefix (if switched)&nbsp;</div></li><li><div>        if ( null !== $_blog_id )&nbsp;</div></li><li><div>            restore_current_blog();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function run () {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! did_action( 'plugins_loaded' ) ) {&nbsp;</div></li><li><div>            add_action( 'plugins_loaded', array( $this, 'load_components' ), 11 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $this-&gt;load_components();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! did_action( 'setup_theme' ) ) {&nbsp;</div></li><li><div>            add_action( 'setup_theme', array( $this, 'load_meta' ), 14 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $this-&gt;load_meta();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! did_action( 'init' ) ) {&nbsp;</div></li><li><div>            add_action( 'init', array( $this, 'core' ), 11 );&nbsp;</div></li><li><div>            add_action( 'init', array( $this, 'add_rest_support' ), 12 );&nbsp;</div></li><li><div>            add_action( 'init', array( $this, 'setup_content_types' ), 11 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( is_admin() ) {&nbsp;</div></li><li><div>                add_action( 'init', array( $this, 'admin_init' ), 12 );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            $this-&gt;core();&nbsp;</div></li><li><div>            $this-&gt;add_rest_support();&nbsp;</div></li><li><div>            $this-&gt;setup_content_types();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( is_admin() ) {&nbsp;</div></li><li><div>                $this-&gt;admin_init();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_enqueue_scripts', array( $this, 'register_assets' ), 15 );&nbsp;</div></li><li><div>        add_action( 'admin_enqueue_scripts', array( $this, 'register_assets' ), 15 );&nbsp;</div></li><li><div>        add_action( 'login_enqueue_scripts', array( $this, 'register_assets' ), 15 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'post_updated_messages', array( $this, 'setup_updated_messages' ), 10, 1 );&nbsp;</div></li><li><div>        add_action( 'delete_attachment', array( $this, 'delete_attachment' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register widgets&nbsp;</div></li><li><div>        add_action( 'widgets_init', array( $this, 'register_widgets' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Show admin bar links&nbsp;</div></li><li><div>        add_action( 'admin_bar_menu', array( $this, 'admin_bar_links' ), 81 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Delete Attachments from relationships&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param int $_ID&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function delete_attachment ( $_ID ) {&nbsp;</div></li><li><div>        global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $_ID = (int) $_ID;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        do_action( 'pods_delete_attachment', $_ID );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $file_types = &quot;'&quot; . implode( &quot;', '&quot;, PodsForm::file_field_types() ) . &quot;'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !pods_tableless() ) {&nbsp;</div></li><li><div>            $sql = &quot;&nbsp;</div></li><li><div>                DELETE `rel`&nbsp;</div></li><li><div>                FROM `@wp_podsrel` AS `rel`&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;posts}` AS `p`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `p`.`post_type` = '_pods_field'&nbsp;</div></li><li><div>                        AND ( `p`.`ID` = `rel`.`field_id` OR `p`.`ID` = `rel`.`related_field_id` )&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;postmeta}` AS `pm`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `pm`.`post_id` = `p`.`ID`&nbsp;</div></li><li><div>                        AND `pm`.`meta_key` = 'type'&nbsp;</div></li><li><div>                        AND `pm`.`meta_value` IN ( {$file_types} )&nbsp;</div></li><li><div>                WHERE&nbsp;</div></li><li><div>                    `p`.`ID` IS NOT NULL&nbsp;</div></li><li><div>                    AND `pm`.`meta_id` IS NOT NULL&nbsp;</div></li><li><div>                    AND `rel`.`item_id` = {$_ID}&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_query( $sql, false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Post Meta&nbsp;</div></li><li><div>        if ( !empty( PodsMeta::$post_types ) ) {&nbsp;</div></li><li><div>            $sql =  &quot;&nbsp;</div></li><li><div>                DELETE `rel`&nbsp;</div></li><li><div>                FROM `@wp_postmeta` AS `rel`&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;posts}` AS `p`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `p`.`post_type` = '_pods_field'&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;postmeta}` AS `pm`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `pm`.`post_id` = `p`.`ID`&nbsp;</div></li><li><div>                        AND `pm`.`meta_key` = 'type'&nbsp;</div></li><li><div>                        AND `pm`.`meta_value` IN ( {$file_types} )&nbsp;</div></li><li><div>                WHERE&nbsp;</div></li><li><div>                    `p`.`ID` IS NOT NULL&nbsp;</div></li><li><div>                    AND `pm`.`meta_id` IS NOT NULL&nbsp;</div></li><li><div>                    AND `rel`.`meta_key` = `p`.`post_name`&nbsp;</div></li><li><div>                    AND `rel`.`meta_value` = '{$_ID}'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_query( $sql, false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // User Meta&nbsp;</div></li><li><div>        if ( !empty( PodsMeta::$user ) ) {&nbsp;</div></li><li><div>            $sql = &quot;&nbsp;</div></li><li><div>                DELETE `rel`&nbsp;</div></li><li><div>                FROM `@wp_usermeta` AS `rel`&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;posts}` AS `p`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `p`.`post_type` = '_pods_field'&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;postmeta}` AS `pm`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `pm`.`post_id` = `p`.`ID`&nbsp;</div></li><li><div>                        AND `pm`.`meta_key` = 'type'&nbsp;</div></li><li><div>                        AND `pm`.`meta_value` IN ( {$file_types} )&nbsp;</div></li><li><div>                WHERE&nbsp;</div></li><li><div>                    `p`.`ID` IS NOT NULL&nbsp;</div></li><li><div>                    AND `pm`.`meta_id` IS NOT NULL&nbsp;</div></li><li><div>                    AND `rel`.`meta_key` = `p`.`post_name`&nbsp;</div></li><li><div>                    AND `rel`.`meta_value` = '{$_ID}'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_query( $sql, false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Comment Meta&nbsp;</div></li><li><div>        if ( !empty( PodsMeta::$comment ) ) {&nbsp;</div></li><li><div>            $sql = &quot;&nbsp;</div></li><li><div>                DELETE `rel`&nbsp;</div></li><li><div>                FROM `@wp_commentmeta` AS `rel`&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;posts}` AS `p`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `p`.`post_type` = '_pods_field'&nbsp;</div></li><li><div>                LEFT JOIN `{$wpdb-&gt;postmeta}` AS `pm`&nbsp;</div></li><li><div>                    ON&nbsp;</div></li><li><div>                        `pm`.`post_id` = `p`.`ID`&nbsp;</div></li><li><div>                        AND `pm`.`meta_key` = 'type'&nbsp;</div></li><li><div>                        AND `pm`.`meta_value` IN ( {$file_types} )&nbsp;</div></li><li><div>                WHERE&nbsp;</div></li><li><div>                    `p`.`ID` IS NOT NULL&nbsp;</div></li><li><div>                    AND `pm`.`meta_id` IS NOT NULL&nbsp;</div></li><li><div>                    AND `rel`.`meta_key` = `p`.`post_name`&nbsp;</div></li><li><div>                    AND `rel`.`meta_value` = '{$_ID}'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_query( $sql, false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register widgets for Pods&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function register_widgets () {&nbsp;</div></li><li><div>        $widgets = array(&nbsp;</div></li><li><div>            'PodsWidgetSingle', &nbsp;</div></li><li><div>            'PodsWidgetList', &nbsp;</div></li><li><div>            'PodsWidgetField', &nbsp;</div></li><li><div>            'PodsWidgetForm', &nbsp;</div></li><li><div>            'PodsWidgetView'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $widgets as $widget ) {&nbsp;</div></li><li><div>            if ( !file_exists( PODS_DIR . 'classes/widgets/' . $widget . '.php' ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            require_once PODS_DIR . 'classes/widgets/' . $widget . '.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            register_widget( $widget );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add Admin Bar links&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function admin_bar_links () {&nbsp;</div></li><li><div>        global $wp_admin_bar, $pods;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( !is_user_logged_in() || !is_admin_bar_showing() )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $all_pods = pods_api()-&gt;load_pods( array( 'type' =&gt; 'pod', 'fields' =&gt; false ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add New item links for all pods&nbsp;</div></li><li><div>        foreach ( $all_pods as $pod ) {&nbsp;</div></li><li><div>            if ( 0 == $pod[ 'options' ][ 'show_in_menu' ] )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( !pods_is_admin( array( 'pods', 'pods_content', 'pods_add_' . $pod[ 'name' ] ) ) )&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $singular_label = pods_var_raw( 'label_singular', $pod[ 'options' ], pods_var_raw( 'label', $pod, ucwords( str_replace( '_', ' ', $pod[ 'name' ] ) ), null, true ), null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $wp_admin_bar-&gt;add_node( array(&nbsp;</div></li><li><div>                'id' =&gt; 'new-pod-' . $pod[ 'name' ], &nbsp;</div></li><li><div>                'title' =&gt; $singular_label, &nbsp;</div></li><li><div>                'parent' =&gt; 'new-content', &nbsp;</div></li><li><div>                'href' =&gt; admin_url( 'admin.php?page=pods-manage-' . $pod[ 'name' ] . '&action=add' )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add edit link if we're on a pods page&nbsp;</div></li><li><div>        if ( is_object( $pods ) && !is_wp_error( $pods ) && !empty( $pods-&gt;id ) && isset( $pods-&gt;pod_data ) && !empty( $pods-&gt;pod_data ) && 'pod' == $pods-&gt;pod_data[ 'type' ] ) {&nbsp;</div></li><li><div>            $pod = $pods-&gt;pod_data;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( pods_is_admin( array( 'pods', 'pods_content', 'pods_edit_' . $pod[ 'name' ] ) ) ) {&nbsp;</div></li><li><div>                $singular_label = pods_var_raw( 'label_singular', $pod[ 'options' ], pods_var_raw( 'label', $pod, ucwords( str_replace( '_', ' ', $pod[ 'name' ] ) ), null, true ), null, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $wp_admin_bar-&gt;add_node( array(&nbsp;</div></li><li><div>                    'title' =&gt; sprintf( __( 'Edit %s', 'pods' ), $singular_label ), &nbsp;</div></li><li><div>                    'id' =&gt; 'edit-pod', &nbsp;</div></li><li><div>                    'href' =&gt; admin_url( 'admin.php?page=pods-manage-' . $pod[ 'name' ] . '&action=edit&id=' . $pods-&gt;id() )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add REST API support to post type and taxonomy objects.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses &quot;init&quot;&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @since 2.5.6&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_rest_support() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        static $rest_support_added;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! function_exists( 'register_rest_field' ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        include_once( PODS_DIR . 'classes/PodsRESTFields.php' );&nbsp;</div></li><li><div>        include_once( PODS_DIR . 'classes/PodsRESTHandlers.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $rest_bases = pods_transient_get( 'pods_rest_bases' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $rest_bases ) ) {&nbsp;</div></li><li><div>            $pods = pods_api()-&gt;load_pods();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $rest_bases = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! empty( $pods ) && is_array( $pods ) ) {&nbsp;</div></li><li><div>                foreach ( $pods as $pod ) {&nbsp;</div></li><li><div>                    $type = $pod['type'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( in_array( $type, array( 'post_type', 'taxonomy' ) ) ) {&nbsp;</div></li><li><div>                        if ( $pod && PodsRESTHandlers::pod_extends_core_route( $pod ) ) {&nbsp;</div></li><li><div>                            $rest_bases[ $pod['name'] ] = array(&nbsp;</div></li><li><div>                                'type' =&gt; $type, &nbsp;</div></li><li><div>                                'base' =&gt; sanitize_title( pods_v( 'rest_base', $pod['options'], $pod['name'] ) ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( empty( $rest_bases ) ) {&nbsp;</div></li><li><div>                $rest_bases = 'none';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            pods_transient_set( 'pods_rest_bases', $rest_bases );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $rest_support_added ) && ! empty( $rest_bases ) && 'none' !== $rest_bases ) {&nbsp;</div></li><li><div>            foreach ( $rest_bases as $pod_name =&gt; $pod_info ) {&nbsp;</div></li><li><div>                $pod_type = $pod_info['type'];&nbsp;</div></li><li><div>                $rest_base = $pod_info['base'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( 'post_type' == $pod_type ) {&nbsp;</div></li><li><div>                    PodsRESTHandlers::post_type_rest_support( $pod_name, $rest_base );&nbsp;</div></li><li><div>                } elseif ( 'taxonomy' == $pod_type ) {&nbsp;</div></li><li><div>                    PodsRESTHandlers::taxonomy_rest_support( $pod_name, $rest_base );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                new PodsRESTFields( $pod_name );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $rest_support_added = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.5.2</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.6/classes/pods_init/" class="active">2.6</a></li><li><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/classes/pods_init/" class="">2.5.5</a></li><li><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.4/classes/pods_init/" class="">2.5.4</a></li><li><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.3/classes/pods_init/" class="">2.5.3</a></li><li><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.2/classes/pods_init/" class="">2.5.2</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>PodsInit</li><li><span></span>Pods - Custom Content Types and Fields</li><li><span></span>2.6</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>