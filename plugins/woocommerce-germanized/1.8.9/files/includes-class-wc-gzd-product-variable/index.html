<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="1.8.9" data-slug="woocommerce-germanized" data-type="file" data-id="75406"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-class-wc-gzd-product-variable | file | Woocommerce Germanized | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, woocommerce-germanized, 1.8.9" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=1b2da0f9e5b96c530a69f1a5b719f93c' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-class-wc-gzd-product-variable/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-class-wc-gzd-product-variable%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-class-wc-gzd-product-variable%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-woocommerce-germanized-1.8.9-file-includes-class-wc-gzd-product-variable","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-class-wc-gzd-product-variable" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to woocommerce-germanized." href="http://hookr.io/plugins/woocommerce-germanized/" class="plugin"><span property="name">woocommerce-germanized</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.8.9." href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/" class="H_VERSION"><span property="name">1.8.9</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-class-wc-gzd-product&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="501"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/all/" title="All">All <span class="count badge">501</span></a></li><li class="" data-id="new" data-count="3"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/new/" title="New">New <span class="count badge">3</span></a></li><li class="" data-id="hooks" data-count="237"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/hooks/" title="Hooks">Hooks <span class="count badge">237</span></a></li><li class="" data-id="action" data-count="55"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/actions/" title="Actions">Actions <span class="count badge">55</span></a></li><li class="" data-id="filter" data-count="182"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/filters/" title="Filters">Filters <span class="count badge">182</span></a></li><li class="" data-id="class" data-count="124"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/classes/" title="Classes">Classes <span class="count badge">124</span></a></li><li class="" data-id="constant" data-count="3"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/constants/" title="Constants">Constants <span class="count badge">3</span></a></li><li class="" data-id="function" data-count="133"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/functions/" title="Functions">Functions <span class="count badge">133</span></a></li><li class="" data-id="shortcode" data-count="4"><a href="http://hookr.io/plugins/woocommerce-germanized/1.8.9/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">4</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/class-wc-gzd-product-variable.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! defined( 'ABSPATH' ) )&nbsp;</div></li><li><div>  exit; <span class="comment">// Exit if accessed directly</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WooCommerce Germanized Product Variable</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The WC_GZD_Product_Variable Class is used to offer additional functionality for every variable product.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @class         WC_GZD_Product</span>&nbsp;</div></li><li><div><span class="comment"> * @version        1.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @author         Vendidero</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>class WC_GZD_Product_Variable extends WC_GZD_Product {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the min or max variation unit regular price.</span>&nbsp;</div></li><li><div><span class="comment">   * @param  string $min_or_max - min or max</span>&nbsp;</div></li><li><div><span class="comment">   * @param  boolean  $display Whether the value is going to be displayed</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_variation_unit_regular_price( $min_or_max = 'min', $display = false ) {&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices( $display );&nbsp;</div></li><li><div>      $price = 'min' === $min_or_max ? current( $prices['regular_price'] ) : end( $prices['regular_price'] );&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_gzd_get_variation_unit_regular_price', $price, $this, $min_or_max, $display );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the min or max variation unit sale price.</span>&nbsp;</div></li><li><div><span class="comment">   * @param  string $min_or_max - min or max</span>&nbsp;</div></li><li><div><span class="comment">   * @param  boolean  $display Whether the value is going to be displayed</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_variation_unit_sale_price( $min_or_max = 'min', $display = false ) {&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices( $display );&nbsp;</div></li><li><div>      $price = 'min' === $min_or_max ? current( $prices['sale_price'] ) : end( $prices['sale_price'] );&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_gzd_get_variation_unit_sale_price', $price, $this, $min_or_max, $display );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the min or max variation (active) unit price.</span>&nbsp;</div></li><li><div><span class="comment">   * @param  string $min_or_max - min or max</span>&nbsp;</div></li><li><div><span class="comment">   * @param  boolean  $display Whether the value is going to be displayed</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_variation_unit_price( $min_or_max = 'min', $display = false ) {&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices( $display );&nbsp;</div></li><li><div>      $price = 'min' === $min_or_max ? current( $prices['price'] ) : end( $prices['price'] );&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_gzd_get_variation_unit_price', $price, $this, $min_or_max, $display );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function is_on_unit_sale() {&nbsp;</div></li><li><div>      $is_on_sale = false;&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices();&nbsp;</div></li><li><div>      if ( $prices['regular_price'] !== $prices['sale_price'] && $prices['sale_price'] === $prices['price'] ) {&nbsp;</div></li><li><div>          $is_on_sale = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_gzd_product_is_on_unit_sale', $is_on_sale, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function has_unit() {&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices();&nbsp;</div></li><li><div>      if ( $this-&gt;unit && $prices['regular_price'] && $this-&gt;unit_base )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function get_price_html( $price = '' ) {&nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_prices( true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $prices['price'] ) ) {&nbsp;</div></li><li><div>          return apply_filters( 'woocommerce_variable_empty_price_html', '', $this );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $min_price = current( $prices['price'] );&nbsp;</div></li><li><div>      $max_price = end( $prices['price'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $min_price !== $max_price ) {&nbsp;</div></li><li><div>          $price = apply_filters( 'woocommerce_variable_price_html', wc_format_price_range( $min_price, $max_price ), $this );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $price = apply_filters( 'woocommerce_variable_price_html', wc_price( $min_price ) . $this-&gt;get_price_suffix(), $this );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_get_price_html', $price, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function get_price_html_from_to( $from, $to, $show_labels = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $sale_label = ( $show_labels ? $this-&gt;get_sale_price_label() : '' );&nbsp;</div></li><li><div>      $sale_regular_label = ( $show_labels ? $this-&gt;get_sale_price_regular_label() : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $price = ( ! empty( $sale_label ) ? '&lt;span class=&quot;wc-gzd-sale-price-label&quot;&gt;' . $sale_label . '&lt;/span&gt;' : '' ) . ' &lt;del&gt;' . ( ( is_numeric( $from ) ) ? wc_price( $from ) : $from ) . '&lt;/del&gt; ' . ( ! empty( $sale_regular_label ) ? '&lt;span class=&quot;wc-gzd-sale-price-label wc-gzd-sale-price-regular-label&quot;&gt;' . $sale_regular_label . '&lt;/span&gt; ' : '' ) . '&lt;ins&gt;' . ( ( is_numeric( $to ) ) ? wc_price( $to ) : $to ) . '&lt;/ins&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_germanized_get_price_html_from_to', $price, $from, $to, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the price in html format.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @access public</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $price (default: '')</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_unit_html( $price = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( get_option( 'woocommerce_gzd_unit_price_enable_variable' ) === 'no' )&nbsp;</div></li><li><div>          return '';&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      $prices = $this-&gt;get_variation_unit_prices( true );&nbsp;</div></li><li><div>      $text = get_option( 'woocommerce_gzd_unit_price_text' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;has_unit() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $min_price = current( $prices['price'] );&nbsp;</div></li><li><div>          $max_price = end( $prices['price'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( wc_gzd_get_dependencies()-&gt;woocommerce_version_supports_crud() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $min_price !== $max_price ) {&nbsp;</div></li><li><div>                  $price = apply_filters( 'woocommerce_gzd_variable_unit_price_html', wc_format_price_range( $min_price, $max_price ), $this );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $price = apply_filters( 'woocommerce_gzd_variable_unit_price_html', wc_price( $min_price ) . $this-&gt;get_price_suffix(), $this );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $price = $min_price !== $max_price ? sprintf( _x( '%1$s&ndash;%2$s', 'Price range: from-to', 'woocommerce-germanized' ), wc_price( $min_price ), wc_price( $max_price ) ) : wc_price( $min_price );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $this-&gt;is_on_sale() ) {&nbsp;</div></li><li><div>                  $min_regular_price = current( $prices['regular_price'] );&nbsp;</div></li><li><div>                  $max_regular_price = end( $prices['regular_price'] );&nbsp;</div></li><li><div>                  $regular_price = $min_regular_price !== $max_regular_price ? sprintf( _x( '%1$s&ndash;%2$s', 'Price range: from-to', 'woocommerce-germanized' ), wc_price( $min_regular_price ), wc_price( $max_regular_price ) ) : wc_price( $min_regular_price );&nbsp;</div></li><li><div>                  $price = apply_filters( 'woocommerce_gzd_variable_unit_sale_price_html', $this-&gt;get_price_html_from_to( $regular_price, $price, false ), $this );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $price = apply_filters( 'woocommerce_gzd_variable_unit_price_html', $price, $this );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( strpos( $text, '{price}' ) !== false ) {&nbsp;</div></li><li><div>              $price = str_replace( '{price}', $price . apply_filters( 'wc_gzd_unit_price_seperator', ' / ' ) . $this-&gt;get_unit_base(), $text );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $price = str_replace( array( '{base_price}', '{unit}', '{base}' ), array( $price, '&lt;span class=&quot;unit&quot;&gt;' . $this-&gt;get_unit() . '&lt;/span&gt;', ( $this-&gt;unit_base != apply_filters( 'wc_gzd_unit_base_min_amount_to_show', 1 ) ? '&lt;span class=&quot;unit-base&quot;&gt;' . $this-&gt;unit_base . '&lt;/span&gt;' : '' ) ), $text );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'woocommerce_gzd_unit_price_html', $price, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get an array of all sale and regular unit prices from all variations. This is used for example when displaying the price range at variable product level or seeing if the variable product is on sale.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * Can be filtered by plugins which modify costs, but otherwise will include the raw meta costs unlike get_price() which runs costs through the woocommerce_get_price filter.</span>&nbsp;</div></li><li><div><span class="comment">   * This is to ensure modified prices are not cached, unless intended.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param  bool $display Are prices for display? If so, taxes will be calculated.</span>&nbsp;</div></li><li><div><span class="comment">   * @return array() Array of RAW prices, regular prices, and sale prices with keys set to variation ID.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_variation_unit_prices( $display = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $this-&gt;is_type( 'variable' ) )&nbsp;</div></li><li><div>          return false; &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $wp_filter;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $transient_name = 'wc_gzd_var_unit_prices_' . $this-&gt;id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Create unique cache key based on the tax location (affects displayed/cached prices), product version and active price filters.</span>&nbsp;</div></li><li><div><span class="comment">       * DEVELOPERS should filter this hash if offering conditonal pricing to keep it unique.</span>&nbsp;</div></li><li><div><span class="comment">       * @var string</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      if ( $display ) {&nbsp;</div></li><li><div>          $price_hash = array( get_option( 'woocommerce_tax_display_shop', 'excl' ), WC_Tax::get_rates() );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $price_hash = array( false );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $filter_names = array( 'woocommerce_gzd_variation_unit_prices_price', 'woocommerce_gzd_variation_unit_prices_regular_price', 'woocommerce_gzd_variation_unit_prices_sale_price' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $filter_names as $filter_name ) {&nbsp;</div></li><li><div>          if ( ! empty( $wp_filter[ $filter_name ] ) ) {&nbsp;</div></li><li><div>              $price_hash[ $filter_name ] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $wp_filter[ $filter_name ] as $priority =&gt; $callbacks ) {&nbsp;</div></li><li><div>                  $price_hash[ $filter_name ][] = array_values( wp_list_pluck( $callbacks, 'function' ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $price_hash = md5( json_encode( apply_filters( 'woocommerce_gzd_get_variation_unit_prices_hash', $price_hash, $this, $display ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// If the value has already been generated, we don't need to grab the values again.</span>&nbsp;</div></li><li><div>      if ( empty( $this-&gt;unit_prices_array[ $price_hash ] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Get value of transient</span>&nbsp;</div></li><li><div>          $this-&gt;unit_prices_array = array_filter( (array) json_decode( strval( get_transient( $transient_name ) ), true ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If the product version has changed, reset cache</span>&nbsp;</div></li><li><div>          if ( empty( $this-&gt;unit_prices_array['version'] ) || $this-&gt;unit_prices_array['version'] !== WC_Cache_Helper::get_transient_version( 'product' ) ) {&nbsp;</div></li><li><div>              $this-&gt;unit_prices_array = array( 'version' =&gt; WC_Cache_Helper::get_transient_version( 'product' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If the prices are not stored for this hash, generate them</span>&nbsp;</div></li><li><div>          if ( empty( $this-&gt;unit_prices_array[ $price_hash ] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $prices = array();&nbsp;</div></li><li><div>              $regular_prices = array();&nbsp;</div></li><li><div>              $sale_prices = array();&nbsp;</div></li><li><div>              $variation_ids = wc_gzd_get_variable_visible_children( $this-&gt;child );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $variation_ids as $variation_id ) {&nbsp;</div></li><li><div>                  &nbsp;</div></li><li><div>                  if ( $variation = wc_gzd_get_variation( $this-&gt;child, $variation_id ) ) {&nbsp;</div></li><li><div>                  &nbsp;</div></li><li><div>                      $price = apply_filters( 'woocommerce_gzd_variation_unit_prices_price', wc_gzd_get_crud_data( $variation, 'unit_price' ), $variation, $this );&nbsp;</div></li><li><div>                      $regular_price = apply_filters( 'woocommerce_gzd_variation_unit_prices_regular_price', wc_gzd_get_crud_data( $variation, 'unit_price_regular' ), $variation, $this );&nbsp;</div></li><li><div>                      $sale_price = apply_filters( 'woocommerce_gzd_variation_unit_prices_sale_price', wc_gzd_get_crud_data( $variation, 'unit_price_sale' ), $variation, $this );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// If sale price does not equal price, the product is not yet on sale</span>&nbsp;</div></li><li><div>                      if ( $sale_price === $regular_price || $sale_price !== $price ) {&nbsp;</div></li><li><div>                          $sale_price = $regular_price;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// If we are getting prices for display, we need to account for taxes</span>&nbsp;</div></li><li><div>                      if ( $display ) {&nbsp;</div></li><li><div>                          if ( 'incl' === get_option( 'woocommerce_tax_display_shop' ) ) {&nbsp;</div></li><li><div>                              $price = '' === $price ? ''         : wc_gzd_get_price_including_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $price ) );&nbsp;</div></li><li><div>                              $regular_price = '' === $regular_price ? '' : wc_gzd_get_price_including_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $regular_price ) );&nbsp;</div></li><li><div>                              $sale_price = '' === $sale_price ? ''    : wc_gzd_get_price_including_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $sale_price ) );&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              $price = '' === $price ? ''         : wc_gzd_get_price_excluding_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $price ) );&nbsp;</div></li><li><div>                              $regular_price = '' === $regular_price ? '' : wc_gzd_get_price_excluding_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $regular_price ) );&nbsp;</div></li><li><div>                              $sale_price = '' === $sale_price ? ''    : wc_gzd_get_price_excluding_tax( $variation, array( 'qty' =&gt; 1, 'price' =&gt; $sale_price ) );&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $prices[ $variation_id ]         = $price;&nbsp;</div></li><li><div>                      $regular_prices[ $variation_id ] = $regular_price;&nbsp;</div></li><li><div>                      $sale_prices[ $variation_id ]    = $sale_price;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              asort( $prices );&nbsp;</div></li><li><div>              asort( $regular_prices );&nbsp;</div></li><li><div>              asort( $sale_prices );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $this-&gt;unit_prices_array[ $price_hash ] = array(&nbsp;</div></li><li><div>                  'price' =&gt; $prices, &nbsp;</div></li><li><div>                  'regular_price' =&gt; $regular_prices, &nbsp;</div></li><li><div>                  'sale_price' =&gt; $sale_prices&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              set_transient( $transient_name, json_encode( $this-&gt;unit_prices_array ), DAY_IN_SECONDS * 30 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;unit_prices_array[ $price_hash ] = apply_filters( 'woocommerce_gzd_variation_unit_prices', $this-&gt;unit_prices_array[ $price_hash ], $this, $display );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $this-&gt;unit_prices_array[ $price_hash ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>WooCommerce Germanized</li><li><span></span>1.8.9</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>