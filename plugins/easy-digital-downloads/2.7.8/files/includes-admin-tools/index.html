<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.7.8" data-slug="easy-digital-downloads" data-type="file" data-id="58114"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-admin-tools | file | Easy Digital Downloads | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, easy-digital-downloads, 2.7.8" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=1ddceb6820e6db9a7aa23fd6ee37f5eb' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-admin-tools/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-admin-tools%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-admin-tools%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-easy-digital-downloads-2.7.8-file-includes-admin-tools","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-admin-tools" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to easy-digital-downloads." href="http://hookr.io/plugins/easy-digital-downloads/" class="plugin"><span property="name">easy-digital-downloads</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.7.8." href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/" class="H_VERSION"><span property="name">2.7.8</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-admin-tools</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="2274"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/all/" title="All">All <span class="count badge">2274</span></a></li><li class="" data-id="new" data-count="5"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/new/" title="New">New <span class="count badge">5</span></a></li><li class="" data-id="hooks" data-count="1195"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/hooks/" title="Hooks">Hooks <span class="count badge">1195</span></a></li><li class="" data-id="action" data-count="469"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/actions/" title="Actions">Actions <span class="count badge">469</span></a></li><li class="" data-id="filter" data-count="726"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/filters/" title="Filters">Filters <span class="count badge">726</span></a></li><li class="" data-id="class" data-count="99"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/classes/" title="Classes">Classes <span class="count badge">99</span></a></li><li class="" data-id="constant" data-count="11"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/constants/" title="Constants">Constants <span class="count badge">11</span></a></li><li class="" data-id="function" data-count="955"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/functions/" title="Functions">Functions <span class="count badge">955</span></a></li><li class="" data-id="shortcode" data-count="14"><a href="http://hookr.io/plugins/easy-digital-downloads/2.7.8/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">14</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/admin/tools.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Tools</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * These are functions used for displaying EDD tools such as the import/export system.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @package     EDD</span>&nbsp;</div></li><li><div><span class="comment"> * @subpackage  Admin/Tools</span>&nbsp;</div></li><li><div><span class="comment"> * @copyright   Copyright (c) 2015, Pippin Williamson</span>&nbsp;</div></li><li><div><span class="comment"> * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly</span>&nbsp;</div></li><li><div>if ( ! defined( 'ABSPATH' ) ) exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Tools</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Shows the tools panel which contains EDD-specific tools including the</span>&nbsp;</div></li><li><div><span class="comment"> * built-in import/export system.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       1.8</span>&nbsp;</div></li><li><div><span class="comment"> * @author      Daniel J Griffiths</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_page() {&nbsp;</div></li><li><div>  $active_tab = isset( $_GET['tab'] ) ? $_GET['tab'] : 'general';&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>      &lt;?php screen_icon(); ?&gt;&nbsp;</div></li><li><div>      &lt;h2&gt;&lt;?php _e( 'Easy Digital Downloads Tools', 'easy-digital-downloads' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>      &lt;h2 class=&quot;nav-tab-wrapper&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          foreach( edd_get_tools_tabs() as $tab_id =&gt; $tab_name ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $tab_url = add_query_arg( array(&nbsp;</div></li><li><div>                  'tab' =&gt; $tab_id&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $tab_url = remove_query_arg( array(&nbsp;</div></li><li><div>                  'edd-message'&nbsp;</div></li><li><div> ), $tab_url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $active = $active_tab == $tab_id ? ' nav-tab-active' : '';&nbsp;</div></li><li><div>              echo '&lt;a href=&quot;' . esc_url( $tab_url ) . '&quot; class=&quot;nav-tab' . $active . '&quot;&gt;' . esc_html( $tab_name ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>      &lt;/h2&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;metabox-holder&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php&nbsp;</div></li><li><div>          do_action( 'edd_tools_tab_' . $active_tab );&nbsp;</div></li><li><div>          ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .metabox-holder --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .wrap --&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Retrieve tools tabs</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_get_tools_tabs() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tabs = array();&nbsp;</div></li><li><div>  $tabs['general'] = __( 'General', 'easy-digital-downloads' );&nbsp;</div></li><li><div>  $tabs['api_keys'] = __( 'API Keys', 'easy-digital-downloads' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( count( edd_get_beta_enabled_extensions() ) &gt; 0 ) {&nbsp;</div></li><li><div>      $tabs['betas'] = __( 'Beta Versions', 'easy-digital-downloads' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tabs['system_info'] = __( 'System Info', 'easy-digital-downloads' );&nbsp;</div></li><li><div>  $tabs['import_export'] = __( 'Import/Export', 'easy-digital-downloads' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'edd_tools_tabs', $tabs );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the ban emails tab</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_banned_emails_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_banned_emails_before' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Banned Emails', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Emails placed in the box below will not be allowed to make purchases. To ban an entire domain, enter the domain starting with &quot;@&quot;.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo admin_url( 'edit.php?post_type=download&page=edd-tools&tab=general' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;textarea name=&quot;banned_emails&quot; rows=&quot;10&quot; class=&quot;large-text&quot;&gt;&lt;?php echo implode( &quot;\n&quot;, edd_get_banned_emails() ); ?&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;description&quot;&gt;&lt;?php _e( 'Enter emails and/or domains (starting with @) to disallow, one per line.', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;edd_action&quot; value=&quot;save_banned_emails&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_banned_emails_nonce', 'edd_banned_emails_nonce' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'Save', 'easy-digital-downloads' ), 'secondary', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  do_action( 'edd_tools_banned_emails_after' );&nbsp;</div></li><li><div>  do_action( 'edd_tools_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_general', 'edd_tools_banned_emails_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the recount stats</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.5</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_recount_stats_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_recount_stats_before' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Recount Stats', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside recount-stats-controls&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Use these tools to recount / reset store stats.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; id=&quot;edd-tools-recount-form&quot; class=&quot;edd-export-form edd-import-export-form&quot;&gt;&nbsp;</div></li><li><div>              &lt;span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_ajax_export', 'edd_ajax_export' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;select name=&quot;edd-export-class&quot; id=&quot;recount-stats-type&quot;&gt;&nbsp;</div></li><li><div>                      &lt;option value=&quot;0&quot; selected=&quot;selected&quot; disabled=&quot;disabled&quot;&gt;&lt;?php _e( 'Please select an option', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option data-type=&quot;recount-store&quot; value=&quot;EDD_Tools_Recount_Store_Earnings&quot;&gt;&lt;?php _e( 'Recount Store Earnings and Sales', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option data-type=&quot;recount-download&quot; value=&quot;EDD_Tools_Recount_Download_Stats&quot;&gt;&lt;?php printf( __( 'Recount Earnings and Sales for a %s', 'easy-digital-downloads' ), edd_get_label_singular( true ) ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option data-type=&quot;recount-all&quot; value=&quot;EDD_Tools_Recount_All_Stats&quot;&gt;&lt;?php printf( __( 'Recount Earnings and Sales for All %s', 'easy-digital-downloads' ), edd_get_label_plural( true ) ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;option data-type=&quot;recount-customer-stats&quot; value=&quot;EDD_Tools_Recount_Customer_Stats&quot;&gt;&lt;?php _e( 'Recount Customer Stats', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                      &lt;?php do_action( 'edd_recount_tool_options' ); ?&gt;&nbsp;</div></li><li><div>                      &lt;option data-type=&quot;reset-stats&quot; value=&quot;EDD_Tools_Reset_Stats&quot;&gt;&lt;?php _e( 'Reset Store', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                  &lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;span id=&quot;tools-product-dropdown&quot; style=&quot;display: none&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                          $args = array(&nbsp;</div></li><li><div>                              'name' =&gt; 'download_id', &nbsp;</div></li><li><div>                              'number' =&gt; -1, &nbsp;</div></li><li><div>                              'chosen' =&gt; true, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                          echo EDD()-&gt;html-&gt;product_dropdown( $args );&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;input type=&quot;submit&quot; id=&quot;recount-stats-submit&quot; value=&quot;&lt;?php _e( 'Submit', 'easy-digital-downloads' ); ?&gt;&quot; class=&quot;button-secondary&quot;/&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;span class=&quot;edd-recount-stats-descriptions&quot;&gt;&nbsp;</div></li><li><div>                      &lt;span id=&quot;recount-store&quot;&gt;&lt;?php _e( 'Recalculates the total store earnings and sales.', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;span id=&quot;recount-download&quot;&gt;&lt;?php printf( __( 'Recalculates the earnings and sales stats for a specific %s.', 'easy-digital-downloads' ), edd_get_label_singular( true ) ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;span id=&quot;recount-all&quot;&gt;&lt;?php printf( __( 'Recalculates the earnings and sales stats for all %s.', 'easy-digital-downloads' ), edd_get_label_plural( true ) ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;span id=&quot;recount-customer-stats&quot;&gt;&lt;?php _e( 'Recalculates the lifetime value and purchase counts for all customers.', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;?php do_action( 'edd_recount_tool_descriptions' ); ?&gt;&nbsp;</div></li><li><div>                      &lt;span id=&quot;reset-stats&quot;&gt;&lt;?php _e( '&lt;strong&gt;Deletes&lt;/strong&gt; all payment records, customers, and related log entries.', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;/span&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>          &lt;?php do_action( 'edd_tools_recount_forms' ); ?&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  do_action( 'edd_tools_recount_stats_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_general', 'edd_tools_recount_stats_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the clear upgrades tab</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.3.5</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_clear_doing_upgrade_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) || false === get_option( 'edd_doing_upgrade' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_clear_doing_upgrade_before' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Clear Incomplete Upgrade Notice', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Sometimes a database upgrade notice may not be cleared after an upgrade is completed due to conflicts with other extensions or other minor issues.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'If you\'re certain these upgrades have been completed, you can clear these upgrade notices by clicking the button below. If you have any questions about this, please contact the Easy Digital Downloads support team and we\'ll be happy to help.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo admin_url( 'edit.php?post_type=download&page=edd-tools&tab=general' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;edd_action&quot; value=&quot;clear_doing_upgrade&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_clear_upgrades_nonce', 'edd_clear_upgrades_nonce' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'Clear Incomplete Upgrade Notice', 'easy-digital-downloads' ), 'secondary', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  do_action( 'edd_tools_clear_doing_upgrade_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_general', 'edd_tools_clear_doing_upgrade_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the API Keys</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_api_keys_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_api_keys_before' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  require_once EDD_PLUGIN_DIR . 'includes/admin/class-api-keys-table.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $api_keys_table = new EDD_API_Keys_Table();&nbsp;</div></li><li><div>  $api_keys_table-&gt;prepare_items();&nbsp;</div></li><li><div>  $api_keys_table-&gt;display();&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;p&gt;&nbsp;</div></li><li><div>  &lt;?php printf(&nbsp;</div></li><li><div>      __( 'These API keys allow you to use the &lt;a href=&quot;%s&quot;&gt;EDD REST API&lt;/a&gt; to retrieve store data in JSON or XML for external applications or devices, such as the &lt;a href=&quot;%s&quot;&gt;EDD mobile app&lt;/a&gt;.', 'easy-digital-downloads' ), &nbsp;</div></li><li><div>      'http:<span class="comment">//docs.easydigitaldownloads.com/article/544-edd-api-reference/', </span>&nbsp;</div></li><li><div>      'https:<span class="comment">//easydigitaldownloads.com/downloads/ios-sales-earnings-tracker/?utm_source=plugin-tools-page&utm_medium=api_keys_tab&utm_term=ios-app&utm_campaign=EDDMobileApp'</span>&nbsp;</div></li><li><div> ); ?&gt;&nbsp;</div></li><li><div>  &lt;/p&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_api_keys_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_api_keys', 'edd_tools_api_keys_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display beta opt-ins</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.6.11</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_betas_display() {&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $has_beta = edd_get_beta_enabled_extensions();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_betas_before' );&nbsp;</div></li><li><div>  ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox edd-beta-support&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Enable Beta Versions', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Checking any of the below checkboxes will opt you in to receive pre-release update notifications. You can opt-out at any time. Pre-release updates do not install automatically, you will still have the opportunity to ignore update notifications.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo admin_url( 'edit.php?post_type=download&page=edd-tools&tab=betas' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;table class=&quot;form-table edd-beta-support&quot;&gt;&nbsp;</div></li><li><div>                  &lt;tbody&gt;&nbsp;</div></li><li><div>                      &lt;?php foreach( $has_beta as $slug =&gt; $product ) : ?&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;?php $checked = edd_extension_has_beta_support( $slug ); ?&gt;&nbsp;</div></li><li><div>                              &lt;th scope=&quot;row&quot;&gt;&lt;?php echo esc_html( $product ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;input type=&quot;checkbox&quot; name=&quot;enabled_betas[&lt;?php echo esc_attr( $slug ); ?&gt;]&quot; id=&quot;enabled_betas[&lt;?php echo esc_attr( $slug ); ?&gt;]&quot;&lt;?php echo checked( $checked, true, false ); ?&gt; value=&quot;1&quot; /&gt;&nbsp;</div></li><li><div>                                  &lt;label for=&quot;enabled_betas[&lt;?php echo esc_attr( $slug ); ?&gt;]&quot;&gt;&lt;?php printf( __( 'Get updates for pre-release versions of %s', 'easy-digital-downloads' ), $product ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                  &lt;/tbody&gt;&nbsp;</div></li><li><div>              &lt;/table&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;hidden&quot; name=&quot;edd_action&quot; value=&quot;save_enabled_betas&quot; /&gt;&nbsp;</div></li><li><div>              &lt;?php wp_nonce_field( 'edd_save_betas_nonce', 'edd_save_betas_nonce' ); ?&gt;&nbsp;</div></li><li><div>              &lt;?php submit_button( __( 'Save', 'easy-digital-downloads' ), 'secondary', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;?php&nbsp;</div></li><li><div>  do_action( 'edd_tools_betas_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_betas', 'edd_tools_betas_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return an array of all extensions with beta support</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Extensions should be added as 'extension-slug' =&gt; 'Extension Name'</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.6.11</span>&nbsp;</div></li><li><div><span class="comment"> * @return      array $extensions The array of extensions</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_get_beta_enabled_extensions() {&nbsp;</div></li><li><div>  return apply_filters( 'edd_beta_enabled_extensions', array() );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if a given extensions has beta support enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.6.11</span>&nbsp;</div></li><li><div><span class="comment"> * @param       string $slug The slug of the extension to check</span>&nbsp;</div></li><li><div><span class="comment"> * @return      bool True if enabled, false otherwise</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_extension_has_beta_support( $slug ) {&nbsp;</div></li><li><div>  $enabled_betas = edd_get_option( 'enabled_betas', array() );&nbsp;</div></li><li><div>  $return = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( array_key_exists( $slug, $enabled_betas ) ) {&nbsp;</div></li><li><div>      $return = true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $return;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Save enabled betas</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.6.11</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_enabled_betas_save() {&nbsp;</div></li><li><div>  if( ! wp_verify_nonce( $_POST['edd_save_betas_nonce'], 'edd_save_betas_nonce' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! empty( $_POST['enabled_betas'] ) ) {&nbsp;</div></li><li><div>      $enabled_betas = array_filter( array_map( 'edd_tools_enabled_betas_sanitize_value', $_POST['enabled_betas'] ) );&nbsp;</div></li><li><div>      edd_update_option( 'enabled_betas', $enabled_betas );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      edd_delete_option( 'enabled_betas' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_save_enabled_betas', 'edd_tools_enabled_betas_save' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Sanitize the supported beta values by making them booleans</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.11</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value The value being sent in, determining if beta support is enabled.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_enabled_betas_sanitize_value( $value ) {&nbsp;</div></li><li><div>  return filter_var( $value, FILTER_VALIDATE_BOOLEAN );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Save banned emails</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_banned_emails_save() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! wp_verify_nonce( $_POST['edd_banned_emails_nonce'], 'edd_banned_emails_nonce' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! empty( $_POST['banned_emails'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Sanitize the input</span>&nbsp;</div></li><li><div>      $emails = array_map( 'trim', explode( &quot;\n&quot;, $_POST['banned_emails'] ) );&nbsp;</div></li><li><div>      $emails = array_unique( $emails );&nbsp;</div></li><li><div>      $emails = array_map( 'sanitize_text_field', $emails );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach( $emails as $id =&gt; $email ) {&nbsp;</div></li><li><div>          if( ! is_email( $email ) ) {&nbsp;</div></li><li><div>              if( $email[0] != '@' ) {&nbsp;</div></li><li><div>                  unset( $emails[$id] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $emails = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  edd_update_option( 'banned_emails', $emails );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_save_banned_emails', 'edd_tools_banned_emails_save' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Execute upgrade notice clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.3.5</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_clear_upgrade_notice() {&nbsp;</div></li><li><div>  if( ! wp_verify_nonce( $_POST['edd_clear_upgrades_nonce'], 'edd_clear_upgrades_nonce' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  delete_option( 'edd_doing_upgrade' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_clear_doing_upgrade', 'edd_tools_clear_upgrade_notice' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the tools import/export tab</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_import_export_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'edd_tools_import_export_before' );&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox edd-import-payment-history&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Import Payment History', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Import a CSV file of payment records.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form id=&quot;edd-import-payments&quot; class=&quot;edd-import-form edd-import-export-form&quot; action=&quot;&lt;?php echo esc_url( add_query_arg( 'edd_action', 'upload_import_file', admin_url() ) ); ?&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;div class=&quot;edd-import-file-wrap&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_ajax_import', 'edd_ajax_import' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;edd-import-class&quot; value=&quot;EDD_Batch_Payments_Import&quot;/&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input name=&quot;edd-import-file&quot; id=&quot;edd-payments-import-file&quot; type=&quot;file&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;span&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;submit&quot; value=&quot;&lt;?php _e( 'Import CSV', 'easy-digital-downloads' ); ?&gt;&quot; class=&quot;button-secondary&quot;/&gt;&nbsp;</div></li><li><div>                      &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;div class=&quot;edd-import-options&quot; id=&quot;edd-import-payments-options&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      printf(&nbsp;</div></li><li><div>                          __( 'Each column loaded from the CSV needs to be mapped to a payment field. Select the column that should be mapped to each field below. Any columns not needed can be ignored. See &lt;a href=&quot;%s&quot; target=&quot;_blank&quot;&gt;this guide&lt;/a&gt; for assistance with importing payment records.', 'easy-digital-downloads' ), &nbsp;</div></li><li><div>                          'http:<span class="comment"><span class="comment">//docs.easydigitaldownloads.com/category/1337-importexport'</span></span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;table class=&quot;widefat edd_repeatable_table&quot; width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;&nbsp;</div></li><li><div>                      &lt;thead&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'Payment Field', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'CSV Column', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'Data Preview', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;/thead&gt;&nbsp;</div></li><li><div>                      &lt;tbody&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Currency Code', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[currency]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Email', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[email]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'First Name', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[first_name]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Last Name', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[last_name]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Customer ID', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[customer_id]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Discount Code(s)', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[discounts]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'IP Address', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[ip]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Mode (Live|Test)', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[mode]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Parent Payment ID', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[parent_payment_id]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Payment Method', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[gateway]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Payment Number', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[number]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Date', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[date]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Purchase Key', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[key]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Purchased Product(s)', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[downloads]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Status', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[status]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Subtotal', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[subtotal]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Tax', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[tax]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Total', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[total]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Transaction ID', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[transaction_id]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'User', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[user_id]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Address Line 1', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[line1]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Address Line 2', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[line2]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'City', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[city]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'State / Province', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[state]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Zip / Postal Code', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[zip]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Country', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[country]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;/tbody&gt;&nbsp;</div></li><li><div>                  &lt;/table&gt;&nbsp;</div></li><li><div>                  &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                      &lt;button class=&quot;edd-import-proceed button-primary&quot;&gt;&lt;?php _e( 'Process Import', 'easy-digital-downloads' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox edd-import-payment-history&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Import Download Products', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Import a CSV file of products.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form id=&quot;edd-import-downloads&quot; class=&quot;edd-import-form edd-import-export-form&quot; action=&quot;&lt;?php echo esc_url( add_query_arg( 'edd_action', 'upload_import_file', admin_url() ) ); ?&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;div class=&quot;edd-import-file-wrap&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_ajax_import', 'edd_ajax_import' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;edd-import-class&quot; value=&quot;EDD_Batch_Downloads_Import&quot;/&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input name=&quot;edd-import-file&quot; id=&quot;edd-downloads-import-file&quot; type=&quot;file&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;span&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;submit&quot; value=&quot;&lt;?php _e( 'Import CSV', 'easy-digital-downloads' ); ?&gt;&quot; class=&quot;button-secondary&quot;/&gt;&nbsp;</div></li><li><div>                      &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;div class=&quot;edd-import-options&quot; id=&quot;edd-import-downloads-options&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;?php&nbsp;</div></li><li><div>                      printf(&nbsp;</div></li><li><div>                          __( 'Each column loaded from the CSV needs to be mapped to a Download product field. Select the column that should be mapped to each field below. Any columns not needed can be ignored. See &lt;a href=&quot;%s&quot; target=&quot;_blank&quot;&gt;this guide&lt;/a&gt; for assistance with importing Download products.', 'easy-digital-downloads' ), &nbsp;</div></li><li><div>                          'http:<span class="comment"><span class="comment">//docs.easydigitaldownloads.com/category/1337-importexport'</span></span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                      ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  &lt;table class=&quot;widefat edd_repeatable_table&quot; width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;&nbsp;</div></li><li><div>                      &lt;thead&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'Product Field', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'CSV Column', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                              &lt;th&gt;&lt;strong&gt;&lt;?php _e( 'Data Preview', 'easy-digital-downloads' ); ?&gt;&lt;/strong&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;/thead&gt;&nbsp;</div></li><li><div>                      &lt;tbody&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Author', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_author]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Categories', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[categories]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Creation Date', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_date]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Description', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_content]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Excerpt', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_excerpt]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Image', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[featured_image]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Notes', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[notes]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Price(s)', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[price]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product SKU', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[sku]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Slug', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_name]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Status', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_status]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Tags', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[tags]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Product Title', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[post_title]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Download Files', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[files]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'File Download Limit', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[download_limit]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr class=&quot;alternate&quot;&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Sale Count', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[sales]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                          &lt;tr&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&lt;?php _e( 'Total Earnings', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td&gt;&nbsp;</div></li><li><div>                                  &lt;select name=&quot;edd-import-field[earnings]&quot; class=&quot;edd-import-csv-column&quot;&gt;&nbsp;</div></li><li><div>                                      &lt;option value=&quot;&quot;&gt;&lt;?php _e( '- Ignore this field -', 'easy-digital-downloads' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                  &lt;/select&gt;&nbsp;</div></li><li><div>                              &lt;/td&gt;&nbsp;</div></li><li><div>                              &lt;td class=&quot;edd-import-preview-field&quot;&gt;&lt;?php _e( '- select field to preview data -', 'easy-digital-downloads' ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                          &lt;/tr&gt;&nbsp;</div></li><li><div>                      &lt;/tbody&gt;&nbsp;</div></li><li><div>                  &lt;/table&gt;&nbsp;</div></li><li><div>                  &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                      &lt;button class=&quot;edd-import-proceed button-primary&quot;&gt;&lt;?php _e( 'Process Import', 'easy-digital-downloads' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Export Settings', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Export the Easy Digital Downloads settings for this site as a .json file. This allows you to easily import the configuration into another site.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php printf( __( 'To export shop data (purchases, customers, etc), visit the &lt;a href=&quot;%s&quot;&gt;Reports&lt;/a&gt; page.', 'easy-digital-downloads' ), admin_url( 'edit.php?post_type=download&page=edd-reports&tab=export' ) ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&lt;?php echo admin_url( 'edit.php?post_type=download&page=edd-tools&tab=import_export' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&lt;input type=&quot;hidden&quot; name=&quot;edd_action&quot; value=&quot;export_settings&quot; /&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_export_nonce', 'edd_export_nonce' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'Export', 'easy-digital-downloads' ), 'secondary', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>      &lt;h3&gt;&lt;span&gt;&lt;?php _e( 'Import Settings', 'easy-digital-downloads' ); ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Import the Easy Digital Downloads settings from a .json file. This file can be obtained by exporting the settings on another site using the form above.', 'easy-digital-downloads' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; action=&quot;&lt;?php echo admin_url( 'edit.php?post_type=download&page=edd-tools&tab=import_export' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;file&quot; name=&quot;import_file&quot;/&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;edd_action&quot; value=&quot;import_settings&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( 'edd_import_nonce', 'edd_import_nonce' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'Import', 'easy-digital-downloads' ), 'secondary', 'submit', false ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&lt;!-- .inside --&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&lt;!-- .postbox --&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>  do_action( 'edd_tools_import_export_after' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_import_export', 'edd_tools_import_export_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Process a settings export that generates a .json file of the shop settings</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       1.7</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_import_export_process_export() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( empty( $_POST['edd_export_nonce'] ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! wp_verify_nonce( $_POST['edd_export_nonce'], 'edd_export_nonce' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $settings = array();&nbsp;</div></li><li><div>  $settings = get_option( 'edd_settings' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ignore_user_abort( true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! edd_is_func_disabled( 'set_time_limit' ) )&nbsp;</div></li><li><div>      set_time_limit( 0 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  nocache_headers();&nbsp;</div></li><li><div>  header( 'Content-Type: application/json; charset=utf-8' );&nbsp;</div></li><li><div>  header( 'Content-Disposition: attachment; filename=' . apply_filters( 'edd_settings_export_filename', 'edd-settings-export-' . date( 'm-d-Y' ) ) . '.json' );&nbsp;</div></li><li><div>  header( &quot;Expires: 0&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo json_encode( $settings );&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_export_settings', 'edd_tools_import_export_process_export' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Process a settings import from a json file</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_import_export_process_import() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( empty( $_POST['edd_import_nonce'] ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! wp_verify_nonce( $_POST['edd_import_nonce'], 'edd_import_nonce' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( edd_get_file_extension( $_FILES['import_file']['name'] ) != 'json' ) {&nbsp;</div></li><li><div>      wp_die( __( 'Please upload a valid .json file', 'easy-digital-downloads' ), __( 'Error', 'easy-digital-downloads' ), array( 'response' =&gt; 400 ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $import_file = $_FILES['import_file']['tmp_name'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( empty( $import_file ) ) {&nbsp;</div></li><li><div>      wp_die( __( 'Please upload a file to import', 'easy-digital-downloads' ), __( 'Error', 'easy-digital-downloads' ), array( 'response' =&gt; 400 ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Retrieve the settings from the file and convert the json object to an array</span>&nbsp;</div></li><li><div>  $settings = edd_object_to_array( json_decode( file_get_contents( $import_file ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  update_option( 'edd_settings', $settings );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  wp_safe_redirect( admin_url( 'edit.php?post_type=download&page=edd-tools&edd-message=settings-imported' ) ); exit;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_import_settings', 'edd_tools_import_export_process_import' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display the system info tab</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_sysinfo_display() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;form action=&quot;&lt;?php echo esc_url( admin_url( 'edit.php?post_type=download&page=edd-tools&tab=system_info' ) ); ?&gt;&quot; method=&quot;post&quot; dir=&quot;ltr&quot;&gt;&nbsp;</div></li><li><div>      &lt;textarea readonly=&quot;readonly&quot; onclick=&quot;this.focus(); this.select()&quot; id=&quot;system-info-textarea&quot; name=&quot;edd-sysinfo&quot;&gt;&lt;?php echo edd_tools_sysinfo_get(); ?&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>      &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;hidden&quot; name=&quot;edd-action&quot; value=&quot;download_sysinfo&quot; /&gt;&nbsp;</div></li><li><div>          &lt;?php submit_button( 'Download System Info File', 'primary', 'edd-download-sysinfo', false ); ?&gt;&nbsp;</div></li><li><div>      &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/form&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_tools_tab_system_info', 'edd_tools_sysinfo_display' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get system info</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @access      public</span>&nbsp;</div></li><li><div><span class="comment"> * @global      object $wpdb Used to query the database using the WordPress Database API</span>&nbsp;</div></li><li><div><span class="comment"> * @return      string $return A string containing the info to output</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_sysinfo_get() {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( !class_exists( 'Browser' ) )&nbsp;</div></li><li><div>      require_once EDD_PLUGIN_DIR . 'includes/libraries/browser.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $browser = new Browser();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get theme info</span>&nbsp;</div></li><li><div>  $theme_data = wp_get_theme();&nbsp;</div></li><li><div>  $theme = $theme_data-&gt;Name . ' ' . $theme_data-&gt;Version;&nbsp;</div></li><li><div>  $parent_theme = $theme_data-&gt;Template;&nbsp;</div></li><li><div>  if ( ! empty( $parent_theme ) ) {&nbsp;</div></li><li><div>      $parent_theme_data = wp_get_theme( $parent_theme );&nbsp;</div></li><li><div>      $parent_theme = $parent_theme_data-&gt;Name . ' ' . $parent_theme_data-&gt;Version;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Try to identify the hosting provider</span>&nbsp;</div></li><li><div>  $host = edd_get_host();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = '### Begin System Info ###' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Start with the basics...</span>&nbsp;</div></li><li><div>  $return .= '-- Site Info' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Site URL:                 ' . site_url() . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Home URL:                 ' . home_url() . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Multisite:                ' . ( is_multisite() ? 'Yes' : 'No' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_site_info', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Can we determine the site's host?</span>&nbsp;</div></li><li><div>  if( $host ) {&nbsp;</div></li><li><div>      $return .= &quot;\n&quot; . '-- Hosting Provider' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>      $return .= 'Host:                     ' . $host . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $return = apply_filters( 'edd_sysinfo_after_host_info', $return );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// The local users' browser information, handled by the Browser class</span>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- User Browser' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= $browser;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_user_browser', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// WordPress configuration</span>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- WordPress Configuration' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Version:                  ' . get_bloginfo( 'version' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Language:                 ' . ( defined( 'WPLANG' ) && WPLANG ? WPLANG : 'en_US' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Permalink Structure:      ' . ( get_option( 'permalink_structure' ) ? get_option( 'permalink_structure' ) : 'Default' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Active Theme:             ' . $theme . &quot;\n&quot;;&nbsp;</div></li><li><div>  if ( $parent_theme !== $theme ) {&nbsp;</div></li><li><div>      $return .= 'Parent Theme:             ' . $parent_theme . &quot;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  $return .= 'Show On Front:            ' . get_option( 'show_on_front' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Only show page specs if frontpage is set to 'page'</span>&nbsp;</div></li><li><div>  if( get_option( 'show_on_front' ) == 'page' ) {&nbsp;</div></li><li><div>      $front_page_id = get_option( 'page_on_front' );&nbsp;</div></li><li><div>      $blog_page_id = get_option( 'page_for_posts' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $return .= 'Page On Front:            ' . ( $front_page_id != 0 ? get_the_title( $front_page_id ) . ' (#' . $front_page_id . ')' : 'Unset' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>      $return .= 'Page For Posts:           ' . ( $blog_page_id != 0 ? get_the_title( $blog_page_id ) . ' (#' . $blog_page_id . ')' : 'Unset' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return .= 'ABSPATH:                  ' . ABSPATH . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Make sure wp_remote_post() is working</span>&nbsp;</div></li><li><div>  $request['cmd'] = '_notify-validate';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $params = array(&nbsp;</div></li><li><div>      'sslverify' =&gt; false, &nbsp;</div></li><li><div>      'timeout' =&gt; 60, &nbsp;</div></li><li><div>      'user-agent' =&gt; 'EDD/' . EDD_VERSION, &nbsp;</div></li><li><div>      'body' =&gt; $request&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $response = wp_remote_post( 'https:<span class="comment">//www.paypal.com/cgi-bin/webscr', $params );</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( !is_wp_error( $response ) && $response['response']['code'] &gt;= 200 && $response['response']['code'] &lt; 300 ) {&nbsp;</div></li><li><div>      $WP_REMOTE_POST = 'wp_remote_post() works';&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $WP_REMOTE_POST = 'wp_remote_post() does not work';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return .= 'Remote Post:              ' . $WP_REMOTE_POST . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Table Prefix:             ' . 'Length: ' . strlen( $wpdb-&gt;prefix ) . '   Status: ' . ( strlen( $wpdb-&gt;prefix ) &gt; 16 ? 'ERROR: Too long' : 'Acceptable' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  <span class="comment">// Commented out per https://github.com/easydigitaldownloads/Easy-Digital-Downloads/issues/3475</span>&nbsp;</div></li><li><div>  <span class="comment">//$return .= 'Admin AJAX:               ' . ( edd_test_ajax_works() ? 'Accessible' : 'Inaccessible' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div>  $return .= 'WP_DEBUG:                 ' . ( defined( 'WP_DEBUG' ) ? WP_DEBUG ? 'Enabled' : 'Disabled' : 'Not set' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Memory Limit:             ' . WP_MEMORY_LIMIT . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Registered Post Stati:    ' . implode( ', ', get_post_stati() ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_wordpress_config', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// EDD configuration</span>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- EDD Configuration' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Version:                  ' . EDD_VERSION . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Upgraded From:            ' . get_option( 'edd_version_upgraded_from', 'None' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Test Mode:                ' . ( edd_is_test_mode() ? &quot;Enabled\n&quot; : &quot;Disabled\n&quot; );&nbsp;</div></li><li><div>  $return .= 'AJAX:                     ' . ( ! edd_is_ajax_disabled() ? &quot;Enabled\n&quot; : &quot;Disabled\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Guest Checkout:           ' . ( edd_no_guest_checkout() ? &quot;Disabled\n&quot; : &quot;Enabled\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Symlinks:                 ' . ( apply_filters( 'edd_symlink_file_downloads', edd_get_option( 'symlink_file_downloads', false ) ) && function_exists( 'symlink' ) ? &quot;Enabled\n&quot; : &quot;Disabled\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Download Method:          ' . ucfirst( edd_get_file_download_method() ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Currency Code:            ' . edd_get_currency() . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Currency Position:        ' . edd_get_option( 'currency_position', 'before' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Decimal Separator:        ' . edd_get_option( 'decimal_separator', '.' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Thousands Separator:      ' . edd_get_option( 'thousands_separator', ', ' ) . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Upgrades Completed:       ' . implode( ', ', edd_get_completed_upgrades() ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_edd_config', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// EDD pages</span>&nbsp;</div></li><li><div>  $purchase_page = edd_get_option( 'purchase_page', '' );&nbsp;</div></li><li><div>  $success_page = edd_get_option( 'success_page', '' );&nbsp;</div></li><li><div>  $failure_page = edd_get_option( 'failure_page', '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- EDD Page Configuration' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Checkout:                 ' . ( !empty( $purchase_page ) ? &quot;Valid\n&quot; : &quot;Invalid\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Checkout Page:            ' . ( !empty( $purchase_page ) ? get_permalink( $purchase_page ) . &quot;\n&quot; : &quot;Unset\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Success Page:             ' . ( !empty( $success_page ) ? get_permalink( $success_page ) . &quot;\n&quot; : &quot;Unset\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Failure Page:             ' . ( !empty( $failure_page ) ? get_permalink( $failure_page ) . &quot;\n&quot; : &quot;Unset\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Downloads Slug:           ' . ( defined( 'EDD_SLUG' ) ? '/' . EDD_SLUG . &quot;\n&quot; : &quot;/downloads\n&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_edd_pages', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// EDD gateways</span>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- EDD Gateway Configuration' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $active_gateways = edd_get_enabled_payment_gateways();&nbsp;</div></li><li><div>  if( $active_gateways ) {&nbsp;</div></li><li><div>      $default_gateway_is_active = edd_is_gateway_active( edd_get_default_gateway() );&nbsp;</div></li><li><div>      if( $default_gateway_is_active ) {&nbsp;</div></li><li><div>          $default_gateway = edd_get_default_gateway();&nbsp;</div></li><li><div>          $default_gateway = $active_gateways[$default_gateway]['admin_label'];&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $default_gateway = 'Test Payment';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $gateways = array();&nbsp;</div></li><li><div>      foreach( $active_gateways as $gateway ) {&nbsp;</div></li><li><div>          $gateways[] = $gateway['admin_label'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $return .= 'Enabled Gateways:         ' . implode( ', ', $gateways ) . &quot;\n&quot;;&nbsp;</div></li><li><div>      $return .= 'Default Gateway:          ' . $default_gateway . &quot;\n&quot;;&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $return .= 'Enabled Gateways:         None' . &quot;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_edd_gateways', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// EDD Taxes</span>&nbsp;</div></li><li><div>  $return .= &quot;\n&quot; . '-- EDD Tax Configuration' . &quot;\n\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Taxes:                    ' . ( edd_use_taxes() ? &quot;Enabled\n&quot; : &quot;Disabled\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Tax Rate:                 ' . edd_get_tax_rate() * 100 . &quot;\n&quot;;&nbsp;</div></li><li><div>  $return .= 'Display On Checkout:      ' . ( edd_get_option( 'checkout_include_tax', false ) ? &quot;Displayed\n&quot; : &quot;Not Displayed\n&quot; );&nbsp;</div></li><li><div>  $return .= 'Prices Include Tax:       ' . ( edd_prices_include_tax() ? &quot;Yes\n&quot; : &quot;No\n&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $rates = edd_get_tax_rates();&nbsp;</div></li><li><div>  if( !empty( $rates ) ) {&nbsp;</div></li><li><div>      $return .= 'Country / State Rates:    ' . &quot;\n&quot;;&nbsp;</div></li><li><div>      foreach( $rates as $rate ) {&nbsp;</div></li><li><div>          $return .= '                          Country: ' . $rate['country'] . ', State: ' . $rate['state'] . ', Rate: ' . $rate['rate'] . &quot;\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = apply_filters( 'edd_sysinfo_after_edd_taxes', $return );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// EDD Templates</span>&nbsp;</div></li><li><div>  $dir = get_stylesheet_directory() . '/edd_templates<span class="comment">/*';</span>&nbsp;</div></li><li><div><span class="comment">  if( is_dir( $dir ) && ( count( glob( &quot;$dir/*&quot; ) ) !== 0 ) ) {</span>&nbsp;</div></li><li><div><span class="comment">      $return .= &quot;\n&quot; . '-- EDD Template Overrides' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      foreach( glob( $dir ) as $file ) {</span>&nbsp;</div></li><li><div><span class="comment">          $return .= 'Filename:                 ' . basename( $file ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $return = apply_filters( 'edd_sysinfo_after_edd_templates', $return );</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // Get plugins that have an update</span>&nbsp;</div></li><li><div><span class="comment">  $updates = get_plugin_updates();</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // Must-use plugins</span>&nbsp;</div></li><li><div><span class="comment">  // NOTE: MU plugins can't show updates!</span>&nbsp;</div></li><li><div><span class="comment">  $muplugins = get_mu_plugins();</span>&nbsp;</div></li><li><div><span class="comment">  if( count( $muplugins ) &gt; 0 ) {</span>&nbsp;</div></li><li><div><span class="comment">      $return .= &quot;\n&quot; . '-- Must-Use Plugins' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      foreach( $muplugins as $plugin =&gt; $plugin_data ) {</span>&nbsp;</div></li><li><div><span class="comment">          $return .= $plugin_data['Name'] . ': ' . $plugin_data['Version'] . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $return = apply_filters( 'edd_sysinfo_after_wordpress_mu_plugins', $return );</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // WordPress active plugins</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- WordPress Active Plugins' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $plugins = get_plugins();</span>&nbsp;</div></li><li><div><span class="comment">  $active_plugins = get_option( 'active_plugins', array() );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  foreach( $plugins as $plugin_path =&gt; $plugin ) {</span>&nbsp;</div></li><li><div><span class="comment">      if( !in_array( $plugin_path, $active_plugins ) )</span>&nbsp;</div></li><li><div><span class="comment">          continue;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $update = ( array_key_exists( $plugin_path, $updates ) ) ? ' (needs update - ' . $updates[$plugin_path]-&gt;update-&gt;new_version . ')' : '';</span>&nbsp;</div></li><li><div><span class="comment">      $return .= $plugin['Name'] . ': ' . $plugin['Version'] . $update . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_wordpress_plugins', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // WordPress inactive plugins</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- WordPress Inactive Plugins' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  foreach( $plugins as $plugin_path =&gt; $plugin ) {</span>&nbsp;</div></li><li><div><span class="comment">      if( in_array( $plugin_path, $active_plugins ) )</span>&nbsp;</div></li><li><div><span class="comment">          continue;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $update = ( array_key_exists( $plugin_path, $updates ) ) ? ' (needs update - ' . $updates[$plugin_path]-&gt;update-&gt;new_version . ')' : '';</span>&nbsp;</div></li><li><div><span class="comment">      $return .= $plugin['Name'] . ': ' . $plugin['Version'] . $update . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_wordpress_plugins_inactive', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  if( is_multisite() ) {</span>&nbsp;</div></li><li><div><span class="comment">      // WordPress Multisite active plugins</span>&nbsp;</div></li><li><div><span class="comment">      $return .= &quot;\n&quot; . '-- Network Active Plugins' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $plugins = wp_get_active_network_plugins();</span>&nbsp;</div></li><li><div><span class="comment">      $active_plugins = get_site_option( 'active_sitewide_plugins', array() );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      foreach( $plugins as $plugin_path ) {</span>&nbsp;</div></li><li><div><span class="comment">          $plugin_base = plugin_basename( $plugin_path );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">          if( !array_key_exists( $plugin_base, $active_plugins ) )</span>&nbsp;</div></li><li><div><span class="comment">              continue;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">          $update = ( array_key_exists( $plugin_path, $updates ) ) ? ' (needs update - ' . $updates[$plugin_path]-&gt;update-&gt;new_version . ')' : '';</span>&nbsp;</div></li><li><div><span class="comment">          $plugin = get_plugin_data( $plugin_path );</span>&nbsp;</div></li><li><div><span class="comment">          $return .= $plugin['Name'] . ': ' . $plugin['Version'] . $update . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">      $return = apply_filters( 'edd_sysinfo_after_wordpress_ms_plugins', $return );</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // Server configuration (really just versioning)</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- Webserver Configuration' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'PHP Version:              ' . PHP_VERSION . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'MySQL Version:            ' . $wpdb-&gt;db_version() . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Webserver Info:           ' . $_SERVER['SERVER_SOFTWARE'] . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_webserver_config', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // PHP configs... now we're getting to the important stuff</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- PHP Configuration' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Memory Limit:             ' . ini_get( 'memory_limit' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Upload Max Size:          ' . ini_get( 'upload_max_filesize' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Post Max Size:            ' . ini_get( 'post_max_size' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Upload Max Filesize:      ' . ini_get( 'upload_max_filesize' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Time Limit:               ' . ini_get( 'max_execution_time' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Max Input Vars:           ' . ini_get( 'max_input_vars' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Display Errors:           ' . ( ini_get( 'display_errors' ) ? 'On (' . ini_get( 'display_errors' ) . ')' : 'N/A' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'PHP Arg Separator:        ' . edd_get_php_arg_separator_output() . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_php_config', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // PHP extensions and such</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- PHP Extensions' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'cURL:                     ' . ( function_exists( 'curl_init' ) ? 'Supported' : 'Not Supported' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'fsockopen:                ' . ( function_exists( 'fsockopen' ) ? 'Supported' : 'Not Supported' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'SOAP Client:              ' . ( class_exists( 'SoapClient' ) ? 'Installed' : 'Not Installed' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Suhosin:                  ' . ( extension_loaded( 'suhosin' ) ? 'Installed' : 'Not Installed' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_php_ext', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // Session stuff</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '-- Session Configuration' . &quot;\n\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'EDD Use Sessions:         ' . ( defined( 'EDD_USE_PHP_SESSIONS' ) && EDD_USE_PHP_SESSIONS ? 'Enforced' : ( EDD()-&gt;session-&gt;use_php_sessions() ? 'Enabled' : 'Disabled' ) ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= 'Session:                  ' . ( isset( $_SESSION ) ? 'Enabled' : 'Disabled' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  // The rest of this is only relevant is session is enabled</span>&nbsp;</div></li><li><div><span class="comment">  if( isset( $_SESSION ) ) {</span>&nbsp;</div></li><li><div><span class="comment">      $return .= 'Session Name:             ' . esc_html( ini_get( 'session.name' ) ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      $return .= 'Cookie Path:              ' . esc_html( ini_get( 'session.cookie_path' ) ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      $return .= 'Save Path:                ' . esc_html( ini_get( 'session.save_path' ) ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      $return .= 'Use Cookies:              ' . ( ini_get( 'session.use_cookies' ) ? 'On' : 'Off' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">      $return .= 'Use Only Cookies:         ' . ( ini_get( 'session.use_only_cookies' ) ? 'On' : 'Off' ) . &quot;\n&quot;;</span>&nbsp;</div></li><li><div><span class="comment">  }</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return = apply_filters( 'edd_sysinfo_after_session_config', $return );</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  $return .= &quot;\n&quot; . '### End System Info ###';</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">  return $return;</span>&nbsp;</div></li><li><div><span class="comment">}</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">&nbsp;</span>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generates a System Info download file</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since       2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return      void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function edd_tools_sysinfo_download() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if( ! current_user_can( 'manage_shop_settings' ) ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  nocache_headers();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  header( 'Content-Type: text/plain' );&nbsp;</div></li><li><div>  header( 'Content-Disposition: attachment; filename=&quot;edd-system-info.txt&quot;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo wp_strip_all_tags( $_POST['edd-sysinfo'] );&nbsp;</div></li><li><div>  edd_die();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'edd_download_sysinfo', 'edd_tools_sysinfo_download' );&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Easy Digital Downloads</li><li><span></span>2.7.8</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>