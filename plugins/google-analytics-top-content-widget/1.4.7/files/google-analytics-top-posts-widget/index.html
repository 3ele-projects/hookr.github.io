<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="1.4.7" data-slug="google-analytics-top-content-widget" data-type="file" data-id="80267"><head xmlns="http://www.w3.org/1999/xhtml"><title> google-analytics-top-posts-widget | file | Google Analytics Top Content Widget | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, google-analytics-top-content-widget, 1.4.7" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=9e0552392b5db7b465d0dd25c33b319f' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/google-analytics-top-posts-widget/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fgoogle-analytics-top-posts-widget%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fgoogle-analytics-top-posts-widget%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-google-analytics-top-content-widget-1.4.7-file-google-analytics-top-posts-widget","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="google-analytics-top-posts-widget" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to google-analytics-top-content-&hellip;." href="http://hookr.io/plugins/google-analytics-top-content-widget/" class="plugin"><span property="name">google-analytics-top-content-&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.4.7." href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/" class="H_VERSION"><span property="name">1.4.7</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">google-analytics-top-posts-wi&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="31"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/all/" title="All">All <span class="count badge">31</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="17"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/hooks/" title="Hooks">Hooks <span class="count badge">17</span></a></li><li class="" data-id="action" data-count="2"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/actions/" title="Actions">Actions <span class="count badge">2</span></a></li><li class="" data-id="filter" data-count="15"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/filters/" title="Filters">Filters <span class="count badge">15</span></a></li><li class="" data-id="class" data-count="5"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/classes/" title="Classes">Classes <span class="count badge">5</span></a></li><li class="" data-id="constant" data-count="0"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/constants/" title="Constants">Constants <span class="count badge">0</span></a></li><li class="" data-id="function" data-count="8"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/functions/" title="Functions">Functions <span class="count badge">8</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/google-analytics-top-content-widget/1.4.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/google-analytics-top-posts-widget.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">Plugin Name:  Google Analytics Top Content Widget</span>&nbsp;</div></li><li><div><span class="comment">Description: Widget and shortcode to display top content according to Google Analytics. (&quot;Google Analytics Dashboard&quot; plugin required)</span>&nbsp;</div></li><li><div><span class="comment">Plugin URI: http://j.ustin.co/yWTtmy</span>&nbsp;</div></li><li><div><span class="comment">Author: Jtsternberg</span>&nbsp;</div></li><li><div><span class="comment">Author URI: http://about.me/jtsternberg</span>&nbsp;</div></li><li><div><span class="comment">Donate link: http://j.ustin.co/rYL89n</span>&nbsp;</div></li><li><div><span class="comment">Version: 1.4.7</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>require_once dirname( __FILE__ ) . '/class-tgm-plugin-activation.php';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'tgmpa_register', 'dsgnwrks_ga_register_required_plugins' );&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Register the required plugins for The &quot;Google Analytics Top Content&quot; plugin.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function dsgnwrks_ga_register_required_plugins() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$plugins = array(&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  array(&nbsp;</div></li><li><div>    'name' =&gt; 'Google Analytics Dashboard', &nbsp;</div></li><li><div>    'slug' =&gt; 'google-analytics-dashboard', &nbsp;</div></li><li><div>    'required' =&gt; true, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$plugin_text_domain = 'top-google-posts';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$widgets_url = '&lt;a href=&quot;' . get_admin_url( '', 'widgets.php' ) . '&quot; title=&quot;' . __( 'Setup Widget', $plugin_text_domain ) . '&quot;&gt;' . __( 'Setup Widget', $plugin_text_domain ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$config = array(&nbsp;</div></li><li><div>  'domain' =&gt; $plugin_text_domain, &nbsp;</div></li><li><div>  'default_path' =&gt; '', &nbsp;</div></li><li><div>  'parent_menu_slug' =&gt; 'plugins.php', &nbsp;</div></li><li><div>  'parent_url_slug' =&gt; 'plugins.php', &nbsp;</div></li><li><div>  'menu' =&gt; 'install-required-plugins', &nbsp;</div></li><li><div>  'has_notices' =&gt; true, &nbsp;</div></li><li><div>  'is_automatic' =&gt; true, &nbsp;</div></li><li><div>  'message' =&gt; '', &nbsp;</div></li><li><div>  'strings' =&gt; array(&nbsp;</div></li><li><div>    'page_title' =&gt; __( 'Install Required Plugins', $plugin_text_domain ), &nbsp;</div></li><li><div>    'menu_title' =&gt; __( 'Install Plugins', $plugin_text_domain ), &nbsp;</div></li><li><div>    'installing' =&gt; __( 'Installing Plugin: %s', $plugin_text_domain ), <span class="comment">// %1$s = plugin name</span>&nbsp;</div></li><li><div>    'oops' =&gt; __( 'Something went wrong with the plugin API.', $plugin_text_domain ), &nbsp;</div></li><li><div>    'notice_can_install_required' =&gt; _n_noop( 'The &quot;Google Analytics Top Content&quot; plugin requires the following plugin: %1$s.', 'This plugin requires the following plugins: %1$s.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_can_install_recommended' =&gt; _n_noop( 'This plugin recommends the following plugin: %1$s.', 'This plugin recommends the following plugins: %1$s.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_cannot_install' =&gt; _n_noop( 'Sorry, but you do not have the correct permissions to install the %s plugin. Contact the administrator of this site for help on getting the plugin installed.', 'Sorry, but you do not have the correct permissions to install the %s plugins. Contact the administrator of this site for help on getting the plugins installed.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_can_activate_required' =&gt; _n_noop( 'The following required plugin is currently inactive: %1$s.', 'The following required plugins are currently inactive: %1$s.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_can_activate_recommended' =&gt; _n_noop( 'The following recommended plugin is currently inactive: %1$s.', 'The following recommended plugins are currently inactive: %1$s.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_cannot_activate' =&gt; _n_noop( 'Sorry, but you do not have the correct permissions to activate the %s plugin. Contact the administrator of this site for help on getting the plugin activated.', 'Sorry, but you do not have the correct permissions to activate the %s plugins. Contact the administrator of this site for help on getting the plugins activated.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_ask_to_update' =&gt; _n_noop( 'The following plugin needs to be updated to its latest version to ensure maximum compatibility with this plugin: %1$s.', 'The following plugins need to be updated to their latest version to ensure maximum compatibility with this plugin: %1$s.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'notice_cannot_update' =&gt; _n_noop( 'Sorry, but you do not have the correct permissions to update the %s plugin. Contact the administrator of this site for help on getting the plugin updated.', 'Sorry, but you do not have the correct permissions to update the %s plugins. Contact the administrator of this site for help on getting the plugins updated.' ), <span class="comment">// %1$s = plugin name</span>(s)&nbsp;</div></li><li><div>    'install_link' =&gt; _n_noop( 'Begin installing plugin', 'Begin installing plugins' ), &nbsp;</div></li><li><div>    'activate_link' =&gt; _n_noop( 'Activate installed plugin', 'Activate installed plugins' ), &nbsp;</div></li><li><div>    'return' =&gt; __( 'Return to Required Plugins Installer', $plugin_text_domain ), &nbsp;</div></li><li><div>    'plugin_activated' =&gt; __( 'Plugin activated successfully.', $plugin_text_domain ), &nbsp;</div></li><li><div>    'complete' =&gt; __( 'All plugins installed and activated successfully. %s', $plugin_text_domain ) <span class="comment">// %1$s = dashboard link</span>&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>tgmpa( $plugins, $config );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Register Top Content widgets</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>add_action( 'widgets_init', 'dsgnwrks_register_google_top_posts_widgets' );&nbsp;</div></li><li><div>function dsgnwrks_register_google_top_posts_widgets() {&nbsp;</div></li><li><div>register_widget( 'dsgnwrks_google_top_posts_widgets' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Top Content widget</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>class dsgnwrks_google_top_posts_widgets extends WP_Widget {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//process the new widget</span>&nbsp;</div></li><li><div>  function dsgnwrks_google_top_posts_widgets() {&nbsp;</div></li><li><div>      $widget_ops = array(&nbsp;</div></li><li><div>    'classname' =&gt; 'google_top_posts', &nbsp;</div></li><li><div>    'description' =&gt; 'Show top posts from Google Analytics'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      $this-&gt;WP_Widget( 'dsgnwrks_google_top_posts_widgets', 'Google Analytics Top Content', $widget_ops );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>   <span class="comment">//build the widget settings form</span>&nbsp;</div></li><li><div>  function form($instance) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $gad_auth_token = get_option( 'gad_auth_token' );&nbsp;</div></li><li><div>      if ( isset( $gad_auth_token ) && $gad_auth_token != '' && class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $defaults = array(&nbsp;</div></li><li><div>          'title' =&gt; 'Top Viewed Content', &nbsp;</div></li><li><div>          'pageviews' =&gt; 20, &nbsp;</div></li><li><div>          'number' =&gt; 5, &nbsp;</div></li><li><div>          'timeval' =&gt; '1', &nbsp;</div></li><li><div>          'time' =&gt; '2628000', &nbsp;</div></li><li><div>          'showhome' =&gt; 0, &nbsp;</div></li><li><div>          'titleremove' =&gt; '', &nbsp;</div></li><li><div>          'contentfilter' =&gt; '', &nbsp;</div></li><li><div>          'catlimit' =&gt; '', &nbsp;</div></li><li><div>          'catfilter' =&gt; '', &nbsp;</div></li><li><div>          'postfilter' =&gt; ''&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $instance = wp_parse_args( (array) $instance, $defaults );&nbsp;</div></li><li><div>        extract( $instance, EXTR_SKIP );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&lt;b&gt;Title:&lt;/b&gt;&lt;input class=&quot;widefat&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'title' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr( $title ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&lt;b&gt;Show pages with at least __ number of page views:&lt;/b&gt; &lt;input class=&quot;widefat&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'pageviews' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo absint( $pageviews ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&lt;b&gt;Number to Show:&lt;/b&gt; &lt;input class=&quot;widefat&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'number' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo absint( $number ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&lt;b&gt;Select how far back you would like analytics to pull from:&lt;/b&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;timestamp-wrap&quot;&gt;&nbsp;</div></li><li><div>                  &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo '&lt;select style=&quot;margin-right: 5px;&quot; id=&quot;'. $this-&gt;get_field_name( 'timeval' ) .'&quot; name=&quot;'. $this-&gt;get_field_name( 'timeval' ) .'&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    for ( $i = 1; $i &lt;= 30; $i = $i +1 ) {&nbsp;</div></li><li><div>                        echo '&lt;option value=&quot;'. $i .'&quot;';&nbsp;</div></li><li><div>                        echo selected( $i, $instance['timeval'], false );&nbsp;</div></li><li><div>                        echo '&gt;' . $i;&nbsp;</div></li><li><div>                        echo '&lt;/option&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo '&lt;/select&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo '&lt;select style=&quot;width: 50%;&quot; id=&quot;'. $this-&gt;get_field_name( 'time' ) .'&quot; name=&quot;'. $this-&gt;get_field_name( 'time' ) .'&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    echo '&lt;option value=&quot;3600&quot;'. selected( '3600', $time, false ). '&gt;hour(s)&lt;/option&gt;';&nbsp;</div></li><li><div>                    echo '&lt;option value=&quot;86400&quot;'. selected( '86400', $time, false ). '&gt;day(s)&lt;/option&gt;';&nbsp;</div></li><li><div>                    echo '&lt;option value=&quot;2628000&quot;'. selected( '2628000', $time, false ). '&gt;month(s)&lt;/option&gt;';&nbsp;</div></li><li><div>                    echo '&lt;option value=&quot;31536000&quot;'. selected( '31536000', $time, false ). '&gt;year(s)&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  echo '&lt;/select&gt;';&nbsp;</div></li><li><div>                  ?&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&nbsp;</div></li><li><div>              &lt;span style=&quot;width: 80%; float: left; margin-right: 10px;&quot;&gt;&lt;b&gt;Remove home page from list:&lt;/b&gt; (usually &quot;&lt;i&gt;yoursite.com&lt;/i&gt;&quot; is the highest viewed page)&lt;br/&gt;&lt;/span&gt;&nbsp;</div></li><li><div>              &lt;input style=&quot;margin-top: 15px;&quot; id=&quot;&lt;?php echo $this-&gt;get_field_id( 'showhome' ); ?&gt;&quot; type=&quot;checkbox&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'showhome' ); ?&gt;&quot; value=&quot;1&quot; &lt;?php checked(1, $showhome); ?&gt;/&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p style=&quot;clear: both; padding-top: 15px;&quot;&gt;&lt;label&gt;&lt;b&gt;Remove Site Title From Listings:&lt;/b&gt;&lt;br/&gt;Your listings will usually be returned with the page/post name as well as the site title. To remove the site title from the listings, place the exact text you would like removed (i.e. &lt;i&gt;- Site Title&lt;/i&gt;) here. If there is more than one phrase to be removed, separate them by commas (i.e. &lt;i&gt;- Site Title, | Site Title&lt;/i&gt;). &lt;b&gt;Unless your site doesn't output the site titles, then you will need to add this in order for the filter settings below to work.&lt;/b&gt; &lt;input class=&quot;widefat&quot; style=&quot;margin-top:2px;&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'titleremove' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr( $titleremove ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&nbsp;</div></li><li><div>            &lt;b&gt;Limit Listings To:&lt;/b&gt;&nbsp;</div></li><li><div>            &lt;select name=&quot;&lt;?php echo $this-&gt;get_field_name( 'contentfilter' ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            echo '&lt;option value=&quot;allcontent&quot; '. selected( esc_attr( $instance['contentfilter'] ), '' ) .'&gt;Not Limited&lt;/option&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $content_types = get_post_types( array( 'public' =&gt; true ) );&nbsp;</div></li><li><div>            foreach( $content_types as $key =&gt; $value ) {&nbsp;</div></li><li><div>              if ( $value == 'attachment' ) continue;&nbsp;</div></li><li><div>              $selected_value = esc_attr( $instance['contentfilter'] ) == $key ? 'selected' : '';&nbsp;</div></li><li><div>              echo &quot;&lt;option value='$key' $selected_value&gt;$value&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;/select&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php if ( $instance['contentfilter'] == 'allcontent' || $instance['contentfilter'] == 'post' ) { ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p&gt;&lt;label&gt;&lt;b&gt;Limit Listings To Category:&lt;/b&gt;&lt;br/&gt;To limit to specific categories, place comma separated category ID's.&lt;input class=&quot;widefat&quot; style=&quot;margin-top:2px;&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'catlimit' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr( $catlimit ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              &lt;p&gt;&lt;label&gt;&lt;b&gt;Filter Out Category:&lt;/b&gt;&lt;br/&gt;To remove specific categories, place comma separated category ID's.&lt;input class=&quot;widefat&quot; style=&quot;margin-top:2px;&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'catfilter' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr( $catfilter ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&lt;label&gt;&lt;b&gt;Filter Out Post/Page IDs:&lt;/b&gt;&lt;br/&gt;To remove specific posts/pages, place comma separated post/page ID's.&lt;input class=&quot;widefat&quot; style=&quot;margin-top:2px;&quot; name=&quot;&lt;?php echo $this-&gt;get_field_name( 'postfilter' ); ?&gt;&quot;  type=&quot;text&quot; value=&quot;&lt;?php echo esc_attr( $postfilter ); ?&gt;&quot; /&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      } elseif ( isset( $gad_auth_token ) && $gad_auth_token != '' && !class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>          echo dsgnwrks_gtc_widget_message_one();&nbsp;</div></li><li><div>          echo '&lt;style type=&quot;text/css&quot;&gt; #widget-'. $this-&gt;id .'-savewidget { display: none !important; } &lt;/style&gt;';&nbsp;</div></li><li><div>      } elseif ( class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>          if ( !isset( $gad_auth_token ) || $gad_auth_token == '' ) {&nbsp;</div></li><li><div>              echo dsgnwrks_gtc_widget_message_two();&nbsp;</div></li><li><div>              echo '&lt;style type=&quot;text/css&quot;&gt; #widget-'. $this-&gt;id .'-savewidget { display: none !important; } &lt;/style&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          echo dsgnwrks_gtc_widget_message_one();&nbsp;</div></li><li><div>          echo '&lt;style type=&quot;text/css&quot;&gt; #widget-'. $this-&gt;id .'-savewidget { display: none !important; } &lt;/style&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//save the widget settings</span>&nbsp;</div></li><li><div>  function update($new_instance, $old_instance) {&nbsp;</div></li><li><div>      $instance = $old_instance;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $instance['title'] = esc_attr( $new_instance['title'] );&nbsp;</div></li><li><div>      $instance['pageviews'] = absint( $new_instance['pageviews'] );&nbsp;</div></li><li><div>      $instance['number'] = absint( $new_instance['number'] );&nbsp;</div></li><li><div>      $instance['showhome'] = absint( $new_instance['showhome'] );&nbsp;</div></li><li><div>      $instance['time'] = esc_attr( $new_instance['time'] );&nbsp;</div></li><li><div>      $instance['timeval'] = absint( $new_instance['timeval'] );&nbsp;</div></li><li><div>      $instance['titleremove'] = sanitize_text_field( $new_instance['titleremove'] );&nbsp;</div></li><li><div>      $instance['contentfilter'] = esc_attr( $new_instance['contentfilter'] );&nbsp;</div></li><li><div>      $instance['catlimit'] = esc_attr( $new_instance['catlimit'] );&nbsp;</div></li><li><div>      $instance['catfilter'] = esc_attr( $new_instance['catfilter'] );&nbsp;</div></li><li><div>      $instance['postfilter'] = esc_attr( $new_instance['postfilter'] );&nbsp;</div></li><li><div>      delete_transient( 'dw-gtc-list' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $instance;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//display the widget</span>&nbsp;</div></li><li><div>  function widget($args, $instance) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      extract($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo $before_widget;&nbsp;</div></li><li><div>      $title = apply_filters( 'widget_title', $instance['title'] );&nbsp;</div></li><li><div>      if ( !empty( $title ) ) { echo $before_title . $title . $after_title; };&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo dsgnwrks_gtc_top_content_shortcode( $instance, 'widget' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo $after_widget;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function dsgnwrks_gtc_widget_message_one() {&nbsp;</div></li><li><div>return '&lt;p&gt;&lt;strong&gt;The &quot;Google Analytics Top Content&quot; widget requires the plugin, &lt;em&gt;&quot;Google Analytics Dashboard&quot;&lt;/em&gt;, to be installed and activated.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;'. admin_url( 'plugins.php?page=install-required-plugins' ) .'&quot; class=&quot;thickbox&quot; title=&quot;Install Google Analytics Dashboard&quot;&gt;Install plugin&lt;/a&gt; | &lt;a href=&quot;'. admin_url( 'plugins.php' ) .'&quot; class=&quot;thickbox&quot; title=&quot;Activate Google Analytics Dashboard&quot;&gt;Activate plugin&lt;/a&gt;.&lt;/p&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function dsgnwrks_gtc_widget_message_two() {&nbsp;</div></li><li><div>return '&lt;p&gt;You must first login to Google Analytics in the &quot;Google Analytics Dashboard&quot; settings for this widget to work.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;'. admin_url( 'options-general.php?page=google-analytics-dashboard/gad-admin-options.php' ) .'&quot;&gt;Go to plugin settings&lt;/a&gt;.&lt;/p&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter( 'tgmpa_complete_link_text', 'dsgnwrks_change_link_text' );&nbsp;</div></li><li><div>function dsgnwrks_change_link_text( $complete_link_text ) {&nbsp;</div></li><li><div>return 'Go to &quot;Google Analytics Dashboard&quot; plugin settings';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_filter( 'tgmpa_complete_link_url', 'dsgnwrks_change_link_url' );&nbsp;</div></li><li><div>function dsgnwrks_change_link_url( $complete_link_url ) {&nbsp;</div></li><li><div>return admin_url( 'options-general.php?page=google-analytics-dashboard/gad-admin-options.php' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Writing Prompts Calendar Shortcode</span>&nbsp;</div></li><li><div>add_shortcode( 'google_top_content', 'dsgnwrks_gtc_top_content_shortcode' );&nbsp;</div></li><li><div>function dsgnwrks_gtc_top_content_shortcode( $atts, $context ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$defaults = array(&nbsp;</div></li><li><div>  'title' =&gt; 'Top Viewed Content', &nbsp;</div></li><li><div>  'pageviews' =&gt; 20, &nbsp;</div></li><li><div>  'number' =&gt; 5, &nbsp;</div></li><li><div>  'timeval' =&gt; '1', &nbsp;</div></li><li><div>  'time' =&gt; '2628000', &nbsp;</div></li><li><div>  'showhome' =&gt; 0, &nbsp;</div></li><li><div>  'titleremove' =&gt; '', &nbsp;</div></li><li><div>  'contentfilter' =&gt; 'allcontent', &nbsp;</div></li><li><div>  'catlimit' =&gt; '', &nbsp;</div></li><li><div>  'catfilter' =&gt; '', &nbsp;</div></li><li><div>  'postfilter' =&gt; '', &nbsp;</div></li><li><div>  'keep_query_vars' =&gt; false, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>$atts = shortcode_atts( $defaults, $atts );&nbsp;</div></li><li><div>$atts = apply_filters( 'gtc_atts_filter', $atts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>$gad_auth_token = get_option( 'gad_auth_token' );&nbsp;</div></li><li><div>if ( isset( $gad_auth_token ) && $gad_auth_token != '' && class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $trans = '';&nbsp;</div></li><li><div>    <span class="comment">// @Dev</span>&nbsp;</div></li><li><div>    <span class="comment">// $atts['update'] = true;</span>&nbsp;</div></li><li><div>    if ( empty( $atts['update'] ) ) {&nbsp;</div></li><li><div>      $trans = get_transient( 'dw-gtc-list' );&nbsp;</div></li><li><div>      $transuse = &quot;\n&lt;!-- using transient --&gt;\n&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ( empty( $trans ) ) {&nbsp;</div></li><li><div>      $transuse = &quot;\n&lt;!-- not using transient --&gt;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $login = new GADWidgetData();&nbsp;</div></li><li><div>      $ga = new GALib( $login-&gt;auth_type, NULL, $login-&gt;oauth_token, $login-&gt;oauth_secret, $login-&gt;account_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $time = ( $atts['timeval'] * $atts['time'] );&nbsp;</div></li><li><div>      $time_diff = abs( time() - $time );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( strpos( $atts['time'], 'month' ) ) {&nbsp;</div></li><li><div>        $time = str_replace( '-month', '', $atts['time'] );&nbsp;</div></li><li><div>        $month = $time * 60 * 60 * 24 * 30.416666667;&nbsp;</div></li><li><div>        $time_diff = abs( time() - $month );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pages = $ga-&gt;complex_report_query(&nbsp;</div></li><li><div>          date( 'Y-m-d', $time_diff ), &nbsp;</div></li><li><div>          date( 'Y-m-d' ), &nbsp;</div></li><li><div>          array( 'ga:pagePath', 'ga:pageTitle' ), &nbsp;</div></li><li><div>          array( 'ga:pageviews' ), &nbsp;</div></li><li><div>          array( '-ga:pageviews' ), &nbsp;</div></li><li><div>          array( 'ga:pageviews&gt;' . $atts['pageviews'] )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      $atts['context'] = ( $context ) ? $context : 'shortcode';&nbsp;</div></li><li><div>      $pages = apply_filters( 'gtc_pages_filter', $pages, $atts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $list = '';&nbsp;</div></li><li><div>      if ( $pages ) {&nbsp;</div></li><li><div>        $urlarray = array();&nbsp;</div></li><li><div>        $list .= '&lt;ol&gt;';&nbsp;</div></li><li><div>        $counter = 1;&nbsp;</div></li><li><div>        foreach( $pages as $page ) {&nbsp;</div></li><li><div>          $url = $page['value'];&nbsp;</div></li><li><div>          <span class="comment">// Url is index and we don't want the homepage, skip</span>&nbsp;</div></li><li><div>          if ( $url == '/' && $atts['showhome'] != '0' )&nbsp;</div></li><li><div>            continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// We need to check if there are duplicates with query vars</span>&nbsp;</div></li><li><div>          $path = pathinfo( $url );&nbsp;</div></li><li><div>          $query_var = strpos( $url, '?' );&nbsp;</div></li><li><div>          $default_permalink = strpos( $path['filename'], '?p=' );&nbsp;</div></li><li><div>          <span class="comment">// Strip the query var off the url (if not using default permalinks)</span>&nbsp;</div></li><li><div>          $url = ( ! $atts['keep_query_vars'] && false !== $query_var && false === $default_permalink )&nbsp;</div></li><li><div>            ? substr( $url, 0, $query_var )&nbsp;</div></li><li><div>            : $url;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Allow modification of the URL</span>&nbsp;</div></li><li><div>          $url = apply_filters( 'gtc_page_url', $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Url already exists? skip it</span>&nbsp;</div></li><li><div>          if ( in_array( $url, $urlarray ) )&nbsp;</div></li><li><div>            continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $urlarray[] = $url;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $atts['contentfilter'] != 'allcontent' || $atts['catlimit'] != '' || $atts['catfilter'] != '' || $atts['postfilter'] != '' ) {&nbsp;</div></li><li><div>            $wppost = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( false !== $default_permalink ) {&nbsp;</div></li><li><div>              $wppost = get_post( (int) str_replace( '?p=', '', $path['filename'] ) );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ( !$wppost && !empty( $url ) && trim( $url ) != '/' ) {&nbsp;</div></li><li><div>              $content_types = get_post_types( array( 'public' =&gt; true ) );&nbsp;</div></li><li><div>              foreach( $content_types as $type ) {&nbsp;</div></li><li><div>                if ( $type == 'attachment' )&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>                $object_name = is_post_type_hierarchical( $type ) ? $url : @end( @array_filter( @explode( '/', $url ) ) );&nbsp;</div></li><li><div>                if ( $wppost = get_page_by_path( $object_name, OBJECT, $type ) )&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $atts['contentfilter'] != 'allcontent' ) {&nbsp;</div></li><li><div>              if ( empty( $wppost ) ) continue;&nbsp;</div></li><li><div>              if ( $wppost-&gt;post_type != $atts['contentfilter'] ) continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $atts['contentfilter'] == 'allcontent' || $atts['contentfilter'] == 'post' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $atts['catlimit'] != '' ) {&nbsp;</div></li><li><div>                $limit_array = array();&nbsp;</div></li><li><div>                $catlimits = esc_attr( $atts['catlimit'] );&nbsp;</div></li><li><div>                $catlimits = explode( ', ', $catlimits );&nbsp;</div></li><li><div>                foreach ( $catlimits as $catlimit ) {&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">// if ( is_user_logged_in() ) $list .= '&lt;pre&gt;'. htmlentities( print_r( $wppost-&gt;post_name, true ) ) .'&lt;/pre&gt;';</span></span>&nbsp;</div></li><li><div>                  if ( in_category( $catlimit, $wppost ) ) $limit_array[] = $wppost-&gt;ID;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ( !in_array( $wppost-&gt;ID, $limit_array ) ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $atts['catfilter'] != '' ) {&nbsp;</div></li><li><div>                $filter_array = array();&nbsp;</div></li><li><div>                $catfilters = esc_attr( $atts['catfilter'] );&nbsp;</div></li><li><div>                $catfilters = explode( ', ', $catfilters );&nbsp;</div></li><li><div>                foreach ( $catfilters as $catfilter ) {&nbsp;</div></li><li><div>                  if ( in_category( $catfilter, $wppost ) ) $filter_array[] = $wppost-&gt;ID;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ( in_array( $wppost-&gt;ID, $filter_array ) ) continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $atts['postfilter'] != '' ) {&nbsp;</div></li><li><div>              $postfilter_array = array();&nbsp;</div></li><li><div>              $postfilters = esc_attr( $atts['postfilter'] );&nbsp;</div></li><li><div>              $postfilters = explode( ', ', $postfilters );&nbsp;</div></li><li><div>              foreach ( $postfilters as $postfilter ) {&nbsp;</div></li><li><div>                <span class="comment"><span class="comment">// if ( is_user_logged_in() ) $list .= '&lt;pre&gt;'. htmlentities( print_r( $wppost-&gt;post_name, true ) ) .'&lt;/pre&gt;';</span></span>&nbsp;</div></li><li><div>                if ( $postfilter == $wppost-&gt;ID ) $postfilter_array[] = $wppost-&gt;ID;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if ( in_array( $wppost-&gt;ID, $postfilter_array ) ) continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $title = stripslashes( wp_filter_post_kses( apply_filters( 'gtc_page_title', $page['children']['value'], $page, $wppost ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty( $atts['titleremove'] ) ) {&nbsp;</div></li><li><div>            $removes = explode( ', ', sanitize_text_field( $atts['titleremove'] ) );&nbsp;</div></li><li><div>            foreach ( $removes as $remove ) {&nbsp;</div></li><li><div>              $title = str_ireplace( trim( $remove ), '', $title );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $list .= apply_filters( 'gtc_list_item', '&lt;li&gt;&lt;a href=&quot;'. $url .'&quot;&gt;' . $title . '&lt;/a&gt;&lt;/li&gt;', $page, $wppost, $counter );&nbsp;</div></li><li><div>          $counter++;&nbsp;</div></li><li><div>          if ( $counter &gt; $atts['number'] ) break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $list .= '&lt;/ol&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $list = apply_filters( 'gtc_list_output', $list );&nbsp;</div></li><li><div>      set_transient( 'dw-gtc-list', $list, 86400 );&nbsp;</div></li><li><div>      return $transuse . $list . $transuse;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    return $transuse . apply_filters( 'gtc_list_output', $trans ) . $transuse;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} elseif ( isset( $gad_auth_token ) && $gad_auth_token != '' && !class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>    $list = dsgnwrks_gtc_widget_message_one();&nbsp;</div></li><li><div>} elseif ( class_exists( 'GADWidgetData' ) ) {&nbsp;</div></li><li><div>    if ( !isset( $gad_auth_token ) || $gad_auth_token == '' ) {&nbsp;</div></li><li><div>        $list = dsgnwrks_gtc_widget_message_two();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>} else {&nbsp;</div></li><li><div>    $list = dsgnwrks_gtc_widget_message_one();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>return $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Google Analytics Top Content Widget</li><li><span></span>1.4.7</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>