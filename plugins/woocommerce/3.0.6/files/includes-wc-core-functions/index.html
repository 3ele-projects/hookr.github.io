<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="3.0.6" data-slug="woocommerce" data-type="file" data-id="40765"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-wc-core-functions | file | Woocommerce | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, woocommerce, 3.0.6" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=82c31592f67acbefb39a41a7e39bee5d' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-wc-core-functions/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-wc-core-functions%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-wc-core-functions%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-woocommerce-3.0.6-file-includes-wc-core-functions","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-wc-core-functions" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to woocommerce." href="http://hookr.io/plugins/woocommerce/" class="plugin"><span property="name">woocommerce</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.0.6." href="http://hookr.io/plugins/woocommerce/3.0.6/" class="H_VERSION"><span property="name">3.0.6</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/woocommerce/3.0.6/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-wc-core-functions</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="3119"><a href="http://hookr.io/plugins/woocommerce/3.0.6/all/" title="All">All <span class="count badge">3119</span></a></li><li class="" data-id="new" data-count="3"><a href="http://hookr.io/plugins/woocommerce/3.0.6/new/" title="New">New <span class="count badge">3</span></a></li><li class="" data-id="hooks" data-count="2110"><a href="http://hookr.io/plugins/woocommerce/3.0.6/hooks/" title="Hooks">Hooks <span class="count badge">2110</span></a></li><li class="" data-id="action" data-count="774"><a href="http://hookr.io/plugins/woocommerce/3.0.6/actions/" title="Actions">Actions <span class="count badge">774</span></a></li><li class="" data-id="filter" data-count="1336"><a href="http://hookr.io/plugins/woocommerce/3.0.6/filters/" title="Filters">Filters <span class="count badge">1336</span></a></li><li class="" data-id="class" data-count="365"><a href="http://hookr.io/plugins/woocommerce/3.0.6/classes/" title="Classes">Classes <span class="count badge">365</span></a></li><li class="" data-id="constant" data-count="14"><a href="http://hookr.io/plugins/woocommerce/3.0.6/constants/" title="Constants">Constants <span class="count badge">14</span></a></li><li class="" data-id="function" data-count="626"><a href="http://hookr.io/plugins/woocommerce/3.0.6/functions/" title="Functions">Functions <span class="count badge">626</span></a></li><li class="" data-id="shortcode" data-count="4"><a href="http://hookr.io/plugins/woocommerce/3.0.6/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">4</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/wc-core-functions.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WooCommerce Core Functions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * General core functions available on both the front-end and admin.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @author         WooThemes</span>&nbsp;</div></li><li><div><span class="comment"> * @category     Core</span>&nbsp;</div></li><li><div><span class="comment"> * @package     WooCommerce/Functions</span>&nbsp;</div></li><li><div><span class="comment"> * @version     2.1.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! defined( 'ABSPATH' ) ) {&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Include core functions (available in both admin and frontend).</span>&nbsp;</div></li><li><div>include( 'wc-conditional-functions.php' );&nbsp;</div></li><li><div>include( 'wc-coupon-functions.php' );&nbsp;</div></li><li><div>include( 'wc-user-functions.php' );&nbsp;</div></li><li><div>include( 'wc-deprecated-functions.php' );&nbsp;</div></li><li><div>include( 'wc-formatting-functions.php' );&nbsp;</div></li><li><div>include( 'wc-order-functions.php' );&nbsp;</div></li><li><div>include( 'wc-order-item-functions.php' );&nbsp;</div></li><li><div>include( 'wc-page-functions.php' );&nbsp;</div></li><li><div>include( 'wc-product-functions.php' );&nbsp;</div></li><li><div>include( 'wc-stock-functions.php' );&nbsp;</div></li><li><div>include( 'wc-account-functions.php' );&nbsp;</div></li><li><div>include( 'wc-term-functions.php' );&nbsp;</div></li><li><div>include( 'wc-attribute-functions.php' );&nbsp;</div></li><li><div>include( 'wc-rest-functions.php' );&nbsp;</div></li><li><div>include( 'wc-widget-functions.php' );&nbsp;</div></li><li><div>include( 'wc-webhook-functions.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters on data used in admin and frontend.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>add_filter( 'woocommerce_coupon_code', 'html_entity_decode' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_coupon_code', 'sanitize_text_field' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_coupon_code', 'strtolower' ); <span class="comment">// Coupons case-insensitive by default</span>&nbsp;</div></li><li><div>add_filter( 'woocommerce_stock_amount', 'intval' ); <span class="comment">// Stock amounts are integers by default</span>&nbsp;</div></li><li><div>add_filter( 'woocommerce_shipping_rate_label', 'sanitize_text_field' ); <span class="comment">// Shipping rate label</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Short Description (excerpt).</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'wptexturize' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'convert_smilies' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'convert_chars' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'wpautop' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'shortcode_unautop' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'prepend_attachment' );&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'do_shortcode', 11 ); <span class="comment">// AFTER wpautop()</span>&nbsp;</div></li><li><div>add_filter( 'woocommerce_short_description', 'wc_format_product_short_description', 9999999 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Define a constant if it is not already defined.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $name</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $value</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_maybe_define_constant( $name, $value ) {&nbsp;</div></li><li><div>  if ( ! defined( $name ) ) {&nbsp;</div></li><li><div>      define( $name, $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create a new order programmatically.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Returns a new order object on success which can then be used to add additional data.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  array $args</span>&nbsp;</div></li><li><div><span class="comment"> * @return WC_Order|WP_Error</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_create_order( $args = array() ) {&nbsp;</div></li><li><div>  $default_args = array(&nbsp;</div></li><li><div>      'status' =&gt; null, &nbsp;</div></li><li><div>      'customer_id' =&gt; null, &nbsp;</div></li><li><div>      'customer_note' =&gt; null, &nbsp;</div></li><li><div>      'parent' =&gt; null, &nbsp;</div></li><li><div>      'created_via' =&gt; null, &nbsp;</div></li><li><div>      'cart_hash' =&gt; null, &nbsp;</div></li><li><div>      'order_id' =&gt; 0, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  try {&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, $default_args );&nbsp;</div></li><li><div>      $order = new WC_Order( $args['order_id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Update props that were set (not null)</span>&nbsp;</div></li><li><div>      if ( ! is_null( $args['parent'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_parent_id( absint( $args['parent'] ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_null( $args['status'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_status( $args['status'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_null( $args['customer_note'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_customer_note( $args['customer_note'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_null( $args['customer_id'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_customer_id( is_numeric( $args['customer_id'] ) ? absint( $args['customer_id'] ) : 0 );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_null( $args['created_via'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_created_via( sanitize_text_field( $args['created_via'] ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_null( $args['cart_hash'] ) ) {&nbsp;</div></li><li><div>          $order-&gt;set_cart_hash( sanitize_text_field( $args['cart_hash'] ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Update other order props set automatically</span>&nbsp;</div></li><li><div>      $order-&gt;set_currency( get_woocommerce_currency() );&nbsp;</div></li><li><div>      $order-&gt;set_prices_include_tax( 'yes' === get_option( 'woocommerce_prices_include_tax' ) );&nbsp;</div></li><li><div>      $order-&gt;set_customer_ip_address( WC_Geolocation::get_ip_address() );&nbsp;</div></li><li><div>      $order-&gt;set_customer_user_agent( wc_get_user_agent() );&nbsp;</div></li><li><div>      $order-&gt;save();&nbsp;</div></li><li><div>  } catch ( Exception $e ) {&nbsp;</div></li><li><div>      return new WP_Error( 'error', $e-&gt;getMessage() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $order;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Update an order. Uses wc_create_order.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  array $args</span>&nbsp;</div></li><li><div><span class="comment"> * @return string | WC_Order</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_update_order( $args ) {&nbsp;</div></li><li><div>  if ( ! $args['order_id'] ) {&nbsp;</div></li><li><div>      return new WP_Error( __( 'Invalid order ID.', 'woocommerce' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return wc_create_order( $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get template part (for templates like the shop-loop).</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * WC_TEMPLATE_DEBUG_MODE will prevent overrides in themes from taking priority.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @access public</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $slug</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_template_part( $slug, $name = '' ) {&nbsp;</div></li><li><div>  $template = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Look in yourtheme/slug-name.php and yourtheme/woocommerce/slug-name.php</span>&nbsp;</div></li><li><div>  if ( $name && ! WC_TEMPLATE_DEBUG_MODE ) {&nbsp;</div></li><li><div>      $template = locate_template( array( &quot;{$slug}-{$name}.php&quot;, WC()-&gt;template_path() . &quot;{$slug}-{$name}.php&quot; ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get default slug-name.php</span>&nbsp;</div></li><li><div>  if ( ! $template && $name && file_exists( WC()-&gt;plugin_path() . &quot;/templates/{$slug}-{$name}.php&quot; ) ) {&nbsp;</div></li><li><div>      $template = WC()-&gt;plugin_path() . &quot;/templates/{$slug}-{$name}.php&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If template file doesn't exist, look in yourtheme/slug.php and yourtheme/woocommerce/slug.php</span>&nbsp;</div></li><li><div>  if ( ! $template && ! WC_TEMPLATE_DEBUG_MODE ) {&nbsp;</div></li><li><div>      $template = locate_template( array( &quot;{$slug}.php&quot;, WC()-&gt;template_path() . &quot;{$slug}.php&quot; ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allow 3rd party plugins to filter template file from their plugin.</span>&nbsp;</div></li><li><div>  $template = apply_filters( 'wc_get_template_part', $template, $slug, $name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $template ) {&nbsp;</div></li><li><div>      load_template( $template, false );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get other templates (e.g. product attributes) passing attributes and including the file.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @access public</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $template_name</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args (default: array())</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $template_path (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $default_path (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_template( $template_name, $args = array(), $template_path = '', $default_path = '' ) {&nbsp;</div></li><li><div>  if ( ! empty( $args ) && is_array( $args ) ) {&nbsp;</div></li><li><div>      extract( $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $located = wc_locate_template( $template_name, $template_path, $default_path );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! file_exists( $located ) ) {&nbsp;</div></li><li><div>      wc_doing_it_wrong( __FUNCTION__, sprintf( __( '%s does not exist.', 'woocommerce' ), '&lt;code&gt;' . $located . '&lt;/code&gt;' ), '2.1' );&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allow 3rd party plugin filter template file from their plugin.</span>&nbsp;</div></li><li><div>  $located = apply_filters( 'wc_get_template', $located, $template_name, $args, $template_path, $default_path );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'woocommerce_before_template_part', $template_name, $template_path, $located, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  include( $located );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'woocommerce_after_template_part', $template_name, $template_path, $located, $args );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Like wc_get_template, but returns the HTML instead of outputting.</span>&nbsp;</div></li><li><div><span class="comment"> * @see wc_get_template</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $template_name</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_template_html( $template_name, $args = array(), $template_path = '', $default_path = '' ) {&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>  wc_get_template( $template_name, $args, $template_path, $default_path );&nbsp;</div></li><li><div>  return ob_get_clean();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Locate a template and return the path for inclusion.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This is the load order:</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> *        yourtheme        /    $template_path    /    $template_name</span>&nbsp;</div></li><li><div><span class="comment"> *        yourtheme        /    $template_name</span>&nbsp;</div></li><li><div><span class="comment"> *        $default_path    /    $template_name</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @access public</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $template_name</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $template_path (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $default_path (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_locate_template( $template_name, $template_path = '', $default_path = '' ) {&nbsp;</div></li><li><div>  if ( ! $template_path ) {&nbsp;</div></li><li><div>      $template_path = WC()-&gt;template_path();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $default_path ) {&nbsp;</div></li><li><div>      $default_path = WC()-&gt;plugin_path() . '/templates/';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Look within passed path within the theme - this is priority.</span>&nbsp;</div></li><li><div>  $template = locate_template(&nbsp;</div></li><li><div>      array(&nbsp;</div></li><li><div>          trailingslashit( $template_path ) . $template_name, &nbsp;</div></li><li><div>          $template_name, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Get default template/</span>&nbsp;</div></li><li><div>  if ( ! $template || WC_TEMPLATE_DEBUG_MODE ) {&nbsp;</div></li><li><div>      $template = $default_path . $template_name;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Return what we found.</span>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_locate_template', $template, $template_name, $template_path );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get Base Currency Code.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_woocommerce_currency() {&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_currency', get_option( 'woocommerce_currency' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get full list of currency codes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_woocommerce_currencies() {&nbsp;</div></li><li><div>  return array_unique(&nbsp;</div></li><li><div>      apply_filters( 'woocommerce_currencies', &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              'AED' =&gt; __( 'United Arab Emirates dirham', 'woocommerce' ), &nbsp;</div></li><li><div>              'AFN' =&gt; __( 'Afghan afghani', 'woocommerce' ), &nbsp;</div></li><li><div>              'ALL' =&gt; __( 'Albanian lek', 'woocommerce' ), &nbsp;</div></li><li><div>              'AMD' =&gt; __( 'Armenian dram', 'woocommerce' ), &nbsp;</div></li><li><div>              'ANG' =&gt; __( 'Netherlands Antillean guilder', 'woocommerce' ), &nbsp;</div></li><li><div>              'AOA' =&gt; __( 'Angolan kwanza', 'woocommerce' ), &nbsp;</div></li><li><div>              'ARS' =&gt; __( 'Argentine peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'AUD' =&gt; __( 'Australian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'AWG' =&gt; __( 'Aruban florin', 'woocommerce' ), &nbsp;</div></li><li><div>              'AZN' =&gt; __( 'Azerbaijani manat', 'woocommerce' ), &nbsp;</div></li><li><div>              'BAM' =&gt; __( 'Bosnia and Herzegovina convertible mark', 'woocommerce' ), &nbsp;</div></li><li><div>              'BBD' =&gt; __( 'Barbadian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'BDT' =&gt; __( 'Bangladeshi taka', 'woocommerce' ), &nbsp;</div></li><li><div>              'BGN' =&gt; __( 'Bulgarian lev', 'woocommerce' ), &nbsp;</div></li><li><div>              'BHD' =&gt; __( 'Bahraini dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'BIF' =&gt; __( 'Burundian franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'BMD' =&gt; __( 'Bermudian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'BND' =&gt; __( 'Brunei dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'BOB' =&gt; __( 'Bolivian boliviano', 'woocommerce' ), &nbsp;</div></li><li><div>              'BRL' =&gt; __( 'Brazilian real', 'woocommerce' ), &nbsp;</div></li><li><div>              'BSD' =&gt; __( 'Bahamian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'BTC' =&gt; __( 'Bitcoin', 'woocommerce' ), &nbsp;</div></li><li><div>              'BTN' =&gt; __( 'Bhutanese ngultrum', 'woocommerce' ), &nbsp;</div></li><li><div>              'BWP' =&gt; __( 'Botswana pula', 'woocommerce' ), &nbsp;</div></li><li><div>              'BYR' =&gt; __( 'Belarusian ruble', 'woocommerce' ), &nbsp;</div></li><li><div>              'BZD' =&gt; __( 'Belize dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'CAD' =&gt; __( 'Canadian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'CDF' =&gt; __( 'Congolese franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'CHF' =&gt; __( 'Swiss franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'CLP' =&gt; __( 'Chilean peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'CNY' =&gt; __( 'Chinese yuan', 'woocommerce' ), &nbsp;</div></li><li><div>              'COP' =&gt; __( 'Colombian peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'CRC' =&gt; __( 'Costa Rican col&oacute;n', 'woocommerce' ), &nbsp;</div></li><li><div>              'CUC' =&gt; __( 'Cuban convertible peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'CUP' =&gt; __( 'Cuban peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'CVE' =&gt; __( 'Cape Verdean escudo', 'woocommerce' ), &nbsp;</div></li><li><div>              'CZK' =&gt; __( 'Czech koruna', 'woocommerce' ), &nbsp;</div></li><li><div>              'DJF' =&gt; __( 'Djiboutian franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'DKK' =&gt; __( 'Danish krone', 'woocommerce' ), &nbsp;</div></li><li><div>              'DOP' =&gt; __( 'Dominican peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'DZD' =&gt; __( 'Algerian dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'EGP' =&gt; __( 'Egyptian pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'ERN' =&gt; __( 'Eritrean nakfa', 'woocommerce' ), &nbsp;</div></li><li><div>              'ETB' =&gt; __( 'Ethiopian birr', 'woocommerce' ), &nbsp;</div></li><li><div>              'EUR' =&gt; __( 'Euro', 'woocommerce' ), &nbsp;</div></li><li><div>              'FJD' =&gt; __( 'Fijian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'FKP' =&gt; __( 'Falkland Islands pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'GBP' =&gt; __( 'Pound sterling', 'woocommerce' ), &nbsp;</div></li><li><div>              'GEL' =&gt; __( 'Georgian lari', 'woocommerce' ), &nbsp;</div></li><li><div>              'GGP' =&gt; __( 'Guernsey pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'GHS' =&gt; __( 'Ghana cedi', 'woocommerce' ), &nbsp;</div></li><li><div>              'GIP' =&gt; __( 'Gibraltar pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'GMD' =&gt; __( 'Gambian dalasi', 'woocommerce' ), &nbsp;</div></li><li><div>              'GNF' =&gt; __( 'Guinean franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'GTQ' =&gt; __( 'Guatemalan quetzal', 'woocommerce' ), &nbsp;</div></li><li><div>              'GYD' =&gt; __( 'Guyanese dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'HKD' =&gt; __( 'Hong Kong dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'HNL' =&gt; __( 'Honduran lempira', 'woocommerce' ), &nbsp;</div></li><li><div>              'HRK' =&gt; __( 'Croatian kuna', 'woocommerce' ), &nbsp;</div></li><li><div>              'HTG' =&gt; __( 'Haitian gourde', 'woocommerce' ), &nbsp;</div></li><li><div>              'HUF' =&gt; __( 'Hungarian forint', 'woocommerce' ), &nbsp;</div></li><li><div>              'IDR' =&gt; __( 'Indonesian rupiah', 'woocommerce' ), &nbsp;</div></li><li><div>              'ILS' =&gt; __( 'Israeli new shekel', 'woocommerce' ), &nbsp;</div></li><li><div>              'IMP' =&gt; __( 'Manx pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'INR' =&gt; __( 'Indian rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'IQD' =&gt; __( 'Iraqi dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'IRR' =&gt; __( 'Iranian rial', 'woocommerce' ), &nbsp;</div></li><li><div>              'IRT' =&gt; __( 'Iranian toman', 'woocommerce' ), &nbsp;</div></li><li><div>              'ISK' =&gt; __( 'Icelandic kr&oacute;na', 'woocommerce' ), &nbsp;</div></li><li><div>              'JEP' =&gt; __( 'Jersey pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'JMD' =&gt; __( 'Jamaican dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'JOD' =&gt; __( 'Jordanian dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'JPY' =&gt; __( 'Japanese yen', 'woocommerce' ), &nbsp;</div></li><li><div>              'KES' =&gt; __( 'Kenyan shilling', 'woocommerce' ), &nbsp;</div></li><li><div>              'KGS' =&gt; __( 'Kyrgyzstani som', 'woocommerce' ), &nbsp;</div></li><li><div>              'KHR' =&gt; __( 'Cambodian riel', 'woocommerce' ), &nbsp;</div></li><li><div>              'KMF' =&gt; __( 'Comorian franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'KPW' =&gt; __( 'North Korean won', 'woocommerce' ), &nbsp;</div></li><li><div>              'KRW' =&gt; __( 'South Korean won', 'woocommerce' ), &nbsp;</div></li><li><div>              'KWD' =&gt; __( 'Kuwaiti dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'KYD' =&gt; __( 'Cayman Islands dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'KZT' =&gt; __( 'Kazakhstani tenge', 'woocommerce' ), &nbsp;</div></li><li><div>              'LAK' =&gt; __( 'Lao kip', 'woocommerce' ), &nbsp;</div></li><li><div>              'LBP' =&gt; __( 'Lebanese pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'LKR' =&gt; __( 'Sri Lankan rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'LRD' =&gt; __( 'Liberian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'LSL' =&gt; __( 'Lesotho loti', 'woocommerce' ), &nbsp;</div></li><li><div>              'LYD' =&gt; __( 'Libyan dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'MAD' =&gt; __( 'Moroccan dirham', 'woocommerce' ), &nbsp;</div></li><li><div>              'MDL' =&gt; __( 'Moldovan leu', 'woocommerce' ), &nbsp;</div></li><li><div>              'MGA' =&gt; __( 'Malagasy ariary', 'woocommerce' ), &nbsp;</div></li><li><div>              'MKD' =&gt; __( 'Macedonian denar', 'woocommerce' ), &nbsp;</div></li><li><div>              'MMK' =&gt; __( 'Burmese kyat', 'woocommerce' ), &nbsp;</div></li><li><div>              'MNT' =&gt; __( 'Mongolian t&ouml;gr&ouml;g', 'woocommerce' ), &nbsp;</div></li><li><div>              'MOP' =&gt; __( 'Macanese pataca', 'woocommerce' ), &nbsp;</div></li><li><div>              'MRO' =&gt; __( 'Mauritanian ouguiya', 'woocommerce' ), &nbsp;</div></li><li><div>              'MUR' =&gt; __( 'Mauritian rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'MVR' =&gt; __( 'Maldivian rufiyaa', 'woocommerce' ), &nbsp;</div></li><li><div>              'MWK' =&gt; __( 'Malawian kwacha', 'woocommerce' ), &nbsp;</div></li><li><div>              'MXN' =&gt; __( 'Mexican peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'MYR' =&gt; __( 'Malaysian ringgit', 'woocommerce' ), &nbsp;</div></li><li><div>              'MZN' =&gt; __( 'Mozambican metical', 'woocommerce' ), &nbsp;</div></li><li><div>              'NAD' =&gt; __( 'Namibian dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'NGN' =&gt; __( 'Nigerian naira', 'woocommerce' ), &nbsp;</div></li><li><div>              'NIO' =&gt; __( 'Nicaraguan c&oacute;rdoba', 'woocommerce' ), &nbsp;</div></li><li><div>              'NOK' =&gt; __( 'Norwegian krone', 'woocommerce' ), &nbsp;</div></li><li><div>              'NPR' =&gt; __( 'Nepalese rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'NZD' =&gt; __( 'New Zealand dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'OMR' =&gt; __( 'Omani rial', 'woocommerce' ), &nbsp;</div></li><li><div>              'PAB' =&gt; __( 'Panamanian balboa', 'woocommerce' ), &nbsp;</div></li><li><div>              'PEN' =&gt; __( 'Peruvian nuevo sol', 'woocommerce' ), &nbsp;</div></li><li><div>              'PGK' =&gt; __( 'Papua New Guinean kina', 'woocommerce' ), &nbsp;</div></li><li><div>              'PHP' =&gt; __( 'Philippine peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'PKR' =&gt; __( 'Pakistani rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'PLN' =&gt; __( 'Polish z&#x142;oty', 'woocommerce' ), &nbsp;</div></li><li><div>              'PRB' =&gt; __( 'Transnistrian ruble', 'woocommerce' ), &nbsp;</div></li><li><div>              'PYG' =&gt; __( 'Paraguayan guaran&iacute;', 'woocommerce' ), &nbsp;</div></li><li><div>              'QAR' =&gt; __( 'Qatari riyal', 'woocommerce' ), &nbsp;</div></li><li><div>              'RON' =&gt; __( 'Romanian leu', 'woocommerce' ), &nbsp;</div></li><li><div>              'RSD' =&gt; __( 'Serbian dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'RUB' =&gt; __( 'Russian ruble', 'woocommerce' ), &nbsp;</div></li><li><div>              'RWF' =&gt; __( 'Rwandan franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'SAR' =&gt; __( 'Saudi riyal', 'woocommerce' ), &nbsp;</div></li><li><div>              'SBD' =&gt; __( 'Solomon Islands dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'SCR' =&gt; __( 'Seychellois rupee', 'woocommerce' ), &nbsp;</div></li><li><div>              'SDG' =&gt; __( 'Sudanese pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'SEK' =&gt; __( 'Swedish krona', 'woocommerce' ), &nbsp;</div></li><li><div>              'SGD' =&gt; __( 'Singapore dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'SHP' =&gt; __( 'Saint Helena pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'SLL' =&gt; __( 'Sierra Leonean leone', 'woocommerce' ), &nbsp;</div></li><li><div>              'SOS' =&gt; __( 'Somali shilling', 'woocommerce' ), &nbsp;</div></li><li><div>              'SRD' =&gt; __( 'Surinamese dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'SSP' =&gt; __( 'South Sudanese pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'STD' =&gt; __( 'S&atilde;o Tom&eacute; and Pr&iacute;ncipe dobra', 'woocommerce' ), &nbsp;</div></li><li><div>              'SYP' =&gt; __( 'Syrian pound', 'woocommerce' ), &nbsp;</div></li><li><div>              'SZL' =&gt; __( 'Swazi lilangeni', 'woocommerce' ), &nbsp;</div></li><li><div>              'THB' =&gt; __( 'Thai baht', 'woocommerce' ), &nbsp;</div></li><li><div>              'TJS' =&gt; __( 'Tajikistani somoni', 'woocommerce' ), &nbsp;</div></li><li><div>              'TMT' =&gt; __( 'Turkmenistan manat', 'woocommerce' ), &nbsp;</div></li><li><div>              'TND' =&gt; __( 'Tunisian dinar', 'woocommerce' ), &nbsp;</div></li><li><div>              'TOP' =&gt; __( 'Tongan pa&#x2bb;anga', 'woocommerce' ), &nbsp;</div></li><li><div>              'TRY' =&gt; __( 'Turkish lira', 'woocommerce' ), &nbsp;</div></li><li><div>              'TTD' =&gt; __( 'Trinidad and Tobago dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'TWD' =&gt; __( 'New Taiwan dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'TZS' =&gt; __( 'Tanzanian shilling', 'woocommerce' ), &nbsp;</div></li><li><div>              'UAH' =&gt; __( 'Ukrainian hryvnia', 'woocommerce' ), &nbsp;</div></li><li><div>              'UGX' =&gt; __( 'Ugandan shilling', 'woocommerce' ), &nbsp;</div></li><li><div>              'USD' =&gt; __( 'United States dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'UYU' =&gt; __( 'Uruguayan peso', 'woocommerce' ), &nbsp;</div></li><li><div>              'UZS' =&gt; __( 'Uzbekistani som', 'woocommerce' ), &nbsp;</div></li><li><div>              'VEF' =&gt; __( 'Venezuelan bol&iacute;var', 'woocommerce' ), &nbsp;</div></li><li><div>              'VND' =&gt; __( 'Vietnamese &#x111;&#x1ed3;ng', 'woocommerce' ), &nbsp;</div></li><li><div>              'VUV' =&gt; __( 'Vanuatu vatu', 'woocommerce' ), &nbsp;</div></li><li><div>              'WST' =&gt; __( 'Samoan t&#x101;l&#x101;', 'woocommerce' ), &nbsp;</div></li><li><div>              'XAF' =&gt; __( 'Central African CFA franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'XCD' =&gt; __( 'East Caribbean dollar', 'woocommerce' ), &nbsp;</div></li><li><div>              'XOF' =&gt; __( 'West African CFA franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'XPF' =&gt; __( 'CFP franc', 'woocommerce' ), &nbsp;</div></li><li><div>              'YER' =&gt; __( 'Yemeni rial', 'woocommerce' ), &nbsp;</div></li><li><div>              'ZAR' =&gt; __( 'South African rand', 'woocommerce' ), &nbsp;</div></li><li><div>              'ZMW' =&gt; __( 'Zambian kwacha', 'woocommerce' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get Currency symbol.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $currency (default: '')</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_woocommerce_currency_symbol( $currency = '' ) {&nbsp;</div></li><li><div>  if ( ! $currency ) {&nbsp;</div></li><li><div>      $currency = get_woocommerce_currency();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $symbols = apply_filters( 'woocommerce_currency_symbols', array(&nbsp;</div></li><li><div>      'AED' =&gt; '&#x62f;.&#x625;', &nbsp;</div></li><li><div>      'AFN' =&gt; '&#x60b;', &nbsp;</div></li><li><div>      'ALL' =&gt; 'L', &nbsp;</div></li><li><div>      'AMD' =&gt; 'AMD', &nbsp;</div></li><li><div>      'ANG' =&gt; '&fnof;', &nbsp;</div></li><li><div>      'AOA' =&gt; 'Kz', &nbsp;</div></li><li><div>      'ARS' =&gt; '&#36;', &nbsp;</div></li><li><div>      'AUD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'AWG' =&gt; '&fnof;', &nbsp;</div></li><li><div>      'AZN' =&gt; 'AZN', &nbsp;</div></li><li><div>      'BAM' =&gt; 'KM', &nbsp;</div></li><li><div>      'BBD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'BDT' =&gt; '&#2547;&nbsp;', &nbsp;</div></li><li><div>      'BGN' =&gt; '&#1083;&#1074;.', &nbsp;</div></li><li><div>      'BHD' =&gt; '.&#x62f;.&#x628;', &nbsp;</div></li><li><div>      'BIF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'BMD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'BND' =&gt; '&#36;', &nbsp;</div></li><li><div>      'BOB' =&gt; 'Bs.', &nbsp;</div></li><li><div>      'BRL' =&gt; '&#82;&#36;', &nbsp;</div></li><li><div>      'BSD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'BTC' =&gt; '&#3647;', &nbsp;</div></li><li><div>      'BTN' =&gt; 'Nu.', &nbsp;</div></li><li><div>      'BWP' =&gt; 'P', &nbsp;</div></li><li><div>      'BYR' =&gt; 'Br', &nbsp;</div></li><li><div>      'BZD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CAD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CDF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'CHF' =&gt; '&#67;&#72;&#70;', &nbsp;</div></li><li><div>      'CLP' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CNY' =&gt; '&yen;', &nbsp;</div></li><li><div>      'COP' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CRC' =&gt; '&#x20a1;', &nbsp;</div></li><li><div>      'CUC' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CUP' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CVE' =&gt; '&#36;', &nbsp;</div></li><li><div>      'CZK' =&gt; '&#75;&#269;', &nbsp;</div></li><li><div>      'DJF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'DKK' =&gt; 'DKK', &nbsp;</div></li><li><div>      'DOP' =&gt; 'RD&#36;', &nbsp;</div></li><li><div>      'DZD' =&gt; '&#x62f;.&#x62c;', &nbsp;</div></li><li><div>      'EGP' =&gt; 'EGP', &nbsp;</div></li><li><div>      'ERN' =&gt; 'Nfk', &nbsp;</div></li><li><div>      'ETB' =&gt; 'Br', &nbsp;</div></li><li><div>      'EUR' =&gt; '&euro;', &nbsp;</div></li><li><div>      'FJD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'FKP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'GBP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'GEL' =&gt; '&#x10da;', &nbsp;</div></li><li><div>      'GGP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'GHS' =&gt; '&#x20b5;', &nbsp;</div></li><li><div>      'GIP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'GMD' =&gt; 'D', &nbsp;</div></li><li><div>      'GNF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'GTQ' =&gt; 'Q', &nbsp;</div></li><li><div>      'GYD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'HKD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'HNL' =&gt; 'L', &nbsp;</div></li><li><div>      'HRK' =&gt; 'Kn', &nbsp;</div></li><li><div>      'HTG' =&gt; 'G', &nbsp;</div></li><li><div>      'HUF' =&gt; '&#70;&#116;', &nbsp;</div></li><li><div>      'IDR' =&gt; 'Rp', &nbsp;</div></li><li><div>      'ILS' =&gt; '&#8362;', &nbsp;</div></li><li><div>      'IMP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'INR' =&gt; '&#8377;', &nbsp;</div></li><li><div>      'IQD' =&gt; '&#x639;.&#x62f;', &nbsp;</div></li><li><div>      'IRR' =&gt; '&#xfdfc;', &nbsp;</div></li><li><div>      'IRT' =&gt; '&#x062A;&#x0648;&#x0645;&#x0627;&#x0646;', &nbsp;</div></li><li><div>      'ISK' =&gt; 'kr.', &nbsp;</div></li><li><div>      'JEP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'JMD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'JOD' =&gt; '&#x62f;.&#x627;', &nbsp;</div></li><li><div>      'JPY' =&gt; '&yen;', &nbsp;</div></li><li><div>      'KES' =&gt; 'KSh', &nbsp;</div></li><li><div>      'KGS' =&gt; '&#x441;&#x43e;&#x43c;', &nbsp;</div></li><li><div>      'KHR' =&gt; '&#x17db;', &nbsp;</div></li><li><div>      'KMF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'KPW' =&gt; '&#x20a9;', &nbsp;</div></li><li><div>      'KRW' =&gt; '&#8361;', &nbsp;</div></li><li><div>      'KWD' =&gt; '&#x62f;.&#x643;', &nbsp;</div></li><li><div>      'KYD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'KZT' =&gt; 'KZT', &nbsp;</div></li><li><div>      'LAK' =&gt; '&#8365;', &nbsp;</div></li><li><div>      'LBP' =&gt; '&#x644;.&#x644;', &nbsp;</div></li><li><div>      'LKR' =&gt; '&#xdbb;&#xdd4;', &nbsp;</div></li><li><div>      'LRD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'LSL' =&gt; 'L', &nbsp;</div></li><li><div>      'LYD' =&gt; '&#x644;.&#x62f;', &nbsp;</div></li><li><div>      'MAD' =&gt; '&#x62f;.&#x645;.', &nbsp;</div></li><li><div>      'MDL' =&gt; 'MDL', &nbsp;</div></li><li><div>      'MGA' =&gt; 'Ar', &nbsp;</div></li><li><div>      'MKD' =&gt; '&#x434;&#x435;&#x43d;', &nbsp;</div></li><li><div>      'MMK' =&gt; 'Ks', &nbsp;</div></li><li><div>      'MNT' =&gt; '&#x20ae;', &nbsp;</div></li><li><div>      'MOP' =&gt; 'P', &nbsp;</div></li><li><div>      'MRO' =&gt; 'UM', &nbsp;</div></li><li><div>      'MUR' =&gt; '&#x20a8;', &nbsp;</div></li><li><div>      'MVR' =&gt; '.&#x783;', &nbsp;</div></li><li><div>      'MWK' =&gt; 'MK', &nbsp;</div></li><li><div>      'MXN' =&gt; '&#36;', &nbsp;</div></li><li><div>      'MYR' =&gt; '&#82;&#77;', &nbsp;</div></li><li><div>      'MZN' =&gt; 'MT', &nbsp;</div></li><li><div>      'NAD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'NGN' =&gt; '&#8358;', &nbsp;</div></li><li><div>      'NIO' =&gt; 'C&#36;', &nbsp;</div></li><li><div>      'NOK' =&gt; '&#107;&#114;', &nbsp;</div></li><li><div>      'NPR' =&gt; '&#8360;', &nbsp;</div></li><li><div>      'NZD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'OMR' =&gt; '&#x631;.&#x639;.', &nbsp;</div></li><li><div>      'PAB' =&gt; 'B/.', &nbsp;</div></li><li><div>      'PEN' =&gt; 'S/.', &nbsp;</div></li><li><div>      'PGK' =&gt; 'K', &nbsp;</div></li><li><div>      'PHP' =&gt; '&#8369;', &nbsp;</div></li><li><div>      'PKR' =&gt; '&#8360;', &nbsp;</div></li><li><div>      'PLN' =&gt; '&#122;&#322;', &nbsp;</div></li><li><div>      'PRB' =&gt; '&#x440;.', &nbsp;</div></li><li><div>      'PYG' =&gt; '&#8370;', &nbsp;</div></li><li><div>      'QAR' =&gt; '&#x631;.&#x642;', &nbsp;</div></li><li><div>      'RMB' =&gt; '&yen;', &nbsp;</div></li><li><div>      'RON' =&gt; 'lei', &nbsp;</div></li><li><div>      'RSD' =&gt; '&#x434;&#x438;&#x43d;.', &nbsp;</div></li><li><div>      'RUB' =&gt; '&#8381;', &nbsp;</div></li><li><div>      'RWF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'SAR' =&gt; '&#x631;.&#x633;', &nbsp;</div></li><li><div>      'SBD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'SCR' =&gt; '&#x20a8;', &nbsp;</div></li><li><div>      'SDG' =&gt; '&#x62c;.&#x633;.', &nbsp;</div></li><li><div>      'SEK' =&gt; '&#107;&#114;', &nbsp;</div></li><li><div>      'SGD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'SHP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'SLL' =&gt; 'Le', &nbsp;</div></li><li><div>      'SOS' =&gt; 'Sh', &nbsp;</div></li><li><div>      'SRD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'SSP' =&gt; '&pound;', &nbsp;</div></li><li><div>      'STD' =&gt; 'Db', &nbsp;</div></li><li><div>      'SYP' =&gt; '&#x644;.&#x633;', &nbsp;</div></li><li><div>      'SZL' =&gt; 'L', &nbsp;</div></li><li><div>      'THB' =&gt; '&#3647;', &nbsp;</div></li><li><div>      'TJS' =&gt; '&#x405;&#x41c;', &nbsp;</div></li><li><div>      'TMT' =&gt; 'm', &nbsp;</div></li><li><div>      'TND' =&gt; '&#x62f;.&#x62a;', &nbsp;</div></li><li><div>      'TOP' =&gt; 'T&#36;', &nbsp;</div></li><li><div>      'TRY' =&gt; '&#8378;', &nbsp;</div></li><li><div>      'TTD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'TWD' =&gt; '&#78;&#84;&#36;', &nbsp;</div></li><li><div>      'TZS' =&gt; 'Sh', &nbsp;</div></li><li><div>      'UAH' =&gt; '&#8372;', &nbsp;</div></li><li><div>      'UGX' =&gt; 'UGX', &nbsp;</div></li><li><div>      'USD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'UYU' =&gt; '&#36;', &nbsp;</div></li><li><div>      'UZS' =&gt; 'UZS', &nbsp;</div></li><li><div>      'VEF' =&gt; 'Bs F', &nbsp;</div></li><li><div>      'VND' =&gt; '&#8363;', &nbsp;</div></li><li><div>      'VUV' =&gt; 'Vt', &nbsp;</div></li><li><div>      'WST' =&gt; 'T', &nbsp;</div></li><li><div>      'XAF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'XCD' =&gt; '&#36;', &nbsp;</div></li><li><div>      'XOF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'XPF' =&gt; 'Fr', &nbsp;</div></li><li><div>      'YER' =&gt; '&#xfdfc;', &nbsp;</div></li><li><div>      'ZAR' =&gt; '&#82;', &nbsp;</div></li><li><div>      'ZMW' =&gt; 'ZK', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $currency_symbol = isset( $symbols[ $currency ] ) ? $symbols[ $currency ] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_currency_symbol', $currency_symbol, $currency );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Send HTML emails from WooCommerce.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $to</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $subject</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $message</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $headers (default: &quot;Content-Type: text/html\r\n&quot;)</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $attachments (default: &quot;&quot;)</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_mail( $to, $subject, $message, $headers = &quot;Content-Type: text/html\r\n&quot;, $attachments = &quot;&quot; ) {&nbsp;</div></li><li><div>  $mailer = WC()-&gt;mailer();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $mailer-&gt;send( $to, $subject, $message, $headers, $attachments );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get an image size.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Variable is filtered by woocommerce_get_image_size_{image_size}.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $image_size</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_image_size( $image_size ) {&nbsp;</div></li><li><div>  if ( is_array( $image_size ) ) {&nbsp;</div></li><li><div>      $width = isset( $image_size[0] ) ? $image_size[0] : '300';&nbsp;</div></li><li><div>      $height = isset( $image_size[1] ) ? $image_size[1] : '300';&nbsp;</div></li><li><div>      $crop = isset( $image_size[2] ) ? $image_size[2] : 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $size = array(&nbsp;</div></li><li><div>          'width' =&gt; $width, &nbsp;</div></li><li><div>          'height' =&gt; $height, &nbsp;</div></li><li><div>          'crop' =&gt; $crop, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $image_size = $width . '_' . $height;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } elseif ( in_array( $image_size, array( 'shop_thumbnail', 'shop_catalog', 'shop_single' ) ) ) {&nbsp;</div></li><li><div>      $size = get_option( $image_size . '_image_size', array() );&nbsp;</div></li><li><div>      $size['width'] = isset( $size['width'] ) ? $size['width'] : '300';&nbsp;</div></li><li><div>      $size['height'] = isset( $size['height'] ) ? $size['height'] : '300';&nbsp;</div></li><li><div>      $size['crop'] = isset( $size['crop'] ) ? $size['crop'] : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $size = array(&nbsp;</div></li><li><div>          'width' =&gt; '300', &nbsp;</div></li><li><div>          'height' =&gt; '300', &nbsp;</div></li><li><div>          'crop' =&gt; 1, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_get_image_size_' . $image_size, $size );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Queue some JavaScript code to be output in the footer.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $code</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_enqueue_js( $code ) {&nbsp;</div></li><li><div>  global $wc_queued_js;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $wc_queued_js ) ) {&nbsp;</div></li><li><div>      $wc_queued_js = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wc_queued_js .= &quot;\n&quot; . $code . &quot;\n&quot;;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Output any queued javascript code in the footer.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_print_js() {&nbsp;</div></li><li><div>  global $wc_queued_js;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $wc_queued_js ) ) {&nbsp;</div></li><li><div>      <span class="comment">// Sanitize.</span>&nbsp;</div></li><li><div>      $wc_queued_js = wp_check_invalid_utf8( $wc_queued_js );&nbsp;</div></li><li><div>      $wc_queued_js = preg_replace( '/&#(x)?0*(?(1)27|39);?/i', &quot;'&quot;, $wc_queued_js );&nbsp;</div></li><li><div>      $wc_queued_js = str_replace( &quot;\r&quot;, '', $wc_queued_js );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $js = &quot;&lt;!-- WooCommerce JavaScript --&gt;\n&lt;script type=\&quot;text/javascript\&quot;&gt;\njQuery(function($) { $wc_queued_js });\n&lt;/script&gt;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * woocommerce_queued_js filter.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $js JavaScript code.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      echo apply_filters( 'woocommerce_queued_js', $js );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      unset( $wc_queued_js );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cookie - wrapper for setcookie using WP constants.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string  $name   Name of the cookie being set.</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string  $value  Value of the cookie.</span>&nbsp;</div></li><li><div><span class="comment"> * @param  integer $expire Expiry of the cookie.</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string  $secure Whether the cookie should be served only over https.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_setcookie( $name, $value, $expire = 0, $secure = false ) {&nbsp;</div></li><li><div>  if ( ! headers_sent() ) {&nbsp;</div></li><li><div>      setcookie( $name, $value, $expire, COOKIEPATH ? COOKIEPATH : '/', COOKIE_DOMAIN, $secure );&nbsp;</div></li><li><div>  } elseif ( defined( 'WP_DEBUG' ) && WP_DEBUG ) {&nbsp;</div></li><li><div>      headers_sent( $file, $line );&nbsp;</div></li><li><div>      trigger_error( &quot;{$name} cookie cannot be set - headers already sent by {$file} on line {$line}&quot;, E_USER_NOTICE );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the URL to the WooCommerce REST API.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $path an endpoint to include in the URL.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string the URL.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function get_woocommerce_api_url( $path ) {&nbsp;</div></li><li><div>  $version = defined( 'WC_API_REQUEST_VERSION' ) ? WC_API_REQUEST_VERSION : substr( WC_API::VERSION, 0, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url = get_home_url( null, &quot;wc-api/v{$version}/&quot;, is_ssl() ? 'https' : 'http' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $path ) && is_string( $path ) ) {&nbsp;</div></li><li><div>      $url .= ltrim( $path, '/' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $url;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a log file path.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $handle name.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string the log file path.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_log_file_path( $handle ) {&nbsp;</div></li><li><div>  return WC_Log_Handler_File::get_log_file_path( $handle );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Recursively get page children.</span>&nbsp;</div></li><li><div><span class="comment"> * @param  int $page_id</span>&nbsp;</div></li><li><div><span class="comment"> * @return int[]</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_page_children( $page_id ) {&nbsp;</div></li><li><div>  $page_ids = get_posts( array(&nbsp;</div></li><li><div>      'post_parent' =&gt; $page_id, &nbsp;</div></li><li><div>      'post_type' =&gt; 'page', &nbsp;</div></li><li><div>      'numberposts' =&gt; -1, &nbsp;</div></li><li><div>      'post_status' =&gt; 'any', &nbsp;</div></li><li><div>      'fields' =&gt; 'ids', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! empty( $page_ids ) ) {&nbsp;</div></li><li><div>      foreach ( $page_ids as $page_id ) {&nbsp;</div></li><li><div>          $page_ids = array_merge( $page_ids, wc_get_page_children( $page_id ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $page_ids;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Flushes rewrite rules when the shop page (or it's children) gets saved.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function flush_rewrite_rules_on_shop_page_save( $post_id ) {&nbsp;</div></li><li><div>  $shop_page_id = wc_get_page_id( 'shop' );&nbsp;</div></li><li><div>  if ( $shop_page_id === $post_id || in_array( $post_id, wc_get_page_children( $shop_page_id ) ) ) {&nbsp;</div></li><li><div>      do_action( 'woocommerce_flush_rewrite_rules' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'save_post', 'flush_rewrite_rules_on_shop_page_save' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Various rewrite rule fixes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $rules</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_fix_rewrite_rules( $rules ) {&nbsp;</div></li><li><div>  global $wp_rewrite;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $permalinks = wc_get_permalink_structure();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix the rewrite rules when the product permalink have %product_cat% flag.</span>&nbsp;</div></li><li><div>  if ( preg_match( '`/(.+)(/%product_cat%)`' , $permalinks['product_rewrite_slug'], $matches ) ) {&nbsp;</div></li><li><div>      foreach ( $rules as $rule =&gt; $rewrite ) {&nbsp;</div></li><li><div>          if ( preg_match( '`^' . preg_quote( $matches[1], '`' ) . '/\(`', $rule ) && preg_match( '/^(index\.php\?product_cat)(?!(.*product))/', $rewrite ) ) {&nbsp;</div></li><li><div>              unset( $rules[ $rule ] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// If the shop page is used as the base, we need to handle shop page subpages to avoid 404s.</span>&nbsp;</div></li><li><div>  if ( $permalinks['use_verbose_page_rules'] && ( $shop_page_id = wc_get_page_id( 'shop' ) ) ) {&nbsp;</div></li><li><div>      $page_rewrite_rules = array();&nbsp;</div></li><li><div>      $subpages = wc_get_page_children( $shop_page_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Subpage rules</span>&nbsp;</div></li><li><div>      foreach ( $subpages as $subpage ) {&nbsp;</div></li><li><div>          $uri = get_page_uri( $subpage );&nbsp;</div></li><li><div>          $page_rewrite_rules[ $uri . '/?$' ] = 'index.php?pagename=' . $uri;&nbsp;</div></li><li><div>          $wp_generated_rewrite_rules = $wp_rewrite-&gt;generate_rewrite_rules( $uri, EP_PAGES, true, true, false, false );&nbsp;</div></li><li><div>          foreach ( $wp_generated_rewrite_rules as $key =&gt; $value ) {&nbsp;</div></li><li><div>              $wp_generated_rewrite_rules[ $key ] = $value . '&pagename=' . $uri;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $page_rewrite_rules = array_merge( $page_rewrite_rules, $wp_generated_rewrite_rules );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Merge with rules</span>&nbsp;</div></li><li><div>      $rules = array_merge( $page_rewrite_rules, $rules );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $rules;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'rewrite_rules_array', 'wc_fix_rewrite_rules' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Prevent product attachment links from breaking when using complex rewrite structures.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $link</span>&nbsp;</div></li><li><div><span class="comment"> * @param  id $post_id</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_fix_product_attachment_link( $link, $post_id ) {&nbsp;</div></li><li><div>  global $wp_rewrite;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $post = get_post( $post_id );&nbsp;</div></li><li><div>  if ( 'product' === get_post_type( $post-&gt;post_parent ) ) {&nbsp;</div></li><li><div>      $permalinks = wc_get_permalink_structure();&nbsp;</div></li><li><div>      if ( preg_match( '/\/(.+)(\/%product_cat%)$/', $permalinks['product_rewrite_slug'], $matches ) ) {&nbsp;</div></li><li><div>          $link = home_url( '/?attachment_id=' . $post-&gt;ID );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $link;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'attachment_link', 'wc_fix_product_attachment_link', 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Protect downloads from ms-files.php in multisite.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $rewrite</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_ms_protect_download_rewite_rules( $rewrite ) {&nbsp;</div></li><li><div>  if ( ! is_multisite() || 'redirect' == get_option( 'woocommerce_file_download_method' ) ) {&nbsp;</div></li><li><div>      return $rewrite;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $rule = &quot;\n# WooCommerce Rules - Protect Files from ms-files.php\n\n&quot;;&nbsp;</div></li><li><div>  $rule .= &quot;&lt;IfModule mod_rewrite.c&gt;\n&quot;;&nbsp;</div></li><li><div>  $rule .= &quot;RewriteEngine On\n&quot;;&nbsp;</div></li><li><div>  $rule .= &quot;RewriteCond %{QUERY_STRING} file=woocommerce_uploads/ [NC]\n&quot;;&nbsp;</div></li><li><div>  $rule .= &quot;RewriteRule /ms-files.php$ - [F]\n&quot;;&nbsp;</div></li><li><div>  $rule .= &quot;&lt;/IfModule&gt;\n\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $rule . $rewrite;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'mod_rewrite_rules', 'wc_ms_protect_download_rewite_rules' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WooCommerce Core Supported Themes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2</span>&nbsp;</div></li><li><div><span class="comment"> * @return string[]</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_core_supported_themes() {&nbsp;</div></li><li><div>  return array( 'twentyseventeen', 'twentysixteen', 'twentyfifteen', 'twentyfourteen', 'twentythirteen', 'twentyeleven', 'twentytwelve', 'twentyten' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Wrapper function to execute the `woocommerce_deliver_webhook_async` cron.</span>&nbsp;</div></li><li><div><span class="comment"> * hook, see WC_Webhook::process().</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.2</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $webhook_id webhook ID to deliver.</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $arg hook argument.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_deliver_webhook_async( $webhook_id, $arg ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $webhook = new WC_Webhook( $webhook_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $webhook-&gt;deliver( $arg );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'woocommerce_deliver_webhook_async', 'wc_deliver_webhook_async', 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Formats a string in the format COUNTRY:STATE into an array.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $country_string</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_format_country_state_string( $country_string ) {&nbsp;</div></li><li><div>  if ( strstr( $country_string, ':' ) ) {&nbsp;</div></li><li><div>      list( $country, $state ) = explode( ':', $country_string );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $country = $country_string;&nbsp;</div></li><li><div>      $state = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return array(&nbsp;</div></li><li><div>      'country' =&gt; $country, &nbsp;</div></li><li><div>      'state' =&gt; $state, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the store's base location.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_base_location() {&nbsp;</div></li><li><div>  $default = apply_filters( 'woocommerce_get_base_location', get_option( 'woocommerce_default_country' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return wc_format_country_state_string( $default );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the customer's default location.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Filtered, and set to base location or left blank. If cache-busting, </span>&nbsp;</div></li><li><div><span class="comment"> * this should only be used when 'location' is set in the querystring.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_customer_default_location() {&nbsp;</div></li><li><div>  $location = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  switch ( get_option( 'woocommerce_default_customer_address' ) ) {&nbsp;</div></li><li><div>      case 'geolocation_ajax' :&nbsp;</div></li><li><div>      case 'geolocation' :&nbsp;</div></li><li><div>          <span class="comment">// Exclude common bots from geolocation by user agent.</span>&nbsp;</div></li><li><div>          $ua = wc_get_user_agent();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! strstr( $ua, 'bot' ) && ! strstr( $ua, 'spider' ) && ! strstr( $ua, 'crawl' ) ) {&nbsp;</div></li><li><div>              $location = WC_Geolocation::geolocate_ip( '', true, false );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Base fallback.</span>&nbsp;</div></li><li><div>          if ( empty( $location['country'] ) ) {&nbsp;</div></li><li><div>              $location = wc_format_country_state_string( apply_filters( 'woocommerce_customer_default_location', get_option( 'woocommerce_default_country' ) ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      break;&nbsp;</div></li><li><div>      case 'base' :&nbsp;</div></li><li><div>          $location = wc_format_country_state_string( apply_filters( 'woocommerce_customer_default_location', get_option( 'woocommerce_default_country' ) ) );&nbsp;</div></li><li><div>      break;&nbsp;</div></li><li><div>      default :&nbsp;</div></li><li><div>          $location = wc_format_country_state_string( apply_filters( 'woocommerce_customer_default_location', '' ) );&nbsp;</div></li><li><div>      break;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_customer_default_location_array', $location );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get user agent string.</span>&nbsp;</div></li><li><div><span class="comment"> * @since  3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_user_agent() {&nbsp;</div></li><li><div>  return isset( $_SERVER['HTTP_USER_AGENT'] ) ? strtolower( $_SERVER['HTTP_USER_AGENT'] ) : '';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// This function can be removed when WP 3.9.2 or greater is required.</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'hash_equals' ) ) :&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Compare two strings in constant time.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * This function was added in PHP 5.6.</span>&nbsp;</div></li><li><div><span class="comment">   * It can leak the length of a string.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 3.9.2</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $a Expected string.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $b Actual string.</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool Whether strings are equal.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function hash_equals( $a, $b ) {&nbsp;</div></li><li><div>      $a_length = strlen( $a );&nbsp;</div></li><li><div>      if ( strlen( $b ) !== $a_length ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      $result = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Do not attempt to &quot;optimize&quot; this.</span>&nbsp;</div></li><li><div>      for ( $i = 0; $i &lt; $a_length; $i++ ) {&nbsp;</div></li><li><div>          $result |= ord( $a[ $i ] ) ^ ord( $b[ $i ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return 0 === $result;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>endif;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Generate a rand hash.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_rand_hash() {&nbsp;</div></li><li><div>  if ( function_exists( 'openssl_random_pseudo_bytes' ) ) {&nbsp;</div></li><li><div>      return bin2hex( openssl_random_pseudo_bytes( 20 ) );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      return sha1( wp_rand() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * WC API - Hash.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.4.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $data</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_api_hash( $data ) {&nbsp;</div></li><li><div>  return hash_hmac( 'sha256', $data, 'wc-api' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Find all possible combinations of values from the input array and return in a logical order.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $input</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_array_cartesian( $input ) {&nbsp;</div></li><li><div>  $input = array_filter( $input );&nbsp;</div></li><li><div>  $results = array();&nbsp;</div></li><li><div>  $indexes = array();&nbsp;</div></li><li><div>  $index = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Generate indexes from keys and values so we have a logical sort order</span>&nbsp;</div></li><li><div>  foreach ( $input as $key =&gt; $values ) {&nbsp;</div></li><li><div>      foreach ( $values as $value ) {&nbsp;</div></li><li><div>          $indexes[ $key ][ $value ] = $index++;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop over the 2D array of indexes and generate all combinations</span>&nbsp;</div></li><li><div>  foreach ( $indexes as $key =&gt; $values ) {&nbsp;</div></li><li><div>      <span class="comment">// When result is empty, fill with the values of the first looped array</span>&nbsp;</div></li><li><div>      if ( empty( $results ) ) {&nbsp;</div></li><li><div>          foreach ( $values as $value ) {&nbsp;</div></li><li><div>              $results[] = array( $key =&gt; $value );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Second and subsequent input sub-array merging.</span>&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          foreach ( $results as $result_key =&gt; $result ) {&nbsp;</div></li><li><div>              foreach ( $values as $value ) {&nbsp;</div></li><li><div>                  <span class="comment">// If the key is not set, we can set it</span>&nbsp;</div></li><li><div>                  if ( ! isset( $results[ $result_key ][ $key ] ) ) {&nbsp;</div></li><li><div>                      $results[ $result_key ][ $key ] = $value;&nbsp;</div></li><li><div>                  <span class="comment">// If the key is set, we can add a new combination to the results array</span>&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $new_combination = $results[ $result_key ];&nbsp;</div></li><li><div>                      $new_combination[ $key ] = $value;&nbsp;</div></li><li><div>                      $results[] = $new_combination;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Sort the indexes</span>&nbsp;</div></li><li><div>  arsort( $results );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Convert indexes back to values</span>&nbsp;</div></li><li><div>  foreach ( $results as $result_key =&gt; $result ) {&nbsp;</div></li><li><div>      $converted_values = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Sort the values</span>&nbsp;</div></li><li><div>      arsort( $results[ $result_key ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Convert the values</span>&nbsp;</div></li><li><div>      foreach ( $results[ $result_key ] as $key =&gt; $value ) {&nbsp;</div></li><li><div>          $converted_values[ $key ] = array_search( $value, $indexes[ $key ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $results[ $result_key ] = $converted_values;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $results;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Run a MySQL transaction query, if supported.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type start (default), commit, rollback</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_transaction_query( $type = 'start' ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $wpdb-&gt;hide_errors();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! defined( 'WC_USE_TRANSACTIONS' ) ) {&nbsp;</div></li><li><div>      define( 'WC_USE_TRANSACTIONS', true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( WC_USE_TRANSACTIONS ) {&nbsp;</div></li><li><div>      switch ( $type ) {&nbsp;</div></li><li><div>          case 'commit' :&nbsp;</div></li><li><div>              $wpdb-&gt;query( 'COMMIT' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'rollback' :&nbsp;</div></li><li><div>              $wpdb-&gt;query( 'ROLLBACK' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          default :&nbsp;</div></li><li><div>              $wpdb-&gt;query( 'START TRANSACTION' );&nbsp;</div></li><li><div>          break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets the url to the cart page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Url to cart page</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_cart_url() {&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_get_cart_url', wc_get_page_permalink( 'cart' ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets the url to the checkout page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Url to checkout page</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_checkout_url() {&nbsp;</div></li><li><div>  $checkout_url = wc_get_page_permalink( 'checkout' );&nbsp;</div></li><li><div>  if ( $checkout_url ) {&nbsp;</div></li><li><div>      <span class="comment">// Force SSL if needed</span>&nbsp;</div></li><li><div>      if ( is_ssl() || 'yes' === get_option( 'woocommerce_force_ssl_checkout' ) ) {&nbsp;</div></li><li><div>          $checkout_url = str_replace( 'http:', 'https:', $checkout_url );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_get_checkout_url', $checkout_url );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Register a shipping method.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.5.7</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|object $shipping_method class name (string) or a class object.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function woocommerce_register_shipping_method( $shipping_method ) {&nbsp;</div></li><li><div>  WC()-&gt;shipping-&gt;register_shipping_method( $shipping_method );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'wc_get_shipping_zone' ) ) {&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Get the shipping zone matching a given package from the cart.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since  2.6.0</span>&nbsp;</div></li><li><div><span class="comment">   * @uses   WC_Shipping_Zones::get_zone_matching_package</span>&nbsp;</div></li><li><div><span class="comment">   * @param  array $package</span>&nbsp;</div></li><li><div><span class="comment">   * @return WC_Shipping_Zone</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function wc_get_shipping_zone( $package ) {&nbsp;</div></li><li><div>      return WC_Shipping_Zones::get_zone_matching_package( $package );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a nice name for credit card providers.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $type Provider Slug/Type</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_credit_card_type_label( $type ) {&nbsp;</div></li><li><div>  <span class="comment">// Normalize</span>&nbsp;</div></li><li><div>  $type = strtolower( $type );&nbsp;</div></li><li><div>  $type = str_replace( '-', ' ', $type );&nbsp;</div></li><li><div>  $type = str_replace( '_', ' ', $type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $labels = apply_filters( 'wocommerce_credit_card_type_labels', array(&nbsp;</div></li><li><div>      'mastercard' =&gt; __( 'MasterCard', 'woocommerce' ), &nbsp;</div></li><li><div>      'visa' =&gt; __( 'Visa', 'woocommerce' ), &nbsp;</div></li><li><div>      'discover' =&gt; __( 'Discover', 'woocommerce' ), &nbsp;</div></li><li><div>      'american express' =&gt; __( 'American Express', 'woocommerce' ), &nbsp;</div></li><li><div>      'diners' =&gt; __( 'Diners', 'woocommerce' ), &nbsp;</div></li><li><div>      'jcb' =&gt; __( 'JCB', 'woocommerce' ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'woocommerce_get_credit_card_type_label', ( array_key_exists( $type, $labels ) ? $labels[ $type ] : ucfirst( $type ) ) );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Outputs a &quot;back&quot; link so admin screens can easily jump back a page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $label Title of the page to return to.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $url   URL of the page to return to.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_back_link( $label, $url ) {&nbsp;</div></li><li><div>  echo '&lt;small class=&quot;wc-admin-breadcrumb&quot;&gt;&lt;a href=&quot;' . esc_url( $url ) . '&quot; aria-label=&quot;' . esc_attr( $label ) . '&quot;&gt;&#x2934;&lt;/a&gt;&lt;/small&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display a WooCommerce help tip.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.5.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $tip        Help tip text</span>&nbsp;</div></li><li><div><span class="comment"> * @param  bool   $allow_html Allow sanitized HTML if true or escape</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_help_tip( $tip, $allow_html = false ) {&nbsp;</div></li><li><div>  if ( $allow_html ) {&nbsp;</div></li><li><div>      $tip = wc_sanitize_tooltip( $tip );&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $tip = esc_attr( $tip );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return '&lt;span class=&quot;woocommerce-help-tip&quot; data-tip=&quot;' . $tip . '&quot;&gt;&lt;/span&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a list of potential postcodes for wildcard searching.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $postcode</span>&nbsp;</div></li><li><div><span class="comment"> * @param  string $country to format postcode for matching.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string[]</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_wildcard_postcodes( $postcode, $country = '' ) {&nbsp;</div></li><li><div>  $formatted_postcode = wc_format_postcode( $postcode, $country );&nbsp;</div></li><li><div>  $length = function_exists( 'mb_strlen' ) ? mb_strlen( $formatted_postcode ) : strlen( $formatted_postcode );&nbsp;</div></li><li><div>  $postcodes = array(&nbsp;</div></li><li><div>      $postcode, &nbsp;</div></li><li><div>      $formatted_postcode, &nbsp;</div></li><li><div>      $formatted_postcode . '*', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  for ( $i = 0; $i &lt; $length; $i ++ ) {&nbsp;</div></li><li><div>      $postcodes[] = ( function_exists( 'mb_substr' ) ? mb_substr( $formatted_postcode, 0, ( $i + 1 ) * -1 ) : substr( $formatted_postcode, 0, ( $i + 1 ) * -1 ) ) . '*';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $postcodes;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Used by shipping zones and taxes to compare a given $postcode to stored</span>&nbsp;</div></li><li><div><span class="comment"> * postcodes to find matches for numerical ranges, and wildcards.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $postcode Postcode you want to match against stored postcodes</span>&nbsp;</div></li><li><div><span class="comment"> * @param array  $objects Array of postcode objects from Database</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object_id_key DB column name for the ID.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object_compare_key DB column name for the value.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $country Country from which this postcode belongs. Allows for formatting.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Array of matching object ID and matching values.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_postcode_location_matcher( $postcode, $objects, $object_id_key, $object_compare_key, $country = '' ) {&nbsp;</div></li><li><div>  $postcode = wc_normalize_postcode( $postcode );&nbsp;</div></li><li><div>  $wildcard_postcodes = array_map( 'wc_clean', wc_get_wildcard_postcodes( $postcode, $country ) );&nbsp;</div></li><li><div>  $matches = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $objects as $object ) {&nbsp;</div></li><li><div>      $object_id = $object-&gt;$object_id_key;&nbsp;</div></li><li><div>      $compare_against = $object-&gt;$object_compare_key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Handle postcodes containing ranges.</span>&nbsp;</div></li><li><div>      if ( strstr( $compare_against, '...' ) ) {&nbsp;</div></li><li><div>          $range = array_map( 'trim', explode( '...', $compare_against ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 2 !== sizeof( $range ) ) {&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          list( $min, $max ) = $range;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If the postcode is non-numeric, make it numeric.</span>&nbsp;</div></li><li><div>          if ( ! is_numeric( $min ) || ! is_numeric( $max ) ) {&nbsp;</div></li><li><div>              $compare = wc_make_numeric_postcode( $postcode );&nbsp;</div></li><li><div>              $min = str_pad( wc_make_numeric_postcode( $min ), strlen( $compare ), '0' );&nbsp;</div></li><li><div>              $max = str_pad( wc_make_numeric_postcode( $max ), strlen( $compare ), '0' );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $compare = $postcode;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $compare &gt;= $min && $compare &lt;= $max ) {&nbsp;</div></li><li><div>              $matches[ $object_id ]   = isset( $matches[ $object_id ] ) ? $matches[ $object_id ]: array();&nbsp;</div></li><li><div>              $matches[ $object_id ][] = $compare_against;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Wildcard and standard comparison.</span>&nbsp;</div></li><li><div>      } elseif ( in_array( $compare_against, $wildcard_postcodes ) ) {&nbsp;</div></li><li><div>          $matches[ $object_id ]   = isset( $matches[ $object_id ] ) ? $matches[ $object_id ]: array();&nbsp;</div></li><li><div>          $matches[ $object_id ][] = $compare_against;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $matches;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Gets number of shipping methods currently enabled. Used to identify if</span>&nbsp;</div></li><li><div><span class="comment"> * shipping is configured.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param  bool $include_legacy Count legacy shipping methods too.</span>&nbsp;</div></li><li><div><span class="comment"> * @return int</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_shipping_method_count( $include_legacy = false ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $transient_name = 'wc_shipping_method_count_' . ( $include_legacy ? 1 : 0 ) . '_' . WC_Cache_Helper::get_transient_version( 'shipping' );&nbsp;</div></li><li><div>  $method_count = get_transient( $transient_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === $method_count ) {&nbsp;</div></li><li><div>      $method_count = absint( $wpdb-&gt;get_var( &quot;SELECT COUNT(*) FROM {$wpdb-&gt;prefix}woocommerce_shipping_zone_methods&quot; ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $include_legacy ) {&nbsp;</div></li><li><div>          <span class="comment">// Count activated methods that don't support shipping zones.</span>&nbsp;</div></li><li><div>          $methods = WC()-&gt;shipping-&gt;get_shipping_methods();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $methods as $method ) {&nbsp;</div></li><li><div>              if ( isset( $method-&gt;enabled ) && 'yes' === $method-&gt;enabled && ! $method-&gt;supports( 'shipping-zones' ) ) {&nbsp;</div></li><li><div>                  $method_count++;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      set_transient( $transient_name, $method_count, DAY_IN_SECONDS * 30 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return absint( $method_count );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Wrapper for set_time_limit to see if it is enabled.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_set_time_limit( $limit = 0 ) {&nbsp;</div></li><li><div>  if ( function_exists( 'set_time_limit' ) && false === strpos( ini_get( 'disable_functions' ), 'set_time_limit' ) && ! ini_get( 'safe_mode' ) ) {&nbsp;</div></li><li><div>      @set_time_limit( $limit );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Used to sort products attributes with uasort.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_product_attribute_uasort_comparison( $a, $b ) {&nbsp;</div></li><li><div>  if ( $a['position'] === $b['position'] ) {&nbsp;</div></li><li><div>      return 0;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return ( $a['position'] &lt; $b['position'] ) ? -1 : 1;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Used to sort shipping zone methods with uasort.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_shipping_zone_method_order_uasort_comparison( $a, $b ) {&nbsp;</div></li><li><div>  if ( $a-&gt;method_order === $b-&gt;method_order ) {&nbsp;</div></li><li><div>      return 0;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return ( $a-&gt;method_order &lt; $b-&gt;method_order ) ? -1 : 1;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get rounding precision for internal WC calculations.</span>&nbsp;</div></li><li><div><span class="comment"> * Will increase the precision of wc_get_price_decimals by 2 decimals, unless WC_ROUNDING_PRECISION is set to a higher number.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.6.3</span>&nbsp;</div></li><li><div><span class="comment"> * @return int</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_rounding_precision() {&nbsp;</div></li><li><div>  $precision = wc_get_price_decimals() + 2;&nbsp;</div></li><li><div>  if ( absint( WC_ROUNDING_PRECISION ) &gt; $precision ) {&nbsp;</div></li><li><div>      $precision = absint( WC_ROUNDING_PRECISION );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $precision;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a shared logger instance.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Use the woocommerce_logging_class filter to change the logging class. You may provide one of the following:</span>&nbsp;</div></li><li><div><span class="comment"> *     - a class name which will be instantiated as `new $class` with no arguments</span>&nbsp;</div></li><li><div><span class="comment"> *     - an instance which will be used directly as the logger</span>&nbsp;</div></li><li><div><span class="comment"> * In either case, the class or instance *must* implement WC_Logger_Interface.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see WC_Logger_Interface</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return WC_Logger</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_logger() {&nbsp;</div></li><li><div>  static $logger = null;&nbsp;</div></li><li><div>  if ( null === $logger ) {&nbsp;</div></li><li><div>      $class = apply_filters( 'woocommerce_logging_class', 'WC_Logger' );&nbsp;</div></li><li><div>      $implements = class_implements( $class );&nbsp;</div></li><li><div>      if ( is_array( $implements ) && in_array( 'WC_Logger_Interface', $implements ) ) {&nbsp;</div></li><li><div>          if ( is_object( $class ) ) {&nbsp;</div></li><li><div>              $logger = $class;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $logger = new $class;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          wc_doing_it_wrong(&nbsp;</div></li><li><div>              __FUNCTION__, &nbsp;</div></li><li><div>              sprintf(&nbsp;</div></li><li><div>                  __( 'The class &lt;code&gt;%s&lt;/code&gt; provided by woocommerce_logging_class filter must implement &lt;code&gt;WC_Logger_Interface&lt;/code&gt;.', 'woocommerce' ), &nbsp;</div></li><li><div>                  esc_html( is_object( $class ) ? get_class( $class ) : $class )&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              '3.0'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $logger = new WC_Logger();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $logger;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Prints human-readable information about a variable.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Some server environments blacklist some debugging functions. This function provides a safe way to</span>&nbsp;</div></li><li><div><span class="comment"> * turn an expression into a printable, readable form without calling blacklisted functions.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $expression The expression to be printed.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $return Optional. Default false. Set to true to return the human-readable string.</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|bool False if expression could not be printed. True if the expression was printed.</span>&nbsp;</div></li><li><div><span class="comment"> *     If $return is true, a string representation will be returned.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_print_r( $expression, $return = false ) {&nbsp;</div></li><li><div>  $alternatives = array(&nbsp;</div></li><li><div>      array( 'func' =&gt; 'print_r', 'args' =&gt; array( $expression, true ) ), &nbsp;</div></li><li><div>      array( 'func' =&gt; 'var_export', 'args' =&gt; array( $expression, true ) ), &nbsp;</div></li><li><div>      array( 'func' =&gt; 'json_encode', 'args' =&gt; array( $expression ) ), &nbsp;</div></li><li><div>      array( 'func' =&gt; 'serialize', 'args' =&gt; array( $expression ) ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $alternatives = apply_filters( 'woocommerce_print_r_alternatives', $alternatives, $expression );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $alternatives as $alternative ) {&nbsp;</div></li><li><div>      if ( function_exists( $alternative['func'] ) ) {&nbsp;</div></li><li><div>          $res = call_user_func_array( $alternative['func'], $alternative['args'] );&nbsp;</div></li><li><div>          if ( $return ) {&nbsp;</div></li><li><div>              return $res;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              echo $res;&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Registers the default log handler.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $handlers</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_register_default_log_handler( $handlers ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( defined( 'WC_LOG_HANDLER' ) && class_exists( WC_LOG_HANDLER ) ) {&nbsp;</div></li><li><div>      $handler_class = WC_LOG_HANDLER;&nbsp;</div></li><li><div>      $default_handler = new $handler_class();&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $default_handler = new WC_Log_Handler_File();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  array_push( $handlers, $default_handler );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $handlers;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_filter( 'woocommerce_register_log_handlers', 'wc_register_default_log_handler' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Store user agents. Used for tracker.</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_maybe_store_user_agent( $user_login, $user ) {&nbsp;</div></li><li><div>  if ( 'yes' === get_option( 'woocommerce_allow_tracking', 'no' ) && user_can( $user, 'manage_woocommerce' ) ) {&nbsp;</div></li><li><div>      $admin_user_agents = array_filter( (array) get_option( 'woocommerce_tracker_ua', array() ) );&nbsp;</div></li><li><div>      $admin_user_agents[] = wc_get_user_agent();&nbsp;</div></li><li><div>      update_option( 'woocommerce_tracker_ua', array_unique( $admin_user_agents ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>add_action( 'wp_login', 'wc_maybe_store_user_agent', 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Based on wp_list_pluck, this calls a method instead of returning a property.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @param array      $list      List of objects or arrays</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|string $callback_or_field     Callback method from the object to place instead of the entire object</span>&nbsp;</div></li><li><div><span class="comment"> * @param int|string $index_key Optional. Field from the object to use as keys for the new array.</span>&nbsp;</div></li><li><div><span class="comment"> *                              Default null.</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Array of values.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_list_pluck( $list, $callback_or_field, $index_key = null ) {&nbsp;</div></li><li><div>  <span class="comment">// Use wp_list_pluck if this isn't a callback</span>&nbsp;</div></li><li><div>  $first_el = current( $list );&nbsp;</div></li><li><div>  if ( ! is_object( $first_el ) || ! is_callable( array( $first_el, $callback_or_field ) ) ) {&nbsp;</div></li><li><div>      return wp_list_pluck( $list, $callback_or_field, $index_key );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( ! $index_key ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * This is simple. Could at some point wrap array_column()</span>&nbsp;</div></li><li><div><span class="comment">       * if we knew we had an array of arrays.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      foreach ( $list as $key =&gt; $value ) {&nbsp;</div></li><li><div>          $list[ $key ] = $value-&gt;{$callback_or_field}();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return $list;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * When index_key is not set for a particular item, push the value</span>&nbsp;</div></li><li><div><span class="comment">   * to the end of the stack. This is how array_column() behaves.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  $newlist = array();&nbsp;</div></li><li><div>  foreach ( $list as $value ) {&nbsp;</div></li><li><div>      if ( isset( $value-&gt;$index_key ) ) {&nbsp;</div></li><li><div>          $newlist[ $value-&gt;$index_key ] = $value-&gt;{$callback_or_field}();&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $newlist[] = $value-&gt;{$callback_or_field}();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $newlist;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get permalink settings for WooCommerce independent of the user locale.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since  3.0.0</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function wc_get_permalink_structure() {&nbsp;</div></li><li><div>  if ( function_exists( 'switch_to_locale' ) && did_action( 'admin_init' ) ) {&nbsp;</div></li><li><div>      switch_to_locale( get_locale() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $permalinks = wp_parse_args( (array) get_option( 'woocommerce_permalinks', array() ), array(&nbsp;</div></li><li><div>      'product_base' =&gt; '', &nbsp;</div></li><li><div>      'category_base' =&gt; '', &nbsp;</div></li><li><div>      'tag_base' =&gt; '', &nbsp;</div></li><li><div>      'attribute_base' =&gt; '', &nbsp;</div></li><li><div>      'use_verbose_page_rules' =&gt; false, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Ensure rewrite slugs are set.</span>&nbsp;</div></li><li><div>  $permalinks['product_rewrite_slug'] = untrailingslashit( empty( $permalinks['product_base'] ) ? _x( 'product', 'slug', 'woocommerce' )             : $permalinks['product_base'] );&nbsp;</div></li><li><div>  $permalinks['category_rewrite_slug'] = untrailingslashit( empty( $permalinks['category_base'] ) ? _x( 'product-category', 'slug', 'woocommerce' )   : $permalinks['category_base'] );&nbsp;</div></li><li><div>  $permalinks['tag_rewrite_slug'] = untrailingslashit( empty( $permalinks['tag_base'] ) ? _x( 'product-tag', 'slug', 'woocommerce' )             : $permalinks['tag_base'] );&nbsp;</div></li><li><div>  $permalinks['attribute_rewrite_slug'] = untrailingslashit( empty( $permalinks['attribute_base'] ) ? '' : $permalinks['attribute_base'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'restore_current_locale' ) && did_action( 'admin_init' ) ) {&nbsp;</div></li><li><div>      restore_current_locale();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  return $permalinks;&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>WooCommerce</li><li><span></span>3.0.6</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>