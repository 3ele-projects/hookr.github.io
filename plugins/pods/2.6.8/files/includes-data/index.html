<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.5.5" data-slug="pods-custom-content-types-and-fields" data-type="file" data-id="59263"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-data | file | Pods Custom Content Types And Fields | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, pods-custom-content-types-and-fields, 2.5.5" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=74e27681d15268e46c10580c2026c858' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-data/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-data%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-data%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-pods-custom-content-types-and-fields-2.5.5-file-includes-data","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-data" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to pods-custom-content-types-and&hellip;." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/" class="plugin"><span property="name">pods-custom-content-types-and&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.5.5." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/" class="H_VERSION"><span property="name">2.5.5</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-data</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="721"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/all/" title="All">All <span class="count badge">721</span></a></li><li class="" data-id="new" data-count="5"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/new/" title="New">New <span class="count badge">5</span></a></li><li class="" data-id="hooks" data-count="471"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/hooks/" title="Hooks">Hooks <span class="count badge">471</span></a></li><li class="" data-id="action" data-count="109"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/actions/" title="Actions">Actions <span class="count badge">109</span></a></li><li class="" data-id="filter" data-count="362"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/filters/" title="Filters">Filters <span class="count badge">362</span></a></li><li class="" data-id="class" data-count="68"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/classes/" title="Classes">Classes <span class="count badge">68</span></a></li><li class="" data-id="constant" data-count="18"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/constants/" title="Constants">Constants <span class="count badge">18</span></a></li><li class="" data-id="function" data-count="156"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/functions/" title="Functions">Functions <span class="count badge">156</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/data.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @package Pods\Global\Functions\Data</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return sanitized output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to sanitize</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $params Additional options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|mixed|object|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_slash</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_sanitize( $input, $params = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $input || is_int( $input ) || is_float( $input ) || empty( $input ) ) {&nbsp;</div></li><li><div>      return $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'nested' =&gt; false, &nbsp;</div></li><li><div>      'type' =&gt; null <span class="comment"><span class="comment">// %s %d %f etc</span></span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_array( $params ) ) {&nbsp;</div></li><li><div>      $defaults[ 'type' ] = $params;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $params = $defaults;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $params = array_merge( $defaults, (array) $params );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $n_params = $params;&nbsp;</div></li><li><div>      $n_params[ 'nested' ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_sanitize( $key ) ] = pods_sanitize( $val, $n_params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      $n_params = $params;&nbsp;</div></li><li><div>      $n_params[ 'nested' ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_sanitize( $key ) ] = pods_sanitize( $val, $n_params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( !empty( $params[ 'type' ] ) && false !== strpos( $params[ 'type' ], '%' ) ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * @var $wpdb wpdb</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = $wpdb-&gt;prepare( $params[ 'type' ], $output );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// @todo Switch this full over to esc_sql once we get sanitization sane again in PodsAPI so we *don't* have to unsanitize in various places</span>&nbsp;</div></li><li><div>  elseif ( function_exists( 'wp_slash' ) ) {&nbsp;</div></li><li><div>      $output = wp_slash( $input );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $output = esc_sql( $input );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return sanitized SQL LIKE output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to sanitize</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|mixed|object|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.9</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see like_escape</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_sanitize_like( $input ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $input || is_int( $input ) || is_float( $input ) || empty( $input ) ) {&nbsp;</div></li><li><div>      return $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_sanitize_like( $val );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_sanitize_like( $val );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( pods_version_check( 'wp', '4.0' ) ) {&nbsp;</div></li><li><div>          $output = $wpdb-&gt;esc_like( pods_sanitize( $input ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          <span class="comment">// like_escape is deprecated in WordPress 4.0</span>&nbsp;</div></li><li><div>          $output = like_escape( pods_sanitize( $input ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return slashed output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to sanitize</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $params Additional options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|mixed|object|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.9</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_slash</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_slash( $input, $params = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $input || is_int( $input ) || is_float( $input ) || empty( $input ) ) {&nbsp;</div></li><li><div>      return $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'type' =&gt; null <span class="comment"><span class="comment">// %s %d %f etc</span></span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_array( $params ) ) {&nbsp;</div></li><li><div>      $defaults[ 'type' ] = $params;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $params = $defaults;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $params = array_merge( $defaults, (array) $params );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $input ) ) {&nbsp;</div></li><li><div>      $output = $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_slash( $val, $params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_slash( $val, $params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( !empty( $params[ 'type' ] ) && false !== strpos( $params[ 'type' ], '%' ) ) {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * @var $wpdb wpdb</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = $wpdb-&gt;prepare( $params[ 'type' ], $output );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( function_exists( 'wp_slash' ) ) {&nbsp;</div></li><li><div>      $output = wp_slash( $input );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $output = addslashes( $input );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return unsanitized output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to unsanitize</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $params Additional options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|mixed|object|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_unsanitize( $input, $params = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $input || is_int( $input ) || is_float( $input ) || empty( $input ) ) {&nbsp;</div></li><li><div>      return $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $input ) ) {&nbsp;</div></li><li><div>      $output = $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $n_params = (array) $params;&nbsp;</div></li><li><div>      $n_params[ 'nested' ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_unsanitize( $key ) ] = pods_unsanitize( $val, $n_params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      $n_params = (array) $params;&nbsp;</div></li><li><div>      $n_params[ 'nested' ] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_unsanitize( $key ) ] = pods_unsanitize( $val, $n_params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// @todo Figure out what to do to unescape mysql_real_escape_string</span></span>&nbsp;</div></li><li><div>      if ( pods_version_check( 'wp', '3.6' ) ) {&nbsp;</div></li><li><div>          $output = stripslashes( $input );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          $output = stripslashes( $input );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return unslashed output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to unsanitize</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|mixed|object|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.9</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_unslash</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_unslash( $input ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '' === $input || is_int( $input ) || is_float( $input ) || empty( $input ) ) {&nbsp;</div></li><li><div>      return $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $input ) ) {&nbsp;</div></li><li><div>      $output = $input;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_unslash( $val );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ $key ] = pods_unslash( $val );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// @todo Figure out what to do to unescape mysql_real_escape_string</span></span>&nbsp;</div></li><li><div>      if ( pods_version_check( 'wp', '3.6' ) ) {&nbsp;</div></li><li><div>          $output = wp_unslash( $input );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          $output = stripslashes( $input );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filter input and return sanitized output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $input The string, array, or object to sanitize</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $charlist (optional) List of characters to be stripped from the input.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $lr Direction of the trim, can either be 'l' or 'r'.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|object|string</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_trim ( $input, $charlist = null, $lr = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $input ) ) {&nbsp;</div></li><li><div>      $input = get_object_vars( $input );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_sanitize( $key ) ] = pods_trim( $val, $charlist, $lr );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = (object) $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $input ) ) {&nbsp;</div></li><li><div>      foreach ( $input as $key =&gt; $val ) {&nbsp;</div></li><li><div>          $output[ pods_sanitize( $key ) ] = pods_trim( $val, $charlist, $lr );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      if ( 'l' == $lr ) {&nbsp;</div></li><li><div>          $output = ltrim( $input, $charlist );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'r' == $lr ) {&nbsp;</div></li><li><div>          $output = rtrim( $input, $charlist );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          $output = trim( $input, $charlist );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a variable (if exists)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name, can also be a modifier for specific types</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|object $type (optional) Super globals, url/url-relative, constants, globals, options, transients, cache, user data, Pod field values, dates</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $default (optional) The default value to set if variable doesn't exist</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $strict (optional) Only allow values (must not be empty)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $params (optional) Set 'casting'=&gt;true to cast value from $default, 'allowed'=&gt;$allowed to restrict a value to what's allowed</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed The variable (if exists), or default value</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_v( $var = null, $type = 'get', $default = null, $strict = false, $params = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'casting' =&gt; false, &nbsp;</div></li><li><div>      'allowed' =&gt; null&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $params = (object) array_merge( $defaults, (array) $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $type || '' === $type ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Invalid $type</span></span>&nbsp;</div></li><li><div>  } elseif ( is_array( $type ) ) {&nbsp;</div></li><li><div>      if ( isset( $type[ $var ] ) ) {&nbsp;</div></li><li><div>          $output = $type[ $var ];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } elseif ( is_object( $type ) ) {&nbsp;</div></li><li><div>      if ( isset( $type-&gt;{$var} ) ) {&nbsp;</div></li><li><div>          $output = $type-&gt;{$var};&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      $type = strtolower( (string) $type );&nbsp;</div></li><li><div>      switch ( $type ) {&nbsp;</div></li><li><div>          case 'get':&nbsp;</div></li><li><div>              if ( isset( $_GET[ $var ] ) ) {&nbsp;</div></li><li><div>                  $output = pods_unslash( $_GET[ $var ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'post':&nbsp;</div></li><li><div>              if ( isset( $_POST[ $var ] ) ) {&nbsp;</div></li><li><div>                  $output = pods_unslash( $_POST[ $var ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'request':&nbsp;</div></li><li><div>              if ( isset( $_REQUEST[ $var ] ) ) {&nbsp;</div></li><li><div>                  $output = pods_unslash( $_REQUEST[ $var ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'url':&nbsp;</div></li><li><div>          case 'uri':&nbsp;</div></li><li><div>              $url = parse_url( pods_current_url() );&nbsp;</div></li><li><div>              $uri = trim( $url[ 'path' ], '/' );&nbsp;</div></li><li><div>              $uri = array_filter( explode( '/', $uri ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( 'first' == $var ) {&nbsp;</div></li><li><div>                  $var = 0;&nbsp;</div></li><li><div>              } elseif ( 'last' == $var ) {&nbsp;</div></li><li><div>                  $var = - 1;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_numeric( $var ) ) {&nbsp;</div></li><li><div>                  $output = ( $var &lt; 0 ) ? pods_v( count( $uri ) + $var, $uri ) : pods_v( $var, $uri );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'url-relative':&nbsp;</div></li><li><div>              $url_raw = pods_current_url();&nbsp;</div></li><li><div>              $prefix = get_site_url();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( substr( $url_raw, 0, strlen( $prefix ) ) == $prefix ) {&nbsp;</div></li><li><div>                  $url_raw = substr( $url_raw, strlen( $prefix ) + 1, strlen( $url_raw ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $url = parse_url( $url_raw );&nbsp;</div></li><li><div>              $uri = trim( $url[ 'path' ], '/' );&nbsp;</div></li><li><div>              $uri = array_filter( explode( '/', $uri ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( 'first' == $var ) {&nbsp;</div></li><li><div>                  $var = 0;&nbsp;</div></li><li><div>              } elseif ( 'last' == $var ) {&nbsp;</div></li><li><div>                  $var = - 1;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_numeric( $var ) ) {&nbsp;</div></li><li><div>                  $output = ( $var &lt; 0 ) ? pods_v( count( $uri ) + $var, $uri ) : pods_v( $var, $uri );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'template-url':&nbsp;</div></li><li><div>              $output = get_template_directory_uri();&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'stylesheet-url':&nbsp;</div></li><li><div>              $output = get_stylesheet_directory_uri();&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'site-url':&nbsp;</div></li><li><div>              $blog_id = $scheme = null;&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $blog_id = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 1 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 2 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $blog_id = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = get_site_url( $blog_id, $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'home-url':&nbsp;</div></li><li><div>              $blog_id = $scheme = null;&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $blog_id = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 1 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 2 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $blog_id = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = get_home_url( $blog_id, $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'admin-url':&nbsp;</div></li><li><div>              $blog_id = $scheme = null;&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $blog_id = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 1 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 2 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $blog_id = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = get_admin_url( $blog_id, $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'includes-url':&nbsp;</div></li><li><div>              $output = includes_url( $var );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'content-url':&nbsp;</div></li><li><div>              $output = content_url( $var );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'plugins-url':&nbsp;</div></li><li><div>              $path = $plugin = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $plugin = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $path = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = plugins_url( $path, $plugin );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'network-site-url':&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>              $scheme = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $path = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = network_site_url( $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'network-home-url':&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>              $scheme = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $path = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = network_home_url( $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'network-admin-url':&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>              $scheme = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $path = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = network_admin_url( $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'user-admin-url':&nbsp;</div></li><li><div>              $path = '';&nbsp;</div></li><li><div>              $scheme = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $var ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      $path = $var[ 0 ];&nbsp;</div></li><li><div>                  } elseif ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $scheme = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $path = $var;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = user_admin_url( $path, $scheme );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'prefix':&nbsp;</div></li><li><div>              global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $output = $wpdb-&gt;prefix;&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'server':&nbsp;</div></li><li><div>              if ( ! pods_strict() ) {&nbsp;</div></li><li><div>                  if ( isset( $_SERVER[ $var ] ) ) {&nbsp;</div></li><li><div>                      $output = pods_unslash( $_SERVER[ $var ] );&nbsp;</div></li><li><div>                  } elseif ( isset( $_SERVER[ strtoupper( $var ) ] ) ) {&nbsp;</div></li><li><div>                      $output = pods_unslash( $_SERVER[ strtoupper( $var ) ] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'session':&nbsp;</div></li><li><div>              if ( isset( $_SESSION[ $var ] ) )&nbsp;</div></li><li><div>                  $output = $_SESSION[ $var ];&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'global':&nbsp;</div></li><li><div>          case 'globals':&nbsp;</div></li><li><div>              if ( isset( $GLOBALS[ $var ] ) )&nbsp;</div></li><li><div>                  $output = $GLOBALS[ $var ];&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'cookie':&nbsp;</div></li><li><div>              if ( isset( $_COOKIE[ $var ] ) )&nbsp;</div></li><li><div>                  $output = pods_unslash( $_COOKIE[ $var ] );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'constant':&nbsp;</div></li><li><div>              if ( defined( $var ) )&nbsp;</div></li><li><div>                  $output = constant( $var );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'user':&nbsp;</div></li><li><div>              if ( is_user_logged_in() ) {&nbsp;</div></li><li><div>                  $user = get_userdata( get_current_user_id() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( isset( $user-&gt;{$var} ) ) {&nbsp;</div></li><li><div>                      $value = $user-&gt;{$var};&nbsp;</div></li><li><div>                  } elseif ( 'role' == $var ) {&nbsp;</div></li><li><div>                      $value = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( ! empty( $user-&gt;roles ) ) {&nbsp;</div></li><li><div>                          $value = array_shift( $user-&gt;roles );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $value = get_user_meta( $user-&gt;ID, $var );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( is_array( $value ) && ! empty( $value ) ) {&nbsp;</div></li><li><div>                      $output = $value;&nbsp;</div></li><li><div>                  } elseif ( ! is_array( $value ) && 0 &lt; strlen( $value ) ) {&nbsp;</div></li><li><div>                      $output = $value;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'option':&nbsp;</div></li><li><div>              $output = get_option( $var, $default );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'site-option':&nbsp;</div></li><li><div>              $output = get_site_option( $var, $default );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'transient':&nbsp;</div></li><li><div>              $output = get_transient( $var );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'site-transient':&nbsp;</div></li><li><div>              $output = get_site_transient( $var );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'cache':&nbsp;</div></li><li><div>              if ( isset( $GLOBALS[ 'wp_object_cache' ] ) && is_object( $GLOBALS[ 'wp_object_cache' ] ) ) {&nbsp;</div></li><li><div>                  $group = 'default';&nbsp;</div></li><li><div>                  $force = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( ! is_array( $var ) ) {&nbsp;</div></li><li><div>                      $var = explode( '|', $var );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      if ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                          $group = $var[ 1 ];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                          $force = $var[ 2 ];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $var = $var[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $output = wp_cache_get( $var, $group, $force );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'pods-transient':&nbsp;</div></li><li><div>              $callback = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! is_array( $var ) ) {&nbsp;</div></li><li><div>                  $var = explode( '|', $var );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $callback = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $var = $var[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $output = pods_transient_get( $var, $callback );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'pods-site-transient':&nbsp;</div></li><li><div>              $callback = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! is_array( $var ) ) {&nbsp;</div></li><li><div>                  $var = explode( '|', $var );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $callback = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $var = $var[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $output = pods_site_transient_get( $var, $callback );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'pods-cache':&nbsp;</div></li><li><div>              if ( isset( $GLOBALS[ 'wp_object_cache' ] ) && is_object( $GLOBALS[ 'wp_object_cache' ] ) ) {&nbsp;</div></li><li><div>                  $group = 'default';&nbsp;</div></li><li><div>                  $callback = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( ! is_array( $var ) ) {&nbsp;</div></li><li><div>                      $var = explode( '|', $var );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                      if ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                          $group = $var[ 1 ];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                          $callback = $var[ 2 ];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $var = $var[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $output = pods_cache_get( $var, $group, $callback );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'pods-option-cache':&nbsp;</div></li><li><div>              $group = 'default';&nbsp;</div></li><li><div>              $callback = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! is_array( $var ) ) {&nbsp;</div></li><li><div>                  $var = explode( '|', $var );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $var[ 0 ] ) ) {&nbsp;</div></li><li><div>                  if ( isset( $var[ 1 ] ) ) {&nbsp;</div></li><li><div>                      $group = $var[ 1 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( isset( $var[ 2 ] ) ) {&nbsp;</div></li><li><div>                      $callback = $var[ 2 ];&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $var = $var[ 0 ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $output = pods_option_cache_get( $var, $group, $callback );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'date':&nbsp;</div></li><li><div>              $var = explode( '|', $var );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $var ) ) {&nbsp;</div></li><li><div>                  $output = date_i18n( $var[ 0 ], ( isset( $var[ 1 ] ) ? strtotime( $var[ 1 ] ) : false ) );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          case 'pods':&nbsp;</div></li><li><div>          case 'pods_display':&nbsp;</div></li><li><div>              <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">               * @var $pods Pods</span>&nbsp;</div></li><li><div><span class="comment">               */</span>&nbsp;</div></li><li><div>              global $pods;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_object( $pods ) && 'Pods' == get_class( $pods ) ) {&nbsp;</div></li><li><div>                  if ( 'pods' === $type ) {&nbsp;</div></li><li><div>                      $output = $pods-&gt;field( $var );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      if ( is_array( $output ) ) {&nbsp;</div></li><li><div>                          $options = array(&nbsp;</div></li><li><div>                              'field' =&gt; $var, &nbsp;</div></li><li><div>                              'fields' =&gt; $pods-&gt;fields&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          $output = pods_serial_comma( $output, $options );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  } elseif ( 'pods_display' === $type ) {&nbsp;</div></li><li><div>                      $output = $pods-&gt;display( $var );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          default:&nbsp;</div></li><li><div>              $output = apply_filters( 'pods_var_' . $type, $default, $var, $strict, $params );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null !== $default ) {&nbsp;</div></li><li><div>      <span class="comment">// Set default</span>&nbsp;</div></li><li><div>      if ( null === $output ) {&nbsp;</div></li><li><div>          $output = $default;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Casting</span>&nbsp;</div></li><li><div>      if ( true === $params-&gt;casting ) {&nbsp;</div></li><li><div>          $output = pods_cast( $output, $default );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Strict defaults for empty values</span>&nbsp;</div></li><li><div>  if ( true === $strict ) {&nbsp;</div></li><li><div>      if ( empty( $output ) ) {&nbsp;</div></li><li><div>          $output = $default;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allowed values</span>&nbsp;</div></li><li><div>  if ( null !== $params-&gt;allowed ) {&nbsp;</div></li><li><div>      if ( is_array( $params-&gt;allowed ) ) {&nbsp;</div></li><li><div>          <span class="comment">// Not in array and is not the same array</span>&nbsp;</div></li><li><div>          if ( ! in_array( $output, $params-&gt;allowed ) && ( ! is_array( $output ) || $output !== $params-&gt;allowed ) ) {&nbsp;</div></li><li><div>              $output = $default;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } elseif ( $output !== $params-&gt;allowed ) {&nbsp;</div></li><li><div>          <span class="comment">// Value doesn't match</span>&nbsp;</div></li><li><div>          $output = $default;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a sanitized variable (if exists)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name, can also be a modifier for specific types</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|object $type (optional) Super globals, url/url-relative, constants, globals, options, transients, cache, user data, Pod field values, dates</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $default (optional) The default value to set if variable doesn't exist</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $strict (optional) Only allow values (must not be empty)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $params (optional) Set 'casting'=&gt;true to cast value from $default, 'allowed'=&gt;$allowed to restrict a value to what's allowed</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed The variable (if exists), or default value</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_v</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_v_sanitized( $var = null, $type = 'get', $default = null, $strict = false, $params = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = pods_v( $var, $type, $default, $strict, $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $output = pods_sanitize( $output, $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a variable</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value The value to be set</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name, or URI segment position / query var name (if $type is 'url')</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|object $type (optional) Super globals, url/url-relative, constants, globals, user data, Pod field values</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Updated URL (if $type is 'url'), $value (if $type is 'constant'), Item ID (if $type is 'pods'), $type, or false if not set</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_v_set( $value, $var, $type = 'get' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $ret = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $var || '' === $var ) {&nbsp;</div></li><li><div>      <span class="comment">// Invalid $var</span>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( null === $type || '' === $type ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Invalid $type</span></span>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_array( $type ) ) {&nbsp;</div></li><li><div>      $type[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $ret = $type;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $type ) ) {&nbsp;</div></li><li><div>      $type-&gt;{$var} = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $ret = $type;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $type = strtolower( $type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'get' == $type ) {&nbsp;</div></li><li><div>          $_GET[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_GET;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'post' == $type ) {&nbsp;</div></li><li><div>          $_POST[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_POST;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'request' == $type ) {&nbsp;</div></li><li><div>          $_REQUEST[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_REQUEST;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'url' == $type ) {&nbsp;</div></li><li><div>          if ( is_numeric( $var ) && function_exists( 'http_build_url' ) ) {&nbsp;</div></li><li><div>              $url = parse_url( pods_current_url() );&nbsp;</div></li><li><div>              $uri = trim( $url[ 'path' ], '/' );&nbsp;</div></li><li><div>              $uri = array_filter( explode( '/', $uri ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( 'first' == $var ) {&nbsp;</div></li><li><div>                  $var = 0;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              elseif ( 'last' == $var ) {&nbsp;</div></li><li><div>                  $var = -1;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $var &lt; 0 ) {&nbsp;</div></li><li><div>                  $uri[ count( $uri ) + $var ] = $value;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  $uri[ $var ] = $value;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $url[ 'path' ] = '/' . implode( '/', $uri ) . '/';&nbsp;</div></li><li><div>              $url[ 'path' ] = trim( $url[ 'path' ], '/' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $ret = http_build_url( $url );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              $ret = add_query_arg( array( $var =&gt; $value ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'server' == $type ) {&nbsp;</div></li><li><div>          $_SERVER[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_SERVER;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( in_array( $type, array( 'global', 'globals' ) ) ) {&nbsp;</div></li><li><div>          $GLOBALS[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $GLOBALS;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'session' == $type ) {&nbsp;</div></li><li><div>          <span class="comment">// Session start</span>&nbsp;</div></li><li><div>          pods_session_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $_SESSION[ $var ] = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_SESSION;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'cookie' == $type && !headers_sent() ) {&nbsp;</div></li><li><div>          setcookie( $var, $value, time() + 10 * DAY_IN_SECONDS, COOKIEPATH );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = $_COOKIE;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'constant' == $type && !defined( $var ) && ( is_scalar( $value ) || null === $value ) ) {&nbsp;</div></li><li><div>          define( $var, $value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = constant( $var );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'user' == $type && is_user_logged_in() ) {&nbsp;</div></li><li><div>          $user = get_userdata( get_current_user_id() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !pods_version_check( 'wp', '3.5' ) ) {&nbsp;</div></li><li><div>              $user_data = get_object_vars( $user-&gt;data );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              $user_data = $user-&gt;to_array();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Role</span>&nbsp;</div></li><li><div>          if ( 'role' == $var ) {&nbsp;</div></li><li><div>              $user-&gt;set_role( $value );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// Core field</span>&nbsp;</div></li><li><div>          elseif ( isset( $user_data[ $var ] ) ) {&nbsp;</div></li><li><div>              wp_update_user( array( 'ID' =&gt; $user-&gt;ID, $var =&gt; $value ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// Meta field</span>&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              update_user_meta( $user-&gt;ID, $var, $value );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $ret = get_userdata( $user-&gt;ID );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( 'pods' == $type ) {&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * @var $pods Pods</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          global $pods;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_object( $pods ) && 'Pods' == get_class( $pods ) && $pods-&gt;exists() ) {&nbsp;</div></li><li><div>              $ret = $pods-&gt;save( $var, $value );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          $ret = apply_filters( 'pods_var_set_' . $type, $value, $var );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $ret;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a variable (if exists)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name or URI segment position</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type (optional) Super globals, url/url-relative, constants, globals, options, transients, cache, user data, Pod field values, dates</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $default (optional) The default value to set if variable doesn't exist</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $allowed (optional) The value(s) allowed</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $strict (optional) Only allow values (must not be empty)</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $casting (optional) Whether to cast the value returned like provided in $default</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context (optional) All returned values are sanitized unless this is set to 'raw'</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed The variable (if exists), or default value</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10.6</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated 2.4 Use pods_v() or pods_v_sanitized() instead.</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_v_sanitized</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_var( $var = 'last', $type = 'get', $default = null, $allowed = null, $strict = false, $casting = false, $context = 'display' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'raw' == $context ) {&nbsp;</div></li><li><div>      $output = pods_v( $var, $type, $default, $strict, array( 'allowed' =&gt; $allowed, 'casting' =&gt; $casting ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $output = pods_v_sanitized( $var, $type, $default, $strict, array( 'allowed' =&gt; $allowed, 'casting' =&gt; $casting ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $output;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a variable's raw value (if exists)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name or URI segment position</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type (optional) Super globals, url/url-relative, constants, globals, options, transients, cache, user data, Pod field values, dates</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $default (optional) The default value to set if variable doesn't exist</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $allowed (optional) The value(s) allowed</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $strict (optional) Only allow values (must not be empty)</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $casting (optional) Whether to cast the value returned like provided in $default</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed The variable (if exists), or default value</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated 2.4 Use pods_v() instead.</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_v</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_var_raw( $var = 'last', $type = 'get', $default = null, $allowed = null, $strict = false, $casting = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_v( $var, $type, $default, $strict, array( 'allowed' =&gt; $allowed, 'casting' =&gt; $casting ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a variable</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value The value to be set</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $var The variable name or URI segment position</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type (optional) &quot;url&quot;, &quot;get&quot;, &quot;post&quot;, &quot;request&quot;, &quot;server&quot;, &quot;session&quot;, &quot;cookie&quot;, &quot;constant&quot;, or &quot;user&quot;</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed $value (if set), $type (if $type is array or object), or $url (if $type is 'url')</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10.6</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated 2.4 Use pods_v_set() instead.</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_v_set</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_var_set( $value, $var = 'last', $type = 'url' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_v_set( $value, $var, $type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create a new URL off of the current one, with updated parameters</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $array Parameters to be set (empty will remove it)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $allowed Parameters to keep (if empty, all are kept)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $excluded Parameters to always remove</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $url URL to base update off of</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see add_query_arg</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_query_arg( $array = null, $allowed = null, $excluded = null, $url = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $array = (array) $array;&nbsp;</div></li><li><div>  $allowed = (array) $allowed;&nbsp;</div></li><li><div>  $excluded = (array) $excluded;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset( $_GET ) ) {&nbsp;</div></li><li><div>      $query_args = array();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $query_args = pods_unsanitize( $_GET );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $query_args as $key =&gt; $val ) {&nbsp;</div></li><li><div>      if ( is_array( $val ) && empty( $val ) ) {&nbsp;</div></li><li><div>          $query_args[ $key ] = false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( !is_array( $val ) && strlen( $val ) &lt; 1 ) {&nbsp;</div></li><li><div>          $query_args[ $key ] = false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( !empty( $allowed ) ) {&nbsp;</div></li><li><div>          $allow_it = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $allowed as $allow ) {&nbsp;</div></li><li><div>              if ( $allow == $key ) {&nbsp;</div></li><li><div>                  $allow_it = true;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              elseif ( false !== strpos( $allow, '*' ) && 0 === strpos( $key, trim( $allow, '*' ) ) ) {&nbsp;</div></li><li><div>                  $allow_it = true;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !$allow_it ) {&nbsp;</div></li><li><div>              $query_args[ $key ] = false;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $excluded ) ) {&nbsp;</div></li><li><div>      foreach ( $excluded as $exclusion ) {&nbsp;</div></li><li><div>          if ( isset( $query_args[ $exclusion ] ) && !in_array( $exclusion, $allowed ) ) {&nbsp;</div></li><li><div>              $query_args[ $exclusion ] = false;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $array ) ) {&nbsp;</div></li><li><div>      foreach ( $array as $key =&gt; $val ) {&nbsp;</div></li><li><div>          if ( null !== $val || false === strpos( $key, '*' ) ) {&nbsp;</div></li><li><div>              if ( is_array( $val ) && !empty( $val ) ) {&nbsp;</div></li><li><div>                  $query_args[ $key ] = $val;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              elseif ( !is_array( $val ) && 0 &lt; strlen( $val ) ) {&nbsp;</div></li><li><div>                  $query_args[ $key ] = $val;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              elseif ( isset( $query_args[ $key ] ) ) {&nbsp;</div></li><li><div>                  $query_args[ $key ] = false;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              $key = str_replace( '*', '', $key );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( $query_args as $k =&gt; $v ) {&nbsp;</div></li><li><div>                  if ( false !== strpos( $k, $key ) ) {&nbsp;</div></li><li><div>                      $query_args[ $k ] = false;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $url ) {&nbsp;</div></li><li><div>      $url = add_query_arg( $query_args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      $url = add_query_arg( $query_args, $url );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $url;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create a new URL off of the current one, with updated parameters</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $array Parameters to be set (empty will remove it)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $allowed Parameters to keep (if empty, all are kept)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $excluded Parameters to always remove</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $url URL to base update off of</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @deprecated 2.4 Use pods_query_arg() instead.</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_query_arg</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_var_update( $array = null, $allowed = null, $excluded = null, $url = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_query_arg( $array, $allowed, $excluded, $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Cast a value as a specific type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $cast_from</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_cast( $value, $cast_from = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null !== $cast_from ) {&nbsp;</div></li><li><div>      if ( is_object( $value ) && is_array( $cast_from ) ) {&nbsp;</div></li><li><div>          $value = get_object_vars( $value );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( is_array( $value ) && is_object( $cast_from ) ) {&nbsp;</div></li><li><div>          $value = (object) $value;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          settype( $value, gettype( $cast_from ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Create a slug from an input string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param $orig</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Sanitized slug</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.8.9</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_create_slug ( $orig, $strict = true ) {&nbsp;</div></li><li><div>  $str = preg_replace( &quot;/([_ \\/])/&quot;, &quot;-&quot;, trim( $orig ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $strict )&nbsp;</div></li><li><div>      $str = preg_replace( &quot;/([^0-9a-z\-])/&quot;, &quot;&quot;, strtolower( $str ) );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $str = urldecode( sanitize_title( strtolower( $str ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $str = preg_replace( &quot;/(\-) {2, }/&quot;, &quot;-&quot;, $str );&nbsp;</div></li><li><div>  $str = trim( $str, '-' );&nbsp;</div></li><li><div>  $str = apply_filters( 'pods_create_slug', $str, $orig );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $str;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Build a unique slug</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $slug The slug value</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $column_name The column name</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $pod The Pod name or array of Pod data</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $pod_id The Pod ID</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $id The item ID</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $obj (optional)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string The unique slug name</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.2</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_unique_slug ( $slug, $column_name, $pod, $pod_id = 0, $id = 0, $obj = null, $strict = true ) {&nbsp;</div></li><li><div>  $slug = pods_create_slug( $slug, $strict );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pod_data = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $pod ) ) {&nbsp;</div></li><li><div>      $pod_data = $pod;&nbsp;</div></li><li><div>      $pod_id = pods_v_sanitized( 'id', $pod_data, 0 );&nbsp;</div></li><li><div>      $pod = pods_v_sanitized( 'name', $pod_data );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pod_id = absint( $pod_id );&nbsp;</div></li><li><div>  $id = absint( $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $pod_data ) )&nbsp;</div></li><li><div>      $pod_data = pods_api()-&gt;load_pod( array( 'id' =&gt; $pod_id, 'name' =&gt; $pod ), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $pod_data ) || empty( $pod_id ) || empty( $pod ) )&nbsp;</div></li><li><div>      return $slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'table' != $pod_data[ 'storage' ] || !in_array( $pod_data[ 'type' ], array( 'pod', 'table' ) ) )&nbsp;</div></li><li><div>      return $slug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $check_sql = &quot;&nbsp;</div></li><li><div>      SELECT DISTINCT `t`.`{$column_name}` AS `slug`&nbsp;</div></li><li><div>      FROM `@wp_pods_{$pod}` AS `t`&nbsp;</div></li><li><div>      WHERE `t`.`{$column_name}` = %s AND `t`.`id` != %d&nbsp;</div></li><li><div>      LIMIT 1&nbsp;</div></li><li><div>  &quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $slug_check = pods_query( array( $check_sql, $slug, $id ), $obj );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $slug_check ) || apply_filters( 'pods_unique_slug_is_bad_flat_slug', false, $slug, $column_name, $pod, $pod_id, $id, $pod_data, $obj ) ) {&nbsp;</div></li><li><div>      $suffix = 2;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      do {&nbsp;</div></li><li><div>          $alt_slug = substr( $slug, 0, 200 - ( strlen( $suffix ) + 1 ) ) . &quot;-{$suffix}&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $slug_check = pods_query( array( $check_sql, $alt_slug, $id ), $obj );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $suffix++;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      while ( !empty( $slug_check ) || apply_filters( 'pods_unique_slug_is_bad_flat_slug', false, $alt_slug, $column_name, $pod, $pod_id, $id, $pod_data, $obj ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $slug = $alt_slug;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $slug = apply_filters( 'pods_unique_slug', $slug, $id, $column_name, $pod, $pod_id, $obj );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $slug;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a lowercase alphanumeric name (use pods_js_name if you want &quot;_&quot; instead of &quot;-&quot; )</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $orig Input string to clean</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $lower Force lowercase</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $trim_underscores Whether to trim off underscores</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Sanitized name</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_clean_name ( $orig, $lower = true, $trim_underscores = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $str = trim( $orig );&nbsp;</div></li><li><div>  $str = preg_replace( '/([^0-9a-zA-Z\-_])/', '', $str );&nbsp;</div></li><li><div>  $str = preg_replace( '/(_) {2, }/', '_', $str );&nbsp;</div></li><li><div>  $str = preg_replace( '/(-) {2, }/', '-', $str );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $lower ) {&nbsp;</div></li><li><div>      $str = strtolower( $str );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $trim_underscores ) {&nbsp;</div></li><li><div>      $str = trim( $str, '_' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $str;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a lowercase alphanumeric name (with underscores) for safe Javascript variable names</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $orig Input string to clean</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $lower Force lowercase</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Sanitized name</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.5.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_js_name( $orig, $lower = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $str = pods_clean_name( $orig, $lower );&nbsp;</div></li><li><div>  $str = str_replace( '-', '_', $str );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $str;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the Absolute Integer of a value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $maybeint</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $strict (optional) Check if $maybeint is a integer.</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $allow_negative (optional)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return integer</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_absint ( $maybeint, $strict = true, $allow_negative = false ) {&nbsp;</div></li><li><div>  if ( true === $strict && !is_numeric( trim( $maybeint ) ) )&nbsp;</div></li><li><div>      return 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false !== $allow_negative )&nbsp;</div></li><li><div>      return intval( $maybeint );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return absint( $maybeint );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Functions like str_replace except it will restrict $occurrences</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $find</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $replace</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $string</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $occurrences (optional)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> * @version 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_str_replace ( $find, $replace, $string, $occurrences = -1 ) {&nbsp;</div></li><li><div>  if ( is_array( $string ) ) {&nbsp;</div></li><li><div>      foreach ( $string as $k =&gt; $v ) {&nbsp;</div></li><li><div>          $string[ $k ] = pods_str_replace( $find, $replace, $v, $occurrences );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $string;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $string ) ) {&nbsp;</div></li><li><div>      $string = get_object_vars( $string );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $string as $k =&gt; $v ) {&nbsp;</div></li><li><div>          $string[ $k ] = pods_str_replace( $find, $replace, $v, $occurrences );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return (object) $string;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $find ) ) {&nbsp;</div></li><li><div>      foreach ( $find as &$f ) {&nbsp;</div></li><li><div>          $f = '/' . preg_quote( $f, '/' ) . '/';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $find = '/' . preg_quote( $find, '/' ) . '/';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return preg_replace( $find, $replace, $string, $occurrences );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Use mb_strlen if available, otherwise fallback to strlen</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return int</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_mb_strlen( $string ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'mb_strlen' ) ) {&nbsp;</div></li><li><div>      return mb_strlen( $string );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return strlen( $string );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Use mb_substr if available, otherwise fallback to substr</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $string</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $start</span>&nbsp;</div></li><li><div><span class="comment"> * @param null|int $length</span>&nbsp;</div></li><li><div><span class="comment"> * @param null|string $encoding</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_mb_substr( $string, $start, $length = null, $encoding = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'mb_substr' ) ) {&nbsp;</div></li><li><div>      if ( null === $encoding ) {&nbsp;</div></li><li><div>          $encoding = mb_internal_encoding();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return mb_substr( $string, $start, $length, $encoding );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return substr( $string, $start, $length );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Evaluate tags like magic tags but through pods_var</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array|object $tags String to be evaluated</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $sanitize Whether to sanitize tags</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @version 2.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_evaluate_tag</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_evaluate_tags ( $tags, $sanitize = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $tags ) ) {&nbsp;</div></li><li><div>      foreach ( $tags as $k =&gt; $tag ) {&nbsp;</div></li><li><div>          $tags[ $k ] = pods_evaluate_tags( $tag, $sanitize );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $tags;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( is_object( $tags ) ) {&nbsp;</div></li><li><div>      $tags = get_object_vars( $tags );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $tags as $k =&gt; $tag ) {&nbsp;</div></li><li><div>          $tags[ $k ] = pods_evaluate_tags( $tag, $sanitize );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $tags = (object) $tags;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $tags;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $callback = 'pods_evaluate_tag';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( true === $sanitize ) {&nbsp;</div></li><li><div>      $callback = 'pods_evaluate_tag_sanitized';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return preg_replace_callback( '/({@(.*?)})/m', $callback, (string) $tags );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Evaluate tag like magic tag but mapped through pods_v_sanitized</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $tag</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @version 2.1</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_evaluate_tag</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_evaluate_tag_sanitized( $tag ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_evaluate_tag( $tag, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Evaluate tag like magic tag but mapped through pods_v</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $tag</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $sanitize Whether to sanitize tags</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @version 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_evaluate_tag( $tag, $sanitize = false ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Handle pods_evaluate_tags</span>&nbsp;</div></li><li><div>  if ( is_array( $tag ) ) {&nbsp;</div></li><li><div>      if ( !isset( $tag[ 2 ] ) && strlen( trim( $tag[ 2 ] ) ) &lt; 1 ) {&nbsp;</div></li><li><div>          return '';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $tag = $tag[ 2 ];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tag = trim( $tag, ' {@}' );&nbsp;</div></li><li><div>  $tag = explode( '.', $tag );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $tag ) || !isset( $tag[ 0 ] ) || strlen( trim( $tag[ 0 ] ) ) &lt; 1 ) {&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Fix formatting that may be after the first .</span>&nbsp;</div></li><li><div>  if ( 2 &lt; count( $tag ) ) {&nbsp;</div></li><li><div>      $first_tag = $tag[ 0 ];&nbsp;</div></li><li><div>      unset( $tag[ 0 ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $tag = array(&nbsp;</div></li><li><div>          $first_tag, &nbsp;</div></li><li><div>          implode( '.', $tag )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $tag as $k =&gt; $v ) {&nbsp;</div></li><li><div>      $tag[ $k ] = trim( $v );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $value = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $single_supported = array(&nbsp;</div></li><li><div>      'template-url', &nbsp;</div></li><li><div>      'stylesheet-url', &nbsp;</div></li><li><div>      'site-url', &nbsp;</div></li><li><div>      'home-url', &nbsp;</div></li><li><div>      'admin-url', &nbsp;</div></li><li><div>      'includes-url', &nbsp;</div></li><li><div>      'content-url', &nbsp;</div></li><li><div>      'plugins-url', &nbsp;</div></li><li><div>      'network-site-url', &nbsp;</div></li><li><div>      'network-home-url', &nbsp;</div></li><li><div>      'network-admin-url', &nbsp;</div></li><li><div>      'user-admin-url', &nbsp;</div></li><li><div>      'prefix'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( in_array( $tag[ 0 ], $single_supported ) ) {&nbsp;</div></li><li><div>      $value = pods_v( '', $tag[ 0 ], '', true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 1 == count( $tag ) ) {&nbsp;</div></li><li><div>      $value = pods_v( $tag[ 0 ], 'get', '', true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 2 == count( $tag ) ) {&nbsp;</div></li><li><div>      $value = pods_v( $tag[ 1 ], $tag[ 0 ], '', true );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $value = apply_filters( 'pods_evaluate_tag', $value, $tag );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $value ) && 1 == count( $value ) ) {&nbsp;</div></li><li><div>      $value = current( $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $value ) ) {&nbsp;</div></li><li><div>      $value = pods_serial_comma( $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $sanitize ) {&nbsp;</div></li><li><div>      $value = pods_sanitize( $value );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Split an array into human readable text (Item, Item, and Item)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $value</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $field</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $fields</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $and</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $field_index</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_serial_comma ( $value, $field = null, $fields = null, $and = null, $field_index = null ) {&nbsp;</div></li><li><div>  if ( is_object( $value ) )&nbsp;</div></li><li><div>      $value = get_object_vars( $value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'field' =&gt; $field, &nbsp;</div></li><li><div>      'fields' =&gt; $fields, &nbsp;</div></li><li><div>      'and' =&gt; $and, &nbsp;</div></li><li><div>      'field_index' =&gt; $field_index, &nbsp;</div></li><li><div>      'separator' =&gt; ', ', &nbsp;</div></li><li><div>      'serial' =&gt; true&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $field ) ) {&nbsp;</div></li><li><div>      $defaults[ 'field' ] = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $params = array_merge( $defaults, $field );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $params = $defaults;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $params = (object) $params;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $simple = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $params-&gt;fields ) && is_array( $params-&gt;fields ) && isset( $params-&gt;fields[ $params-&gt;field ] ) ) {&nbsp;</div></li><li><div>      $params-&gt;field = $params-&gt;fields[ $params-&gt;field ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $simple_tableless_objects = PodsForm::simple_tableless_objects();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $params-&gt;field ) && is_array( $params-&gt;field ) && in_array( $params-&gt;field[ 'type' ], PodsForm::tableless_field_types() ) ) {&nbsp;</div></li><li><div>          if ( in_array( $params-&gt;field[ 'type' ], PodsForm::file_field_types() ) ) {&nbsp;</div></li><li><div>              if ( null === $params-&gt;field_index )&nbsp;</div></li><li><div>                  $params-&gt;field_index = 'guid';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          elseif ( in_array( $params-&gt;field[ 'pick_object' ], $simple_tableless_objects ) )&nbsp;</div></li><li><div>              $simple = true;&nbsp;</div></li><li><div>          else {&nbsp;</div></li><li><div>              $table = pods_api()-&gt;get_table_info( $params-&gt;field[ 'pick_object' ], $params-&gt;field[ 'pick_val' ], null, null, $params-&gt;field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( !empty( $table ) ) {&nbsp;</div></li><li><div>                  if ( null === $params-&gt;field_index )&nbsp;</div></li><li><div>                      $params-&gt;field_index = $table[ 'field_index' ];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $params-&gt;field = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $simple && is_array( $params-&gt;field ) && !is_array( $value ) && '' !== $value && null !== $value )&nbsp;</div></li><li><div>      $value = PodsForm::field_method( 'pick', 'simple_value', $params-&gt;field[ 'name' ], $value, $params-&gt;field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_array( $value ) )&nbsp;</div></li><li><div>      return $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null === $params-&gt;and )&nbsp;</div></li><li><div>      $params-&gt;and = ' ' . __( 'and', 'pods' ) . ' ';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $last = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $original_value = $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $value ) )&nbsp;</div></li><li><div>      $last = array_pop( $value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $simple && is_array( $params-&gt;field ) && !is_array( $last ) && '' !== $last && null !== $last )&nbsp;</div></li><li><div>      $last = PodsForm::field_method( 'pick', 'simple_value', $params-&gt;field[ 'name' ], $last, $params-&gt;field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $last ) ) {&nbsp;</div></li><li><div>      if ( null !== $params-&gt;field_index && isset( $last[ $params-&gt;field_index ] ) )&nbsp;</div></li><li><div>          $last = $last[ $params-&gt;field_index ];&nbsp;</div></li><li><div>      elseif ( isset( $last[ 0 ] ) )&nbsp;</div></li><li><div>          $last = $last[ 0 ];&nbsp;</div></li><li><div>      elseif ( $simple )&nbsp;</div></li><li><div>          $last = current( $last );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $last = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $value ) ) {&nbsp;</div></li><li><div>      if ( null !== $params-&gt;field_index && isset( $original_value[ $params-&gt;field_index ] ) )&nbsp;</div></li><li><div>          return $original_value[ $params-&gt;field_index ];&nbsp;</div></li><li><div>      elseif ( null !== $params-&gt;field_index && isset( $value[ $params-&gt;field_index ] ) )&nbsp;</div></li><li><div>          return $value[ $params-&gt;field_index ];&nbsp;</div></li><li><div>      elseif ( !isset( $value[ 0 ] ) )&nbsp;</div></li><li><div>          $value = array( $value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $value as $k =&gt; $v ) {&nbsp;</div></li><li><div>          if ( $simple && is_array( $params-&gt;field ) && !is_array( $v ) && '' !== $v && null !== $v )&nbsp;</div></li><li><div>              $v = PodsForm::field_method( 'pick', 'simple_value', $params-&gt;field[ 'name' ], $v, $params-&gt;field );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_array( $v ) ) {&nbsp;</div></li><li><div>              if ( null !== $params-&gt;field_index && isset( $v[ $params-&gt;field_index ] ) )&nbsp;</div></li><li><div>                  $v = $v[ $params-&gt;field_index ];&nbsp;</div></li><li><div>              elseif ( $simple )&nbsp;</div></li><li><div>                  $v = trim( implode( $params-&gt;separator . ' ', $v ), $params-&gt;separator . ' ' );&nbsp;</div></li><li><div>              else {&nbsp;</div></li><li><div>                  unset( $value[ $k ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $value[ $k ] = $v;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 1 == count( $value ) || !$params-&gt;serial )&nbsp;</div></li><li><div>          $value = trim( implode( $params-&gt;separator . ' ', $value ), $params-&gt;separator . ' ' );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $value = trim( implode( $params-&gt;separator . ' ', $value ), $params-&gt;separator . ' ' ) . apply_filters( 'pods_serial_comma', $params-&gt;separator . ' ', $value, $original_value, $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $value = trim( $value );&nbsp;</div></li><li><div>      $last = trim( $last );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 0 &lt; strlen( $value ) && 0 &lt; strlen( $last ) )&nbsp;</div></li><li><div>          $value = $value . $params-&gt;and . $last;&nbsp;</div></li><li><div>      elseif ( 0 &lt; strlen( $last ) )&nbsp;</div></li><li><div>          $value = $last;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $value = '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $value = $last;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $value = trim( $value, $params-&gt;separator . ' ' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $value = apply_filters( 'pods_serial_comma_value', $value, $original_value, $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return (string) $value;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Return a variable if a user is logged in or anonymous, or a specific capability</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $anon Variable to return if user is anonymous (not logged in)</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $user Variable to return if user is logged in</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $capability Capability or array of Capabilities to check to return $user on</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed $user Variable to return if user is logged in (if logged in), otherwise $anon</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_var_user ( $anon = false, $user = true, $capability = null ) {&nbsp;</div></li><li><div>  $value = $anon;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_user_logged_in() ) {&nbsp;</div></li><li><div>      if ( empty( $capability ) )&nbsp;</div></li><li><div>          $value = $user;&nbsp;</div></li><li><div>      else {&nbsp;</div></li><li><div>          $capabilities = (array) $capability;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $capabilities as $capability ) {&nbsp;</div></li><li><div>              if ( current_user_can( $capability ) ) {&nbsp;</div></li><li><div>                  $value = $user;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $value;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Take a one-level list of items and make it hierarchical</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|object $list List of items</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Array of parent, children, and id keys to use</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|object</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_hierarchical_list ( $list, $args = array() ) {&nbsp;</div></li><li><div>  if ( empty( $args ) || ( !is_object( $list ) && !is_array( $list ) ) )&nbsp;</div></li><li><div>      return $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'id' =&gt; 'id', &nbsp;</div></li><li><div>      'parent' =&gt; 'parent', &nbsp;</div></li><li><div>      'children' =&gt; 'children', &nbsp;</div></li><li><div>      'orphans' =&gt; true, &nbsp;</div></li><li><div>      'found' =&gt; array(), &nbsp;</div></li><li><div>      'list' =&gt; array(), &nbsp;</div></li><li><div>      'current_depth' =&gt; -1&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = array_merge( $defaults, (array) $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $list = pods_hierarchical_list_recurse( 0, $list, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $list;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Recurse list of items and make it hierarchical</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $parent Parent ID</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|object $list List of items</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Array of parent, children, and id keys to use</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|object</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_hierarchical_list_recurse ( $parent, $list, &$args ) {&nbsp;</div></li><li><div>  $new = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $object = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $list ) ) {&nbsp;</div></li><li><div>      $object = true;&nbsp;</div></li><li><div>      $list = get_object_vars( $list );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args[ 'current_depth' ]++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $depth = $args[ 'current_depth' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $depth )&nbsp;</div></li><li><div>      $args[ 'list' ] = $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $list as $k =&gt; $list_item ) {&nbsp;</div></li><li><div>      if ( is_object( $list_item ) && isset( $list_item-&gt;{$args[ 'id' ]} ) ) {&nbsp;</div></li><li><div>          $list_item-&gt;{$args[ 'parent' ]} = (int) pods_v( $args[ 'parent' ], $list_item );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_array( $list_item-&gt;{$args[ 'parent' ]} ) && isset( $list_item-&gt;{$args[ 'parent' ]}[ $args[ 'id' ] ] ) && $parent == $list_item-&gt;{$args[ 'parent' ]}[ $args[ 'id' ] ] )&nbsp;</div></li><li><div>              $list_item-&gt;{$args[ 'children' ]} = pods_hierarchical_list_recurse( $list_item-&gt;{$args[ 'id' ]}, $list, $args );&nbsp;</div></li><li><div>          elseif ( $parent == $list_item-&gt;{$args[ 'parent' ]} || ( 0 == $depth && $parent == $list_item-&gt;{$args[ 'id' ]} ) )&nbsp;</div></li><li><div>              $list_item-&gt;{$args[ 'children' ]} = pods_hierarchical_list_recurse( $list_item-&gt;{$args[ 'id' ]}, $list, $args );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $args[ 'found' ][ $k ] = $list_item;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      elseif ( is_array( $list_item ) && isset( $list_item[ $args[ 'id' ] ] ) ) {&nbsp;</div></li><li><div>          $list_item[ $args[ 'parent' ] ] = (int) pods_v( $args[ 'parent' ], $list_item );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_array( $list_item[ $args[ 'parent' ] ] ) && isset( $list_item[ $args[ 'parent' ] ][ $args[ 'id' ] ] ) && $parent == $list_item[ $args[ 'parent' ] ][ $args[ 'id' ] ] )&nbsp;</div></li><li><div>              $list_item[ $args[ 'children' ] ] = pods_hierarchical_list_recurse( $list_item[ $args[ 'id' ] ], $list, $args );&nbsp;</div></li><li><div>          elseif ( $parent == $list_item[ $args[ 'parent' ] ] || ( 0 == $depth && $parent == $list_item[ $args[ 'id' ] ] ) )&nbsp;</div></li><li><div>              $list_item[ $args[ 'children' ] ] = pods_hierarchical_list_recurse( $list_item[ $args[ 'id' ] ], $list, $args );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $args[ 'found' ][ $k ] = $list_item;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $new[ $k ] = $list_item;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $args[ 'current_depth' ] = $depth;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $depth && empty( $new ) && !empty( $list ) ) {&nbsp;</div></li><li><div>      $first = current( array_slice( $list, 0, 1 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $new_parent = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $args[ 'current_depth' ] = -1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_object( $first ) && isset( $first-&gt;{$args[ 'parent' ]} ) )&nbsp;</div></li><li><div>          $new_parent = (int) $first-&gt;{$args[ 'parent' ]};&nbsp;</div></li><li><div>      elseif ( is_array( $first ) && isset( $first[ $args[ 'parent' ] ] ) )&nbsp;</div></li><li><div>          $new_parent = (int) $first[ $args[ 'parent' ] ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $new_parent ) )&nbsp;</div></li><li><div>          $new = pods_hierarchical_list_recurse( $new_parent, $list, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 == $depth ) {&nbsp;</div></li><li><div>      $orphans = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $args[ 'list' ] as $k =&gt; $list_item ) {&nbsp;</div></li><li><div>          if ( !isset( $args[ 'found' ][ $k ] ) )&nbsp;</div></li><li><div>              $orphans[ $k ] = $list_item;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $orphans ) ) {&nbsp;</div></li><li><div>          foreach ( $orphans as $orphan ) {&nbsp;</div></li><li><div>              $new[] = $orphan;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $object )&nbsp;</div></li><li><div>      $new = (object) $new;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $new;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Take a one-level list of items and make it hierarchical for &lt;select&gt;</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|object $list List of items</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Array of index, parent, children, id, and prefix keys to use</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $children_key Key to recurse children into</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|object</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_hierarchical_select ( $list, $args = array() ) {&nbsp;</div></li><li><div>  $object = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $list ) ) {&nbsp;</div></li><li><div>      $object = true;&nbsp;</div></li><li><div>      $list = get_object_vars( $list );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $list = pods_hierarchical_list( $list, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'index' =&gt; 'name', &nbsp;</div></li><li><div>      'children' =&gt; 'children', &nbsp;</div></li><li><div>      'prefix' =&gt; '&nbsp;&nbsp;&nbsp;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $args = array_merge( $defaults, (array) $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $list = pods_hierarchical_select_recurse( $list, $args, 0 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $object )&nbsp;</div></li><li><div>      $list = (object) $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $list;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Recurse list of hierarchical data</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|object $list List of items</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args Array of children and prefix keys to use</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $children_key Key to recurse children into</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see pods_hierarchical_select</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_hierarchical_select_recurse ( $items, $args, $depth = 0 ) {&nbsp;</div></li><li><div>  $data = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $items as $k =&gt; $v ) {&nbsp;</div></li><li><div>      $object = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_object( $v ) ) {&nbsp;</div></li><li><div>          $object = true;&nbsp;</div></li><li><div>          $v = get_object_vars( $v );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $v[ $args[ 'index' ] ] ) )&nbsp;</div></li><li><div>          $v[ $args[ 'index' ] ] = ( 0 &lt; $depth ? str_repeat( $args[ 'prefix' ], $depth ) : '' ) . $v[ $args[ 'index' ] ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $children = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $v[ $args[ 'children' ] ] ) ) {&nbsp;</div></li><li><div>          if ( !empty( $v[ $args[ 'children' ] ] ) )&nbsp;</div></li><li><div>              $children = pods_hierarchical_select_recurse( $v[ $args[ 'children' ] ], $args, ( $depth + 1 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          unset( $v[ $args[ 'children' ] ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $object )&nbsp;</div></li><li><div>          $v = (object) $v;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $data[ $k ] = $v;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $children ) ) {&nbsp;</div></li><li><div>          foreach ( $children as $ck =&gt; $cv ) {&nbsp;</div></li><li><div>              $data[ $ck ] = $cv;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $data;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Filters a list of objects or arrays, based on a set of key =&gt; value arguments.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array|object $list An array or object, with objects/arrays to filter</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $args An array of key =&gt; value arguments to match against each object</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $operator The logical operation to perform:</span>&nbsp;</div></li><li><div><span class="comment"> *    'AND' means all elements from the array must match;</span>&nbsp;</div></li><li><div><span class="comment"> *    'OR' means only one element needs to match;</span>&nbsp;</div></li><li><div><span class="comment"> *    'NOT' means no elements may match.</span>&nbsp;</div></li><li><div><span class="comment"> *   The default is 'AND'.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see wp_list_filter</span>&nbsp;</div></li><li><div><span class="comment"> * @return array</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_list_filter ( $list, $args = array(), $operator = 'AND' ) {&nbsp;</div></li><li><div>  if ( empty( $args ) )&nbsp;</div></li><li><div>      return $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $data = $list;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $object = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $data ) ) {&nbsp;</div></li><li><div>      $object = true;&nbsp;</div></li><li><div>      $data = get_object_vars( $data );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $operator = strtoupper( $operator );&nbsp;</div></li><li><div>  $count = count( $args );&nbsp;</div></li><li><div>  $filtered = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $data as $key =&gt; $obj ) {&nbsp;</div></li><li><div>      $to_match = $obj;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_object( $to_match ) )&nbsp;</div></li><li><div>          $to_match = get_object_vars( $to_match );&nbsp;</div></li><li><div>      elseif ( !is_array( $to_match ) )&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $matched = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $args as $m_key =&gt; $m_value ) {&nbsp;</div></li><li><div>          if ( array_key_exists( $m_key, $to_match ) && $m_value == $to_match[ $m_key ] )&nbsp;</div></li><li><div>              $matched++;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'AND' == $operator && $matched == $count )&nbsp;</div></li><li><div>          $filtered[ $key ] = $obj;&nbsp;</div></li><li><div>      elseif ( 'OR' == $operator && $matched &gt; 0 )&nbsp;</div></li><li><div>          $filtered[ $key ] = $obj;&nbsp;</div></li><li><div>      elseif ( 'NOT' == $operator && 0 == $matched )&nbsp;</div></li><li><div>          $filtered[ $key ] = $obj;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          continue;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $object )&nbsp;</div></li><li><div>      $filtered = (object) $filtered;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $filtered;&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Pods - Custom Content Types and Fields</li><li><span></span>2.6</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>