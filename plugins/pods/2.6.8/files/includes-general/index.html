<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="2.5.5" data-slug="pods-custom-content-types-and-fields" data-type="file" data-id="59264"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-general | file | Pods Custom Content Types And Fields | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, pods-custom-content-types-and-fields, 2.5.5" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=37c1885c7e277ebfc647527105136423' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-general/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-general%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-general%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-pods-custom-content-types-and-fields-2.5.5-file-includes-general","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-general" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to pods-custom-content-types-and&hellip;." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/" class="plugin"><span property="name">pods-custom-content-types-and&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.5.5." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/" class="H_VERSION"><span property="name">2.5.5</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-general</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="721"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/all/" title="All">All <span class="count badge">721</span></a></li><li class="" data-id="new" data-count="5"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/new/" title="New">New <span class="count badge">5</span></a></li><li class="" data-id="hooks" data-count="471"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/hooks/" title="Hooks">Hooks <span class="count badge">471</span></a></li><li class="" data-id="action" data-count="109"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/actions/" title="Actions">Actions <span class="count badge">109</span></a></li><li class="" data-id="filter" data-count="362"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/filters/" title="Filters">Filters <span class="count badge">362</span></a></li><li class="" data-id="class" data-count="68"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/classes/" title="Classes">Classes <span class="count badge">68</span></a></li><li class="" data-id="constant" data-count="18"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/constants/" title="Constants">Constants <span class="count badge">18</span></a></li><li class="" data-id="function" data-count="156"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/functions/" title="Functions">Functions <span class="count badge">156</span></a></li><li class="" data-id="shortcode" data-count="8"><a href="http://hookr.io/plugins/pods-custom-content-types-and-fields/2.5.5/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">8</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/general.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @package Pods\Global\Functions\General</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Standardize queries and error reporting. It replaces @wp_ with $wpdb-&gt;prefix.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsData::query</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $sql SQL Query</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $error (optional) The failure message</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $results_error (optional) Throw an error if a records are found</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $no_results_error (optional) Throw an error if no records are found</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_query ( $sql, $error = 'Database Error', $results_error = null, $no_results_error = null ) {&nbsp;</div></li><li><div>  $podsdata = pods_data();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $sql = apply_filters( 'pods_query_sql', $sql, $error, $results_error, $no_results_error );&nbsp;</div></li><li><div>  $sql = $podsdata-&gt;get_sql($sql);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $error ) ) {&nbsp;</div></li><li><div>      if ( !is_array( $sql ) )&nbsp;</div></li><li><div>          $sql = array( $sql, $error );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $error = 'Database Error';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 1 == pods_v( 'pods_debug_sql_all', 'get', 0 ) && is_user_logged_in() && pods_is_admin( array( 'pods' ) ) ) {&nbsp;</div></li><li><div>      $debug_sql = $sql;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo '&lt;textarea cols=&quot;100&quot; rows=&quot;24&quot;&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_array( $debug_sql ) ) {&nbsp;</div></li><li><div>          $debug_sql = print_r( $debug_sql, true );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo esc_textarea( $debug_sql );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      echo '&lt;/textarea&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $podsdata-&gt;query( $sql, $error, $results_error, $no_results_error );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Standardize filters / actions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $scope Scope of the filter / action (ui for PodsUI, api for PodsAPI, etc..)</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name Name of filter / action to run</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $args (optional) Arguments to send to filter / action</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $obj (optional) Object to reference for filter / action</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @todo Need to figure out how to handle $scope = 'pods' for the Pods class</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_do_hook ( $scope, $name, $args = null, $obj = null ) {&nbsp;</div></li><li><div>  <span class="comment">// Add filter name</span>&nbsp;</div></li><li><div>  array_unshift( $args, &quot;pods_{$scope}_{$name}&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Add object</span>&nbsp;</div></li><li><div>  $args[] = $obj;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Run apply_filters and give it all the arguments</span>&nbsp;</div></li><li><div>  $args = call_user_func_array( 'apply_filters', $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $args;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Message / Notice handling for Admin UI</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $message The notice / error message shown</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type Message type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_message ( $message, $type = null ) {&nbsp;</div></li><li><div>  if ( empty( $type ) || !in_array( $type, array( 'notice', 'error' ) ) )&nbsp;</div></li><li><div>      $type = 'notice';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $class = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'notice' == $type )&nbsp;</div></li><li><div>      $class = 'updated';&nbsp;</div></li><li><div>  elseif ( 'error' == $type )&nbsp;</div></li><li><div>      $class = 'error';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;div id=&quot;message&quot; class=&quot;' . esc_attr( $class ) . ' fade&quot;&gt;&lt;p&gt;' . $message . '&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>global $pods_errors;&nbsp;</div></li><li><div>$pods_errors = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Error Handling which throws / displays errors</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $error The error message to be thrown / displayed</span>&nbsp;</div></li><li><div><span class="comment"> * @param object / boolean $obj If object, if $obj-&gt;display_errors is set, and is set to true: display errors;</span>&nbsp;</div></li><li><div><span class="comment"> *                              If boolean, and is set to true: display errors</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @throws Exception</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_error ( $error, $obj = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  global $pods_errors;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $display_errors = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $obj ) && isset( $obj-&gt;display_errors ) && true === $obj-&gt;display_errors )&nbsp;</div></li><li><div>      $display_errors = true;&nbsp;</div></li><li><div>  elseif ( is_bool( $obj ) && true === $obj )&nbsp;</div></li><li><div>      $display_errors = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $error ) && 'Exception' == get_class( $error ) ) {&nbsp;</div></li><li><div>      $error = $error-&gt;getMessage();&nbsp;</div></li><li><div>      $display_errors = false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $error ) ) {&nbsp;</div></li><li><div>      if ( 1 == count( $error ) )&nbsp;</div></li><li><div>          $error = current( $error );&nbsp;</div></li><li><div>      elseif ( defined( 'DOING_AJAX' ) && DOING_AJAX )&nbsp;</div></li><li><div>          $error = __( 'The following issue occurred:', 'pods' ) . &quot;\n\n- &quot; . implode( &quot;\n- &quot;, $error );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $error = __( 'The following issues occurred:', 'pods' ) . &quot;\n&lt;ul&gt;&lt;li&gt;&quot; . implode( &quot;&lt;/li&gt;\n&lt;li&gt;&quot;, $error ) . &quot;&lt;/li&gt;&lt;/ul&gt;&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $error ) )&nbsp;</div></li><li><div>      $error = __( 'An unknown error has occurred', 'pods' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// log error in WP</span>&nbsp;</div></li><li><div>  $log_error = new WP_Error( 'pods-error-' . md5( $error ), $error );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// throw error as Exception and return false if silent</span>&nbsp;</div></li><li><div>  if ( $pods_errors !== $error && false === $display_errors && !empty( $error ) ) {&nbsp;</div></li><li><div>      $exception_bypass = apply_filters( 'pods_error_exception', null, $error );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( null !== $exception_bypass )&nbsp;</div></li><li><div>          return $exception_bypass;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pods_errors = $error;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      set_exception_handler( 'pods_error' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      throw new Exception( $error );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pods_errors = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $die_bypass = apply_filters( 'pods_error_die', null, $error );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( null !== $die_bypass )&nbsp;</div></li><li><div>      return $die_bypass;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// die with error</span>&nbsp;</div></li><li><div>  if ( !defined( 'DOING_AJAX' ) && !headers_sent() && ( is_admin() || false !== strpos( $_SERVER[ 'REQUEST_URI' ], 'wp-comments-post.php' ) ) )&nbsp;</div></li><li><div>      wp_die( $error );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      die( &quot;&lt;e&gt;$error&lt;/e&gt;&quot; );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Debug variable used in pods_debug to count the instances debug is used</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>global $pods_debug;&nbsp;</div></li><li><div>$pods_debug = 0;&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Debugging common issues using this function saves a few lines and is compatible with</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $debug The error message to be thrown / displayed</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $die If set to true, a die() will occur, if set to (int) 2 then a wp_die() will occur</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $prefix</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_debug ( $debug = '_null', $die = false, $prefix = '_null' ) {&nbsp;</div></li><li><div>  global $pods_debug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pods_debug++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '_null' !== $prefix )&nbsp;</div></li><li><div>      var_dump( $prefix );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( '_null' !== $debug )&nbsp;</div></li><li><div>      var_dump( $debug );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      var_dump( 'Pods Debug #' . $pods_debug );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $debug = ob_get_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( false === strpos( $debug, &quot;&lt;pre class='xdebug-var-dump'&quot; ) && ( !ini_get( 'xdebug.overload_var_dump' ) && !ini_get( 'html_errors' ) ) ) {&nbsp;</div></li><li><div>      if ( !defined( 'DOING_AJAX' ) || !DOING_AJAX )&nbsp;</div></li><li><div>          $debug = esc_html( $debug );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $debug = '&lt;pre&gt;' . $debug . '&lt;/pre&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $debug = '&lt;e&gt;' . $debug;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 2 === $die )&nbsp;</div></li><li><div>      wp_die( $debug );&nbsp;</div></li><li><div>  elseif ( true === $die )&nbsp;</div></li><li><div>      die( $debug );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $debug;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if user has admin access</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $cap Additional capabilities to check</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether user has admin access</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_is_admin ( $cap = null ) {&nbsp;</div></li><li><div>  if ( is_user_logged_in() ) {&nbsp;</div></li><li><div>      $pods_admin_capabilities = array(&nbsp;</div></li><li><div>          'delete_users' <span class="comment">// default is_super_admin checks against this</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pods_admin_capabilities = apply_filters( 'pods_admin_capabilities', $pods_admin_capabilities, $cap );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_multisite() && is_super_admin() )&nbsp;</div></li><li><div>          return apply_filters( 'pods_is_admin', true, $cap, '_super_admin' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $cap ) )&nbsp;</div></li><li><div>          $cap = array();&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $cap = (array) $cap;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $cap = array_unique( array_filter( array_merge( $pods_admin_capabilities, $cap ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $cap as $capability ) {&nbsp;</div></li><li><div>          if ( current_user_can( $capability ) )&nbsp;</div></li><li><div>              return apply_filters( 'pods_is_admin', true, $cap, $capability );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'pods_is_admin', false, $cap, null );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if Developer Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether Developer Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_developer () {&nbsp;</div></li><li><div>  if ( defined( 'PODS_DEVELOPER' ) && PODS_DEVELOPER )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if Tableless Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether Tableless Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_tableless () {&nbsp;</div></li><li><div>  if ( defined( 'PODS_TABLELESS' ) && PODS_TABLELESS )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if Strict Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $include_debug Whether to include WP_DEBUG in strictness level</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether Strict Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_strict( $include_debug = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( defined( 'PODS_STRICT' ) && PODS_STRICT ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// @deprecated PODS_STRICT_MODE since 2.3.5</span>&nbsp;</div></li><li><div>  elseif ( pods_allow_deprecated( false ) && defined( 'PODS_STRICT_MODE' ) && PODS_STRICT_MODE ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( $include_debug && defined( 'WP_DEBUG' ) && WP_DEBUG ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if Deprecated Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $include_debug Whether to include strict mode</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether Deprecated Mode is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_allow_deprecated( $strict = true ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $strict && pods_strict() ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( !defined( 'PODS_DEPRECATED' ) || PODS_DEPRECATED ) {&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Determine if Pods API Caching is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether Pods API Caching is enabled</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.9</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_api_cache () {&nbsp;</div></li><li><div>  if ( defined( 'PODS_API_CACHE' ) && !PODS_API_CACHE )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Marks a function as deprecated and informs when it has been used.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * There is a hook deprecated_function_run that will be called that can be used</span>&nbsp;</div></li><li><div><span class="comment"> * to get the backtrace up to what file and function called the deprecated</span>&nbsp;</div></li><li><div><span class="comment"> * function.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * The current behavior is to trigger a user error if WP_DEBUG is true.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is to be used in every function that is deprecated.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @uses do_action() Calls 'deprecated_function_run' and passes the function name, what to use instead, </span>&nbsp;</div></li><li><div><span class="comment"> *   and the version the function was deprecated in.</span>&nbsp;</div></li><li><div><span class="comment"> * @uses apply_filters() Calls 'deprecated_function_trigger_error' and expects boolean value of true to do</span>&nbsp;</div></li><li><div><span class="comment"> *   trigger or false to not trigger error.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $function The function that was called</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $version The version of WordPress that deprecated the function</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $replacement Optional. The function that should have been called</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_deprecated ( $function, $version, $replacement = null ) {&nbsp;</div></li><li><div>  if ( !version_compare( $version, PODS_VERSION, '&lt;=' ) && !version_compare( $version . '-a-0', PODS_VERSION, '&lt;=' ) )&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  do_action( 'deprecated_function_run', $function, $replacement, $version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allow plugin to filter the output error trigger</span>&nbsp;</div></li><li><div>  if ( WP_DEBUG && apply_filters( 'deprecated_function_trigger_error', true ) ) {&nbsp;</div></li><li><div>      if ( !is_null( $replacement ) )&nbsp;</div></li><li><div>          $error = __( '%1$s has been &lt;strong&gt;deprecated&lt;/strong&gt; since Pods version %2$s! Use %3$s instead.', 'pods' );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $error = __( '%1$s has been &lt;strong&gt;deprecated&lt;/strong&gt; since Pods version %2$s with no alternative available.', 'pods' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      trigger_error( sprintf( $error, $function, $version, $replacement ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Inline help</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $text Help text</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $url Documentation URL</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_help ( $text, $url = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! wp_script_is( 'jquery-qtip2', 'registered' ) ) {&nbsp;</div></li><li><div>      wp_register_script( 'jquery-qtip2', PODS_URL . 'ui/js/jquery.qtip.min.js', array( 'jquery' ), '2.2' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( ! wp_script_is( 'jquery-qtip2', 'queue' ) && ! wp_script_is( 'jquery-qtip2', 'to_do' ) && ! wp_script_is( 'jquery-qtip2', 'done' ) ) {&nbsp;</div></li><li><div>      wp_enqueue_script( 'jquery-qtip2' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! wp_style_is( 'jquery-qtip2', 'registered' ) ) {&nbsp;</div></li><li><div>      wp_register_style( 'jquery-qtip2', PODS_URL . 'ui/css/jquery.qtip.min.css', array(), '2.2' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( ! wp_style_is( 'jquery-qtip2', 'queue' ) && ! wp_style_is( 'jquery-qtip2', 'to_do' ) && ! wp_style_is( 'jquery-qtip2', 'done' ) ) {&nbsp;</div></li><li><div>      wp_enqueue_style( 'jquery-qtip2' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! wp_script_is( 'pods-qtip-init', 'registered' ) ) {&nbsp;</div></li><li><div>      wp_register_script( 'pods-qtip-init', PODS_URL . 'ui/js/qtip.js', array(&nbsp;</div></li><li><div>          'jquery', &nbsp;</div></li><li><div>          'jquery-qtip2'&nbsp;</div></li><li><div> ), PODS_VERSION );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( ! wp_script_is( 'pods-qtip-init', 'queue' ) && ! wp_script_is( 'pods-qtip-init', 'to_do' ) && ! wp_script_is( 'pods-qtip-init', 'done' ) ) {&nbsp;</div></li><li><div>      wp_enqueue_script( 'pods-qtip-init' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_array( $text ) ) {&nbsp;</div></li><li><div>      if ( isset( $text[ 1 ] ) ) {&nbsp;</div></li><li><div>          $url = $text[ 1 ];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $text = $text[ 0 ];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'help' == $text ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 0 &lt; strlen( $url ) ) {&nbsp;</div></li><li><div>      $text .= '&lt;br /&gt;&lt;br /&gt;&lt;a href=&quot;' . $url . '&quot; target=&quot;_blank&quot;&gt;' . __( 'Find out more', 'pods' ) . ' &raquo;&lt;/a&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo '&lt;img src=&quot;' . esc_url( PODS_URL ) . 'ui/images/help.png&quot; alt=&quot;' . esc_attr( $text ) . '&quot; class=&quot;pods-icon pods-qtip&quot; /&gt;';&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check whether or not something is a specific version minimum and/or maximum</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $minimum_version Minimum version</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $comparison Comparison operator</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $maximum_version Maximum version</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_version_check ( $what, $minimum_version, $comparison = '&lt;=', $maximum_version = null ) {&nbsp;</div></li><li><div>  global $wp_version, $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'php' == $what )&nbsp;</div></li><li><div>      $version = phpversion();&nbsp;</div></li><li><div>  elseif ( 'mysql' === $what )&nbsp;</div></li><li><div>      $version = $wpdb-&gt;db_version();&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $version = $wp_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $minimum_version ) && !version_compare( $minimum_version, $version, $comparison ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $maximum_version ) && !version_compare( $version, $maximum_version, $comparison ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Run a Pods Helper</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $helper_name Helper Name</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $value Value to run Helper on</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name Field name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.7.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_helper ( $helper_name, $value = null, $name = null ) {&nbsp;</div></li><li><div>  return pods()-&gt;helper( $helper_name, $value, $name );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get the full URL of the current page</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Full URL of the current page</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_current_url () {&nbsp;</div></li><li><div>  $url = 'http';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $_SERVER[ 'HTTPS' ] ) && 'off' != $_SERVER[ 'HTTPS' ] && 0 != $_SERVER[ 'HTTPS' ] )&nbsp;</div></li><li><div>      $url = 'https';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $url .= ':<span class="comment">//' . $_SERVER[ 'HTTP_HOST' ] . $_SERVER[ 'REQUEST_URI' ];</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'pods_current_url', $url );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Find out if the current page has a valid $pods</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param object $object The Pod Object currently checking (optional)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function is_pod ( $object = null ) {&nbsp;</div></li><li><div>  global $pods, $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $object ) && isset( $object-&gt;pod ) && !empty( $object-&gt;pod ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  elseif ( is_object( $pods ) && isset( $pods-&gt;pod ) && !empty( $pods-&gt;pod ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  elseif ( is_object( $post ) && isset( $post-&gt;post_type ) && pods_api()-&gt;pod_exists( $post-&gt;post_type, 'post_type' ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * See if the current user has a certain privilege</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $privs The privilege name or names (array if multiple)</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $method The access method (&quot;AND&quot;, &quot;OR&quot;)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_access ( $privs, $method = 'OR' ) {&nbsp;</div></li><li><div>  <span class="comment">// Convert $privs to an array</span>&nbsp;</div></li><li><div>  $privs = (array) $privs;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Convert $method to uppercase</span>&nbsp;</div></li><li><div>  $method = strtoupper( $method );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $check = apply_filters( 'pods_access', null, $privs, $method );&nbsp;</div></li><li><div>  if ( null !== $check && is_bool( $check ) )&nbsp;</div></li><li><div>      return $check;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_user_logged_in() )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( pods_is_admin( array( 'pods', 'pods_content' ) ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Store approved privs when using &quot;AND&quot;</span>&nbsp;</div></li><li><div>  $approved_privs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through the user's roles</span>&nbsp;</div></li><li><div>  foreach ( $privs as $priv ) {&nbsp;</div></li><li><div>      if ( 0 === strpos( $priv, 'pod_' ) )&nbsp;</div></li><li><div>          $priv = pods_str_replace( 'pod_', 'pods_edit_', $priv, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 0 === strpos( $priv, 'manage_' ) )&nbsp;</div></li><li><div>          $priv = pods_str_replace( 'manage_', 'pods_', $priv, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( current_user_can( $priv ) ) {&nbsp;</div></li><li><div>          if ( 'OR' == $method )&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $approved_privs[ $priv ] = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( 'AND' == strtoupper( $method ) ) {&nbsp;</div></li><li><div>      foreach ( $privs as $priv ) {&nbsp;</div></li><li><div>          if ( 0 === strpos( $priv, 'pod_' ) )&nbsp;</div></li><li><div>              $priv = pods_str_replace( 'pod_', 'pods_edit_', $priv, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 0 === strpos( $priv, 'manage_' ) )&nbsp;</div></li><li><div>              $priv = pods_str_replace( 'manage_', 'pods_', $priv, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !isset( $approved_privs[ $priv ] ) )&nbsp;</div></li><li><div>              return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Shortcode support for use anywhere that support WP Shortcodes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $tags An associative array of shortcode properties</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $content A string that represents a template override</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.6.7</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_shortcode ( $tags, $content = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( defined( 'PODS_DISABLE_SHORTCODE' ) && PODS_DISABLE_SHORTCODE ) {&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// For enforcing pagination parameters when not displaying pagination</span>&nbsp;</div></li><li><div>  $page = 1;&nbsp;</div></li><li><div>  $offset = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $tags['page'] ) ) {&nbsp;</div></li><li><div>      $page = (int) $tags['page'];&nbsp;</div></li><li><div>      $page = max( $page, 1 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $tags['offset'] ) ) {&nbsp;</div></li><li><div>      $offset = (int) $tags['offset'];&nbsp;</div></li><li><div>      $offset = max( $offset, 0 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $defaults = array(&nbsp;</div></li><li><div>      'name' =&gt; null, &nbsp;</div></li><li><div>      'id' =&gt; null, &nbsp;</div></li><li><div>      'slug' =&gt; null, &nbsp;</div></li><li><div>      'select' =&gt; null, &nbsp;</div></li><li><div>      'join' =&gt; null, &nbsp;</div></li><li><div>      'order' =&gt; null, &nbsp;</div></li><li><div>      'orderby' =&gt; null, &nbsp;</div></li><li><div>      'limit' =&gt; null, &nbsp;</div></li><li><div>      'where' =&gt; null, &nbsp;</div></li><li><div>      'having' =&gt; null, &nbsp;</div></li><li><div>      'groupby' =&gt; null, &nbsp;</div></li><li><div>      'search' =&gt; true, &nbsp;</div></li><li><div>      'pagination' =&gt; false, &nbsp;</div></li><li><div>      'page' =&gt; null, &nbsp;</div></li><li><div>      'offset' =&gt; null, &nbsp;</div></li><li><div>      'filters' =&gt; false, &nbsp;</div></li><li><div>      'filters_label' =&gt; null, &nbsp;</div></li><li><div>      'filters_location' =&gt; 'before', &nbsp;</div></li><li><div>      'pagination_label' =&gt; null, &nbsp;</div></li><li><div>      'pagination_location' =&gt; 'after', &nbsp;</div></li><li><div>      'field' =&gt; null, &nbsp;</div></li><li><div>      'col' =&gt; null, &nbsp;</div></li><li><div>      'template' =&gt; null, &nbsp;</div></li><li><div>      'pods_page' =&gt; null, &nbsp;</div></li><li><div>      'helper' =&gt; null, &nbsp;</div></li><li><div>      'form' =&gt; null, &nbsp;</div></li><li><div>      'fields' =&gt; null, &nbsp;</div></li><li><div>      'label' =&gt; null, &nbsp;</div></li><li><div>      'thank_you' =&gt; null, &nbsp;</div></li><li><div>      'view' =&gt; null, &nbsp;</div></li><li><div>      'cache_mode' =&gt; 'none', &nbsp;</div></li><li><div>      'expires' =&gt; 0, &nbsp;</div></li><li><div>      'shortcodes' =&gt; false&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $tags ) )&nbsp;</div></li><li><div>      $tags = array_merge( $defaults, $tags );&nbsp;</div></li><li><div>  else&nbsp;</div></li><li><div>      $tags = $defaults;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tags = apply_filters( 'pods_shortcode', $tags );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $tags[ 'pagination' ] = filter_var($tags[ 'pagination' ], FILTER_VALIDATE_BOOLEAN);&nbsp;</div></li><li><div>  $tags[ 'search' ] = filter_var($tags[ 'pagination' ], FILTER_VALIDATE_BOOLEAN);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $content ) )&nbsp;</div></li><li><div>      $content = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Allow views only if not targeting a file path (must be within theme)</span>&nbsp;</div></li><li><div>  if ( 0 &lt; strlen( $tags[ 'view' ] ) ) {&nbsp;</div></li><li><div>      $return = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !file_exists( $tags[ 'view' ] ) ) {&nbsp;</div></li><li><div>          $return = pods_view( $tags[ 'view' ], null, (int) $tags[ 'expires' ], $tags[ 'cache_mode' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $tags[ 'shortcodes' ] && defined( 'PODS_SHORTCODE_ALLOW_SUB_SHORTCODES' ) && PODS_SHORTCODE_ALLOW_SUB_SHORTCODES ) {&nbsp;</div></li><li><div>              $return = do_shortcode( $return );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $tags[ 'name' ] ) ) {&nbsp;</div></li><li><div>      if ( in_the_loop() || is_singular() ) {&nbsp;</div></li><li><div>          $pod = pods( get_post_type(), get_the_ID(), false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty( $pod ) ) {&nbsp;</div></li><li><div>              $tags[ 'name' ] = get_post_type();&nbsp;</div></li><li><div>              $id = $tags[ 'id' ] = get_the_ID();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $tags[ 'name' ] ) )&nbsp;</div></li><li><div>          return '&lt;p&gt;Please provide a Pod name&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $tags[ 'col' ] ) ) {&nbsp;</div></li><li><div>      $tags[ 'field' ] = $tags[ 'col' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      unset( $tags[ 'col' ] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $tags[ 'order' ] ) ) {&nbsp;</div></li><li><div>      $tags[ 'orderby' ] = $tags[ 'order' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      unset( $tags[ 'order' ] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $content ) && empty( $tags[ 'pods_page' ] ) && empty( $tags[ 'template' ] ) && empty( $tags[ 'field' ] ) && empty( $tags[ 'form' ] ) ) {&nbsp;</div></li><li><div>      return '&lt;p&gt;Please provide either a template or field name&lt;/p&gt;';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset( $id ) ) {&nbsp;</div></li><li><div>      <span class="comment">// id &gt; slug (if both exist)</span>&nbsp;</div></li><li><div>      $id = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $tags[ 'slug' ] ) ) {&nbsp;</div></li><li><div>          $id = $tags[ 'slug' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( defined( 'PODS_SHORTCODE_ALLOW_EVALUATE_TAGS' ) && PODS_SHORTCODE_ALLOW_EVALUATE_TAGS ) {&nbsp;</div></li><li><div>              $id = pods_evaluate_tags( $id );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !empty( $tags[ 'id' ] ) ) {&nbsp;</div></li><li><div>          $id = $tags[ 'id' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( is_numeric( $id ) )&nbsp;</div></li><li><div>              $id = absint( $id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !isset( $pod ) )&nbsp;</div></li><li><div>      $pod = pods( $tags[ 'name' ], $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $pod ) )&nbsp;</div></li><li><div>      return '&lt;p&gt;Pod not found&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $found = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $id ) ) {&nbsp;</div></li><li><div>      $params = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !defined( 'PODS_DISABLE_SHORTCODE_SQL' ) || !PODS_DISABLE_SHORTCODE_SQL ) {&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'orderby' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'orderby' ] = $tags[ 'orderby' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'where' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'where' ] = $tags[ 'where' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( defined( 'PODS_SHORTCODE_ALLOW_EVALUATE_TAGS' ) && PODS_SHORTCODE_ALLOW_EVALUATE_TAGS ) {&nbsp;</div></li><li><div>                  $params[ 'where' ] = pods_evaluate_tags( $params[ 'where' ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'having' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'having' ] = $tags[ 'having' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( defined( 'PODS_SHORTCODE_ALLOW_EVALUATE_TAGS' ) && PODS_SHORTCODE_ALLOW_EVALUATE_TAGS ) {&nbsp;</div></li><li><div>                  $params[ 'having' ] = pods_evaluate_tags( $id );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'groupby' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'groupby' ] = $tags[ 'groupby' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'select' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'select' ] = $tags[ 'select' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( 0 &lt; strlen( $tags[ 'join' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'join' ] = $tags[ 'join' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Forms require params set</span>&nbsp;</div></li><li><div>      if ( ! empty( $params ) || empty( $tags[ 'form' ] ) ) {&nbsp;</div></li><li><div>          if ( !empty( $tags[ 'limit' ] ) ) {&nbsp;</div></li><li><div>              $params[ 'limit' ] = (int) $tags[ 'limit' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $params[ 'search' ] = $tags[ 'search' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $params[ 'pagination' ] = $tags[ 'pagination' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If we aren't displaying pagination, we need to enforce page/offset</span>&nbsp;</div></li><li><div>          if ( ! $params['pagination'] ) {&nbsp;</div></li><li><div>              $params['page'] = $page;&nbsp;</div></li><li><div>              $params['offset'] = $offset;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Force pagination on, we need it and we're enforcing page/offset</span>&nbsp;</div></li><li><div>              $params['pagination'] = true;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              <span class="comment">// If we are displaying pagination, allow page/offset override only if *set*</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $tags['page'] ) ) {&nbsp;</div></li><li><div>                  $params['page'] = (int) $tags['page'];&nbsp;</div></li><li><div>                  $params['page'] = max( $params['page'], 1 );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( isset( $tags['offset'] ) ) {&nbsp;</div></li><li><div>                  $params['offset'] = (int) $tags['offset'];&nbsp;</div></li><li><div>                  $params['offset'] = max( $params['offset'], 0 );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty( $tags[ 'cache_mode' ] ) && 'none' != $tags[ 'cache_mode' ] ) {&nbsp;</div></li><li><div>              $params[ 'cache_mode' ] = $tags[ 'cache_mode' ];&nbsp;</div></li><li><div>              $params[ 'expires' ] = (int) $tags[ 'expires' ];&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $params = apply_filters( 'pods_shortcode_findrecords_params', $params, $pod, $tags );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $pod-&gt;find( $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $found = $pod-&gt;total();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $tags[ 'form' ] ) ) {&nbsp;</div></li><li><div>      if ( 'user' == $pod-&gt;pod ) {&nbsp;</div></li><li><div>          <span class="comment">// Further hardening of User-based forms</span>&nbsp;</div></li><li><div>          if ( false !== strpos( $tags[ 'fields' ], '_capabilities' ) || false !== strpos( $tags[ 'fields' ], '_user_level' ) ) {&nbsp;</div></li><li><div>              return '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// Only explicitly allow user edit forms</span>&nbsp;</div></li><li><div>          elseif ( !empty( $id ) && ( !defined( 'PODS_SHORTCODE_ALLOW_USER_EDIT' ) || !PODS_SHORTCODE_ALLOW_USER_EDIT ) ) {&nbsp;</div></li><li><div>              return '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $pod-&gt;form( $tags[ 'fields' ], $tags[ 'label' ], $tags[ 'thank_you' ] );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( !empty( $tags[ 'field' ] ) ) {&nbsp;</div></li><li><div>      if ( empty( $tags[ 'helper' ] ) )&nbsp;</div></li><li><div>          $return = $pod-&gt;display( $tags[ 'field' ] );&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          $return = $pod-&gt;helper( $tags[ 'helper' ], $pod-&gt;field( $tags[ 'field' ] ), $tags[ 'field' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $tags[ 'shortcodes' ] && defined( 'PODS_SHORTCODE_ALLOW_SUB_SHORTCODES' ) && PODS_SHORTCODE_ALLOW_SUB_SHORTCODES ) {&nbsp;</div></li><li><div>          $return = do_shortcode( $return );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( !empty( $tags[ 'pods_page' ] ) && class_exists( 'Pods_Pages' ) ) {&nbsp;</div></li><li><div>      $pods_page = Pods_Pages::exists( $tags[ 'pods_page' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $pods_page ) )&nbsp;</div></li><li><div>          return '&lt;p&gt;Pods Page not found&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $return = Pods_Pages::content( true, $pods_page );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $tags[ 'shortcodes' ] && defined( 'PODS_SHORTCODE_ALLOW_SUB_SHORTCODES' ) && PODS_SHORTCODE_ALLOW_SUB_SHORTCODES ) {&nbsp;</div></li><li><div>          $return = do_shortcode( $return );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  ob_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $id ) && false !== $tags[ 'filters' ] && 'before' == $tags[ 'filters_location' ] )&nbsp;</div></li><li><div>      echo $pod-&gt;filters( $tags[ 'filters' ], $tags[ 'filters_label' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $id ) && 0 &lt; $found && true === $tags[ 'pagination' ] && in_array( $tags[ 'pagination_location' ], array( 'before', 'both' ) ) )&nbsp;</div></li><li><div>      echo $pod-&gt;pagination( $tags[ 'pagination_label' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  echo $pod-&gt;template( $tags[ 'template' ], $content );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $id ) && 0 &lt; $found && true === $tags[ 'pagination' ] && in_array( $tags[ 'pagination_location' ], array( 'after', 'both' ) ) )&nbsp;</div></li><li><div>      echo $pod-&gt;pagination( $tags[ 'pagination_label' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $id ) && false !== $tags[ 'filters' ] && 'after' == $tags[ 'filters_location' ] )&nbsp;</div></li><li><div>      echo $pod-&gt;filters( $tags[ 'filters' ], $tags[ 'filters_label' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $return = ob_get_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $tags[ 'shortcodes' ] && defined( 'PODS_SHORTCODE_ALLOW_SUB_SHORTCODES' ) && PODS_SHORTCODE_ALLOW_SUB_SHORTCODES ) {&nbsp;</div></li><li><div>      $return = do_shortcode( $return );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $return;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Form Shortcode support for use anywhere that support WP Shortcodes</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $tags An associative array of shortcode properties</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $content Not currently used</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return string</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_shortcode_form ( $tags, $content = null ) {&nbsp;</div></li><li><div>  $tags[ 'form' ] = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_shortcode( $tags );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Fork of WordPress do_shortcode that allows specifying which shortcodes are ran.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * Search content for shortcodes and filter shortcodes through their hooks.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * If there are no shortcode tags defined, then the content will be returned</span>&nbsp;</div></li><li><div><span class="comment"> * without any filtering. This might cause issues when plugins are disabled but</span>&nbsp;</div></li><li><div><span class="comment"> * the shortcode will still show up in the post or content.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.4.3</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @uses $shortcode_tags</span>&nbsp;</div></li><li><div><span class="comment"> * @uses get_shortcode_regex() Gets the search pattern for searching shortcodes.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $content Content to search for shortcodes</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $shortcodes Array of shortcodes to run</span>&nbsp;</div></li><li><div><span class="comment"> * @return string Content with shortcodes filtered out.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_do_shortcode( $content, $shortcodes ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  global $shortcode_tags;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// No shortcodes in content</span>&nbsp;</div></li><li><div>  if ( false === strpos( $content, '[' ) ) {&nbsp;</div></li><li><div>      return $content;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// No shortcodes registered</span>&nbsp;</div></li><li><div>  if ( empty( $shortcode_tags ) || !is_array( $shortcode_tags ) ) {&nbsp;</div></li><li><div>      return $content;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Store all shortcodes, to restore later</span>&nbsp;</div></li><li><div>  $temp_shortcode_tags = $shortcode_tags;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Loop through all shortcodes and remove those not being used right now</span>&nbsp;</div></li><li><div>  foreach ( $shortcode_tags as $tag =&gt; $callback ) {&nbsp;</div></li><li><div>      if ( ! in_array( $tag, $shortcodes ) ) {&nbsp;</div></li><li><div>          unset( $shortcode_tags[ $tag ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Build Shortcode regex pattern just for the shortcodes we want</span>&nbsp;</div></li><li><div>  $pattern = get_shortcode_regex();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Call shortcode callbacks just for the shortcodes we want</span>&nbsp;</div></li><li><div>  $content = preg_replace_callback( &quot;/$pattern/s&quot;, 'do_shortcode_tag', $content );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Restore all shortcode tags</span>&nbsp;</div></li><li><div>  $shortcode_tags = $temp_shortcode_tags;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $content;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if Pods is compatible with WP / PHP / MySQL or not</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_compatibility_check () {&nbsp;</div></li><li><div>  $compatible = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !pods_version_check( 'wp', PODS_WP_VERSION_MINIMUM ) ) {&nbsp;</div></li><li><div>      $compatible = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'admin_notices', 'pods_version_notice_wp' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !pods_version_check( 'php', PODS_PHP_VERSION_MINIMUM ) ) {&nbsp;</div></li><li><div>      $compatible = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'admin_notices', 'pods_version_notice_php' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !pods_version_check( 'mysql', PODS_MYSQL_VERSION_MINIMUM ) ) {&nbsp;</div></li><li><div>      $compatible = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'admin_notices', 'pods_version_notice_mysql' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $compatible;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Show WP notice if WP version is incompatible</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_version_notice_wp () {&nbsp;</div></li><li><div>  global $wp_version;&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error fade&quot;&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;&lt;?php _e( 'NOTICE', 'pods' ); ?&gt;:&lt;/strong&gt; Pods &lt;?php echo esc_html( PODS_VERSION ); ?&gt; &lt;?php _e( 'requires a minimum of', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;WordPress &lt;?php echo esc_html( PODS_WP_VERSION_MINIMUM ); ?&gt;+&lt;/strong&gt; &lt;?php _e( 'to function. You are currently running', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;WordPress &lt;?php echo esc_html( $wp_version ); ?&gt;&lt;/strong&gt; - &lt;?php _e( 'Please upgrade your WordPress to continue.', 'pods' ); ?&gt;&nbsp;</div></li><li><div>      &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Show WP notice if PHP version is incompatible</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_version_notice_php () {&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error fade&quot;&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;&lt;?php _e( 'NOTICE', 'pods' ); ?&gt;:&lt;/strong&gt; Pods &lt;?php echo esc_html( PODS_VERSION ); ?&gt; &lt;?php _e( 'requires a minimum of', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;PHP &lt;?php echo esc_html( PODS_PHP_VERSION_MINIMUM ); ?&gt;+&lt;/strong&gt; &lt;?php _e( 'to function. You are currently running', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;PHP &lt;?php echo esc_html( phpversion() ); ?&gt;&lt;/strong&gt; - &lt;?php _e( 'Please upgrade (or have your Hosting Provider upgrade it for you) your PHP version to continue.', 'pods' ); ?&gt;&nbsp;</div></li><li><div>      &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Show WP notice if MySQL version is incompatible</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_version_notice_mysql () {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>  $mysql = $wpdb-&gt;db_version();&nbsp;</div></li><li><div>?&gt;&nbsp;</div></li><li><div>  &lt;div class=&quot;error fade&quot;&gt;&nbsp;</div></li><li><div>      &lt;p&gt;&lt;strong&gt;&lt;?php _e( 'NOTICE', 'pods' ); ?&gt;:&lt;/strong&gt; Pods &lt;?php echo esc_html( PODS_VERSION ); ?&gt; &lt;?php _e( 'requires a minimum of', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;MySQL &lt;?php echo esc_html( PODS_MYSQL_VERSION_MINIMUM ); ?&gt;+&lt;/strong&gt; &lt;?php _e( 'to function. You are currently running', 'pods' ); ?&gt;&nbsp;</div></li><li><div>          &lt;strong&gt;MySQL &lt;?php echo esc_html( $mysql ); ?&gt;&lt;/strong&gt; - &lt;?php _e( 'Please upgrade (or have your Hosting Provider upgrade it for you) your MySQL version to continue.', 'pods' ); ?&gt;&nbsp;</div></li><li><div>      &lt;/p&gt;&nbsp;</div></li><li><div>  &lt;/div&gt;&nbsp;</div></li><li><div>&lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if a Function exists or File exists in Theme / Child Theme</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $function_or_file Function or file name to look for.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $function_name (optional) Function name to look for.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $file_dir (optional) Drectory to look into</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $file_name (optional) Filename to look for</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.12</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_function_or_file ( $function_or_file, $function_name = null, $file_dir = null, $file_name = null ) {&nbsp;</div></li><li><div>  $found = false;&nbsp;</div></li><li><div>  $function_or_file = (string) $function_or_file;&nbsp;</div></li><li><div>  if ( false !== $function_name ) {&nbsp;</div></li><li><div>      if ( null === $function_name )&nbsp;</div></li><li><div>          $function_name = $function_or_file;&nbsp;</div></li><li><div>      $function_name = str_replace( array(&nbsp;</div></li><li><div>          '__', &nbsp;</div></li><li><div>          '__', &nbsp;</div></li><li><div>          '__'&nbsp;</div></li><li><div> ), '_', preg_replace( '/[^a-z^A-Z^_][^a-z^A-Z^0-9^_]*/', '_', (string) $function_name ) );&nbsp;</div></li><li><div>      if ( function_exists( 'pods_custom_' . $function_name ) )&nbsp;</div></li><li><div>          $found = array( 'function' =&gt; 'pods_custom_' . $function_name );&nbsp;</div></li><li><div>      elseif ( function_exists( $function_name ) )&nbsp;</div></li><li><div>          $found = array( 'function' =&gt; $function_name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  if ( false !== $file_name && false === $found ) {&nbsp;</div></li><li><div>      if ( null === $file_name )&nbsp;</div></li><li><div>          $file_name = $function_or_file;&nbsp;</div></li><li><div>      $file_name = str_replace( array(&nbsp;</div></li><li><div>          '__', &nbsp;</div></li><li><div>          '__', &nbsp;</div></li><li><div>          '__'&nbsp;</div></li><li><div> ), '_', preg_replace( '/[^a-z^A-Z^0-9^_]*/', '_', (string) $file_name ) ) . '.php';&nbsp;</div></li><li><div>      $custom_location = apply_filters( 'pods_file_directory', null, $function_or_file, $function_name, $file_dir, $file_name );&nbsp;</div></li><li><div>      if ( defined( 'PODS_FILE_DIRECTORY' ) && false !== PODS_FILE_DIRECTORY )&nbsp;</div></li><li><div>          $custom_location = PODS_FILE_DIRECTORY;&nbsp;</div></li><li><div>      if ( !empty( $custom_location ) && locate_template( trim( $custom_location, '/' ) . '/' . ( !empty( $file_dir ) ? $file_dir . '/' : '' ) . $file_name ) )&nbsp;</div></li><li><div>          $found = array( 'file' =&gt; trim( $custom_location, '/' ) . '/' . ( !empty( $file_dir ) ? $file_dir . '/' : '' ) . $file_name );&nbsp;</div></li><li><div>      elseif ( locate_template( 'pods/' . ( !empty( $file_dir ) ? $file_dir . '/' : '' ) . $file_name ) )&nbsp;</div></li><li><div>          $found = array( 'file' =&gt; 'pods/' . ( !empty( $file_dir ) ? $file_dir . '/' : '' ) . $file_name );&nbsp;</div></li><li><div>      elseif ( locate_template( 'pods-' . ( !empty( $file_dir ) ? $file_dir . '-' : '' ) . $file_name ) )&nbsp;</div></li><li><div>          $found = array( 'file' =&gt; 'pods-' . ( !empty( $file_dir ) ? $file_dir . '-' : '' ) . $file_name );&nbsp;</div></li><li><div>      elseif ( locate_template( 'pods/' . ( !empty( $file_dir ) ? $file_dir . '-' : '' ) . $file_name ) )&nbsp;</div></li><li><div>          $found = array( 'file' =&gt; 'pods/' . ( !empty( $file_dir ) ? $file_dir . '-' : '' ) . $file_name );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return apply_filters( 'pods_function_or_file', $found, $function_or_file, $function_name, $file_name );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Redirects to another page.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $location The path to redirect to</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $status Status code to use</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_redirect ( $location, $status = 302 ) {&nbsp;</div></li><li><div>  if ( !headers_sent() ) {&nbsp;</div></li><li><div>      wp_redirect( $location, $status );&nbsp;</div></li><li><div>      die();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  else {&nbsp;</div></li><li><div>      die( '&lt;script type=&quot;text/javascript&quot;&gt;'&nbsp;</div></li><li><div>          . 'document.location = &quot;' . str_replace( '&amp;', '&', esc_js( $location ) ) . '&quot;;'&nbsp;</div></li><li><div>          . '&lt;/script&gt;' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if a user has permission to be doing something based on standard permission options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether the user has permissions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0.5</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_permission ( $options ) {&nbsp;</div></li><li><div>  global $current_user;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  get_currentuserinfo();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $permission = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $options[ 'options' ] ) )&nbsp;</div></li><li><div>      $options = $options[ 'options' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( pods_is_admin() )&nbsp;</div></li><li><div>      $permission = true;&nbsp;</div></li><li><div>  elseif ( 0 == pods_v( 'restrict_role', $options, 0 ) && 0 == pods_v( 'restrict_capability', $options, 0 ) && 0 == pods_v( 'admin_only', $options, 0 ) )&nbsp;</div></li><li><div>      $permission = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$permission && 1 == pods_v( 'restrict_role', $options, 0 ) ) {&nbsp;</div></li><li><div>      $roles = pods_v( 'roles_allowed', $options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !is_array( $roles ) )&nbsp;</div></li><li><div>          $roles = explode( ', ', $roles );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $roles = array_unique( array_filter( $roles ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach( $roles as $role ) {&nbsp;</div></li><li><div>          if ( is_user_logged_in() && in_array( $role, $current_user-&gt;roles ) ) {&nbsp;</div></li><li><div>              $permission = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$permission && 1 == pods_v( 'restrict_capability', $options, 0 ) ) {&nbsp;</div></li><li><div>      $capabilities = pods_v( 'capability_allowed', $options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !is_array( $capabilities ) )&nbsp;</div></li><li><div>          $capabilities = explode( ', ', $capabilities );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $capabilities = array_unique( array_filter( $capabilities ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach( $capabilities as $capability ) {&nbsp;</div></li><li><div>          $must_have_capabilities = explode( '&&', $capability );&nbsp;</div></li><li><div>          $must_have_capabilities = array_unique( array_filter( $must_have_capabilities ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $must_have_permission = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $must_have_capabilities as $must_have_capability ) {&nbsp;</div></li><li><div>              if ( !current_user_can( $must_have_capability ) ) {&nbsp;</div></li><li><div>                  $must_have_permission = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $must_have_permission && is_user_logged_in() ) {&nbsp;</div></li><li><div>              $permission = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $permission;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if permissions are restricted</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool Whether the permissions are restricted</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.4</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_has_permissions ( $options ) {&nbsp;</div></li><li><div>  $permission = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( isset( $options[ 'options' ] ) )&nbsp;</div></li><li><div>      $options = $options[ 'options' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 1 == pods_v( 'restrict_role', $options, 0 ) || 1 == pods_v( 'restrict_capability', $options, 0 ) || 1 == pods_v( 'admin_only', $options, 0 ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * A fork of get_page_by_title that excludes items unavailable via access rights (by status)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_page_by_title</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $title Title of item to get</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $output Optional. Output type. OBJECT, ARRAY_N, or ARRAY_A. Default OBJECT.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type Post Type</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $status Post statuses to include (default is what user has access to)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return WP_Post|null WP_Post on success or null on failure</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.4</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_by_title ( $title, $output = OBJECT, $type = 'page', $status = null ) {&nbsp;</div></li><li><div>  <span class="comment">// @todo support Pod item lookups, not just Post Types</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * @var $wpdb WPDB</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( $status ) ) {&nbsp;</div></li><li><div>      $status = array(&nbsp;</div></li><li><div>          'publish'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( current_user_can( 'read_private_' . $type . 's') )&nbsp;</div></li><li><div>          $status[] = 'private';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( current_user_can( 'edit_' . $type . 's' ) )&nbsp;</div></li><li><div>          $status[] = 'draft';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $status = (array) $status;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $status_sql = ' AND `post_status` IN ( %s' . str_repeat( ', %s', count( $status ) -1 ) . ' )';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $orderby_sql = ' ORDER BY ( `post_status` = %s ) DESC' . str_repeat( ', ( `post_status` = %s ) DESC', count( $status ) - 1 ) . ', `ID` DESC';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $prepared = array_merge( array( $title, $type ), $status, $status ); <span class="comment">// once for WHERE, once for ORDER BY</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $page = $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT `ID` FROM `{$wpdb-&gt;posts}` WHERE `post_title` = %s AND `post_type` = %s&quot; . $status_sql . $orderby_sql, $prepared ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $page )&nbsp;</div></li><li><div>      return get_post( $page, $output );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return null;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a field value from a Pod</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $pod The pod name</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $id (optional) The ID or slug, to load a single record; Provide array of $params to run 'find'</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $name The field name, or an associative array of parameters</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $single (optional) For tableless fields, to return the whole array or the just the first item</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Field value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_field ( $pod, $id = false, $name = null, $single = false ) {&nbsp;</div></li><li><div>  <span class="comment">// allow for pods_field( 'field_name' );</span>&nbsp;</div></li><li><div>  if ( null === $name ) {&nbsp;</div></li><li><div>      $name = $pod;&nbsp;</div></li><li><div>      $single = (boolean) $id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pod = get_post_type();&nbsp;</div></li><li><div>      $id = get_the_ID();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pod = pods( $pod, $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $pod ) ) {&nbsp;</div></li><li><div>      return $pod-&gt;field( $name, $single );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return null;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a field display value from a Pod</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $pod The pod name</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $id (optional) The ID or slug, to load a single record; Provide array of $params to run 'find'</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $name The field name, or an associative array of parameters</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $single (optional) For tableless fields, to return the whole array or the just the first item</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Field value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_field_display ( $pod, $id = false, $name = null, $single = false ) {&nbsp;</div></li><li><div>  <span class="comment">// allow for pods_field_display( 'field_name' );</span>&nbsp;</div></li><li><div>  if ( null === $name ) {&nbsp;</div></li><li><div>      $name = $pod;&nbsp;</div></li><li><div>      $single = (boolean) $id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pod = get_post_type();&nbsp;</div></li><li><div>      $id = get_the_ID();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $pod = pods( $pod, $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( is_object( $pod ) ) {&nbsp;</div></li><li><div>      return $pod-&gt;display( $name, $single );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return null;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a field raw value from a Pod</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $pod The pod name</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $id (optional) The ID or slug, to load a single record; Provide array of $params to run 'find'</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $name The field name, or an associative array of parameters</span>&nbsp;</div></li><li><div><span class="comment"> * @param boolean $single (optional) For tableless fields, to return the whole array or the just the first item</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return mixed Field value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_field_raw ( $pod, $id = false, $name = null, $single = false ) {&nbsp;</div></li><li><div>  <span class="comment">// allow for pods_field_raw( 'field_name' );</span>&nbsp;</div></li><li><div>  if ( null === $name ) {&nbsp;</div></li><li><div>      $name = $pod;&nbsp;</div></li><li><div>      $single = (boolean) $id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pod = get_post_type();&nbsp;</div></li><li><div>      $id = get_the_ID();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods( $pod, $id )-&gt;raw( $name, $single );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::set</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value Value to add to the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $expires (optional) Time in seconds for the cache to expire, if 0 no expiration.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $cache_mode (optional) Decides the caching method to use for the view.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_view_set ( $key, $value, $expires = 0, $cache_mode = 'cache', $group = '' ) {&nbsp;</div></li><li><div>  require_once( PODS_DIR . 'classes/PodsView.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return PodsView::set( $key, $value, $expires, $cache_mode, $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::get</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $cache_mode (optional) Decides the caching method to use for the view.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback (optional) Callback function to run to set the value if not cached</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_view_get ( $key, $cache_mode = 'cache', $group = '', $callback = null ) {&nbsp;</div></li><li><div>  require_once( PODS_DIR . 'classes/PodsView.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return PodsView::get( $key, $cache_mode, $group, $callback );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Clear a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $cache_mode (optional) Decides the caching method to use for the view.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_view_clear ( $key = true, $cache_mode = 'cache', $group = '' ) {&nbsp;</div></li><li><div>  require_once( PODS_DIR . 'classes/PodsView.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return PodsView::clear( $key, $cache_mode, $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::set</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value Value to add to the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $expires (optional) Time in seconds for the cache to expire, if 0 no expiration.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_cache_set ( $key, $value, $group = '', $expires = 0) {&nbsp;</div></li><li><div>  return pods_view_set( $key, $value, $expires, 'cache', $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::get</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback (optional) Callback function to run to set the value if not cached</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_cache_get ( $key, $group = '', $callback = null ) {&nbsp;</div></li><li><div>  return pods_view_get( $key, 'cache', $group, $callback );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Clear a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_cache_clear ( $key = true, $group = '' ) {&nbsp;</div></li><li><div>  return pods_view_clear( $key, 'cache', $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::set</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value Value to add to the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $expires (optional) Time in seconds for the cache to expire, if 0 no expiration.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_transient_set ( $key, $value, $expires = 0 ) {&nbsp;</div></li><li><div>  return pods_view_set( $key, $value, $expires, 'transient' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::get</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback (optional) Callback function to run to set the value if not cached</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_transient_get ( $key, $callback = null ) {&nbsp;</div></li><li><div>  return pods_view_get( $key, 'transient', '', $callback );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Clear a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_transient_clear ( $key = true ) {&nbsp;</div></li><li><div>  return pods_view_clear( $key, 'transient' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::set</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value Value to add to the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $expires (optional) Time in seconds for the cache to expire, if 0 no expiration.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_site_transient_set ( $key, $value, $expires = 0 ) {&nbsp;</div></li><li><div>  return pods_view_set( $key, $value, $expires, 'site-transient' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::get</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback (optional) Callback function to run to set the value if not cached</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_site_transient_get ( $key, $callback = null ) {&nbsp;</div></li><li><div>  return pods_view_get( $key, 'site-transient', '', $callback );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Clear a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_site_transient_clear ( $key = true ) {&nbsp;</div></li><li><div>  return pods_view_clear( $key, 'site-transient' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Set a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::set</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param mixed $value Value to add to the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param int $expires (optional) Time in seconds for the cache to expire, if 0 no expiration.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|string|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_option_cache_set ( $key, $value, $expires = 0, $group = '' ) {&nbsp;</div></li><li><div>  return pods_view_set( $key, $value, $expires, 'option-cache', $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Get a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::get</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $callback (optional) Callback function to run to set the value if not cached</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool|mixed|null|void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_option_cache_get ( $key, $group = '', $callback = null ) {&nbsp;</div></li><li><div>  return pods_view_get( $key, 'option-cache', $group, $callback );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Clear a cached value</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsView::clear</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|bool $key Key for the cache</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $group (optional) Key for the group</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_option_cache_clear ( $key = true, $group = '' ) {&nbsp;</div></li><li><div>  return pods_view_clear( $key, 'option-cache', $group );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Scope variables and include a template like get_template_part that's child-theme aware</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see get_template_part</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $template Template names (see get_template_part)</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $data Data to scope to the include</span>&nbsp;</div></li><li><div><span class="comment"> * @param bool $return Whether to return the output (echo by default)</span>&nbsp;</div></li><li><div><span class="comment"> * @return string|null Template output</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.9</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_template_part ( $template, $data = null, $return = false ) {&nbsp;</div></li><li><div>  $part = PodsView::get_template_part( $template, $data );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$return ) {&nbsp;</div></li><li><div>      echo $part;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return null;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $part;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a new Pod outside of the DB</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsMeta::register</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type The pod type ('post_type', 'taxonomy', 'media', 'user', 'comment')</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name The pod name</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $object (optional) Pod array, including any 'fields' arrays</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|boolean Pod data or false if unsuccessful</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_register_type ( $type, $name, $object = null ) {&nbsp;</div></li><li><div>  if ( empty( $object ) )&nbsp;</div></li><li><div>      $object = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $name ) )&nbsp;</div></li><li><div>      $object[ 'name' ] = $name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_meta()-&gt;register( $type, $object );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a new Pod field outside of the DB</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsMeta::register_field</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $pod The pod name or array of pod names</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name The name of the Pod</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $object (optional) Pod array, including any 'fields' arrays</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|boolean Field data or false if unsuccessful</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.1</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_register_field ( $pod, $name, $field = null ) {&nbsp;</div></li><li><div>  if ( empty( $field ) )&nbsp;</div></li><li><div>      $field = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( $name ) )&nbsp;</div></li><li><div>      $field[ 'name' ] = $name;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return pods_meta()-&gt;register_field( $pod, $field );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a new Pod field type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsForm::register_field_type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type The new field type identifier</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $file The new field type class file location</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array Field type array</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_register_field_type ( $type, $file = null ) {&nbsp;</div></li><li><div>  return PodsForm::register_field_type( $type, $file );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Register a related object</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $name Object name</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $label Object label</span>&nbsp;</div></li><li><div><span class="comment"> * @param array $options Object options</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return array|boolean Object array or false if unsuccessful</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_register_related_object ( $name, $label, $options = null ) {&nbsp;</div></li><li><div>  return PodsForm::field_method( 'pick', 'register_related_object', $name, $label, $options );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Require a component (always-on)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $component Component ID</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_require_component ( $component ) {&nbsp;</div></li><li><div>  add_filter( 'pods_component_require_' . $component, '__return_true' );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Add a meta group of fields to add/edit forms</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @see PodsMeta::group_add</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $pod The pod or type of element to attach the group to.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $label Title of the edit screen section, visible to user.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string|array $fields Either a comma separated list of text fields or an associative array containing field information.</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $context (optional) The part of the page where the edit screen section should be shown ('normal', 'advanced', or 'side').</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $priority (optional) The priority within the context where the boxes should show ('high', 'core', 'default' or 'low').</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $type (optional) Type of the post to attach to.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> * @link http://pods.io/docs/pods-group-add/</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_group_add ( $pod, $label, $fields, $context = 'normal', $priority = 'default', $type = null ) {&nbsp;</div></li><li><div>  if ( !is_array( $pod ) && null !== $type ) {&nbsp;</div></li><li><div>      $pod = array(&nbsp;</div></li><li><div>          'name' =&gt; $pod, &nbsp;</div></li><li><div>          'type' =&gt; $type&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  pods_meta()-&gt;group_add( $pod, $label, $fields, $context, $priority );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if a plugin is active on non-admin pages (is_plugin_active() only available in admin)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $plugin Plugin name.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_is_plugin_active ( $plugin ) {&nbsp;</div></li><li><div>  $active = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( function_exists( 'is_plugin_active' ) )&nbsp;</div></li><li><div>      $active = is_plugin_active( $plugin );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !$active ) {&nbsp;</div></li><li><div>      $active_plugins = (array) get_option( 'active_plugins', array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( in_array( $plugin, $active_plugins ) )&nbsp;</div></li><li><div>          $active = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( !$active && is_multisite() ) {&nbsp;</div></li><li><div>          $plugins = get_site_option( 'active_sitewide_plugins' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $plugins[ $plugin ] ) )&nbsp;</div></li><li><div>              $active = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $active;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Check if Pods no conflict is on or not</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object_type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_no_conflict_check ( $object_type = 'post' ) {&nbsp;</div></li><li><div>  if ( 'post_type' == $object_type )&nbsp;</div></li><li><div>      $object_type = 'post';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( PodsInit::$no_conflict ) && isset( PodsInit::$no_conflict[ $object_type ] ) && !empty( PodsInit::$no_conflict[ $object_type ] ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Turn off conflicting / recursive actions for an object type that Pods hooks into</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object_type</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_no_conflict_on ( $object_type = 'post', $object = null ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'post_type' == $object_type )&nbsp;</div></li><li><div>      $object_type = 'post';&nbsp;</div></li><li><div>  elseif ( 'term' == $object_type )&nbsp;</div></li><li><div>      $object_type = 'taxonomy';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !empty( PodsInit::$no_conflict ) && isset( PodsInit::$no_conflict[ $object_type ] ) && !empty( PodsInit::$no_conflict[ $object_type ] ) )&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_object( PodsInit::$meta ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $no_conflict = array(&nbsp;</div></li><li><div>      'filter' =&gt; array()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Filters = Usually get/update/delete meta functions</span>&nbsp;</div></li><li><div>  <span class="comment">// Actions = Usually insert/update/save/delete object functions</span>&nbsp;</div></li><li><div>  if ( 'post' == $object_type ) {&nbsp;</div></li><li><div>      if ( apply_filters( 'pods_meta_handler', true, 'post' ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Handle *_post_meta</span></span>&nbsp;</div></li><li><div>          if ( apply_filters( 'pods_meta_handler_get', true, 'post' ) ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array(&nbsp;</div></li><li><div>                  array( 'get_post_metadata', array( PodsInit::$meta, 'get_post_meta' ), 10, 4 ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !pods_tableless() ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array_merge( $no_conflict[ 'filter' ], array(&nbsp;</div></li><li><div>                  array( 'add_post_metadata', array( PodsInit::$meta, 'add_post_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'update_post_metadata', array( PodsInit::$meta, 'update_post_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'delete_post_metadata', array( PodsInit::$meta, 'delete_post_meta' ), 10, 5 )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $no_conflict[ 'action' ] = array(&nbsp;</div></li><li><div>          array( 'transition_post_status', array( PodsInit::$meta, 'save_post_detect_new' ), 10, 3 ), &nbsp;</div></li><li><div>          array( 'save_post', array( PodsInit::$meta, 'save_post' ), 10, 2 )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 'taxonomy' == $object_type ) {&nbsp;</div></li><li><div>      if ( apply_filters( 'pods_meta_handler', true, 'term' ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">// Handle *_term_meta</span></span></span>&nbsp;</div></li><li><div>          if ( apply_filters( 'pods_meta_handler_get', true, 'term' ) ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $no_conflict[ 'action' ] = array(&nbsp;</div></li><li><div>              array( 'edited_term', array( PodsInit::$meta, 'save_taxonomy' ), 10, 3 ), &nbsp;</div></li><li><div>              array( 'create_term', array( PodsInit::$meta, 'save_taxonomy' ), 10, 3 )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 'media' == $object_type ) {&nbsp;</div></li><li><div>      $no_conflict[ 'filter' ] = array(&nbsp;</div></li><li><div>          array( 'wp_update_attachment_metadata', array( PodsInit::$meta, 'save_media' ), 10, 2 )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( apply_filters( 'pods_meta_handler', true, 'post' ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Handle *_post_meta</span></span>&nbsp;</div></li><li><div>          if ( apply_filters( 'pods_meta_handler_get', true, 'post' ) ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array_merge( $no_conflict[ 'filter' ], array(&nbsp;</div></li><li><div>                  array( 'get_post_metadata', array( PodsInit::$meta, 'get_post_meta' ), 10, 4 )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !pods_tableless() ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array_merge( $no_conflict[ 'filter' ], array(&nbsp;</div></li><li><div>                  array( 'add_post_metadata', array( PodsInit::$meta, 'add_post_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'update_post_metadata', array( PodsInit::$meta, 'update_post_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'delete_post_metadata', array( PodsInit::$meta, 'delete_post_meta' ), 10, 5 )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $no_conflict[ 'action' ] = array();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 'user' == $object_type ) {&nbsp;</div></li><li><div>      if ( apply_filters( 'pods_meta_handler', true, 'user' ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">// Handle *_term_meta</span></span></span>&nbsp;</div></li><li><div>          if ( apply_filters( 'pods_meta_handler_get', true, 'user' ) ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array(&nbsp;</div></li><li><div>                  array( 'get_user_metadata', array( PodsInit::$meta, 'get_user_meta' ), 10, 4 ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !pods_tableless() ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array_merge( $no_conflict[ 'filter' ], array(&nbsp;</div></li><li><div>                  array( 'add_user_metadata', array( PodsInit::$meta, 'add_user_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'update_user_metadata', array( PodsInit::$meta, 'update_user_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'delete_user_metadata', array( PodsInit::$meta, 'delete_user_meta' ), 10, 5 )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $no_conflict[ 'action' ] = array(&nbsp;</div></li><li><div>          <span class="comment">//array( 'user_register', array( PodsInit::$meta, 'save_user' ) ), </span>&nbsp;</div></li><li><div>          array( 'profile_update', array( PodsInit::$meta, 'save_user' ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 'comment' == $object_type ) {&nbsp;</div></li><li><div>      if ( apply_filters( 'pods_meta_handler', true, 'comment' ) ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment"><span class="comment">// Handle *_term_meta</span></span></span>&nbsp;</div></li><li><div>          if ( apply_filters( 'pods_meta_handler_get', true, 'comment' ) ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array(&nbsp;</div></li><li><div>                  array( 'get_comment_metadata', array( PodsInit::$meta, 'get_comment_meta' ), 10, 4 ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !pods_tableless() ) {&nbsp;</div></li><li><div>              $no_conflict[ 'filter' ] = array_merge( $no_conflict[ 'filter' ], array(&nbsp;</div></li><li><div>                  array( 'add_comment_metadata', array( PodsInit::$meta, 'add_comment_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'update_comment_metadata', array( PodsInit::$meta, 'update_comment_meta' ), 10, 5 ), &nbsp;</div></li><li><div>                  array( 'delete_comment_metadata', array( PodsInit::$meta, 'delete_comment_meta' ), 10, 5 )&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $no_conflict[ 'action' ] = array(&nbsp;</div></li><li><div>          array( 'pre_comment_approved', array( PodsInit::$meta, 'validate_comment' ), 10, 2 ), &nbsp;</div></li><li><div>          array( 'comment_post', array( PodsInit::$meta, 'save_comment' ) ), &nbsp;</div></li><li><div>          array( 'edit_comment', array( PodsInit::$meta, 'save_comment' ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  elseif ( 'settings' == $object_type ) {&nbsp;</div></li><li><div>      $no_conflict[ 'filter' ] = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// @todo Better handle settings conflicts apart from each other</span>&nbsp;</div></li><li><div>      <span class="comment">/**if ( empty( $object ) ) {</span>&nbsp;</div></li><li><div><span class="comment">          foreach ( PodsMeta::$settings as $setting_pod ) {</span>&nbsp;</div></li><li><div><span class="comment">              foreach ( $setting_pod[ 'fields' ] as $option ) {</span>&nbsp;</div></li><li><div><span class="comment">                  $no_conflict[ 'filter' ][] = array( 'pre_option_' . $setting_pod[ 'name' ] . '_' . $option[ 'name' ], array( PodsInit::$meta, 'get_option' ), 10, 1 );</span>&nbsp;</div></li><li><div><span class="comment">                  $no_conflict[ 'filter' ][] = array( 'pre_update_option_' . $setting_pod[ 'name' ] . '_' . $option[ 'name' ], array( PodsInit::$meta, 'update_option' ), 10, 2 );</span>&nbsp;</div></li><li><div><span class="comment">              }</span>&nbsp;</div></li><li><div><span class="comment">          }</span>&nbsp;</div></li><li><div><span class="comment">      }</span>&nbsp;</div></li><li><div><span class="comment">      elseif ( isset( PodsMeta::$settings[ $object ] ) ) {</span>&nbsp;</div></li><li><div><span class="comment">          foreach ( PodsMeta::$settings[ $object ][ 'fields' ] as $option ) {</span>&nbsp;</div></li><li><div><span class="comment">              $no_conflict[ 'filter' ][] = array( 'pre_option_' . $object . '_' . $option[ 'name' ], array( PodsInit::$meta, 'get_option' ), 10, 1 );</span>&nbsp;</div></li><li><div><span class="comment">              $no_conflict[ 'filter' ][] = array( 'pre_update_option_' . $object . '_' . $option[ 'name' ], array( PodsInit::$meta, 'update_option' ), 10, 2 );</span>&nbsp;</div></li><li><div><span class="comment">          }</span>&nbsp;</div></li><li><div><span class="comment">      }*/</span>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $conflicted = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $no_conflict as $action_filter =&gt; $conflicts ) {&nbsp;</div></li><li><div>      foreach ( $conflicts as $k =&gt; $args ) {&nbsp;</div></li><li><div>          if ( call_user_func_array( 'has_' . $action_filter, array_slice( $args, 0, 2 ) ) ) {&nbsp;</div></li><li><div>              call_user_func_array( 'remove_' . $action_filter, array_slice( $args, 0, 3 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $conflicted = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              unset( $no_conflict[ $action_filter ][ $k ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $conflicted ) {&nbsp;</div></li><li><div>      PodsInit::$no_conflict[ $object_type ] = $no_conflict;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Turn on actions after running code during pods_conflict</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @param string $object_type</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @return bool</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.0</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_no_conflict_off ( $object_type = 'post' ) {&nbsp;</div></li><li><div>  if ( 'post_type' == $object_type )&nbsp;</div></li><li><div>      $object_type = 'post';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( empty( PodsInit::$no_conflict ) || !isset( PodsInit::$no_conflict[ $object_type ] ) || empty( PodsInit::$no_conflict[ $object_type ] ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( !is_object( PodsInit::$meta ) )&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $no_conflict = PodsInit::$no_conflict[ $object_type ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $conflicted = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  foreach ( $no_conflict as $action_filter =&gt; $conflicts ) {&nbsp;</div></li><li><div>      foreach ( $conflicts as $args ) {&nbsp;</div></li><li><div>          if ( !call_user_func_array( 'has_' . $action_filter, array_slice( $args, 0, 2 ) ) ) {&nbsp;</div></li><li><div>              call_user_func_array( 'add_' . $action_filter, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $conflicted = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $conflicted ) {&nbsp;</div></li><li><div>      unset( PodsInit::$no_conflict[ $object_type ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return true;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return false;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Safely start a new session (without whitescreening on certain hosts, </span>&nbsp;</div></li><li><div><span class="comment"> * which have no session path or isn't writable)</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 2.3.10</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function pods_session_start() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $save_path = session_save_path();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Check if headers were sent</span>&nbsp;</div></li><li><div>  if ( false !== headers_sent() ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Allow for bypassing Pods session autostarting</span>&nbsp;</div></li><li><div>  elseif ( defined( 'PODS_SESSION_AUTO_START' ) && !PODS_SESSION_AUTO_START ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Allow for non-file based sessions, like Memcache</span>&nbsp;</div></li><li><div>  elseif ( 0 === strpos( $save_path, 'tcp:<span class="comment">//' ) ) {</span>&nbsp;</div></li><li><div>      <span class="comment">// This is OK, but we don't want to check if file_exists on next statement</span>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Check if session path exists and can be written to, avoiding PHP fatal errors</span>&nbsp;</div></li><li><div>  elseif ( empty( $save_path ) || !@file_exists( $save_path ) || !is_writable( $save_path ) ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>  <span class="comment">// Check if session ID is already set</span>&nbsp;</div></li><li><div>  elseif ( '' != session_id() ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Start session</span>&nbsp;</div></li><li><div>  @session_start();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Pods - Custom Content Types and Fields</li><li><span></span>2.6</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>