<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.9.14.22" data-slug="gravity-forms" data-type="class" data-id="72805"><head xmlns="http://www.w3.org/1999/xhtml"><title> gfformsettings | class | Gravity Forms | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="GFFormSettings, class, plugin, gravity-forms, 1.9.14.22" /><meta name="description" content="The Gravity Forms GFFormSettings class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=dc2e9c47a54f7748149c151153636a4a' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/gfform_settings/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfform_settings%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfform_settings%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-1.9.14.22-class-gfform_settings","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="gfform_settings" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms." href="http://hookr.io/plugins/gravity-forms/" class="plugin"><span property="name">gravity-forms</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.9.14.22." href="http://hookr.io/plugins/gravity-forms/1.9.14.22/" class="H_VERSION"><span property="name">1.9.14.22</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">gfform_settings</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="793"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/all/" title="All">All <span class="count badge">793</span></a></li><li class="" data-id="new" data-count="458"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/new/" title="New">New <span class="count badge">458</span></a></li><li class="" data-id="hooks" data-count="603"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/hooks/" title="Hooks">Hooks <span class="count badge">603</span></a></li><li class="" data-id="action" data-count="198"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/actions/" title="Actions">Actions <span class="count badge">198</span></a></li><li class="" data-id="filter" data-count="405"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/filters/" title="Filters">Filters <span class="count badge">405</span></a></li><li class="active" data-id="class" data-count="107"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/" title="Classes">Classes <span class="count badge">107</span></a></li><li class="" data-id="constant" data-count="48"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/constants/" title="Constants">Constants <span class="count badge">48</span></a></li><li class="" data-id="function" data-count="33"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/functions/" title="Functions">Functions <span class="count badge">33</span></a></li><li class="" data-id="shortcode" data-count="2"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">2</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>GFFormSettings</strong></h1><p>The Gravity Forms <strong>GFFormSettings</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/files/form-settings/" class="file">/form_settings.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="7" class="block" start="7"><li><div>class GFFormSettings {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function form_settings_page() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $subview = rgget( 'subview' ) ? rgget( 'subview' ) : 'settings';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $subview ) {&nbsp;</div></li><li><div>            case 'settings':&nbsp;</div></li><li><div>                self::form_settings_ui();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'confirmation':&nbsp;</div></li><li><div>                self::confirmations_page();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'notification':&nbsp;</div></li><li><div>                self::notification_page();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                do_action( &quot;gform_form_settings_page_{$subview}&quot; );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function form_settings_ui() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        require_once( GFCommon::get_base_path() . '/form_detail.php' );&nbsp;</div></li><li><div>        require_once( GFCommon::get_base_path() . '/currency.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_id = rgget( 'id' );&nbsp;</div></li><li><div>        $form = RGFormsModel::get_form_meta( $form_id );&nbsp;</div></li><li><div>        $update_result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( rgpost( 'gform_meta' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // die if not posted from correct page&nbsp;</div></li><li><div>            check_admin_referer( &quot;gform_save_form_settings_{$form_id}&quot;, 'gform_save_form_settings' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $updated_form = json_decode( rgpost( 'gform_meta' ), true );&nbsp;</div></li><li><div>            $updated_form['fields'] = $form['fields'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // -- standard form settings --&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $updated_form['title'] = rgpost( 'form_title_input' );&nbsp;</div></li><li><div>            $updated_form['description'] = rgpost( 'form_description_input' );&nbsp;</div></li><li><div>            $updated_form['labelPlacement'] = rgpost( 'form_label_placement' );&nbsp;</div></li><li><div>            $updated_form['descriptionPlacement'] = rgpost( 'form_description_placement' );&nbsp;</div></li><li><div>            $updated_form['subLabelPlacement'] = rgpost( 'form_sub_label_placement' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // -- advanced form settings --&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $updated_form['cssClass'] = rgpost( 'form_css_class' );&nbsp;</div></li><li><div>            $updated_form['enableHoneypot'] = rgpost( 'form_enable_honeypot' );&nbsp;</div></li><li><div>            $updated_form['enableAnimation'] = rgpost( 'form_enable_animation' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // form button settings&nbsp;</div></li><li><div>            $updated_form['button']['type'] = rgpost( 'form_button' );&nbsp;</div></li><li><div>            $updated_form['button']['text'] = rgpost( 'form_button' ) == 'text' ? rgpost( 'form_button_text_input' ) : '';&nbsp;</div></li><li><div>            $updated_form['button']['imageUrl'] = rgpost( 'form_button' ) == 'image' ? rgpost( 'form_button_image_url' ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Save and Continue settings&nbsp;</div></li><li><div>            $updated_form['save']['enabled'] = rgpost( 'form_save_enabled' );&nbsp;</div></li><li><div>            $updated_form['save']['button']['type'] = 'link';&nbsp;</div></li><li><div>            $updated_form['save']['button']['text'] = rgpost( 'form_save_button_text' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // limit entries settings&nbsp;</div></li><li><div>            $updated_form['limitEntries'] = rgpost( 'form_limit_entries' );&nbsp;</div></li><li><div>            $updated_form['limitEntriesCount'] = $updated_form['limitEntries'] ? rgpost( 'form_limit_entries_count' ) : '';&nbsp;</div></li><li><div>            $updated_form['limitEntriesPeriod'] = $updated_form['limitEntries'] ? rgpost( 'form_limit_entries_period' ) : '';&nbsp;</div></li><li><div>            $updated_form['limitEntriesMessage'] = $updated_form['limitEntries'] ? rgpost( 'form_limit_entries_message' ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // form scheduling settings&nbsp;</div></li><li><div>            $updated_form['scheduleForm'] = rgpost( 'form_schedule_form' );&nbsp;</div></li><li><div>            $updated_form['scheduleStart'] = $updated_form['scheduleForm'] ? rgpost( 'gform_schedule_start' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleStartHour'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_start_hour' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleStartMinute'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_start_minute' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleStartAmpm'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_start_ampm' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleEnd'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_end' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleEndHour'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_end_hour' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleEndMinute'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_end_minute' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleEndAmpm'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_end_ampm' ) : '';&nbsp;</div></li><li><div>            $updated_form['schedulePendingMessage'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_pending_message' ) : '';&nbsp;</div></li><li><div>            $updated_form['scheduleMessage'] = $updated_form['scheduleForm'] ? rgpost( 'form_schedule_message' ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // require login settings&nbsp;</div></li><li><div>            $updated_form['requireLogin'] = rgpost( 'form_require_login' );&nbsp;</div></li><li><div>            $updated_form['requireLoginMessage'] = $updated_form['requireLogin'] ? rgpost( 'form_require_login_message' ) : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $updated_form = GFFormsModel::maybe_sanitize_form_settings( $updated_form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $updated_form['save']['enabled'] ) {&nbsp;</div></li><li><div>                $updated_form = self::activate_save( $updated_form );&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $updated_form = self::deactivate_save( $updated_form );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $updated_form = apply_filters( 'gform_pre_form_settings_save', $updated_form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $update_result = GFFormDetail::save_form_info( $form_id, addslashes( json_encode( $updated_form ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // update working form object with updated form object&nbsp;</div></li><li><div>            $form = $updated_form;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = gf_apply_filters( array( 'gform_admin_pre_render', $form_id ), $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::page_header( __( 'Form Settings', 'gravityforms' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php GFCommon::gf_global(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            var form = &lt;?php echo json_encode( $form ); ?&gt;;&nbsp;</div></li><li><div>            var fieldSettings = [];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            jQuery(document).ready(function ($) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                HandleUnsavedChanges('#gform_form_settings');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery('.datepicker').datepicker({showOn: 'both', changeMonth: true, changeYear: true, buttonImage: &quot;&lt;?php echo GFCommon::get_base_url() ?&gt;/images/calendar.png&quot;, buttonImageOnly: true});&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                ToggleConditionalLogic(true, 'form_button');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery('tr:hidden .gf_animate_sub_settings').hide();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery(document).trigger('gform_load_form_settings', [form]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /**&nbsp;</div></li><li><div>             * New Form Settings Functions&nbsp;</div></li><li><div>             */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function SaveFormSettings() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                hasUnsavedChanges = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // allow users to update form with custom function before save&nbsp;</div></li><li><div>                if (window['gform_before_update']) {&nbsp;</div></li><li><div>                    form = window['gform_before_update'](form);&nbsp;</div></li><li><div>                    if (window.console)&nbsp;</div></li><li><div>                        console.log('&quot;gform_before_update&quot; is deprecated since version 1.7! Use &quot;gform_pre_form_settings_save&quot; php hook instead.');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // set fields to empty array to avoid issues with post data being too long&nbsp;</div></li><li><div>                form.fields = [];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery(&quot;#gform_meta&quot;).val(jQuery.toJSON(form));&nbsp;</div></li><li><div>                jQuery(&quot;form#gform_form_settings&quot;).submit();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function UpdateLabelPlacement() {&nbsp;</div></li><li><div>                var placement = jQuery(&quot;#form_label_placement&quot;).val();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (placement == 'top_label') {&nbsp;</div></li><li><div>                    jQuery('#description_placement_setting').show('slow');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    jQuery('#description_placement_setting').hide('slow');&nbsp;</div></li><li><div>                    jQuery('#form_description_placement').val('below');&nbsp;</div></li><li><div>                    UpdateDescriptionPlacement();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function UpdateDescriptionPlacement() {&nbsp;</div></li><li><div>                var placement = jQuery(&quot;#form_description_placement&quot;).val();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //jQuery(&quot;#gform_fields&quot;).removeClass(&quot;description_below&quot;).removeClass(&quot;description_above&quot;).addClass(&quot;description_&quot; + placement);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery(&quot;.gfield_description&quot;).each(function () {&nbsp;</div></li><li><div>                    var prevElement = placement == 'above' ? '.gfield_label' : '.ginput_container:visible';&nbsp;</div></li><li><div>                    jQuery(this).siblings(prevElement).after(jQuery(this).remove());&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleButton() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var isText = jQuery(&quot;#form_button_text&quot;).is(&quot;:checked&quot;);&nbsp;</div></li><li><div>                var show_element = isText ? '#form_button_text_setting' : '#form_button_image_path_setting';&nbsp;</div></li><li><div>                var hide_element = isText ? '#form_button_image_path_setting' : '#form_button_text_setting';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery(hide_element).hide();&nbsp;</div></li><li><div>                jQuery(show_element).fadeIn();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleEnableSave() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (jQuery(&quot;#form_save_enabled&quot;).is(&quot;:checked&quot;)) {&nbsp;</div></li><li><div>                    ShowSettingRow('#form_save_button_text_setting');&nbsp;</div></li><li><div>                    ShowSettingRow('#form_save_warning');&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    HideSettingRow('#form_save_warning');&nbsp;</div></li><li><div>                    HideSettingRow('#form_save_button_text_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleLimitEntry() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (jQuery(&quot;#gform_limit_entries&quot;).is(&quot;:checked&quot;)) {&nbsp;</div></li><li><div>                    ShowSettingRow('#limit_entries_count_setting');&nbsp;</div></li><li><div>                    ShowSettingRow('#limit_entries_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    HideSettingRow('#limit_entries_count_setting');&nbsp;</div></li><li><div>                    HideSettingRow('#limit_entries_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ShowSettingRow(elemId) {&nbsp;</div></li><li><div>                jQuery(elemId).show().find('.gf_animate_sub_settings').slideDown();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function HideSettingRow(elemId) {&nbsp;</div></li><li><div>                var elem = jQuery(elemId);&nbsp;</div></li><li><div>                elem.find('.gf_animate_sub_settings').slideUp(function () {&nbsp;</div></li><li><div>                    elem.hide();&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleSchedule() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (jQuery(&quot;#gform_schedule_form&quot;).is(&quot;:checked&quot;)) {&nbsp;</div></li><li><div>                    ShowSettingRow('#schedule_start_setting');&nbsp;</div></li><li><div>                    ShowSettingRow('#schedule_end_setting');&nbsp;</div></li><li><div>                    ShowSettingRow('#schedule_pending_message_setting');&nbsp;</div></li><li><div>                    ShowSettingRow('#schedule_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    HideSettingRow('#schedule_start_setting');&nbsp;</div></li><li><div>                    HideSettingRow('#schedule_end_setting');&nbsp;</div></li><li><div>                    HideSettingRow('#schedule_pending_message_setting');&nbsp;</div></li><li><div>                    HideSettingRow('#schedule_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleRequireLogin() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (jQuery(&quot;#gform_require_login&quot;).is(&quot;:checked&quot;)) {&nbsp;</div></li><li><div>                    ShowSettingRow('#require_login_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    HideSettingRow('#require_login_message_setting');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function SetButtonConditionalLogic(isChecked) {&nbsp;</div></li><li><div>                form.button.conditionalLogic = isChecked ? new ConditionalLogic() : null;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function HandleUnsavedChanges(elemId) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                hasUnsavedChanges = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery(elemId).find('input, select, textarea').change(function () {&nbsp;</div></li><li><div>                    hasUnsavedChanges = true;&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                window.onbeforeunload = function () {&nbsp;</div></li><li><div>                    if (hasUnsavedChanges) {&nbsp;</div></li><li><div>                        return '&lt;?php echo esc_js( 'You have unsaved changes.', 'gravityforms' ); ?&gt;';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ShowAdvancedFormSettings() {&nbsp;</div></li><li><div>                jQuery('#form_setting_advanced').slideDown();&nbsp;</div></li><li><div>                jQuery('.show_advanced_settings_container').slideUp();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php self::output_field_scripts() ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        switch ( rgar( $update_result, 'status' ) ) {&nbsp;</div></li><li><div>            case 'invalid_json' :&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;error below-h2&quot; id=&quot;after_update_error_dialog&quot;&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                        &lt;?php _e( 'There was an error while saving your form.', 'gravityforms' ) ?&gt;&nbsp;</div></li><li><div>                        &lt;?php printf( __( 'Please %scontact our support team%s.', 'gravityforms' ), '&lt;a href=&quot;http://www.gravityhelp.com&quot;&gt;', '&lt;/a&gt;' ) ?&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'duplicate_title':&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;error below-h2&quot; id=&quot;after_update_error_dialog&quot;&gt;&nbsp;</div></li><li><div>                    &lt;p&gt;&nbsp;</div></li><li><div>                        &lt;?php _e( 'The form title you have entered has already been used. Please enter a unique form title.', 'gravityforms' ) ?&gt;&nbsp;</div></li><li><div>                    &lt;/p&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                if ( ! empty( $update_result ) ) {&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;div class=&quot;updated below-h2&quot; id=&quot;after_update_dialog&quot;&gt;&nbsp;</div></li><li><div>                        &lt;p&gt;&nbsp;</div></li><li><div>                            &lt;strong&gt;&lt;?php _e( 'Form settings updated successfully.', 'gravityforms' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                        &lt;/p&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * These variables are used to convenient &quot;wrap&quot; child form settings in the appropriate HTML.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $subsetting_open = '&nbsp;</div></li><li><div>            &lt;td colspan=&quot;2&quot; class=&quot;gf_sub_settings_cell&quot;&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;gf_animate_sub_settings&quot;&gt;&nbsp;</div></li><li><div>                    &lt;table&gt;&nbsp;</div></li><li><div>                        &lt;tr&gt;';&nbsp;</div></li><li><div>        $subsetting_close = '&nbsp;</div></li><li><div>                        &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;/table&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //create form settings table rows and put them into an array&nbsp;</div></li><li><div>        //form title&nbsp;</div></li><li><div>        $tr_form_title = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Form title', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_title', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;form_title_input&quot; name=&quot;form_title_input&quot; class=&quot;fieldwidth-3&quot; value=&quot;' . esc_attr( $form['title'] ) . '&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form description&nbsp;</div></li><li><div>        $tr_form_description = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Form description', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_description', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;textarea id=&quot;form_description_input&quot; name=&quot;form_description_input&quot; class=&quot;fieldwidth-3 fieldheight-2&quot;&gt;' . esc_html( rgar( $form, 'description' ) ) . '&lt;/textarea&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form label placement&nbsp;</div></li><li><div>        $alignment_options = array(&nbsp;</div></li><li><div>            'top_label' =&gt; __( 'Top aligned', 'gravityforms' ), &nbsp;</div></li><li><div>            'left_label' =&gt; __( 'Left aligned', 'gravityforms' ), &nbsp;</div></li><li><div>            'right_label' =&gt; __( 'Right aligned', 'gravityforms' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $label_dd = '';&nbsp;</div></li><li><div>        foreach ( $alignment_options as $value =&gt; $label ) {&nbsp;</div></li><li><div>            $selected = $form['labelPlacement'] == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $label_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $label . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_form_label_placement = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Label placement', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_label_placement', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;select id=&quot;form_label_placement&quot; name=&quot;form_label_placement&quot; onchange=&quot;UpdateLabelPlacement();&quot;&gt;' .&nbsp;</div></li><li><div>            $label_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>        &lt;/td&gt;&nbsp;</div></li><li><div>    &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form description placement&nbsp;</div></li><li><div>        $style = $form['labelPlacement'] != 'top_label' ? 'display:none;' : '';&nbsp;</div></li><li><div>        $description_dd = '';&nbsp;</div></li><li><div>        $description_options = array(&nbsp;</div></li><li><div>            'below' =&gt; __( 'Below inputs', 'gravityforms' ), &nbsp;</div></li><li><div>            'above' =&gt; __( 'Above inputs', 'gravityforms' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        foreach ( $description_options as $value =&gt; $label ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'descriptionPlacement' ) == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $description_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $label . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_form_description_placement = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;description_placement_setting&quot; style=&quot;' . $style . '&quot;&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Description placement', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_description_placement', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;select id=&quot;form_description_placement&quot; name=&quot;form_description_placement&quot;&gt;' .&nbsp;</div></li><li><div>            $description_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>        &lt;/td&gt;&nbsp;</div></li><li><div>    &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Sub Label placement&nbsp;</div></li><li><div>        $sub_label_placement_dd = '';&nbsp;</div></li><li><div>        $sub_label_placement_options = array(&nbsp;</div></li><li><div>            'below' =&gt; __( 'Below inputs', 'gravityforms' ), &nbsp;</div></li><li><div>            'above' =&gt; __( 'Above inputs', 'gravityforms' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        foreach ( $sub_label_placement_options as $value =&gt; $label ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'subLabelPlacement' ) == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $sub_label_placement_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $label . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_sub_label_placement = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;sub_label_placement_setting&quot;&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Sub-Label Placement', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_sub_label_placement', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;select id=&quot;form_sub_label_placement&quot; name=&quot;form_sub_label_placement&quot;&gt;' .&nbsp;</div></li><li><div>            $sub_label_placement_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>        &lt;/td&gt;&nbsp;</div></li><li><div>    &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //css class name&nbsp;</div></li><li><div>        $tr_css_class_name = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_css_class&quot; style=&quot;display:block;&quot;&gt;' .&nbsp;</div></li><li><div>            __( 'CSS Class Name', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_css_class', '', true ) .&nbsp;</div></li><li><div>            '&lt;/label&gt;&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;form_css_class&quot; name=&quot;form_css_class&quot; class=&quot;fieldwidth-3&quot; value=&quot;' . esc_attr( rgar( $form, 'cssClass' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //create form advanced settings table rows&nbsp;</div></li><li><div>        //create form button rows&nbsp;</div></li><li><div>        $form_button_type = rgars( $form, 'button/type' );&nbsp;</div></li><li><div>        $text_button_checked = '';&nbsp;</div></li><li><div>        $image_button_checked = '';&nbsp;</div></li><li><div>        $text_style_display = '';&nbsp;</div></li><li><div>        $image_style_display = '';&nbsp;</div></li><li><div>        if ( $form_button_type == 'text' ) {&nbsp;</div></li><li><div>            $text_button_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>            $image_style_display = 'display:none;';&nbsp;</div></li><li><div>        } else if ( $form_button_type == 'image' ) {&nbsp;</div></li><li><div>            $image_button_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>            $text_style_display = 'display:none;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //form button&nbsp;</div></li><li><div>        $tr_form_button = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Input type', 'gravityforms' ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;input type=&quot;radio&quot; id=&quot;form_button_text&quot; name=&quot;form_button&quot; value=&quot;text&quot; onclick=&quot;ToggleButton();&quot; ' . $text_button_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_button_text&quot; class=&quot;inline&quot;&gt;' .&nbsp;</div></li><li><div>            __( 'Text', 'gravityforms' ) .&nbsp;</div></li><li><div>            '&lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &nbsp;&nbsp;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;input type=&quot;radio&quot; id=&quot;form_button_image&quot; name=&quot;form_button&quot; value=&quot;image&quot; onclick=&quot;ToggleButton();&quot; ' . $image_button_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_button_image&quot; class=&quot;inline&quot;&gt;' .&nbsp;</div></li><li><div>            __( 'Image', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form button text&nbsp;</div></li><li><div>        $tr_form_button_text = $subsetting_open . '&nbsp;</div></li><li><div>        &lt;tr id=&quot;form_button_text_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . $text_style_display . '&quot;&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Button text', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_button_text', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;form_button_text_input&quot; name=&quot;form_button_text_input&quot; class=&quot;fieldwidth-3&quot; value=&quot;' . esc_attr( rgars( $form, 'button/text' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form button image path&nbsp;</div></li><li><div>        $tr_form_button_image_path = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;form_button_image_path_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . $image_style_display . '&quot;&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Button image path', 'gravityforms' ) . '  ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_button_image', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;form_button_image_url&quot; name=&quot;form_button_image_url&quot; class=&quot;fieldwidth-3&quot; value=&quot;' . esc_attr( rgars( $form, 'button/imageUrl' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;' . $subsetting_close;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form button conditional logic&nbsp;</div></li><li><div>        $button_conditional_checked = '';&nbsp;</div></li><li><div>        if ( rgars( $form, 'button/conditionalLogic' ) ) {&nbsp;</div></li><li><div>            $button_conditional_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tr_form_button_conditional = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Button conditional logic', 'gravityforms' ) . ' ' . gform_tooltip( 'form_button_conditional_logic', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;form_button_conditional_logic&quot; onclick=&quot;SetButtonConditionalLogic(this.checked); ToggleConditionalLogic(false, \'form_button\');&quot;' . $button_conditional_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_button_conditional_logic&quot; class=&quot;inline&quot;&gt;' . ' ' . __( 'Enable Conditional Logic', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>         &lt;/tr&gt;&nbsp;</div></li><li><div>         &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;td colspan=&quot;2&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;form_button_conditional_logic_container&quot; class=&quot;gf_animate_sub_settings&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;!-- content dynamically created from js.php --&gt;&nbsp;</div></li><li><div>                 &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //create save and continue rows&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $save_enabled_checked = '';&nbsp;</div></li><li><div>        $save_enabled_style = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( rgars( $form, 'save/enabled' ) ) {&nbsp;</div></li><li><div>            $save_enabled_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $save_enabled_style = 'style=&quot;display:none;&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $save_button_text = isset( $form['save']['button']['text'] ) ? esc_attr( rgars( $form, 'save/button/text' ) ) : __( 'Save and Continue Later', 'gravityforms' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tr_enable_save = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Save and Continue', 'gravityforms' ) . ' ' . gform_tooltip( 'form_enable_save', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;form_save_enabled&quot; name=&quot;form_save_enabled&quot; onclick=&quot;ToggleEnableSave();&quot; value=&quot;1&quot; ' . $save_enabled_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_save_enabled&quot;&gt;' . __( 'Enable Save and Continue', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Warning&nbsp;</div></li><li><div>        $tr_save_warning = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;form_save_warning&quot; class=&quot;child_setting_row&quot; ' . $save_enabled_style . '&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;gforms_help_alert fieldwidth-3&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div&gt;&nbsp;</div></li><li><div>                    &lt;i class=&quot;fa fa-warning&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>                    '. __('This feature stores potentially private and sensitive data on this server and protects it with a unique link which is displayed to the user on the page in plain, unencrypted text. The link is similar to a password so it\'s strongly advisable to ensure that the page enforces a secure connection (HTTPS) before activating this setting.', 'gravityforms').&nbsp;</div></li><li><div>                    '&lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;br /&gt;&nbsp;</div></li><li><div>                    &lt;div&gt;&nbsp;</div></li><li><div>                    &lt;i class=&quot;fa fa-warning&quot;&gt;&lt;/i&gt;&nbsp;</div></li><li><div>                    '. __('When this setting is activated two confirmations and one notification are automatically generated and can be modified in their respective editors. When this setting is deactivated the confirmations and the notification will be deleted automatically and any modifications will be lost.', 'gravityforms').&nbsp;</div></li><li><div>                    '&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //save button text&nbsp;</div></li><li><div>        $tr_save_button_text = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;form_save_button_text_setting&quot; class=&quot;child_setting_row&quot; ' . $save_enabled_style . '&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Link text', 'gravityforms' ) . ' ' .&nbsp;</div></li><li><div>            gform_tooltip( 'form_save_button_text', '', true ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;form_save_button_text&quot; name=&quot;form_save_button_text&quot; class=&quot;fieldwidth-3&quot; value=&quot;' . $save_button_text . '&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //limit entries&nbsp;</div></li><li><div>        $limit_entry_checked = '';&nbsp;</div></li><li><div>        $limit_entry_style = '';&nbsp;</div></li><li><div>        $limit_entries_dd = '';&nbsp;</div></li><li><div>        if ( rgar( $form, 'limitEntries' ) ) {&nbsp;</div></li><li><div>            $limit_entry_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $limit_entry_style = 'display:none';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $limit_periods = array(&nbsp;</div></li><li><div>            '' =&gt; __( 'total entries', 'gravityforms' ), &nbsp;</div></li><li><div>            'day' =&gt; __( 'per day', 'gravityforms' ), &nbsp;</div></li><li><div>            'week' =&gt; __( 'per week', 'gravityforms' ), &nbsp;</div></li><li><div>            'month' =&gt; __( 'per month', 'gravityforms' ), &nbsp;</div></li><li><div>            'year' =&gt; __( 'per year', 'gravityforms' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        foreach ( $limit_periods as $value =&gt; $label ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'limitEntriesPeriod' ) == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>            $limit_entries_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $label . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $tr_limit_entries = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Limit number of entries', 'gravityforms' ) . ' ' . gform_tooltip( 'form_limit_entries', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;gform_limit_entries&quot; name=&quot;form_limit_entries&quot; onclick=&quot;ToggleLimitEntry();&quot; value=&quot;1&quot; ' . $limit_entry_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_limit_entries&quot;&gt;' . __( 'Enable entry limit', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //limit entries count&nbsp;</div></li><li><div>        $tr_limit_entries_count = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;limit_entries_count_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . esc_attr( $limit_entry_style ) . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' .&nbsp;</div></li><li><div>            __( 'Number of Entries', 'gravityforms' ) .&nbsp;</div></li><li><div>            '&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;text&quot; id=&quot;gform_limit_entries_count&quot; name=&quot;form_limit_entries_count&quot; style=&quot;width:70px;&quot; value=&quot;' . esc_attr( rgar( $form, 'limitEntriesCount' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>                &nbsp;&nbsp;</div></li><li><div>                &lt;select id=&quot;gform_limit_entries_period&quot; name=&quot;form_limit_entries_period&quot; style=&quot;height:22px;&quot;&gt;' .&nbsp;</div></li><li><div>            $limit_entries_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>        &lt;/td&gt;&nbsp;</div></li><li><div>        ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //limit entries message&nbsp;</div></li><li><div>        $tr_limit_entries_message = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;limit_entries_message_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . $limit_entry_style . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_limit_entries_message&quot;&gt;' .&nbsp;</div></li><li><div>            __( 'Entry Limit Reached Message', 'gravityforms' ) .&nbsp;</div></li><li><div>            '&lt;/label&gt;&nbsp;</div></li><li><div>        &lt;/th&gt;&nbsp;</div></li><li><div>        &lt;td&gt;&nbsp;</div></li><li><div>            &lt;textarea id=&quot;form_limit_entries_message&quot; name=&quot;form_limit_entries_message&quot; class=&quot;fieldwidth-3&quot;&gt;' . esc_html( rgar( $form, 'limitEntriesMessage' ) ) . '&lt;/textarea&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/tr&gt;&nbsp;</div></li><li><div>        ';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule form&nbsp;</div></li><li><div>        $schedule_form_checked = '';&nbsp;</div></li><li><div>        $schedule_form_style = '';&nbsp;</div></li><li><div>        $start_hour_dd = '';&nbsp;</div></li><li><div>        $start_minute_dd = '';&nbsp;</div></li><li><div>        $start_am_selected = '';&nbsp;</div></li><li><div>        $start_pm_selected = '';&nbsp;</div></li><li><div>        $end_hour_dd = '';&nbsp;</div></li><li><div>        $end_minute_dd = '';&nbsp;</div></li><li><div>        $end_am_selected = '';&nbsp;</div></li><li><div>        $end_pm_selected = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( rgar( $form, 'scheduleForm' ) ) {&nbsp;</div></li><li><div>            $schedule_form_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $schedule_form_style = 'display:none';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //create start hour dd options&nbsp;</div></li><li><div>        for ( $i = 1; $i &lt;= 12; $i ++ ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'scheduleStartHour' ) == $i ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>            $start_hour_dd .= '&lt;option value=&quot;' . $i . '&quot; ' . $selected . '&gt;' . $i . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //create start minute dd options&nbsp;</div></li><li><div>        foreach ( array( '00', '15', '30', '45' ) as $value ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'scheduleStartMinute' ) == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>            $start_minute_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $value . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //set start am/pm&nbsp;</div></li><li><div>        if ( rgar( $form, 'scheduleStartAmpm' ) == 'am' ) {&nbsp;</div></li><li><div>            $start_am_selected = 'selected=&quot;selected&quot;';&nbsp;</div></li><li><div>        } elseif ( rgar( $form, 'scheduleStartAmpm' ) == 'pm' ) {&nbsp;</div></li><li><div>            $start_pm_selected = 'selected=&quot;selected&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //create end hour dd options&nbsp;</div></li><li><div>        for ( $i = 1; $i &lt;= 12; $i ++ ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'scheduleEndHour' ) == $i ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>            $end_hour_dd .= '&lt;option value=&quot;' . $i . ' &quot;' . $selected . '&gt;' . $i . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //create end minute dd options&nbsp;</div></li><li><div>        foreach ( array( '00', '15', '30', '45' ) as $value ) {&nbsp;</div></li><li><div>            $selected = rgar( $form, 'scheduleEndMinute' ) == $value ? 'selected=&quot;selected&quot;' : '';&nbsp;</div></li><li><div>            $end_minute_dd .= '&lt;option value=&quot;' . $value . '&quot; ' . $selected . '&gt;' . $value . '&lt;/option&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //set end am/pm&nbsp;</div></li><li><div>        if ( rgar( $form, 'scheduleEndAmpm' ) == 'am' ) {&nbsp;</div></li><li><div>            $end_am_selected = 'selected=&quot;selected&quot;';&nbsp;</div></li><li><div>        } elseif ( rgar( $form, 'scheduleEndAmpm' ) == 'pm' ) {&nbsp;</div></li><li><div>            $end_pm_selected = 'selected=&quot;selected&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule form&nbsp;</div></li><li><div>        $tr_schedule_form = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Schedule form', 'gravityforms' ) . ' ' . gform_tooltip( 'form_schedule_form', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;gform_schedule_form&quot; name=&quot;form_schedule_form&quot; value=&quot;1&quot; onclick=&quot;ToggleSchedule();&quot;' . $schedule_form_checked . '/&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_schedule_form&quot;&gt;' . __( 'Schedule form', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule start&nbsp;</div></li><li><div>        $tr_schedule_start = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;schedule_start_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . $schedule_form_style . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_schedule_start&quot;&gt;' . __( 'Schedule Start Date/Time', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; id=&quot;gform_schedule_start&quot; name=&quot;gform_schedule_start&quot; class=&quot;datepicker&quot; value=&quot;' . esc_attr( rgar( $form, 'scheduleStart' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>                &nbsp;&nbsp;&nbsp;</div></li><li><div>                &lt;select id=&quot;gform_schedule_start_hour&quot; name=&quot;form_schedule_start_hour&quot;&gt;' .&nbsp;</div></li><li><div>            $start_hour_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>            :&nbsp;</div></li><li><div>            &lt;select id=&quot;gform_schedule_start_minute&quot; name=&quot;form_schedule_start_minute&quot;&gt;' .&nbsp;</div></li><li><div>            $start_minute_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>            &lt;select id=&quot;gform_schedule_start_ampm&quot; name=&quot;form_schedule_start_ampm&quot;&gt;&nbsp;</div></li><li><div>                &lt;option value=&quot;am&quot; ' . $start_am_selected . '&gt;AM&lt;/option&gt;&nbsp;</div></li><li><div>                    &lt;option value=&quot;pm&quot; ' . $start_pm_selected . '&gt;PM&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;/select&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule end&nbsp;</div></li><li><div>        $tr_schedule_end = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;schedule_end_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . esc_attr( $schedule_form_style ) . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Schedule Form End Date/Time', 'gravityforms' ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; id=&quot;gform_schedule_end&quot; name=&quot;form_schedule_end&quot; class=&quot;datepicker&quot; value=&quot;' . esc_attr( rgar( $form, 'scheduleEnd' ) ) . '&quot; /&gt;&nbsp;</div></li><li><div>                &nbsp;&nbsp;&nbsp;</div></li><li><div>                &lt;select id=&quot;gform_schedule_end_hour&quot; name=&quot;form_schedule_end_hour&quot;&gt;' .&nbsp;</div></li><li><div>            $end_hour_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>            :&nbsp;</div></li><li><div>            &lt;select id=&quot;gform_schedule_end_minute&quot; name=&quot;form_schedule_end_minute&quot;&gt;' .&nbsp;</div></li><li><div>            $end_minute_dd .&nbsp;</div></li><li><div>            '&lt;/select&gt;&nbsp;</div></li><li><div>            &lt;select id=&quot;gform_schedule_end_ampm&quot; name=&quot;form_schedule_end_ampm&quot;&gt;&nbsp;</div></li><li><div>                &lt;option value=&quot;am&quot; ' . $end_am_selected . '&gt;AM&lt;/option&gt;&nbsp;</div></li><li><div>                    &lt;option value=&quot;pm&quot; ' . $end_pm_selected . '&gt;PM&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;/select&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule message&nbsp;</div></li><li><div>        $tr_schedule_pending_message = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;schedule_pending_message_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . esc_attr( $schedule_form_style ) . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Form Pending Message', 'gravityforms' ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;textarea id=&quot;gform_schedule_pending_message&quot; name=&quot;form_schedule_pending_message&quot; class=&quot;fieldwidth-3&quot;&gt;' . esc_html( rgar( $form, 'schedulePendingMessage' ) ) . '&lt;/textarea&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //schedule message&nbsp;</div></li><li><div>        $tr_schedule_message = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;schedule_message_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . esc_attr( $schedule_form_style ) . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Form Expired Message', 'gravityforms' ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;textarea id=&quot;gform_schedule_message&quot; name=&quot;form_schedule_message&quot; class=&quot;fieldwidth-3&quot;&gt;' . esc_html( rgar( $form, 'scheduleMessage' ) ) . '&lt;/textarea&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //honey pot&nbsp;</div></li><li><div>        $honey_pot_checked = '';&nbsp;</div></li><li><div>        if ( rgar( $form, 'enableHoneypot' ) ) {&nbsp;</div></li><li><div>            $honey_pot_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_honey_pot = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Anti-spam honeypot', 'gravityforms' ) . ' ' . gform_tooltip( 'form_honeypot', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;gform_enable_honeypot&quot; name=&quot;form_enable_honeypot&quot; value=&quot;1&quot; ' . $honey_pot_checked . '/&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_enable_honeypot&quot;&gt;' . __( 'Enable anti-spam honeypot', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //enable animation&nbsp;</div></li><li><div>        $enable_animation_checked = '';&nbsp;</div></li><li><div>        if ( rgar( $form, 'enableAnimation' ) ) {&nbsp;</div></li><li><div>            $enable_animation_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_enable_animation = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Animated transitions', 'gravityforms' ) . ' ' . gform_tooltip( 'form_animation', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;gform_enable_animation&quot; name=&quot;form_enable_animation&quot; value=&quot;1&quot; ' . $enable_animation_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_enable_animation&quot;&gt;' . __( 'Enable animations', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //require login&nbsp;</div></li><li><div>        $require_login_checked = '';&nbsp;</div></li><li><div>        $require_login_style = '';&nbsp;</div></li><li><div>        if ( rgar( $form, 'requireLogin' ) ) {&nbsp;</div></li><li><div>            $require_login_checked = 'checked=&quot;checked&quot;';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $require_login_style = 'display:none';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $tr_requires_login = '&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Require user to be logged in', 'gravityforms' ) . ' ' . gform_tooltip( 'form_require_login', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;gform_require_login&quot; name=&quot;form_require_login&quot; value=&quot;1&quot; onclick=&quot;ToggleRequireLogin();&quot;' . $require_login_checked . ' /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gform_require_login&quot;&gt;' . __( 'Require user to be logged in', 'gravityforms' ) . '&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //require login message&nbsp;</div></li><li><div>        $tr_requires_login_message = '&nbsp;</div></li><li><div>        &lt;tr id=&quot;require_login_message_setting&quot; class=&quot;child_setting_row&quot; style=&quot;' . esc_attr( $require_login_style ) . '&quot;&gt;&nbsp;</div></li><li><div>            ' . $subsetting_open . '&nbsp;</div></li><li><div>            &lt;th&gt;&nbsp;</div></li><li><div>                ' . __( 'Require Login Message', 'gravityforms' ) . ' ' . gform_tooltip( 'form_require_login_message', '', true ) . '&nbsp;</div></li><li><div>            &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;textarea id=&quot;gform_require_login_message&quot; name=&quot;form_require_login_message&quot; class=&quot;fieldwidth-3&quot;&gt;' . esc_html( rgar( $form, 'requireLoginMessage' ) ) . '&lt;/textarea&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            ' . $subsetting_close . '&nbsp;</div></li><li><div>        &lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //populate arrays with table rows&nbsp;</div></li><li><div>        $form_basics = array( 'form_title' =&gt; $tr_form_title, 'form_description' =&gt; $tr_form_description );&nbsp;</div></li><li><div>        $form_layout = array( 'form_label_placement' =&gt; $tr_form_label_placement, 'form_description_placement' =&gt; $tr_form_description_placement, 'form_sub_label_placement' =&gt; $tr_sub_label_placement, 'css_class_name' =&gt; $tr_css_class_name );&nbsp;</div></li><li><div>        $form_button = array( 'form_button_type' =&gt; $tr_form_button, 'form_button_text' =&gt; $tr_form_button_text, 'form_button_image_path' =&gt; $tr_form_button_image_path, 'form_button_conditional' =&gt; $tr_form_button_conditional );&nbsp;</div></li><li><div>        $save_button = array( 'save_enabled' =&gt; $tr_enable_save, 'save_warning' =&gt; $tr_save_warning, 'save_button_text' =&gt; $tr_save_button_text );&nbsp;</div></li><li><div>        $form_restrictions = array( 'limit_entries' =&gt; $tr_limit_entries, 'number_of_entries' =&gt; $tr_limit_entries_count, 'entry_limit_message' =&gt; $tr_limit_entries_message, 'schedule_form' =&gt; $tr_schedule_form, 'schedule_start' =&gt; $tr_schedule_start, 'schedule_end' =&gt; $tr_schedule_end, 'schedule_pending_message' =&gt; $tr_schedule_pending_message, 'schedule_message' =&gt; $tr_schedule_message, 'requires_login' =&gt; $tr_requires_login, 'requires_login_message' =&gt; $tr_requires_login_message );&nbsp;</div></li><li><div>        $form_options = array( 'honey_pot' =&gt; $tr_honey_pot, 'enable_animation' =&gt; $tr_enable_animation );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_settings = array(&nbsp;</div></li><li><div>            __( 'Form Basics', 'gravityforms' )       =&gt; $form_basics, &nbsp;</div></li><li><div>            __( 'Form Layout', 'gravityforms' )       =&gt; $form_layout, &nbsp;</div></li><li><div>            __( 'Form Button', 'gravityforms' )       =&gt; $form_button, &nbsp;</div></li><li><div>            __( 'Save and Continue', 'gravityforms' ) =&gt; $save_button, &nbsp;</div></li><li><div>            __( 'Restrictions', 'gravityforms' )      =&gt; $form_restrictions, &nbsp;</div></li><li><div>            __( 'Form Options', 'gravityforms' )      =&gt; $form_options, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_settings = apply_filters( 'gform_form_settings', $form_settings, $form );&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;gform_panel gform_panel_form_settings&quot; id=&quot;form_settings&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;h3&gt;&lt;span&gt;&lt;i class=&quot;fa fa-cogs&quot;&gt;&lt;/i&gt; &lt;?php _e( 'Form Settings', 'gravityforms' ) ?&gt;&lt;/span&gt;&lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;gform_form_settings&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;table class=&quot;gforms_form_settings&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    //write out array of table rows&nbsp;</div></li><li><div>                    if ( is_array( $form_settings ) ) {&nbsp;</div></li><li><div>                        //foreach($form_settings as $row) {&nbsp;</div></li><li><div>                        foreach ( $form_settings as $key =&gt; $value ) {&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;tr&gt;&nbsp;</div></li><li><div>                                &lt;td colspan=&quot;2&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;h4 class=&quot;gf_settings_subgroup_title&quot;&gt;&lt;?php _e( $key, 'gravityforms' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>                                &lt;/td&gt;&nbsp;</div></li><li><div>                            &lt;/tr&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            if ( is_array( $value ) ) {&nbsp;</div></li><li><div>                                foreach ( $value as $tr ) {&nbsp;</div></li><li><div>                                    echo $tr;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;gform_custom_settings&quot;&gt;&nbsp;</div></li><li><div>                    &lt;!--form settings--&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_properties_settings', 100, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_properties_settings', 200, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_properties_settings', 300, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_properties_settings', 400, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_properties_settings', 500, $form_id ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;!--advanced settings--&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 100, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 200, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 300, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 400, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 500, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 600, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 700, $form_id ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php do_action( 'gform_advanced_settings', 800, $form_id ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php wp_nonce_field( &quot;gform_save_form_settings_{$form_id}&quot;, 'gform_save_form_settings' ); ?&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; id=&quot;gform_meta&quot; name=&quot;gform_meta&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;button&quot; id=&quot;gform_save_settings&quot; name=&quot;gform_save_settings&quot; value=&quot;&lt;?php _e( 'Update Form Settings', 'gravityforms' ); ?&gt;&quot; class=&quot;button-primary gfbutton&quot; onclick=&quot;SaveFormSettings();&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt; &lt;!-- / gform_panel_form_settings --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::page_footer();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function confirmations_page() {&nbsp;</div></li><li><div>        $form_id = rgget( 'id' );&nbsp;</div></li><li><div>        $confirmation_id = rgget( 'cid' );&nbsp;</div></li><li><div>        if ( ! rgblank( $confirmation_id ) ) {&nbsp;</div></li><li><div>            self::confirmations_edit_page( $form_id, $confirmation_id );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            self::confirmations_list_page( $form_id );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function confirmations_list_page( $form_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::maybe_process_confirmation_list_action();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::page_header( __( 'Confirmations', 'gravityforms' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $add_new_url = add_query_arg( array( 'cid' =&gt; 0 ) );&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;h3&gt;&lt;span&gt;&lt;i class=&quot;fa fa-envelope-o&quot;&gt;&lt;/i&gt; &lt;?php _e( 'Confirmations', 'gravityforms' ) ?&gt;&nbsp;</div></li><li><div>                &lt;a id=&quot;add-new-confirmation&quot; class=&quot;add-new-h2&quot; href=&quot;&lt;?php echo esc_url( $add_new_url ) ?&gt;&quot;&gt;&lt;?php _e( 'Add New', 'gravityforms' ) ?&gt;&lt;/a&gt;&lt;/span&gt;&nbsp;</div></li><li><div>        &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php $form = GFFormsModel::get_form_meta( $form_id ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>            var form = &lt;?php echo json_encode( $form ); ?&gt;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleActive(img, confirmation_id) {&nbsp;</div></li><li><div>                var is_active = img.src.indexOf(&quot;active1.png&quot;) &gt;= 0&nbsp;</div></li><li><div>                if (is_active) {&nbsp;</div></li><li><div>                    img.src = img.src.replace(&quot;active1.png&quot;, 'active0.png');&nbsp;</div></li><li><div>                    jQuery(img).attr('title', '&lt;?php _e( 'Inactive', 'gravityforms' ) ?&gt;').attr('alt', '&lt;?php _e( 'Inactive', 'gravityforms' ) ?&gt;');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    img.src = img.src.replace(&quot;active0.png&quot;, 'active1.png');&nbsp;</div></li><li><div>                    jQuery(img).attr('title', '&lt;?php _e( 'Active', 'gravityforms' ) ?&gt;').attr('alt', '&lt;?php _e( 'Active', 'gravityforms' ) ?&gt;');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var mysack = new sack(&quot;&lt;?php echo admin_url( 'admin-ajax.php' )?&gt;&quot;);&nbsp;</div></li><li><div>                mysack.execute = 1;&nbsp;</div></li><li><div>                mysack.method = 'POST';&nbsp;</div></li><li><div>                mysack.setVar(&quot;action&quot;, &quot;rg_update_confirmation_active&quot;);&nbsp;</div></li><li><div>                mysack.setVar(&quot;rg_update_confirmation_active&quot;, &quot;&lt;?php echo wp_create_nonce( 'rg_update_confirmation_active' ) ?&gt;&quot;);&nbsp;</div></li><li><div>                mysack.setVar(&quot;form_id&quot;, &lt;?php echo intval( $form_id ) ?&gt;);&nbsp;</div></li><li><div>                mysack.setVar(&quot;confirmation_id&quot;, confirmation_id);&nbsp;</div></li><li><div>                mysack.setVar(&quot;is_active&quot;, is_active ? 0 : 1);&nbsp;</div></li><li><div>                mysack.onError = function () {&nbsp;</div></li><li><div>                    alert('&lt;?php echo esc_js( __( 'Ajax error while updating confirmation', 'gravityforms' ) ) ?&gt;')&nbsp;</div></li><li><div>                };&nbsp;</div></li><li><div>                mysack.runAJAX();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        $confirmation_table = new GFConfirmationTable( $form );&nbsp;</div></li><li><div>        $confirmation_table-&gt;prepare_items();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;form id=&quot;confirmation_list_form&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php $confirmation_table-&gt;display(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;input id=&quot;action_argument&quot; name=&quot;action_argument&quot; type=&quot;hidden&quot; /&gt;&nbsp;</div></li><li><div>            &lt;input id=&quot;action&quot; name=&quot;action&quot; type=&quot;hidden&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php wp_nonce_field( 'gform_confirmation_list_action', 'gform_confirmation_list_action' ) ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        self::page_footer();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function confirmations_edit_page( $form_id, $confirmation_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = gf_apply_filters( array( 'gform_admin_pre_render', $form_id ), GFFormsModel::get_form_meta( $form_id ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $duplicated_cid = rgget( 'duplicatedcid' );&nbsp;</div></li><li><div>        $is_duplicate = empty( $_POST ) && ! empty( $duplicated_cid );&nbsp;</div></li><li><div>        if ( $is_duplicate ) {&nbsp;</div></li><li><div>            $confirmation_id = $duplicated_cid;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $confirmation = self::handle_confirmation_edit_submission( rgar( $form['confirmations'], $confirmation_id ), $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $is_duplicate ) {&nbsp;</div></li><li><div>            $count = 2;&nbsp;</div></li><li><div>            $name = $confirmation['name'];&nbsp;</div></li><li><div>            $new_name = $name . ' - Copy 1';&nbsp;</div></li><li><div>            while ( ! self::is_unique_name( $new_name, $form['confirmations'] ) ) {&nbsp;</div></li><li><div>                $new_name = $name . &quot; - Copy $count&quot;;&nbsp;</div></li><li><div>                $count ++;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $confirmation['name'] = $new_name;&nbsp;</div></li><li><div>            $confirmation['id'] = 'new';&nbsp;</div></li><li><div>            if ( $confirmation['isDefault'] ) {&nbsp;</div></li><li><div>                $confirmation['isDefault'] = false;&nbsp;</div></li><li><div>                $confirmation['conditionalLogic'] = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $confirmation_ui_settings = self::get_confirmation_ui_settings( $confirmation );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $entry_meta = GFFormsModel::get_entry_meta( $form_id );&nbsp;</div></li><li><div>        $entry_meta = apply_filters( 'gform_entry_meta_conditional_logic_confirmations', $entry_meta, $form, $confirmation_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::page_header( __( 'Confirmations', 'gravityforms' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            var confirmation = &lt;?php echo $confirmation ? json_encode( $confirmation ) : 'new ConfirmationObj()' ?&gt;;&nbsp;</div></li><li><div>            var form = &lt;?php echo json_encode( $form ); ?&gt;;&nbsp;</div></li><li><div>            var entry_meta = &lt;?php echo GFCommon::json_encode( $entry_meta ) ?&gt;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            jQuery(document).ready(function ($) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( confirmation.event == 'form_saved' || confirmation.event == 'form_save_email_sent' ) {&nbsp;</div></li><li><div>                    $('#form_confirmation_redirect, #form_confirmation_show_page').attr('disabled', true);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                SetConfirmationConditionalLogic();&nbsp;</div></li><li><div>                &lt;?php if ( ! rgar( $confirmation, 'isDefault' ) ) : ?&gt;&nbsp;</div></li><li><div>                ToggleConditionalLogic(true, 'confirmation');&nbsp;</div></li><li><div>                &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                ToggleConfirmation();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php if ( $is_duplicate ) :?&gt;&nbsp;</div></li><li><div>                $('#confirmation_conditional_logic_container').pointer({&nbsp;</div></li><li><div>                    content     : '&lt;h3&gt;&lt;?php _e( 'Important', 'gravityforms' ) ?&gt;&lt;/h3&gt;&lt;p&gt;&lt;?php _e( 'Ensure that the conditional logic for this confirmation is different from all the other confirmations for this form and then press save to create the new confirmation.', 'gravityforms' ) ?&gt;&lt;/p&gt;', &nbsp;</div></li><li><div>                    position    : {&nbsp;</div></li><li><div>                        edge : 'bottom', // arrow direction&nbsp;</div></li><li><div>                        align: 'center' // vertical alignment&nbsp;</div></li><li><div>                    }, &nbsp;</div></li><li><div>                    pointerWidth: 300&nbsp;</div></li><li><div>                }).pointer('open');&nbsp;</div></li><li><div>                &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            gform.addFilter(&quot;gform_merge_tags&quot;, &quot;MaybeAddSaveMergeTags&quot;);&nbsp;</div></li><li><div>            function MaybeAddSaveMergeTags(mergeTags, elementId, hideAllFields, excludeFieldTypes, isPrepop, option) {&nbsp;</div></li><li><div>                var event = confirmation.event;&nbsp;</div></li><li><div>                if ( event == 'form_saved' || event == 'form_save_email_sent' ) {&nbsp;</div></li><li><div>                    mergeTags[&quot;other&quot;].tags.push({ tag: '{save_link}', label: '&lt;?php _e( 'Save &amp; Continue Link', 'gravityforms' ) ?&gt;' });&nbsp;</div></li><li><div>                    mergeTags[&quot;other&quot;].tags.push({ tag: '{save_token}', label: '&lt;?php _e( 'Save &amp; Continue Token', 'gravityforms' ) ?&gt;' });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( event == 'form_saved' ) {&nbsp;</div></li><li><div>                    mergeTags[&quot;other&quot;].tags.push({ tag: '{save_email_input}', label: '&lt;?php _e( 'Save &amp; Continue Email Input', 'gravityforms' ) ?&gt;' });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return mergeTags;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php self::output_field_scripts() ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;style type=&quot;text/css&quot;&gt;&nbsp;</div></li><li><div>            #confirmation_action_type {&nbsp;</div></li><li><div>                display: none;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        &lt;/style&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div id=&quot;confirmation-editor&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;form id=&quot;confirmation_edit_form&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;table class=&quot;form-table gforms_form_settings&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php array_map( array( __class__, 'output' ), $confirmation_ui_settings ); ?&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                //DEPRECATED SINCE 1.7 - use gform_confirmation_ui_settings instead&nbsp;</div></li><li><div>                do_action( 'gform_confirmation_settings', 100, $form_id );&nbsp;</div></li><li><div>                do_action( 'gform_confirmation_settings', 200, $form_id );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; id=&quot;confirmation_id&quot; name=&quot;confirmation_id&quot; value=&quot;&lt;?php echo $confirmation_id; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; id=&quot;form_id&quot; name=&quot;form_id&quot; value=&quot;&lt;?php echo $form_id; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; id=&quot;is_default&quot; name=&quot;is_default&quot; value=&quot;&lt;?php echo rgget( 'isDefault', $confirmation ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; id=&quot;conditional_logic&quot; name=&quot;conditional_logic&quot; value=&quot;&lt;?php echo htmlentities( json_encode( rgget( 'conditionalLogic', $confirmation ) ) ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;submit&quot; name=&quot;save&quot; value=&quot;&lt;?php _e( 'Save Confirmation', 'gravityforms' ); ?&gt;&quot; onclick=&quot;StashConditionalLogic(event);&quot; class=&quot;button-primary&quot;&gt;&nbsp;</div></li><li><div>                &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php wp_nonce_field( 'gform_confirmation_edit', 'gform_confirmation_edit' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt; &lt;!-- / confirmation-editor --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::page_footer();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_confirmation_ui_settings( $confirmation ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * These variables are used to convenient &quot;wrap&quot; child form settings in the appropriate HTML.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $subsetting_open = '&nbsp;</div></li><li><div>            &lt;td colspan=&quot;2&quot; class=&quot;gf_sub_settings_cell&quot;&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;gf_animate_sub_settings&quot;&gt;&nbsp;</div></li><li><div>                    &lt;table style=&quot;width:100%&quot;&gt;&nbsp;</div></li><li><div>                        &lt;tr&gt;';&nbsp;</div></li><li><div>        $subsetting_close = '&nbsp;</div></li><li><div>                        &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;/table&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $ui_settings = array();&nbsp;</div></li><li><div>        $confirmation_type = rgar( $confirmation, 'type' ) ? rgar( $confirmation, 'type' ) : 'message';&nbsp;</div></li><li><div>        $is_valid = ! empty( GFCommon::$errors );&nbsp;</div></li><li><div>        $is_default = rgar( $confirmation, 'isDefault' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_id = rgget( 'id' );&nbsp;</div></li><li><div>        $form = RGFormsModel::get_form_meta( $form_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ob_start(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php $class = ! $is_default && ! $is_valid && $confirmation_type == 'page' && ! rgar( $confirmation, 'name' ) ? 'gfield_error' : ''; ?&gt;&nbsp;</div></li><li><div>        &lt;tr &lt;?php echo $is_default ? 'style=&quot;display:none;&quot;' : ''; ?&gt; class=&quot;&lt;?php echo $class; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Confirmation Name', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; id=&quot;form_confirmation_name&quot; name=&quot;form_confirmation_name&quot; value=&quot;&lt;?php echo rgar( $confirmation, 'name' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation name --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_name'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;tr&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Confirmation Type', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;radio&quot; id=&quot;form_confirmation_show_message&quot; name=&quot;form_confirmation&quot; &lt;?php checked( 'message', $confirmation_type ); ?&gt; value=&quot;message&quot; onclick=&quot;ToggleConfirmation();&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_confirmation_show_message&quot; class=&quot;inline&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'Text', 'gravityforms' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php gform_tooltip( 'form_confirmation_message' ) ?&gt;&nbsp;</div></li><li><div>                &lt;/label&gt;&nbsp;</div></li><li><div>                &nbsp;&nbsp;&nbsp;</div></li><li><div>                &lt;input type=&quot;radio&quot; id=&quot;form_confirmation_show_page&quot; name=&quot;form_confirmation&quot; &lt;?php checked( 'page', $confirmation_type ); ?&gt; value=&quot;page&quot; onclick=&quot;ToggleConfirmation();&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_confirmation_show_page&quot; class=&quot;inline&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'Page', 'gravityforms' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php gform_tooltip( 'form_redirect_to_webpage' ) ?&gt;&nbsp;</div></li><li><div>                &lt;/label&gt;&nbsp;</div></li><li><div>                &nbsp;&nbsp;&nbsp;</div></li><li><div>                &lt;input type=&quot;radio&quot; id=&quot;form_confirmation_redirect&quot; name=&quot;form_confirmation&quot; &lt;?php checked( 'redirect', $confirmation_type ); ?&gt; value=&quot;redirect&quot; onclick=&quot;ToggleConfirmation();&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_confirmation_redirect&quot; class=&quot;inline&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'Redirect', 'gravityforms' ); ?&gt;&nbsp;</div></li><li><div>                    &lt;?php gform_tooltip( 'form_redirect_to_url' ) ?&gt;&nbsp;</div></li><li><div>                &lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation type --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_type'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;tr id=&quot;form_confirmation_message_container&quot; &lt;?php echo $confirmation_type != 'message' ? 'style=&quot;display:none;&quot;' : ''; ?&gt; &gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_open; ?&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Message', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;span class=&quot;mt-form_confirmation_message&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                if ( GFCommon::is_wp_version( '3.3' ) ) {&nbsp;</div></li><li><div>                    wp_editor( rgar( $confirmation, 'message' ), 'form_confirmation_message', array( 'autop' =&gt; false, 'editor_class' =&gt; 'merge-tag-support mt-wp_editor mt-manual_position mt-position-right' ) );&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;textarea name=&quot;form_confirmation_message&quot; id=&quot;form_confirmation_message&quot; class=&quot;fieldwidth-1 fieldheight-1&quot;&gt;&lt;?php echo esc_html( $confirmation['message'] ) ?&gt;&lt;/textarea&gt;&lt;?php&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;div style=&quot;margin-top:5px;&quot;&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;checkbox&quot; id=&quot;form_disable_autoformatting&quot; name=&quot;form_disable_autoformatting&quot; value=&quot;1&quot; &lt;?php echo empty( $confirmation['disableAutoformat'] ) ? '' : &quot;checked='checked'&quot; ?&gt; /&gt;&nbsp;</div></li><li><div>                    &lt;label for=&quot;form_disable_autoformatting&quot;&gt;&lt;?php _e( 'Disable Auto-formatting', 'gravityforms' ) ?&gt; &lt;?php gform_tooltip( 'form_confirmation_autoformat' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_close; ?&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation message --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_message'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php $class = ! $is_valid && $confirmation_type == 'page' && ! rgar( $confirmation, 'pageId' ) ? 'gfield_error' : ''; ?&gt;&nbsp;</div></li><li><div>        &lt;tr class=&quot;form_confirmation_page_container&quot; &lt;?php echo $confirmation_type != 'page' ? 'style=&quot;display:none;&quot;' : '' ?&gt; class=&quot;&lt;?php echo $class; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_open; ?&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Page', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;?php wp_dropdown_pages( array( 'name' =&gt; 'form_confirmation_page', 'selected' =&gt; rgar( $confirmation, 'pageId' ), 'show_option_none' =&gt; __( 'Select a page', 'gravityforms' ) ) ); ?&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_close; ?&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation page --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_page'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;tr class=&quot;form_confirmation_page_container&quot; &lt;?php echo $confirmation_type != 'page' ? 'style=&quot;display:none;&quot;' : '' ?&gt; class=&quot;&lt;?php echo $class; ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_open; ?&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Redirect Query String', 'gravityforms' ); ?&gt; &lt;?php gform_tooltip( 'form_redirect_querystring' ) ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;form_page_use_querystring&quot; name=&quot;form_page_use_querystring&quot; &lt;?php echo empty( $confirmation['queryString'] ) ? '' : &quot;checked='checked'&quot; ?&gt; onclick=&quot;TogglePageQueryString()&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_page_use_querystring&quot;&gt;&lt;?php _e( 'Pass Field Data Via Query String', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;form_page_querystring_container&quot; &lt;?php echo empty( $confirmation['queryString'] ) ? 'style=&quot;display:none;&quot;' : ''; ?&gt; &gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $query_string = rgget( 'queryString', $confirmation );&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;textarea name=&quot;form_page_querystring&quot; id=&quot;form_page_querystring&quot; class=&quot;merge-tag-support mt-position-right mt-hide_all_fields mt-option-url&quot; style=&quot;width:98%; height:100px;&quot;&gt;&lt;?php echo esc_html( $query_string ); ?&gt;&lt;/textarea&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;div class=&quot;instruction&quot;&gt;&lt;?php _e( 'Sample: phone={Phone:1}&email={Email:2}', 'gravityforms' ); ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_close; ?&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation page use querystring --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_page_querystring'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php $class = ! $is_valid && $confirmation_type == 'redirect' && ! rgar( $confirmation, 'url' ) ? 'gfield_error' : ''; ?&gt;&nbsp;</div></li><li><div>        &lt;tr class=&quot;form_confirmation_redirect_container &lt;?php echo $class; ?&gt;&quot; &lt;?php echo $confirmation_type != 'redirect' ? 'style=&quot;display:none;&quot;' : '' ?&gt; &gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_open; ?&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Redirect URL', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; id=&quot;form_confirmation_url&quot; name=&quot;form_confirmation_url&quot; value=&quot;&lt;?php echo esc_attr( rgget( 'url', $confirmation ) ); ?&gt;&quot; style=&quot;width:98%;&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_close; ?&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation url --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_url'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;tr class=&quot;form_confirmation_redirect_container&quot; &lt;?php echo $confirmation_type != 'redirect' ? 'style=&quot;display:none;&quot;' : '' ?&gt; &gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_open; ?&gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Redirect Query String', 'gravityforms' ); ?&gt; &lt;?php gform_tooltip( 'form_redirect_querystring' ) ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;form_redirect_use_querystring&quot; name=&quot;form_redirect_use_querystring&quot; &lt;?php echo empty( $confirmation['queryString'] ) ? '' : &quot;checked='checked'&quot; ?&gt; onclick=&quot;ToggleQueryString()&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;form_redirect_use_querystring&quot;&gt;&lt;?php _e( 'Pass Field Data Via Query String', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;form_redirect_querystring_container&quot; &lt;?php echo empty( $confirmation['queryString'] ) ? 'style=&quot;display:none;&quot;' : ''; ?&gt; &gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $query_string = rgget( 'queryString', $confirmation );&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;textarea name=&quot;form_redirect_querystring&quot; id=&quot;form_redirect_querystring&quot; class=&quot;merge-tag-support mt-position-right mt-hide_all_fields mt-option-url&quot; style=&quot;width:98%; height:100px;&quot;&gt;&lt;?php echo esc_html( $query_string ); ?&gt;&lt;/textarea&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;div class=&quot;instruction&quot;&gt;&lt;?php _e( 'Sample: phone={Phone:1}&email={Email:2}', 'gravityforms' ); ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;?php echo $subsetting_close; ?&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- / confirmation use querystring --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_querystring'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;tr &lt;?php echo rgget( 'isDefault', $confirmation ) ? 'style=&quot;display:none;&quot;' : ''; ?&gt; &gt;&nbsp;</div></li><li><div>            &lt;th&gt;&lt;?php _e( 'Conditional Logic', 'gravityforms' ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>            &lt;td&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; id=&quot;confirmation_conditional_logic&quot; name=&quot;confirmation_conditional_logic&quot; style=&quot;display:none;&quot; checked=&quot;checked&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;confirmation_conditional_logic_container&quot;&gt;&nbsp;</div></li><li><div>                    &lt;!-- content populated dynamically by form_admin.js --&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/td&gt;&nbsp;</div></li><li><div>        &lt;/tr&gt; &lt;!-- conditional logic --&gt;&nbsp;</div></li><li><div>        &lt;?php $ui_settings['confirmation_conditional_logic'] = ob_get_contents();&nbsp;</div></li><li><div>        ob_clean(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        ob_end_clean();&nbsp;</div></li><li><div>        $ui_settings = gf_apply_filters( array( 'gform_confirmation_ui_settings', $form_id ), $ui_settings, $confirmation, $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $ui_settings;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function notification_page() {&nbsp;</div></li><li><div>        require_once( 'notification.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //page header loaded in below function because admin messages were not yet available to the header to display&nbsp;</div></li><li><div>        GFNotification::notification_page();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function page_header( $title = '' ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // register admin styles&nbsp;</div></li><li><div>        wp_register_style( 'gform_admin', GFCommon::get_base_url() . '/css/admin.css' );&nbsp;</div></li><li><div>        wp_print_styles( array( 'jquery-ui-styles', 'gform_admin', 'wp-pointer' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = GFFormsModel::get_form_meta( rgget( 'id' ) );&nbsp;</div></li><li><div>        $current_tab = rgempty( 'subview', $_GET ) ? 'settings' : rgget( 'subview' );&nbsp;</div></li><li><div>        $setting_tabs = GFFormSettings::get_tabs( $form['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // kind of boring having to pass the title, optionally get it from the settings tab&nbsp;</div></li><li><div>        if ( ! $title ) {&nbsp;</div></li><li><div>            foreach ( $setting_tabs as $tab ) {&nbsp;</div></li><li><div>                if ( $tab['name'] == $current_tab ) {&nbsp;</div></li><li><div>                    $title = $tab['label'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;wrap gforms_edit_form &lt;?php echo GFCommon::get_browser_class() ?&gt;&quot;&gt;&nbsp;</div></li><li><div>            &lt;h2 class=&quot;gf_admin_page_title&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php echo $title ?&gt;&lt;/span&gt;&lt;span class=&quot;gf_admin_page_subtitle&quot;&gt;&lt;span class=&quot;gf_admin_page_formid&quot;&gt;ID: &lt;?php echo $form['id']; ?&gt;&lt;/span&gt;&lt;span class=&quot;gf_admin_page_formname&quot;&gt;&lt;?php _e( 'Form Name', 'gravityforms' ) ?&gt;: &lt;?php echo $form['title']; ?&gt;&lt;/span&gt;&lt;/span&gt;&nbsp;</div></li><li><div>            &lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php GFCommon::display_admin_message(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php RGForms::top_toolbar(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div id=&quot;gform_tab_group&quot; class=&quot;gform_tab_group vertical_tabs&quot;&gt;&nbsp;</div></li><li><div>                &lt;ul id=&quot;gform_tabs&quot; class=&quot;gform_tabs&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                foreach ( $setting_tabs as $tab ) {&nbsp;</div></li><li><div>                    $query = array( 'subview' =&gt; $tab['name'] );&nbsp;</div></li><li><div>                    if ( isset( $tab['query'] ) )&nbsp;</div></li><li><div>                        $query = array_merge( $query, $tab['query'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $url = add_query_arg( $query );&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;li &lt;?php echo $current_tab == $tab['name'] ? &quot;class='active'&quot; : '' ?&gt;&gt;&nbsp;</div></li><li><div>                        &lt;a href=&quot;&lt;?php echo esc_url( $url ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $tab['label'] ) ?&gt;&lt;/a&gt;&lt;span&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                    &lt;/li&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;gform_tab_container_1&quot; class=&quot;gform_tab_container&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div class=&quot;gform_tab_content&quot; id=&quot;tab_&lt;?php echo $current_tab ?&gt;&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function page_footer() {&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;!-- / gform_tab_content --&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;!-- / gform_tab_container --&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;!-- / gform_tab_group --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;br class=&quot;clear&quot; style=&quot;clear: both;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt; &lt;!-- / wrap --&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>            jQuery(document).ready(function ($) {&nbsp;</div></li><li><div>                $('.gform_tab_container').css('minHeight', jQuery('#gform_tabs').height() + 100);&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_tabs( $form_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $setting_tabs = array(&nbsp;</div></li><li><div>            '10' =&gt; array( 'name' =&gt; 'settings', 'label' =&gt; __( 'Form Settings', 'gravityforms' ) ), &nbsp;</div></li><li><div>            '20' =&gt; array( 'name' =&gt; 'confirmation', 'label' =&gt; __( 'Confirmations', 'gravityforms' ), 'query' =&gt; array( 'cid' =&gt; null, 'duplicatedcid' =&gt; null ) ), &nbsp;</div></li><li><div>            '30' =&gt; array( 'name' =&gt; 'notification', 'label' =&gt; __( 'Notifications', 'gravityforms' ), 'query' =&gt; array( 'nid' =&gt; null ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $setting_tabs = apply_filters( 'gform_form_settings_menu', $setting_tabs, $form_id );&nbsp;</div></li><li><div>        ksort( $setting_tabs, SORT_NUMERIC );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $setting_tabs;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function handle_confirmation_edit_submission( $confirmation, $form ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $_POST ) || ! check_admin_referer( 'gform_confirmation_edit', 'gform_confirmation_edit' ) )&nbsp;</div></li><li><div>            return $confirmation;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $is_new_confirmation = ! $confirmation;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $is_new_confirmation ) {&nbsp;</div></li><li><div>            $confirmation['id'] = uniqid();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $name =  sanitize_text_field( rgpost( 'form_confirmation_name' ) );&nbsp;</div></li><li><div>        $confirmation['name'] = $name;&nbsp;</div></li><li><div>        $type = rgpost( 'form_confirmation' );&nbsp;</div></li><li><div>        if ( ! in_array( $type, array( 'message', 'page', 'redirect' ) ) ) {&nbsp;</div></li><li><div>            $type = 'message';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $confirmation['type'] = $type;&nbsp;</div></li><li><div>        $confirmation['message'] = rgpost( 'form_confirmation_message' );&nbsp;</div></li><li><div>        $confirmation['disableAutoformat'] = (bool) rgpost( 'form_disable_autoformatting' );&nbsp;</div></li><li><div>        $confirmation['pageId'] = absint( rgpost( 'form_confirmation_page' ) );&nbsp;</div></li><li><div>        $confirmation['url'] = rgpost( 'form_confirmation_url' );&nbsp;</div></li><li><div>        $query_string = '' != rgpost( 'form_redirect_querystring' ) ? rgpost( 'form_redirect_querystring' ) : rgpost( 'form_page_querystring' );&nbsp;</div></li><li><div>        $confirmation['queryString'] = wp_strip_all_tags( $query_string );&nbsp;</div></li><li><div>        $confirmation['isDefault'] = (bool) rgpost( 'is_default' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // if is default confirmation, override any submitted conditional logic with empty array&nbsp;</div></li><li><div>        $confirmation['conditionalLogic'] = $confirmation['isDefault'] ? array() : json_decode( rgpost( 'conditional_logic' ), ARRAY_A );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $confirmation['conditionalLogic'] = GFFormsModel::sanitize_conditional_logic( $confirmation['conditionalLogic'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $failed_validation = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $confirmation['name'] ) {&nbsp;</div></li><li><div>            $failed_validation = true;&nbsp;</div></li><li><div>            GFCommon::add_error_message( __( 'You must specify a Confirmation Name.', 'gravityforms' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $type ) {&nbsp;</div></li><li><div>            case 'page':&nbsp;</div></li><li><div>                if ( empty( $confirmation['pageId'] ) ) {&nbsp;</div></li><li><div>                    $failed_validation = true;&nbsp;</div></li><li><div>                    GFCommon::add_error_message( __( 'You must select a Confirmation Page.', 'gravityforms' ) );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'redirect':&nbsp;</div></li><li><div>                if ( ( empty( $confirmation['url'] ) || ! GFCommon::is_valid_url( $confirmation['url'] ) ) && ! GFCommon::has_merge_tag( $confirmation['url'] ) ) {&nbsp;</div></li><li><div>                    $failed_validation = true;&nbsp;</div></li><li><div>                    GFCommon::add_error_message( __( 'You must specify a valid Redirect URL.', 'gravityforms' ) );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $failed_validation )&nbsp;</div></li><li><div>            return $confirmation;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // allow user to filter confirmation before save&nbsp;</div></li><li><div>        $confirmation = gf_apply_filters( array( 'gform_pre_confirmation_save', $form['id'] ), $confirmation, $form, $is_new_confirmation );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // trim values&nbsp;</div></li><li><div>        $confirmation = GFFormsModel::trim_conditional_logic_values_from_element( $confirmation, $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // add current confirmation to confirmations array&nbsp;</div></li><li><div>        $form['confirmations'][ $confirmation['id'] ] = $confirmation;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // save updated confirmations array&nbsp;</div></li><li><div>        $result = GFFormsModel::save_form_confirmations( $form['id'], $form['confirmations'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $result !== false ) {&nbsp;</div></li><li><div>            $url = remove_query_arg( array( 'cid', 'duplicatedcid' ) );&nbsp;</div></li><li><div>            GFCommon::add_message( sprintf( __( 'Confirmation saved successfully. %sBack to confirmations.%s', 'gravityforms' ), '&lt;a href=&quot;' . esc_url( $url ) . '&quot;&gt;', '&lt;/a&gt;' ) );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            GFCommon::add_error_message( __( 'There was an issue saving this confirmation.', 'gravityforms' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $confirmation;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function maybe_process_confirmation_list_action() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $_POST ) || ! check_admin_referer( 'gform_confirmation_list_action', 'gform_confirmation_list_action' ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $action = rgpost( 'action' );&nbsp;</div></li><li><div>        $object_id = rgpost( 'action_argument' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $action ) {&nbsp;</div></li><li><div>            case 'delete':&nbsp;</div></li><li><div>                $confirmation_deleted = self::delete_confirmation( $object_id, rgget( 'id' ) );&nbsp;</div></li><li><div>                if ( $confirmation_deleted ) {&nbsp;</div></li><li><div>                    GFCommon::add_message( __( 'Confirmation deleted.', 'gravityforms' ) );&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    GFCommon::add_error_message( __( 'There was an issue deleting this confirmation.', 'gravityforms' ) );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Delete a form confirmation by ID.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param mixed $confirmation_id&nbsp;</div></li><li><div>     * @param mixed $form_id Can pass a form ID or a form object&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return mixed The result of the database operation&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function delete_confirmation( $confirmation_id, $form_id ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $form_id )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = ! is_array( $form_id ) ? RGFormsModel::get_form_meta( $form_id ) : $form_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires right before the confirmation that a form is deleted&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param int $form['confirmations'][ $confirmation_id ] The delete confirmation object ID&nbsp;</div></li><li><div>         * @para array $form The Form object to filter through&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        do_action( 'gform_pre_confirmation_deleted', $form['confirmations'][ $confirmation_id ], $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        unset( $form['confirmations'][ $confirmation_id ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // clear form cache so next retrieval of form meta will reflect deleted notification&nbsp;</div></li><li><div>        RGFormsModel::flush_current_forms();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return RGFormsModel::save_form_confirmations( $form['id'], $form['confirmations'] );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function output( $a ) {&nbsp;</div></li><li><div>        echo $a;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function is_unique_name( $name, $confirmations ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $confirmations as $confirmation ) {&nbsp;</div></li><li><div>            if ( strtolower( rgar( $confirmation, 'name' ) ) == strtolower( $name ) )&nbsp;</div></li><li><div>                return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function output_field_scripts( $echo = true ) {&nbsp;</div></li><li><div>        $script_str = '';&nbsp;</div></li><li><div>        $conditional_logic_fields = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( GF_Fields::get_all() as $gf_field ) {&nbsp;</div></li><li><div>            if ( $gf_field-&gt;is_conditional_logic_supported() ) {&nbsp;</div></li><li><div>                $conditional_logic_fields[] = $gf_field-&gt;type;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $script_str .= sprintf( 'function GetConditionalLogicFields() {return %s;}', json_encode( $conditional_logic_fields ) ) . PHP_EOL;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $script_str ) && $echo ) {&nbsp;</div></li><li><div>            echo $script_str;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $script_str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function activate_save( $form ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_id = $form['id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $has_save_notification = false;&nbsp;</div></li><li><div>        foreach ( $form['notifications'] as $notification ) {&nbsp;</div></li><li><div>            if ( rgar( $notification, 'event' ) == 'form_save_email_requested' ) {&nbsp;</div></li><li><div>                $has_save_notification = true;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( ! $has_save_notification ) {&nbsp;</div></li><li><div>            $notification_id = uniqid();&nbsp;</div></li><li><div>            $form['notifications'][ $notification_id ] = array(&nbsp;</div></li><li><div>                'id' =&gt; $notification_id, &nbsp;</div></li><li><div>                'isDefault' =&gt; true, &nbsp;</div></li><li><div>                'name' =&gt; __( 'Save and Continue Email', 'gravityforms' ), &nbsp;</div></li><li><div>                'event' =&gt; 'form_save_email_requested', &nbsp;</div></li><li><div>                'toType' =&gt; 'hidden', &nbsp;</div></li><li><div>                'from' =&gt; '{admin_email}', &nbsp;</div></li><li><div>                'subject' =&gt; __( 'Link to continue {form_title}' ), &nbsp;</div></li><li><div>                'message' =&gt; __( 'Thank you for saving {form_title}. Please use the unique link below to return to the form from any computer. &lt;br /&gt;&lt;br /&gt; {save_link} &lt;br /&gt;&lt;br /&gt; Remember that the link will expire after 30 days so please return via the provided link to complete your form submission.', 'gravityforms' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            GFFormsModel::save_form_notifications( $form_id, $form['notifications'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $has_save_confirmation = false;&nbsp;</div></li><li><div>        foreach ( $form['confirmations'] as $confirmation ) {&nbsp;</div></li><li><div>            if ( rgar( $confirmation, 'event' ) == 'form_saved' ) {&nbsp;</div></li><li><div>                $has_save_confirmation = true;&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $has_save_confirmation ) {&nbsp;</div></li><li><div>            $confirmation_id = uniqid( 'sc1' );&nbsp;</div></li><li><div>            $form['confirmations'][ $confirmation_id ] = array(&nbsp;</div></li><li><div>                'id' =&gt; $confirmation_id, &nbsp;</div></li><li><div>                'event' =&gt; 'form_saved', &nbsp;</div></li><li><div>                'name' =&gt; __( 'Save and Continue Confirmation', 'gravityforms' ), &nbsp;</div></li><li><div>                'isDefault' =&gt; true, &nbsp;</div></li><li><div>                'type' =&gt; 'message', &nbsp;</div></li><li><div>                'message' =&gt; __( 'Please use the following link to return to your form from any computer. &lt;br /&gt; {save_link} &lt;br /&gt; This link will expire after 30 days. &lt;br /&gt;Enter your email address to send the link by email. &lt;br /&gt; {save_email_input}', 'gravityforms' ), &nbsp;</div></li><li><div>                'url' =&gt; '', &nbsp;</div></li><li><div>                'pageId' =&gt; '', &nbsp;</div></li><li><div>                'queryString' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            $confirmation_id = uniqid( 'sc2' );&nbsp;</div></li><li><div>            $form['confirmations'][ $confirmation_id ] = array(&nbsp;</div></li><li><div>                'id' =&gt; $confirmation_id, &nbsp;</div></li><li><div>                'event' =&gt; 'form_save_email_sent', &nbsp;</div></li><li><div>                'name' =&gt; __( 'Save and Continue Email Sent Confirmation', 'gravityforms' ), &nbsp;</div></li><li><div>                'isDefault' =&gt; true, &nbsp;</div></li><li><div>                'type' =&gt; 'message', &nbsp;</div></li><li><div>                'message' =&gt; __( 'The link was sent to the following email address: {save_email}', 'gravityforms' ), &nbsp;</div></li><li><div>                'url' =&gt; '', &nbsp;</div></li><li><div>                'pageId' =&gt; '', &nbsp;</div></li><li><div>                'queryString' =&gt; '', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            GFFormsModel::save_form_confirmations( $form_id, $form['confirmations'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $form;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function deactivate_save( $form ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_id = $form['id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $form['notifications'] as $notification_id =&gt; $notification ) {&nbsp;</div></li><li><div>            if ( rgar( $notification, 'isDefault' ) && rgar( $notification, 'event' ) == 'form_save_email_requested' ) {&nbsp;</div></li><li><div>                unset( $form['notifications'][ $notification_id ] );&nbsp;</div></li><li><div>                GFFormsModel::save_form_notifications( $form_id, $form['notifications'] );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $changed = false;&nbsp;</div></li><li><div>        foreach ( $form['confirmations'] as $confirmation_id =&gt; $confirmation ) {&nbsp;</div></li><li><div>            $event = rgar( $confirmation, 'event' );&nbsp;</div></li><li><div>            if ( rgar( $confirmation, 'isDefault' ) && ( $event == 'form_saved' || $event == 'form_save_email_sent' ) ) {&nbsp;</div></li><li><div>                unset( $form['confirmations'][ $confirmation_id ] );&nbsp;</div></li><li><div>                $changed = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( $changed ) {&nbsp;</div></li><li><div>            GFFormsModel::save_form_confirmations( $form_id, $form['confirmations'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $form;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd> <a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/gfform_settings/">1.9.14.22</a></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>GFFormSettings</li><li><span></span>Gravity Forms</li><li><span></span>1.9.14.22</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>