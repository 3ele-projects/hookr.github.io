<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.9.14.22" data-slug="gravity-forms" data-type="class" data-id="72794"><head xmlns="http://www.w3.org/1999/xhtml"><title> gfentrydetail | class | Gravity Forms | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="GFEntryDetail, class, plugin, gravity-forms, 1.9.14.22" /><meta name="description" content="The Gravity Forms GFEntryDetail class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=6030e6c9ae07f0e1f30927945eb3e0cf' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/gfentry_detail/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfentry_detail%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfentry_detail%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-1.9.14.22-class-gfentry_detail","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="gfentry_detail" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms." href="http://hookr.io/plugins/gravity-forms/" class="plugin"><span property="name">gravity-forms</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.9.14.22." href="http://hookr.io/plugins/gravity-forms/1.9.14.22/" class="H_VERSION"><span property="name">1.9.14.22</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">gfentry_detail</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="793"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/all/" title="All">All <span class="count badge">793</span></a></li><li class="" data-id="new" data-count="458"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/new/" title="New">New <span class="count badge">458</span></a></li><li class="" data-id="hooks" data-count="603"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/hooks/" title="Hooks">Hooks <span class="count badge">603</span></a></li><li class="" data-id="action" data-count="198"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/actions/" title="Actions">Actions <span class="count badge">198</span></a></li><li class="" data-id="filter" data-count="405"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/filters/" title="Filters">Filters <span class="count badge">405</span></a></li><li class="active" data-id="class" data-count="107"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/" title="Classes">Classes <span class="count badge">107</span></a></li><li class="" data-id="constant" data-count="48"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/constants/" title="Constants">Constants <span class="count badge">48</span></a></li><li class="" data-id="function" data-count="33"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/functions/" title="Functions">Functions <span class="count badge">33</span></a></li><li class="" data-id="shortcode" data-count="2"><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">2</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>GFEntryDetail</strong></h1><p>The Gravity Forms <strong>GFEntryDetail</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/files/entry-detail/" class="file">/entry_detail.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="7" class="block" start="7"><li><div>class GFEntryDetail {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function lead_detail_page() {&nbsp;</div></li><li><div>        global $current_user;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! GFCommon::ensure_wp_version() ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo GFCommon::get_remote_message();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = RGFormsModel::get_form_meta( absint( $_GET['id'] ) );&nbsp;</div></li><li><div>        $form_id = absint( $form['id'] );&nbsp;</div></li><li><div>        $form = gf_apply_filters( array( 'gform_admin_pre_render', $form_id ), $form );&nbsp;</div></li><li><div>        $lead_id = rgpost( 'entry_id' ) ? absint( rgpost( 'entry_id' ) ): absint( rgget( 'lid' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $filter = rgget( 'filter' );&nbsp;</div></li><li><div>        $status = in_array( $filter, array( 'trash', 'spam' ) ) ? $filter : 'active';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $position = rgget( 'pos' ) ? rgget( 'pos' ) : 0;&nbsp;</div></li><li><div>        $sort_direction = rgget( 'dir' ) ? rgget( 'dir' ) : 'DESC';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $sort_field = empty( $_GET['sort'] ) ? 0 : $_GET['sort'];&nbsp;</div></li><li><div>        $sort_field_meta = RGFormsModel::get_field( $form, $sort_field );&nbsp;</div></li><li><div>        $is_numeric = $sort_field_meta['type'] == 'number';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $search_criteria['status'] = $status;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        require_once( 'entry_list.php' );&nbsp;</div></li><li><div>        $filter_links = GFEntryList::get_filter_links( $form, false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $filter_links as $filter_link ) {&nbsp;</div></li><li><div>            if ( $filter == $filter_link['id'] ) {&nbsp;</div></li><li><div>                $search_criteria['field_filters'] = $filter_link['field_filters'];&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $search_field_id = rgget( 'field_id' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $_GET['field_id'] ) && $_GET['field_id'] !== '' ) {&nbsp;</div></li><li><div>            $key = $search_field_id;&nbsp;</div></li><li><div>            $val = rgget( 's' );&nbsp;</div></li><li><div>            $strpos_row_key = strpos( $search_field_id, '|' );&nbsp;</div></li><li><div>            if ( $strpos_row_key !== false ) { //multi-row likert&nbsp;</div></li><li><div>                $key_array = explode( '|', $search_field_id );&nbsp;</div></li><li><div>                $key = $key_array[0];&nbsp;</div></li><li><div>                $val = $key_array[1] . ':' . $val;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $search_criteria['field_filters'][] = array(&nbsp;</div></li><li><div>                'key' =&gt; $key, &nbsp;</div></li><li><div>                'operator' =&gt; rgempty( 'operator', $_GET ) ? 'is' : rgget( 'operator' ), &nbsp;</div></li><li><div>                'value' =&gt; $val, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $type = rgget( 'type' );&nbsp;</div></li><li><div>            if ( empty( $type ) ) {&nbsp;</div></li><li><div>                if ( rgget( 'field_id' ) == '0' ) {&nbsp;</div></li><li><div>                    $search_criteria['type'] = 'global';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $paging = array( 'offset' =&gt; $position, 'page_size' =&gt; 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $sort_field ) ) {&nbsp;</div></li><li><div>            $sorting = array( 'key' =&gt; $_GET['sort'], 'direction' =&gt; $sort_direction, 'is_numeric' =&gt; $is_numeric );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $sorting = array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $total_count = 0;&nbsp;</div></li><li><div>        $leads = GFAPI::get_entries( $form['id'], $search_criteria, $sorting, $paging, $total_count );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $prev_pos = ! rgblank( $position ) && $position &gt; 0 ? $position - 1 : false;&nbsp;</div></li><li><div>        $next_pos = ! rgblank( $position ) && $position &lt; $total_count - 1 ? $position + 1 : false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // unread filter requires special handling for pagination since entries are filter out of the query as they are read&nbsp;</div></li><li><div>        if ( $filter == 'unread' ) {&nbsp;</div></li><li><div>            $next_pos = $position;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $next_pos + 1 == $total_count ) {&nbsp;</div></li><li><div>                $next_pos = false;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $lead_id ) {&nbsp;</div></li><li><div>            $lead = ! empty( $leads ) ? $leads[0] : false;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $lead = GFAPI::get_entry( $lead_id );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $lead ) {&nbsp;</div></li><li><div>            esc_html_e( &quot;Oops! We couldn't find your entry. Please try again&quot;, 'gravityforms' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        RGFormsModel::update_lead_property( $lead['id'], 'is_read', 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( RGForms::post( 'action' ) ) {&nbsp;</div></li><li><div>            case 'update' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                //Loading files that have been uploaded to temp folder&nbsp;</div></li><li><div>                $files = GFCommon::json_decode( stripslashes( RGForms::post( 'gform_uploaded_files' ) ) );&nbsp;</div></li><li><div>                if ( ! is_array( $files ) ) {&nbsp;</div></li><li><div>                    $files = array();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $original_entry = $lead;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                GFFormsModel::$uploaded_files[ $form_id ] = $files;&nbsp;</div></li><li><div>                GFFormsModel::save_lead( $form, $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /**&nbsp;</div></li><li><div>                 * Fires after the Entry is updated from the entry detail page.&nbsp;</div></li><li><div>                 *&nbsp;</div></li><li><div>                 * @param array $form The form object for the entry.&nbsp;</div></li><li><div>                 * @param integer $lead['id'] The entry ID.&nbsp;</div></li><li><div>                 * @param array $original_entry The entry object before being updated.&nbsp;</div></li><li><div>                 */&nbsp;</div></li><li><div>                gf_do_action( array( 'gform_after_update_entry', $form['id'] ), $form, $lead['id'], $original_entry );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $lead = RGFormsModel::get_lead( $lead['id'] );&nbsp;</div></li><li><div>                $lead = GFFormsModel::set_entry_meta( $lead, $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'add_note' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_update_note', 'gforms_update_note' );&nbsp;</div></li><li><div>                $user_data = get_userdata( $current_user-&gt;ID );&nbsp;</div></li><li><div>                RGFormsModel::add_note( $lead['id'], $current_user-&gt;ID, $user_data-&gt;display_name, stripslashes( $_POST['new_note'] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //emailing notes if configured&nbsp;</div></li><li><div>                if ( rgpost( 'gentry_email_notes_to' ) ) {&nbsp;</div></li><li><div>                    GFCommon::log_debug( 'GFEntryDetail::lead_detail_page(): Preparing to email entry notes.' );&nbsp;</div></li><li><div>                    $email_to = $_POST['gentry_email_notes_to'];&nbsp;</div></li><li><div>                    $email_from = $current_user-&gt;user_email;&nbsp;</div></li><li><div>                    $email_subject = stripslashes( $_POST['gentry_email_subject'] );&nbsp;</div></li><li><div>                    $body = stripslashes( $_POST['new_note'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $headers = &quot;From: \&quot;$email_from\&quot; &lt;$email_from&gt; \r\n&quot;;&nbsp;</div></li><li><div>                    GFCommon::log_debug( &quot;GFEntryDetail::lead_detail_page(): Emailing notes - TO: $email_to SUBJECT: $email_subject BODY: $body HEADERS: $headers&quot; );&nbsp;</div></li><li><div>                    $is_success = wp_mail( $email_to, $email_subject, $body, $headers );&nbsp;</div></li><li><div>                    $result = is_wp_error( $is_success ) ? $is_success-&gt;get_error_message() : $is_success;&nbsp;</div></li><li><div>                    GFCommon::log_debug( &quot;GFEntryDetail::lead_detail_page(): Result from wp_mail(): {$result}&quot; );&nbsp;</div></li><li><div>                    if ( ! is_wp_error( $is_success ) && $is_success ) {&nbsp;</div></li><li><div>                        GFCommon::log_debug( 'GFEntryDetail::lead_detail_page(): Mail was passed from WordPress to the mail server.' );&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        GFCommon::log_error( 'GFEntryDetail::lead_detail_page(): The mail message was passed off to WordPress for processing, but WordPress was unable to send the message.' );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( has_filter( 'phpmailer_init' ) ) {&nbsp;</div></li><li><div>                        GFCommon::log_debug( __METHOD__ . '(): The WordPress phpmailer_init hook has been detected, usually used by SMTP plugins, it can impact mail delivery.' );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    /**&nbsp;</div></li><li><div>                     * Fires after a note is attached to an entry and sent as an email&nbsp;</div></li><li><div>                     *&nbsp;</div></li><li><div>                     * @param string $result The Error message or success message when the entry note is sent&nbsp;</div></li><li><div>                     * @param string $email_to The email address to send the entry note to&nbsp;</div></li><li><div>                     * @param string $email_from The email address from which the email is sent from&nbsp;</div></li><li><div>                     * @param string $email_subject The subject of the email that is sent&nbsp;</div></li><li><div>                     * @param mixed $body The Full body of the email containing the message after the note is sent&nbsp;</div></li><li><div>                     * @param array $form The current form object&nbsp;</div></li><li><div>                     * @param array $lead The Current lead object&nbsp;</div></li><li><div>                     */&nbsp;</div></li><li><div>                    do_action( 'gform_post_send_entry_note', $result, $email_to, $email_from, $email_subject, $body, $form, $lead );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'add_quick_note' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                $user_data = get_userdata( $current_user-&gt;ID );&nbsp;</div></li><li><div>                RGFormsModel::add_note( $lead['id'], $current_user-&gt;ID, $user_data-&gt;display_name, stripslashes( $_POST['quick_note'] ) );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'bulk' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_update_note', 'gforms_update_note' );&nbsp;</div></li><li><div>                if ( $_POST['bulk_action'] == 'delete' ) {&nbsp;</div></li><li><div>                    if ( ! GFCommon::current_user_can_any( 'gravityforms_edit_entry_notes' ) ) {&nbsp;</div></li><li><div>                        die( esc_html__( &quot;You don't have adequate permission to delete notes.&quot;, 'gravityforms' ) );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    RGFormsModel::delete_notes( $_POST['note'] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'trash' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                RGFormsModel::update_lead_property( $lead['id'], 'status', 'trash' );&nbsp;</div></li><li><div>                $lead = RGFormsModel::get_lead( $lead['id'] );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'restore' :&nbsp;</div></li><li><div>            case 'unspam' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                RGFormsModel::update_lead_property( $lead['id'], 'status', 'active' );&nbsp;</div></li><li><div>                $lead = RGFormsModel::get_lead( $lead['id'] );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'spam' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                RGFormsModel::update_lead_property( $lead['id'], 'status', 'spam' );&nbsp;</div></li><li><div>                $lead = RGFormsModel::get_lead( $lead['id'] );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case 'delete' :&nbsp;</div></li><li><div>                check_admin_referer( 'gforms_save_entry', 'gforms_save_entry' );&nbsp;</div></li><li><div>                if ( ! GFCommon::current_user_can_any( 'gravityforms_delete_entries' ) ) {&nbsp;</div></li><li><div>                    die( esc_html__( &quot;You don't have adequate permission to delete entries.&quot;, 'gravityforms' ) );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                RGFormsModel::delete_lead( $lead['id'] );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                    document.location.href = '&lt;?php echo 'admin.php?page=gf_entries&view=entries&id=' . absint( $form['id'] )?&gt;';&nbsp;</div></li><li><div>                &lt;/script&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $mode = empty( $_POST['screen_mode'] ) ? 'view' : $_POST['screen_mode'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $min = defined( 'SCRIPT_DEBUG' ) && SCRIPT_DEBUG || isset( $_GET['gform_debug'] ) ? '' : '.min';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;?php echo GFCommon::get_base_url() ?&gt;/css/admin&lt;?php echo $min; ?&gt;.css&quot; /&gt;&nbsp;</div></li><li><div>        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            jQuery(document).ready(function () {&nbsp;</div></li><li><div>                toggleNotificationOverride(true);&nbsp;</div></li><li><div>                jQuery('#gform_update_button').prop('disabled', false);&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function DeleteFile(leadId, fieldId, deleteButton) {&nbsp;</div></li><li><div>                if (confirm(&lt;?php echo json_encode( __( &quot;Would you like to delete this file? 'Cancel' to stop. 'OK' to delete&quot;, 'gravityforms' ) ); ?&gt;)) {&nbsp;</div></li><li><div>                    var fileIndex = jQuery(deleteButton).parent().index();&nbsp;</div></li><li><div>                    var mysack = new sack(&quot;&lt;?php echo admin_url( 'admin-ajax.php' )?&gt;&quot;);&nbsp;</div></li><li><div>                    mysack.execute = 1;&nbsp;</div></li><li><div>                    mysack.method = 'POST';&nbsp;</div></li><li><div>                    mysack.setVar(&quot;action&quot;, &quot;rg_delete_file&quot;);&nbsp;</div></li><li><div>                    mysack.setVar(&quot;rg_delete_file&quot;, &quot;&lt;?php echo wp_create_nonce( 'rg_delete_file' ) ?&gt;&quot;);&nbsp;</div></li><li><div>                    mysack.setVar(&quot;lead_id&quot;, leadId);&nbsp;</div></li><li><div>                    mysack.setVar(&quot;field_id&quot;, fieldId);&nbsp;</div></li><li><div>                    mysack.setVar(&quot;file_index&quot;, fileIndex);&nbsp;</div></li><li><div>                    mysack.onError = function () {&nbsp;</div></li><li><div>                        alert(&lt;?php echo json_encode( __( 'Ajax error while deleting field.', 'gravityforms' ) ); ?&gt;)&nbsp;</div></li><li><div>                    };&nbsp;</div></li><li><div>                    mysack.runAJAX();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    return true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function EndDeleteFile(fieldId, fileIndex) {&nbsp;</div></li><li><div>                var previewFileSelector = &quot;#preview_existing_files_&quot; + fieldId + &quot; .ginput_preview&quot;;&nbsp;</div></li><li><div>                var $previewFiles = jQuery(previewFileSelector);&nbsp;</div></li><li><div>                var rr = $previewFiles.eq(fileIndex);&nbsp;</div></li><li><div>                $previewFiles.eq(fileIndex).remove();&nbsp;</div></li><li><div>                var $visiblePreviewFields = jQuery(previewFileSelector);&nbsp;</div></li><li><div>                if ($visiblePreviewFields.length == 0) {&nbsp;</div></li><li><div>                    jQuery('#preview_' + fieldId).hide();&nbsp;</div></li><li><div>                    jQuery('#upload_' + fieldId).show('slow');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ToggleShowEmptyFields() {&nbsp;</div></li><li><div>                if (jQuery(&quot;#gentry_display_empty_fields&quot;).is(&quot;:checked&quot;)) {&nbsp;</div></li><li><div>                    createCookie(&quot;gf_display_empty_fields&quot;, true, 10000);&nbsp;</div></li><li><div>                    document.location = document.location.href;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    eraseCookie(&quot;gf_display_empty_fields&quot;);&nbsp;</div></li><li><div>                    document.location = document.location.href;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function createCookie(name, value, days) {&nbsp;</div></li><li><div>                if (days) {&nbsp;</div></li><li><div>                    var date = new Date();&nbsp;</div></li><li><div>                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));&nbsp;</div></li><li><div>                    var expires = &quot;; expires=&quot; + date.toGMTString();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else var expires = &quot;&quot;;&nbsp;</div></li><li><div>                document.cookie = name + &quot;=&quot; + value + expires + &quot;; path=/&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function eraseCookie(name) {&nbsp;</div></li><li><div>                createCookie(name, &quot;&quot;, -1);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function ResendNotifications() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var selectedNotifications = new Array();&nbsp;</div></li><li><div>                jQuery(&quot;.gform_notifications:checked&quot;).each(function () {&nbsp;</div></li><li><div>                    selectedNotifications.push(jQuery(this).val());&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var sendTo = jQuery('#notification_override_email').val();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (selectedNotifications.length &lt;= 0) {&nbsp;</div></li><li><div>                    displayMessage(&lt;?php echo json_encode( __( 'You must select at least one type of notification to resend.', 'gravityforms' ) ); ?&gt;, 'error', '#notifications_container');&nbsp;</div></li><li><div>                    return;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery('#please_wait_container').fadeIn();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                jQuery.post(ajaxurl, {&nbsp;</div></li><li><div>                        action                 : &quot;gf_resend_notifications&quot;, &nbsp;</div></li><li><div>                        gf_resend_notifications: '&lt;?php echo wp_create_nonce( 'gf_resend_notifications' ); ?&gt;', &nbsp;</div></li><li><div>                        notifications          : jQuery.toJSON(selectedNotifications), &nbsp;</div></li><li><div>                        sendTo                 : sendTo, &nbsp;</div></li><li><div>                        leadIds                : '&lt;?php echo absint( $lead['id'] ); ?&gt;', &nbsp;</div></li><li><div>                        formId                 : '&lt;?php echo absint( $form['id'] ); ?&gt;'&nbsp;</div></li><li><div>                    }, &nbsp;</div></li><li><div>                    function (response) {&nbsp;</div></li><li><div>                        if (response) {&nbsp;</div></li><li><div>                            displayMessage(response, &quot;error&quot;, &quot;#notifications_container&quot;);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            displayMessage(&lt;?php echo json_encode( esc_html__( 'Notifications were resent successfully.', 'gravityforms' ) ); ?&gt;, &quot;updated&quot;, &quot;#notifications_container&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // reset UI&nbsp;</div></li><li><div>                            jQuery(&quot;.gform_notifications&quot;).attr( 'checked', false );&nbsp;</div></li><li><div>                            jQuery('#notification_override_email').val('');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            toggleNotificationOverride();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        jQuery('#please_wait_container').hide();&nbsp;</div></li><li><div>                        setTimeout(function () {&nbsp;</div></li><li><div>                            jQuery('#notifications_container').find('.message').slideUp();&nbsp;</div></li><li><div>                        }, 5000);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function displayMessage( message, messageClass, container ) {&nbsp;</div></li><li><div>                jQuery( container ).find( '.message' ).hide().html( message ).attr( 'class', 'message ' + messageClass ).slideDown();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            function toggleNotificationOverride(isInit) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (isInit)&nbsp;</div></li><li><div>                    jQuery('#notification_override_email').val('');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (jQuery(&quot;.gform_notifications:checked&quot;).length &gt; 0) {&nbsp;</div></li><li><div>                    jQuery('#notifications_override_settings').slideDown();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else {&nbsp;</div></li><li><div>                    jQuery('#notifications_override_settings').slideUp(function () {&nbsp;</div></li><li><div>                        jQuery('#notification_override_email').val('');&nbsp;</div></li><li><div>                    });&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;form method=&quot;post&quot; id=&quot;entry_form&quot; enctype='multipart/form-data'&gt;&nbsp;</div></li><li><div>        &lt;?php wp_nonce_field( 'gforms_save_entry', 'gforms_save_entry' ) ?&gt;&nbsp;</div></li><li><div>        &lt;input type=&quot;hidden&quot; name=&quot;action&quot; id=&quot;action&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>        &lt;input type=&quot;hidden&quot; name=&quot;screen_mode&quot; id=&quot;screen_mode&quot; value=&quot;&lt;?php echo esc_attr( rgpost( 'screen_mode' ) ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;input type=&quot;hidden&quot; name=&quot;entry_id&quot; id=&quot;entry_id&quot; value=&quot;&lt;?php echo absint( $lead['id'] ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div class=&quot;wrap gf_entry_wrap&quot;&gt;&nbsp;</div></li><li><div>        &lt;h2 class=&quot;gf_admin_page_title&quot;&gt;&nbsp;</div></li><li><div>            &lt;span&gt;&lt;?php echo esc_html__( 'Entry #', 'gravityforms' ) . absint( $lead['id'] ); ?&gt;&lt;/span&gt;&lt;span class=&quot;gf_admin_page_subtitle&quot;&gt;&lt;span class=&quot;gf_admin_page_formid&quot;&gt;ID: &lt;?php echo absint( $form['id'] ); ?&gt;&lt;/span&gt;&lt;span class='gf_admin_page_formname'&gt;&lt;?php esc_html_e( 'Form Name', 'gravityforms' ) ?&gt;: &lt;?php echo esc_html( $form['title'] );&nbsp;</div></li><li><div>                $gf_entry_locking = new GFEntryLocking();&nbsp;</div></li><li><div>                $gf_entry_locking-&gt;lock_info( $lead_id ); ?&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php if ( isset( $_GET['pos'] ) ) { ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;gf_entry_detail_pagination&quot;&gt;&nbsp;</div></li><li><div>                &lt;ul&gt;&nbsp;</div></li><li><div>                    &lt;li class=&quot;gf_entry_count&quot;&gt;&nbsp;</div></li><li><div>                        &lt;span&gt;entry &lt;strong&gt;&lt;?php echo $position + 1; ?&gt;&lt;/strong&gt; of &lt;strong&gt;&lt;?php echo $total_count; ?&gt;&lt;/strong&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                    &lt;/li&gt;&nbsp;</div></li><li><div>                    &lt;li class=&quot;gf_entry_prev gf_entry_pagination&quot;&gt;&lt;?php echo GFEntryDetail::entry_detail_pagination_link( $prev_pos, 'Previous Entry', 'gf_entry_prev_link', 'fa fa-arrow-circle-o-left' ); ?&gt;&lt;/li&gt;&nbsp;</div></li><li><div>                    &lt;li class=&quot;gf_entry_next gf_entry_pagination&quot;&gt;&lt;?php echo GFEntryDetail::entry_detail_pagination_link( $next_pos, 'Next Entry', 'gf_entry_next_link', 'fa fa-arrow-circle-o-right' ); ?&gt;&lt;/li&gt;&nbsp;</div></li><li><div>                &lt;/ul&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php RGForms::top_toolbar() ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div id=&quot;poststuff&quot; class=&quot;metabox-holder has-right-sidebar&quot;&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;side-info-column&quot; class=&quot;inner-sidebar&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php do_action( 'gform_entry_detail_sidebar_before', $form, $lead ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;!-- INFO BOX --&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;submitdiv&quot; class=&quot;stuffbox&quot;&gt;&nbsp;</div></li><li><div>            &lt;h3 class=&quot;hndle&quot; style=&quot;cursor:default;&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php esc_html_e( 'Entry', 'gravityforms' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>            &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                &lt;div id=&quot;submitcomment&quot; class=&quot;submitbox&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div id=&quot;minor-publishing&quot; style=&quot;padding:10px;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'Entry Id', 'gravityforms' ); ?&gt;: &lt;?php echo absint( $lead['id'] ) ?&gt;&lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'Submitted on', 'gravityforms' ); ?&gt;: &lt;?php echo esc_html( GFCommon::format_date( $lead['date_created'], false, 'Y/m/d' ) ) ?&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'User IP', 'gravityforms' ); ?&gt;: &lt;?php echo esc_html( $lead['ip'] ); ?&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        if ( ! empty( $lead['created_by'] ) && $usermeta = get_userdata( $lead['created_by'] ) ) {&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;?php esc_html_e( 'User', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                            &lt;a href=&quot;user-edit.php?user_id=&lt;?php echo absint( $lead['created_by'] ) ?&gt;&quot; alt=&quot;&lt;?php esc_attr_e( 'View user profile', 'gravityforms' ); ?&gt;&quot; title=&quot;&lt;?php esc_attr_e( 'View user profile', 'gravityforms' ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $usermeta-&gt;user_login ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                            &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        &lt;?php esc_html_e( 'Embed Url', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                        &lt;a href=&quot;&lt;?php echo esc_url( $lead['source_url'] ) ?&gt;&quot; target=&quot;_blank&quot; alt=&quot;&lt;?php echo esc_attr( $lead['source_url'] ) ?&gt;&quot; title=&quot;&lt;?php echo esc_attr( $lead['source_url'] ) ?&gt;&quot;&gt;.../&lt;?php echo esc_html( GFCommon::truncate_url( $lead['source_url'] ) ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        if ( ! empty( $lead['post_id'] ) ) {&nbsp;</div></li><li><div>                            $post = get_post( $lead['post_id'] );&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;?php esc_html_e( 'Edit Post', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                            &lt;a href=&quot;post.php?action=edit&post=&lt;?php echo absint( $post-&gt;ID ) ?&gt;&quot; alt=&quot;&lt;?php esc_attr_e( 'Click to edit post', 'gravityforms' ); ?&gt;&quot; title=&quot;&lt;?php esc_attr_e( 'Click to edit post', 'gravityforms' ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $post-&gt;post_title ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                            &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( do_action( 'gform_enable_entry_info_payment_details', true, $lead ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if ( ! empty( $lead['payment_status'] ) ) {&nbsp;</div></li><li><div>                                echo $lead['transaction_type'] != 2 ? esc_html__( 'Payment Status', 'gravityforms' ) : esc_html__( 'Subscription Status', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                                &lt;span id=&quot;gform_payment_status&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                                    /**&nbsp;</div></li><li><div>                                     * Filters through a form payment status and allows modification&nbsp;</div></li><li><div>                                     *&nbsp;</div></li><li><div>                                     * @param string $lead['payment_status] A payment status to filter though&nbsp;</div></li><li><div>                                     * @param array $form The Form Object to filter through&nbsp;</div></li><li><div>                                     * @param array $lead The Lead Object to filter through&nbsp;</div></li><li><div>                                     */&nbsp;</div></li><li><div>                                    echo apply_filters( 'gform_payment_status', $lead['payment_status'], $form, $lead ) ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                if ( ! empty( $lead['payment_date'] ) ) {&nbsp;</div></li><li><div>                                    echo $lead['transaction_type'] != 2 ? esc_html__( 'Payment Date', 'gravityforms' ) : esc_html__( 'Start Date', 'gravityforms' ) ?&gt;: &lt;?php echo GFCommon::format_date( $lead['payment_date'], false, 'Y/m/d', $lead['transaction_type'] != 2 ) ?&gt;&nbsp;</div></li><li><div>                                    &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if ( ! empty( $lead['transaction_id'] ) ) {&nbsp;</div></li><li><div>                                    echo $lead['transaction_type'] != 2 ? esc_html__( 'Transaction Id', 'gravityforms' ) : esc_html__( 'Subscriber Id', 'gravityforms' ); ?&gt;: &lt;?php echo esc_html( $lead['transaction_id'] ); ?&gt;&nbsp;</div></li><li><div>                                    &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if ( ! rgblank( $lead['payment_amount'] ) ) {&nbsp;</div></li><li><div>                                    echo $lead['transaction_type'] != 2 ? esc_html__( 'Payment Amount', 'gravityforms' ) : esc_html__( 'Subscription Amount', 'gravityforms' ); ?&gt;: &lt;?php echo GFCommon::to_money( $lead['payment_amount'], $lead['currency'] ) ?&gt;&nbsp;</div></li><li><div>                                    &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        do_action( 'gform_entry_info', $form['id'], $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;div id=&quot;major-publishing-actions&quot;&gt;&nbsp;</div></li><li><div>                        &lt;div id=&quot;delete-action&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            switch ( $lead['status'] ) {&nbsp;</div></li><li><div>                                case 'spam' :&nbsp;</div></li><li><div>                                    if ( GFCommon::spam_enabled( $form['id'] ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        &lt;a onclick=&quot;jQuery('#action').val('unspam'); jQuery('#entry_form').submit()&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Not Spam', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                        &lt;?php&nbsp;</div></li><li><div>                                        echo GFCommon::current_user_can_any( 'gravityforms_delete_entries' ) ? '|' : '';&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                    if ( GFCommon::current_user_can_any( 'gravityforms_delete_entries' ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        &lt;a class=&quot;submitdelete deletion&quot; onclick=&quot;if ( confirm('&lt;?php echo esc_js( __( &quot;You are about to delete this entry. 'Cancel' to stop, 'OK' to delete.&quot;, 'gravityforms' ) ); ?&gt;') ) {jQuery('#action').val('delete'); jQuery('#entry_form').submit(); return true;} return false;&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Delete Permanently', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                case 'trash' :&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                    &lt;a onclick=&quot;jQuery('#action').val('restore'); jQuery('#entry_form').submit()&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Restore', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    if ( GFCommon::current_user_can_any( 'gravityforms_delete_entries' ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        |&nbsp;</div></li><li><div>                                        &lt;a class=&quot;submitdelete deletion&quot; onclick=&quot;if ( confirm('&lt;?php echo esc_js( __( &quot;You are about to delete this entry. 'Cancel' to stop, 'OK' to delete.&quot;, 'gravityforms' ) ); ?&gt;') ) {jQuery('#action').val('delete'); jQuery('#entry_form').submit(); return true;} return false;&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Delete Permanently', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                default :&nbsp;</div></li><li><div>                                    if ( GFCommon::current_user_can_any( 'gravityforms_delete_entries' ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        &lt;a class=&quot;submitdelete deletion&quot; onclick=&quot;jQuery('#action').val('trash'); jQuery('#entry_form').submit()&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Move to Trash', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                        &lt;?php&nbsp;</div></li><li><div>                                        echo GFCommon::spam_enabled( $form['id'] ) ? '|' : '';&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                    if ( GFCommon::spam_enabled( $form['id'] ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        &lt;a class=&quot;submitdelete deletion&quot; onclick=&quot;jQuery('#action').val('spam'); jQuery('#entry_form').submit()&quot; href=&quot;#&quot;&gt;&lt;?php esc_html_e( 'Mark as Spam', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;div id=&quot;publishing-action&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            if ( GFCommon::current_user_can_any( 'gravityforms_edit_entries' ) && $lead['status'] != 'trash' ) {&nbsp;</div></li><li><div>                                $button_text = $mode == 'view' ? __( 'Edit', 'gravityforms' ) : __( 'Update', 'gravityforms' );&nbsp;</div></li><li><div>                                $disabled = $mode == 'view' ? '' : ' disabled=&quot;disabled&quot; ';&nbsp;</div></li><li><div>                                $update_button_id = $mode == 'view' ? 'gform_edit_button' : 'gform_update_button';&nbsp;</div></li><li><div>                                $button_click = $mode == 'view' ? &quot;jQuery('#screen_mode').val('edit');&quot; : &quot;jQuery('#action').val('update'); jQuery('#screen_mode').val('view');&quot;;&nbsp;</div></li><li><div>                                $update_button = '&lt;input id=&quot;' . $update_button_id . '&quot; ' . $disabled . ' class=&quot;button button-large button-primary&quot; type=&quot;submit&quot; tabindex=&quot;4&quot; value=&quot;' . esc_attr( $button_text ) . '&quot; name=&quot;save&quot; onclick=&quot;' . $button_click . '&quot;/&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                /**&nbsp;</div></li><li><div>                                 * A filter to allow the modification of the button to update an entry detail&nbsp;</div></li><li><div>                                 *&nbsp;</div></li><li><div>                                 * @param string $update_button The HTML Rendered for the Entry Detail update button&nbsp;</div></li><li><div>                                 */&nbsp;</div></li><li><div>                                echo apply_filters( 'gform_entrydetail_update_button', $update_button );&nbsp;</div></li><li><div>                                if ( $mode == 'edit' ) {&nbsp;</div></li><li><div>                                    echo '&nbsp;&nbsp;&lt;input class=&quot;button button-large&quot; type=&quot;submit&quot; tabindex=&quot;5&quot; value=&quot;' . esc_attr__( 'Cancel', 'gravityforms' ) . '&quot; name=&quot;cancel&quot; onclick=&quot;jQuery(\'#screen_mode\').val(\'view\');&quot;/&gt;';&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * A filter to enable or disable the extra payment details box in an entry&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param bool To enable (true) or disable (false)&nbsp;</div></li><li><div>         * @param array $lead The Lead object to filter&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        if ( ! empty( $lead['payment_status'] ) && ! apply_filters( 'gform_enable_entry_info_payment_details', true, $lead ) ) {&nbsp;</div></li><li><div>            self::payment_details_box( $lead, $form );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php do_action( 'gform_entry_detail_sidebar_middle', $form, $lead ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php if ( GFCommon::current_user_can_any( 'gravityforms_edit_entry_notes' ) ) { ?&gt;&nbsp;</div></li><li><div>            &lt;!-- start notifications --&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;postbox&quot; id=&quot;notifications_container&quot;&gt;&nbsp;</div></li><li><div>                &lt;h3 class=&quot;hndle&quot; style=&quot;cursor:default;&quot;&gt;&nbsp;</div></li><li><div>                    &lt;span&gt;&lt;?php esc_html_e( 'Notifications', 'gravityforms' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div class=&quot;message&quot; style=&quot;display:none;padding:10px;&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;div&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $notifications = GFCommon::get_notifications( 'resend_notifications', $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( ! is_array( $notifications ) || count( $form['notifications'] ) &lt;= 0 ) {&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;p class=&quot;description&quot;&gt;&lt;?php esc_html_e( 'You cannot resend notifications for this entry because this form does not currently have any notifications configured.', 'gravityforms' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;a href=&quot;&lt;?php echo admin_url( &quot;admin.php?page=gf_edit_forms&view=settings&subview=notification&id={$form_id}&quot; ) ?&gt;&quot; class=&quot;button&quot;&gt;&lt;?php esc_html_e( 'Configure Notifications', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            foreach ( $notifications as $notification ) {&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;input type=&quot;checkbox&quot; class=&quot;gform_notifications&quot; value=&quot;&lt;?php echo esc_attr( $notification['id'] ); ?&gt;&quot; id=&quot;notification_&lt;?php echo esc_attr( $notification['id'] ); ?&gt;&quot; onclick=&quot;toggleNotificationOverride();&quot; /&gt;&nbsp;</div></li><li><div>                                &lt;label for=&quot;notification_&lt;?php echo esc_attr( $notification['id'] ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $notification['name'] ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                                &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;div id=&quot;notifications_override_settings&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                &lt;p class=&quot;description&quot; style=&quot;padding-top:0; margin-top:0; width:99%;&quot;&gt;You may override the default notification settings&nbsp;</div></li><li><div>                                    by entering a comma delimited list of emails to which the selected notifications should be sent.&lt;/p&gt;&nbsp;</div></li><li><div>                                &lt;label for=&quot;notification_override_email&quot;&gt;&lt;?php esc_html_e( 'Send To', 'gravityforms' ); ?&gt; &lt;?php gform_tooltip( 'notification_override_email' ) ?&gt;&lt;/label&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;input type=&quot;text&quot; name=&quot;notification_override_email&quot; id=&quot;notification_override_email&quot; style=&quot;width:99%;&quot; /&gt;&nbsp;</div></li><li><div>                                &lt;br /&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;input type=&quot;button&quot; name=&quot;notification_resend&quot; value=&quot;&lt;?php esc_attr_e( 'Resend Notifications', 'gravityforms' ) ?&gt;&quot; class=&quot;button&quot; style=&quot;&quot; onclick=&quot;ResendNotifications();&quot; /&gt;&nbsp;</div></li><li><div>                            &lt;span id=&quot;please_wait_container&quot; style=&quot;display:none; margin-left: 5px;&quot;&gt;&nbsp;</div></li><li><div>                                &lt;i class='gficon-gravityforms-spinner-icon gficon-spin'&gt;&lt;/i&gt; &lt;?php esc_html_e( 'Resending...', 'gravityforms' ); ?&gt;&nbsp;</div></li><li><div>                            &lt;/span&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;!-- / end notifications --&gt;&nbsp;</div></li><li><div>        &lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;!-- begin print button --&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;detail-view-print&quot;&gt;&nbsp;</div></li><li><div>            &lt;a href=&quot;javascript:;&quot; onclick=&quot;var notes_qs = jQuery('#gform_print_notes').is(':checked') ? '&notes=1' : ''; var url='&lt;?php echo trailingslashit( site_url() ) ?&gt;?gf_page=print-entry&fid=&lt;?php echo absint( $form['id'] ) ?&gt;&lid=&lt;?php echo absint( $lead['id'] ); ?&gt;' + notes_qs; window.open (url, 'printwindow');&quot; class=&quot;button&quot;&gt;&lt;?php esc_html_e( 'Print', 'gravityforms' ) ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>            &lt;?php if ( GFCommon::current_user_can_any( 'gravityforms_view_entry_notes' ) ) { ?&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;checkbox&quot; name=&quot;print_notes&quot; value=&quot;print_notes&quot; checked=&quot;checked&quot; id=&quot;gform_print_notes&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;print_notes&quot;&gt;&lt;?php esc_html_e( 'include notes', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;?php } ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;!-- end print button --&gt;&nbsp;</div></li><li><div>        &lt;?php do_action( 'gform_entry_detail_sidebar_after', $form, $lead ); ?&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div id=&quot;post-body&quot; class=&quot;has-sidebar&quot;&gt;&nbsp;</div></li><li><div>            &lt;div id=&quot;post-body-content&quot; class=&quot;has-sidebar-content&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                do_action( 'gform_entry_detail_content_before', $form, $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $form = gf_apply_filters( array( 'gform_admin_pre_render', $form['id'] ), $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( $mode == 'view' ) {&nbsp;</div></li><li><div>                    self::lead_detail_grid( $form, $lead, true );&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    self::lead_detail_edit( $form, $lead );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                do_action( 'gform_entry_detail', $form, $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( GFCommon::current_user_can_any( 'gravityforms_view_entry_notes' ) ) {&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>                        &lt;h3&gt;&nbsp;</div></li><li><div>                            &lt;label for=&quot;name&quot;&gt;&lt;?php esc_html_e( 'Notes', 'gravityforms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                        &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        &lt;form method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php wp_nonce_field( 'gforms_update_note', 'gforms_update_note' ) ?&gt;&nbsp;</div></li><li><div>                            &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                $notes = RGFormsModel::get_lead_notes( $lead['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                //getting email values&nbsp;</div></li><li><div>                                $email_fields = GFCommon::get_email_fields( $form );&nbsp;</div></li><li><div>                                $emails = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                foreach ( $email_fields as $email_field ) {&nbsp;</div></li><li><div>                                    if ( ! empty( $lead[ $email_field-&gt;id ] ) ) {&nbsp;</div></li><li><div>                                        $emails[] = $lead[ $email_field-&gt;id ];&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                //displaying notes grid&nbsp;</div></li><li><div>                                $subject = '';&nbsp;</div></li><li><div>                                self::notes_grid( $notes, true, $emails, $subject );&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;/form&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                do_action( 'gform_entry_detail_content_after', $form, $lead );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/form&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( rgpost( 'action' ) == 'update' ) {&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;updated fade&quot; style=&quot;padding:6px;&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php esc_html_e( 'Entry Updated.', 'gravityforms' ); ?&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function lead_detail_edit( $form, $lead ) {&nbsp;</div></li><li><div>        $form_id = absint( $form['id'] );&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;postbox&quot;&gt;&nbsp;</div></li><li><div>            &lt;h3&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;name&quot;&gt;&lt;?php esc_html_e( 'Details', 'gravityforms' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                &lt;table class=&quot;form-table entry-details&quot;&gt;&nbsp;</div></li><li><div>                    &lt;tbody&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    foreach ( $form['fields'] as $field ) {&nbsp;</div></li><li><div>                        $field_id = $field-&gt;id;&nbsp;</div></li><li><div>                        $content = $value = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        switch ( $field-&gt;get_input_type() ) {&nbsp;</div></li><li><div>                            case 'section' :&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                $content = '&nbsp;</div></li><li><div>                                &lt;tr valign=&quot;top&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;td class=&quot;detail-view&quot;&gt;&nbsp;</div></li><li><div>                                        &lt;div style=&quot;margin-bottom:10px; border-bottom:1px dotted #ccc;&quot;&gt;&nbsp;</div></li><li><div>                                            &lt;h2 class=&quot;detail_gsection_title&quot;&gt;' . esc_html( GFCommon::get_label( $field ) ) . '&lt;/h2&gt;&nbsp;</div></li><li><div>                                        &lt;/div&gt;&nbsp;</div></li><li><div>                                    &lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            case 'captcha':&nbsp;</div></li><li><div>                            case 'html':&nbsp;</div></li><li><div>                            case 'password':&nbsp;</div></li><li><div>                                //ignore certain fields&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            default :&nbsp;</div></li><li><div>                                $value = RGFormsModel::get_lead_field_value( $lead, $field );&nbsp;</div></li><li><div>                                $td_id = 'field_' . $form_id . '_' . $field_id;&nbsp;</div></li><li><div>                                $td_id = esc_attr( $td_id );&nbsp;</div></li><li><div>                                $content = &quot;&lt;tr valign='top'&gt;&lt;td class='detail-view' id='{$td_id}'&gt;&lt;label class='detail-label'&gt;&quot; . esc_html( GFCommon::get_label( $field ) ) . '&lt;/label&gt;' .&nbsp;</div></li><li><div>                                    GFCommon::get_field_input( $field, $value, $lead['id'], $form_id, $form ) . '&lt;/td&gt;&lt;/tr&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $content = apply_filters( 'gform_field_content', $content, $field, $value, $lead['id'], $form['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        echo $content;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;/tbody&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>                &lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class=&quot;gform_footer&quot;&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;hidden&quot; name=&quot;gform_unique_id&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;hidden&quot; name=&quot;gform_uploaded_files&quot; id='gform_uploaded_files_&lt;?php echo absint( $form_id ); ?&gt;' value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function notes_grid( $notes, $is_editable, $emails = null, $subject = '' ) {&nbsp;</div></li><li><div>        if ( sizeof( $notes ) &gt; 0 && $is_editable && GFCommon::current_user_can_any( 'gravityforms_edit_entry_notes' ) ) {&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;alignleft actions&quot; style=&quot;padding:3px 0;&quot;&gt;&nbsp;</div></li><li><div>                &lt;label class=&quot;hidden&quot; for=&quot;bulk_action&quot;&gt;&lt;?php esc_html_e( ' Bulk action', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                &lt;select name=&quot;bulk_action&quot; id=&quot;bulk_action&quot;&gt;&nbsp;</div></li><li><div>                    &lt;option value=''&gt;&lt;?php esc_html_e( ' Bulk action ', 'gravityforms' ) ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                    &lt;option value='delete'&gt;&lt;?php esc_html_e( 'Delete', 'gravityforms' ) ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;/select&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $apply_button = '&lt;input type=&quot;submit&quot; class=&quot;button&quot; value=&quot;' . esc_attr__( 'Apply', 'gravityforms' ) . '&quot; onclick=&quot;jQuery(\'#action\').val(\'bulk\');&quot; style=&quot;width: 50px;&quot; /&gt;';&nbsp;</div></li><li><div>                /**&nbsp;</div></li><li><div>                 * A filter to allow you to modify the note apply button&nbsp;</div></li><li><div>                 *&nbsp;</div></li><li><div>                 * @param string $apply_button The Apply Button HTML&nbsp;</div></li><li><div>                 */&nbsp;</div></li><li><div>                echo apply_filters( 'gform_notes_apply_button', $apply_button );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;table class=&quot;widefat fixed entry-detail-notes&quot; cellspacing=&quot;0&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            if ( ! $is_editable ) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;thead&gt;&nbsp;</div></li><li><div>                &lt;tr&gt;&nbsp;</div></li><li><div>                    &lt;th id=&quot;notes&quot;&gt;Notes&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;/tr&gt;&nbsp;</div></li><li><div>                &lt;/thead&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;tbody id=&quot;the-comment-list&quot; class=&quot;list:comment&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            $count = 0;&nbsp;</div></li><li><div>            $notes_count = sizeof( $notes );&nbsp;</div></li><li><div>            foreach ( $notes as $note ) {&nbsp;</div></li><li><div>                $count ++;&nbsp;</div></li><li><div>                $is_last = $count &gt;= $notes_count ? true : false;&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;tr valign=&quot;top&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    if ( $is_editable && GFCommon::current_user_can_any( 'gravityforms_edit_entry_notes' ) ) {&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;th class=&quot;check-column&quot; scope=&quot;row&quot; style=&quot;padding:9px 3px 0 0&quot;&gt;&nbsp;</div></li><li><div>                        &lt;input type=&quot;checkbox&quot; value=&quot;&lt;?php echo $note-&gt;id ?&gt;&quot; name=&quot;note[]&quot; /&gt;&nbsp;</div></li><li><div>                    &lt;/th&gt;&nbsp;</div></li><li><div>                    &lt;td colspan=&quot;2&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else {&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                    &lt;td class=&quot;entry-detail-note&lt;?php echo $is_last ? ' lastrow' : '' ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $class = $note-&gt;note_type ? &quot; gforms_note_{$note-&gt;note_type}&quot; : '';&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                        &lt;div style=&quot;margin-top:4px;&quot;&gt;&nbsp;</div></li><li><div>                            &lt;div class=&quot;note-avatar&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                                /**&nbsp;</div></li><li><div>                                 * Allows filtering of the notes avatar&nbsp;</div></li><li><div>                                 *&nbsp;</div></li><li><div>                                 * @param array $note The Note object that is being filtered when modifying the avatar&nbsp;</div></li><li><div>                                 */&nbsp;</div></li><li><div>                                echo apply_filters( 'gform_notes_avatar', get_avatar( $note-&gt;user_id, 48 ), $note ); ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;h6 class=&quot;note-author&quot;&gt;&lt;?php echo esc_html( $note-&gt;user_name ) ?&gt;&lt;/h6&gt;&nbsp;</div></li><li><div>                            &lt;p class=&quot;note-email&quot;&gt;&nbsp;</div></li><li><div>                                &lt;a href=&quot;mailto:&lt;?php echo esc_attr( $note-&gt;user_email ) ?&gt;&quot;&gt;&lt;?php echo esc_html( $note-&gt;user_email ) ?&gt;&lt;/a&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                                &lt;?php esc_html_e( 'added on', 'gravityforms' ); ?&gt; &lt;?php echo esc_html( GFCommon::format_date( $note-&gt;date_created, false ) ) ?&gt;&nbsp;</div></li><li><div>                            &lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>                        &lt;div class=&quot;detail-note-content&lt;?php echo $class ?&gt;&quot;&gt;&lt;?php echo nl2br( esc_html( $note-&gt;value ) ) ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                    &lt;/td&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ( $is_editable && GFCommon::current_user_can_any( 'gravityforms_edit_entry_notes' ) ) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;tr&gt;&nbsp;</div></li><li><div>                    &lt;td colspan=&quot;3&quot; style=&quot;padding:10px;&quot; class=&quot;lastrow&quot;&gt;&nbsp;</div></li><li><div>                        &lt;textarea name=&quot;new_note&quot; style=&quot;width:100%; height:50px; margin-bottom:4px;&quot;&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>                        $note_button = '&lt;input type=&quot;submit&quot; name=&quot;add_note&quot; value=&quot;' . esc_attr__( 'Add Note', 'gravityforms' ) . '&quot; class=&quot;button&quot; style=&quot;width:auto;padding-bottom:2px;&quot; onclick=&quot;jQuery(\'#action\').val(\'add_note\');&quot;/&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        /**&nbsp;</div></li><li><div>                         * Allows for modification of the &quot;Add Note&quot; button for Entry Notes&nbsp;</div></li><li><div>                         *&nbsp;</div></li><li><div>                         * @param string $note_button The HTML for the &quot;Add Note&quot; Button&nbsp;</div></li><li><div>                         */&nbsp;</div></li><li><div>                        echo apply_filters( 'gform_addnote_button', $note_button );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( ! empty( $emails ) ) {&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &nbsp;&nbsp;&nbsp;</div></li><li><div>                            &lt;span&gt;&nbsp;</div></li><li><div>                                &lt;select name=&quot;gentry_email_notes_to&quot; onchange=&quot;if(jQuery(this).val() != '') {jQuery('#gentry_email_subject_container').css('display', 'inline');} else{jQuery('#gentry_email_subject_container').css('display', 'none');}&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;option value=&quot;&quot;&gt;&lt;?php esc_html_e( 'Also email this note to', 'gravityforms' ) ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                    &lt;?php foreach ( $emails as $email ) { ?&gt;&nbsp;</div></li><li><div>                                        &lt;option value=&quot;&lt;?php echo esc_attr( $email ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $email ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                    &lt;?php } ?&gt;&nbsp;</div></li><li><div>                                &lt;/select&gt;&nbsp;</div></li><li><div>                                &nbsp;&nbsp;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                &lt;span id='gentry_email_subject_container' style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;label for=&quot;gentry_email_subject&quot;&gt;&lt;?php esc_html_e( 'Subject:', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                                    &lt;input type=&quot;text&quot; name=&quot;gentry_email_subject&quot; id=&quot;gentry_email_subject&quot; value=&quot;&quot; style=&quot;width:35%&quot; /&gt;&nbsp;</div></li><li><div>                                &lt;/span&gt;&nbsp;</div></li><li><div>                            &lt;/span&gt;&nbsp;</div></li><li><div>                        &lt;?php } ?&gt;&nbsp;</div></li><li><div>                    &lt;/td&gt;&nbsp;</div></li><li><div>                &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;/tbody&gt;&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function lead_detail_grid( $form, $lead, $allow_display_empty_fields = false ) {&nbsp;</div></li><li><div>        $form_id = absint( $form['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $display_empty_fields = false;&nbsp;</div></li><li><div>        if ( $allow_display_empty_fields ) {&nbsp;</div></li><li><div>            $display_empty_fields = rgget( 'gf_display_empty_fields', $_COOKIE );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * A filter to set if empty fields shown be shown in the entry details&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param bool $display_empty_fields True or false to show the fields&nbsp;</div></li><li><div>         * @param array $form The Form object to filter&nbsp;</div></li><li><div>         * @param array $lead The Lead object to filter&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $display_empty_fields = apply_filters( 'gform_entry_detail_grid_display_empty_fields', $display_empty_fields, $form, $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;table cellspacing=&quot;0&quot; class=&quot;widefat fixed entry-detail-view&quot;&gt;&nbsp;</div></li><li><div>            &lt;thead&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th id=&quot;details&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    $title = sprintf( '%s : %s %s', esc_html( $form['title'] ), esc_html__( 'Entry # ', 'gravityforms' ), absint( $lead['id'] ) );&nbsp;</div></li><li><div>                    echo apply_filters( 'gform_entry_detail_title', $title, $form, $lead );&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/th&gt;&nbsp;</div></li><li><div>                &lt;th style=&quot;width:140px; font-size:10px; text-align: right;&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    if ( $allow_display_empty_fields ) {&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                        &lt;input type=&quot;checkbox&quot; id=&quot;gentry_display_empty_fields&quot; &lt;?php echo $display_empty_fields ? &quot;checked='checked'&quot; : '' ?&gt; onclick=&quot;ToggleShowEmptyFields();&quot; /&gt;&nbsp;&nbsp;&nbsp;</div></li><li><div>                        &lt;label for=&quot;gentry_display_empty_fields&quot;&gt;&lt;?php esc_html_e( 'show empty fields', 'gravityforms' ) ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                &lt;/th&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;/thead&gt;&nbsp;</div></li><li><div>            &lt;tbody&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            $count = 0;&nbsp;</div></li><li><div>            $field_count = sizeof( $form['fields'] );&nbsp;</div></li><li><div>            $has_product_fields = false;&nbsp;</div></li><li><div>            foreach ( $form['fields'] as $field ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $content = $value = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch ( $field-&gt;get_input_type() ) {&nbsp;</div></li><li><div>                    case 'section' :&nbsp;</div></li><li><div>                        if ( ! GFCommon::is_section_empty( $field, $form, $lead ) || $display_empty_fields ) {&nbsp;</div></li><li><div>                            $count ++;&nbsp;</div></li><li><div>                            $is_last = $count &gt;= $field_count ? ' lastrow' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $content = '&nbsp;</div></li><li><div>                                &lt;tr&gt;&nbsp;</div></li><li><div>                                    &lt;td colspan=&quot;2&quot; class=&quot;entry-view-section-break' . $is_last . '&quot;&gt;' . esc_html( GFCommon::get_label( $field ) ) . '&lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case 'captcha':&nbsp;</div></li><li><div>                    case 'html':&nbsp;</div></li><li><div>                    case 'password':&nbsp;</div></li><li><div>                    case 'page':&nbsp;</div></li><li><div>                        //ignore captcha, html, password, page field&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    default :&nbsp;</div></li><li><div>                        //ignore product fields as they will be grouped together at the end of the grid&nbsp;</div></li><li><div>                        if ( GFCommon::is_product_field( $field-&gt;type ) ) {&nbsp;</div></li><li><div>                            $has_product_fields = true;&nbsp;</div></li><li><div>                            continue;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $value = RGFormsModel::get_lead_field_value( $lead, $field );&nbsp;</div></li><li><div>                        $display_value = GFCommon::get_lead_field_display( $field, $value, $lead['currency'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $display_value = apply_filters( 'gform_entry_field_value', $display_value, $field, $lead, $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ( $display_empty_fields || ! empty( $display_value ) || $display_value === '0' ) {&nbsp;</div></li><li><div>                            $count ++;&nbsp;</div></li><li><div>                            $is_last = $count &gt;= $field_count && ! $has_product_fields ? true : false;&nbsp;</div></li><li><div>                            $last_row = $is_last ? ' lastrow' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $display_value = empty( $display_value ) && $display_value !== '0' ? '&nbsp;' : $display_value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $content = '&nbsp;</div></li><li><div>                                &lt;tr&gt;&nbsp;</div></li><li><div>                                    &lt;td colspan=&quot;2&quot; class=&quot;entry-view-field-name&quot;&gt;' . esc_html( GFCommon::get_label( $field ) ) . '&lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;&nbsp;</div></li><li><div>                                &lt;tr&gt;&nbsp;</div></li><li><div>                                    &lt;td colspan=&quot;2&quot; class=&quot;entry-view-field-value' . $last_row . '&quot;&gt;' . $display_value . '&lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $content = apply_filters( 'gform_field_content', $content, $field, $value, $lead['id'], $form['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                echo $content;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $products = array();&nbsp;</div></li><li><div>            if ( $has_product_fields ) {&nbsp;</div></li><li><div>                $products = GFCommon::get_product_fields( $form, $lead );&nbsp;</div></li><li><div>                if ( ! empty( $products['products'] ) ) {&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td colspan=&quot;2&quot; class=&quot;entry-view-field-name&quot;&gt;&lt;?php echo esc_html( gf_apply_filters( array( 'gform_order_label', $form_id ), __( 'Order', 'gravityforms' ), $form_id ) ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;td colspan=&quot;2&quot; class=&quot;entry-view-field-value lastrow&quot;&gt;&nbsp;</div></li><li><div>                            &lt;table class=&quot;entry-products&quot; cellspacing=&quot;0&quot; width=&quot;97%&quot;&gt;&nbsp;</div></li><li><div>                                &lt;colgroup&gt;&nbsp;</div></li><li><div>                                    &lt;col class=&quot;entry-products-col1&quot; /&gt;&nbsp;</div></li><li><div>                                    &lt;col class=&quot;entry-products-col2&quot; /&gt;&nbsp;</div></li><li><div>                                    &lt;col class=&quot;entry-products-col3&quot; /&gt;&nbsp;</div></li><li><div>                                    &lt;col class=&quot;entry-products-col4&quot; /&gt;&nbsp;</div></li><li><div>                                &lt;/colgroup&gt;&nbsp;</div></li><li><div>                                &lt;thead&gt;&nbsp;</div></li><li><div>                                &lt;th scope=&quot;col&quot;&gt;&lt;?php echo gf_apply_filters( array( 'gform_product', $form_id ), __( 'Product', 'gravityforms' ), $form_id ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                                &lt;th scope=&quot;col&quot; class=&quot;textcenter&quot;&gt;&lt;?php echo esc_html( gf_apply_filters( array( 'gform_product_qty', $form_id ), __( 'Qty', 'gravityforms' ), $form_id ) ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                                &lt;th scope=&quot;col&quot;&gt;&lt;?php echo esc_html( gf_apply_filters( array( 'gform_product_unitprice', $form_id ), __( 'Unit Price', 'gravityforms' ), $form_id ) ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                                &lt;th scope=&quot;col&quot;&gt;&lt;?php echo esc_html( gf_apply_filters( array( 'gform_product_price', $form_id ), __( 'Price', 'gravityforms' ), $form_id ) ); ?&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                                &lt;/thead&gt;&nbsp;</div></li><li><div>                                &lt;tbody&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                $total = 0;&nbsp;</div></li><li><div>                                foreach ( $products['products'] as $product ) {&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                    &lt;tr&gt;&nbsp;</div></li><li><div>                                        &lt;td&gt;&nbsp;</div></li><li><div>                                            &lt;div class=&quot;product_name&quot;&gt;&lt;?php echo esc_html( $product['name'] ); ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                                            &lt;ul class=&quot;product_options&quot;&gt;&nbsp;</div></li><li><div>                                                &lt;?php&nbsp;</div></li><li><div>                                                $price = GFCommon::to_number( $product['price'] );&nbsp;</div></li><li><div>                                                if ( is_array( rgar( $product, 'options' ) ) ) {&nbsp;</div></li><li><div>                                                    $count = sizeof( $product['options'] );&nbsp;</div></li><li><div>                                                    $index = 1;&nbsp;</div></li><li><div>                                                    foreach ( $product['options'] as $option ) {&nbsp;</div></li><li><div>                                                        $price += GFCommon::to_number( $option['price'] );&nbsp;</div></li><li><div>                                                        $class = $index == $count ? &quot; class='lastitem'&quot; : '';&nbsp;</div></li><li><div>                                                        $index ++;&nbsp;</div></li><li><div>                                                        ?&gt;&nbsp;</div></li><li><div>                                                        &lt;li&lt;?php echo $class ?&gt;&gt;&lt;?php echo $option['option_label'] ?&gt;&lt;/li&gt;&nbsp;</div></li><li><div>                                                    &lt;?php&nbsp;</div></li><li><div>                                                    }&nbsp;</div></li><li><div>                                                }&nbsp;</div></li><li><div>                                                $subtotal = floatval( $product['quantity'] ) * $price;&nbsp;</div></li><li><div>                                                $total += $subtotal;&nbsp;</div></li><li><div>                                                ?&gt;&nbsp;</div></li><li><div>                                            &lt;/ul&gt;&nbsp;</div></li><li><div>                                        &lt;/td&gt;&nbsp;</div></li><li><div>                                        &lt;td class=&quot;textcenter&quot;&gt;&lt;?php echo esc_html( $product['quantity'] ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                        &lt;td&gt;&lt;?php echo GFCommon::to_money( $price, $lead['currency'] ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                        &lt;td&gt;&lt;?php echo GFCommon::to_money( $subtotal, $lead['currency'] ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                    &lt;/tr&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                $total += floatval( $products['shipping']['price'] );&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;/tbody&gt;&nbsp;</div></li><li><div>                                &lt;tfoot&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                if ( ! empty( $products['shipping']['name'] ) ) {&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                    &lt;tr&gt;&nbsp;</div></li><li><div>                                        &lt;td colspan=&quot;2&quot; rowspan=&quot;2&quot; class=&quot;emptycell&quot;&gt;&nbsp;&lt;/td&gt;&nbsp;</div></li><li><div>                                        &lt;td class=&quot;textright shipping&quot;&gt;&lt;?php echo esc_html( $products['shipping']['name'] ); ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                        &lt;td class=&quot;shipping_amount&quot;&gt;&lt;?php echo GFCommon::to_money( $products['shipping']['price'], $lead['currency'] ) ?&gt;&nbsp;&lt;/td&gt;&nbsp;</div></li><li><div>                                    &lt;/tr&gt;&nbsp;</div></li><li><div>                                &lt;?php&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;tr&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    if ( empty( $products['shipping']['name'] ) ) {&nbsp;</div></li><li><div>                                        ?&gt;&nbsp;</div></li><li><div>                                        &lt;td colspan=&quot;2&quot; class=&quot;emptycell&quot;&gt;&nbsp;&lt;/td&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                    &lt;td class=&quot;textright grandtotal&quot;&gt;&lt;?php esc_html_e( 'Total', 'gravityforms' ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                    &lt;td class=&quot;grandtotal_amount&quot;&gt;&lt;?php echo GFCommon::to_money( $total, $lead['currency'] ) ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                                &lt;/tr&gt;&nbsp;</div></li><li><div>                                &lt;/tfoot&gt;&nbsp;</div></li><li><div>                            &lt;/table&gt;&nbsp;</div></li><li><div>                        &lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;/tbody&gt;&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function entry_detail_pagination_link( $pos, $label = '', $class = '', $icon = '' ) {&nbsp;</div></li><li><div>        $url = add_query_arg( array( 'pos' =&gt; $pos ), remove_query_arg( array( 'pos', 'lid' ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $href = ! rgblank( $pos ) ? 'href=&quot;' . esc_url( $url ) . '&quot;' : '';&nbsp;</div></li><li><div>        $class .= ' gf_entry_pagination_link';&nbsp;</div></li><li><div>        $class .= $pos !== false ? ' gf_entry_pagination_link_active' : ' gf_entry_pagination_link_inactive';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return '&lt;a ' . $href . ' class=&quot;' . $class . '&quot; title=&quot;' . esc_attr( $label ) . '&quot;&gt;&lt;i class=&quot;fa-lg ' . esc_attr( $icon ) . '&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function payment_details_box( $lead, $form )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;!-- PAYMENT BOX --&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;submitdiv&quot; class=&quot;stuffbox&quot;&gt;&nbsp;</div></li><li><div>            &lt;h3 class=&quot;hndle&quot; style=&quot;cursor:default;&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php echo $lead['transaction_type'] == 2 ? esc_html__( 'Subscription Details', 'gravityforms' ) : esc_html__( 'Payment Details', 'gravityforms' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>            &lt;/h3&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div class=&quot;inside&quot;&gt;&nbsp;</div></li><li><div>                &lt;div id=&quot;submitcomment&quot; class=&quot;submitbox&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div id=&quot;minor-publishing&quot; style=&quot;padding:10px;&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        $payment_status = apply_filters( 'gform_payment_status', $lead['payment_status'], $form, $lead );&nbsp;</div></li><li><div>                        if ( ! empty( $payment_status ) ) {&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;div id=&quot;gf_payment_status&quot; class=&quot;gf_payment_detail&quot;&gt;&nbsp;</div></li><li><div>                                &lt;?php esc_html_e( 'Status', 'gravityforms' ) ?&gt;:&nbsp;</div></li><li><div>                                &lt;span id=&quot;gform_payment_status&quot;&gt;&lt;?php echo $payment_status; // May contain HTML ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            /**&nbsp;</div></li><li><div>                             * Allows for modification on the form payment date format&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @param array $form The Form object to filter through&nbsp;</div></li><li><div>                             * @param array $lead The Lead object to filter through&nbsp;</div></li><li><div>                             */&nbsp;</div></li><li><div>                            $payment_date = apply_filters( 'gform_payment_date', GFCommon::format_date( $lead['payment_date'], false, 'Y/m/d', $lead['transaction_type'] != 2 ), $form, $lead );&nbsp;</div></li><li><div>                            if ( ! empty( $payment_date ) ) {&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;div id=&quot;gf_payment_date&quot; class=&quot;gf_payment_detail&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;?php echo $lead['transaction_type'] == 2 ? esc_html__( 'Start Date', 'gravityforms' ) : esc_html__( 'Date', 'gravityforms' ) ?&gt;:&nbsp;</div></li><li><div>                                    &lt;span id='gform_payment_date'&gt;&lt;?php echo $payment_date; // May contain HTML ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                &lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            /**&nbsp;</div></li><li><div>                             * Allows filtering through a payment transaction ID&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @param int $lead['transaction_id'] The transaction ID that can be modified&nbsp;</div></li><li><div>                             * @param array $form The Form object to be filtered when modifying the transaction ID&nbsp;</div></li><li><div>                             * @param array $lead The Lead object to be filtered when modifying the transaction ID&nbsp;</div></li><li><div>                             */&nbsp;</div></li><li><div>                            $transaction_id = apply_filters( 'gform_payment_transaction_id', $lead['transaction_id'], $form, $lead );&nbsp;</div></li><li><div>                            if ( ! empty( $transaction_id ) ) {&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;div id=&quot;gf_payment_transaction_id&quot; class=&quot;gf_payment_detail&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;?php echo $lead['transaction_type'] == 2 ? esc_html__( 'Subscription Id', 'gravityforms' ) : esc_html__( 'Transaction Id', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                                    &lt;span id='gform_payment_transaction_id'&gt;&lt;?php echo $transaction_id; // May contain HTML ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                &lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            /**&nbsp;</div></li><li><div>                             * Filter through the way the Payment Amount is rendered&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @param string $lead['payment_amount'] The payment amount taken from the lead object&nbsp;</div></li><li><div>                             * @param string $lead['currency'] The payment currency taken from the lead object&nbsp;</div></li><li><div>                             * @param array $form The Form onject to filter through&nbsp;</div></li><li><div>                             * @param array $lead The lead object to filter through&nbsp;</div></li><li><div>                             */&nbsp;</div></li><li><div>                            $payment_amount = apply_filters( 'gform_payment_amount', GFCommon::to_money( $lead['payment_amount'], $lead['currency'] ), $form, $lead );&nbsp;</div></li><li><div>                            if ( ! rgblank( $payment_amount ) ) {&nbsp;</div></li><li><div>                                ?&gt;&nbsp;</div></li><li><div>                                &lt;div id=&quot;gf_payment_amount&quot; class=&quot;gf_payment_detail&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;?php echo $lead['transaction_type'] == 2 ? esc_html__( 'Recurring Amount', 'gravityforms' ) : esc_html__( 'Amount', 'gravityforms' ); ?&gt;:&nbsp;</div></li><li><div>                                    &lt;span id='gform_payment_amount'&gt;&lt;?php echo $payment_amount; // May contain HTML ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                                &lt;/div&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        /**&nbsp;</div></li><li><div>                         * Fires after the Form Payment Details (The type of payment, the cost, the ID, etc)&nbsp;</div></li><li><div>                         *&nbsp;</div></li><li><div>                         * @param int $form['id'] The current Form ID&nbsp;</div></li><li><div>                         * @param array $lead The current Lead object&nbsp;</div></li><li><div>                         */&nbsp;</div></li><li><div>                        do_action( 'gform_payment_details', $form['id'], $lead );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        ?&gt;&nbsp;</div></li><li><div>                    &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.3.9.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/gfentry_detail/" class="active">1.9.14.22</a></li><li><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/classes/gfentry_detail/" class="">1.3.9.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>GFEntryDetail</li><li><span></span>Gravity Forms</li><li><span></span>1.9.14.22</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>