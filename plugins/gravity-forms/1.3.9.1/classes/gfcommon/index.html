<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.3.9.1" data-slug="gravity-forms" data-type="class" data-id="72792"><head xmlns="http://www.w3.org/1999/xhtml"><title> gfcommon | class | Gravity Forms | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="GFCommon, class, plugin, gravity-forms, 1.3.9.1" /><meta name="description" content="The Gravity Forms GFCommon class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=c710acd2d4594c4e700fb5b4f7545859' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/gfcommon/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfcommon%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgfcommon%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-1.3.9.1-class-gfcommon","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="gfcommon" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms." href="http://hookr.io/plugins/gravity-forms/" class="plugin"><span property="name">gravity-forms</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.3.9.1." href="http://hookr.io/plugins/gravity-forms/1.3.9.1/" class="H_VERSION"><span property="name">1.3.9.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-forms/1.3.9.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">gfcommon</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="115"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/all/" title="All">All <span class="count badge">115</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="70"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/hooks/" title="Hooks">Hooks <span class="count badge">70</span></a></li><li class="" data-id="action" data-count="7"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/actions/" title="Actions">Actions <span class="count badge">7</span></a></li><li class="" data-id="filter" data-count="63"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/filters/" title="Filters">Filters <span class="count badge">63</span></a></li><li class="active" data-id="class" data-count="13"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/classes/" title="Classes">Classes <span class="count badge">13</span></a></li><li class="" data-id="constant" data-count="16"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/constants/" title="Constants">Constants <span class="count badge">16</span></a></li><li class="" data-id="function" data-count="15"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/functions/" title="Functions">Functions <span class="count badge">15</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>GFCommon</strong></h1><p>The Gravity Forms <strong>GFCommon</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/files/common/" class="file">/common.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="2" class="block" start="2"><li><div>class GFCommon{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static $version = &quot;1.3.9.1&quot;;&nbsp;</div></li><li><div>    public static $tab_index = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_selection_fields($form, $selected_field_id) {&nbsp;</div></li><li><div>        $str = &quot;&quot;;&nbsp;</div></li><li><div>        foreach($form[&quot;fields&quot;] as $field) {&nbsp;</div></li><li><div>            $input_type = RGFormsModel::get_input_type($field);&nbsp;</div></li><li><div>            $field_label = RGFormsModel::get_label($field);&nbsp;</div></li><li><div>            if($input_type == &quot;checkbox&quot; || $input_type == &quot;radio&quot; || $input_type == &quot;select&quot;) {&nbsp;</div></li><li><div>                $selected = $field[&quot;id&quot;] == $selected_field_id ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                $str .= &quot;&lt;option value='&quot; . $field[&quot;id&quot;] . &quot;' &quot; . $selected . &quot;&gt;&quot; . self::truncate_middle($field_label, 16) . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function is_numeric($value) {&nbsp;</div></li><li><div>        return preg_match(&quot;/^([0-9]{1, 3}(?:, ?[0-9]{3})*(?:\.[0-9]{2})?)$/&quot;, $value) || preg_match(&quot;/^([0-9]{1, 3}(?:\.?[0-9]{3})*(?:, [0-9]{2})?)$/&quot;, $value);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function clean_number($number) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Removing all non-numeric characters&nbsp;</div></li><li><div>        $array = str_split($number);&nbsp;</div></li><li><div>        foreach($array as $char)&nbsp;</div></li><li><div>            if (($char &gt;= '0' && $char &lt;= '9') || $char==&quot;, &quot; || $char==&quot;.&quot;)&nbsp;</div></li><li><div>                $clean_number .= $char;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Removing thousand separators but keeping decimal point&nbsp;</div></li><li><div>        $array = str_split($clean_number);&nbsp;</div></li><li><div>        for($i=0, $count = sizeof($array); $i&lt;$count; $i++)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $char = $array[$i];&nbsp;</div></li><li><div>            if ($char &gt;= '0' && $char &lt;= '9')&nbsp;</div></li><li><div>                $float_number .= $char;&nbsp;</div></li><li><div>            else if(($char == &quot;.&quot; || $char == &quot;, &quot;) && strlen($clean_number) - $i &lt;= 3)&nbsp;</div></li><li><div>                $float_number .= &quot;.&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $float_number;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function json_encode($value) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!extension_loaded('json')) {&nbsp;</div></li><li><div>            if (!class_exists('Services_JSON'))&nbsp;</div></li><li><div>                include_once(self::get_base_path() . '/json.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $json = new Services_JSON();&nbsp;</div></li><li><div>            return $json-&gt;encode($value);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            return json_encode($value);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function json_decode($str, $is_assoc) {&nbsp;</div></li><li><div>        if (!extension_loaded('json')) {&nbsp;</div></li><li><div>            if (!class_exists('Services_JSON'))&nbsp;</div></li><li><div>                include_once(self::get_base_path() . '/json.php');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $json = $is_assoc ? new Services_JSON(SERVICES_JSON_LOOSE_TYPE) : new Services_JSON();&nbsp;</div></li><li><div>            return $json-&gt;decode($str);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            return json_decode($str, $is_assoc);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //Returns the url of the plugin's root folder&nbsp;</div></li><li><div>    public function get_base_url() {&nbsp;</div></li><li><div>        $folder = basename(dirname(__FILE__));&nbsp;</div></li><li><div>        return plugins_url($folder);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    //Returns the physical path of the plugin's root folder&nbsp;</div></li><li><div>    public function get_base_path() {&nbsp;</div></li><li><div>        $folder = basename(dirname(__FILE__));&nbsp;</div></li><li><div>        return WP_PLUGIN_DIR . &quot;/&quot; . $folder;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_email_fields($form) {&nbsp;</div></li><li><div>        $fields = array();&nbsp;</div></li><li><div>        foreach($form[&quot;fields&quot;] as $field) {&nbsp;</div></li><li><div>            if($field[&quot;type&quot;] == &quot;email&quot; || $field[&quot;inputType&quot;] == &quot;email&quot;)&nbsp;</div></li><li><div>                $fields[] = $field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $fields;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function truncate_middle($text, $max_length) {&nbsp;</div></li><li><div>        if(strlen($text) &lt;= $max_length)&nbsp;</div></li><li><div>            return $text;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $middle = intval($max_length / 2);&nbsp;</div></li><li><div>        return substr($text, 0, $middle) . &quot;...&quot; . substr($text, strlen($text) - $middle, $middle);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function is_invalid_or_empty_email($email) {&nbsp;</div></li><li><div>        return empty($email) || !self::is_valid_email($email);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function is_valid_url($url) {&nbsp;</div></li><li><div>        return preg_match('!^(http|https)://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?$!', $url);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function is_valid_email($email) {&nbsp;</div></li><li><div>        return preg_match('/^(([a-zA-Z0-9_\.\-\+])+\@((([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2, 4})+|localhost) *, ? *)+$/', $email);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_label($field, $input_id = 0, $input_only = false) {&nbsp;</div></li><li><div>        return RGFormsModel::get_label($field, $input_id, $input_only);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_input($field, $id) {&nbsp;</div></li><li><div>       return RGFormsModel::get_input($field, $id);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function insert_variables($fields, $element_id, $hide_all_fields=false) {&nbsp;</div></li><li><div>        if($fields == null)&nbsp;</div></li><li><div>            $fields = array();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;select id=&quot;&lt;?php echo $element_id?&gt;_variable_select&quot; onchange=&quot;InsertVariable('&lt;?php echo $element_id?&gt;');&quot;&gt;&nbsp;</div></li><li><div>            &lt;option value=''&gt;&lt;?php _e(&quot;Insert form field&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            if(!$hide_all_fields) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;option value='{all_fields}'&gt;&lt;?php _e(&quot;All Submitted Fields&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $required_fields = array();&nbsp;</div></li><li><div>            $optional_fields = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach($fields as $field) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($field[&quot;isRequired&quot;]) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    switch(RGFormsModel::get_input_type($field)) {&nbsp;</div></li><li><div>                        case &quot;name&quot; :&nbsp;</div></li><li><div>                            if($field[&quot;nameFormat&quot;] == &quot;extended&quot;) {&nbsp;</div></li><li><div>                                $prefix = GFCommon::get_input($field, $field[&quot;id&quot;] + 0.2);&nbsp;</div></li><li><div>                                $suffix = GFCommon::get_input($field, $field[&quot;id&quot;] + 0.8);&nbsp;</div></li><li><div>                                $optional_field = $field;&nbsp;</div></li><li><div>                                $optional_field[&quot;inputs&quot;] = array($prefix, $suffix);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                //Add optional name fields to the optional list&nbsp;</div></li><li><div>                                $optional_fields[] = $optional_field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                //Remove optional name field from required list&nbsp;</div></li><li><div>                                unset($field[&quot;inputs&quot;][0]);&nbsp;</div></li><li><div>                                unset($field[&quot;inputs&quot;][3]);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $required_fields[] = $field;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        default:&nbsp;</div></li><li><div>                            $required_fields[] = $field;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                   $optional_fields[] = $field;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if(!empty($required_fields)) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;option value='' class='option_header'&gt;&lt;?php _e(&quot;Required form fields&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                foreach($required_fields as $field) {&nbsp;</div></li><li><div>                    self::insert_field_variable($field);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if(!empty($optional_fields)) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;option value='' class='option_header'&gt;&lt;?php _e(&quot;Optional form fields&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                foreach($optional_fields as $field) {&nbsp;</div></li><li><div>                    self::insert_field_variable($field);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;option value='' class='option_header'&gt;Other&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{ip}'&gt;&lt;?php _e(&quot;Client IP Address&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{date_mdy}'&gt;&lt;?php _e(&quot;Date&quot;, &quot;gravityforms&quot;); ?&gt; (mm/dd/yyyy)&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{date_dmy}'&gt;&lt;?php _e(&quot;Date&quot;, &quot;gravityforms&quot;); ?&gt; (dd/mm/yyyy)&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{embed_post:ID}'&gt;&lt;?php _e(&quot;Embed Post/Page Id&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{embed_post:post_title}'&gt;&lt;?php _e(&quot;Embed Post/Page Title&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{embed_url}'&gt;&lt;?php _e(&quot;Embed URL&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{entry_id}'&gt;&lt;?php _e(&quot;Entry Id&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{entry_url}'&gt;&lt;?php _e(&quot;Entry URL&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{form_id}'&gt;&lt;?php _e(&quot;Form Id&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{form_title}'&gt;&lt;?php _e(&quot;Form Title&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{user_agent}'&gt;&lt;?php _e(&quot;HTTP User Agent&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php if(self::has_post_field($fields)) { ?&gt;&nbsp;</div></li><li><div>                &lt;option value='{post_id}'&gt;&lt;?php _e(&quot;Post Id&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;option value='{post_edit_url}'&gt;&lt;?php _e(&quot;Post Edit URL&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;?php } ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;option value='{user:display_name}'&gt;&lt;?php _e(&quot;User Display Name&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{user:user_email}'&gt;&lt;?php _e(&quot;User Email&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;option value='{user:user_login}'&gt;&lt;?php _e(&quot;User Login&quot;, &quot;gravityforms&quot;); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/select&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function insert_field_variable($field) {&nbsp;</div></li><li><div>        if(is_array($field[&quot;inputs&quot;]))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            foreach($field[&quot;inputs&quot;] as $input) {&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;option value='&lt;?php echo &quot;{&quot; . esc_html(GFCommon::get_label($field, $input[&quot;id&quot;])) . &quot;:&quot; . $input[&quot;id&quot;] . &quot;}&quot; ?&gt;'&gt;&lt;?php echo esc_html(GFCommon::get_label($field, $input[&quot;id&quot;])) ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;option value='&lt;?php echo &quot;{&quot; . esc_html(GFCommon::get_label($field)) . &quot;:&quot; . $field[&quot;id&quot;] . &quot;}&quot; ?&gt;'&gt;&lt;?php echo esc_html(GFCommon::get_label($field)) ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function replace_variables($text, $form, $lead, $url_encode = false, $esc_html=true) {&nbsp;</div></li><li><div>        $text = nl2br($text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Replacing field variables&nbsp;</div></li><li><div>        preg_match_all('/{[^{]*?:(\d+(\.\d+)?)}/mi', $text, $matches, PREG_SET_ORDER);&nbsp;</div></li><li><div>        if(is_array($matches))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            foreach($matches as $match) {&nbsp;</div></li><li><div>                $input_id = $match[1];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field = RGFormsModel::get_field($form, $input_id);&nbsp;</div></li><li><div>                $value = RGFormsModel::get_lead_field_value($lead, $field);&nbsp;</div></li><li><div>                if(is_array($value))&nbsp;</div></li><li><div>                    $value = $value[$input_id];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($esc_html)&nbsp;</div></li><li><div>                    $value = esc_html($value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $value = nl2br($value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($url_encode)&nbsp;</div></li><li><div>                    $value = urlencode($value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch($field[&quot;type&quot;]) {&nbsp;</div></li><li><div>                    case &quot;fileupload&quot; :&nbsp;</div></li><li><div>                        $value = str_replace(&quot; &quot;, &quot;%20&quot;, $value);&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $text = str_replace($match[0], $value , $text);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //replacing global variables&nbsp;</div></li><li><div>        //form title&nbsp;</div></li><li><div>        $text = str_replace(&quot;{form_title}&quot;, $url_encode ? urlencode($form[&quot;title&quot;]) : $form[&quot;title&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //all submitted fields&nbsp;</div></li><li><div>        $text = str_replace(&quot;{all_fields}&quot;, self::get_submitted_fields($form, $lead), $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //all submitted fields including empty fields&nbsp;</div></li><li><div>        $text = str_replace(&quot;{all_fields_display_empty}&quot;, self::get_submitted_fields($form, $lead, true), $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //form id&nbsp;</div></li><li><div>        $text = str_replace(&quot;{form_id}&quot;, $url_encode ? urlencode($form[&quot;id&quot;]) : $form[&quot;id&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //entry id&nbsp;</div></li><li><div>        $text = str_replace(&quot;{entry_id}&quot;, $url_encode ? urlencode($lead[&quot;id&quot;]) : $lead[&quot;id&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //entry url&nbsp;</div></li><li><div>        $entry_url = get_bloginfo(&quot;wpurl&quot;) . &quot;/wp-admin/admin.php?page=gf_entries&view=entry&id=&quot; . $form[&quot;id&quot;] . &quot;&lid=&quot; . $lead[&quot;id&quot;];&nbsp;</div></li><li><div>        $text = str_replace(&quot;{entry_url}&quot;, $url_encode ? urlencode($entry_url) : $entry_url, $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //post id&nbsp;</div></li><li><div>        $text = str_replace(&quot;{post_id}&quot;, $url_encode ? urlencode($lead[&quot;post_id&quot;]) : $lead[&quot;post_id&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //post edit url&nbsp;</div></li><li><div>        $post_url = get_bloginfo(&quot;wpurl&quot;) . &quot;/wp-admin/post.php?action=edit&post=&quot; . $lead[&quot;post_id&quot;];&nbsp;</div></li><li><div>        $text = str_replace(&quot;{post_edit_url}&quot;, $url_encode ? urlencode($post_url) : $post_url, $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $text = self::replace_variables_prepopulate($text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function replace_variables_prepopulate($text) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //embed url&nbsp;</div></li><li><div>        $text = str_replace(&quot;{embed_url}&quot;, $url_encode ? urlencode(RGFormsModel::get_current_page_url()) : RGFormsModel::get_current_page_url(), $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $local_timestamp = self::get_local_timestamp(time());&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //date (mm/dd/yyyy)&nbsp;</div></li><li><div>        $local_date_mdy = date_i18n(&quot;m/d/Y&quot;, $local_timestamp, true);&nbsp;</div></li><li><div>        $text = str_replace(&quot;{date_mdy}&quot;, $url_encode ? urlencode($local_date_mdy) : $local_date_mdy, $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //date (dd/mm/yyyy)&nbsp;</div></li><li><div>        $local_date_dmy = date_i18n(&quot;d/m/Y&quot;, $local_timestamp, true);&nbsp;</div></li><li><div>        $text = str_replace(&quot;{date_dmy}&quot;, $url_encode ? urlencode($local_date_dmy) : $local_date_dmy, $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //ip&nbsp;</div></li><li><div>        $text = str_replace(&quot;{ip}&quot;, $url_encode ? urlencode($_SERVER['REMOTE_ADDR']) : $_SERVER['REMOTE_ADDR'], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //embed post info&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>        $post_array = self::object_to_array($post);&nbsp;</div></li><li><div>        preg_match_all(&quot;/\{embed_post:(.*?)\}/&quot;, $text, $matches, PREG_SET_ORDER);&nbsp;</div></li><li><div>        foreach($matches as $match) {&nbsp;</div></li><li><div>            $full_tag = $match[0];&nbsp;</div></li><li><div>            $property = $match[1];&nbsp;</div></li><li><div>            $text = str_replace($full_tag, $url_encode ? urlencode($post_array[$property]) : $post_array[$property], $text);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //embed post custom fields&nbsp;</div></li><li><div>        preg_match_all(&quot;/\{custom_field:(.*?)\}/&quot;, $text, $matches, PREG_SET_ORDER);&nbsp;</div></li><li><div>        foreach($matches as $match) {&nbsp;</div></li><li><div>            $full_tag = $match[0];&nbsp;</div></li><li><div>            $custom_field_name = $match[1];&nbsp;</div></li><li><div>            $custom_field_value = !empty($post_array[&quot;ID&quot;]) ? get_post_meta($post_array[&quot;ID&quot;], $custom_field_name, true) : &quot;&quot;;&nbsp;</div></li><li><div>            $text = str_replace($full_tag, $url_encode ? urlencode($custom_field_value) : $custom_field_value, $text);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //user agent&nbsp;</div></li><li><div>        $text = str_replace(&quot;{user_agent}&quot;, $url_encode ? urlencode($_SERVER[&quot;HTTP_USER_AGENT&quot;]) : $_SERVER[&quot;HTTP_USER_AGENT&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //referrer&nbsp;</div></li><li><div>        $text = str_replace(&quot;{referer}&quot;, $url_encode ? urlencode($_SERVER[&quot;HTTP_REFERER&quot;]) : $_SERVER[&quot;HTTP_REFERER&quot;], $text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //logged in user info&nbsp;</div></li><li><div>        global $userdata;&nbsp;</div></li><li><div>        $user_array = self::object_to_array($userdata);&nbsp;</div></li><li><div>        preg_match_all(&quot;/\{user:(.*?)\}/&quot;, $text, $matches, PREG_SET_ORDER);&nbsp;</div></li><li><div>        foreach($matches as $match) {&nbsp;</div></li><li><div>            $full_tag = $match[0];&nbsp;</div></li><li><div>            $property = $match[1];&nbsp;</div></li><li><div>            $text = str_replace($full_tag, $url_encode ? urlencode($user_array[$property]) : $user_array[$property], $text);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function object_to_array($object)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $array=array();&nbsp;</div></li><li><div>        if(!empty($object)) {&nbsp;</div></li><li><div>            foreach($object as $member=&gt;$data)&nbsp;</div></li><li><div>                $array[$member]=$data;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $array;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_submitted_fields($form, $lead, $display_empty = false) {&nbsp;</div></li><li><div>        $field_data = '&lt;table width=&quot;99%&quot; border=&quot;0&quot; cellpadding=&quot;1&quot; cellpsacing=&quot;0&quot; bgcolor=&quot;#EAEAEA&quot;&gt;&lt;tr&gt;&lt;td&gt;&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellpsacing=&quot;0&quot; bgcolor=&quot;#FFFFFF&quot;&gt;';&nbsp;</div></li><li><div>        foreach($form[&quot;fields&quot;] as $field) {&nbsp;</div></li><li><div>            $field_label = esc_html(GFCommon::get_label($field));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            switch($field[&quot;type&quot;]) {&nbsp;</div></li><li><div>                case &quot;captcha&quot; :&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                case &quot;section&quot; :&nbsp;</div></li><li><div>                    $field_data .= sprintf('&lt;tr&gt;&lt;td colspan=&quot;2&quot; style=&quot;font-size:14px; font-weight:bold; background-color:#EEE; border-bottom:1px solid #DFDFDF; padding:7px 7px&quot;&gt;%s&lt;/td&gt;&lt;/tr&gt;', $field_label);&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                default :&nbsp;</div></li><li><div>                    $value = RGFormsModel::get_lead_field_value($lead, $field);&nbsp;</div></li><li><div>                    $field_value = GFCommon::get_lead_field_display($field, $value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if(!empty($field_value) || $display_empty)&nbsp;</div></li><li><div>                        $field_data .= sprintf('&lt;tr bgcolor=&quot;#EAF2FA&quot;&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;font style=&quot;font-family:verdana; font-size:12px;&quot;&gt;&lt;strong&gt;%s&lt;/strong&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr bgcolor=&quot;#FFFFFF&quot;&gt;&lt;td width=&quot;20&quot;&gt;&nbsp;&lt;/td&gt;&lt;td&gt;&lt;font style=&quot;font-family:verdana; font-size:12px;&quot;&gt;%s&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;', $field_label, empty($field_value) ? &quot;&nbsp;&quot; : $field_value);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $field_data .= &quot;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;&nbsp;</div></li><li><div>        return $field_data;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function has_post_field($fields) {&nbsp;</div></li><li><div>        foreach($fields as $field) {&nbsp;</div></li><li><div>            if(in_array($field[&quot;type&quot;], array(&quot;post_title&quot;, &quot;post_content&quot;, &quot;post_excerpt&quot;, &quot;post_category&quot;, &quot;post_image&quot;, &quot;post_tags&quot;, &quot;post_custom_field&quot;)))&nbsp;</div></li><li><div>                return true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function current_user_can_any($caps) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(!is_array($caps))&nbsp;</div></li><li><div>            return current_user_can($caps) || current_user_can(&quot;gform_full_access&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach($caps as $cap) {&nbsp;</div></li><li><div>            if(current_user_can($cap))&nbsp;</div></li><li><div>                return true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return current_user_can(&quot;gform_full_access&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function current_user_can_which($caps) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach($caps as $cap) {&nbsp;</div></li><li><div>            if(current_user_can($cap))&nbsp;</div></li><li><div>                return $cap;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return &quot;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function all_caps() {&nbsp;</div></li><li><div>        return array(   'gravityforms_edit_forms', &nbsp;</div></li><li><div>                        'gravityforms_delete_forms', &nbsp;</div></li><li><div>                        'gravityforms_create_form', &nbsp;</div></li><li><div>                        'gravityforms_view_entries', &nbsp;</div></li><li><div>                        'gravityforms_edit_entries', &nbsp;</div></li><li><div>                        'gravityforms_delete_entries', &nbsp;</div></li><li><div>                        'gravityforms_view_settings', &nbsp;</div></li><li><div>                        'gravityforms_edit_settings', &nbsp;</div></li><li><div>                        'gravityforms_export_entries', &nbsp;</div></li><li><div>                        'gravityforms_uninstall', &nbsp;</div></li><li><div>                        'gravityforms_view_entry_notes', &nbsp;</div></li><li><div>                        'gravityforms_edit_entry_notes'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function delete_directory($dir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if(!file_exists($dir))&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($handle = opendir($dir)) {&nbsp;</div></li><li><div>            $array = array();&nbsp;</div></li><li><div>            while (false !== ($file = readdir($handle))) {&nbsp;</div></li><li><div>                if ($file != &quot;.&quot; && $file != &quot;..&quot;) {&nbsp;</div></li><li><div>                    if(is_dir($dir.$file)) {&nbsp;</div></li><li><div>                        if(!@rmdir($dir.$file)) // Empty directory? Remove it&nbsp;</div></li><li><div>                            self::delete_directory($dir.$file.'/'); // Not empty? Delete the files inside it&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else{&nbsp;</div></li><li><div>                       @unlink($dir.$file);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            closedir($handle);&nbsp;</div></li><li><div>            @rmdir($dir);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_remote_message() {&nbsp;</div></li><li><div>        return stripslashes(get_option(&quot;rg_gforms_message&quot;));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_key() {&nbsp;</div></li><li><div>        return get_option(&quot;rg_gforms_key&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_version_info() {&nbsp;</div></li><li><div>        //Getting version number&nbsp;</div></li><li><div>        $key = self::get_key();&nbsp;</div></li><li><div>        $body = &quot;key=$key&quot;;&nbsp;</div></li><li><div>        $options = array('method' =&gt; 'POST', 'timeout' =&gt; 3, 'body' =&gt; $body);&nbsp;</div></li><li><div>        $options['headers'] = array(&nbsp;</div></li><li><div>            'Content-Type' =&gt; 'application/x-www-form-urlencoded; charset=' . get_option('blog_charset'), &nbsp;</div></li><li><div>            'Content-Length' =&gt; strlen($body), &nbsp;</div></li><li><div>            'User-Agent' =&gt; 'WordPress/' . get_bloginfo(&quot;version&quot;), &nbsp;</div></li><li><div>            'Referer' =&gt; get_bloginfo(&quot;url&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $raw_response = wp_remote_request(GRAVITY_MANAGER_URL . &quot;/version.php?&quot; . self::get_remote_request_params(), $options);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_wp_error( $raw_response ) || 200 != $raw_response['response']['code'])&nbsp;</div></li><li><div>            return -1;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $ary = explode(&quot;||&quot;, $raw_response['body']);&nbsp;</div></li><li><div>            return array(&quot;is_valid_key&quot; =&gt; $ary[0], &quot;version&quot; =&gt; $ary[1], &quot;url&quot; =&gt; $ary[2]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_remote_request_params() {&nbsp;</div></li><li><div>        global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return sprintf(&quot;of=GravityForms&key=%s&v=%s&wp=%s&php=%s&mysql=%s&quot;, urlencode(self::get_key()), urlencode(self::$version), urlencode(get_bloginfo(&quot;version&quot;)), urlencode(phpversion()), urlencode($wpdb-&gt;db_version()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function ensure_wp_version() {&nbsp;</div></li><li><div>        if(!GF_SUPPORTED_WP_VERSION) {&nbsp;</div></li><li><div>            echo &quot;&lt;div class='error' style='padding:10px;'&gt;Gravity Forms require WordPress 2.8 or greater. You must upgrade WordPress in order to use Gravity Forms&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static $_has_set_option;&nbsp;</div></li><li><div>    public static $_has_set_transient;&nbsp;</div></li><li><div>    public static function check_update() {&nbsp;</div></li><li><div>        //only check updates on the admin side&nbsp;</div></li><li><div>        if(!IS_ADMIN)&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $plugin_name = &quot;gravityforms/gravityforms.php&quot;;&nbsp;</div></li><li><div>        $option = function_exists('get_transient') ? get_transient(&quot;update_plugins&quot;) : get_option(&quot;update_plugins&quot;);&nbsp;</div></li><li><div>        $gravity_option = $option-&gt;response[$plugin_name];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(empty($gravity_option))&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name] = new stdClass();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Getting version number&nbsp;</div></li><li><div>        $version_info = GFCommon::get_version_info();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($response == -1)&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Empty response means that the key is invalid. Do not queue for upgrade&nbsp;</div></li><li><div>        if(!$version_info[&quot;is_valid_key&quot;] || version_compare(GFCommon::$version, $version_info[&quot;version&quot;], '&gt;=')) {&nbsp;</div></li><li><div>            unset($option-&gt;response[$plugin_name]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name]-&gt;url = &quot;http://www.gravityforms.com&quot;;&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name]-&gt;slug = &quot;gravityforms&quot;;&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name]-&gt;package = str_replace(&quot;{KEY}&quot;, GFCommon::get_key(), $version_info[&quot;url&quot;]);&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name]-&gt;new_version = $version_info[&quot;version&quot;];&nbsp;</div></li><li><div>            $option-&gt;response[$plugin_name]-&gt;id = &quot;0&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Setting transient data (WP 2.8)&nbsp;</div></li><li><div>        if ( function_exists('set_transient') && !self::$_has_set_transient) {&nbsp;</div></li><li><div>            self::$_has_set_transient = true;&nbsp;</div></li><li><div>            set_transient(&quot;update_plugins&quot;, $option);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //Setting option (WP 2.7)&nbsp;</div></li><li><div>        if(!self::$_has_set_option) {&nbsp;</div></li><li><div>            self::$_has_set_option = true;&nbsp;</div></li><li><div>            update_option(&quot;update_plugins&quot;, $option);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function cache_remote_message() {&nbsp;</div></li><li><div>        //Getting version number&nbsp;</div></li><li><div>        $key = GFCommon::get_key();&nbsp;</div></li><li><div>        $body = &quot;key=$key&quot;;&nbsp;</div></li><li><div>        $options = array('method' =&gt; 'POST', 'timeout' =&gt; 3, 'body' =&gt; $body);&nbsp;</div></li><li><div>        $options['headers'] = array(&nbsp;</div></li><li><div>            'Content-Type' =&gt; 'application/x-www-form-urlencoded; charset=' . get_option('blog_charset'), &nbsp;</div></li><li><div>            'Content-Length' =&gt; strlen($body), &nbsp;</div></li><li><div>            'User-Agent' =&gt; 'WordPress/' . get_bloginfo(&quot;version&quot;), &nbsp;</div></li><li><div>            'Referer' =&gt; get_bloginfo(&quot;url&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $request_url = GRAVITY_MANAGER_URL . &quot;/message.php?&quot; . GFCommon::get_remote_request_params();&nbsp;</div></li><li><div>        $raw_response = wp_remote_request($request_url, $options);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_wp_error( $raw_response ) || 200 != $raw_response['response']['code'] )&nbsp;</div></li><li><div>            $message = &quot;&quot;;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $message = $raw_response['body'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //validating that message is a valid Gravity Form message. If message is invalid, don't display anything&nbsp;</div></li><li><div>        if(substr($message, 0, 10) != &quot;&lt;!--GFM--&gt;&quot;)&nbsp;</div></li><li><div>            $message = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        update_option(&quot;rg_gforms_message&quot;, $message);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_local_timestamp($timestamp) {&nbsp;</div></li><li><div>        return $timestamp + (get_option( 'gmt_offset' ) * 3600 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function format_date($gmt_datetime, $is_human = true) {&nbsp;</div></li><li><div>        if(empty($gmt_datetime))&nbsp;</div></li><li><div>            return &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //adjusting date to local configured Time Zone&nbsp;</div></li><li><div>        $lead_gmt_time = mysql2date(&quot;G&quot;, $gmt_datetime);&nbsp;</div></li><li><div>        $lead_local_time = self::get_local_timestamp($lead_gmt_time);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if($is_human) {&nbsp;</div></li><li><div>            $time_diff = time() - $lead_gmt_time;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($time_diff &gt; 0 && $time_diff &lt; 24*60*60)&nbsp;</div></li><li><div>                $date_display = sprintf(__('%s ago', 'gravityforms'), human_time_diff($lead_gmt_time));&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>                $date_display = sprintf(__('%1$s at %2$s', 'gravityforms'), date_i18n(get_option('date_format'), $lead_local_time, true), date_i18n(get_option('time_format'), $lead_local_time, true));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            $date_display = sprintf(__('%1$s at %2$s', 'gravityforms'), date_i18n(get_option('date_format'), $lead_local_time, true), date_i18n(get_option('time_format'), $lead_local_time, true));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $date_display;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function date_display($value, $format = &quot;mdy&quot;) {&nbsp;</div></li><li><div>        $date = self::parse_date($value, $format);&nbsp;</div></li><li><div>        if(empty($date))&nbsp;</div></li><li><div>            return $value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $format == &quot;dmy&quot; ? $date[&quot;day&quot;] . &quot;/&quot; . $date[&quot;month&quot;] . &quot;/&quot; . $date[&quot;year&quot;] : $date[&quot;month&quot;] . &quot;/&quot; . $date[&quot;day&quot;] . &quot;/&quot; . $date[&quot;year&quot;];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function parse_date($date, $format=&quot;mdy&quot;) {&nbsp;</div></li><li><div>        $date_info = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(is_array($date)) {&nbsp;</div></li><li><div>            if(empty($date[0]))&nbsp;</div></li><li><div>                return array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //format mm-dd-yyyy or dd-mm-yyyy&nbsp;</div></li><li><div>            $date_info[&quot;year&quot;] = $date[2];&nbsp;</div></li><li><div>            $date_info[&quot;month&quot;] = $format == &quot;mdy&quot; ? $date[0] : $date[1];&nbsp;</div></li><li><div>            $date_info[&quot;day&quot;] = $format == &quot;mdy&quot; ? $date[1] : $date[0];&nbsp;</div></li><li><div>            return $date_info;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $date = str_replace(&quot;/&quot;, &quot;-&quot;, $date);&nbsp;</div></li><li><div>        if(preg_match('/^(\d{1, 4})-(\d{1, 2})-(\d{1, 4})$/', $date, $matches)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if(strlen($matches[1]) == 4) {&nbsp;</div></li><li><div>                //format yyyy-mm-dd&nbsp;</div></li><li><div>                $date_info[&quot;year&quot;] = $matches[1];&nbsp;</div></li><li><div>                $date_info[&quot;month&quot;] = $matches[2];&nbsp;</div></li><li><div>                $date_info[&quot;day&quot;] = $matches[3];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else{&nbsp;</div></li><li><div>                //format mm-dd-yyyy or dd-mm-yyyy&nbsp;</div></li><li><div>                $date_info[&quot;year&quot;] = $matches[3];&nbsp;</div></li><li><div>                $date_info[&quot;month&quot;] = $format == &quot;mdy&quot; ? $matches[1] : $matches[2];&nbsp;</div></li><li><div>                $date_info[&quot;day&quot;] = $format == &quot;mdy&quot; ? $matches[2] : $matches[1];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $date_info;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function truncate_url($url) {&nbsp;</div></li><li><div>        $truncated_url = basename($url);&nbsp;</div></li><li><div>        if(empty($truncated_url))&nbsp;</div></li><li><div>            $truncated_url = dirname($url);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $ary = explode(&quot;?&quot;, $truncated_url);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $ary[0];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_checkbox_choices($field, $value, $disabled_text) {&nbsp;</div></li><li><div>        $choices = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(is_array($field[&quot;choices&quot;])) {&nbsp;</div></li><li><div>            $choice_number = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach($field[&quot;choices&quot;] as $choice) {&nbsp;</div></li><li><div>                if($choice_number % 10 == 0) //hack to skip numbers ending in 0. so that 5.1 doesn't conflict with 5.10&nbsp;</div></li><li><div>                    $choice_number++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $input_id = $field[&quot;id&quot;] . '.' . $choice_number;&nbsp;</div></li><li><div>                $id = $field[&quot;id&quot;] . '_' . $choice_number++;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(empty($value) && $choice[&quot;isSelected&quot;])&nbsp;</div></li><li><div>                    $checked = &quot;checked='checked'&quot;;&nbsp;</div></li><li><div>                else if($value == $choice[&quot;value&quot;] || (is_array($value) && $value[$input_id] == $choice[&quot;value&quot;]))&nbsp;</div></li><li><div>                    $checked = &quot;checked='checked'&quot;;&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                    $checked = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $logic_event = empty($field[&quot;conditionalLogicFields&quot;]) || IS_ADMIN ? &quot;&quot; : &quot;onclick='gf_apply_rules(&quot; . $field[&quot;formId&quot;] . &quot;, &quot; . GFCommon::json_encode($field[&quot;conditionalLogicFields&quot;]) . &quot;);'&quot;;&nbsp;</div></li><li><div>                $choices.= sprintf(&quot;&lt;li class='gchoice_$id'&gt;&lt;input name='input_%s' type='checkbox' $logic_event value='%s' %s id='choice_%s' tabindex='%d'  %s /&gt;&lt;label for='choice_%s'&gt;%s&lt;/label&gt;&lt;/li&gt;&quot;, $input_id, esc_attr($choice[&quot;value&quot;]), $checked, $id, GFCommon::$tab_index++, $disabled_text, $id, esc_html($choice[&quot;text&quot;]));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $choices;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_radio_choices($field, $value=&quot;&quot;, $disabled_text) {&nbsp;</div></li><li><div>        $choices = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(is_array($field[&quot;choices&quot;])) {&nbsp;</div></li><li><div>            $choice_id = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $logic_event = empty($field[&quot;conditionalLogicFields&quot;]) || IS_ADMIN ? &quot;&quot; : &quot;onclick='gf_apply_rules(&quot; . $field[&quot;formId&quot;] . &quot;, &quot; . GFCommon::json_encode($field[&quot;conditionalLogicFields&quot;]) . &quot;);'&quot;;&nbsp;</div></li><li><div>            foreach($field[&quot;choices&quot;] as $choice) {&nbsp;</div></li><li><div>                $id = $field[&quot;id&quot;] . '_' . $choice_id++;&nbsp;</div></li><li><div>                if(empty($value))&nbsp;</div></li><li><div>                    $checked = $choice[&quot;isSelected&quot;] ? &quot;checked='checked'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                    $checked = ($value == $choice[&quot;text&quot;] || (is_array($value) && in_array($choice[&quot;text&quot;], $value))) ? &quot;checked='checked'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $choices.= sprintf(&quot;&lt;li class='gchoice_$id'&gt;&lt;input name='input_%d' type='radio' value='%s' %s id='choice_%s' tabindex='%d' %s $logic_event /&gt;&lt;label for='choice_%s'&gt;%s&lt;/label&gt;&lt;/li&gt;&quot;, $field[&quot;id&quot;], esc_attr($choice[&quot;text&quot;]), $checked, $id, GFCommon::$tab_index++, $disabled_text, $id, esc_html($choice[&quot;text&quot;]));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $choices;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_select_choices($field, $value=&quot;&quot;) {&nbsp;</div></li><li><div>        $choices = &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(RG_CURRENT_VIEW == &quot;entry&quot; && empty($value))&nbsp;</div></li><li><div>            $choices .= &quot;&lt;option value=''&gt;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(is_array($field[&quot;choices&quot;])) {&nbsp;</div></li><li><div>            foreach($field[&quot;choices&quot;] as $choice) {&nbsp;</div></li><li><div>                if(empty($value) && RG_CURRENT_VIEW != &quot;entry&quot;)&nbsp;</div></li><li><div>                    $selected = $choice[&quot;isSelected&quot;] ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                else&nbsp;</div></li><li><div>                    $selected = ($value == $choice[&quot;text&quot;]) ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //needed for users upgrading from 1.0&nbsp;</div></li><li><div>                $val = !empty($choice[&quot;value&quot;]) ? esc_attr($choice[&quot;value&quot;]) : esc_attr($choice[&quot;text&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $choices.= sprintf(&quot;&lt;option value='%s' %s&gt;%s&lt;/option&gt;&quot;, $val, $selected, esc_html($choice[&quot;text&quot;]));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $choices;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_section_fields($form, $section_field_id) {&nbsp;</div></li><li><div>        $fields = array();&nbsp;</div></li><li><div>        $in_section = false;&nbsp;</div></li><li><div>        foreach($form[&quot;fields&quot;] as $field) {&nbsp;</div></li><li><div>            if($field[&quot;type&quot;] == &quot;section&quot; && $in_section)&nbsp;</div></li><li><div>                return $fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if($field[&quot;id&quot;] == $section_field_id)&nbsp;</div></li><li><div>                $in_section = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if($in_section)&nbsp;</div></li><li><div>                $fields[] = $field;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $fields;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_countries() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>        __('Afghanistan', 'gravityforms'), __('Albania', 'gravityforms'), __('Algeria', 'gravityforms'), __('American Samoa', 'gravityforms'), __('Andorra', 'gravityforms'), __('Angola', 'gravityforms'), __('Antigua and Barbuda', 'gravityforms'), __('Argentina', 'gravityforms'), __('Armenia', 'gravityforms'), __('Australia', 'gravityforms'), __('Austria', 'gravityforms'), __('Azerbaijan', 'gravityforms'), __('Bahamas', 'gravityforms'), __('Bahrain', 'gravityforms'), __('Bangladesh', 'gravityforms'), __('Barbados', 'gravityforms'), __('Belarus', 'gravityforms'), __('Belgium', 'gravityforms'), __('Belize', 'gravityforms'), __('Benin', 'gravityforms'), __('Bermuda', 'gravityforms'), __('Bhutan', 'gravityforms'), __('Bolivia', 'gravityforms'), __('Bosnia and Herzegovina', 'gravityforms'), __('Botswana', 'gravityforms'), __('Brazil', 'gravityforms'), __('Brunei', 'gravityforms'), __('Bulgaria', 'gravityforms'), __('Burkina Faso', 'gravityforms'), __('Burundi', 'gravityforms'), __('Cambodia', 'gravityforms'), __('Cameroon', 'gravityforms'), __('Canada', 'gravityforms'), __('Cape Verde', 'gravityforms'), __('Central African Republic', 'gravityforms'), __('Chad', 'gravityforms'), __('Chile', 'gravityforms'), __('China', 'gravityforms'), __('Colombia', 'gravityforms'), __('Comoros', 'gravityforms'), __('Congo', 'gravityforms'), __('Costa Rica', 'gravityforms'), __('C&ocirc;te d\'Ivoire', 'gravityforms'), __('Croatia', 'gravityforms'), __('Cuba', 'gravityforms'), __('Cyprus', 'gravityforms'), __('Czech Republic', 'gravityforms'), __('Denmark', 'gravityforms'), __('Djibouti', 'gravityforms'), __('Dominica', 'gravityforms'), __('Dominican Republic', 'gravityforms'), __('East Timor', 'gravityforms'), __('Ecuador', 'gravityforms'), __('Egypt', 'gravityforms'), __('El Salvador', 'gravityforms'), __('Equatorial Guinea', 'gravityforms'), __('Eritrea', 'gravityforms'), __('Estonia', 'gravityforms'), __('Ethiopia', 'gravityforms'), __('Fiji', 'gravityforms'), __('Finland', 'gravityforms'), __('France', 'gravityforms'), __('Gabon', 'gravityforms'), &nbsp;</div></li><li><div>        __('Gambia', 'gravityforms'), __('Georgia', 'gravityforms'), __('Germany', 'gravityforms'), __('Ghana', 'gravityforms'), __('Greece', 'gravityforms'), __('Grenada', 'gravityforms'), __('Guam', 'gravityforms'), __('Guatemala', 'gravityforms'), __('Guinea', 'gravityforms'), __('Guinea-Bissau', 'gravityforms'), __('Guyana', 'gravityforms'), __('Haiti', 'gravityforms'), __('Honduras', 'gravityforms'), __('Hong Kong', 'gravityforms'), __('Hungary', 'gravityforms'), __('Iceland', 'gravityforms'), __('India', 'gravityforms'), __('Indonesia', 'gravityforms'), __('Iran', 'gravityforms'), __('Iraq', 'gravityforms'), __('Ireland', 'gravityforms'), __('Israel', 'gravityforms'), __('Italy', 'gravityforms'), __('Jamaica', 'gravityforms'), __('Japan', 'gravityforms'), __('Jordan', 'gravityforms'), __('Kazakhstan', 'gravityforms'), __('Kenya', 'gravityforms'), __('Kiribati', 'gravityforms'), __('North Korea', 'gravityforms'), __('South Korea', 'gravityforms'), __('Kuwait', 'gravityforms'), __('Kyrgyzstan', 'gravityforms'), __('Laos', 'gravityforms'), __('Latvia', 'gravityforms'), __('Lebanon', 'gravityforms'), __('Lesotho', 'gravityforms'), __('Liberia', 'gravityforms'), __('Libya', 'gravityforms'), __('Liechtenstein', 'gravityforms'), __('Lithuania', 'gravityforms'), __('Luxembourg', 'gravityforms'), __('Macedonia', 'gravityforms'), __('Madagascar', 'gravityforms'), __('Malawi', 'gravityforms'), __('Malaysia', 'gravityforms'), __('Maldives', 'gravityforms'), __('Mali', 'gravityforms'), __('Malta', 'gravityforms'), __('Marshall Islands', 'gravityforms'), __('Mauritania', 'gravityforms'), __('Mauritius', 'gravityforms'), __('Mexico', 'gravityforms'), __('Micronesia', 'gravityforms'), __('Moldova', 'gravityforms'), __('Monaco', 'gravityforms'), __('Mongolia', 'gravityforms'), __('Montenegro', 'gravityforms'), __('Morocco', 'gravityforms'), __('Mozambique', 'gravityforms'), __('Myanmar', 'gravityforms'), __('Namibia', 'gravityforms'), __('Nauru', 'gravityforms'), __('Nepal', 'gravityforms'), __('Netherlands', 'gravityforms'), __('New Zealand', 'gravityforms'), &nbsp;</div></li><li><div>        __('Nicaragua', 'gravityforms'), __('Niger', 'gravityforms'), __('Nigeria', 'gravityforms'), __('Norway', 'gravityforms'), __('Northern Mariana Islands', 'gravityforms'), __('Oman', 'gravityforms'), __('Pakistan', 'gravityforms'), __('Palau', 'gravityforms'), __('Palestine', 'gravityforms'), __('Panama', 'gravityforms'), __('Papua New Guinea', 'gravityforms'), __('Paraguay', 'gravityforms'), __('Peru', 'gravityforms'), __('Philippines', 'gravityforms'), __('Poland', 'gravityforms'), __('Portugal', 'gravityforms'), __('Puerto Rico', 'gravityforms'), __('Qatar', 'gravityforms'), __('Romania', 'gravityforms'), __('Russia', 'gravityforms'), __('Rwanda', 'gravityforms'), __('Saint Kitts and Nevis', 'gravityforms'), __('Saint Lucia', 'gravityforms'), __('Saint Vincent and the Grenadines', 'gravityforms'), __('Samoa', 'gravityforms'), __('San Marino', 'gravityforms'), __('Sao Tome and Principe', 'gravityforms'), __('Saudi Arabia', 'gravityforms'), __('Senegal', 'gravityforms'), __('Serbia and Montenegro', 'gravityforms'), __('Seychelles', 'gravityforms'), __('Sierra Leone', 'gravityforms'), __('Singapore', 'gravityforms'), __('Slovakia', 'gravityforms'), __('Slovenia', 'gravityforms'), __('Solomon Islands', 'gravityforms'), __('Somalia', 'gravityforms'), __('South Africa', 'gravityforms'), __('Spain', 'gravityforms'), __('Sri Lanka', 'gravityforms'), __('Sudan', 'gravityforms'), __('Suriname', 'gravityforms'), __('Swaziland', 'gravityforms'), __('Sweden', 'gravityforms'), __('Switzerland', 'gravityforms'), __('Syria', 'gravityforms'), __('Taiwan', 'gravityforms'), __('Tajikistan', 'gravityforms'), __('Tanzania', 'gravityforms'), __('Thailand', 'gravityforms'), __('Togo', 'gravityforms'), __('Tonga', 'gravityforms'), __('Trinidad and Tobago', 'gravityforms'), __('Tunisia', 'gravityforms'), __('Turkey', 'gravityforms'), __('Turkmenistan', 'gravityforms'), __('Tuvalu', 'gravityforms'), __('Uganda', 'gravityforms'), __('Ukraine', 'gravityforms'), __('United Arab Emirates', 'gravityforms'), __('United Kingdom', 'gravityforms'), &nbsp;</div></li><li><div>        __('United States', 'gravityforms'), __('Uruguay', 'gravityforms'), __('Uzbekistan', 'gravityforms'), __('Vanuatu', 'gravityforms'), __('Vatican City', 'gravityforms'), __('Venezuela', 'gravityforms'), __('Vietnam', 'gravityforms'), __('Virgin Islands, British', 'gravityforms'), __('Virgin Islands, U.S.', 'gravityforms'), __('Yemen', 'gravityforms'), __('Zambia', 'gravityforms'), __('Zimbabwe', 'gravityforms'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_country_code($country_name) {&nbsp;</div></li><li><div>        $codes = array(&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            __('AFGHANISTAN', 'gravityforms') =&gt; &quot;AF&quot; , &nbsp;</div></li><li><div>            __('ALBANIA', 'gravityforms') =&gt; &quot;AL&quot; , &nbsp;</div></li><li><div>            __('ALGERIA', 'gravityforms') =&gt; &quot;DZ&quot; , &nbsp;</div></li><li><div>            __('AMERICAN SAMOA', 'gravityforms') =&gt; &quot;AS&quot; , &nbsp;</div></li><li><div>            __('ANDORRA', 'gravityforms') =&gt; &quot;AD&quot; , &nbsp;</div></li><li><div>            __('ANGOLA', 'gravityforms') =&gt; &quot;AO&quot; , &nbsp;</div></li><li><div>            __('ANTIGUA AND BARBUDA', 'gravityforms') =&gt; &quot;AG&quot; , &nbsp;</div></li><li><div>            __('ARGENTINA', 'gravityforms') =&gt; &quot;AR&quot; , &nbsp;</div></li><li><div>            __('ARMENIA', 'gravityforms') =&gt; &quot;AM&quot; , &nbsp;</div></li><li><div>            __('AUSTRALIA', 'gravityforms') =&gt; &quot;AU&quot; , &nbsp;</div></li><li><div>            __('AUSTRIA', 'gravityforms') =&gt; &quot;AT&quot; , &nbsp;</div></li><li><div>            __('AZERBAIJAN', 'gravityforms') =&gt; &quot;AZ&quot; , &nbsp;</div></li><li><div>            __('BAHAMAS', 'gravityforms') =&gt; &quot;BS&quot; , &nbsp;</div></li><li><div>            __('BAHRAIN', 'gravityforms') =&gt; &quot;BH&quot; , &nbsp;</div></li><li><div>            __('BANGLADESH', 'gravityforms') =&gt; &quot;BD&quot; , &nbsp;</div></li><li><div>            __('BARBADOS', 'gravityforms') =&gt; &quot;BB&quot; , &nbsp;</div></li><li><div>            __('BELARUS', 'gravityforms') =&gt; &quot;BY&quot; , &nbsp;</div></li><li><div>            __('BELGIUM', 'gravityforms') =&gt; &quot;BE&quot; , &nbsp;</div></li><li><div>            __('BELIZE', 'gravityforms') =&gt; &quot;BZ&quot; , &nbsp;</div></li><li><div>            __('BENIN', 'gravityforms') =&gt; &quot;BJ&quot; , &nbsp;</div></li><li><div>            __('BERMUDA', 'gravityforms') =&gt; &quot;BM&quot; , &nbsp;</div></li><li><div>            __('BHUTAN', 'gravityforms') =&gt; &quot;BT&quot; , &nbsp;</div></li><li><div>            __('BOLIVIA', 'gravityforms') =&gt; &quot;BO&quot; , &nbsp;</div></li><li><div>            __('BOSNIA AND HERZEGOVINA', 'gravityforms') =&gt; &quot;BA&quot; , &nbsp;</div></li><li><div>            __('BOTSWANA', 'gravityforms') =&gt; &quot;BW&quot; , &nbsp;</div></li><li><div>            __('BRAZIL', 'gravityforms') =&gt; &quot;BR&quot; , &nbsp;</div></li><li><div>            __('BRUNEI', 'gravityforms') =&gt; &quot;BN&quot; , &nbsp;</div></li><li><div>            __('BULGARIA', 'gravityforms') =&gt; &quot;BG&quot; , &nbsp;</div></li><li><div>            __('BURKINA FASO', 'gravityforms') =&gt; &quot;BF&quot; , &nbsp;</div></li><li><div>            __('BURUNDI', 'gravityforms') =&gt; &quot;BI&quot; , &nbsp;</div></li><li><div>            __('CAMBODIA', 'gravityforms') =&gt; &quot;KH&quot; , &nbsp;</div></li><li><div>            __('CAMEROON', 'gravityforms') =&gt; &quot;CM&quot; , &nbsp;</div></li><li><div>            __('CANADA', 'gravityforms') =&gt; &quot;CA&quot; , &nbsp;</div></li><li><div>            __('CAPE VERDE', 'gravityforms') =&gt; &quot;CV&quot; , &nbsp;</div></li><li><div>            __('CENTRAL AFRICAN REPUBLIC', 'gravityforms') =&gt; &quot;CF&quot; , &nbsp;</div></li><li><div>            __('CHAD', 'gravityforms') =&gt; &quot;TD&quot; , &nbsp;</div></li><li><div>            __('CHILE', 'gravityforms') =&gt; &quot;CL&quot; , &nbsp;</div></li><li><div>            __('CHINA', 'gravityforms') =&gt; &quot;CN&quot; , &nbsp;</div></li><li><div>            __('COLOMBIA', 'gravityforms') =&gt; &quot;CO&quot; , &nbsp;</div></li><li><div>            __('COMOROS', 'gravityforms') =&gt; &quot;KM&quot; , &nbsp;</div></li><li><div>            __('CONGO', 'gravityforms') =&gt; &quot;CG&quot; , &nbsp;</div></li><li><div>            __('COSTA RICA', 'gravityforms') =&gt; &quot;CR&quot; , &nbsp;</div></li><li><div>            __('C&OCIRC;TE D\'IVOIRE', 'gravityforms') =&gt; &quot;CI&quot; , &nbsp;</div></li><li><div>            __('CROATIA', 'gravityforms') =&gt; &quot;HR&quot; , &nbsp;</div></li><li><div>            __('CUBA', 'gravityforms') =&gt; &quot;CU&quot; , &nbsp;</div></li><li><div>            __('CYPRUS', 'gravityforms') =&gt; &quot;CY&quot; , &nbsp;</div></li><li><div>            __('CZECH REPUBLIC', 'gravityforms') =&gt; &quot;CZ&quot; , &nbsp;</div></li><li><div>            __('DENMARK', 'gravityforms') =&gt; &quot;DK&quot; , &nbsp;</div></li><li><div>            __('DJIBOUTI', 'gravityforms') =&gt; &quot;DJ&quot; , &nbsp;</div></li><li><div>            __('DOMINICA', 'gravityforms') =&gt; &quot;DM&quot; , &nbsp;</div></li><li><div>            __('DOMINICAN REPUBLIC', 'gravityforms') =&gt; &quot;DO&quot; , &nbsp;</div></li><li><div>            __('EAST TIMOR', 'gravityforms') =&gt; &quot;TL&quot; , &nbsp;</div></li><li><div>            __('ECUADOR', 'gravityforms') =&gt; &quot;EC&quot; , &nbsp;</div></li><li><div>            __('EGYPT', 'gravityforms') =&gt; &quot;EG&quot; , &nbsp;</div></li><li><div>            __('EL SALVADOR', 'gravityforms') =&gt; &quot;SV&quot; , &nbsp;</div></li><li><div>            __('EQUATORIAL GUINEA', 'gravityforms') =&gt; &quot;GQ&quot; , &nbsp;</div></li><li><div>            __('ERITREA', 'gravityforms') =&gt; &quot;ER&quot; , &nbsp;</div></li><li><div>            __('ESTONIA', 'gravityforms') =&gt; &quot;EE&quot; , &nbsp;</div></li><li><div>            __('ETHIOPIA', 'gravityforms') =&gt; &quot;ET&quot; , &nbsp;</div></li><li><div>            __('FIJI', 'gravityforms') =&gt; &quot;FJ&quot; , &nbsp;</div></li><li><div>            __('FINLAND', 'gravityforms') =&gt; &quot;FI&quot; , &nbsp;</div></li><li><div>            __('FRANCE', 'gravityforms') =&gt; &quot;FR&quot; , &nbsp;</div></li><li><div>            __('GABON', 'gravityforms') =&gt; &quot;GA&quot; , &nbsp;</div></li><li><div>            __('GAMBIA', 'gravityforms') =&gt; &quot;GM&quot; , &nbsp;</div></li><li><div>            __('GEORGIA', 'gravityforms') =&gt; &quot;GE&quot; , &nbsp;</div></li><li><div>            __('GERMANY', 'gravityforms') =&gt; &quot;DE&quot; , &nbsp;</div></li><li><div>            __('GHANA', 'gravityforms') =&gt; &quot;GH&quot; , &nbsp;</div></li><li><div>            __('GREECE', 'gravityforms') =&gt; &quot;GR&quot; , &nbsp;</div></li><li><div>            __('GRENADA', 'gravityforms') =&gt; &quot;GD&quot; , &nbsp;</div></li><li><div>            __('GUAM', 'gravityforms') =&gt; &quot;GU&quot; , &nbsp;</div></li><li><div>            __('GUATEMALA', 'gravityforms') =&gt; &quot;GT&quot; , &nbsp;</div></li><li><div>            __('GUINEA', 'gravityforms') =&gt; &quot;GN&quot; , &nbsp;</div></li><li><div>            __('GUINEA-BISSAU', 'gravityforms') =&gt; &quot;GW&quot; , &nbsp;</div></li><li><div>            __('GUYANA', 'gravityforms') =&gt; &quot;GY&quot; , &nbsp;</div></li><li><div>            __('HAITI', 'gravityforms') =&gt; &quot;HT&quot; , &nbsp;</div></li><li><div>            __('HONDURAS', 'gravityforms') =&gt; &quot;HN&quot; , &nbsp;</div></li><li><div>            __('HONG KONG', 'gravityforms') =&gt; &quot;HK&quot; , &nbsp;</div></li><li><div>            __('HUNGARY', 'gravityforms') =&gt; &quot;HU&quot; , &nbsp;</div></li><li><div>            __('ICELAND', 'gravityforms') =&gt; &quot;IS&quot; , &nbsp;</div></li><li><div>            __('INDIA', 'gravityforms') =&gt; &quot;IN&quot; , &nbsp;</div></li><li><div>            __('INDONESIA', 'gravityforms') =&gt; &quot;ID&quot; , &nbsp;</div></li><li><div>            __('IRAN', 'gravityforms') =&gt; &quot;IR&quot; , &nbsp;</div></li><li><div>            __('IRAQ', 'gravityforms') =&gt; &quot;IQ&quot; , &nbsp;</div></li><li><div>            __('IRELAND', 'gravityforms') =&gt; &quot;IE&quot; , &nbsp;</div></li><li><div>            __('ISRAEL', 'gravityforms') =&gt; &quot;IL&quot; , &nbsp;</div></li><li><div>            __('ITALY', 'gravityforms') =&gt; &quot;IT&quot; , &nbsp;</div></li><li><div>            __('JAMAICA', 'gravityforms') =&gt; &quot;JM&quot; , &nbsp;</div></li><li><div>            __('JAPAN', 'gravityforms') =&gt; &quot;JP&quot; , &nbsp;</div></li><li><div>            __('JORDAN', 'gravityforms') =&gt; &quot;JO&quot; , &nbsp;</div></li><li><div>            __('KAZAKHSTAN', 'gravityforms') =&gt; &quot;KZ&quot; , &nbsp;</div></li><li><div>            __('KENYA', 'gravityforms') =&gt; &quot;KE&quot; , &nbsp;</div></li><li><div>            __('KIRIBATI', 'gravityforms') =&gt; &quot;KI&quot; , &nbsp;</div></li><li><div>            __('NORTH KOREA', 'gravityforms') =&gt; &quot;KP&quot; , &nbsp;</div></li><li><div>            __('SOUTH KOREA', 'gravityforms') =&gt; &quot;KR&quot; , &nbsp;</div></li><li><div>            __('KUWAIT', 'gravityforms') =&gt; &quot;KW&quot; , &nbsp;</div></li><li><div>            __('KYRGYZSTAN', 'gravityforms') =&gt; &quot;KG&quot; , &nbsp;</div></li><li><div>            __('LAOS', 'gravityforms') =&gt; &quot;LA&quot; , &nbsp;</div></li><li><div>            __('LATVIA', 'gravityforms') =&gt; &quot;LV&quot; , &nbsp;</div></li><li><div>            __('LEBANON', 'gravityforms') =&gt; &quot;LB&quot; , &nbsp;</div></li><li><div>            __('LESOTHO', 'gravityforms') =&gt; &quot;LS&quot; , &nbsp;</div></li><li><div>            __('LIBERIA', 'gravityforms') =&gt; &quot;LR&quot; , &nbsp;</div></li><li><div>            __('LIBYA', 'gravityforms') =&gt; &quot;LY&quot; , &nbsp;</div></li><li><div>            __('LIECHTENSTEIN', 'gravityforms') =&gt; &quot;LI&quot; , &nbsp;</div></li><li><div>            __('LITHUANIA', 'gravityforms') =&gt; &quot;LT&quot; , &nbsp;</div></li><li><div>            __('LUXEMBOURG', 'gravityforms') =&gt; &quot;LU&quot; , &nbsp;</div></li><li><div>            __('MACEDONIA', 'gravityforms') =&gt; &quot;MK&quot; , &nbsp;</div></li><li><div>            __('MADAGASCAR', 'gravityforms') =&gt; &quot;MG&quot; , &nbsp;</div></li><li><div>            __('MALAWI', 'gravityforms') =&gt; &quot;MW&quot; , &nbsp;</div></li><li><div>            __('MALAYSIA', 'gravityforms') =&gt; &quot;MY&quot; , &nbsp;</div></li><li><div>            __('MALDIVES', 'gravityforms') =&gt; &quot;MV&quot; , &nbsp;</div></li><li><div>            __('MALI', 'gravityforms') =&gt; &quot;ML&quot; , &nbsp;</div></li><li><div>            __('MALTA', 'gravityforms') =&gt; &quot;MT&quot; , &nbsp;</div></li><li><div>            __('MARSHALL ISLANDS', 'gravityforms') =&gt; &quot;MH&quot; , &nbsp;</div></li><li><div>            __('MAURITANIA', 'gravityforms') =&gt; &quot;MR&quot; , &nbsp;</div></li><li><div>            __('MAURITIUS', 'gravityforms') =&gt; &quot;MU&quot; , &nbsp;</div></li><li><div>            __('MEXICO', 'gravityforms') =&gt; &quot;MX&quot; , &nbsp;</div></li><li><div>            __('MICRONESIA', 'gravityforms') =&gt; &quot;FM&quot; , &nbsp;</div></li><li><div>            __('MOLDOVA', 'gravityforms') =&gt; &quot;MD&quot; , &nbsp;</div></li><li><div>            __('MONACO', 'gravityforms') =&gt; &quot;MC&quot; , &nbsp;</div></li><li><div>            __('MONGOLIA', 'gravityforms') =&gt; &quot;MN&quot; , &nbsp;</div></li><li><div>            __('MONTENEGRO', 'gravityforms') =&gt; &quot;ME&quot; , &nbsp;</div></li><li><div>            __('MOROCCO', 'gravityforms') =&gt; &quot;MA&quot; , &nbsp;</div></li><li><div>            __('MOZAMBIQUE', 'gravityforms') =&gt; &quot;MZ&quot; , &nbsp;</div></li><li><div>            __('MYANMAR', 'gravityforms') =&gt; &quot;MM&quot; , &nbsp;</div></li><li><div>            __('NAMIBIA', 'gravityforms') =&gt; &quot;NA&quot; , &nbsp;</div></li><li><div>            __('NAURU', 'gravityforms') =&gt; &quot;NR&quot; , &nbsp;</div></li><li><div>            __('NEPAL', 'gravityforms') =&gt; &quot;NP&quot; , &nbsp;</div></li><li><div>            __('NETHERLANDS', 'gravityforms') =&gt; &quot;NL&quot; , &nbsp;</div></li><li><div>            __('NEW ZEALAND', 'gravityforms') =&gt; &quot;NZ&quot; , &nbsp;</div></li><li><div>            __('NICARAGUA', 'gravityforms') =&gt; &quot;NI&quot; , &nbsp;</div></li><li><div>            __('NIGER', 'gravityforms') =&gt; &quot;NE&quot; , &nbsp;</div></li><li><div>            __('NIGERIA', 'gravityforms') =&gt; &quot;NG&quot; , &nbsp;</div></li><li><div>            __('NORTHERN MARIANA ISLANDS', 'gravityforms') =&gt; &quot;MP&quot; , &nbsp;</div></li><li><div>            __('NORWAY', 'gravityforms') =&gt; &quot;NO&quot; , &nbsp;</div></li><li><div>            __('OMAN', 'gravityforms') =&gt; &quot;OM&quot; , &nbsp;</div></li><li><div>            __('PAKISTAN', 'gravityforms') =&gt; &quot;PK&quot; , &nbsp;</div></li><li><div>            __('PALAU', 'gravityforms') =&gt; &quot;PW&quot; , &nbsp;</div></li><li><div>            __('PALESTINE', 'gravityforms') =&gt; &quot;PS&quot; , &nbsp;</div></li><li><div>            __('PANAMA', 'gravityforms') =&gt; &quot;PA&quot; , &nbsp;</div></li><li><div>            __('PAPUA NEW GUINEA', 'gravityforms') =&gt; &quot;PG&quot; , &nbsp;</div></li><li><div>            __('PARAGUAY', 'gravityforms') =&gt; &quot;PY&quot; , &nbsp;</div></li><li><div>            __('PERU', 'gravityforms') =&gt; &quot;PE&quot; , &nbsp;</div></li><li><div>            __('PHILIPPINES', 'gravityforms') =&gt; &quot;PH&quot; , &nbsp;</div></li><li><div>            __('POLAND', 'gravityforms') =&gt; &quot;PL&quot; , &nbsp;</div></li><li><div>            __('PORTUGAL', 'gravityforms') =&gt; &quot;PT&quot; , &nbsp;</div></li><li><div>            __('PUERTO RICO', 'gravityforms') =&gt; &quot;PR&quot; , &nbsp;</div></li><li><div>            __('QATAR', 'gravityforms') =&gt; &quot;QA&quot; , &nbsp;</div></li><li><div>            __('ROMANIA', 'gravityforms') =&gt; &quot;RO&quot; , &nbsp;</div></li><li><div>            __('RUSSIA', 'gravityforms') =&gt; &quot;RU&quot; , &nbsp;</div></li><li><div>            __('RWANDA', 'gravityforms') =&gt; &quot;RW&quot; , &nbsp;</div></li><li><div>            __('SAINT KITTS AND NEVIS', 'gravityforms') =&gt; &quot;KN&quot; , &nbsp;</div></li><li><div>            __('SAINT LUCIA', 'gravityforms') =&gt; &quot;LC&quot; , &nbsp;</div></li><li><div>            __('SAINT VINCENT AND THE GRENADINES', 'gravityforms') =&gt; &quot;VC&quot; , &nbsp;</div></li><li><div>            __('SAMOA', 'gravityforms') =&gt; &quot;WS&quot; , &nbsp;</div></li><li><div>            __('SAN MARINO', 'gravityforms') =&gt; &quot;SM&quot; , &nbsp;</div></li><li><div>            __('SAO TOME AND PRINCIPE', 'gravityforms') =&gt; &quot;ST&quot; , &nbsp;</div></li><li><div>            __('SAUDI ARABIA', 'gravityforms') =&gt; &quot;SA&quot; , &nbsp;</div></li><li><div>            __('SENEGAL', 'gravityforms') =&gt; &quot;SN&quot; , &nbsp;</div></li><li><div>            __('SERBIA AND MONTENEGRO', 'gravityforms') =&gt; &quot;RS&quot; , &nbsp;</div></li><li><div>            __('SEYCHELLES', 'gravityforms') =&gt; &quot;SC&quot; , &nbsp;</div></li><li><div>            __('SIERRA LEONE', 'gravityforms') =&gt; &quot;SL&quot; , &nbsp;</div></li><li><div>            __('SINGAPORE', 'gravityforms') =&gt; &quot;SG&quot; , &nbsp;</div></li><li><div>            __('SLOVAKIA', 'gravityforms') =&gt; &quot;SK&quot; , &nbsp;</div></li><li><div>            __('SLOVENIA', 'gravityforms') =&gt; &quot;SI&quot; , &nbsp;</div></li><li><div>            __('SOLOMON ISLANDS', 'gravityforms') =&gt; &quot;SB&quot; , &nbsp;</div></li><li><div>            __('SOMALIA', 'gravityforms') =&gt; &quot;SO&quot; , &nbsp;</div></li><li><div>            __('SOUTH AFRICA', 'gravityforms') =&gt; &quot;ZA&quot; , &nbsp;</div></li><li><div>            __('SPAIN', 'gravityforms') =&gt; &quot;ES&quot; , &nbsp;</div></li><li><div>            __('SRI LANKA', 'gravityforms') =&gt; &quot;LK&quot; , &nbsp;</div></li><li><div>            __('SUDAN', 'gravityforms') =&gt; &quot;SD&quot; , &nbsp;</div></li><li><div>            __('SURINAME', 'gravityforms') =&gt; &quot;SR&quot; , &nbsp;</div></li><li><div>            __('SWAZILAND', 'gravityforms') =&gt; &quot;SZ&quot; , &nbsp;</div></li><li><div>            __('SWEDEN', 'gravityforms') =&gt; &quot;SE&quot; , &nbsp;</div></li><li><div>            __('SWITZERLAND', 'gravityforms') =&gt; &quot;CH&quot; , &nbsp;</div></li><li><div>            __('SYRIA', 'gravityforms') =&gt; &quot;SY&quot; , &nbsp;</div></li><li><div>            __('TAIWAN', 'gravityforms') =&gt; &quot;TW&quot; , &nbsp;</div></li><li><div>            __('TAJIKISTAN', 'gravityforms') =&gt; &quot;TJ&quot; , &nbsp;</div></li><li><div>            __('TANZANIA', 'gravityforms') =&gt; &quot;TZ&quot; , &nbsp;</div></li><li><div>            __('THAILAND', 'gravityforms') =&gt; &quot;TH&quot; , &nbsp;</div></li><li><div>            __('TOGO', 'gravityforms') =&gt; &quot;TG&quot; , &nbsp;</div></li><li><div>            __('TONGA', 'gravityforms') =&gt; &quot;TO&quot; , &nbsp;</div></li><li><div>            __('TRINIDAD AND TOBAGO', 'gravityforms') =&gt; &quot;TT&quot; , &nbsp;</div></li><li><div>            __('TUNISIA', 'gravityforms') =&gt; &quot;TN&quot; , &nbsp;</div></li><li><div>            __('TURKEY', 'gravityforms') =&gt; &quot;TR&quot; , &nbsp;</div></li><li><div>            __('TURKMENISTAN', 'gravityforms') =&gt; &quot;TM&quot; , &nbsp;</div></li><li><div>            __('TUVALU', 'gravityforms') =&gt; &quot;TV&quot; , &nbsp;</div></li><li><div>            __('UGANDA', 'gravityforms') =&gt; &quot;UG&quot; , &nbsp;</div></li><li><div>            __('UKRAINE', 'gravityforms') =&gt; &quot;UA&quot; , &nbsp;</div></li><li><div>            __('UNITED ARAB EMIRATES', 'gravityforms') =&gt; &quot;AE&quot; , &nbsp;</div></li><li><div>            __('UNITED KINGDOM', 'gravityforms') =&gt; &quot;GB&quot; , &nbsp;</div></li><li><div>            __('UNITED STATES', 'gravityforms') =&gt; &quot;US&quot; , &nbsp;</div></li><li><div>            __('URUGUAY', 'gravityforms') =&gt; &quot;UY&quot; , &nbsp;</div></li><li><div>            __('UZBEKISTAN', 'gravityforms') =&gt; &quot;UZ&quot; , &nbsp;</div></li><li><div>            __('VANUATU', 'gravityforms') =&gt; &quot;VU&quot; , &nbsp;</div></li><li><div>            __('VATICAN CITY', 'gravityforms') =&gt; &quot;&quot; , &nbsp;</div></li><li><div>            __('VENEZUELA', 'gravityforms') =&gt; &quot;VE&quot; , &nbsp;</div></li><li><div>            __('VIRGIN ISLANDS, BRITISH', 'gravityforms') =&gt; &quot;VG&quot; , &nbsp;</div></li><li><div>            __('VIRGIN ISLANDS, U.S.', 'gravityforms') =&gt; &quot;VI&quot; , &nbsp;</div></li><li><div>            __('VIETNAM', 'gravityforms') =&gt; &quot;VN&quot; , &nbsp;</div></li><li><div>            __('YEMEN', 'gravityforms') =&gt; &quot;YE&quot; , &nbsp;</div></li><li><div>            __('ZAMBIA', 'gravityforms') =&gt; &quot;ZM&quot; , &nbsp;</div></li><li><div>            __('ZIMBABWE', 'gravityforms') =&gt; &quot;ZW&quot; );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $codes[strtoupper($country_name)];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_us_states() {&nbsp;</div></li><li><div>        return array(__(&quot;Alabama&quot;, &quot;gravityforms&quot;), __(&quot;Alaska&quot;, &quot;gravityforms&quot;), __(&quot;Arizona&quot;, &quot;gravityforms&quot;), __(&quot;Arkansas&quot;, &quot;gravityforms&quot;), __(&quot;California&quot;, &quot;gravityforms&quot;), __(&quot;Colorado&quot;, &quot;gravityforms&quot;), __(&quot;Connecticut&quot;, &quot;gravityforms&quot;), __(&quot;Delaware&quot;, &quot;gravityforms&quot;), __(&quot;District of Columbia&quot;, &quot;gravityforms&quot;), __(&quot;Florida&quot;, &quot;gravityforms&quot;), __(&quot;Georgia&quot;, &quot;gravityforms&quot;), __(&quot;Hawaii&quot;, &quot;gravityforms&quot;), __(&quot;Idaho&quot;, &quot;gravityforms&quot;), __(&quot;Illinois&quot;, &quot;gravityforms&quot;), __(&quot;Indiana&quot;, &quot;gravityforms&quot;), __(&quot;Iowa&quot;, &quot;gravityforms&quot;), __(&quot;Kansas&quot;, &quot;gravityforms&quot;), __(&quot;Kentucky&quot;, &quot;gravityforms&quot;), __(&quot;Louisiana&quot;, &quot;gravityforms&quot;), __(&quot;Maine&quot;, &quot;gravityforms&quot;), __(&quot;Maryland&quot;, &quot;gravityforms&quot;), __(&quot;Massachusetts&quot;, &quot;gravityforms&quot;), __(&quot;Michigan&quot;, &quot;gravityforms&quot;), __(&quot;Minnesota&quot;, &quot;gravityforms&quot;), __(&quot;Mississippi&quot;, &quot;gravityforms&quot;), __(&quot;Missouri&quot;, &quot;gravityforms&quot;), __(&quot;Montana&quot;, &quot;gravityforms&quot;), __(&quot;Nebraska&quot;, &quot;gravityforms&quot;), __(&quot;Nevada&quot;, &quot;gravityforms&quot;), __(&quot;New Hampshire&quot;, &quot;gravityforms&quot;), __(&quot;New Jersey&quot;, &quot;gravityforms&quot;), __(&quot;New Mexico&quot;, &quot;gravityforms&quot;), __(&quot;New York&quot;, &quot;gravityforms&quot;), __(&quot;North Carolina&quot;, &quot;gravityforms&quot;), __(&quot;North Dakota&quot;, &quot;gravityforms&quot;), __(&quot;Ohio&quot;, &quot;gravityforms&quot;), __(&quot;Oklahoma&quot;, &quot;gravityforms&quot;), __(&quot;Oregon&quot;, &quot;gravityforms&quot;), __(&quot;Pennsylvania&quot;, &quot;gravityforms&quot;), __(&quot;Rhode Island&quot;, &quot;gravityforms&quot;), __(&quot;South Carolina&quot;, &quot;gravityforms&quot;), __(&quot;South Dakota&quot;, &quot;gravityforms&quot;), __(&quot;Tennessee&quot;, &quot;gravityforms&quot;), __(&quot;Texas&quot;, &quot;gravityforms&quot;), __(&quot;Utah&quot;, &quot;gravityforms&quot;), __(&quot;Vermont&quot;, &quot;gravityforms&quot;), __(&quot;Virginia&quot;, &quot;gravityforms&quot;), __(&quot;Washington&quot;, &quot;gravityforms&quot;), __(&quot;West Virginia&quot;, &quot;gravityforms&quot;), __(&quot;Wisconsin&quot;, &quot;gravityforms&quot;), __(&quot;Wyoming&quot;, &quot;gravityforms&quot;));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_canadian_provinces() {&nbsp;</div></li><li><div>        return array(__(&quot;Alberta&quot;, &quot;gravityforms&quot;), __(&quot;British Columbia&quot;, &quot;gravityforms&quot;), __(&quot;Manitoba&quot;, &quot;gravityforms&quot;), __(&quot;New Brunswick&quot;, &quot;gravityforms&quot;), __(&quot;Newfoundland & Labrador&quot;, &quot;gravityforms&quot;), __(&quot;Northwest Territories&quot;, &quot;gravityforms&quot;), __(&quot;Nova Scotia&quot;, &quot;gravityforms&quot;), __(&quot;Nunavut&quot;, &quot;gravityforms&quot;), __(&quot;Ontario&quot;, &quot;gravityforms&quot;), __(&quot;Prince Edward Island&quot;, &quot;gravityforms&quot;), __(&quot;Quebec&quot;, &quot;gravityforms&quot;), __(&quot;Saskatchewan&quot;, &quot;gravityforms&quot;), __(&quot;Yukon&quot;, &quot;gravityforms&quot;));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_us_state_dropdown($selected_state = &quot;&quot;) {&nbsp;</div></li><li><div>        $states = array_merge(array(''), self::get_us_states());&nbsp;</div></li><li><div>        foreach($states as $state) {&nbsp;</div></li><li><div>            $selected = $state == $selected_state ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>            $str .= &quot;&lt;option value='&quot; . esc_attr($state) . &quot;' $selected&gt;&quot; . $state . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_canadian_provinces_dropdown($selected_province = &quot;&quot;) {&nbsp;</div></li><li><div>        $states = array_merge(array(''), self::get_canadian_provinces());&nbsp;</div></li><li><div>        foreach($states as $state) {&nbsp;</div></li><li><div>            $selected = $state == $selected_province ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>            $str .= &quot;&lt;option value='&quot; . esc_attr($state) . &quot;' $selected&gt;&quot; . $state . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_country_dropdown($selected_country = &quot;&quot;) {&nbsp;</div></li><li><div>        $countries = array_merge(array(''), self::get_countries());&nbsp;</div></li><li><div>        foreach($countries as $country) {&nbsp;</div></li><li><div>            $selected = $country == $selected_country ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>            $str .= &quot;&lt;option value='&quot; . esc_attr($country) . &quot;' $selected&gt;&quot; . $country . &quot;&lt;/option&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $str;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private static function is_post_field($field) {&nbsp;</div></li><li><div>        return in_array($field[&quot;type&quot;], array(&quot;post_title&quot;, &quot;post_tags&quot;, &quot;post_category&quot;, &quot;post_custom_field&quot;, &quot;post_content&quot;, &quot;post_excerpt&quot;, &quot;post_image&quot;));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_field_input($field, $value=&quot;&quot;, $lead_id=0, $form_id=0) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $id = $field[&quot;id&quot;];&nbsp;</div></li><li><div>        $field_id = IS_ADMIN || $form_id == 0 ? &quot;input_$id&quot; : &quot;input_&quot; . $form_id . &quot;_$id&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $size = $field[&quot;size&quot;];&nbsp;</div></li><li><div>        $disabled_text = (IS_ADMIN && RG_CURRENT_VIEW != &quot;entry&quot;) ? &quot;disabled='disabled'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>        $class_suffix = RG_CURRENT_VIEW == &quot;entry&quot; ? &quot;_admin&quot; : &quot;&quot;;&nbsp;</div></li><li><div>        $class = $size . $class_suffix;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(RG_CURRENT_VIEW == &quot;entry&quot;) {&nbsp;</div></li><li><div>            $lead = RGFormsModel::get_lead($lead_id);&nbsp;</div></li><li><div>            $post_id = $lead[&quot;post_id&quot;];&nbsp;</div></li><li><div>            $post_link = &quot;&quot;;&nbsp;</div></li><li><div>            if(is_numeric($post_id) && self::is_post_field($field)) {&nbsp;</div></li><li><div>                $post_link = &quot;You can &lt;a href='post.php?action=edit&post=$post_id'&gt;edit this post&lt;/a&gt; from the post page.&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        switch(RGFormsModel::get_input_type($field)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;website&quot;:&nbsp;</div></li><li><div>                $value = empty($value) ? &quot;http://&quot; : $value;&nbsp;</div></li><li><div>            case &quot;text&quot;:&nbsp;</div></li><li><div>            case &quot;email&quot;:&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='%s' tabindex='%d' %s/&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;hidden&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_type = IS_ADMIN ? &quot;text&quot; : &quot;hidden&quot;;&nbsp;</div></li><li><div>                $class_attribute = IS_ADMIN ? &quot;&quot; : &quot;class='gform_hidden'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;input name='input_%d' id='%s' type='$field_type' $class_attribute value='%s' %s/&gt;&quot;, $id, $field_id, esc_attr($value), $disabled_text);&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;adminonly_hidden&quot; :&nbsp;</div></li><li><div>                if(!is_array($field[&quot;inputs&quot;]))&nbsp;</div></li><li><div>                    return sprintf(&quot;&lt;input name='input_%d' id='%s' class='gform_hidden' type='hidden' value='%s'/&gt;&quot;, $id, $field_id, esc_attr($value));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $fields = &quot;&quot;;&nbsp;</div></li><li><div>                foreach($field[&quot;inputs&quot;] as $input) {&nbsp;</div></li><li><div>                    $fields .= sprintf(&quot;&lt;input name='input_%s' class='gform_hidden' type='hidden' value='%s'/&gt;&quot;, $input[&quot;id&quot;], esc_attr($value[$input[&quot;id&quot;]]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return $fields;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;number&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(!IS_ADMIN) {&nbsp;</div></li><li><div>                    $min = $field[&quot;rangeMin&quot;];&nbsp;</div></li><li><div>                    $max = $field[&quot;rangeMax&quot;];&nbsp;</div></li><li><div>                    $validation_class = $field[&quot;failed_validation&quot;] ? &quot;validation_message&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if(is_numeric($min) && is_numeric($max))&nbsp;</div></li><li><div>                        $instruction = &quot;&lt;div class='instruction $validation_class'&gt;&quot; . __(sprintf(&quot;Please enter a value between %s and %s.&quot;, &quot;&lt;strong&gt;$min&lt;/strong&gt;&quot;, &quot;&lt;strong&gt;$max&lt;/strong&gt;&quot;), &quot;gravityforms&quot;).&quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    else if(is_numeric($min))&nbsp;</div></li><li><div>                        $instruction = &quot;&lt;div class='instruction $validation_class'&gt;&quot; . __(sprintf(&quot;Please enter a value greater than or equal to %s.&quot;, &quot;&lt;strong&gt;$min&lt;/strong&gt;&quot;), &quot;gravityforms&quot;).&quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    else if(is_numeric($max))&nbsp;</div></li><li><div>                        $instruction = &quot;&lt;div class='instruction $validation_class'&gt;&quot; . __(sprintf(&quot;Please enter a value less than or equal to %s.&quot;, &quot;&lt;strong&gt;$max&lt;/strong&gt;&quot;), &quot;gravityforms&quot;).&quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                        $instruction = &quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='%s' tabindex='%d' %s/&gt;%s&lt;/div&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text, $instruction);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;phone&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $instruction = $field[&quot;phoneFormat&quot;] == &quot;standard&quot; ? __(&quot;Phone format:&quot;, &quot;gravityforms&quot;) . &quot; (###)###-####&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                $instruction_div = $field[&quot;failed_validation&quot;] ? &quot;&lt;div class='instruction validation_message'&gt;$instruction&lt;/div&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='%s' tabindex='%d' %s/&gt;$instruction_div&lt;/div&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;textarea&quot;:&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;textarea name='input_%d' id='%s' class='textarea %s' tabindex='%d' %s rows='10' cols='50'&gt;%s&lt;/textarea&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($class), self::$tab_index++, $disabled_text, esc_html($value));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;post_title&quot;:&nbsp;</div></li><li><div>            case &quot;post_tags&quot;:&nbsp;</div></li><li><div>            case &quot;post_custom_field&quot;:&nbsp;</div></li><li><div>                return !empty($post_link) ? $post_link : sprintf(&quot;&lt;div&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='%s' tabindex='%d' %s/&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;post_content&quot;:&nbsp;</div></li><li><div>            case &quot;post_excerpt&quot;:&nbsp;</div></li><li><div>                return !empty($post_link) ? $post_link : sprintf(&quot;&lt;div&gt;&lt;textarea name='input_%d' id='%s' class='textarea %s' tabindex='%d' %s rows='10' cols='50'&gt;%s&lt;/textarea&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($class), self::$tab_index++, $disabled_text, esc_html($value));&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;post_category&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if($field[&quot;displayAllCategories&quot;] && !IS_ADMIN) {&nbsp;</div></li><li><div>                    $selected = empty($value) ? get_option('default_category') : $value;&nbsp;</div></li><li><div>                    return &quot;&lt;div class='ginput_container'&gt;&quot; . wp_dropdown_categories(array('echo' =&gt; 0, 'selected' =&gt; $selected, &quot;class&quot; =&gt; esc_attr($class) . &quot; gfield_select&quot;, &quot;tab_index&quot; =&gt;  self::$tab_index++, 'hide_empty' =&gt; 0, 'name' =&gt; &quot;input_$id&quot;, 'orderby' =&gt; 'name', 'hierarchical' =&gt; true )) . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;select name='input_%d' id='%s' class='%s gfield_select' tabindex='%d' %s&gt;%s&lt;/select&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($class), self::$tab_index++, $disabled_text, self::get_select_choices($field, $value));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;post_image&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $title = esc_attr($value[$field[&quot;id&quot;] . &quot;.1&quot;]);&nbsp;</div></li><li><div>                $caption = esc_attr($value[$field[&quot;id&quot;] . &quot;.4&quot;]);&nbsp;</div></li><li><div>                $description = esc_attr($value[$field[&quot;id&quot;] . &quot;.7&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //hidding meta fields for admin&nbsp;</div></li><li><div>                $hidden_style = &quot;style='display:none;'&quot;;&nbsp;</div></li><li><div>                $title_style = !$field[&quot;displayTitle&quot;] && IS_ADMIN ? $hidden_style : &quot;&quot;;&nbsp;</div></li><li><div>                $caption_style = !$field[&quot;displayCaption&quot;] && IS_ADMIN ? $hidden_style : &quot;&quot;;&nbsp;</div></li><li><div>                $description_style = !$field[&quot;displayDescription&quot;] && IS_ADMIN ? $hidden_style : &quot;&quot;;&nbsp;</div></li><li><div>                $file_label_style = IS_ADMIN && !($field[&quot;displayTitle&quot;] || $field[&quot;displayCaption&quot;] || $field[&quot;displayDescription&quot;]) ? $hidden_style : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //in admin, render all meta fields to allow for immediate feedback, but hide the ones not selected&nbsp;</div></li><li><div>                $file_label = (IS_ADMIN || $field[&quot;displayTitle&quot;] || $field[&quot;displayCaption&quot;] || $field[&quot;displayDescription&quot;]) ? &quot;&lt;label for='$field_id' class='ginput_post_image_file' $file_label_style&gt;&quot; . apply_filters(&quot;gform_postimage_file&quot;, __(&quot;File&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                $upload = sprintf(&quot;&lt;span class='ginput_full$class_suffix'&gt;&lt;input name='input_%d' id='%s' type='file' value='%s' class='%s' tabindex='%d' %s/&gt;$file_label&lt;/span&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>                $title_field = $field[&quot;displayTitle&quot;] || IS_ADMIN ? sprintf(&quot;&lt;span class='ginput_full$class_suffix ginput_post_image_title' $title_style&gt;&lt;input type='text' name='input_%d.1' id='%s.1' value='%s' tabindex='%d' %s/&gt;&lt;label for='input_%d.1'&gt;&quot; . apply_filters(&quot;gform_postimage_title&quot;, __(&quot;Title&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $title, self::$tab_index++, $disabled_text, $id) : &quot;&quot;;&nbsp;</div></li><li><div>                $caption_field = $field[&quot;displayCaption&quot;] || IS_ADMIN ? sprintf(&quot;&lt;span class='ginput_full$class_suffix ginput_post_image_caption' $caption_style&gt;&lt;input type='text' name='input_%d.4' id='%s.4' value='%s' tabindex='%d' %s/&gt;&lt;label for='input_%d.4'&gt;&quot; . apply_filters(&quot;gform_postimage_title&quot;, __(&quot;Caption&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $caption, self::$tab_index++, $disabled_text, $id) : &quot;&quot;;&nbsp;</div></li><li><div>                $description_field = $field[&quot;displayDescription&quot;] || IS_ADMIN? sprintf(&quot;&lt;span class='ginput_full$class_suffix ginput_post_image_description' $description_style&gt;&lt;input type='text' name='input_%d.7' id='%s.7' value='%s' tabindex='%d' %s/&gt;&lt;label for='input_%d.7'&gt;&quot; . apply_filters(&quot;gform_postimage_title&quot;, __(&quot;Description&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $description, self::$tab_index++, $disabled_text, $id) : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return &quot;&lt;div class='ginput_complex$class_suffix ginput_container'&gt;&quot; . $upload . $title_field . $caption_field . $description_field . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>            case &quot;select&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $logic_event = empty($field[&quot;conditionalLogicFields&quot;]) || IS_ADMIN ? &quot;&quot; : &quot;onchange='gf_apply_rules(&quot; . $field[&quot;formId&quot;] . &quot;, &quot; . GFCommon::json_encode($field[&quot;conditionalLogicFields&quot;]) . &quot;);'&quot;;&nbsp;</div></li><li><div>                $css_class = trim(esc_attr($class) . &quot; gfield_select&quot;);&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;select name='input_%d' id='%s' $logic_event class='%s' tabindex='%d' %s&gt;%s&lt;/select&gt;&lt;/div&gt;&quot;, $id, $field_id, $css_class, self::$tab_index++, $disabled_text, self::get_select_choices($field, $value));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;checkbox&quot; :&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;ul class='gfield_checkbox' id='%s'&gt;%s&lt;/ul&gt;&lt;/div&gt;&quot;, $field_id, self::get_checkbox_choices($field, $value, $disabled_text));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;radio&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;ul class='gfield_radio' id='%s'&gt;%s&lt;/ul&gt;&lt;/div&gt;&quot;, $field_id, self::get_radio_choices($field, $value, $disabled_text));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;name&quot; :&nbsp;</div></li><li><div>                if(is_array($value)) {&nbsp;</div></li><li><div>                    $prefix = esc_attr($value[$field[&quot;id&quot;] . &quot;.2&quot;]);&nbsp;</div></li><li><div>                    $first = esc_attr($value[$field[&quot;id&quot;] . &quot;.3&quot;]);&nbsp;</div></li><li><div>                    $last = esc_attr($value[$field[&quot;id&quot;] . &quot;.6&quot;]);&nbsp;</div></li><li><div>                    $suffix = esc_attr($value[$field[&quot;id&quot;] . &quot;.8&quot;]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                switch($field[&quot;nameFormat&quot;]) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case &quot;extended&quot; :&nbsp;</div></li><li><div>                        return sprintf(&quot;&lt;div class='ginput_complex$class_suffix ginput_container' id='$field_id'&gt;&lt;span id='&quot; . $field_id . &quot;_2_container' class='name_prefix'&gt;&lt;input type='text' name='input_%d.2' id='%s.2' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.2'&gt;&quot; . apply_filters(&quot;gform_name_prefix&quot;, __(&quot;Prefix&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;span id='&quot; . $field_id . &quot;_3_container' class='name_first'&gt;&lt;input type='text' name='input_%d.3' id='%s.3' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.3'&gt;&quot; . apply_filters(&quot;gform_name_first&quot;, __(&quot;First&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;span id='&quot; . $field_id . &quot;_6_container' class='name_last'&gt;&lt;input type='text' name='input_%d.6' id='%s.6' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.6'&gt;&quot; . apply_filters(&quot;gform_name_last&quot;, __(&quot;Last&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;span id='&quot; . $field_id . &quot;_8_container' class='name_suffix'&gt;&lt;input type='text' name='input_%d.8' id='%s.8' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.8'&gt;&quot; . apply_filters(&quot;gform_name_suffix&quot;, __(&quot;Suffix&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;/div&gt;&quot;, $id, $field_id, $prefix, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, $first, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, $last, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, $suffix, self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case &quot;simple&quot; :&nbsp;</div></li><li><div>                        return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='%s' tabindex='%d' %s/&gt;&lt;/div&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    default :&nbsp;</div></li><li><div>                        return sprintf(&quot;&lt;div class='ginput_complex$class_suffix ginput_container' id='$field_id'&gt;&lt;span id='&quot; . $field_id . &quot;_3_container' class='ginput_left'&gt;&lt;input type='text' name='input_%d.3' id='%s.3' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.3'&gt;&quot; . apply_filters(&quot;gform_name_first&quot;, __(&quot;First&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;span id='&quot; . $field_id . &quot;_6_container' class='ginput_right'&gt;&lt;input type='text' name='input_%d.6' id='%s.6' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.6'&gt;&quot; . apply_filters(&quot;gform_name_last&quot;, __(&quot;Last&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&lt;/div&gt;&quot;, $id, $field_id, $first, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, $last, self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;address&quot; :&nbsp;</div></li><li><div>                if(is_array($value)) {&nbsp;</div></li><li><div>                    $street_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.1&quot;]);&nbsp;</div></li><li><div>                    $street2_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.2&quot;]);&nbsp;</div></li><li><div>                    $city_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.3&quot;]);&nbsp;</div></li><li><div>                    $state_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.4&quot;]);&nbsp;</div></li><li><div>                    $zip_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.5&quot;]);&nbsp;</div></li><li><div>                    $country_value = esc_attr($value[$field[&quot;id&quot;] . &quot;.6&quot;]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                switch($field[&quot;addressType&quot;]) {&nbsp;</div></li><li><div>                    case &quot;us&quot; :&nbsp;</div></li><li><div>                        $state_label = __(&quot;State&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $zip_label = __(&quot;Zip Code&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $hide_country = true;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    case &quot;canadian&quot; :&nbsp;</div></li><li><div>                        $state_label = __(&quot;Province&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $zip_label = __(&quot;Postal Code&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $hide_country = true;&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    default:&nbsp;</div></li><li><div>                        $state_label = __(&quot;State / Province / Region&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $zip_label = __(&quot;Zip / Postal Code&quot;, &quot;gravityforms&quot;);&nbsp;</div></li><li><div>                        $hide_country = $field[&quot;hideCountry&quot;];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(empty($country_value))&nbsp;</div></li><li><div>                    $country_value = $field[&quot;defaultCountry&quot;];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $country_list = self::get_country_dropdown($country_value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //address field&nbsp;</div></li><li><div>                $street_address = sprintf(&quot;&lt;span class='ginput_full$class_suffix' id='&quot; . $field_id . &quot;_1_container'&gt;&lt;input type='text' name='input_%d.1' id='%s_1' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s_1' id='&quot; . $field_id . &quot;_1_label'&gt;&quot; . apply_filters(&quot;gform_address_street&quot;, __(&quot;Street Address&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $street_value, self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //address line 2 field&nbsp;</div></li><li><div>                $style = (IS_ADMIN && $field[&quot;hideAddress2&quot;]) ? &quot;style='display:none;'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                $street_address2 = (IS_ADMIN || !$field[&quot;hideAddress2&quot;]) ? sprintf(&quot;&lt;span class='ginput_full$class_suffix' id='&quot; . $field_id . &quot;_2_container' $style&gt;&lt;input type='text' name='input_%d.2' id='%s_2' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s_2' id='&quot; . $field_id . &quot;_2_label'&gt;&quot; . apply_filters(&quot;gform_address_street2&quot;, __(&quot;Address Line 2&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $street2_value, self::$tab_index++, $disabled_text, $field_id) : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //city field&nbsp;</div></li><li><div>                $city = sprintf(&quot;&lt;span class='ginput_left$class_suffix' id='&quot; . $field_id . &quot;_3_container'&gt;&lt;input type='text' name='input_%d.3' id='%s_3' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s_3' id='$field_id.3_label'&gt;&quot; . apply_filters(&quot;gform_address_city&quot;, __(&quot;City&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $city_value, self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                //state field&nbsp;</div></li><li><div>                $state_field = self::get_state_field($field, $id, $field_id, $state_value, $disabled_text);&nbsp;</div></li><li><div>                $state = sprintf(&quot;&lt;span class='ginput_right$class_suffix' id='&quot; . $field_id . &quot;_4_container'&gt;$state_field&lt;label for='%s.4' id='&quot; . $field_id . &quot;_4_label'&gt;&quot; . apply_filters(&quot;gform_address_state&quot;, $state_label, $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $field_id);&nbsp;</div></li><li><div>                $zip = sprintf(&quot;&lt;span class='ginput_left$class_suffix' id='&quot; . $field_id . &quot;_5_container'&gt;&lt;input type='text' name='input_%d.5' id='%s_5' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s_5' id='&quot; . $field_id . &quot;_5_label'&gt;&quot; . apply_filters(&quot;gform_address_zip&quot;, $zip_label, $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, $zip_value, self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(IS_ADMIN || !$hide_country) {&nbsp;</div></li><li><div>                    $style = $hide_country ? &quot;style='display:none;'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                    $country = sprintf(&quot;&lt;span class='ginput_right$class_suffix' id='&quot; . $field_id . &quot;_6_container' $style&gt;&lt;select name='input_%d.6' id='%s_6' tabindex='%d' %s&gt;%s&lt;/select&gt;&lt;label for='%s_6' id='&quot; . $field_id . &quot;_6_label'&gt;&quot; . apply_filters(&quot;gform_address_country&quot;, __(&quot;Country&quot;, &quot;gravityforms&quot;), $form_id) . &quot;&lt;/label&gt;&lt;/span&gt;&quot;, $id, $field_id, self::$tab_index++, $disabled_text, $country_list, $field_id);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $country = sprintf(&quot;&lt;input type='hidden' class='gform_hidden' name='input_%d.6' id='%s_6' value='%s'/&gt;&quot;, $id, $field_id, $country_value);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return &quot;&lt;div class='ginput_complex$class_suffix ginput_container' id='$field_id'&gt;&quot; . $street_address . $street_address2 . $city . $state . $zip . $country . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;date&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $format = empty($field[&quot;dateFormat&quot;]) ? &quot;mdy&quot; : esc_attr($field[&quot;dateFormat&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(IS_ADMIN && RG_CURRENT_VIEW != &quot;entry&quot;) {&nbsp;</div></li><li><div>                    $datepicker_display = $field[&quot;dateType&quot;] == &quot;datefield&quot; ? &quot;none&quot; : &quot;inline&quot;;&nbsp;</div></li><li><div>                    $dropdown_display = $field[&quot;dateType&quot;] == &quot;datefield&quot; ? &quot;inline&quot; : &quot;none&quot;;&nbsp;</div></li><li><div>                    $icon_display = $field[&quot;calendarIconType&quot;] == &quot;calendar&quot; ? &quot;inline&quot; : &quot;none&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $month_field = &quot;&lt;div class='gfield_date_month ginput_date' id='gfield_input_date_month' style='display:$dropdown_display'&gt;&lt;input name='ginput_month' type='text' disabled='disabled'/&gt;&lt;label&gt;&quot; . __(&quot;MM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    $day_field = &quot;&lt;div class='gfield_date_day ginput_date' id='gfield_input_date_day' style='display:$dropdown_display'&gt;&lt;input name='ginput_day' type='text' disabled='disabled'/&gt;&lt;label&gt;&quot; . __(&quot;DD&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    $year_field = &quot;&lt;div class='gfield_date_year ginput_date' id='gfield_input_date_year' style='display:$dropdown_display'&gt;&lt;input type='text' name='ginput_year' disabled='disabled'/&gt;&lt;label&gt;&quot; . __(&quot;YYYY&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $field_string =&quot;&lt;div class='ginput_container' id='gfield_input_datepicker' style='display:$datepicker_display'&gt;&lt;input name='ginput_datepicker' type='text' /&gt;&lt;img src='&quot; . GFCommon::get_base_url() . &quot;/images/calendar.png' id='gfield_input_datepicker_icon' style='display:$icon_display'/&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    $field_string .= $field[&quot;dateFormat&quot;] == &quot;dmy&quot; ? $day_field . $month_field . $year_field : $month_field . $day_field . $year_field;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    return $field_string;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $date_info = GFCommon::parse_date($value, $format);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if($field[&quot;dateType&quot;] == &quot;datefield&quot;)&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        if($format == &quot;mdy&quot;) {&nbsp;</div></li><li><div>                            $field_str = sprintf(&quot;&lt;div class='clear-multi'&gt;&lt;div class='gfield_date_month ginput_container' id='%s'&gt;&lt;input type='text' maxlength='2' name='input_%d[]' id='%s.1' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.1'&gt;&quot; . __(&quot;MM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $date_info[&quot;month&quot;], self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>                            $field_str .= sprintf(&quot;&lt;div class='gfield_date_day ginput_container' id='%s'&gt;&lt;input type='text' maxlength='2' name='input_%d[]' id='%s.2' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.2'&gt;&quot; . __(&quot;DD&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $date_info[&quot;day&quot;], self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        else{&nbsp;</div></li><li><div>                            $field_str = sprintf(&quot;&lt;div class='clear-multi'&gt;&lt;div class='gfield_date_day ginput_container' id='%s'&gt;&lt;input type='text' maxlength='2' name='input_%d[]' id='%s.2' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.2'&gt;&quot; . __(&quot;DD&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $date_info[&quot;day&quot;], self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>                            $field_str .= sprintf(&quot;&lt;div class='gfield_date_month ginput_container' id='%s'&gt;&lt;input type='text' maxlength='2' name='input_%d[]' id='%s.1' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.1'&gt;&quot; . __(&quot;MM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $date_info[&quot;month&quot;], self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $field_str .= sprintf(&quot;&lt;div class='gfield_date_year ginput_container' id='%s'&gt;&lt;input type='text' maxlength='4' name='input_%d[]' id='%s.3' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.3'&gt;&quot; . __(&quot;YYYY&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $date_info[&quot;year&quot;], self::$tab_index++, $disabled_text, $field_id);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        return $field_str;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        $value = GFCommon::date_display($value, $format);&nbsp;</div></li><li><div>                        $icon_class = $field[&quot;calendarIconType&quot;] == &quot;none&quot; ? &quot;datepicker_no_icon&quot; : &quot;datepicker_with_icon&quot;;&nbsp;</div></li><li><div>                        $icon_url = empty($field[&quot;calendarIconUrl&quot;]) ? GFCommon::get_base_url() . &quot;/images/calendar.png&quot; : $field[&quot;calendarIconUrl&quot;];&nbsp;</div></li><li><div>                        return sprintf(&quot;&lt;div class='ginput_container'&gt;&lt;input name='input_%d' id='%s' type='text' value='%s' class='datepicker %s %s %s' tabindex='%d' %s/&gt;%s&lt;/div&gt;&lt;input type='hidden' id='gforms_calendar_icon_$field_id' class='gform_hidden' value='$icon_url'/&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), $format, $icon_class, self::$tab_index++, $disabled_text, $datepicker);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;time&quot; :&nbsp;</div></li><li><div>                if(!empty($post_link))&nbsp;</div></li><li><div>                    return $post_link;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(!is_array($value) && !empty($value)) {&nbsp;</div></li><li><div>                    preg_match('/^(\d*):(\d*) (.*)$/', $value, $matches);&nbsp;</div></li><li><div>                    $hour = esc_attr($matches[1]);&nbsp;</div></li><li><div>                    $minute = esc_attr($matches[2]);&nbsp;</div></li><li><div>                    $am_selected = $matches[3] == &quot;am&quot; ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                    $pm_selected = $matches[3] == &quot;pm&quot; ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $hour = esc_attr($value[0]);&nbsp;</div></li><li><div>                    $minute = esc_attr($value[1]);&nbsp;</div></li><li><div>                    $am_selected = $value[2] == &quot;am&quot; ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                    $pm_selected = $value[2] == &quot;pm&quot; ? &quot;selected='selected'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return sprintf(&quot;&lt;div class='clear-multi'&gt;&lt;div class='gfield_time_hour ginput_container' id='%s'&gt;&lt;input type='text' name='input_%d[]' id='%s.1' value='%s' tabindex='%d' %s/&gt; : &lt;label for='%s.1'&gt;&quot; . __(&quot;HH&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&lt;div class='gfield_time_minute'&gt;&lt;input type='text' name='input_%d[]' id='%s.2' value='%s' tabindex='%d' %s/&gt;&lt;label for='%s.2'&gt;&quot; . __(&quot;MM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/label&gt;&lt;/div&gt;&lt;div class='gfield_time_ampm'&gt;&lt;select name='input_%d[]' id='%s.3' tabindex='%d' %s&gt;&lt;option value='am' %s&gt;&quot; . __(&quot;AM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/option&gt;&lt;option value='pm' %s&gt;&quot; . __(&quot;PM&quot;, &quot;gravityforms&quot;) . &quot;&lt;/option&gt;&lt;/select&gt;&lt;/div&gt;&lt;/div&gt;&quot;, $field_id, $id, $field_id, $hour, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, $minute, self::$tab_index++, $disabled_text, $field_id, $id, $field_id, self::$tab_index++, $disabled_text, $am_selected, $pm_selected);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;fileupload&quot; :&nbsp;</div></li><li><div>                $upload = sprintf(&quot;&lt;input name='input_%d' id='%s' type='file' value='%s' size='20' class='%s' tabindex='%d' %s/&gt;&quot;, $id, $field_id, esc_attr($value), esc_attr($class), self::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if(IS_ADMIN && !empty($value)) {&nbsp;</div></li><li><div>                    $value = esc_attr($value);&nbsp;</div></li><li><div>                    $preview = sprintf(&quot;&lt;div id='preview_%d'&gt;&lt;a href='%s' target='_blank' alt='%s' title='%s'&gt;%s&lt;/a&gt;&lt;a href='%s' target='_blank' alt='&quot; . __(&quot;Download file&quot;, &quot;gravityforms&quot;) . &quot;' title='&quot; . __(&quot;Download file&quot;, &quot;gravityforms&quot;) . &quot;'&gt;&lt;img src='%s' style='margin-left:10px;'/&gt;&lt;/a&gt;&lt;a href='javascript:void(0);' alt='&quot; . __(&quot;Delete file&quot;, &quot;gravityforms&quot;) . &quot;' title='&quot; . __(&quot;Delete file&quot;, &quot;gravityforms&quot;) . &quot;' onclick='DeleteFile(%d, %d);' &gt;&lt;img src='%s' style='margin-left:10px;'/&gt;&lt;/a&gt;&lt;/div&gt;&quot;, $id, $value, $value, $value, GFCommon::truncate_url($value), $value, GFCommon::get_base_url() . &quot;/images/download.png&quot;, $lead_id, $id, GFCommon::get_base_url() . &quot;/images/delete.png&quot;);&nbsp;</div></li><li><div>                    return $preview . &quot;&lt;div id='upload_$id' style='display:none;'&gt;$upload&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    return &quot;&lt;div class='ginput_container'&gt;$upload&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;captcha&quot; :&nbsp;</div></li><li><div>                if(!function_exists(&quot;recaptcha_get_html&quot;)) {&nbsp;</div></li><li><div>                    require_once(GFCommon::get_base_path() . '/recaptchalib.php');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $theme = empty($field[&quot;captchaTheme&quot;]) ? &quot;red&quot; : esc_attr($field[&quot;captchaTheme&quot;]);&nbsp;</div></li><li><div>                $publickey = get_option(&quot;rg_gforms_captcha_public_key&quot;);&nbsp;</div></li><li><div>                $privatekey = get_option(&quot;rg_gforms_captcha_private_key&quot;);&nbsp;</div></li><li><div>                if(IS_ADMIN) {&nbsp;</div></li><li><div>                    if(empty($publickey) || empty($privatekey)) {&nbsp;</div></li><li><div>                        return &quot;&lt;div class='captcha_message'&gt;&quot; . __(&quot;To use the reCaptcha field you must first do the following:&quot;, &quot;gravityforms&quot;) . &quot;&lt;/div&gt;&lt;div class='captcha_message'&gt;1 - &lt;a href='https://admin.recaptcha.net/recaptcha/createsite/?app=php' target='_blank'&gt;&quot; . __(sprintf(&quot;Sign up%s for a free reCAPTCHA account&quot;, &quot;&lt;/a&gt;&quot;), &quot;gravityforms&quot;) . &quot;&lt;/div&gt;&lt;div class='captcha_message'&gt;2 - &quot; . __(sprintf(&quot;Enter your reCAPTCHA keys in the %ssettings page%s&quot;, &quot;&lt;a href='?page=gf_settings'&gt;&quot;, &quot;&lt;/a&gt;&quot;), &quot;gravityforms&quot;) . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    else{&nbsp;</div></li><li><div>                        return &quot;&lt;div&gt;&lt;img class='gfield_captcha' src='&quot; . GFCommon::get_base_url() . &quot;/images/captcha_$theme.jpg' alt='reCAPTCHA' title='reCAPTCHA'/&gt;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    $language = empty($field[&quot;captchaLanguage&quot;]) ? &quot;en&quot; : esc_attr($field[&quot;captchaLanguage&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $options = &quot;&lt;script&gt;var RecaptchaOptions = {theme : '$theme', tabindex : &quot; . self::$tab_index++ . &quot;, lang : '$language'};&lt;/script&gt;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $is_ssl = !empty($_SERVER['HTTPS']);&nbsp;</div></li><li><div>                    return $options . &quot;&lt;div class='ginput_container' id='input_$id'&gt;&quot; . recaptcha_get_html($publickey, null, $is_ssl) . &quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    private static function get_state_field($field, $id, $field_id, $state_value, $disabled_text) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $province_value = $state_value;&nbsp;</div></li><li><div>        if(empty($state_value)) {&nbsp;</div></li><li><div>            if($field[&quot;addressType&quot;] == &quot;us&quot;)&nbsp;</div></li><li><div>                $state_value = $field[&quot;defaultState&quot;];&nbsp;</div></li><li><div>            else if ($field[&quot;addressType&quot;] == &quot;canadian&quot;)&nbsp;</div></li><li><div>                $province_value = $field[&quot;defaultProvince&quot;];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(IS_ADMIN && RG_CURRENT_VIEW != &quot;entry&quot;) {&nbsp;</div></li><li><div>            $state_dropdown_class = &quot;class='state_dropdown'&quot;;&nbsp;</div></li><li><div>            $province_dropdown_class = &quot;class='province_dropdown'&quot;;&nbsp;</div></li><li><div>            $state_text_class = &quot;class='state_text'&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $state_style = $field[&quot;addressType&quot;] != &quot;us&quot; ? &quot;style='display:none;'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>            $province_style = $field[&quot;addressType&quot;] != &quot;canadian&quot; ? &quot;style='display:none;'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>            $text_style = $field[&quot;addressType&quot;] == &quot;us&quot; || $field[&quot;addressType&quot;] == &quot;canadian&quot; ? &quot;style='display:none;'&quot; : &quot;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else{&nbsp;</div></li><li><div>            //id only displayed on front end&nbsp;</div></li><li><div>            $state_field_id = &quot;id='&quot; . $field_id . &quot;.4'&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $state_dropdown = sprintf(&quot;&lt;select name='input_%d.4' %s tabindex='%d' %s $state_dropdown_class $state_style&gt;%s&lt;/select&gt;&quot;, $id, $state_field_id, GFCommon::$tab_index++, $disabled_text, GFCommon::get_us_state_dropdown($state_value));&nbsp;</div></li><li><div>        $province_dropdown = sprintf(&quot;&lt;select name='input_%d.4' %s tabindex='%d' %s $province_dropdown_class $province_style&gt;%s&lt;/select&gt;&quot;, $id, $state_field_id, GFCommon::$tab_index++, $disabled_text, GFCommon::get_canadian_provinces_dropdown($province_value));&nbsp;</div></li><li><div>        $state_text = sprintf(&quot;&lt;input type='text' name='input_%d.4' %s value='%s' tabindex='%d' %s $state_text_class $text_style/&gt;&quot;, $id, $state_field_id, $state_value, GFCommon::$tab_index++, $disabled_text);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if(IS_ADMIN && RG_CURRENT_VIEW != &quot;entry&quot;)&nbsp;</div></li><li><div>            return $state_dropdown . $province_dropdown . $state_text;&nbsp;</div></li><li><div>        else if($field[&quot;addressType&quot;] == &quot;us&quot;)&nbsp;</div></li><li><div>            return $state_dropdown;&nbsp;</div></li><li><div>        else if($field[&quot;addressType&quot;] == &quot;canadian&quot;)&nbsp;</div></li><li><div>            return $province_dropdown;&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            return $state_text;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function get_lead_field_display($field, $value) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch(RGFormsModel::get_input_type($field)) {&nbsp;</div></li><li><div>            case &quot;name&quot; :&nbsp;</div></li><li><div>                if(is_array($value)) {&nbsp;</div></li><li><div>                    $prefix = trim($value[$field[&quot;id&quot;] . &quot;.2&quot;]);&nbsp;</div></li><li><div>                    $first = trim($value[$field[&quot;id&quot;] . &quot;.3&quot;]);&nbsp;</div></li><li><div>                    $last = trim($value[$field[&quot;id&quot;] . &quot;.6&quot;]);&nbsp;</div></li><li><div>                    $suffix = trim($value[$field[&quot;id&quot;] . &quot;.8&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $name = $prefix;&nbsp;</div></li><li><div>                    $name .= !empty($name) && !empty($first) ? &quot; $first&quot; : $first;&nbsp;</div></li><li><div>                    $name .= !empty($name) && !empty($last) ? &quot; $last&quot; : $last;&nbsp;</div></li><li><div>                    $name .= !empty($name) && !empty($suffix) ? &quot; $suffix&quot; : $suffix;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    return $name;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    return $value;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;address&quot; :&nbsp;</div></li><li><div>                if(is_array($value)) {&nbsp;</div></li><li><div>                    $street_value = trim($value[$field[&quot;id&quot;] . &quot;.1&quot;]);&nbsp;</div></li><li><div>                    $street2_value = trim($value[$field[&quot;id&quot;] . &quot;.2&quot;]);&nbsp;</div></li><li><div>                    $city_value = trim($value[$field[&quot;id&quot;] . &quot;.3&quot;]);&nbsp;</div></li><li><div>                    $state_value = trim($value[$field[&quot;id&quot;] . &quot;.4&quot;]);&nbsp;</div></li><li><div>                    $zip_value = trim($value[$field[&quot;id&quot;] . &quot;.5&quot;]);&nbsp;</div></li><li><div>                    $country_value = trim($value[$field[&quot;id&quot;] . &quot;.6&quot;]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $address = $street_value;&nbsp;</div></li><li><div>                    $address .= !empty($address) && !empty($street2_value) ? &quot; $street2_value&quot; : $street2_value;&nbsp;</div></li><li><div>                    $address .= !empty($address) && (!empty($city_value) || !empty($state_value)) ? &quot;&lt;br /&gt;$city_value&quot; : $city_value;&nbsp;</div></li><li><div>                    $address .= !empty($address) && !empty($city_value) && !empty($state_value) ? &quot;, $state_value&quot; : $state_value;&nbsp;</div></li><li><div>                    $address .= !empty($address) && !empty($zip_value) ? &quot; $zip_value&quot; : $zip_value;&nbsp;</div></li><li><div>                    $address .= !empty($address) && !empty($country_value) ? &quot;&lt;br /&gt;$country_value&quot; : $country_value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    //adding map link&nbsp;</div></li><li><div>                    if(!empty($address)) {&nbsp;</div></li><li><div>                        $address_qs = str_replace(&quot;&lt;br /&gt;&quot;, &quot; &quot;, $address); //replacing &lt;br/&gt; with spaces&nbsp;</div></li><li><div>                        $address_qs = urlencode($address_qs);&nbsp;</div></li><li><div>                        $address .= &quot;&lt;br/&gt;&lt;a href='http://maps.google.com/maps?q=$address_qs' target='_blank' class='map-it-link'&gt;Map It&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    return $address;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    return &quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;email&quot; :&nbsp;</div></li><li><div>                return GFCommon::is_valid_email($value) ? &quot;&lt;a href='mailto:$value'&gt;$value&lt;/a&gt;&quot; : $value;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;website&quot; :&nbsp;</div></li><li><div>                return GFCommon::is_valid_url($value) ? &quot;&lt;a href='$value' target='_blank'&gt;$value&lt;/a&gt;&quot; : $value;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;checkbox&quot; :&nbsp;</div></li><li><div>                if(is_array($value)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach($value as $key =&gt; $item) {&nbsp;</div></li><li><div>                        if(!empty($item)) {&nbsp;</div></li><li><div>                            $items .= &quot;&lt;li&gt;$item&lt;/li&gt;&quot;;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    return empty($items) ? &quot;&quot; : &quot;&lt;ul class='bulleted'&gt;$items&lt;/ul&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                else{&nbsp;</div></li><li><div>                    return $value;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;post_image&quot; :&nbsp;</div></li><li><div>                list($url, $title, $caption, $description) = explode(&quot;|:|&quot;, $value);&nbsp;</div></li><li><div>                if(!empty($url)) {&nbsp;</div></li><li><div>                    $url = str_replace(&quot; &quot;, &quot;%20&quot;, $url);&nbsp;</div></li><li><div>                    $value = &quot;&lt;a href='$url' target='_blank' title='&quot; . __(&quot;Click to view&quot;, &quot;gravityforms&quot;) . &quot;'&gt;&lt;img src='$url' width='100' /&gt;&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>                    $value .= !empty($title) ? &quot;&lt;div&gt;Title: $title&lt;/div&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                    $value .= !empty($caption) ? &quot;&lt;div&gt;Caption: $caption&lt;/div&gt;&quot; : &quot;&quot;;&nbsp;</div></li><li><div>                    $value .= !empty($description) ? &quot;&lt;div&gt;Description: $description&lt;/div&gt;&quot;: &quot;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return $value;&nbsp;</div></li><li><div>            case &quot;fileupload&quot; :&nbsp;</div></li><li><div>                $file_path = $value;&nbsp;</div></li><li><div>                if(!empty($file_path)) {&nbsp;</div></li><li><div>                    $info = pathinfo($file_path);&nbsp;</div></li><li><div>                    $file_path = esc_attr(str_replace(&quot; &quot;, &quot;%20&quot;, $file_path));&nbsp;</div></li><li><div>                    $value = &quot;&lt;a href='$file_path' target='_blank' title='&quot; . __(&quot;Click to view&quot;, &quot;gravityforms&quot;) . &quot;'&gt;&quot; . $info[&quot;basename&quot;] . &quot;&lt;/a&gt;&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                return $value;&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            case &quot;date&quot; :&nbsp;</div></li><li><div>                return GFCommon::date_display($value, $field[&quot;dateFormat&quot;]);&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            default :&nbsp;</div></li><li><div>                return nl2br($value);&nbsp;</div></li><li><div>            break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.3.9.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/gravity-forms/1.9.14.22/classes/gfcommon/" class="">1.9.14.22</a></li><li><a href="http://hookr.io/plugins/gravity-forms/1.3.9.1/classes/gfcommon/" class="active">1.3.9.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>GFCommon</li><li><span></span>Gravity Forms</li><li><span></span>1.9.14.22</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>