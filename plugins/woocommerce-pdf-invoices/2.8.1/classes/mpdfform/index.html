<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="2.8.1" data-slug="woocommerce-pdf-invoices" data-type="class" data-id="20835"><head xmlns="http://www.w3.org/1999/xhtml"><title> mpdfform | class | Woocommerce Pdf Invoices | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="mpdfform, class, plugin, woocommerce-pdf-invoices, 2.8.1" /><meta name="description" content="The WooCommerce PDF Invoices mpdfform class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.17"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=e01190a3a28294f1690445667f2b2cca' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.17' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/mpdfform/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fmpdfform%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fmpdfform%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-woocommerce-pdf-invoices-2.8.1-class-mpdfform","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="mpdfform" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to woocommerce-pdf-invoices." href="http://hookr.io/plugins/woocommerce-pdf-invoices/" class="plugin"><span property="name">woocommerce-pdf-invoices</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.1." href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/" class="H_VERSION"><span property="name">2.8.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">mpdfform</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="211"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/all/" title="All">All <span class="count badge">211</span></a></li><li class="" data-id="new" data-count="24"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/new/" title="New">New <span class="count badge">24</span></a></li><li class="" data-id="hooks" data-count="41"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/hooks/" title="Hooks">Hooks <span class="count badge">41</span></a></li><li class="" data-id="action" data-count="13"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/actions/" title="Actions">Actions <span class="count badge">13</span></a></li><li class="" data-id="filter" data-count="28"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/filters/" title="Filters">Filters <span class="count badge">28</span></a></li><li class="active" data-id="class" data-count="63"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/" title="Classes">Classes <span class="count badge">63</span></a></li><li class="" data-id="constant" data-count="66"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/constants/" title="Constants">Constants <span class="count badge">66</span></a></li><li class="" data-id="function" data-count="40"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/functions/" title="Functions">Functions <span class="count badge">40</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>mpdfform</strong></h1><p>The WooCommerce PDF Invoices <strong>mpdfform</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/files/vendor-mpdf-mpdf-classes-mpdfform/" class="file">/vendor/mpdf/mpdf/classes/mpdfform.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="5" class="block" start="5"><li><div>class mpdfform&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $mpdf = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $forms;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $formn;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Active Forms&nbsp;</div></li><li><div>    var $formSubmitNoValueFields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $formExportType;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $formSelectDefaultOption;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $formUseZapD;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Form Styles&nbsp;</div></li><li><div>    var $form_border_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_background_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_border_width;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_border_style;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_border_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_background_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_border_width;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_border_style;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_radio_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_radio_background_color;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_element_spacing;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Active forms&nbsp;</div></li><li><div>    var $formMethod;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $formAction;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_fonts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_radio_groups;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_checkboxes;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $pdf_acro_array;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $pdf_array_co;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $array_form_button_js;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $array_form_choice_js;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $array_form_text_js;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Button Text&nbsp;</div></li><li><div>    var $form_button_text;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_text_over;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_text_click;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $form_button_icon;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // FORMS&nbsp;</div></li><li><div>    var $textarea_lineheight;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function __construct(mPDF $mpdf)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;mpdf = $mpdf;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // ACTIVE FORMS&nbsp;</div></li><li><div>        $this-&gt;formExportType = 'xfdf'; // 'xfdf' or 'html'&nbsp;</div></li><li><div>        $this-&gt;formSubmitNoValueFields = true; // Whether to include blank fields when submitting data&nbsp;</div></li><li><div>        $this-&gt;formSelectDefaultOption = true; // for Select drop down box; if no option is explicitly maked as selected, &nbsp;</div></li><li><div>        // this determines whether to select 1st option (as per browser)&nbsp;</div></li><li><div>        // - affects whether &quot;required&quot; attribute is relevant&nbsp;</div></li><li><div>        $this-&gt;formUseZapD = true;  // Determine whether to use ZapfDingbat icons for radio/checkboxes&nbsp;</div></li><li><div>        // FORM STYLES&nbsp;</div></li><li><div>        // These can alternatively use a 4 number string to represent CMYK colours&nbsp;</div></li><li><div>        $this-&gt;form_border_color = '0.6 0.6 0.72';   // RGB&nbsp;</div></li><li><div>        $this-&gt;form_background_color = '0.975 0.975 0.975';  // RGB&nbsp;</div></li><li><div>        $this-&gt;form_border_width = '1';  // 0 doesn't seem to work as it should&nbsp;</div></li><li><div>        $this-&gt;form_border_style = 'S';  // B - Bevelled; D - Double&nbsp;</div></li><li><div>        $this-&gt;form_button_border_color = '0.2 0.2 0.55';&nbsp;</div></li><li><div>        $this-&gt;form_button_background_color = '0.941 0.941 0.941';&nbsp;</div></li><li><div>        $this-&gt;form_button_border_width = '1';&nbsp;</div></li><li><div>        $this-&gt;form_button_border_style = 'S';&nbsp;</div></li><li><div>        $this-&gt;form_radio_color = '0.0 0.0 0.4';  // radio and checkbox&nbsp;</div></li><li><div>        $this-&gt;form_radio_background_color = '0.9 0.9 0.9';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // FORMS&nbsp;</div></li><li><div>        $this-&gt;textarea_lineheight = 1.25;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // FORM ELEMENT SPACING&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['select']['outer']['h'] = 0.5; // Horizontal spacing around SELECT&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['select']['outer']['v'] = 0.5; // Vertical spacing around SELECT&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['select']['inner']['h'] = 0.7; // Horizontal padding around SELECT&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['select']['inner']['v'] = 0.7; // Vertical padding around SELECT&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['input']['outer']['h'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['input']['outer']['v'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['input']['inner']['h'] = 0.7;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['input']['inner']['v'] = 0.7;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['textarea']['outer']['h'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['textarea']['outer']['v'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['textarea']['inner']['h'] = 1;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['textarea']['inner']['v'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['button']['outer']['h'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['button']['outer']['v'] = 0.5;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['button']['inner']['h'] = 2;&nbsp;</div></li><li><div>        $this-&gt;form_element_spacing['button']['inner']['v'] = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // INITIALISE non-configurable&nbsp;</div></li><li><div>        $this-&gt;formMethod = 'POST';&nbsp;</div></li><li><div>        $this-&gt;formAction = '';&nbsp;</div></li><li><div>        $this-&gt;form_fonts = array();&nbsp;</div></li><li><div>        $this-&gt;form_radio_groups = array();&nbsp;</div></li><li><div>        $this-&gt;form_checkboxes = false;&nbsp;</div></li><li><div>        $this-&gt;forms = array();&nbsp;</div></li><li><div>        $this-&gt;pdf_array_co = '';&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_text($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // TEXT/PASSWORD INPUT&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 2 - Required; 3 - No export; 13 - textarea; 14 - Password&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if ((isset($objattr['disabled']) && $objattr['disabled']) || (isset($objattr['readonly']) && $objattr['readonly'])) {&nbsp;</div></li><li><div>                $flags[] = 1;&nbsp;</div></li><li><div>            } // readonly&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>                $objattr['color'] = array(3, 128, 128, 128);  // gray out disabled&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['required']) && $objattr['required']) {&nbsp;</div></li><li><div>                $flags[] = 2;&nbsp;</div></li><li><div>            } // required&nbsp;</div></li><li><div>            if (!isset($objattr['spellcheck']) || !$objattr['spellcheck']) {&nbsp;</div></li><li><div>                $flags[] = 23;&nbsp;</div></li><li><div>            } // DoNotSpellCheck&nbsp;</div></li><li><div>            if (isset($objattr['subtype']) && $objattr['subtype'] == 'PASSWORD') {&nbsp;</div></li><li><div>                $flags[] = 14;&nbsp;</div></li><li><div>                $val = $objattr['value'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['color'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($objattr['color']);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $fieldalign = $rtlalign;&nbsp;</div></li><li><div>            if (isset($objattr['text_align']) && $objattr['text_align']) {&nbsp;</div></li><li><div>                $fieldalign = $objattr['text_align'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $val = $objattr['text'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 5.3.25&nbsp;</div></li><li><div>            $js = array();&nbsp;</div></li><li><div>            if (isset($objattr['onCalculate']) && $objattr['onCalculate']) {&nbsp;</div></li><li><div>                $js[] = array('C', $objattr['onCalculate']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onValidate']) && $objattr['onValidate']) {&nbsp;</div></li><li><div>                $js[] = array('V', $objattr['onValidate']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onFormat']) && $objattr['onFormat']) {&nbsp;</div></li><li><div>                $js[] = array('F', $objattr['onFormat']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onKeystroke']) && $objattr['onKeystroke']) {&nbsp;</div></li><li><div>                $js[] = array('K', $objattr['onKeystroke']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetFormText($w, $h, $objattr['fieldname'], $val, $val, $objattr['title'], $flags, $fieldalign, false, (isset($objattr['maxlength']) ? $objattr['maxlength'] : false), $js, (isset($objattr['background-col']) ? $objattr['background-col'] : false), (isset($objattr['border-col']) ? $objattr['border-col'] : false));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['input']['outer']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $h -= $this-&gt;form_element_spacing['input']['outer']['v'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['input']['outer']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['input']['outer']['v'] / $k;&nbsp;</div></li><li><div>            // Chop texto to max length $w-inner-padding&nbsp;</div></li><li><div>            while ($this-&gt;mpdf-&gt;GetStringWidth($texto) &gt; $w - ($this-&gt;form_element_spacing['input']['inner']['h'] * 2)) {&nbsp;</div></li><li><div>                $texto = mb_substr($texto, 0, mb_strlen($texto, $this-&gt;mpdf-&gt;mb_enc) - 1, $this-&gt;mpdf-&gt;mb_enc);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // DIRECTIONALITY&nbsp;</div></li><li><div>            if (preg_match(&quot;/([&quot; . $this-&gt;mpdf-&gt;pregRTLchars . &quot;])/u&quot;, $texto)) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;biDirectional = true;&nbsp;</div></li><li><div>            } // *RTL*&nbsp;</div></li><li><div>            // Use OTL OpenType Table Layout - GSUB & GPOS&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;CurrentFont['useOTL']) && $this-&gt;mpdf-&gt;CurrentFont['useOTL']) {&nbsp;</div></li><li><div>                $texto = $this-&gt;mpdf-&gt;otl-&gt;applyOTL($texto, $this-&gt;mpdf-&gt;CurrentFont['useOTL']);&nbsp;</div></li><li><div>                $OTLdata = $this-&gt;mpdf-&gt;otl-&gt;OTLdata;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;magic_reverse_dir($texto, $this-&gt;mpdf-&gt;directionality, $OTLdata);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>            } else if (isset($objattr['readonly']) && $objattr['readonly']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(250));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Cell($w, $h, $texto, 1, 0, $rtlalign, 1, '', 0, $this-&gt;form_element_spacing['input']['inner']['h'] / $k, $this-&gt;form_element_spacing['input']['inner']['h'] / $k, 'M', 0, false, $OTLdata);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(255));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_textarea($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // TEXTAREA&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 2 - Required; 3 - No export; 13 - textarea; 14 - Password&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            $flags = array(13); // textarea&nbsp;</div></li><li><div>            if ((isset($objattr['disabled']) && $objattr['disabled']) || (isset($objattr['readonly']) && $objattr['readonly'])) {&nbsp;</div></li><li><div>                $flags[] = 1;&nbsp;</div></li><li><div>            } // readonly&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>                $objattr['color'] = array(3, 128, 128, 128);   // gray out disabled&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['required']) && $objattr['required']) {&nbsp;</div></li><li><div>                $flags[] = 2;&nbsp;</div></li><li><div>            } // required&nbsp;</div></li><li><div>            if (!isset($objattr['spellcheck']) || !$objattr['spellcheck']) {&nbsp;</div></li><li><div>                $flags[] = 23;&nbsp;</div></li><li><div>            } // DoNotSpellCheck&nbsp;</div></li><li><div>            if (isset($objattr['donotscroll']) && $objattr['donotscroll']) {&nbsp;</div></li><li><div>                $flags[] = 24;&nbsp;</div></li><li><div>            } // DoNotScroll&nbsp;</div></li><li><div>            if (isset($objattr['color'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($objattr['color']);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $fieldalign = $rtlalign;&nbsp;</div></li><li><div>            if ($texto == ' ') {&nbsp;</div></li><li><div>                $texto = '';&nbsp;</div></li><li><div>            } // mPDF 5.3.24&nbsp;</div></li><li><div>            if (isset($objattr['text_align']) && $objattr['text_align']) {&nbsp;</div></li><li><div>                $fieldalign = $objattr['text_align'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 5.3.25&nbsp;</div></li><li><div>            $js = array();&nbsp;</div></li><li><div>            if (isset($objattr['onCalculate']) && $objattr['onCalculate']) {&nbsp;</div></li><li><div>                $js[] = array('C', $objattr['onCalculate']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onValidate']) && $objattr['onValidate']) {&nbsp;</div></li><li><div>                $js[] = array('V', $objattr['onValidate']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onFormat']) && $objattr['onFormat']) {&nbsp;</div></li><li><div>                $js[] = array('F', $objattr['onFormat']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onKeystroke']) && $objattr['onKeystroke']) {&nbsp;</div></li><li><div>                $js[] = array('K', $objattr['onKeystroke']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetFormText($w, $h, $objattr['fieldname'], $texto, $texto, (isset($objattr['title']) ? $objattr['title'] : ''), $flags, $fieldalign, false, -1, $js, (isset($objattr['background-col']) ? $objattr['background-col'] : false), (isset($objattr['border-col']) ? $objattr['border-col'] : false));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['textarea']['outer']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $h -= $this-&gt;form_element_spacing['textarea']['outer']['v'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['textarea']['outer']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['textarea']['outer']['v'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>            } else if (isset($objattr['readonly']) && $objattr['readonly']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(250));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Rect($this-&gt;mpdf-&gt;x, $this-&gt;mpdf-&gt;y, $w, $h, 'DF');&nbsp;</div></li><li><div>            $ClipPath = sprintf('q %.3F %.3F %.3F %.3F re W n ', $this-&gt;mpdf-&gt;x * _MPDFK, ($this-&gt;mpdf-&gt;h - $this-&gt;mpdf-&gt;y) * _MPDFK, $w * _MPDFK, -$h * _MPDFK);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out($ClipPath);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['textarea']['inner']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['textarea']['inner']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['textarea']['inner']['v'] / $k;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($texto != '')&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;MultiCell($w, $this-&gt;mpdf-&gt;FontSize * $this-&gt;textarea_lineheight, $texto, 0, '', 0, '', $blockdir, true, $objattr['OTLdata'], $objattr['rows']);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('Q');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(255));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_select($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // SELECT&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 2 - Required; 3 - No export; 19 - edit (only if combo)&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 1;  // readonly&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>                $objattr['color'] = array(3, 128, 128, 128); // gray out disabled&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['required']) && $objattr['required']) {&nbsp;</div></li><li><div>                $flags[] = 2;&nbsp;</div></li><li><div>            } // required&nbsp;</div></li><li><div>            if (isset($objattr['multiple']) && $objattr['multiple'] && isset($objattr['size']) && $objattr['size'] &gt; 1) {&nbsp;</div></li><li><div>                $flags[] = 22;&nbsp;</div></li><li><div>            }   //flag 22 = multiselect (listbox)&nbsp;</div></li><li><div>            if (isset($objattr['size']) && $objattr['size'] &lt; 2) {&nbsp;</div></li><li><div>                $flags[] = 18;    //flag 18 = combobox (else a listbox)&nbsp;</div></li><li><div>                if (isset($objattr['editable']) && $objattr['editable']) {&nbsp;</div></li><li><div>                    $flags[] = 19;&nbsp;</div></li><li><div>                } // editable&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // only allow spellcheck if combo and editable&nbsp;</div></li><li><div>            if ((!isset($objattr['spellcheck']) || !$objattr['spellcheck']) || (isset($objattr['size']) && $objattr['size'] &gt; 1) || (!isset($objattr['editable']) || !$objattr['editable'])) {&nbsp;</div></li><li><div>                $flags[] = 23;&nbsp;</div></li><li><div>            } // DoNotSpellCheck&nbsp;</div></li><li><div>            if (isset($objattr['subtype']) && $objattr['subtype'] == 'PASSWORD') {&nbsp;</div></li><li><div>                $flags[] = 14;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onChange']) && $objattr['onChange']) {&nbsp;</div></li><li><div>                $js = $objattr['onChange'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $js = '';&nbsp;</div></li><li><div>            } // mPDF 5.3.37&nbsp;</div></li><li><div>            $data = array('VAL' =&gt; array(), 'OPT' =&gt; array(), 'SEL' =&gt; array(), );&nbsp;</div></li><li><div>            if (isset($objattr['items'])) {&nbsp;</div></li><li><div>                for ($i = 0; $i &lt; count($objattr['items']); $i++) {&nbsp;</div></li><li><div>                    $item = $objattr['items'][$i];&nbsp;</div></li><li><div>                    $data['VAL'][] = (isset($item['exportValue']) ? $item['exportValue'] : '');&nbsp;</div></li><li><div>                    $data['OPT'][] = (isset($item['content']) ? $item['content'] : '');&nbsp;</div></li><li><div>                    if (isset($item['selected']) && $item['selected']) {&nbsp;</div></li><li><div>                        $data['SEL'][] = $i;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (count($data['SEL']) == 0 && $this-&gt;formSelectDefaultOption) {&nbsp;</div></li><li><div>                $data['SEL'][] = 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['color'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($objattr['color']);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetFormChoice($w, $h, $objattr['fieldname'], $flags, $data, $rtlalign, $js);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(250));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['select']['outer']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $h -= $this-&gt;form_element_spacing['select']['outer']['v'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['select']['outer']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['select']['outer']['v'] / $k;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // DIRECTIONALITY&nbsp;</div></li><li><div>            if (preg_match(&quot;/([&quot; . $this-&gt;mpdf-&gt;pregRTLchars . &quot;])/u&quot;, $texto)) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;biDirectional = true;&nbsp;</div></li><li><div>            } // *RTL*&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;magic_reverse_dir($texto, $this-&gt;mpdf-&gt;directionality, $objattr['OTLdata']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Cell($w - ($this-&gt;mpdf-&gt;FontSize * 1.4), $h, $texto, 1, 0, $rtlalign, 1, '', 0, $this-&gt;form_element_spacing['select']['inner']['h'] / $k, $this-&gt;form_element_spacing['select']['inner']['h'] / $k, 'M', 0, false, $objattr['OTLdata']);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(190));&nbsp;</div></li><li><div>            $save_font = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>            $save_currentfont = $this-&gt;mpdf-&gt;currentfontfamily;&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;PDFA || $this-&gt;mpdf-&gt;PDFX) {&nbsp;</div></li><li><div>                if (($this-&gt;mpdf-&gt;PDFA && !$this-&gt;mpdf-&gt;PDFAauto) || ($this-&gt;mpdf-&gt;PDFX && !$this-&gt;mpdf-&gt;PDFXauto)) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;PDFAXwarnings[] = &quot;Core Adobe font Zapfdingbats cannot be embedded in mPDF - used in Form element: Select - which is required for PDFA1-b or PDFX/1-a. (Different character/font will be substituted.)&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont('sans');&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;_charDefined($this-&gt;mpdf-&gt;CurrentFont['cw'], 9660)) {&nbsp;</div></li><li><div>                    $down = &quot;\xe2\x96\xbc&quot;;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $down = '=';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Cell(($this-&gt;mpdf-&gt;FontSize * 1.4), $h, $down, 1, 0, 'C', 1, '', 0, 0, 0, 'M');&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont('czapfdingbats', '', 0);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Cell(($this-&gt;mpdf-&gt;FontSize * 1.4), $h, chr(116), 1, 0, 'C', 1, '', 0, 0, 0, 'M');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFont($save_font, '', 0);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;currentfontfamily = $save_currentfont;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(255));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_imageinput($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // INPUT/BUTTON as IMAGE&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 3 - No export;&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 1;  // readonly&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['onClick']) && $objattr['onClick']) {&nbsp;</div></li><li><div>                $js = $objattr['onClick'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $js = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetJSButton($w, $h, $objattr['fieldname'], (isset($objattr['value']) ? $objattr['value'] : ''), $js, $objattr['ID'], $objattr['title'], $flags, (isset($objattr['Indexed']) ? $objattr['Indexed'] : false));&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y = $objattr['INNER-Y'];&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(sprintf(&quot;q %.3F 0 0 %.3F %.3F %.3F cm /I%d Do Q&quot;, $objattr['INNER-WIDTH'] * _MPDFK, $objattr['INNER-HEIGHT'] * _MPDFK, $objattr['INNER-X'] * _MPDFK, ($this-&gt;mpdf-&gt;h - ($objattr['INNER-Y'] + $objattr['INNER-HEIGHT'] )) * _MPDFK, $objattr['ID']));&nbsp;</div></li><li><div>            if (isset($objattr['BORDER-WIDTH']) && $objattr['BORDER-WIDTH']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;PaintImgBorder($objattr, $is_table);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_button($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // BUTTON&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 3 - No export;&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 1;  // readonly&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>                $objattr['color'] = array(3, 128, 128, 128);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['color'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($objattr['color']);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($objattr['subtype']) && $objattr['subtype'] == 'RESET') {&nbsp;</div></li><li><div>                $this-&gt;SetFormButtonText($objattr['value']);&nbsp;</div></li><li><div>                $this-&gt;SetFormReset($w, $h, $objattr['fieldname'], $objattr['value'], $objattr['title'], $flags, (isset($objattr['background-col']) ? $objattr['background-col'] : false), (isset($objattr['border-col']) ? $objattr['border-col'] : false), (isset($objattr['noprint']) ? $objattr['noprint'] : false));&nbsp;</div></li><li><div>            } else if (isset($objattr['subtype']) && $objattr['subtype'] == 'SUBMIT') {&nbsp;</div></li><li><div>                $url = $this-&gt;formAction;&nbsp;</div></li><li><div>                $type = $this-&gt;formExportType;&nbsp;</div></li><li><div>                $method = $this-&gt;formMethod;&nbsp;</div></li><li><div>                $this-&gt;SetFormButtonText($objattr['value']);&nbsp;</div></li><li><div>                $this-&gt;SetFormSubmit($w, $h, $objattr['fieldname'], $objattr['value'], $url, $objattr['title'], $type, $method, $flags, (isset($objattr['background-col']) ? $objattr['background-col'] : false), (isset($objattr['border-col']) ? $objattr['border-col'] : false), (isset($objattr['noprint']) ? $objattr['noprint'] : false));&nbsp;</div></li><li><div>            } else if (isset($objattr['subtype']) && $objattr['subtype'] == 'BUTTON') {&nbsp;</div></li><li><div>                $this-&gt;SetFormButtonText($objattr['value']);&nbsp;</div></li><li><div>                if (isset($objattr['onClick']) && $objattr['onClick']) {&nbsp;</div></li><li><div>                    $js = $objattr['onClick'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $js = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;SetJSButton($w, $h, $objattr['fieldname'], $objattr['value'], $js, 0, $objattr['title'], $flags, false, (isset($objattr['background-col']) ? $objattr['background-col'] : false), (isset($objattr['border-col']) ? $objattr['border-col'] : false), (isset($objattr['noprint']) ? $objattr['noprint'] : false));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetTColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(190));&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['button']['outer']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $h -= $this-&gt;form_element_spacing['button']['outer']['v'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['button']['outer']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['button']['outer']['v'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;RoundedRect($this-&gt;mpdf-&gt;x, $this-&gt;mpdf-&gt;y, $w, $h, 0.5 / $k, 'DF');&nbsp;</div></li><li><div>            $w -= $this-&gt;form_element_spacing['button']['inner']['h'] * 2 / $k;&nbsp;</div></li><li><div>            $h -= $this-&gt;form_element_spacing['button']['inner']['v'] * 2 / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $this-&gt;form_element_spacing['button']['inner']['h'] / $k;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;y += $this-&gt;form_element_spacing['button']['inner']['v'] / $k;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // DIRECTIONALITY&nbsp;</div></li><li><div>            if (preg_match(&quot;/([&quot; . $this-&gt;mpdf-&gt;pregRTLchars . &quot;])/u&quot;, $texto)) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;biDirectional = true;&nbsp;</div></li><li><div>            } // *RTL*&nbsp;</div></li><li><div>            // Use OTL OpenType Table Layout - GSUB & GPOS&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;CurrentFont['useOTL']) && $this-&gt;mpdf-&gt;CurrentFont['useOTL']) {&nbsp;</div></li><li><div>                $texto = $this-&gt;mpdf-&gt;otl-&gt;applyOTL($texto, $this-&gt;mpdf-&gt;CurrentFont['useOTL']);&nbsp;</div></li><li><div>                $OTLdata = $this-&gt;mpdf-&gt;otl-&gt;OTLdata;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;magic_reverse_dir($texto, $this-&gt;mpdf-&gt;directionality, $OTLdata);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Cell($w, $h, $texto, '', 0, 'C', 0, '', 0, 0, 0, 'M', 0, false, $OTLdata);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_checkbox($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir, $x, $y)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // CHECKBOX&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 2 - Required; 3 - No export;&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 1;  // readonly&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $checked = false;&nbsp;</div></li><li><div>            if (isset($objattr['checked']) && $objattr['checked']) {&nbsp;</div></li><li><div>                $checked = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $save_font = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>                $save_currentfont = $this-&gt;mpdf-&gt;currentfontfamily;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont('czapfdingbats', '', 0);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetCheckBox($w, $h, $objattr['fieldname'], $objattr['value'], $objattr['title'], $checked, $flags, (isset($objattr['disabled']) ? $objattr['disabled'] : false));&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont($save_font, '', 0);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;currentfontfamily = $save_currentfont;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $iw = $w * 0.7;&nbsp;</div></li><li><div>            $ih = $h * 0.7;&nbsp;</div></li><li><div>            $lx = $x + (($w - $iw) / 2);&nbsp;</div></li><li><div>            $ty = $y + (($h - $ih) / 2);&nbsp;</div></li><li><div>            $rx = $lx + $iw;&nbsp;</div></li><li><div>            $by = $ty + $ih;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(225));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(250));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Rect($lx, $ty, $iw, $ih, 'DF');&nbsp;</div></li><li><div>            if (isset($objattr['checked']) && $objattr['checked']) {&nbsp;</div></li><li><div>                //Round join and cap&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetLineCap(1);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Line($lx, $ty, $rx, $by);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Line($lx, $by, $rx, $ty);&nbsp;</div></li><li><div>                //Set line cap style back to square&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetLineCap(2);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(255));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function print_ob_radio($objattr, $w, $h, $texto, $rtlalign, $k, $blockdir, $x, $y)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // RADIO&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;useActiveForms) {&nbsp;</div></li><li><div>            // Flags: 1 - Readonly; 2 - Required; 3 - No export;&nbsp;</div></li><li><div>            $flags = array();&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $flags[] = 1;  // readonly&nbsp;</div></li><li><div>                $flags[] = 3;  // no export&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $checked = false;&nbsp;</div></li><li><div>            if (isset($objattr['checked']) && $objattr['checked']) {&nbsp;</div></li><li><div>                $checked = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $save_font = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>                $save_currentfont = $this-&gt;mpdf-&gt;currentfontfamily;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont('czapfdingbats', '', 0);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;SetRadio($w, $h, $objattr['fieldname'], $objattr['value'], (isset($objattr['title']) ? $objattr['title'] : ''), $checked, $flags, (isset($objattr['disabled']) ? $objattr['disabled'] : false));&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFont($save_font, '', 0);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;currentfontfamily = $save_currentfont;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetLineWidth(0.2 / $k);&nbsp;</div></li><li><div>            $radius = $this-&gt;mpdf-&gt;FontSize * 0.35;&nbsp;</div></li><li><div>            $cx = $x + ($w / 2);&nbsp;</div></li><li><div>            $cy = $y + ($h / 2);&nbsp;</div></li><li><div>            if (isset($objattr['disabled']) && $objattr['disabled']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(127));&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Circle($cx, $cy, $radius, 'D');&nbsp;</div></li><li><div>            if (isset($objattr['checked']) && $objattr['checked']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Circle($cx, $cy, $radius * 0.4, 'DF');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetFColor($this-&gt;mpdf-&gt;ConvertColor(255));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;SetDColor($this-&gt;mpdf-&gt;ConvertColor(0));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// In _putpages&nbsp;</div></li><li><div>    function countPageForms($n, &$totaladdnum)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        foreach ($this-&gt;forms as $form) {&nbsp;</div></li><li><div>            if ($form['page'] == $n) {&nbsp;</div></li><li><div>                $totaladdnum++;&nbsp;</div></li><li><div>                if ($form['typ'] == 'Tx') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_text_js[$form['T']])) {&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['F'])) {&nbsp;</div></li><li><div>                            $totaladdnum++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['K'])) {&nbsp;</div></li><li><div>                            $totaladdnum++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['V'])) {&nbsp;</div></li><li><div>                            $totaladdnum++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['C'])) {&nbsp;</div></li><li><div>                            $totaladdnum++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($form['typ'] == 'Bt') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_button_js[$form['T']])) {&nbsp;</div></li><li><div>                        $totaladdnum++;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($this-&gt;form_button_icon[$form['T']])) {&nbsp;</div></li><li><div>                        $totaladdnum++;&nbsp;</div></li><li><div>                        if ($this-&gt;form_button_icon[$form['T']]['Indexed']) {&nbsp;</div></li><li><div>                            $totaladdnum++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($form['subtype'] == 'radio') {&nbsp;</div></li><li><div>                        $totaladdnum+=2;&nbsp;</div></li><li><div>                    } else if ($form['subtype'] == 'checkbox' && $this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                        $totaladdnum++;&nbsp;</div></li><li><div>                    } else if ($form['subtype'] == 'checkbox' && !$this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                        $totaladdnum+=2;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($form['typ'] == 'Ch') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_choice_js[$form['T']])) {&nbsp;</div></li><li><div>                        $totaladdnum++;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// In _putpages&nbsp;</div></li><li><div>    function addFormIds($n, &$s, &$annotid)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        foreach ($this-&gt;forms as $form) {&nbsp;</div></li><li><div>            if ($form['page'] == $n) {&nbsp;</div></li><li><div>                $s .= ($annotid) . ' 0 R ';&nbsp;</div></li><li><div>                $annotid++;&nbsp;</div></li><li><div>                if ($form['typ'] == 'Tx') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_text_js[$form['T']])) {&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['F'])) {&nbsp;</div></li><li><div>                            $annotid++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['K'])) {&nbsp;</div></li><li><div>                            $annotid++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['V'])) {&nbsp;</div></li><li><div>                            $annotid++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;array_form_text_js[$form['T']]['C'])) {&nbsp;</div></li><li><div>                            $annotid++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($form['typ'] == 'Bt') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_button_js[$form['T']])) {&nbsp;</div></li><li><div>                        $annotid++;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($this-&gt;form_button_icon[$form['T']])) {&nbsp;</div></li><li><div>                        $annotid++;&nbsp;</div></li><li><div>                        if ($this-&gt;form_button_icon[$form['T']]['Indexed']) {&nbsp;</div></li><li><div>                            $annotid++;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($form['subtype'] == 'radio') {&nbsp;</div></li><li><div>                        $annotid+=2;&nbsp;</div></li><li><div>                    } else if ($form['subtype'] == 'checkbox' && $this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                        $annotid++;&nbsp;</div></li><li><div>                    } else if ($form['subtype'] == 'checkbox' && !$this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                        $annotid+=2;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($form['typ'] == 'Ch') {&nbsp;</div></li><li><div>                    if (isset($this-&gt;array_form_choice_js[$form['T']])) {&nbsp;</div></li><li><div>                        $annotid++;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// In _putannots&nbsp;</div></li><li><div>    function _putFormItems($n, $hPt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        foreach ($this-&gt;forms as $val) {&nbsp;</div></li><li><div>            if ($val['page'] == $n) {&nbsp;</div></li><li><div>                if ($val['typ'] == 'Tx')&nbsp;</div></li><li><div>                    $this-&gt;_putform_tx($val, $hPt);&nbsp;</div></li><li><div>                if ($val['typ'] == 'Ch')&nbsp;</div></li><li><div>                    $this-&gt;_putform_ch($val, $hPt);&nbsp;</div></li><li><div>                if ($val['typ'] == 'Bt')&nbsp;</div></li><li><div>                    $this-&gt;_putform_bt($val, $hPt);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// In _putannots&nbsp;</div></li><li><div>    function _putRadioItems($n)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // Output Radio Groups&nbsp;</div></li><li><div>        $key = 1;&nbsp;</div></li><li><div>        foreach ($this-&gt;form_radio_groups AS $name =&gt; $frg) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>            $this-&gt;pdf_acro_array .= $this-&gt;mpdf-&gt;n . ' 0 R ';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&lt;&lt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Type /Annot ');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Subtype /Widget');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/NM ' . $this-&gt;mpdf-&gt;_textstring(sprintf('%04u-%04u', $n, (3000 + $key++))));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/M ' . $this-&gt;mpdf-&gt;_textstring('D:' . date('YmdHis')));&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Rect [0 0 0 0] ');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/FT /Btn ');&nbsp;</div></li><li><div>            if (isset($frg['disabled']) && $frg['disabled']) {&nbsp;</div></li><li><div>                $flags = array(1, 3, 15, 16);&nbsp;</div></li><li><div>            } // NoExport and readonly&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $flags = array(15, 16);&nbsp;</div></li><li><div>            } // Flags for Radiobutton, and NoToggleToOff&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($flags));&nbsp;</div></li><li><div>            $kstr = '';&nbsp;</div></li><li><div>            $optstr = '';&nbsp;</div></li><li><div>            foreach ($frg['kids'] AS $kid) {&nbsp;</div></li><li><div>                $kstr .= $this-&gt;forms[$kid['n']]['obj'] . ' 0 R ';&nbsp;</div></li><li><div>                //        $optstr .= ' '.$this-&gt;mpdf-&gt;_textstring($kid['OPT']).' ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Kids [ ' . $kstr . ' ] '); // 11 0 R 12 0 R etc.&nbsp;</div></li><li><div>            //    $this-&gt;mpdf-&gt;_out('/Opt [ '.$optstr.' ] ');&nbsp;</div></li><li><div>            //V entry holds index corresponding to the appearance state of&nbsp;</div></li><li><div>            //whichever child field is currently in the on state = or Off&nbsp;</div></li><li><div>            if (isset($frg['on'])) {&nbsp;</div></li><li><div>                $state = $frg['on'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $state = 'Off';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/V /' . $state . ' ');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/DV /' . $state . ' ');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/T ' . $this-&gt;mpdf-&gt;_textstring($name) . ' ');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _putFormsCatalog()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (isset($this-&gt;pdf_acro_array)) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/AcroForm &lt;&lt; /DA (/F1 0 Tf 0 g )');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Q 0');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Fields [' . $this-&gt;pdf_acro_array . ']');&nbsp;</div></li><li><div>            $f = '';&nbsp;</div></li><li><div>            foreach ($this-&gt;form_fonts AS $fn) {&nbsp;</div></li><li><div>                if (is_array($this-&gt;mpdf-&gt;fonts[$fn]['n'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;Error(&quot;Cannot use fonts with SMP or SIP characters for interactive Form elements&quot;);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $f .= '/F' . $this-&gt;mpdf-&gt;fonts[$fn]['i'] . ' ' . $this-&gt;mpdf-&gt;fonts[$fn]['n'] . ' 0 R ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/DR &lt;&lt; /Font &lt;&lt; ' . $f . ' &gt;&gt; &gt;&gt;');&nbsp;</div></li><li><div>            // CO Calculation Order&nbsp;</div></li><li><div>            if ($this-&gt;pdf_array_co) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/CO [' . $this-&gt;pdf_array_co . ']');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/NeedAppearances true');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormButtonJS($name, $js)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $js = str_replace(&quot;\t&quot;, ' ', trim($js));&nbsp;</div></li><li><div>        if (isset($name) && isset($js)) {&nbsp;</div></li><li><div>            $this-&gt;array_form_button_js[$this-&gt;mpdf-&gt;_escape($name)] = array(&nbsp;</div></li><li><div>                'js' =&gt; $js&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormChoiceJS($name, $js)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $js = str_replace(&quot;\t&quot;, ' ', trim($js));&nbsp;</div></li><li><div>        if (isset($name) && isset($js)) {&nbsp;</div></li><li><div>            $this-&gt;array_form_choice_js[$this-&gt;mpdf-&gt;_escape($name)] = array(&nbsp;</div></li><li><div>                'js' =&gt; $js&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormTextJS($name, $js)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; count($js); $i++) {&nbsp;</div></li><li><div>            $j = str_replace(&quot;\t&quot;, ' ', trim($js[$i][1]));&nbsp;</div></li><li><div>            $format = $js[$i][0];&nbsp;</div></li><li><div>            if ($name) {&nbsp;</div></li><li><div>                $this-&gt;array_form_text_js[$this-&gt;mpdf-&gt;_escape($name)][$format] = array('js' =&gt; $j);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function Win1252ToPDFDocEncoding($txt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $Win1252ToPDFDocEncoding = array(&nbsp;</div></li><li><div>            chr(0200) =&gt; chr(0240), chr(0214) =&gt; chr(0226), chr(0212) =&gt; chr(0227), chr(0237) =&gt; chr(0230), &nbsp;</div></li><li><div>            chr(0225) =&gt; chr(0200), chr(0210) =&gt; chr(0032), chr(0206) =&gt; chr(0201), chr(0207) =&gt; chr(0202), &nbsp;</div></li><li><div>            chr(0205) =&gt; chr(0203), chr(0227) =&gt; chr(0204), chr(0226) =&gt; chr(0205), chr(0203) =&gt; chr(0206), &nbsp;</div></li><li><div>            chr(0213) =&gt; chr(0210), chr(0233) =&gt; chr(0211), chr(0211) =&gt; chr(0213), chr(0204) =&gt; chr(0214), &nbsp;</div></li><li><div>            chr(0223) =&gt; chr(0215), chr(0224) =&gt; chr(0216), chr(0221) =&gt; chr(0217), chr(0222) =&gt; chr(0220), &nbsp;</div></li><li><div>            chr(0202) =&gt; chr(0221), chr(0232) =&gt; chr(0235), chr(0230) =&gt; chr(0037), chr(0231) =&gt; chr(0222), &nbsp;</div></li><li><div>            chr(0216) =&gt; chr(0231), chr(0240) =&gt; chr(0040)&nbsp;</div></li><li><div> ); // mPDF 5.3.46&nbsp;</div></li><li><div>        return strtr($txt, $Win1252ToPDFDocEncoding);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormText($w, $h, $name, $value = '', $default = '', $title = '', $flags = array(), $align = 'L', $hidden = false, $maxlen = -1, $js = '', $background_col = false, $border_col = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // Flags: 1 - Readonly; 2 - Required; 3 - No export; 13 - textarea; 14 - Password&nbsp;</div></li><li><div>        $this-&gt;formn++;&nbsp;</div></li><li><div>        if ($align == 'C') {&nbsp;</div></li><li><div>            $align = '1';&nbsp;</div></li><li><div>        } else if ($align == 'R') {&nbsp;</div></li><li><div>            $align = '2';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $align = '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($maxlen &lt; 1) {&nbsp;</div></li><li><div>            $maxlen = false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!preg_match('/^[a-zA-Z0-9_:\-]+$/', $name)) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Error(&quot;Field [&quot; . $name . &quot;] must have a name attribute, which can only contain letters, numbers, colon(:), undersore(_) or hyphen(-)&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;onlyCoreFonts) {&nbsp;</div></li><li><div>            $value = $this-&gt;Win1252ToPDFDocEncoding($value);&nbsp;</div></li><li><div>            $default = $this-&gt;Win1252ToPDFDocEncoding($default);&nbsp;</div></li><li><div>            $title = $this-&gt;Win1252ToPDFDocEncoding($title);&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($value, true); // Add characters to font subset&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($default, true); // Add characters to font subset&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($title, true); // Add characters to font subset&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($value)&nbsp;</div></li><li><div>                $value = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($value, true);&nbsp;</div></li><li><div>            if ($default)&nbsp;</div></li><li><div>                $default = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($default, true);&nbsp;</div></li><li><div>            $title = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($title, true);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($background_col) {&nbsp;</div></li><li><div>            $bg_c = $this-&gt;mpdf-&gt;SetColor($background_col, 'CodeOnly');&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $bg_c = $this-&gt;form_background_color;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($border_col) {&nbsp;</div></li><li><div>            $bc_c = $this-&gt;mpdf-&gt;SetColor($border_col, 'CodeOnly');&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $bc_c = $this-&gt;form_border_color;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $f = array('n' =&gt; $this-&gt;formn, &nbsp;</div></li><li><div>            'typ' =&gt; 'Tx', &nbsp;</div></li><li><div>            'page' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>            'x' =&gt; $this-&gt;mpdf-&gt;x, &nbsp;</div></li><li><div>            'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>            'w' =&gt; $w, &nbsp;</div></li><li><div>            'h' =&gt; $h, &nbsp;</div></li><li><div>            'T' =&gt; $name, &nbsp;</div></li><li><div>            'FF' =&gt; $flags, &nbsp;</div></li><li><div>            'V' =&gt; $value, &nbsp;</div></li><li><div>            'DV' =&gt; $default, &nbsp;</div></li><li><div>            'TU' =&gt; $title, &nbsp;</div></li><li><div>            'hidden' =&gt; $hidden, &nbsp;</div></li><li><div>            'Q' =&gt; $align, &nbsp;</div></li><li><div>            'maxlen' =&gt; $maxlen, &nbsp;</div></li><li><div>            'BS_W' =&gt; $this-&gt;form_border_width, &nbsp;</div></li><li><div>            'BS_S' =&gt; $this-&gt;form_border_style, &nbsp;</div></li><li><div>            'BC_C' =&gt; $bc_c, &nbsp;</div></li><li><div>            'BG_C' =&gt; $bg_c, &nbsp;</div></li><li><div>            'style' =&gt; array(&nbsp;</div></li><li><div>                'font' =&gt; $this-&gt;mpdf-&gt;FontFamily, &nbsp;</div></li><li><div>                'fontsize' =&gt; $this-&gt;mpdf-&gt;FontSizePt, &nbsp;</div></li><li><div>                'fontcolor' =&gt; $this-&gt;mpdf-&gt;TextColor, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if (is_array($js) && count($js) &gt; 0) {&nbsp;</div></li><li><div>            $this-&gt;SetFormTextJS($name, $js);&nbsp;</div></li><li><div>        } // mPDF 5.3.25&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ktForms[] = $f;&nbsp;</div></li><li><div>        } else if ($this-&gt;mpdf-&gt;writingHTMLheader || $this-&gt;mpdf-&gt;writingHTMLfooter) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;HTMLheaderPageForms[] = $f;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnbuffer[] = array('s' =&gt; 'ACROFORM', 'col' =&gt; $this-&gt;mpdf-&gt;CurrCol, 'x' =&gt; $this-&gt;mpdf-&gt;x, 'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>                    'h' =&gt; $h);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnForms[$this-&gt;mpdf-&gt;CurrCol][INTVAL($this-&gt;mpdf-&gt;x)][INTVAL($this-&gt;mpdf-&gt;y)] = $this-&gt;formn;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;forms[$this-&gt;formn] = $f;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!in_array($this-&gt;mpdf-&gt;FontFamily, $this-&gt;form_fonts)) {&nbsp;</div></li><li><div>            $this-&gt;form_fonts[] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;fonts[$this-&gt;mpdf-&gt;FontFamily]['used'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!$hidden)&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormChoice($w, $h, $name, $flags, $array, $align = 'L', $js = '')&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;formn++;&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['direction'] == 'rtl') {&nbsp;</div></li><li><div>            $align = '2';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $align = '0';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!preg_match('/^[a-zA-Z0-9_:\-]+$/', $name)) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Error(&quot;Field [&quot; . $name . &quot;] must have a name attribute, which can only contain letters, numbers, colon(:), undersore(_) or hyphen(-)&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;onlyCoreFonts) {&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($array['VAL']); $i++) {&nbsp;</div></li><li><div>                $array['VAL'][$i] = $this-&gt;Win1252ToPDFDocEncoding($array['VAL'][$i]);&nbsp;</div></li><li><div>                $array['OPT'][$i] = $this-&gt;Win1252ToPDFDocEncoding($array['OPT'][$i]);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($array['VAL']); $i++) {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;UTF8StringToArray($array['VAL'][$i], true); // Add characters to font subset&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;UTF8StringToArray($array['OPT'][$i], true); // Add characters to font subset&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($array['VAL'][$i])&nbsp;</div></li><li><div>                    $array['VAL'][$i] = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($array['VAL'][$i], true);&nbsp;</div></li><li><div>                if ($array['OPT'][$i])&nbsp;</div></li><li><div>                    $array['OPT'][$i] = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($array['OPT'][$i], true);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $f = array('n' =&gt; $this-&gt;formn, &nbsp;</div></li><li><div>            'typ' =&gt; 'Ch', &nbsp;</div></li><li><div>            'page' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>            'x' =&gt; $this-&gt;mpdf-&gt;x, &nbsp;</div></li><li><div>            'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>            'w' =&gt; $w, &nbsp;</div></li><li><div>            'h' =&gt; $h, &nbsp;</div></li><li><div>            'T' =&gt; $name, &nbsp;</div></li><li><div>            'OPT' =&gt; $array, &nbsp;</div></li><li><div>            'FF' =&gt; $flags, &nbsp;</div></li><li><div>            'Q' =&gt; $align, &nbsp;</div></li><li><div>            'BS_W' =&gt; $this-&gt;form_border_width, &nbsp;</div></li><li><div>            'BS_S' =&gt; $this-&gt;form_border_style, &nbsp;</div></li><li><div>            'BC_C' =&gt; $this-&gt;form_border_color, &nbsp;</div></li><li><div>            'BG_C' =&gt; $this-&gt;form_background_color, &nbsp;</div></li><li><div>            'style' =&gt; array(&nbsp;</div></li><li><div>                'font' =&gt; $this-&gt;mpdf-&gt;FontFamily, &nbsp;</div></li><li><div>                'fontsize' =&gt; $this-&gt;mpdf-&gt;FontSizePt, &nbsp;</div></li><li><div>                'fontcolor' =&gt; $this-&gt;mpdf-&gt;TextColor, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if ($js) {&nbsp;</div></li><li><div>            $this-&gt;SetFormChoiceJS($name, $js);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ktForms[] = $f;&nbsp;</div></li><li><div>        } else if ($this-&gt;mpdf-&gt;writingHTMLheader || $this-&gt;mpdf-&gt;writingHTMLfooter) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;HTMLheaderPageForms[] = $f;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnbuffer[] = array('s' =&gt; 'ACROFORM', 'col' =&gt; $this-&gt;mpdf-&gt;CurrCol, 'x' =&gt; $this-&gt;mpdf-&gt;x, 'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>                    'h' =&gt; $h);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnForms[$this-&gt;mpdf-&gt;CurrCol][INTVAL($this-&gt;mpdf-&gt;x)][INTVAL($this-&gt;mpdf-&gt;y)] = $this-&gt;formn;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;forms[$this-&gt;formn] = $f;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!in_array($this-&gt;mpdf-&gt;FontFamily, $this-&gt;form_fonts)) {&nbsp;</div></li><li><div>            $this-&gt;form_fonts[] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;fonts[$this-&gt;mpdf-&gt;FontFamily]['used'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // CHECKBOX&nbsp;</div></li><li><div>    function SetCheckBox($w, $h, $name, $value, $title = '', $checked = false, $flags = array(), $disabled = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;SetFormButton($w, $h, $name, $value, 'checkbox', $title, $flags, $checked, $disabled);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // RADIO&nbsp;</div></li><li><div>    function SetRadio($w, $h, $name, $value, $title = '', $checked = false, $flags = array(), $disabled = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;SetFormButton($w, $h, $name, $value, 'radio', $title, $flags, $checked, $disabled);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormReset($w, $h, $name, $value = 'Reset', $title = '', $flags = array(), $background_col = false, $border_col = false, $noprint = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (!$name) {&nbsp;</div></li><li><div>            $name = 'Reset';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;SetFormButton($w, $h, $name, $value, 'reset', $title, $flags, false, false, $background_col, $border_col, $noprint);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetJSButton($w, $h, $name, $value, $js, $image_id = 0, $title = '', $flags = array(), $indexed = false, $background_col = false, $border_col = false, $noprint = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;SetFormButton($w, $h, $name, $value, 'js_button', $title, $flags, false, false, $background_col, $border_col, $noprint);&nbsp;</div></li><li><div>        // pos =&gt; 1 = no caption, icon only; 0 = caption only&nbsp;</div></li><li><div>        if ($image_id) {&nbsp;</div></li><li><div>            $this-&gt;form_button_icon[$this-&gt;mpdf-&gt;_escape($name)] = array(&nbsp;</div></li><li><div>                'pos' =&gt; 1, &nbsp;</div></li><li><div>                'image_id' =&gt; $image_id, &nbsp;</div></li><li><div>                'Indexed' =&gt; $indexed, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($js) {&nbsp;</div></li><li><div>            $this-&gt;SetFormButtonJS($name, $js);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormSubmit($w, $h, $name, $value = 'Submit', $url, $title = '', $typ = 'html', $method = 'POST', $flags = array(), $background_col = false, $border_col = false, $noprint = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (!$name) {&nbsp;</div></li><li><div>            $name = 'Submit';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;SetFormButton($w, $h, $name, $value, 'submit', $title, $flags, false, false, $background_col, $border_col, $noprint);&nbsp;</div></li><li><div>        $this-&gt;forms[$this-&gt;formn]['URL'] = $url;&nbsp;</div></li><li><div>        $this-&gt;forms[$this-&gt;formn]['method'] = $method;&nbsp;</div></li><li><div>        $this-&gt;forms[$this-&gt;formn]['exporttype'] = $typ;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;x += $w;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormButtonText($ca, $rc = '', $ac = '')&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;onlyCoreFonts) {&nbsp;</div></li><li><div>            $ca = $this-&gt;Win1252ToPDFDocEncoding($ca);&nbsp;</div></li><li><div>            if ($rc)&nbsp;</div></li><li><div>                $rc = $this-&gt;Win1252ToPDFDocEncoding($rc);&nbsp;</div></li><li><div>            if ($ac)&nbsp;</div></li><li><div>                $ac = $this-&gt;Win1252ToPDFDocEncoding($ac);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($ca, true); // Add characters to font subset&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $ca = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($ca, true);&nbsp;</div></li><li><div>            if ($rc) {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;UTF8StringToArray($rc, true);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $rc = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($rc, true);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($ac) {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;UTF8StringToArray($ac, true);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $ac = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($ac, true);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;form_button_text = $ca;&nbsp;</div></li><li><div>        $this-&gt;form_button_text_over = $rc ? $rc : $ca;&nbsp;</div></li><li><div>        $this-&gt;form_button_text_click = $ac ? $ac : $ca;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormButton($bb, $hh, $name, $value, $type, $title = '', $flags = array(), $checked = false, $disabled = false, $background_col = false, $border_col = false, $noprint = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;formn++;&nbsp;</div></li><li><div>        if (!preg_match('/^[a-zA-Z0-9_:\-]+$/', $name)) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;Error(&quot;Field [&quot; . $name . &quot;] must have a name attribute, which can only contain letters, numbers, colon(:), undersore(_) or hyphen(-)&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!$this-&gt;mpdf-&gt;onlyCoreFonts) {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;CurrentFont['subset'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($title, true); // Add characters to font subset&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;UTF8StringToArray($value, true); // Add characters to font subset&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $title = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($title, true);&nbsp;</div></li><li><div>            if ($type == 'checkbox') {&nbsp;</div></li><li><div>                $uvalue = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($value, true);&nbsp;</div></li><li><div>            } else if ($type == 'radio') {&nbsp;</div></li><li><div>                $uvalue = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($value, true);&nbsp;</div></li><li><div>                $value = mb_convert_encoding($value, 'Windows-1252', 'UTF-8');&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $value = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($value, true);&nbsp;</div></li><li><div>                $uvalue = $value;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $title = $this-&gt;Win1252ToPDFDocEncoding($title);&nbsp;</div></li><li><div>            $value = $this-&gt;Win1252ToPDFDocEncoding($value);     //// ??? not needed&nbsp;</div></li><li><div>            $uvalue = mb_convert_encoding($value, 'UTF-8', 'Windows-1252');&nbsp;</div></li><li><div>            $uvalue = $this-&gt;mpdf-&gt;UTF8ToUTF16BE($uvalue, true);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($type == 'radio' || $type == 'checkbox') {&nbsp;</div></li><li><div>            if (!preg_match('/^[a-zA-Z0-9_:\-\.]+$/', $value)) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;Error(&quot;Field '&quot; . $name . &quot;' must have a value, which can only contain letters, numbers, colon(:), undersore(_), hyphen(-) or period(.)&quot;);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($type == 'radio') {&nbsp;</div></li><li><div>            if (!isset($this-&gt;form_radio_groups[$name])) {&nbsp;</div></li><li><div>                $this-&gt;form_radio_groups[$name] = array(&nbsp;</div></li><li><div>                    'page' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>                    'kids' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;form_radio_groups[$name]['kids'][] = array(&nbsp;</div></li><li><div>                'n' =&gt; $this-&gt;formn, 'V' =&gt; $value, 'OPT' =&gt; $uvalue, 'disabled' =&gt; $disabled&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            if ($checked) {&nbsp;</div></li><li><div>                $this-&gt;form_radio_groups[$name]['on'] = $value;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // Disable the whole radio group if one is disabled, because of inconsistency in PDF readers&nbsp;</div></li><li><div>            if ($disabled) {&nbsp;</div></li><li><div>                $this-&gt;form_radio_groups[$name]['disabled'] = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($type == 'checkbox') {&nbsp;</div></li><li><div>            $this-&gt;form_checkboxes = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($checked) {&nbsp;</div></li><li><div>            $activ = 1;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $activ = 0;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($background_col) {&nbsp;</div></li><li><div>            $bg_c = $this-&gt;mpdf-&gt;SetColor($background_col, 'CodeOnly');&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $bg_c = $this-&gt;form_button_background_color;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($border_col) {&nbsp;</div></li><li><div>            $bc_c = $this-&gt;mpdf-&gt;SetColor($border_col, 'CodeOnly');&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $bc_c = $this-&gt;form_button_border_color;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $f = array('n' =&gt; $this-&gt;formn, &nbsp;</div></li><li><div>            'typ' =&gt; 'Bt', &nbsp;</div></li><li><div>            'page' =&gt; $this-&gt;mpdf-&gt;page, &nbsp;</div></li><li><div>            'subtype' =&gt; $type, &nbsp;</div></li><li><div>            'x' =&gt; $this-&gt;mpdf-&gt;x, &nbsp;</div></li><li><div>            'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>            'w' =&gt; $bb, &nbsp;</div></li><li><div>            'h' =&gt; $hh, &nbsp;</div></li><li><div>            'T' =&gt; $name, &nbsp;</div></li><li><div>            'V' =&gt; $value, &nbsp;</div></li><li><div>            'OPT' =&gt; $uvalue, &nbsp;</div></li><li><div>            'TU' =&gt; $title, &nbsp;</div></li><li><div>            'FF' =&gt; $flags, &nbsp;</div></li><li><div>            'CA' =&gt; $this-&gt;form_button_text, &nbsp;</div></li><li><div>            'RC' =&gt; $this-&gt;form_button_text_over, &nbsp;</div></li><li><div>            'AC' =&gt; $this-&gt;form_button_text_click, &nbsp;</div></li><li><div>            'BS_W' =&gt; $this-&gt;form_button_border_width, &nbsp;</div></li><li><div>            'BS_S' =&gt; $this-&gt;form_button_border_style, &nbsp;</div></li><li><div>            'BC_C' =&gt; $bc_c, &nbsp;</div></li><li><div>            'BG_C' =&gt; $bg_c, &nbsp;</div></li><li><div>            'activ' =&gt; $activ, &nbsp;</div></li><li><div>            'disabled' =&gt; $disabled, &nbsp;</div></li><li><div>            'noprint' =&gt; $noprint, &nbsp;</div></li><li><div>            'style' =&gt; array(&nbsp;</div></li><li><div>                'font' =&gt; $this-&gt;mpdf-&gt;FontFamily, &nbsp;</div></li><li><div>                'fontsize' =&gt; $this-&gt;mpdf-&gt;FontSizePt, &nbsp;</div></li><li><div>                'fontcolor' =&gt; $this-&gt;mpdf-&gt;TextColor, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if ($this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;ktForms[] = $f;&nbsp;</div></li><li><div>        } else if ($this-&gt;mpdf-&gt;writingHTMLheader || $this-&gt;mpdf-&gt;writingHTMLfooter) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;HTMLheaderPageForms[] = $f;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;ColActive) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnbuffer[] = array('s' =&gt; 'ACROFORM', 'col' =&gt; $this-&gt;mpdf-&gt;CurrCol, 'x' =&gt; $this-&gt;mpdf-&gt;x, 'y' =&gt; $this-&gt;mpdf-&gt;y, &nbsp;</div></li><li><div>                    'h' =&gt; $hh);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;columnForms[$this-&gt;mpdf-&gt;CurrCol][INTVAL($this-&gt;mpdf-&gt;x)][INTVAL($this-&gt;mpdf-&gt;y)] = $this-&gt;formn;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;forms[$this-&gt;formn] = $f;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!in_array($this-&gt;mpdf-&gt;FontFamily, $this-&gt;form_fonts)) {&nbsp;</div></li><li><div>            $this-&gt;form_fonts[] = $this-&gt;mpdf-&gt;FontFamily;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;fonts[$this-&gt;mpdf-&gt;FontFamily]['used'] = true;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;form_button_text = NULL;&nbsp;</div></li><li><div>        $this-&gt;form_button_text_over = NULL;&nbsp;</div></li><li><div>        $this-&gt;form_button_text_click = NULL;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormBorderWidth($string)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        switch ($string) {&nbsp;</div></li><li><div>            case 'S': $this-&gt;form_border_width = '1';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'M': $this-&gt;form_border_width = '2';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'B': $this-&gt;form_border_width = '3';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case '0': $this-&gt;form_border_width = '0';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default: $this-&gt;form_border_width = '0';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormBorderStyle($string)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        switch ($string) {&nbsp;</div></li><li><div>            case 'S': $this-&gt;form_border_style = 'S';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'D': $this-&gt;form_border_style = 'D /D [3]';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'B': $this-&gt;form_border_style = 'B';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'I': $this-&gt;form_border_style = 'I';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'U': $this-&gt;form_border_style = 'U';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default: $this-&gt;form_border_style = 'B';&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormBorderColor($r, $g = -1, $b = -1)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (($r == 0 and $g == 0 and $b == 0) || $g == -1)&nbsp;</div></li><li><div>            $this-&gt;form_border_color = sprintf('%.3F', $r / 255);&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $this-&gt;form_border_color = sprintf('%.3F %.3F %.3F', $r / 255, $g / 255, $b / 255);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormBackgroundColor($r, $g = -1, $b = -1)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (($r == 0 and $g == 0 and $b == 0) || $g == -1)&nbsp;</div></li><li><div>            $this-&gt;form_background_color = sprintf('%.3F', $r / 255);&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>            $this-&gt;form_background_color = sprintf('%.3F %.3F %.3F', $r / 255, $g / 255, $b / 255);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function SetFormD($W, $S, $BC, $BG)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;SetFormBorderWidth($W);&nbsp;</div></li><li><div>        $this-&gt;SetFormBorderStyle($S);&nbsp;</div></li><li><div>        $this-&gt;SetFormBorderColor($BC);&nbsp;</div></li><li><div>        $this-&gt;SetFormBackgroundColor($BG);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _setflag($array)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $flag = 0;&nbsp;</div></li><li><div>        foreach ($array as $val) {&nbsp;</div></li><li><div>            $flag += 1 &lt;&lt; ($val - 1);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $flag;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _form_rect($x, $y, $w, $h, $hPt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $x = $x * _MPDFK;&nbsp;</div></li><li><div>        $y = $hPt - ($y * _MPDFK);&nbsp;</div></li><li><div>        $x2 = $x + ($w * _MPDFK);&nbsp;</div></li><li><div>        $y2 = $y - ($h * _MPDFK);&nbsp;</div></li><li><div>        $rect = sprintf('%.3F %.3F %.3F %.3F', $x, $y2, $x2, $y);&nbsp;</div></li><li><div>        return $rect;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _put_button_icon($array, $w, $h)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (isset($array['image_id'])) {&nbsp;</div></li><li><div>            $info = false;&nbsp;</div></li><li><div>            foreach ($this-&gt;mpdf-&gt;images AS $iid =&gt; $img) {&nbsp;</div></li><li><div>                if ($img['i'] == $array['image_id']) {&nbsp;</div></li><li><div>                    $info = $this-&gt;mpdf-&gt;images[$iid];&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!$info) {&nbsp;</div></li><li><div>            throw new MpdfException(&quot;Cannot find Button image&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&lt;&lt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Type /XObject');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Subtype /Image');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/BBox [0 0 1 1]');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Length ' . strlen($info['data']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/BitsPerComponent ' . $info['bpc']);&nbsp;</div></li><li><div>        if ($info['cs'] == 'Indexed') {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/ColorSpace [/Indexed /DeviceRGB ' . (strlen($info['pal']) / 3 - 1) . ' ' . ($this-&gt;mpdf-&gt;n + 1) . ' 0 R]');&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/ColorSpace /' . $info['cs']);&nbsp;</div></li><li><div>            if ($info['cs'] == 'DeviceCMYK')&nbsp;</div></li><li><div>                if ($info['type'] == 'jpg') {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;_out('/Decode [1 0 1 0 1 0 1 0]');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($info['f']))&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Filter /' . $info['f']);&nbsp;</div></li><li><div>        if (isset($info['parms']))&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out($info['parms']);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Width ' . $info['w']);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Height ' . $info['h']);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_putstream($info['data']);&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>        unset($array);&nbsp;</div></li><li><div>        //Palette&nbsp;</div></li><li><div>        if ($info['cs'] == 'Indexed') {&nbsp;</div></li><li><div>            $filter = ($this-&gt;mpdf-&gt;compress) ? '/Filter /FlateDecode ' : '';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>            $pal = ($this-&gt;mpdf-&gt;compress) ? gzcompress($info['pal']) : $info['pal'];&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&lt;&lt;' . $filter . '/Length ' . strlen($pal) . '&gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_putstream($pal);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _putform_bt($form, $hPt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $cc = 0;&nbsp;</div></li><li><div>        $put_xobject = 0;&nbsp;</div></li><li><div>        $put_js = 0;&nbsp;</div></li><li><div>        $put_icon = 0;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>        $n = $this-&gt;mpdf-&gt;n;&nbsp;</div></li><li><div>        if ($form['subtype'] != 'radio')&nbsp;</div></li><li><div>            $this-&gt;pdf_acro_array .= $n . ' 0 R '; // Add to /Field element&nbsp;</div></li><li><div>        $this-&gt;forms[$form['n']]['obj'] = $n;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&lt;&lt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Type /Annot ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Subtype /Widget');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/NM ' . $this-&gt;mpdf-&gt;_textstring(sprintf('%04u-%04u', $n, (7000 + $form['n']))));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/M ' . $this-&gt;mpdf-&gt;_textstring('D:' . date('YmdHis')));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Rect [ ' . $this-&gt;_form_rect($form['x'], $form['y'], $form['w'], $form['h'], $hPt) . ' ]');&nbsp;</div></li><li><div>        $form['noprint'] ? $this-&gt;mpdf-&gt;_out('/F 0 ') : $this-&gt;mpdf-&gt;_out('/F 4 ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/FT /Btn ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/H /P ');&nbsp;</div></li><li><div>        if ($form['subtype'] != 'radio')  // mPDF 5.3.23&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/T ' . $this-&gt;mpdf-&gt;_textstring($form['T']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/TU ' . $this-&gt;mpdf-&gt;_textstring($form['TU']));&nbsp;</div></li><li><div>        if (isset($this-&gt;form_button_icon[$form['T']])) {&nbsp;</div></li><li><div>            $form['BS_W'] = 0;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($form['BS_W'] == 0) {&nbsp;</div></li><li><div>            $form['BC_C'] = $form['BG_C'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $bstemp = '';&nbsp;</div></li><li><div>        $bstemp .= '/W ' . $form['BS_W'] . ' ';&nbsp;</div></li><li><div>        $bstemp .= '/S /' . $form['BS_S'] . ' ';&nbsp;</div></li><li><div>        $temp = '';&nbsp;</div></li><li><div>        $temp .= '/BC [ ' . $form['BC_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        $temp .= '/BG [ ' . $form['BG_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        if ($form['subtype'] == 'checkbox') {&nbsp;</div></li><li><div>            if ($form['disabled']) {&nbsp;</div></li><li><div>                $radio_color = '0.5 0.5 0.5';&nbsp;</div></li><li><div>                $radio_background_color = '0.9 0.9 0.9';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $radio_color = $this-&gt;form_radio_color;&nbsp;</div></li><li><div>                $radio_background_color = $this-&gt;form_radio_background_color;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $temp = '';&nbsp;</div></li><li><div>            $temp .= '/BC [ ' . $radio_color . &quot; ] &quot;;&nbsp;</div></li><li><div>            $temp .= '/BG [ ' . $radio_background_color . &quot; ] &quot;;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; /W 1 /S /S &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/MK &lt;&lt; $temp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']));&nbsp;</div></li><li><div>            if ($form['activ']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/V /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DV /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/AS /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/AS /Off ');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts['czapfdingbats']['i'] . ' 0 Tf ' . $radio_color . ' rg)');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out(&quot;/AP &lt;&lt; /N &lt;&lt; /&quot; . $this-&gt;mpdf-&gt;_escape($form['V']) . &quot; &quot; . ($this-&gt;mpdf-&gt;n + 1) . &quot; 0 R /Off /Off &gt;&gt; &gt;&gt;&quot;);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$this-&gt;mpdf-&gt;CurrentFont['fontkey']]['i'] . ' 0 Tf ' . $radio_color . ' rg)');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out(&quot;/AP &lt;&lt; /N &lt;&lt; /&quot; . $this-&gt;mpdf-&gt;_escape($form['V']) . &quot; &quot; . ($this-&gt;mpdf-&gt;n + 1) . &quot; 0 R /Off &quot; . ($this-&gt;mpdf-&gt;n + 2) . &quot; 0 R &gt;&gt; &gt;&gt;&quot;);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Opt [ ' . $this-&gt;mpdf-&gt;_textstring($form['OPT']) . ' ' . $this-&gt;mpdf-&gt;_textstring($form['OPT']) . ' ]');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($form['subtype'] == 'radio') {&nbsp;</div></li><li><div>            if ((isset($form['disabled']) && $form['disabled']) || (isset($this-&gt;form_radio_groups[$form['T']]['disabled']) && $this-&gt;form_radio_groups[$form['T']]['disabled'])) {&nbsp;</div></li><li><div>                $radio_color = '0.5 0.5 0.5';&nbsp;</div></li><li><div>                $radio_background_color = '0.9 0.9 0.9';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $radio_color = $this-&gt;form_radio_color;&nbsp;</div></li><li><div>                $radio_background_color = $this-&gt;form_radio_background_color;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Parent ' . $this-&gt;form_radio_groups[$form['T']]['obj_id'] . ' 0 R ');&nbsp;</div></li><li><div>            $temp = '';&nbsp;</div></li><li><div>            $temp .= '/BC [ ' . $radio_color . &quot; ] &quot;;&nbsp;</div></li><li><div>            $temp .= '/BG [ ' . $radio_background_color . &quot; ] &quot;;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; /W 1 /S /S &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/MK &lt;&lt; ' . $temp . ' &gt;&gt; ');&nbsp;</div></li><li><div>            $form['FF'][] = 16; // Radiobutton&nbsp;</div></li><li><div>            $form['FF'][] = 15; // NoToggleOff - must be same as radio button group setting?&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']));&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD)&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts['czapfdingbats']['i'] . ' 0 Tf ' . $radio_color . ' rg)');&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$this-&gt;mpdf-&gt;CurrentFont['fontkey']]['i'] . ' 0 Tf ' . $radio_color . ' rg)');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/AP &lt;&lt; /N &lt;&lt; /&quot; . $this-&gt;mpdf-&gt;_escape($form['V']) . &quot; &quot; . ($this-&gt;mpdf-&gt;n + 1) . &quot; 0 R /Off &quot; . ($this-&gt;mpdf-&gt;n + 2) . &quot; 0 R &gt;&gt; &gt;&gt;&quot;);&nbsp;</div></li><li><div>            if ($form['activ']) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/V /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DV /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/AS /' . $this-&gt;mpdf-&gt;_escape($form['V']) . ' ');&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/AS /Off ');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/AP &lt;&lt; /N &lt;&lt; /&quot; . $this-&gt;mpdf-&gt;_escape($form['V']) . &quot; &quot; . ($this-&gt;mpdf-&gt;n + 1) . &quot; 0 R /Off &quot; . ($this-&gt;mpdf-&gt;n + 2) . &quot; 0 R &gt;&gt; &gt;&gt;&quot;);&nbsp;</div></li><li><div>            //    $this-&gt;mpdf-&gt;_out('/Opt [ '.$this-&gt;mpdf-&gt;_textstring($form['OPT']).' '.$this-&gt;mpdf-&gt;_textstring($form['OPT']).' ]');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($form['subtype'] == 'reset') {&nbsp;</div></li><li><div>            $temp .= $form['CA'] ? '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['CA']) . ' ' : '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['RC'] ? '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['RC']) . ' ' : '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['AC'] ? '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['AC']) . ' ' : '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; $bstemp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/MK &lt;&lt; ' . $temp . ' &gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$form['style']['font']]['i'] . ' ' . $form['style']['fontsize'] . ' Tf ' . $form['style']['fontcolor'] . ')');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/AA &lt;&lt; /D &lt;&lt; /S /ResetForm /Flags 1 &gt;&gt; &gt;&gt;');&nbsp;</div></li><li><div>            $form['FF'][] = 17;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($form['subtype'] == 'submit') {&nbsp;</div></li><li><div>            $temp .= $form['CA'] ? '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['CA']) . ' ' : '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['RC'] ? '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['RC']) . ' ' : '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['AC'] ? '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['AC']) . ' ' : '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; $bstemp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/MK &lt;&lt; $temp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$form['style']['font']]['i'] . ' ' . $form['style']['fontsize'] . ' Tf ' . $form['style']['fontcolor'] . ')');&nbsp;</div></li><li><div>            // Bit 4 (8) = useGETmethod else use POST&nbsp;</div></li><li><div>            // Bit 3 (4) = HTML export format (charset chosen by Adobe)--- OR ---&nbsp;</div></li><li><div>            // Bit 6 (32) = XFDF export format (form of XML in UTF-8)&nbsp;</div></li><li><div>            if ($form['exporttype'] == 'xfdf') {&nbsp;</div></li><li><div>                $flag = 32;&nbsp;</div></li><li><div>            } // 'xfdf' or 'html'&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                if ($form['method'] == 'GET') {&nbsp;</div></li><li><div>                    $flag = 12;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $flag = 4;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // Bit 2 (2) = IncludeNoValueFields&nbsp;</div></li><li><div>            if ($this-&gt;formSubmitNoValueFields)&nbsp;</div></li><li><div>                $flag += 2;&nbsp;</div></li><li><div>            // To submit a value, needs to be in /AP dictionary, AND this object must contain a /Fields entry&nbsp;</div></li><li><div>            // listing all fields to output&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/AA &lt;&lt; /D &lt;&lt; /S /SubmitForm /F (' . $form['URL'] . ') /Flags ' . $flag . ' &gt;&gt; &gt;&gt;');&nbsp;</div></li><li><div>            $form['FF'][] = 17;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($form['subtype'] == 'js_button') {&nbsp;</div></li><li><div>            // Icon / image&nbsp;</div></li><li><div>            if (isset($this-&gt;form_button_icon[$form['T']])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $temp .= '/TP ' . $this-&gt;form_button_icon[$form['T']]['pos'] . ' ';&nbsp;</div></li><li><div>                $temp .= '/I ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';  // Normal icon&nbsp;</div></li><li><div>                $temp .= '/RI ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';  // onMouseOver&nbsp;</div></li><li><div>                $temp .= '/IX ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';  // onClick / onMouseDown&nbsp;</div></li><li><div>                $temp .= '/IF &lt;&lt; /SW /A /S /A /A [0.0 0.0] &gt;&gt; '; // Icon fit dictionary&nbsp;</div></li><li><div>                if ($this-&gt;form_button_icon[$form['T']]['Indexed']) {&nbsp;</div></li><li><div>                    $cc++;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $put_icon = 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $temp .= $form['CA'] ? '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['CA']) . ' ' : '/CA ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['RC'] ? '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['RC']) . ' ' : '/RC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $temp .= $form['AC'] ? '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['AC']) . ' ' : '/AC ' . $this-&gt;mpdf-&gt;_textstring($form['T']) . ' ';&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; $bstemp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/MK &lt;&lt; $temp &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$form['style']['font']]['i'] . ' ' . $form['style']['fontsize'] . ' Tf ' . $form['style']['fontcolor'] . ')');&nbsp;</div></li><li><div>            $form['FF'][] = 17;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']));&nbsp;</div></li><li><div>            // Javascript&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_button_js[$form['T']])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out(&quot;/AA &lt;&lt; /D &quot; . ($cc + $this-&gt;mpdf-&gt;n) . &quot; 0 R &gt;&gt;&quot;);&nbsp;</div></li><li><div>                $put_js = 1;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // additional objects&nbsp;</div></li><li><div>        // obj icon&nbsp;</div></li><li><div>        if ($put_icon == 1) {&nbsp;</div></li><li><div>            $this-&gt;_put_button_icon($this-&gt;form_button_icon[$form['T']], $form['w'], $form['h']);&nbsp;</div></li><li><div>            $put_icon = NULL;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // obj + 1&nbsp;</div></li><li><div>        if ($put_js == 1) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_button_js[$form['T']]['js']);&nbsp;</div></li><li><div>            unset($this-&gt;array_form_button_js[$form['T']]);&nbsp;</div></li><li><div>            $put_js = NULL;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // RADIO and CHECK BOX appearance streams&nbsp;</div></li><li><div>        $filter = ($this-&gt;mpdf-&gt;compress) ? '/Filter /FlateDecode ' : '';&nbsp;</div></li><li><div>        if ($form['subtype'] == 'radio') {&nbsp;</div></li><li><div>            // output 2 appearance streams for radio buttons on/off&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $fs = sprintf('%.3F', $form['style']['fontsize'] * 1.25);&nbsp;</div></li><li><div>                $fi = 'czapfdingbats';&nbsp;</div></li><li><div>                $r_on = 'q ' . $radio_color . ' rg BT /F' . $this-&gt;mpdf-&gt;fonts[$fi]['i'] . ' ' . $fs . ' Tf 0 0 Td (4) Tj ET Q';&nbsp;</div></li><li><div>                $r_off = 'q ' . $radio_color . ' rg BT /F' . $this-&gt;mpdf-&gt;fonts[$fi]['i'] . ' ' . $fs . ' Tf 0 0 Td (8) Tj ET Q';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $matrix = sprintf('%.3F 0 0 %.3F 0 %.3F', $form['style']['fontsize'] * 1.33 / 10, $form['style']['fontsize'] * 1.25 / 10, $form['style']['fontsize']);&nbsp;</div></li><li><div>                $fill = $radio_background_color . ' rg 3.778 -7.410 m 2.800 -7.410 1.947 -7.047 1.225 -6.322 c 0.500 -5.600 0.138 -4.747 0.138 -3.769 c 0.138 -2.788 0.500 -1.938 1.225 -1.213 c 1.947 -0.491 2.800 -0.128 3.778 -0.128 c 4.757 -0.128 5.610 -0.491 6.334 -1.213 c 7.056 -1.938 7.419 -2.788 7.419 -3.769 c 7.419 -4.747 7.056 -5.600 6.334 -6.322 c 5.610 -7.047 4.757 -7.410 3.778 -7.410 c h f ';&nbsp;</div></li><li><div>                $circle = '3.778 -6.963 m 4.631 -6.963 5.375 -6.641 6.013 -6.004 c 6.653 -5.366 6.972 -4.619 6.972 -3.769 c 6.972 -2.916 6.653 -2.172 6.013 -1.532 c 5.375 -0.894 4.631 -0.576 3.778 -0.576 c 2.928 -0.576 2.182 -0.894 1.544 -1.532 c 0.904 -2.172 0.585 -2.916 0.585 -3.769 c 0.585 -4.619 0.904 -5.366 1.544 -6.004 c 2.182 -6.641 2.928 -6.963 3.778 -6.963 c h 3.778 -7.410 m 2.800 -7.410 1.947 -7.047 1.225 -6.322 c 0.500 -5.600 0.138 -4.747 0.138 -3.769 c 0.138 -2.788 0.500 -1.938 1.225 -1.213 c 1.947 -0.491 2.800 -0.128 3.778 -0.128 c 4.757 -0.128 5.610 -0.491 6.334 -1.213 c 7.056 -1.938 7.419 -2.788 7.419 -3.769 c 7.419 -4.747 7.056 -5.600 6.334 -6.322 c 5.610 -7.047 4.757 -7.410 3.778 -7.410 c h f ';&nbsp;</div></li><li><div>                $r_on = 'q ' . $matrix . ' cm ' . $fill . $radio_color . ' rg ' . $circle . '  ' . $radio_color . ' rg&nbsp;</div></li><li><div>5.184 -5.110 m 4.800 -5.494 4.354 -5.685 3.841 -5.685 c 3.331 -5.685 2.885 -5.494 2.501 -5.110 c 2.119 -4.725 1.925 -4.279 1.925 -3.769 c 1.925 -3.257 2.119 -2.810 2.501 -2.429 c 2.885 -2.044 3.331 -1.853 3.841 -1.853 c 4.354 -1.853 4.800 -2.044 5.184 -2.429 c 5.566 -2.810 5.760 -3.257 5.760 -3.769 c 5.760 -4.279 5.566 -4.725 5.184 -5.110 c h&nbsp;</div></li><li><div>f Q ';&nbsp;</div></li><li><div>                $r_off = 'q ' . $matrix . ' cm ' . $fill . $radio_color . ' rg ' . $circle . '  Q ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>            $p = ($this-&gt;mpdf-&gt;compress) ? gzcompress($r_on) : $r_on;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&lt;&lt;' . $filter . '/Length ' . strlen($p) . ' /Resources 2 0 R&gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_putstream($p);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>            $p = ($this-&gt;mpdf-&gt;compress) ? gzcompress($r_off) : $r_off;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&lt;&lt;' . $filter . '/Length ' . strlen($p) . ' /Resources 2 0 R&gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_putstream($p);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($form['subtype'] == 'checkbox') {&nbsp;</div></li><li><div>            // First output appearance stream for check box on&nbsp;</div></li><li><div>            if ($this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $fs = sprintf('%.3F', $form['style']['fontsize'] * 1.25);&nbsp;</div></li><li><div>                $fi = 'czapfdingbats';&nbsp;</div></li><li><div>                $cb_on = 'q ' . $radio_color . ' rg BT /F' . $this-&gt;mpdf-&gt;fonts[$fi]['i'] . ' ' . $fs . ' Tf 0 0 Td (4) Tj ET Q';&nbsp;</div></li><li><div>                $cb_off = 'q ' . $radio_color . ' rg BT /F' . $this-&gt;mpdf-&gt;fonts[$fi]['i'] . ' ' . $fs . ' Tf 0 0 Td (8) Tj ET Q';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $matrix = sprintf('%.3F 0 0 %.3F 0 %.3F', $form['style']['fontsize'] * 1.33 / 10, $form['style']['fontsize'] * 1.25 / 10, $form['style']['fontsize']);&nbsp;</div></li><li><div>                $fill = $radio_background_color . ' rg 7.395 -0.070 m 7.395 -7.344 l 0.121 -7.344 l 0.121 -0.070 l 7.395 -0.070 l h  f ';&nbsp;</div></li><li><div>                $square = '0.508 -6.880 m 6.969 -6.880 l 6.969 -0.534 l 0.508 -0.534 l 0.508 -6.880 l h 7.395 -0.070 m 7.395 -7.344 l 0.121 -7.344 l 0.121 -0.070 l 7.395 -0.070 l h ';&nbsp;</div></li><li><div>                $cb_on = 'q ' . $matrix . ' cm ' . $fill . $radio_color . ' rg ' . $square . ' f ' . $radio_color . ' rg&nbsp;</div></li><li><div>6.321 -1.352 m 5.669 -2.075 5.070 -2.801 4.525 -3.532 c 3.979 -4.262 3.508 -4.967 3.112 -5.649 c 3.080 -5.706 3.039 -5.779 2.993 -5.868 c 2.858 -6.118 2.638 -6.243 2.334 -6.243 c 2.194 -6.243 2.100 -6.231 2.052 -6.205 c 2.003 -6.180 1.954 -6.118 1.904 -6.020 c 1.787 -5.788 1.688 -5.523 1.604 -5.226 c 1.521 -4.930 1.480 -4.721 1.480 -4.600 c 1.480 -4.535 1.491 -4.484 1.512 -4.447 c 1.535 -4.410 1.579 -4.367 1.647 -4.319 c 1.733 -4.259 1.828 -4.210 1.935 -4.172 c 2.040 -4.134 2.131 -4.115 2.205 -4.115 c 2.267 -4.115 2.341 -4.232 2.429 -4.469 c 2.437 -4.494 2.444 -4.511 2.448 -4.522 c 2.451 -4.531 2.456 -4.546 2.465 -4.568 c 2.546 -4.795 2.614 -4.910 2.668 -4.910 c 2.714 -4.910 2.898 -4.652 3.219 -4.136 c 3.539 -3.620 3.866 -3.136 4.197 -2.683 c 4.426 -2.367 4.633 -2.103 4.816 -1.889 c 4.998 -1.676 5.131 -1.544 5.211 -1.493 c 5.329 -1.426 5.483 -1.368 5.670 -1.319 c 5.856 -1.271 6.066 -1.238 6.296 -1.217 c 6.321 -1.352 l h  f  Q ';&nbsp;</div></li><li><div>                $cb_off = 'q ' . $matrix . ' cm ' . $fill . $radio_color . ' rg ' . $square . ' f Q ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>            $p = ($this-&gt;mpdf-&gt;compress) ? gzcompress($cb_on) : $cb_on;&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('&lt;&lt;' . $filter . '/Length ' . strlen($p) . ' /Resources 2 0 R&gt;&gt;');&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_putstream($p);&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // output appearance stream for check box off (only if not using ZapfDingbats)&nbsp;</div></li><li><div>            if (!$this-&gt;formUseZapD) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>                $p = ($this-&gt;mpdf-&gt;compress) ? gzcompress($cb_off) : $cb_off;&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('&lt;&lt;' . $filter . '/Length ' . strlen($p) . ' /Resources 2 0 R&gt;&gt;');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_putstream($p);&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $n;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _putform_ch($form, $hPt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $put_js = 0;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>        $n = $this-&gt;mpdf-&gt;n;&nbsp;</div></li><li><div>        $this-&gt;pdf_acro_array .= $n . ' 0 R ';&nbsp;</div></li><li><div>        $this-&gt;forms[$form['n']]['obj'] = $n;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&lt;&lt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Type /Annot ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Subtype /Widget');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Rect [ ' . $this-&gt;_form_rect($form['x'], $form['y'], $form['w'], $form['h'], $hPt) . ' ]');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/F 4');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/FT /Ch');&nbsp;</div></li><li><div>        if ($form['Q'])&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Q ' . $form['Q'] . '');&nbsp;</div></li><li><div>        $temp = '';&nbsp;</div></li><li><div>        $temp .= '/W ' . $form['BS_W'] . ' ';&nbsp;</div></li><li><div>        $temp .= '/S /' . $form['BS_S'] . ' ';&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; $temp &gt;&gt;&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $temp = '';&nbsp;</div></li><li><div>        $temp .= '/BC [ ' . $form['BC_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        $temp .= '/BG [ ' . $form['BG_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/MK &lt;&lt; ' . $temp . ' &gt;&gt;');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/NM ' . $this-&gt;mpdf-&gt;_textstring(sprintf('%04u-%04u', $n, (6000 + $form['n']))));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/M ' . $this-&gt;mpdf-&gt;_textstring('D:' . date('YmdHis')));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/T ' . $this-&gt;mpdf-&gt;_textstring($form['T']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$form['style']['font']]['i'] . ' ' . $form['style']['fontsize'] . ' Tf ' . $form['style']['fontcolor'] . ')');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $opt = '';&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; count($form['OPT']['VAL']); $i++) {&nbsp;</div></li><li><div>            $opt .= '[ ' . $this-&gt;mpdf-&gt;_textstring($form['OPT']['VAL'][$i]) . ' ' . $this-&gt;mpdf-&gt;_textstring($form['OPT']['OPT'][$i]) . ' ] ';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Opt [ ' . $opt . ']');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // selected&nbsp;</div></li><li><div>        $selectItem = false;&nbsp;</div></li><li><div>        $selectIndex = false;&nbsp;</div></li><li><div>        foreach ($form['OPT']['SEL'] as $selectKey =&gt; $selectVal) {&nbsp;</div></li><li><div>            $selectName = $this-&gt;mpdf-&gt;_textstring($form['OPT']['VAL'][$selectVal]);&nbsp;</div></li><li><div>            $selectItem .= ' ' . $selectName . ' ';&nbsp;</div></li><li><div>            $selectIndex .= ' ' . $selectVal . ' ';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($selectItem) {&nbsp;</div></li><li><div>            if (count($form['OPT']['SEL']) &lt; 2) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/V ' . $selectItem . ' ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DV ' . $selectItem . ' ');&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/V [' . $selectItem . '] ');&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_out('/DV [' . $selectItem . '] ');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/I [' . $selectIndex . '] ');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (is_array($form['FF']) && count($form['FF']) &gt; 0) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']) . ' ');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // Javascript&nbsp;</div></li><li><div>        if (isset($this-&gt;array_form_choice_js[$form['T']])) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out(&quot;/AA &lt;&lt; /V &quot; . ($this-&gt;mpdf-&gt;n + 1) . &quot; 0 R &gt;&gt;&quot;);&nbsp;</div></li><li><div>            $put_js = 1;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>        // obj + 1&nbsp;</div></li><li><div>        if ($put_js == 1) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_choice_js[$form['T']]['js']);&nbsp;</div></li><li><div>            unset($this-&gt;array_form_choice_js[$form['T']]);&nbsp;</div></li><li><div>            $put_js = NULL;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $n;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _putform_tx($form, $hPt)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $put_js = 0;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_newobj();&nbsp;</div></li><li><div>        $n = $this-&gt;mpdf-&gt;n;&nbsp;</div></li><li><div>        $this-&gt;pdf_acro_array .= $n . ' 0 R ';&nbsp;</div></li><li><div>        $this-&gt;forms[$form['n']]['obj'] = $n;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&lt;&lt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Type /Annot ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Subtype /Widget ');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/Rect [ ' . $this-&gt;_form_rect($form['x'], $form['y'], $form['w'], $form['h'], $hPt) . ' ] ');&nbsp;</div></li><li><div>        $form['hidden'] ? $this-&gt;mpdf-&gt;_out('/F 2 ') : $this-&gt;mpdf-&gt;_out('/F 4 ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/FT /Tx ');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/H /N ');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/R 0 ');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (is_array($form['FF']) && count($form['FF']) &gt; 0) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Ff ' . $this-&gt;_setflag($form['FF']) . ' ');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($form['maxlen']) && $form['maxlen'] &gt; 0) {&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/MaxLen ' . $form['maxlen']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $temp = '';&nbsp;</div></li><li><div>        $temp .= '/W ' . $form['BS_W'] . ' ';&nbsp;</div></li><li><div>        $temp .= '/S /' . $form['BS_S'] . ' ';&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out(&quot;/BS &lt;&lt; $temp &gt;&gt;&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $temp = '';&nbsp;</div></li><li><div>        $temp .= '/BC [ ' . $form['BC_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        $temp .= '/BG [ ' . $form['BG_C'] . &quot; ] &quot;;&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/MK &lt;&lt;' . $temp . ' &gt;&gt;');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/T ' . $this-&gt;mpdf-&gt;_textstring($form['T']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/TU ' . $this-&gt;mpdf-&gt;_textstring($form['TU']));&nbsp;</div></li><li><div>        if ($form['V'] || $form['V'] === '0')&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/V ' . $this-&gt;mpdf-&gt;_textstring($form['V']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/DV ' . $this-&gt;mpdf-&gt;_textstring($form['DV']));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/DA (/F' . $this-&gt;mpdf-&gt;fonts[$form['style']['font']]['i'] . ' ' . $form['style']['fontsize'] . ' Tf ' . $form['style']['fontcolor'] . ')');&nbsp;</div></li><li><div>        if ($form['Q'])&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/Q ' . $form['Q'] . '');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/NM ' . $this-&gt;mpdf-&gt;_textstring(sprintf('%04u-%04u', $n, (5000 + $form['n']))));&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('/M ' . $this-&gt;mpdf-&gt;_textstring('D:' . date('YmdHis')));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($this-&gt;array_form_text_js[$form['T']])) {&nbsp;</div></li><li><div>            $put_js = 1;&nbsp;</div></li><li><div>            $cc = 0;&nbsp;</div></li><li><div>            $js_str = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['F'])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $js_str .= '/F ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['K'])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $js_str .= '/K ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['V'])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $js_str .= '/V ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['C'])) {&nbsp;</div></li><li><div>                $cc++;&nbsp;</div></li><li><div>                $js_str .= '/C ' . ($cc + $this-&gt;mpdf-&gt;n) . ' 0 R ';&nbsp;</div></li><li><div>                $this-&gt;pdf_array_co .= $this-&gt;mpdf-&gt;n . ' 0 R ';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;_out('/AA &lt;&lt; ' . $js_str . ' &gt;&gt;');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('&gt;&gt;');&nbsp;</div></li><li><div>        $this-&gt;mpdf-&gt;_out('endobj');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($put_js == 1) {&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['F'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_text_js[$form['T']]['F']['js']);&nbsp;</div></li><li><div>                unset($this-&gt;array_form_text_js[$form['T']]['F']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['K'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_text_js[$form['T']]['K']['js']);&nbsp;</div></li><li><div>                unset($this-&gt;array_form_text_js[$form['T']]['K']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['V'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_text_js[$form['T']]['V']['js']);&nbsp;</div></li><li><div>                unset($this-&gt;array_form_text_js[$form['T']]['V']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;array_form_text_js[$form['T']]['C'])) {&nbsp;</div></li><li><div>                $this-&gt;mpdf-&gt;_set_object_javascript($this-&gt;array_form_text_js[$form['T']]['C']['js']);&nbsp;</div></li><li><div>                unset($this-&gt;array_form_text_js[$form['T']]['C']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $n;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/mpdfform/" class="active">2.8.1</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.0/classes/mpdfform/" class="">2.8.0</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.3/classes/mpdfform/" class="">2.7.3</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.2/classes/mpdfform/" class="">2.7.2</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.1/classes/mpdfform/" class="">2.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>mpdfform</li><li><span></span>WooCommerce PDF Invoices</li><li><span></span>2.8.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>