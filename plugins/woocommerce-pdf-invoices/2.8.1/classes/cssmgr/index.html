<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="2.8.1" data-slug="woocommerce-pdf-invoices" data-type="class" data-id="20291"><head xmlns="http://www.w3.org/1999/xhtml"><title> cssmgr | class | Woocommerce Pdf Invoices | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="cssmgr, class, plugin, woocommerce-pdf-invoices, 2.8.1" /><meta name="description" content="The WooCommerce PDF Invoices cssmgr class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=ef5840097b5f59e99cfeeac6ed006e5c' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/cssmgr/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fcssmgr%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fcssmgr%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-woocommerce-pdf-invoices-2.8.1-class-cssmgr","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="cssmgr" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to woocommerce-pdf-invoices." href="http://hookr.io/plugins/woocommerce-pdf-invoices/" class="plugin"><span property="name">woocommerce-pdf-invoices</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 2.8.1." href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/" class="H_VERSION"><span property="name">2.8.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">cssmgr</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="211"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/all/" title="All">All <span class="count badge">211</span></a></li><li class="" data-id="new" data-count="24"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/new/" title="New">New <span class="count badge">24</span></a></li><li class="" data-id="hooks" data-count="41"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/hooks/" title="Hooks">Hooks <span class="count badge">41</span></a></li><li class="" data-id="action" data-count="13"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/actions/" title="Actions">Actions <span class="count badge">13</span></a></li><li class="" data-id="filter" data-count="28"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/filters/" title="Filters">Filters <span class="count badge">28</span></a></li><li class="active" data-id="class" data-count="63"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/" title="Classes">Classes <span class="count badge">63</span></a></li><li class="" data-id="constant" data-count="66"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/constants/" title="Constants">Constants <span class="count badge">66</span></a></li><li class="" data-id="function" data-count="40"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/functions/" title="Functions">Functions <span class="count badge">40</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>cssmgr</strong></h1><p>The WooCommerce PDF Invoices <strong>cssmgr</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/files/vendor-mpdf-mpdf-classes-cssmgr/" class="file">/vendor/mpdf/mpdf/classes/cssmgr.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="3" class="block" start="3"><li><div>class cssmgr&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $mpdf = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $tablecascadeCSS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $cascadeCSS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $CSS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    var $tbCSSlvl;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function __construct(mPDF $mpdf)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;mpdf = $mpdf;&nbsp;</div></li><li><div>        $this-&gt;tablecascadeCSS = array();&nbsp;</div></li><li><div>        $this-&gt;CSS = array();&nbsp;</div></li><li><div>        $this-&gt;cascadeCSS = array();&nbsp;</div></li><li><div>        $this-&gt;tbCSSlvl = 0;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function ReadCSS($html)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        preg_match_all('/&lt;style[^&gt;]*media=[&quot;\']([^&quot;\'&gt;]*)[&quot;\'].*?&lt;\/style&gt;/is', $html, $m);&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; count($m[0]); $i++) {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;CSSselectMedia && !preg_match('/(' . trim($this-&gt;mpdf-&gt;CSSselectMedia) . '|all)/i', $m[1][$i])) {&nbsp;</div></li><li><div>                $html = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', '', $html);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        preg_match_all('/&lt;link[^&gt;]*media=[&quot;\']([^&quot;\'&gt;]*)[&quot;\'].*?&gt;/is', $html, $m);&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; count($m[0]); $i++) {&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;CSSselectMedia && !preg_match('/(' . trim($this-&gt;mpdf-&gt;CSSselectMedia) . '|all)/i', $m[1][$i])) {&nbsp;</div></li><li><div>                $html = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', '', $html);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // mPDF 5.5.02&nbsp;</div></li><li><div>        // Remove Comment tags &lt;!-- ... --&gt; inside CSS as &lt;style&gt; in HTML document&nbsp;</div></li><li><div>        // Remove Comment tags /* ...  */ inside CSS as &lt;style&gt; in HTML document&nbsp;</div></li><li><div>        // But first, we replace upper and mixed case closing style tag with lower&nbsp;</div></li><li><div>        // case so we can use str_replace later.&nbsp;</div></li><li><div>        preg_match_all('/&lt;style.*?&gt;(.*?)&lt;\/style&gt;/si', $html, $m);&nbsp;</div></li><li><div>        if (count($m[1])) {&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                // Remove comment tags&nbsp;</div></li><li><div>                $sub = preg_replace('/(&lt;\!\-\-|\-\-&gt;)/s', ' ', $m[1][$i]);&nbsp;</div></li><li><div>                $sub = '&gt;'.preg_replace('|/\*.*?\*/|s', ' ', $sub).'&lt;/style&gt;';&nbsp;</div></li><li><div>                $html = str_replace('&gt;'.$m[1][$i].'&lt;/style&gt;', $sub, $html);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html = preg_replace('/&lt;!--mpdf/i', '', $html);&nbsp;</div></li><li><div>        $html = preg_replace('/mpdf--&gt;/i', '', $html);&nbsp;</div></li><li><div>        $html = preg_replace('/&lt;\!\-\-.*?\-\-&gt;/s', ' ', $html);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $match = 0; // no match for instance&nbsp;</div></li><li><div>        $regexp = ''; // This helps debugging: showing what is the REAL string being processed&nbsp;</div></li><li><div>        $CSSext = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //CSS inside external files&nbsp;</div></li><li><div>        $regexp = '/&lt;link[^&gt;]*rel=[&quot;\']stylesheet[&quot;\'][^&gt;]*href=[&quot;\']([^&gt;&quot;\']*)[&quot;\'].*?&gt;/si';&nbsp;</div></li><li><div>        $x = preg_match_all($regexp, $html, $cxt);&nbsp;</div></li><li><div>        if ($x) {&nbsp;</div></li><li><div>            $match += $x;&nbsp;</div></li><li><div>            $CSSext = $cxt[1];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $regexp = '/&lt;link[^&gt;]*href=[&quot;\']([^&gt;&quot;\']*)[&quot;\'][^&gt;]*?rel=[&quot;\']stylesheet[&quot;\'].*?&gt;/si';&nbsp;</div></li><li><div>        $x = preg_match_all($regexp, $html, $cxt);&nbsp;</div></li><li><div>        if ($x) {&nbsp;</div></li><li><div>            $match += $x;&nbsp;</div></li><li><div>            $CSSext = array_merge($CSSext, $cxt[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // look for @import stylesheets&nbsp;</div></li><li><div>        //$regexp = '/@import url\([\'\&quot;]{0, 1}([^\)]*?\.css)[\'\&quot;]{0, 1}\)/si';&nbsp;</div></li><li><div>        $regexp = '/@import url\([\'\&quot;]{0, 1}([^\)]*?\.css(\?\S+)?)[\'\&quot;]{0, 1}\)/si';&nbsp;</div></li><li><div>        $x = preg_match_all($regexp, $html, $cxt);&nbsp;</div></li><li><div>        if ($x) {&nbsp;</div></li><li><div>            $match += $x;&nbsp;</div></li><li><div>            $CSSext = array_merge($CSSext, $cxt[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // look for @import without the url()&nbsp;</div></li><li><div>        //$regexp = '/@import [\'\&quot;]{0, 1}([^;]*?\.css)[\'\&quot;]{0, 1}/si';&nbsp;</div></li><li><div>        $regexp = '/@import [\'\&quot;]{0, 1}([^;]*?\.css(\?\S+)?)[\'\&quot;]{0, 1}/si';&nbsp;</div></li><li><div>        $x = preg_match_all($regexp, $html, $cxt);&nbsp;</div></li><li><div>        if ($x) {&nbsp;</div></li><li><div>            $match += $x;&nbsp;</div></li><li><div>            $CSSext = array_merge($CSSext, $cxt[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $ind = 0;&nbsp;</div></li><li><div>        $CSSstr = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!is_array($this-&gt;cascadeCSS))&nbsp;</div></li><li><div>            $this-&gt;cascadeCSS = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        while ($match) {&nbsp;</div></li><li><div>            $path = $CSSext[$ind];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $path = htmlspecialchars_decode($path); // mPDF 6&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;mpdf-&gt;GetFullPath($path);&nbsp;</div></li><li><div>            $CSSextblock = $this-&gt;mpdf-&gt;_get_file($path);&nbsp;</div></li><li><div>            if ($CSSextblock) {&nbsp;</div></li><li><div>                // look for embedded @import stylesheets in other stylesheets&nbsp;</div></li><li><div>                // and fix url paths (including background-images) relative to stylesheet&nbsp;</div></li><li><div>                //$regexpem = '/@import url\([\'\&quot;]{0, 1}(.*?\.css)[\'\&quot;]{0, 1}\)/si';&nbsp;</div></li><li><div>                $regexpem = '/@import url\([\'\&quot;]{0, 1}(.*?\.css(\?\S+)?)[\'\&quot;]{0, 1}\)/si';&nbsp;</div></li><li><div>                $xem = preg_match_all($regexpem, $CSSextblock, $cxtem);&nbsp;</div></li><li><div>                $cssBasePath = preg_replace('/\/[^\/]*$/', '', $path) . '/';&nbsp;</div></li><li><div>                if ($xem) {&nbsp;</div></li><li><div>                    foreach ($cxtem[1] AS $cxtembedded) {&nbsp;</div></li><li><div>                        // path is relative to original stlyesheet!!&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;GetFullPath($cxtembedded, $cssBasePath);&nbsp;</div></li><li><div>                        $match++;&nbsp;</div></li><li><div>                        $CSSext[] = $cxtembedded;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $regexpem = '/(background[^;]*url\s*\(\s*[\'\&quot;]{0, 1})([^\)\'\&quot;]*)([\'\&quot;]{0, 1}\s*\))/si';&nbsp;</div></li><li><div>                $xem = preg_match_all($regexpem, $CSSextblock, $cxtem);&nbsp;</div></li><li><div>                if ($xem) {&nbsp;</div></li><li><div>                    for ($i = 0; $i &lt; count($cxtem[0]); $i++) {&nbsp;</div></li><li><div>                        // path is relative to original stlyesheet!!&nbsp;</div></li><li><div>                        $embedded = $cxtem[2][$i];&nbsp;</div></li><li><div>                        if (!preg_match('/^data:image/i', $embedded)) { // mPDF 5.5.13&nbsp;</div></li><li><div>                            $this-&gt;mpdf-&gt;GetFullPath($embedded, $cssBasePath);&nbsp;</div></li><li><div>                            $CSSextblock = preg_replace('/' . preg_quote($cxtem[0][$i], '/') . '/', ($cxtem[1][$i] . $embedded . $cxtem[3][$i]), $CSSextblock);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $CSSstr .= ' ' . $CSSextblock;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $match--;&nbsp;</div></li><li><div>            $ind++;&nbsp;</div></li><li><div>        } //end of match&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $match = 0; // reset value, if needed&nbsp;</div></li><li><div>        // CSS as &lt;style&gt; in HTML document&nbsp;</div></li><li><div>        $regexp = '/&lt;style.*?&gt;(.*?)&lt;\/style&gt;/si';&nbsp;</div></li><li><div>        $match = preg_match_all($regexp, $html, $CSSblock);&nbsp;</div></li><li><div>        if ($match) {&nbsp;</div></li><li><div>            $tmpCSSstr = implode(' ', $CSSblock[1]);&nbsp;</div></li><li><div>            $regexpem = '/(background[^;]*url\s*\(\s*[\'\&quot;]{0, 1})([^\)\'\&quot;]*)([\'\&quot;]{0, 1}\s*\))/si';&nbsp;</div></li><li><div>            $xem = preg_match_all($regexpem, $tmpCSSstr, $cxtem);&nbsp;</div></li><li><div>            if ($xem) {&nbsp;</div></li><li><div>                for ($i = 0; $i &lt; count($cxtem[0]); $i++) {&nbsp;</div></li><li><div>                    $embedded = $cxtem[2][$i];&nbsp;</div></li><li><div>                    if (!preg_match('/^data:image/i', $embedded)) { // mPDF 5.5.13&nbsp;</div></li><li><div>                        $this-&gt;mpdf-&gt;GetFullPath($embedded);&nbsp;</div></li><li><div>                        $tmpCSSstr = preg_replace('/' . preg_quote($cxtem[0][$i], '/') . '/', ($cxtem[1][$i] . $embedded . $cxtem[3][$i]), $tmpCSSstr);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $CSSstr .= ' ' . $tmpCSSstr;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // Remove comments&nbsp;</div></li><li><div>        $CSSstr = preg_replace('|/\*.*?\*/|s', ' ', $CSSstr);&nbsp;</div></li><li><div>        $CSSstr = preg_replace('/[\s\n\r\t\f]/s', ' ', $CSSstr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (preg_match('/@media/', $CSSstr)) {&nbsp;</div></li><li><div>            preg_match_all('/@media(.*?)\{(([^\{\}]*\{[^\{\}]*\})+)\s*\}/is', $CSSstr, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[0]); $i++) {&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;CSSselectMedia && !preg_match('/(' . trim($this-&gt;mpdf-&gt;CSSselectMedia) . '|all)/i', $m[1][$i])) {&nbsp;</div></li><li><div>                    $CSSstr = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', '', $CSSstr);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $CSSstr = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', ' ' . $m[2][$i] . ' ', $CSSstr);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Replace any background: url(data:image... with temporary image file reference&nbsp;</div></li><li><div>        preg_match_all(&quot;/(url\(data:image\/(jpeg|gif|png);base64, (.*?)\))/si&quot;, $CSSstr, $idata); // mPDF 5.7.2&nbsp;</div></li><li><div>        if (count($idata[0])) {&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($idata[0]); $i++) {&nbsp;</div></li><li><div>                $file = _MPDF_TEMP_PATH . '_tempCSSidata' . RAND(1, 10000) . '_' . $i . '.' . $idata[2][$i];&nbsp;</div></li><li><div>                //Save to local file&nbsp;</div></li><li><div>                file_put_contents($file, base64_decode($idata[3][$i]));&nbsp;</div></li><li><div>                // $this-&gt;mpdf-&gt;GetFullPath($file);    // ? is this needed - NO  mPDF 5.6.03&nbsp;</div></li><li><div>                $CSSstr = str_replace($idata[0][$i], 'url(&quot;' . $file . '&quot;)', $CSSstr);  // mPDF 5.5.17&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $CSSstr = preg_replace('/(&lt;\!\-\-|\-\-&gt;)/s', ' ', $CSSstr);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>        // Characters &quot;(&quot; &quot;)&quot; and &quot;;&quot; in url() e.g. background-image, cause problems parsing the CSS string&nbsp;</div></li><li><div>        // URLencode ( and ), but change &quot;;&quot; to a code which can be converted back after parsing (so as not to confuse ;&nbsp;</div></li><li><div>        // with a segment delimiter in the URI)&nbsp;</div></li><li><div>        $tempmarker = '%ZZ';&nbsp;</div></li><li><div>        if (strpos($CSSstr, 'url(') !== false) {&nbsp;</div></li><li><div>            preg_match_all('/url\(\&quot;(.*?)\&quot;\)/', $CSSstr, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $CSSstr = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $CSSstr);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            preg_match_all('/url\(\'(.*?)\'\)/', $CSSstr, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $CSSstr = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $CSSstr);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            preg_match_all('/url\(([^\'\&quot;].*?[^\'\&quot;])\)/', $CSSstr, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $CSSstr = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $CSSstr);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($CSSstr) {&nbsp;</div></li><li><div>            $classproperties = array(); // mPDF 6&nbsp;</div></li><li><div>            preg_match_all('/(.*?)\{(.*?)\}/', $CSSstr, $styles);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($styles[1]); $i++) {&nbsp;</div></li><li><div>                // SET array e.g. $classproperties['COLOR'] = '#ffffff';&nbsp;</div></li><li><div>                $stylestr = trim($styles[2][$i]);&nbsp;</div></li><li><div>                $stylearr = explode(';', $stylestr);&nbsp;</div></li><li><div>                foreach ($stylearr AS $sta) {&nbsp;</div></li><li><div>                    if (trim($sta)) {&nbsp;</div></li><li><div>                        // Changed to allow style=&quot;background: url('http://www.bpm1.com/bg.jpg')&quot;&nbsp;</div></li><li><div>                        $tmp = explode(':', $sta, 2);&nbsp;</div></li><li><div>                        $property = $tmp[0];&nbsp;</div></li><li><div>                        if (isset($tmp[1])) {&nbsp;</div></li><li><div>                            $value = $tmp[1];&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $value = '';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $value = str_replace($tempmarker, ';', $value); // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>                        $property = trim($property);&nbsp;</div></li><li><div>                        $value = preg_replace('/\s*!important/i', '', $value);&nbsp;</div></li><li><div>                        $value = trim($value);&nbsp;</div></li><li><div>                        if ($property && ($value || $value === '0')) {&nbsp;</div></li><li><div>                            // Ignores -webkit-gradient so doesn't override -moz-&nbsp;</div></li><li><div>                            if ((strtoupper($property) == 'BACKGROUND-IMAGE' || strtoupper($property) == 'BACKGROUND') && preg_match('/-webkit-gradient/i', $value)) {&nbsp;</div></li><li><div>                                continue;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $classproperties[strtoupper($property)] = $value;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $classproperties = $this-&gt;fixCSS($classproperties);&nbsp;</div></li><li><div>                $tagstr = strtoupper(trim($styles[1][$i]));&nbsp;</div></li><li><div>                $tagarr = explode(', ', $tagstr);&nbsp;</div></li><li><div>                $pageselectors = false; // used to turn on $this-&gt;mpdf-&gt;mirrorMargins&nbsp;</div></li><li><div>                foreach ($tagarr AS $tg) {&nbsp;</div></li><li><div>                    // mPDF 5.7.4&nbsp;</div></li><li><div>                    if (preg_match('/NTH-CHILD\((\s*(([\-+]?\d*)N(\s*[\-+]\s*\d+)?|[\-+]?\d+|ODD|EVEN)\s*)\)/', $tg, $m)) {&nbsp;</div></li><li><div>                        $tg = preg_replace('/NTH-CHILD\(.*\)/', 'NTH-CHILD(' . str_replace(' ', '', $m[1]) . ')', $tg);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $tags = preg_split('/\s+/', trim($tg));&nbsp;</div></li><li><div>                    $level = count($tags);&nbsp;</div></li><li><div>                    $t = '';&nbsp;</div></li><li><div>                    $t2 = '';&nbsp;</div></li><li><div>                    $t3 = '';&nbsp;</div></li><li><div>                    if (trim($tags[0]) == '@PAGE') {&nbsp;</div></li><li><div>                        if (isset($tags[0])) {&nbsp;</div></li><li><div>                            $t = trim($tags[0]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($tags[1])) {&nbsp;</div></li><li><div>                            $t2 = trim($tags[1]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($tags[2])) {&nbsp;</div></li><li><div>                            $t3 = trim($tags[2]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        $tag = '';&nbsp;</div></li><li><div>                        if ($level == 1) {&nbsp;</div></li><li><div>                            $tag = $t;&nbsp;</div></li><li><div>                        } else if ($level == 2 && preg_match('/^[:](.*)$/', $t2, $m)) {&nbsp;</div></li><li><div>                            $tag = $t . '&gt;&gt;PSEUDO&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                            if ($m[1] == 'LEFT' || $m[1] == 'RIGHT') {&nbsp;</div></li><li><div>                                $pageselectors = true;&nbsp;</div></li><li><div>                            } // used to turn on $this-&gt;mpdf-&gt;mirrorMargins&nbsp;</div></li><li><div>                        } else if ($level == 2) {&nbsp;</div></li><li><div>                            $tag = $t . '&gt;&gt;NAMED&gt;&gt;' . $t2;&nbsp;</div></li><li><div>                        } else if ($level == 3 && preg_match('/^[:](.*)$/', $t3, $m)) {&nbsp;</div></li><li><div>                            $tag = $t . '&gt;&gt;NAMED&gt;&gt;' . $t2 . '&gt;&gt;PSEUDO&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                            if ($m[1] == 'LEFT' || $m[1] == 'RIGHT') {&nbsp;</div></li><li><div>                                $pageselectors = true;&nbsp;</div></li><li><div>                            } // used to turn on $this-&gt;mpdf-&gt;mirrorMargins&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (isset($this-&gt;CSS[$tag]) && $tag) {&nbsp;</div></li><li><div>                            $this-&gt;CSS[$tag] = $this-&gt;array_merge_recursive_unique($this-&gt;CSS[$tag], $classproperties);&nbsp;</div></li><li><div>                        } else if ($tag) {&nbsp;</div></li><li><div>                            $this-&gt;CSS[$tag] = $classproperties;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($level == 1) {  // e.g. p or .class or #id or p.class or p#id&nbsp;</div></li><li><div>                        if (isset($tags[0])) {&nbsp;</div></li><li><div>                            $t = trim($tags[0]);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if ($t) {&nbsp;</div></li><li><div>                            $tag = '';&nbsp;</div></li><li><div>                            if (preg_match('/^[.](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = 'CLASS&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                            } else if (preg_match('/^[#](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = 'ID&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                            } else if (preg_match('/^\[LANG=[\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\]$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = 'LANG&gt;&gt;' . strtolower($m[1]);&nbsp;</div></li><li><div>                            } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                            else if (preg_match('/^:LANG\([\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = 'LANG&gt;&gt;' . strtolower($m[1]);&nbsp;</div></li><li><div>                            } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                            else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')[.](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = $m[1] . '&gt;&gt;CLASS&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                            } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')\s*:NTH-CHILD\((.*)\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = $m[1] . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                            } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')[#](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = $m[1] . '&gt;&gt;ID&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                            } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')\[LANG=[\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\]$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = $m[1] . '&gt;&gt;LANG&gt;&gt;' . strtolower($m[2]);&nbsp;</div></li><li><div>                            } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                            else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . '):LANG\([\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                $tag = $m[1] . '&gt;&gt;LANG&gt;&gt;' . strtolower($m[2]);&nbsp;</div></li><li><div>                            } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                            else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')$/', $t)) {&nbsp;</div></li><li><div>                                $tag = $t;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if (isset($this-&gt;CSS[$tag]) && $tag) {&nbsp;</div></li><li><div>                                $this-&gt;CSS[$tag] = $this-&gt;array_merge_recursive_unique($this-&gt;CSS[$tag], $classproperties);&nbsp;</div></li><li><div>                            } else if ($tag) {&nbsp;</div></li><li><div>                                $this-&gt;CSS[$tag] = $classproperties;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $tmp = array();&nbsp;</div></li><li><div>                        for ($n = 0; $n &lt; $level; $n++) {&nbsp;</div></li><li><div>                            if (isset($tags[$n])) {&nbsp;</div></li><li><div>                                $t = trim($tags[$n]);&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                                $t = '';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if ($t) {&nbsp;</div></li><li><div>                                $tag = '';&nbsp;</div></li><li><div>                                if (preg_match('/^[.](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = 'CLASS&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                                } else if (preg_match('/^[#](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = 'ID&gt;&gt;' . $m[1];&nbsp;</div></li><li><div>                                } else if (preg_match('/^\[LANG=[\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\]$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = 'LANG&gt;&gt;' . strtolower($m[1]);&nbsp;</div></li><li><div>                                } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                                else if (preg_match('/^:LANG\([\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = 'LANG&gt;&gt;' . strtolower($m[1]);&nbsp;</div></li><li><div>                                } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                                else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')[.](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = $m[1] . '&gt;&gt;CLASS&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                                } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')\s*:NTH-CHILD\((.*)\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = $m[1] . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                                } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')[#](.*)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = $m[1] . '&gt;&gt;ID&gt;&gt;' . $m[2];&nbsp;</div></li><li><div>                                } else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')\[LANG=[\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\]$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = $m[1] . '&gt;&gt;LANG&gt;&gt;' . strtolower($m[2]);&nbsp;</div></li><li><div>                                } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                                else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . '):LANG\([\'\&quot;]{0, 1}([A-Z\-]{2, 11})[\'\&quot;]{0, 1}\)$/', $t, $m)) {&nbsp;</div></li><li><div>                                    $tag = $m[1] . '&gt;&gt;LANG&gt;&gt;' . strtolower($m[2]);&nbsp;</div></li><li><div>                                } // mPDF 6  Special case for lang as attribute selector&nbsp;</div></li><li><div>                                else if (preg_match('/^(' . $this-&gt;mpdf-&gt;allowedCSStags . ')$/', $t)) {&nbsp;</div></li><li><div>                                    $tag = $t;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                if ($tag)&nbsp;</div></li><li><div>                                    $tmp[] = $tag;&nbsp;</div></li><li><div>                                else {&nbsp;</div></li><li><div>                                    break;&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if ($tag) {&nbsp;</div></li><li><div>                            $x = &$this-&gt;cascadeCSS;&nbsp;</div></li><li><div>                            foreach ($tmp AS $tp) {&nbsp;</div></li><li><div>                                $x = &$x[$tp];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            $x = $this-&gt;array_merge_recursive_unique($x, $classproperties);&nbsp;</div></li><li><div>                            $x['depth'] = $level;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($pageselectors) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;mirrorMargins = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $properties = array();&nbsp;</div></li><li><div>                $values = array();&nbsp;</div></li><li><div>                $classproperties = array();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } // end of if&nbsp;</div></li><li><div>        //Remove CSS (tags and content), if any&nbsp;</div></li><li><div>        $regexp = '/&lt;style.*?&gt;(.*?)&lt;\/style&gt;/si'; // it can be &lt;style&gt; or &lt;style type=&quot;txt/css&quot;&gt;&nbsp;</div></li><li><div>        $html = preg_replace($regexp, '', $html);&nbsp;</div></li><li><div>//print_r($this-&gt;CSS); exit;&nbsp;</div></li><li><div>//print_r($this-&gt;cascadeCSS); exit;&nbsp;</div></li><li><div>        return $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function readInlineCSS($html)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $html = htmlspecialchars_decode($html); // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>        // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>        // Characters &quot;(&quot; &quot;)&quot; and &quot;;&quot; in url() e.g. background-image, cause probems parsing the CSS string&nbsp;</div></li><li><div>        // URLencode ( and ), but change &quot;;&quot; to a code which can be converted back after parsing (so as not to confuse ;&nbsp;</div></li><li><div>        // with a segment delimiter in the URI)&nbsp;</div></li><li><div>        $tempmarker = '%ZZ';&nbsp;</div></li><li><div>        if (strpos($html, 'url(') !== false) {&nbsp;</div></li><li><div>            preg_match_all('/url\(\&quot;(.*?)\&quot;\)/', $html, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $html = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $html);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            preg_match_all('/url\(\'(.*?)\'\)/', $html, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $html = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $html);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            preg_match_all('/url\(([^\'\&quot;].*?[^\'\&quot;])\)/', $html, $m);&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $tmp = str_replace(array('(', ')', ';'), array('%28', '%29', $tempmarker), $m[1][$i]);&nbsp;</div></li><li><div>                $html = preg_replace('/' . preg_quote($m[0][$i], '/') . '/', 'url(\'' . $tmp . '\')', $html);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Fix incomplete CSS code&nbsp;</div></li><li><div>        $size = strlen($html) - 1;&nbsp;</div></li><li><div>        if (substr($html, $size, 1) != ';')&nbsp;</div></li><li><div>            $html .= ';';&nbsp;</div></li><li><div>        //Make CSS[Name-of-the-class] = array(key =&gt; value)&nbsp;</div></li><li><div>        $regexp = '|\\s*?(\\S+?):(.+?);|i';&nbsp;</div></li><li><div>        preg_match_all($regexp, $html, $styleinfo);&nbsp;</div></li><li><div>        $properties = $styleinfo[1];&nbsp;</div></li><li><div>        $values = $styleinfo[2];&nbsp;</div></li><li><div>        //Array-properties and Array-values must have the SAME SIZE!&nbsp;</div></li><li><div>        $classproperties = array();&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; count($properties); $i++) {&nbsp;</div></li><li><div>            // Ignores -webkit-gradient so doesn't override -moz-&nbsp;</div></li><li><div>            if ((strtoupper($properties[$i]) == 'BACKGROUND-IMAGE' || strtoupper($properties[$i]) == 'BACKGROUND') && preg_match('/-webkit-gradient/i', $values[$i])) {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $values[$i] = str_replace($tempmarker, ';', $values[$i]); // mPDF 5.7.4 URLs&nbsp;</div></li><li><div>            $classproperties[strtoupper($properties[$i])] = trim($values[$i]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $this-&gt;fixCSS($classproperties);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _fix_borderStr($bd)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        preg_match_all(&quot;/\((.*?)\)/&quot;, $bd, $m);&nbsp;</div></li><li><div>        if (count($m[1])) {&nbsp;</div></li><li><div>            for ($i = 0; $i &lt; count($m[1]); $i++) {&nbsp;</div></li><li><div>                $sub = preg_replace(&quot;/ /&quot;, &quot;&quot;, $m[1][$i]);&nbsp;</div></li><li><div>                $bd = preg_replace('/' . preg_quote($m[1][$i], '/') . '/si', $sub, $bd);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $prop = preg_split('/\s+/', trim($bd));&nbsp;</div></li><li><div>        $w = 'medium';&nbsp;</div></li><li><div>        $c = '#000000';&nbsp;</div></li><li><div>        $s = 'none';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (count($prop) == 1) {&nbsp;</div></li><li><div>            // solid&nbsp;</div></li><li><div>            if (in_array($prop[0], $this-&gt;mpdf-&gt;borderstyles) || $prop[0] == 'none' || $prop[0] == 'hidden') {&nbsp;</div></li><li><div>                $s = $prop[0];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // #000000&nbsp;</div></li><li><div>            else if (is_array($this-&gt;mpdf-&gt;ConvertColor($prop[0]))) {&nbsp;</div></li><li><div>                $c = $prop[0];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // 1px&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $w = $prop[0];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else if (count($prop) == 2) {&nbsp;</div></li><li><div>            // 1px solid&nbsp;</div></li><li><div>            if (in_array($prop[1], $this-&gt;mpdf-&gt;borderstyles) || $prop[1] == 'none' || $prop[1] == 'hidden') {&nbsp;</div></li><li><div>                $w = $prop[0];&nbsp;</div></li><li><div>                $s = $prop[1];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // solid #000000&nbsp;</div></li><li><div>            else if (in_array($prop[0], $this-&gt;mpdf-&gt;borderstyles) || $prop[0] == 'none' || $prop[0] == 'hidden') {&nbsp;</div></li><li><div>                $s = $prop[0];&nbsp;</div></li><li><div>                $c = $prop[1];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // 1px #000000&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $w = $prop[0];&nbsp;</div></li><li><div>                $c = $prop[1];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else if (count($prop) == 3) {&nbsp;</div></li><li><div>            // Change #000000 1px solid to 1px solid #000000 (proper)&nbsp;</div></li><li><div>            if (substr($prop[0], 0, 1) == '#') {&nbsp;</div></li><li><div>                $c = $prop[0];&nbsp;</div></li><li><div>                $w = $prop[1];&nbsp;</div></li><li><div>                $s = $prop[2];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // Change solid #000000 1px to 1px solid #000000 (proper)&nbsp;</div></li><li><div>            else if (substr($prop[0], 1, 1) == '#') {&nbsp;</div></li><li><div>                $s = $prop[0];&nbsp;</div></li><li><div>                $c = $prop[1];&nbsp;</div></li><li><div>                $w = $prop[2];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // Change solid 1px #000000 to 1px solid #000000 (proper)&nbsp;</div></li><li><div>            else if (in_array($prop[0], $this-&gt;mpdf-&gt;borderstyles) || $prop[0] == 'none' || $prop[0] == 'hidden') {&nbsp;</div></li><li><div>                $s = $prop[0];&nbsp;</div></li><li><div>                $w = $prop[1];&nbsp;</div></li><li><div>                $c = $prop[2];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $w = $prop[0];&nbsp;</div></li><li><div>                $s = $prop[1];&nbsp;</div></li><li><div>                $c = $prop[2];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            return '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $s = strtolower($s);&nbsp;</div></li><li><div>        return $w . ' ' . $s . ' ' . $c;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function fixCSS($prop)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (!is_array($prop) || (count($prop) == 0))&nbsp;</div></li><li><div>            return array();&nbsp;</div></li><li><div>        $newprop = array();&nbsp;</div></li><li><div>        foreach ($prop AS $k =&gt; $v) {&nbsp;</div></li><li><div>            if ($k != 'BACKGROUND-IMAGE' && $k != 'BACKGROUND' && $k != 'ODD-HEADER-NAME' && $k != 'EVEN-HEADER-NAME' && $k != 'ODD-FOOTER-NAME' && $k != 'EVEN-FOOTER-NAME' && $k != 'HEADER' && $k != 'FOOTER') {&nbsp;</div></li><li><div>                $v = strtolower($v);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($k == 'FONT') {&nbsp;</div></li><li><div>                $s = trim($v);&nbsp;</div></li><li><div>                preg_match_all('/\&quot;(.*?)\&quot;/', $s, $ff);&nbsp;</div></li><li><div>                if (count($ff[1])) {&nbsp;</div></li><li><div>                    foreach ($ff[1] AS $ffp) {&nbsp;</div></li><li><div>                        $w = preg_split('/\s+/', $ffp);&nbsp;</div></li><li><div>                        $s = preg_replace('/\&quot;' . $ffp . '\&quot;/', $w[0], $s);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                preg_match_all('/\'(.*?)\'/', $s, $ff);&nbsp;</div></li><li><div>                if (count($ff[1])) {&nbsp;</div></li><li><div>                    foreach ($ff[1] AS $ffp) {&nbsp;</div></li><li><div>                        $w = preg_split('/\s+/', $ffp);&nbsp;</div></li><li><div>                        $s = preg_replace('/\'' . $ffp . '\'/', $w[0], $s);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $s = preg_replace('/\s*, \s*/', ', ', $s);&nbsp;</div></li><li><div>                $bits = preg_split('/\s+/', $s);&nbsp;</div></li><li><div>                if (count($bits) &gt; 1) {&nbsp;</div></li><li><div>                    $k = 'FONT-FAMILY';&nbsp;</div></li><li><div>                    $v = $bits[(count($bits) - 1)];&nbsp;</div></li><li><div>                    $fs = $bits[(count($bits) - 2)];&nbsp;</div></li><li><div>                    if (preg_match('/(.*?)\/(.*)/', $fs, $fsp)) {&nbsp;</div></li><li><div>                        $newprop['FONT-SIZE'] = $fsp[1];&nbsp;</div></li><li><div>                        $newprop['LINE-HEIGHT'] = $fsp[2];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newprop['FONT-SIZE'] = $fs;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/(italic|oblique)/i', $s)) {&nbsp;</div></li><li><div>                        $newprop['FONT-STYLE'] = 'italic';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newprop['FONT-STYLE'] = 'normal';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/bold/i', $s)) {&nbsp;</div></li><li><div>                        $newprop['FONT-WEIGHT'] = 'bold';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newprop['FONT-WEIGHT'] = 'normal';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/small-caps/i', $s)) {&nbsp;</div></li><li><div>                        $newprop['TEXT-TRANSFORM'] = 'uppercase';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'FONT-FAMILY') {&nbsp;</div></li><li><div>                $aux_fontlist = explode(&quot;, &quot;, $v);&nbsp;</div></li><li><div>                $found = 0;&nbsp;</div></li><li><div>                foreach ($aux_fontlist AS $f) {&nbsp;</div></li><li><div>                    $fonttype = trim($f);&nbsp;</div></li><li><div>                    $fonttype = preg_replace('/[&quot;\']*(.*?)[&quot;\']*/', '\\1', $fonttype);&nbsp;</div></li><li><div>                    $fonttype = preg_replace('/ /', '', $fonttype);&nbsp;</div></li><li><div>                    $v = strtolower(trim($fonttype));&nbsp;</div></li><li><div>                    if (isset($this-&gt;mpdf-&gt;fonttrans[$v]) && $this-&gt;mpdf-&gt;fonttrans[$v]) {&nbsp;</div></li><li><div>                        $v = $this-&gt;mpdf-&gt;fonttrans[$v];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ((!$this-&gt;mpdf-&gt;onlyCoreFonts && in_array($v, $this-&gt;mpdf-&gt;available_unifonts)) ||&nbsp;</div></li><li><div>                        in_array($v, array('ccourier', 'ctimes', 'chelvetica')) ||&nbsp;</div></li><li><div>                        ($this-&gt;mpdf-&gt;onlyCoreFonts && in_array($v, array('courier', 'times', 'helvetica', 'arial'))) ||&nbsp;</div></li><li><div>                        in_array($v, array('sjis', 'uhc', 'big5', 'gb'))) {&nbsp;</div></li><li><div>                        $newprop[$k] = $v;&nbsp;</div></li><li><div>                        $found = 1;&nbsp;</div></li><li><div>                        break;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (!$found) {&nbsp;</div></li><li><div>                    foreach ($aux_fontlist AS $f) {&nbsp;</div></li><li><div>                        $fonttype = trim($f);&nbsp;</div></li><li><div>                        $fonttype = preg_replace('/[&quot;\']*(.*?)[&quot;\']*/', '\\1', $fonttype);&nbsp;</div></li><li><div>                        $fonttype = preg_replace('/ /', '', $fonttype);&nbsp;</div></li><li><div>                        $v = strtolower(trim($fonttype));&nbsp;</div></li><li><div>                        if (isset($this-&gt;mpdf-&gt;fonttrans[$v]) && $this-&gt;mpdf-&gt;fonttrans[$v]) {&nbsp;</div></li><li><div>                            $v = $this-&gt;mpdf-&gt;fonttrans[$v];&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (in_array($v, $this-&gt;mpdf-&gt;sans_fonts) || in_array($v, $this-&gt;mpdf-&gt;serif_fonts) || in_array($v, $this-&gt;mpdf-&gt;mono_fonts)) {&nbsp;</div></li><li><div>                            $newprop[$k] = $v;&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 5.7.1&nbsp;</div></li><li><div>            else if ($k == 'FONT-VARIANT') {&nbsp;</div></li><li><div>                if (preg_match('/(normal|none)/', $v, $m)) { // mPDF 6&nbsp;</div></li><li><div>                    $newprop['FONT-VARIANT-LIGATURES'] = $m[1];&nbsp;</div></li><li><div>                    $newprop['FONT-VARIANT-CAPS'] = $m[1];&nbsp;</div></li><li><div>                    $newprop['FONT-VARIANT-NUMERIC'] = $m[1];&nbsp;</div></li><li><div>                    $newprop['FONT-VARIANT-ALTERNATES'] = $m[1];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    if (preg_match_all('/(no-common-ligatures|\bcommon-ligatures|no-discretionary-ligatures|\bdiscretionary-ligatures|no-historical-ligatures|\bhistorical-ligatures|no-contextual|\bcontextual)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['FONT-VARIANT-LIGATURES'] = implode(' ', $m[1]);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/(all-small-caps|\bsmall-caps|all-petite-caps|\bpetite-caps|unicase|titling-caps)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['FONT-VARIANT-CAPS'] = $m[1];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match_all('/(lining-nums|oldstyle-nums|proportional-nums|tabular-nums|diagonal-fractions|stacked-fractions)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['FONT-VARIANT-NUMERIC'] = implode(' ', $m[1]);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/(historical-forms)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['FONT-VARIANT-ALTERNATES'] = $m[1];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'MARGIN') {&nbsp;</div></li><li><div>                $tmp = $this-&gt;expand24($v);&nbsp;</div></li><li><div>                $newprop['MARGIN-TOP'] = $tmp['T'];&nbsp;</div></li><li><div>                $newprop['MARGIN-RIGHT'] = $tmp['R'];&nbsp;</div></li><li><div>                $newprop['MARGIN-BOTTOM'] = $tmp['B'];&nbsp;</div></li><li><div>                $newprop['MARGIN-LEFT'] = $tmp['L'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- BORDER-RADIUS -- */ else if ($k == 'BORDER-RADIUS' || $k == 'BORDER-TOP-LEFT-RADIUS' || $k == 'BORDER-TOP-RIGHT-RADIUS' || $k == 'BORDER-BOTTOM-LEFT-RADIUS' || $k == 'BORDER-BOTTOM-RIGHT-RADIUS') {&nbsp;</div></li><li><div>                $tmp = $this-&gt;border_radius_expand($v, $k);&nbsp;</div></li><li><div>                if (isset($tmp['TL-H']))&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-LEFT-RADIUS-H'] = $tmp['TL-H'];&nbsp;</div></li><li><div>                if (isset($tmp['TL-V']))&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-LEFT-RADIUS-V'] = $tmp['TL-V'];&nbsp;</div></li><li><div>                if (isset($tmp['TR-H']))&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-RIGHT-RADIUS-H'] = $tmp['TR-H'];&nbsp;</div></li><li><div>                if (isset($tmp['TR-V']))&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-RIGHT-RADIUS-V'] = $tmp['TR-V'];&nbsp;</div></li><li><div>                if (isset($tmp['BL-H']))&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-LEFT-RADIUS-H'] = $tmp['BL-H'];&nbsp;</div></li><li><div>                if (isset($tmp['BL-V']))&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-LEFT-RADIUS-V'] = $tmp['BL-V'];&nbsp;</div></li><li><div>                if (isset($tmp['BR-H']))&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-RIGHT-RADIUS-H'] = $tmp['BR-H'];&nbsp;</div></li><li><div>                if (isset($tmp['BR-V']))&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-RIGHT-RADIUS-V'] = $tmp['BR-V'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END BORDER-RADIUS -- */&nbsp;</div></li><li><div>            else if ($k == 'PADDING') {&nbsp;</div></li><li><div>                $tmp = $this-&gt;expand24($v);&nbsp;</div></li><li><div>                $newprop['PADDING-TOP'] = $tmp['T'];&nbsp;</div></li><li><div>                $newprop['PADDING-RIGHT'] = $tmp['R'];&nbsp;</div></li><li><div>                $newprop['PADDING-BOTTOM'] = $tmp['B'];&nbsp;</div></li><li><div>                $newprop['PADDING-LEFT'] = $tmp['L'];&nbsp;</div></li><li><div>            } else if ($k == 'BORDER') {&nbsp;</div></li><li><div>                if ($v == '1') {&nbsp;</div></li><li><div>                    $v = '1px solid #000000';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $v = $this-&gt;_fix_borderStr($v);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $newprop['BORDER-TOP'] = $v;&nbsp;</div></li><li><div>                $newprop['BORDER-RIGHT'] = $v;&nbsp;</div></li><li><div>                $newprop['BORDER-BOTTOM'] = $v;&nbsp;</div></li><li><div>                $newprop['BORDER-LEFT'] = $v;&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-TOP') {&nbsp;</div></li><li><div>                $newprop['BORDER-TOP'] = $this-&gt;_fix_borderStr($v);&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-RIGHT') {&nbsp;</div></li><li><div>                $newprop['BORDER-RIGHT'] = $this-&gt;_fix_borderStr($v);&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-BOTTOM') {&nbsp;</div></li><li><div>                $newprop['BORDER-BOTTOM'] = $this-&gt;_fix_borderStr($v);&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-LEFT') {&nbsp;</div></li><li><div>                $newprop['BORDER-LEFT'] = $this-&gt;_fix_borderStr($v);&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-STYLE') {&nbsp;</div></li><li><div>                $e = $this-&gt;expand24($v);&nbsp;</div></li><li><div>                if (!empty($e)) {&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-STYLE'] = $e['T'];&nbsp;</div></li><li><div>                    $newprop['BORDER-RIGHT-STYLE'] = $e['R'];&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-STYLE'] = $e['B'];&nbsp;</div></li><li><div>                    $newprop['BORDER-LEFT-STYLE'] = $e['L'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-WIDTH') {&nbsp;</div></li><li><div>                $e = $this-&gt;expand24($v);&nbsp;</div></li><li><div>                if (!empty($e)) {&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-WIDTH'] = $e['T'];&nbsp;</div></li><li><div>                    $newprop['BORDER-RIGHT-WIDTH'] = $e['R'];&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-WIDTH'] = $e['B'];&nbsp;</div></li><li><div>                    $newprop['BORDER-LEFT-WIDTH'] = $e['L'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-COLOR') {&nbsp;</div></li><li><div>                $e = $this-&gt;expand24($v);&nbsp;</div></li><li><div>                if (!empty($e)) {&nbsp;</div></li><li><div>                    $newprop['BORDER-TOP-COLOR'] = $e['T'];&nbsp;</div></li><li><div>                    $newprop['BORDER-RIGHT-COLOR'] = $e['R'];&nbsp;</div></li><li><div>                    $newprop['BORDER-BOTTOM-COLOR'] = $e['B'];&nbsp;</div></li><li><div>                    $newprop['BORDER-LEFT-COLOR'] = $e['L'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BORDER-SPACING') {&nbsp;</div></li><li><div>                $prop = preg_split('/\s+/', trim($v));&nbsp;</div></li><li><div>                if (count($prop) == 1) {&nbsp;</div></li><li><div>                    $newprop['BORDER-SPACING-H'] = $prop[0];&nbsp;</div></li><li><div>                    $newprop['BORDER-SPACING-V'] = $prop[0];&nbsp;</div></li><li><div>                } else if (count($prop) == 2) {&nbsp;</div></li><li><div>                    $newprop['BORDER-SPACING-H'] = $prop[0];&nbsp;</div></li><li><div>                    $newprop['BORDER-SPACING-V'] = $prop[1];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'TEXT-OUTLINE') { // mPDF 5.6.07&nbsp;</div></li><li><div>                $prop = preg_split('/\s+/', trim($v));&nbsp;</div></li><li><div>                if (trim(strtolower($v)) == 'none') {&nbsp;</div></li><li><div>                    $newprop['TEXT-OUTLINE'] = 'none';&nbsp;</div></li><li><div>                } else if (count($prop) == 2) {&nbsp;</div></li><li><div>                    $newprop['TEXT-OUTLINE-WIDTH'] = $prop[0];&nbsp;</div></li><li><div>                    $newprop['TEXT-OUTLINE-COLOR'] = $prop[1];&nbsp;</div></li><li><div>                } else if (count($prop) == 3) {&nbsp;</div></li><li><div>                    $newprop['TEXT-OUTLINE-WIDTH'] = $prop[0];&nbsp;</div></li><li><div>                    $newprop['TEXT-OUTLINE-COLOR'] = $prop[2];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'SIZE') {&nbsp;</div></li><li><div>                $prop = preg_split('/\s+/', trim($v));&nbsp;</div></li><li><div>                if (preg_match('/(auto|portrait|landscape)/', $prop[0])) {&nbsp;</div></li><li><div>                    $newprop['SIZE'] = strtoupper($prop[0]);&nbsp;</div></li><li><div>                } else if (count($prop) == 1) {&nbsp;</div></li><li><div>                    $newprop['SIZE']['W'] = $this-&gt;mpdf-&gt;ConvertSize($prop[0]);&nbsp;</div></li><li><div>                    $newprop['SIZE']['H'] = $this-&gt;mpdf-&gt;ConvertSize($prop[0]);&nbsp;</div></li><li><div>                } else if (count($prop) == 2) {&nbsp;</div></li><li><div>                    $newprop['SIZE']['W'] = $this-&gt;mpdf-&gt;ConvertSize($prop[0]);&nbsp;</div></li><li><div>                    $newprop['SIZE']['H'] = $this-&gt;mpdf-&gt;ConvertSize($prop[1]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'SHEET-SIZE') {&nbsp;</div></li><li><div>                $prop = preg_split('/\s+/', trim($v));&nbsp;</div></li><li><div>                if (count($prop) == 2) {&nbsp;</div></li><li><div>                    $newprop['SHEET-SIZE'] = array($this-&gt;mpdf-&gt;ConvertSize($prop[0]), $this-&gt;mpdf-&gt;ConvertSize($prop[1]));&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    if (preg_match('/([0-9a-zA-Z]*)-L/i', $v, $m)) { // e.g. A4-L = A$ landscape&nbsp;</div></li><li><div>                        $ft = $this-&gt;mpdf-&gt;_getPageFormat($m[1]);&nbsp;</div></li><li><div>                        $format = array($ft[1], $ft[0]);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $format = $this-&gt;mpdf-&gt;_getPageFormat($v);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($format) {&nbsp;</div></li><li><div>                        $newprop['SHEET-SIZE'] = array($format[0] / _MPDFK, $format[1] / _MPDFK);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BACKGROUND') {&nbsp;</div></li><li><div>                $bg = $this-&gt;parseCSSbackground($v);&nbsp;</div></li><li><div>                if ($bg['c']) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-COLOR'] = $bg['c'];&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-COLOR'] = 'transparent';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>                if ($bg['i']) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-IMAGE'] = $bg['i'];&nbsp;</div></li><li><div>                    if ($bg['r']) {&nbsp;</div></li><li><div>                        $newprop['BACKGROUND-REPEAT'] = $bg['r'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($bg['p']) {&nbsp;</div></li><li><div>                        $newprop['BACKGROUND-POSITION'] = $bg['p'];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-IMAGE'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- BACKGROUNDS -- */ else if ($k == 'BACKGROUND-IMAGE') {&nbsp;</div></li><li><div>                if (preg_match('/(-moz-)*(repeating-)*(linear|radial)-gradient\(.*\)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-IMAGE'] = $m[0];&nbsp;</div></li><li><div>                    continue;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (preg_match('/url\([\'\&quot;]{0, 1}(.*?)[\'\&quot;]{0, 1}\)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-IMAGE'] = $m[1];&nbsp;</div></li><li><div>                } else if (strtolower($v) == 'none') {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-IMAGE'] = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BACKGROUND-REPEAT') {&nbsp;</div></li><li><div>                if (preg_match('/(repeat-x|repeat-y|no-repeat|repeat)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-REPEAT'] = strtolower($m[1]);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'BACKGROUND-POSITION') {&nbsp;</div></li><li><div>                $s = $v;&nbsp;</div></li><li><div>                $bits = preg_split('/\s+/', trim($s));&nbsp;</div></li><li><div>                // These should be Position x1 or x2&nbsp;</div></li><li><div>                if (count($bits) == 1) {&nbsp;</div></li><li><div>                    if (preg_match('/bottom/', $bits[0])) {&nbsp;</div></li><li><div>                        $bg['p'] = '50% 100%';&nbsp;</div></li><li><div>                    } else if (preg_match('/top/', $bits[0])) {&nbsp;</div></li><li><div>                        $bg['p'] = '50% 0%';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[0] . ' 50%';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else if (count($bits) == 2) {&nbsp;</div></li><li><div>                    // Can be either right center or center right&nbsp;</div></li><li><div>                    if (preg_match('/(top|bottom)/', $bits[0]) || preg_match('/(left|right)/', $bits[1])) {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[1] . ' ' . $bits[0];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[0] . ' ' . $bits[1];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bg['p']) {&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(left|top)/', '0%', $bg['p']);&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(right|bottom)/', '100%', $bg['p']);&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(center)/', '50%', $bg['p']);&nbsp;</div></li><li><div>                    if (!preg_match('/[\-]{0, 1}\d+(in|cm|mm|pt|pc|em|ex|px|%)* [\-]{0, 1}\d+(in|cm|mm|pt|pc|em|ex|px|%)*/', $bg['p'])) {&nbsp;</div></li><li><div>                        $bg['p'] = false;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bg['p']) {&nbsp;</div></li><li><div>                    $newprop['BACKGROUND-POSITION'] = $bg['p'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END BACKGROUNDS -- */ else if ($k == 'IMAGE-ORIENTATION') {&nbsp;</div></li><li><div>                if (preg_match('/([\-]*[0-9\.]+)(deg|grad|rad)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $angle = $m[1] + 0;&nbsp;</div></li><li><div>                    if (strtolower($m[2]) == 'deg') {&nbsp;</div></li><li><div>                        $angle = $angle;&nbsp;</div></li><li><div>                    } else if (strtolower($m[2]) == 'grad') {&nbsp;</div></li><li><div>                        $angle *= (360 / 400);&nbsp;</div></li><li><div>                    } else if (strtolower($m[2]) == 'rad') {&nbsp;</div></li><li><div>                        $angle = rad2deg($angle);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    while ($angle &lt; 0) {&nbsp;</div></li><li><div>                        $angle += 360;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    $angle = ($angle % 360);&nbsp;</div></li><li><div>                    $angle /= 90;&nbsp;</div></li><li><div>                    $angle = round($angle) * 90;&nbsp;</div></li><li><div>                    $newprop['IMAGE-ORIENTATION'] = $angle;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($k == 'TEXT-ALIGN') {&nbsp;</div></li><li><div>                if (preg_match('/[&quot;\'](.) {1}[&quot;\']/i', $v, $m)) {&nbsp;</div></li><li><div>                    $d = array_search($m[1], $this-&gt;mpdf-&gt;decimal_align);&nbsp;</div></li><li><div>                    if ($d !== false) {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] = $d;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/(center|left|right)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] .= strtoupper(substr($m[1], 0, 1));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] .= 'R';&nbsp;</div></li><li><div>                    } // default = R&nbsp;</div></li><li><div>                } else if (preg_match('/[&quot;\'](\\\[a-fA-F0-9]{1, 6})[&quot;\']/i', $v, $m)) {&nbsp;</div></li><li><div>                    $utf8 = codeHex2utf(substr($m[1], 1, 6));&nbsp;</div></li><li><div>                    $d = array_search($utf8, $this-&gt;mpdf-&gt;decimal_align);&nbsp;</div></li><li><div>                    if ($d !== false) {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] = $d;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (preg_match('/(center|left|right)/i', $v, $m)) {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] .= strtoupper(substr($m[1], 0, 1));&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $newprop['TEXT-ALIGN'] .= 'R';&nbsp;</div></li><li><div>                    } // default = R&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $newprop[$k] = $v;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mpDF 6  Lists&nbsp;</div></li><li><div>            else if ($k == 'LIST-STYLE') {&nbsp;</div></li><li><div>                if (preg_match('/none/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-TYPE'] = 'none';&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-IMAGE'] = 'none';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (preg_match('/(lower-roman|upper-roman|lower-latin|lower-alpha|upper-latin|upper-alpha|decimal|disc|circle|square|arabic-indic|bengali|devanagari|gujarati|gurmukhi|kannada|malayalam|oriya|persian|tamil|telugu|thai|urdu|cambodian|khmer|lao|cjk-decimal|hebrew)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-TYPE'] = strtolower(trim($m[1]));&nbsp;</div></li><li><div>                } else if (preg_match('/U\+([a-fA-F0-9]+)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-TYPE'] = strtolower(trim($m[1]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (preg_match('/url\([\'\&quot;]{0, 1}(.*?)[\'\&quot;]{0, 1}\)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-IMAGE'] = strtolower(trim($m[1]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (preg_match('/(inside|outside)/i', $v, $m)) {&nbsp;</div></li><li><div>                    $newprop['LIST-STYLE-POSITION'] = strtolower(trim($m[1]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $newprop[$k] = $v;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $newprop;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function setCSSboxshadow($v)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $sh = array();&nbsp;</div></li><li><div>        $c = preg_match_all('/(rgba|rgb|device-cmyka|cmyka|device-cmyk|cmyk|hsla|hsl)\(.*?\)/', $v, $x); // mPDF 5.6.05&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; $c; $i++) {&nbsp;</div></li><li><div>            $col = preg_replace('/, /', '*', $x[0][$i]);&nbsp;</div></li><li><div>            $v = preg_replace('/' . preg_quote($x[0][$i], '/') . '/', $col, $v);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $ss = explode(', ', $v);&nbsp;</div></li><li><div>        foreach ($ss AS $s) {&nbsp;</div></li><li><div>            $new = array('inset' =&gt; false, 'blur' =&gt; 0, 'spread' =&gt; 0);&nbsp;</div></li><li><div>            if (preg_match('/inset/i', $s)) {&nbsp;</div></li><li><div>                $new['inset'] = true;&nbsp;</div></li><li><div>                $s = preg_replace('/\s*inset\s*/', '', $s);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $p = explode(' ', trim($s));&nbsp;</div></li><li><div>            if (isset($p[0])) {&nbsp;</div></li><li><div>                $new['x'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[0]), $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($p[1])) {&nbsp;</div></li><li><div>                $new['y'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[1]), $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($p[2])) {&nbsp;</div></li><li><div>                if (preg_match('/^\s*[\.\-0-9]/', $p[2])) {&nbsp;</div></li><li><div>                    $new['blur'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[2]), $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $new['col'] = $this-&gt;mpdf-&gt;ConvertColor(preg_replace('/\*/', ', ', $p[2]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($p[3])) {&nbsp;</div></li><li><div>                    if (preg_match('/^\s*[\.\-0-9]/', $p[3])) {&nbsp;</div></li><li><div>                        $new['spread'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[3]), $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $new['col'] = $this-&gt;mpdf-&gt;ConvertColor(preg_replace('/\*/', ', ', $p[3]));&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if (isset($p[4])) {&nbsp;</div></li><li><div>                        $new['col'] = $this-&gt;mpdf-&gt;ConvertColor(preg_replace('/\*/', ', ', $p[4]));&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (!$new['col']) {&nbsp;</div></li><li><div>                $new['col'] = $this-&gt;mpdf-&gt;ConvertColor('#888888');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($new['y'])) {&nbsp;</div></li><li><div>                array_unshift($sh, $new);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $sh;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function setCSStextshadow($v)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $sh = array();&nbsp;</div></li><li><div>        $c = preg_match_all('/(rgba|rgb|device-cmyka|cmyka|device-cmyk|cmyk|hsla|hsl)\(.*?\)/', $v, $x); // mPDF 5.6.05&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; $c; $i++) {&nbsp;</div></li><li><div>            $col = preg_replace('/, /', '*', $x[0][$i]);&nbsp;</div></li><li><div>            $v = preg_replace('/' . preg_quote($x[0][$i], '/') . '/', $col, $v);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $ss = explode(', ', $v);&nbsp;</div></li><li><div>        foreach ($ss AS $s) {&nbsp;</div></li><li><div>            $new = array('blur' =&gt; 0);&nbsp;</div></li><li><div>            $p = explode(' ', trim($s));&nbsp;</div></li><li><div>            if (isset($p[0])) {&nbsp;</div></li><li><div>                $new['x'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[0]), $this-&gt;mpdf-&gt;FontSize, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($p[1])) {&nbsp;</div></li><li><div>                $new['y'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[1]), $this-&gt;mpdf-&gt;FontSize, $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($p[2])) {&nbsp;</div></li><li><div>                if (preg_match('/^\s*[\.\-0-9]/', $p[2])) {&nbsp;</div></li><li><div>                    $new['blur'] = $this-&gt;mpdf-&gt;ConvertSize(trim($p[2]), $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['inner_width'], $this-&gt;mpdf-&gt;FontSize, false);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $new['col'] = $this-&gt;mpdf-&gt;ConvertColor(preg_replace('/\*/', ', ', $p[2]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if (isset($p[3])) {&nbsp;</div></li><li><div>                    $new['col'] = $this-&gt;mpdf-&gt;ConvertColor(preg_replace('/\*/', ', ', $p[3]));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (!isset($new['col']) || !$new['col']) {&nbsp;</div></li><li><div>                $new['col'] = $this-&gt;mpdf-&gt;ConvertColor('#888888');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($new['y'])) {&nbsp;</div></li><li><div>                array_unshift($sh, $new);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $sh;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function parseCSSbackground($s)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $bg = array('c' =&gt; false, 'i' =&gt; false, 'r' =&gt; false, 'p' =&gt; false, );&nbsp;</div></li><li><div>        /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>        if (preg_match('/(-moz-)*(repeating-)*(linear|radial)-gradient\(.*\)/i', $s, $m)) {&nbsp;</div></li><li><div>            $bg['i'] = $m[0];&nbsp;</div></li><li><div>        } else&nbsp;</div></li><li><div>        /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>        if (preg_match('/url\(/i', $s)) {&nbsp;</div></li><li><div>            // If color, set and strip it off&nbsp;</div></li><li><div>            // mPDF 5.6.05&nbsp;</div></li><li><div>            if (preg_match('/^\s*(#[0-9a-fA-F]{3, 6}|(rgba|rgb|device-cmyka|cmyka|device-cmyk|cmyk|hsla|hsl|spot)\(.*?\)|[a-zA-Z]{3, })\s+(url\(.*)/i', $s, $m)) {&nbsp;</div></li><li><div>                $bg['c'] = strtolower($m[1]);&nbsp;</div></li><li><div>                $s = $m[3];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- BACKGROUNDS -- */&nbsp;</div></li><li><div>            if (preg_match('/url\([\'\&quot;]{0, 1}(.*?)[\'\&quot;]{0, 1}\)\s*(.*)/i', $s, $m)) {&nbsp;</div></li><li><div>                $bg['i'] = $m[1];&nbsp;</div></li><li><div>                $s = strtolower($m[2]);&nbsp;</div></li><li><div>                if (preg_match('/(repeat-x|repeat-y|no-repeat|repeat)/', $s, $m)) {&nbsp;</div></li><li><div>                    $bg['r'] = $m[1];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // Remove repeat, attachment (discarded) and also any inherit&nbsp;</div></li><li><div>                $s = preg_replace('/(repeat-x|repeat-y|no-repeat|repeat|scroll|fixed|inherit)/', '', $s);&nbsp;</div></li><li><div>                $bits = preg_split('/\s+/', trim($s));&nbsp;</div></li><li><div>                // These should be Position x1 or x2&nbsp;</div></li><li><div>                if (count($bits) == 1) {&nbsp;</div></li><li><div>                    if (preg_match('/bottom/', $bits[0])) {&nbsp;</div></li><li><div>                        $bg['p'] = '50% 100%';&nbsp;</div></li><li><div>                    } else if (preg_match('/top/', $bits[0])) {&nbsp;</div></li><li><div>                        $bg['p'] = '50% 0%';&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[0] . ' 50%';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else if (count($bits) == 2) {&nbsp;</div></li><li><div>                    // Can be either right center or center right&nbsp;</div></li><li><div>                    if (preg_match('/(top|bottom)/', $bits[0]) || preg_match('/(left|right)/', $bits[1])) {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[1] . ' ' . $bits[0];&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $bg['p'] = $bits[0] . ' ' . $bits[1];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bg['p']) {&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(left|top)/', '0%', $bg['p']);&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(right|bottom)/', '100%', $bg['p']);&nbsp;</div></li><li><div>                    $bg['p'] = preg_replace('/(center)/', '50%', $bg['p']);&nbsp;</div></li><li><div>                    if (!preg_match('/[\-]{0, 1}\d+(in|cm|mm|pt|pc|em|ex|px|%)* [\-]{0, 1}\d+(in|cm|mm|pt|pc|em|ex|px|%)*/', $bg['p'])) {&nbsp;</div></li><li><div>                        $bg['p'] = false;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            /** -- END BACKGROUNDS -- */&nbsp;</div></li><li><div>        } else if (preg_match('/^\s*(#[0-9a-fA-F]{3, 6}|(rgba|rgb|device-cmyka|cmyka|device-cmyk|cmyk|hsla|hsl|spot)\(.*?\)|[a-zA-Z]{3, })/i', $s, $m)) {&nbsp;</div></li><li><div>            $bg['c'] = strtolower($m[1]);&nbsp;</div></li><li><div>        } // mPDF 5.6.05&nbsp;</div></li><li><div>        return ($bg);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function expand24($mp)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $prop = preg_split('/\s+/', trim($mp));&nbsp;</div></li><li><div>        if (count($prop) == 1) {&nbsp;</div></li><li><div>            return array('T' =&gt; $prop[0], 'R' =&gt; $prop[0], 'B' =&gt; $prop[0], 'L' =&gt; $prop[0]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (count($prop) == 2) {&nbsp;</div></li><li><div>            return array('T' =&gt; $prop[0], 'R' =&gt; $prop[1], 'B' =&gt; $prop[0], 'L' =&gt; $prop[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (count($prop) == 3) {&nbsp;</div></li><li><div>            return array('T' =&gt; $prop[0], 'R' =&gt; $prop[1], 'B' =&gt; $prop[2], 'L' =&gt; $prop[1]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (count($prop) == 4) {&nbsp;</div></li><li><div>            return array('T' =&gt; $prop[0], 'R' =&gt; $prop[1], 'B' =&gt; $prop[2], 'L' =&gt; $prop[3]);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return array();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /** -- BORDER-RADIUS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function border_radius_expand($val, $k)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $b = array();&nbsp;</div></li><li><div>        if ($k == 'BORDER-RADIUS') {&nbsp;</div></li><li><div>            $hv = explode('/', trim($val));&nbsp;</div></li><li><div>            $prop = preg_split('/\s+/', trim($hv[0]));&nbsp;</div></li><li><div>            if (count($prop) == 1) {&nbsp;</div></li><li><div>                $b['TL-H'] = $b['TR-H'] = $b['BR-H'] = $b['BL-H'] = $prop[0];&nbsp;</div></li><li><div>            } else if (count($prop) == 2) {&nbsp;</div></li><li><div>                $b['TL-H'] = $b['BR-H'] = $prop[0];&nbsp;</div></li><li><div>                $b['TR-H'] = $b['BL-H'] = $prop[1];&nbsp;</div></li><li><div>            } else if (count($prop) == 3) {&nbsp;</div></li><li><div>                $b['TL-H'] = $prop[0];&nbsp;</div></li><li><div>                $b['TR-H'] = $b['BL-H'] = $prop[1];&nbsp;</div></li><li><div>                $b['BR-H'] = $prop[2];&nbsp;</div></li><li><div>            } else if (count($prop) == 4) {&nbsp;</div></li><li><div>                $b['TL-H'] = $prop[0];&nbsp;</div></li><li><div>                $b['TR-H'] = $prop[1];&nbsp;</div></li><li><div>                $b['BR-H'] = $prop[2];&nbsp;</div></li><li><div>                $b['BL-H'] = $prop[3];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (count($hv) == 2) {&nbsp;</div></li><li><div>                $prop = preg_split('/\s+/', trim($hv[1]));&nbsp;</div></li><li><div>                if (count($prop) == 1) {&nbsp;</div></li><li><div>                    $b['TL-V'] = $b['TR-V'] = $b['BR-V'] = $b['BL-V'] = $prop[0];&nbsp;</div></li><li><div>                } else if (count($prop) == 2) {&nbsp;</div></li><li><div>                    $b['TL-V'] = $b['BR-V'] = $prop[0];&nbsp;</div></li><li><div>                    $b['TR-V'] = $b['BL-V'] = $prop[1];&nbsp;</div></li><li><div>                } else if (count($prop) == 3) {&nbsp;</div></li><li><div>                    $b['TL-V'] = $prop[0];&nbsp;</div></li><li><div>                    $b['TR-V'] = $b['BL-V'] = $prop[1];&nbsp;</div></li><li><div>                    $b['BR-V'] = $prop[2];&nbsp;</div></li><li><div>                } else if (count($prop) == 4) {&nbsp;</div></li><li><div>                    $b['TL-V'] = $prop[0];&nbsp;</div></li><li><div>                    $b['TR-V'] = $prop[1];&nbsp;</div></li><li><div>                    $b['BR-V'] = $prop[2];&nbsp;</div></li><li><div>                    $b['BL-V'] = $prop[3];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $b['TL-V'] = $b['TL-H'];&nbsp;</div></li><li><div>                $b['TR-V'] = $b['TR-H'];&nbsp;</div></li><li><div>                $b['BL-V'] = $b['BL-H'];&nbsp;</div></li><li><div>                $b['BR-V'] = $b['BR-H'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            return $b;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Parse 2&nbsp;</div></li><li><div>        $h = 0;&nbsp;</div></li><li><div>        $v = 0;&nbsp;</div></li><li><div>        $prop = preg_split('/\s+/', trim($val));&nbsp;</div></li><li><div>        if (count($prop) == 1) {&nbsp;</div></li><li><div>            $h = $v = $val;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $h = $prop[0];&nbsp;</div></li><li><div>            $v = $prop[1];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($h == 0 || $v == 0) {&nbsp;</div></li><li><div>            $h = $v = 0;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($k == 'BORDER-TOP-LEFT-RADIUS') {&nbsp;</div></li><li><div>            $b['TL-H'] = $h;&nbsp;</div></li><li><div>            $b['TL-V'] = $v;&nbsp;</div></li><li><div>        } else if ($k == 'BORDER-TOP-RIGHT-RADIUS') {&nbsp;</div></li><li><div>            $b['TR-H'] = $h;&nbsp;</div></li><li><div>            $b['TR-V'] = $v;&nbsp;</div></li><li><div>        } else if ($k == 'BORDER-BOTTOM-LEFT-RADIUS') {&nbsp;</div></li><li><div>            $b['BL-H'] = $h;&nbsp;</div></li><li><div>            $b['BL-V'] = $v;&nbsp;</div></li><li><div>        } else if ($k == 'BORDER-BOTTOM-RIGHT-RADIUS') {&nbsp;</div></li><li><div>            $b['BR-H'] = $h;&nbsp;</div></li><li><div>            $b['BR-V'] = $v;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $b;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /** -- END BORDER-RADIUS -- */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _mergeCSS($p, &$t)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // Save Cascading CSS e.g. &quot;div.topic p&quot; at this block level&nbsp;</div></li><li><div>        if (isset($p) && $p) {&nbsp;</div></li><li><div>            if ($t) {&nbsp;</div></li><li><div>                $t = $this-&gt;array_merge_recursive_unique($t, $p);&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $t = $p;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// for CSS handling&nbsp;</div></li><li><div>    function array_merge_recursive_unique($array1, $array2)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $arrays = func_get_args();&nbsp;</div></li><li><div>        $narrays = count($arrays);&nbsp;</div></li><li><div>        $ret = $arrays[0];&nbsp;</div></li><li><div>        for ($i = 1; $i &lt; $narrays; $i ++) {&nbsp;</div></li><li><div>            foreach ($arrays[$i] as $key =&gt; $value) {&nbsp;</div></li><li><div>                if (((string) $key) === ((string) intval($key))) { // integer or string as integer key - append&nbsp;</div></li><li><div>                    $ret[] = $value;&nbsp;</div></li><li><div>                } else { // string key - merge&nbsp;</div></li><li><div>                    if (is_array($value) && isset($ret[$key])) {&nbsp;</div></li><li><div>                        $ret[$key] = $this-&gt;array_merge_recursive_unique($ret[$key], $value);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $ret[$key] = $value;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $ret;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _mergeFullCSS($p, &$t, $tag, $classes, $id, $lang)&nbsp;</div></li><li><div>    { // mPDF 6&nbsp;</div></li><li><div>        if (isset($p[$tag])) {&nbsp;</div></li><li><div>            $this-&gt;_mergeCSS($p[$tag], $t);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. .smallone{}  .redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            if (isset($p['CLASS&gt;&gt;' . $class])) {&nbsp;</div></li><li><div>                $this-&gt;_mergeCSS($p['CLASS&gt;&gt;' . $class], $t);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET nth-child SELECTOR e.g. tr:nth-child(odd)  td:nth-child(2n+1)&nbsp;</div></li><li><div>        if ($tag == 'TR' && isset($p) && $p) {&nbsp;</div></li><li><div>            foreach ($p AS $k =&gt; $val) {&nbsp;</div></li><li><div>                if (preg_match('/' . $tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;(.*)/', $k, $m)) {&nbsp;</div></li><li><div>                    $select = false;&nbsp;</div></li><li><div>                    if ($tag == 'TR') {&nbsp;</div></li><li><div>                        $row = $this-&gt;mpdf-&gt;row;&nbsp;</div></li><li><div>                        $thnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) : 0);&nbsp;</div></li><li><div>                        $tfnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) : 0);&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                            $row -= $thnr;&nbsp;</div></li><li><div>                        } else if (!$this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                            $row -= ($thnr + $tfnr);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                            $select = $this-&gt;_nthchild($a, $row);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                        if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                            $select = $this-&gt;_nthchild($a, $this-&gt;mpdf-&gt;col);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($select) {&nbsp;</div></li><li><div>                        $this-&gt;_mergeCSS($p[$tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;' . $m[1]], $t);&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. [lang=fr]{} or :lang(fr)&nbsp;</div></li><li><div>        if (isset($lang) && isset($p['LANG&gt;&gt;' . $lang])) {&nbsp;</div></li><li><div>            $this-&gt;_mergeCSS($p['LANG&gt;&gt;' . $lang], $t);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. #smallone{}  #redletter{}&nbsp;</div></li><li><div>        if (isset($id) && isset($p['ID&gt;&gt;' . $id])) {&nbsp;</div></li><li><div>            $this-&gt;_mergeCSS($p['ID&gt;&gt;' . $id], $t);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. .smallone{}  .redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            if (isset($p[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class])) {&nbsp;</div></li><li><div>                $this-&gt;_mergeCSS($p[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class], $t);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. [lang=fr]{} or :lang(fr)&nbsp;</div></li><li><div>        if (isset($lang) && isset($p[$tag . '&gt;&gt;LANG&gt;&gt;' . $lang])) {&nbsp;</div></li><li><div>            $this-&gt;_mergeCSS($p[$tag . '&gt;&gt;LANG&gt;&gt;' . $lang], $t);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. #smallone{}  #redletter{}&nbsp;</div></li><li><div>        if (isset($id) && isset($p[$tag . '&gt;&gt;ID&gt;&gt;' . $id])) {&nbsp;</div></li><li><div>            $this-&gt;_mergeCSS($p[$tag . '&gt;&gt;ID&gt;&gt;' . $id], $t);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function setBorderDominance($prop, $val)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (isset($prop['BORDER-LEFT']) && $prop['BORDER-LEFT']) {&nbsp;</div></li><li><div>            $this-&gt;cell_border_dominance_L = $val;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($prop['BORDER-RIGHT']) && $prop['BORDER-RIGHT']) {&nbsp;</div></li><li><div>            $this-&gt;cell_border_dominance_R = $val;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($prop['BORDER-TOP']) && $prop['BORDER-TOP']) {&nbsp;</div></li><li><div>            $this-&gt;cell_border_dominance_T = $val;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($prop['BORDER-BOTTOM']) && $prop['BORDER-BOTTOM']) {&nbsp;</div></li><li><div>            $this-&gt;cell_border_dominance_B = $val;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _set_mergedCSS(&$m, &$p, $d = true, $bd = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (isset($m)) {&nbsp;</div></li><li><div>            if ((isset($m['depth']) && $m['depth'] &gt; 1) || $d == false) {  // include check for 'depth'&nbsp;</div></li><li><div>                if ($bd) {&nbsp;</div></li><li><div>                    $this-&gt;setBorderDominance($m, $bd);&nbsp;</div></li><li><div>                } // *TABLES*&nbsp;</div></li><li><div>                if (is_array($m)) {&nbsp;</div></li><li><div>                    $p = array_merge($p, $m);&nbsp;</div></li><li><div>                    $this-&gt;_mergeBorders($p, $m);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function _mergeBorders(&$b, &$a)&nbsp;</div></li><li><div>    { // Merges $a['BORDER-TOP-STYLE'] to $b['BORDER-TOP'] etc.&nbsp;</div></li><li><div>        foreach (array('TOP', 'RIGHT', 'BOTTOM', 'LEFT') AS $side) {&nbsp;</div></li><li><div>            foreach (array('STYLE', 'WIDTH', 'COLOR') AS $el) {&nbsp;</div></li><li><div>                if (isset($a['BORDER-' . $side . '-' . $el])) { // e.g. $b['BORDER-TOP-STYLE']&nbsp;</div></li><li><div>                    $s = trim($a['BORDER-' . $side . '-' . $el]);&nbsp;</div></li><li><div>                    if (isset($b['BORDER-' . $side])) { // e.g. $b['BORDER-TOP']&nbsp;</div></li><li><div>                        $p = trim($b['BORDER-' . $side]);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $p = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($el == 'STYLE') {&nbsp;</div></li><li><div>                        if ($p) {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = preg_replace('/(\S+)\s+(\S+)\s+(\S+)/', '\\1 ' . $s . ' \\3', $p);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = '0px ' . $s . ' #000000';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($el == 'WIDTH') {&nbsp;</div></li><li><div>                        if ($p) {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = preg_replace('/(\S+)\s+(\S+)\s+(\S+)/', $s . ' \\2 \\3', $p);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = $s . ' none #000000';&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($el == 'COLOR') {&nbsp;</div></li><li><div>                        if ($p) {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = preg_replace('/(\S+)\s+(\S+)\s+(\S+)/', '\\1 \\2 ' . $s, $p);&nbsp;</div></li><li><div>                        } else {&nbsp;</div></li><li><div>                            $b['BORDER-' . $side] = '0px none ' . $s;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function MergeCSS($inherit, $tag, $attr)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $p = array();&nbsp;</div></li><li><div>        $zp = array();&nbsp;</div></li><li><div>        if (empty($attr)) $attr = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $classes = array();&nbsp;</div></li><li><div>        if (isset($attr['CLASS'])) {&nbsp;</div></li><li><div>            $classes = preg_split('/\s+/', $attr['CLASS']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (!isset($attr['ID'])) {&nbsp;</div></li><li><div>            $attr['ID'] = '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // mPDF 6&nbsp;</div></li><li><div>        $shortlang = '';&nbsp;</div></li><li><div>        if (!isset($attr['LANG'])) {&nbsp;</div></li><li><div>            $attr['LANG'] = '';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $attr['LANG'] = strtolower($attr['LANG']);&nbsp;</div></li><li><div>            if (strlen($attr['LANG']) == 5) {&nbsp;</div></li><li><div>                $shortlang = substr($attr['LANG'], 0, 2);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        /** -- TABLES -- */&nbsp;</div></li><li><div>        // Set Inherited properties&nbsp;</div></li><li><div>        if ($inherit == 'TOPTABLE') { // $tag = TABLE&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // Save Cascading CSS e.g. &quot;div.topic p&quot; at this block level&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'])) {&nbsp;</div></li><li><div>                $this-&gt;tablecascadeCSS[0] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $this-&gt;tablecascadeCSS[0] = $this-&gt;cascadeCSS;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // Set Inherited properties&nbsp;</div></li><li><div>        if ($inherit == 'TOPTABLE' || $inherit == 'TABLE') {&nbsp;</div></li><li><div>            //Cascade everything from last level that is not an actual property, or defined by current tag/attributes&nbsp;</div></li><li><div>            if (isset($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1]) && is_array($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1])) {&nbsp;</div></li><li><div>                foreach ($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1] AS $k =&gt; $v) {&nbsp;</div></li><li><div>                    $this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl][$k] = $v;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;_mergeFullCSS($this-&gt;cascadeCSS, $this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl], $tag, $classes, $attr['ID'], $attr['LANG']);&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // Cascading forward CSS e.g. &quot;table.topic td&quot; for this table in $this-&gt;tablecascadeCSS&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // STYLESHEET TAG e.g. table&nbsp;</div></li><li><div>            $this-&gt;_mergeFullCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1], $this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl], $tag, $classes, $attr['ID'], $attr['LANG']);&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END TABLES -- */&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // Set Inherited properties&nbsp;</div></li><li><div>        if ($inherit == 'BLOCK') {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS']) && is_array($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'])) {&nbsp;</div></li><li><div>                foreach ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'] AS $k =&gt; $v) {&nbsp;</div></li><li><div>                    $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'][$k] = $v;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // Save Cascading CSS e.g. &quot;div.topic p&quot; at this block level&nbsp;</div></li><li><div>            $this-&gt;_mergeFullCSS($this-&gt;cascadeCSS, $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'], $tag, $classes, $attr['ID'], $attr['LANG']);&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // Cascading forward CSS&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1])) {&nbsp;</div></li><li><div>                $this-&gt;_mergeFullCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'], $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'], $tag, $classes, $attr['ID'], $attr['LANG']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //===============================================&nbsp;</div></li><li><div>            // Block properties which are inherited&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['margin_collapse']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['margin_collapse']) {&nbsp;</div></li><li><div>                $p['MARGIN-COLLAPSE'] = 'COLLAPSE';&nbsp;</div></li><li><div>            } // custom tag, but follows CSS principle that border-collapse is inherited&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_height']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_height']) {&nbsp;</div></li><li><div>                $p['LINE-HEIGHT'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_height'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 6&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_strategy']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_strategy']) {&nbsp;</div></li><li><div>                $p['LINE-STACKING-STRATEGY'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_strategy'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_shift']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_shift']) {&nbsp;</div></li><li><div>                $p['LINE-STACKING-SHIFT'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['line_stacking_shift'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['direction']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['direction']) {&nbsp;</div></li><li><div>                $p['DIRECTION'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['direction'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            // mPDF 6  Lists&nbsp;</div></li><li><div>            if ($tag == 'LI') {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_type']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_type']) {&nbsp;</div></li><li><div>                    $p['LIST-STYLE-TYPE'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_type'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_image']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_image']) {&nbsp;</div></li><li><div>                $p['LIST-STYLE-IMAGE'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_image'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_position']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_position']) {&nbsp;</div></li><li><div>                $p['LIST-STYLE-POSITION'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['list_style_position'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align']) {&nbsp;</div></li><li><div>                if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align'] == 'L') {&nbsp;</div></li><li><div>                    $p['TEXT-ALIGN'] = 'left';&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align'] == 'J') {&nbsp;</div></li><li><div>                    $p['TEXT-ALIGN'] = 'justify';&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align'] == 'R') {&nbsp;</div></li><li><div>                    $p['TEXT-ALIGN'] = 'right';&nbsp;</div></li><li><div>                } else if ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['align'] == 'C') {&nbsp;</div></li><li><div>                    $p['TEXT-ALIGN'] = 'center';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($this-&gt;mpdf-&gt;ColActive || $this-&gt;mpdf-&gt;keep_block_together) {&nbsp;</div></li><li><div>                if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['bgcolor']) && $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['bgcolor']) { // Doesn't officially inherit, but default value is transparent (?=inherited)&nbsp;</div></li><li><div>                    $cor = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['bgcolorarray'];&nbsp;</div></li><li><div>                    $p['BACKGROUND-COLOR'] = $this-&gt;mpdf-&gt;_colAtoString($cor);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['text_indent']) && ($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['text_indent'] || $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['text_indent'] === 0)) {&nbsp;</div></li><li><div>                $p['TEXT-INDENT'] = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['text_indent'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['InlineProperties'])) {&nbsp;</div></li><li><div>                $biilp = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['InlineProperties'];&nbsp;</div></li><li><div>                $this-&gt;inlinePropsToCSS($biilp, $p); // mPDF 5.7.1&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $biilp = null;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // INLINE HTML ATTRIBUTES e.g. .. ALIGN=&quot;CENTER&quot;&gt;&nbsp;</div></li><li><div>        // mPDF 6 (added)&nbsp;</div></li><li><div>        if (isset($attr['DIR']) and $attr['DIR'] != '') {&nbsp;</div></li><li><div>            $p['DIRECTION'] = $attr['DIR'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // mPDF 6 (moved)&nbsp;</div></li><li><div>        if (isset($attr['LANG']) and $attr['LANG'] != '') {&nbsp;</div></li><li><div>            $p['LANG'] = $attr['LANG'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($attr['COLOR']) and $attr['COLOR'] != '') {&nbsp;</div></li><li><div>            $p['COLOR'] = $attr['COLOR'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($tag != 'INPUT') {&nbsp;</div></li><li><div>            if (isset($attr['WIDTH']) and $attr['WIDTH'] != '') {&nbsp;</div></li><li><div>                $p['WIDTH'] = $attr['WIDTH'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($attr['HEIGHT']) and $attr['HEIGHT'] != '') {&nbsp;</div></li><li><div>                $p['HEIGHT'] = $attr['HEIGHT'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($tag == 'FONT') {&nbsp;</div></li><li><div>            if (isset($attr['FACE'])) {&nbsp;</div></li><li><div>                $p['FONT-FAMILY'] = $attr['FACE'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($attr['SIZE']) and $attr['SIZE'] != '') {&nbsp;</div></li><li><div>                $s = '';&nbsp;</div></li><li><div>                if ($attr['SIZE'] === '+1') {&nbsp;</div></li><li><div>                    $s = '120%';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] === '-1') {&nbsp;</div></li><li><div>                    $s = '86%';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] === '1') {&nbsp;</div></li><li><div>                    $s = 'XX-SMALL';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '2') {&nbsp;</div></li><li><div>                    $s = 'X-SMALL';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '3') {&nbsp;</div></li><li><div>                    $s = 'SMALL';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '4') {&nbsp;</div></li><li><div>                    $s = 'MEDIUM';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '5') {&nbsp;</div></li><li><div>                    $s = 'LARGE';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '6') {&nbsp;</div></li><li><div>                    $s = 'X-LARGE';&nbsp;</div></li><li><div>                } else if ($attr['SIZE'] == '7') {&nbsp;</div></li><li><div>                    $s = 'XX-LARGE';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($s)&nbsp;</div></li><li><div>                    $p['FONT-SIZE'] = $s;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($attr['VALIGN']) and $attr['VALIGN'] != '') {&nbsp;</div></li><li><div>            $p['VERTICAL-ALIGN'] = $attr['VALIGN'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($attr['VSPACE']) and $attr['VSPACE'] != '') {&nbsp;</div></li><li><div>            $p['MARGIN-TOP'] = $attr['VSPACE'];&nbsp;</div></li><li><div>            $p['MARGIN-BOTTOM'] = $attr['VSPACE'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($attr['HSPACE']) and $attr['HSPACE'] != '') {&nbsp;</div></li><li><div>            $p['MARGIN-LEFT'] = $attr['HSPACE'];&nbsp;</div></li><li><div>            $p['MARGIN-RIGHT'] = $attr['HSPACE'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // DEFAULT for this TAG set in DefaultCSS&nbsp;</div></li><li><div>        if (isset($this-&gt;mpdf-&gt;defaultCSS[$tag])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;fixCSS($this-&gt;mpdf-&gt;defaultCSS[$tag]);&nbsp;</div></li><li><div>            if (is_array($zp)) {  // Default overwrites Inherited&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);  // !! Note other way round !!&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        /** -- TABLES -- */&nbsp;</div></li><li><div>        // mPDF 5.7.3&nbsp;</div></li><li><div>        // cellSpacing overwrites TABLE default but not specific CSS set on table&nbsp;</div></li><li><div>        if ($tag == 'TABLE' && isset($attr['CELLSPACING'])) {&nbsp;</div></li><li><div>            $p['BORDER-SPACING-H'] = $p['BORDER-SPACING-V'] = $attr['CELLSPACING'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // cellPadding overwrites TD/TH default but not specific CSS set on cell&nbsp;</div></li><li><div>        if (($tag == 'TD' || $tag == 'TH') && isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding']) && ($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'] || $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'] === '0')) {  // mPDF 5.7.3&nbsp;</div></li><li><div>            $p['PADDING-LEFT'] = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'];&nbsp;</div></li><li><div>            $p['PADDING-RIGHT'] = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'];&nbsp;</div></li><li><div>            $p['PADDING-TOP'] = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'];&nbsp;</div></li><li><div>            $p['PADDING-BOTTOM'] = $this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['cell_padding'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END TABLES -- */&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET TAG e.g. h1  p  div  table&nbsp;</div></li><li><div>        if (isset($this-&gt;CSS[$tag]) && $this-&gt;CSS[$tag]) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS[$tag];&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. .smallone{}  .redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            $zp = array();&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS['CLASS&gt;&gt;' . $class]) && $this-&gt;CSS['CLASS&gt;&gt;' . $class]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS['CLASS&gt;&gt;' . $class];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        /** -- TABLES -- */&nbsp;</div></li><li><div>        // STYLESHEET nth-child SELECTOR e.g. tr:nth-child(odd)  td:nth-child(2n+1)&nbsp;</div></li><li><div>        if ($tag == 'TR' || $tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>            foreach ($this-&gt;CSS AS $k =&gt; $val) {&nbsp;</div></li><li><div>                if (preg_match('/' . $tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;(.*)/', $k, $m)) {&nbsp;</div></li><li><div>                    $select = false;&nbsp;</div></li><li><div>                    if ($tag == 'TR') {&nbsp;</div></li><li><div>                        $row = $this-&gt;mpdf-&gt;row;&nbsp;</div></li><li><div>                        $thnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) : 0);&nbsp;</div></li><li><div>                        $tfnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) : 0);&nbsp;</div></li><li><div>                        if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                            $row -= $thnr;&nbsp;</div></li><li><div>                        } else if (!$this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                            $row -= ($thnr + $tfnr);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                            $select = $this-&gt;_nthchild($a, $row);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    } else if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                        if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                            $select = $this-&gt;_nthchild($a, $this-&gt;mpdf-&gt;col);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($select) {&nbsp;</div></li><li><div>                        $zp = $this-&gt;CSS[$tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;' . $m[1]];&nbsp;</div></li><li><div>                        if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                            $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                        if (is_array($zp)) {&nbsp;</div></li><li><div>                            $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                            $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END TABLES -- */&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET LANG e.g. [lang=fr]{} or :lang(fr)&nbsp;</div></li><li><div>        if (isset($attr['LANG'])) {&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS['LANG&gt;&gt;' . $attr['LANG']]) && $this-&gt;CSS['LANG&gt;&gt;' . $attr['LANG']]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS['LANG&gt;&gt;' . $attr['LANG']];&nbsp;</div></li><li><div>                if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>                } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>                if (is_array($zp)) {&nbsp;</div></li><li><div>                    $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                    $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if (isset($this-&gt;CSS['LANG&gt;&gt;' . $shortlang]) && $this-&gt;CSS['LANG&gt;&gt;' . $shortlang]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS['LANG&gt;&gt;' . $shortlang];&nbsp;</div></li><li><div>                if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>                } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>                if (is_array($zp)) {&nbsp;</div></li><li><div>                    $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                    $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET ID e.g. #smallone{}  #redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID']) && isset($this-&gt;CSS['ID&gt;&gt;' . $attr['ID']]) && $this-&gt;CSS['ID&gt;&gt;' . $attr['ID']]) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS['ID&gt;&gt;' . $attr['ID']];&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. p.smallone{}  div.redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            $zp = array();&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class]) && $this-&gt;CSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET LANG e.g. [lang=fr]{} or :lang(fr)&nbsp;</div></li><li><div>        if (isset($attr['LANG'])) {&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $attr['LANG']]) && $this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $attr['LANG']]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $attr['LANG']];&nbsp;</div></li><li><div>                if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>                } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>                if (is_array($zp)) {&nbsp;</div></li><li><div>                    $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                    $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if (isset($this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $shortlang]) && $this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $shortlang]) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS[$tag . '&gt;&gt;LANG&gt;&gt;' . $shortlang];&nbsp;</div></li><li><div>                if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                    $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>                } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>                if (is_array($zp)) {&nbsp;</div></li><li><div>                    $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                    $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. p#smallone{}  div#redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID']) && isset($this-&gt;CSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']]) && $this-&gt;CSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']]) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']];&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // Cascaded e.g. div.class p only works for block level&nbsp;</div></li><li><div>        if ($inherit == 'BLOCK') {&nbsp;</div></li><li><div>            if (isset($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1])) { // mPDF 6&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'][$tag], $p);&nbsp;</div></li><li><div>                foreach ($classes AS $class) {&nbsp;</div></li><li><div>                    $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS']['CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS']['ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>                foreach ($classes AS $class) {&nbsp;</div></li><li><div>                    $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'][$tag . '&gt;&gt;CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl - 1]['cascadeCSS'][$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else if ($inherit == 'INLINE') {&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'][$tag], $p);&nbsp;</div></li><li><div>            foreach ($classes AS $class) {&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS']['CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS']['ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>            foreach ($classes AS $class) {&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'][$tag . '&gt;&gt;CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'][$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- TABLES -- */ else if ($inherit == 'TOPTABLE' || $inherit == 'TABLE') { // NB looks at $this-&gt;tablecascadeCSS-1 for cascading CSS&nbsp;</div></li><li><div>            if (isset($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1])) { // mPDF 6&nbsp;</div></li><li><div>                // false, 9 = don't check for 'depth' and do set border dominance&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1][$tag], $p, false, 9);&nbsp;</div></li><li><div>                foreach ($classes AS $class) {&nbsp;</div></li><li><div>                    $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1]['CLASS&gt;&gt;' . $class], $p, false, 9);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                // STYLESHEET nth-child SELECTOR e.g. tr:nth-child(odd)  td:nth-child(2n+1)&nbsp;</div></li><li><div>                if ($tag == 'TR' || $tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                    foreach ($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1] AS $k =&gt; $val) {&nbsp;</div></li><li><div>                        if (preg_match('/' . $tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;(.*)/', $k, $m)) {&nbsp;</div></li><li><div>                            $select = false;&nbsp;</div></li><li><div>                            if ($tag == 'TR') {&nbsp;</div></li><li><div>                                $row = $this-&gt;mpdf-&gt;row;&nbsp;</div></li><li><div>                                $thnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_thead']) : 0);&nbsp;</div></li><li><div>                                $tfnr = (isset($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) ? count($this-&gt;mpdf-&gt;table[$this-&gt;mpdf-&gt;tableLevel][$this-&gt;mpdf-&gt;tbctr[$this-&gt;mpdf-&gt;tableLevel]]['is_tfoot']) : 0);&nbsp;</div></li><li><div>                                if ($this-&gt;mpdf-&gt;tabletfoot) {&nbsp;</div></li><li><div>                                    $row -= $thnr;&nbsp;</div></li><li><div>                                } else if (!$this-&gt;mpdf-&gt;tablethead) {&nbsp;</div></li><li><div>                                    $row -= ($thnr + $tfnr);&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                                if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                                    $select = $this-&gt;_nthchild($a, $row);&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            } else if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                                if (preg_match('/(([\-+]?\d*)?N([\-+]\d+)?|[\-+]?\d+|ODD|EVEN)/', $m[1], $a)) { // mPDF 5.7.4&nbsp;</div></li><li><div>                                    $select = $this-&gt;_nthchild($a, $this-&gt;mpdf-&gt;col);&nbsp;</div></li><li><div>                                }&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            if ($select) {&nbsp;</div></li><li><div>                                $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1][$tag . '&gt;&gt;SELECTORNTHCHILD&gt;&gt;' . $m[1]], $p, false, 9);&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1]['ID&gt;&gt;' . $attr['ID']], $p, false, 9);&nbsp;</div></li><li><div>            foreach ($classes AS $class) {&nbsp;</div></li><li><div>                $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1][$tag . '&gt;&gt;CLASS&gt;&gt;' . $class], $p, false, 9);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($this-&gt;tablecascadeCSS[$this-&gt;tbCSSlvl - 1][$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']], $p, false, 9);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /** -- END TABLES -- */&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // INLINE STYLE e.g. style=&quot;CSS:property&quot;&nbsp;</div></li><li><div>        if (isset($attr['STYLE'])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;readInlineCSS($attr['STYLE']);&nbsp;</div></li><li><div>            if ($tag == 'TD' || $tag == 'TH') {&nbsp;</div></li><li><div>                $this-&gt;setBorderDominance($zp, 9);&nbsp;</div></li><li><div>            } // *TABLES*    // *TABLES-ADVANCED-BORDERS*&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>                $this-&gt;_mergeBorders($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        return $p;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// Convert inline Properties back to CSS&nbsp;</div></li><li><div>    function inlinePropsToCSS($bilp, &$p)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if (isset($bilp['family']) && $bilp['family']) {&nbsp;</div></li><li><div>            $p['FONT-FAMILY'] = $bilp['family'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['I']) && $bilp['I']) {&nbsp;</div></li><li><div>            $p['FONT-STYLE'] = 'italic';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['sizePt']) && $bilp['sizePt']) {&nbsp;</div></li><li><div>            $p['FONT-SIZE'] = $bilp['sizePt'] . 'pt';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['B']) && $bilp['B']) {&nbsp;</div></li><li><div>            $p['FONT-WEIGHT'] = 'bold';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['colorarray']) && $bilp['colorarray']) {&nbsp;</div></li><li><div>            $cor = $bilp['colorarray'];&nbsp;</div></li><li><div>            $p['COLOR'] = $this-&gt;mpdf-&gt;_colAtoString($cor);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['lSpacingCSS']) && $bilp['lSpacingCSS']) {&nbsp;</div></li><li><div>            $p['LETTER-SPACING'] = $bilp['lSpacingCSS'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['wSpacingCSS']) && $bilp['wSpacingCSS']) {&nbsp;</div></li><li><div>            $p['WORD-SPACING'] = $bilp['wSpacingCSS'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($bilp['textparam']) && $bilp['textparam']) {&nbsp;</div></li><li><div>            if (isset($bilp['textparam']['hyphens'])) {&nbsp;</div></li><li><div>                if ($bilp['textparam']['hyphens'] == 2) {&nbsp;</div></li><li><div>                    $p['HYPHENS'] = 'none';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bilp['textparam']['hyphens'] == 1) {&nbsp;</div></li><li><div>                    $p['HYPHENS'] = 'auto';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if ($bilp['textparam']['hyphens'] == 0) {&nbsp;</div></li><li><div>                    $p['HYPHENS'] = 'manual';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['textparam']['outline-s']) && !$bilp['textparam']['outline-s']) {&nbsp;</div></li><li><div>                $p['TEXT-OUTLINE'] = 'none';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['textparam']['outline-COLOR']) && $bilp['textparam']['outline-COLOR']) {&nbsp;</div></li><li><div>                $p['TEXT-OUTLINE-COLOR'] = $this-&gt;mpdf-&gt;_colAtoString($bilp['textparam']['outline-COLOR']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['textparam']['outline-WIDTH']) && $bilp['textparam']['outline-WIDTH']) {&nbsp;</div></li><li><div>                $p['TEXT-OUTLINE-WIDTH'] = $bilp['textparam']['outline-WIDTH'] . 'mm';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($bilp['textvar']) && $bilp['textvar']) {&nbsp;</div></li><li><div>            // CSS says text-decoration is not inherited, but IE7 does??&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FD_LINETHROUGH) {&nbsp;</div></li><li><div>                if ($bilp['textvar'] & FD_UNDERLINE) {&nbsp;</div></li><li><div>                    $p['TEXT-DECORATION'] = 'underline line-through';&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $p['TEXT-DECORATION'] = 'line-through';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            } else if ($bilp['textvar'] & FD_UNDERLINE) {&nbsp;</div></li><li><div>                $p['TEXT-DECORATION'] = 'underline';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $p['TEXT-DECORATION'] = 'none';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FA_SUPERSCRIPT) {&nbsp;</div></li><li><div>                $p['VERTICAL-ALIGN'] = 'super';&nbsp;</div></li><li><div>            } else if ($bilp['textvar'] & FA_SUBSCRIPT) {&nbsp;</div></li><li><div>                $p['VERTICAL-ALIGN'] = 'sub';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $p['VERTICAL-ALIGN'] = 'baseline';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FT_CAPITALIZE) {&nbsp;</div></li><li><div>                $p['TEXT-TRANSFORM'] = 'capitalize';&nbsp;</div></li><li><div>            } else if ($bilp['textvar'] & FT_UPPERCASE) {&nbsp;</div></li><li><div>                $p['TEXT-TRANSFORM'] = 'uppercase';&nbsp;</div></li><li><div>            } else if ($bilp['textvar'] & FT_LOWERCASE) {&nbsp;</div></li><li><div>                $p['TEXT-TRANSFORM'] = 'lowercase';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $p['TEXT-TRANSFORM'] = 'none';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FC_KERNING) {&nbsp;</div></li><li><div>                $p['FONT-KERNING'] = 'normal';&nbsp;</div></li><li><div>            } // ignore 'auto' as default already applied&nbsp;</div></li><li><div>            //if (isset($bilp[ 'OTLtags' ]) && $bilp[ 'OTLtags' ]['Plus'] contains 'kern'&nbsp;</div></li><li><div>            else {&nbsp;</div></li><li><div>                $p['FONT-KERNING'] = 'none';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FA_SUPERSCRIPT) {&nbsp;</div></li><li><div>                $p['FONT-VARIANT-POSITION'] = 'super';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //if (isset($bilp[ 'OTLtags' ]) && $bilp[ 'OTLtags' ]['Plus'] contains 'sups' / 'subs'&nbsp;</div></li><li><div>            else if ($bilp['textvar'] & FA_SUBSCRIPT) {&nbsp;</div></li><li><div>                $p['FONT-VARIANT-POSITION'] = 'sub';&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $p['FONT-VARIANT-POSITION'] = 'normal';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ($bilp['textvar'] & FC_SMALLCAPS) {&nbsp;</div></li><li><div>                $p['FONT-VARIANT-CAPS'] = 'small-caps';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if (isset($bilp['fontLanguageOverride'])) {&nbsp;</div></li><li><div>            if ($bilp['fontLanguageOverride']) {&nbsp;</div></li><li><div>                $p['FONT-LANGUAGE-OVERRIDE'] = $bilp['fontLanguageOverride'];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $p['FONT-LANGUAGE-OVERRIDE'] = 'normal';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // All the variations of font-variant-* we are going to set as font-feature-settings...&nbsp;</div></li><li><div>        if (isset($bilp['OTLtags']) && $bilp['OTLtags']) {&nbsp;</div></li><li><div>            $ffs = array();&nbsp;</div></li><li><div>            if (isset($bilp['OTLtags']['Minus']) && $bilp['OTLtags']['Minus']) {&nbsp;</div></li><li><div>                $f = preg_split('/\s+/', trim($bilp['OTLtags']['Minus']));&nbsp;</div></li><li><div>                foreach ($f AS $ff) {&nbsp;</div></li><li><div>                    $ffs[] = &quot;'&quot; . $ff . &quot;' 0&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['OTLtags']['FFMinus']) && $bilp['OTLtags']['FFMinus']) {&nbsp;</div></li><li><div>                $f = preg_split('/\s+/', trim($bilp['OTLtags']['FFMinus']));&nbsp;</div></li><li><div>                foreach ($f AS $ff) {&nbsp;</div></li><li><div>                    $ffs[] = &quot;'&quot; . $ff . &quot;' 0&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['OTLtags']['Plus']) && $bilp['OTLtags']['Plus']) {&nbsp;</div></li><li><div>                $f = preg_split('/\s+/', trim($bilp['OTLtags']['Plus']));&nbsp;</div></li><li><div>                foreach ($f AS $ff) {&nbsp;</div></li><li><div>                    $ffs[] = &quot;'&quot; . $ff . &quot;' 1&quot;;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (isset($bilp['OTLtags']['FFPlus']) && $bilp['OTLtags']['FFPlus']) { // May contain numeric value e.g. salt4&nbsp;</div></li><li><div>                $f = preg_split('/\s+/', trim($bilp['OTLtags']['FFPlus']));&nbsp;</div></li><li><div>                foreach ($f AS $ff) {&nbsp;</div></li><li><div>                    if (strlen($ff) &gt; 4) {&nbsp;</div></li><li><div>                        $ffs[] = &quot;'&quot; . substr($ff, 0, 4) . &quot;' &quot; . substr($ff, 4);&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $ffs[] = &quot;'&quot; . $ff . &quot;' 1&quot;;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $p['FONT-FEATURE-SETTINGS'] = implode(', ', $ffs);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function PreviewBlockCSS($tag, $attr)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // Looks ahead from current block level to a new level&nbsp;</div></li><li><div>        $p = array();&nbsp;</div></li><li><div>        $zp = array();&nbsp;</div></li><li><div>        $oldcascadeCSS = $this-&gt;mpdf-&gt;blk[$this-&gt;mpdf-&gt;blklvl]['cascadeCSS'];&nbsp;</div></li><li><div>        $classes = array();&nbsp;</div></li><li><div>        if (isset($attr['CLASS'])) {&nbsp;</div></li><li><div>            $classes = preg_split('/\s+/', $attr['CLASS']);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // DEFAULT for this TAG set in DefaultCSS&nbsp;</div></li><li><div>        if (isset($this-&gt;mpdf-&gt;defaultCSS[$tag])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;fixCSS($this-&gt;mpdf-&gt;defaultCSS[$tag]);&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($zp, $p);&nbsp;</div></li><li><div>            } // Inherited overwrites default&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET TAG e.g. h1  p  div  table&nbsp;</div></li><li><div>        if (isset($this-&gt;CSS[$tag])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS[$tag];&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. .smallone{}  .redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            $zp = array();&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS['CLASS&gt;&gt;' . $class])) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS['CLASS&gt;&gt;' . $class];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET ID e.g. #smallone{}  #redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID']) && isset($this-&gt;CSS['ID&gt;&gt;' . $attr['ID']])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS['ID&gt;&gt;' . $attr['ID']];&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. p.smallone{}  div.redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>            $zp = array();&nbsp;</div></li><li><div>            if (isset($this-&gt;CSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class])) {&nbsp;</div></li><li><div>                $zp = $this-&gt;CSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. p#smallone{}  div#redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID']) && isset($this-&gt;CSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;CSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']];&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // STYLESHEET TAG e.g. div h1    div p&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;_set_mergedCSS($oldcascadeCSS[$tag], $p);&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. .smallone{}  .redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($oldcascadeCSS['CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. #smallone{}  #redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID'])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($oldcascadeCSS['ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. div.smallone{}  p.redletter{}&nbsp;</div></li><li><div>        foreach ($classes AS $class) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($oldcascadeCSS[$tag . '&gt;&gt;CLASS&gt;&gt;' . $class], $p);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        // STYLESHEET CLASS e.g. div#smallone{}  p#redletter{}&nbsp;</div></li><li><div>        if (isset($attr['ID'])) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;_set_mergedCSS($oldcascadeCSS[$tag . '&gt;&gt;ID&gt;&gt;' . $attr['ID']], $p);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        // INLINE STYLE e.g. style=&quot;CSS:property&quot;&nbsp;</div></li><li><div>        if (isset($attr['STYLE'])) {&nbsp;</div></li><li><div>            $zp = $this-&gt;readInlineCSS($attr['STYLE']);&nbsp;</div></li><li><div>            if (is_array($zp)) {&nbsp;</div></li><li><div>                $p = array_merge($p, $zp);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //===============================================&nbsp;</div></li><li><div>        return $p;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>// mPDF 5.7.4   nth-child&nbsp;</div></li><li><div>    function _nthchild($f, $c)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // $f is formual e.g. 2N+1 spilt into a preg_match array&nbsp;</div></li><li><div>        // $c is the comparator value e.g row or column number&nbsp;</div></li><li><div>        $c += 1;&nbsp;</div></li><li><div>        $select = false;&nbsp;</div></li><li><div>        $a = 1;&nbsp;</div></li><li><div>        $b = 1;&nbsp;</div></li><li><div>        if ($f[0] == 'ODD') {&nbsp;</div></li><li><div>            $a = 2;&nbsp;</div></li><li><div>            $b = 1;&nbsp;</div></li><li><div>        } else if ($f[0] == 'EVEN') {&nbsp;</div></li><li><div>            $a = 2;&nbsp;</div></li><li><div>            $b = 0;&nbsp;</div></li><li><div>        } else if (count($f) == 2) {&nbsp;</div></li><li><div>            $a = 0;&nbsp;</div></li><li><div>            $b = $f[1] + 0;&nbsp;</div></li><li><div>        }  // e.g. (+6)&nbsp;</div></li><li><div>        else if (count($f) == 3) {  // e.g. (2N)&nbsp;</div></li><li><div>            if ($f[2] == '') {&nbsp;</div></li><li><div>                $a = 1;&nbsp;</div></li><li><div>            } else if ($f[2] == '-') {&nbsp;</div></li><li><div>                $a = -1;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $a = $f[2] + 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $b = 0;&nbsp;</div></li><li><div>        } else if (count($f) == 4) {  // e.g. (2N+6)&nbsp;</div></li><li><div>            if ($f[2] == '') {&nbsp;</div></li><li><div>                $a = 1;&nbsp;</div></li><li><div>            } else if ($f[2] == '-') {&nbsp;</div></li><li><div>                $a = -1;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $a = $f[2] + 0;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $b = $f[3] + 0;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($a &gt; 0) {&nbsp;</div></li><li><div>            if (((($c % $a) - $b) % $a) == 0 && $c &gt;= $b) {&nbsp;</div></li><li><div>                $select = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else if ($a == 0) {&nbsp;</div></li><li><div>            if ($c == $b) {&nbsp;</div></li><li><div>                $select = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {  // if ($a&lt;0)&nbsp;</div></li><li><div>            if (((($c % $a) - $b) % $a) == 0 && $c &lt;= $b) {&nbsp;</div></li><li><div>                $select = true;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $select;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 2.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.1/classes/cssmgr/" class="active">2.8.1</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.8.0/classes/cssmgr/" class="">2.8.0</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.3/classes/cssmgr/" class="">2.7.3</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.2/classes/cssmgr/" class="">2.7.2</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices/2.7.1/classes/cssmgr/" class="">2.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>cssmgr</li><li><span></span>WooCommerce PDF Invoices</li><li><span></span>2.8.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>