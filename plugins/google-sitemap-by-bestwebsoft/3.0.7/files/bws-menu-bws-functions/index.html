<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="3.0.7" data-slug="google-sitemap-by-bestwebsoft" data-type="file" data-id="39679"><head xmlns="http://www.w3.org/1999/xhtml"><title> bws-menu-bws-functions | file | Google Sitemap By Bestwebsoft | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, google-sitemap-by-bestwebsoft, 3.0.7" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=5e796da29ca2ad93d27ca4869642a7f6' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/bws-menu-bws-functions/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbws-menu-bws-functions%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fbws-menu-bws-functions%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-google-sitemap-by-bestwebsoft-3.0.7-file-bws-menu-bws-functions","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bws-menu-bws-functions" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to google-sitemap-by-bestwebsoft." href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/" class="plugin"><span property="name">google-sitemap-by-bestwebsoft</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.0.7." href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/" class="H_VERSION"><span property="name">3.0.7</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bws-menu-bws-functions</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="142"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/all/" title="All">All <span class="count badge">142</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="1"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/hooks/" title="Hooks">Hooks <span class="count badge">1</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="1"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/filters/" title="Filters">Filters <span class="count badge">1</span></a></li><li class="" data-id="class" data-count="69"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/classes/" title="Classes">Classes <span class="count badge">69</span></a></li><li class="" data-id="constant" data-count="2"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/constants/" title="Constants">Constants <span class="count badge">2</span></a></li><li class="" data-id="function" data-count="70"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/functions/" title="Functions">Functions <span class="count badge">70</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/google-sitemap-by-bestwebsoft/3.0.7/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/bws_menu/bws_functions.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* General functions for BestWebSoft plugins</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Internationalization, first(!) */</span>&nbsp;</div></li><li><div>load_plugin_textdomain( 'bestwebsoft', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function add BWS Plugins page - for old plugin version</span>&nbsp;</div></li><li><div><span class="comment">* @deprecated 1.7.9</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_add_general_menu' ) ) {&nbsp;</div></li><li><div>  function bws_add_general_menu() {&nbsp;</div></li><li><div>      bws_general_menu();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function add BWS Plugins page</span>&nbsp;</div></li><li><div><span class="comment">* @return void</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_general_menu' ) ) {&nbsp;</div></li><li><div>  function bws_general_menu() {&nbsp;</div></li><li><div>      global $menu, $bws_general_menu_exist;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $bws_general_menu_exist ) {&nbsp;</div></li><li><div>          <span class="comment">/** we check also menu exist in global array as in old plugins $bws_general_menu_exist variable not exist */</span>&nbsp;</div></li><li><div>          foreach ( $menu as $value_menu ) {&nbsp;</div></li><li><div>              if ( 'bws_panel' == $value_menu[2] ) {&nbsp;</div></li><li><div>                  $bws_general_menu_exist = true;&nbsp;</div></li><li><div>                  return;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_menu_page( 'BWS Panel', 'BWS Panel', 'manage_options', 'bws_panel', 'bws_add_menu_render', plugins_url( 'images/logo-white-min.png', __FILE__ ), '1001' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_submenu_page( 'bws_panel', __( 'Plugins', 'bestwebsoft' ), __( 'Plugins', 'bestwebsoft' ), 'manage_options', 'bws_panel', 'bws_add_menu_render' );&nbsp;</div></li><li><div>          add_submenu_page( 'bws_panel', __( 'Themes', 'bestwebsoft' ), __( 'Themes', 'bestwebsoft' ), 'manage_options', 'bws_themes', 'bws_add_menu_render' );&nbsp;</div></li><li><div>          add_submenu_page( 'bws_panel', __( 'System Status', 'bestwebsoft' ), __( 'System Status', 'bestwebsoft' ), 'manage_options', 'bws_system_status', 'bws_add_menu_render' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $bws_general_menu_exist = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function check if plugin is compatible with current WP version - for old plugin version</span>&nbsp;</div></li><li><div><span class="comment">* @deprecated 1.7.4</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_wp_version_check' ) ) {&nbsp;</div></li><li><div>  function bws_wp_version_check( $plugin_basename, $plugin_info, $require_wp ) {&nbsp;</div></li><li><div>      bws_wp_min_version_check( $plugin_basename, $plugin_info, '3.8' , $require_wp );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function check if plugin is compatible with current WP version</span>&nbsp;</div></li><li><div><span class="comment">* @return void</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_wp_min_version_check' ) ) {&nbsp;</div></li><li><div>  function bws_wp_min_version_check( $plugin_basename, $plugin_info, $require_wp, $min_wp = false ) {&nbsp;</div></li><li><div>      global $wp_version, $bws_versions_notice_array;&nbsp;</div></li><li><div>      if ( false == $min_wp )&nbsp;</div></li><li><div>          $min_wp = $require_wp;&nbsp;</div></li><li><div>      if ( version_compare( $wp_version, $min_wp, &quot;&lt;&quot; ) ) {&nbsp;</div></li><li><div>          include_once( ABSPATH . 'wp-admin/includes/plugin.php' );&nbsp;</div></li><li><div>          if ( is_plugin_active( $plugin_basename ) ) {&nbsp;</div></li><li><div>              deactivate_plugins( $plugin_basename );&nbsp;</div></li><li><div>              $admin_url = ( function_exists( 'get_admin_url' ) ) ? get_admin_url( null, 'plugins.php' ) : esc_url( '/wp-admin/plugins.php' );&nbsp;</div></li><li><div>              wp_die( &nbsp;</div></li><li><div>                  sprintf(&nbsp;</div></li><li><div>                      &quot;&lt;strong&gt;%s&lt;/strong&gt; %s &lt;strong&gt;WordPress %s&lt;/strong&gt; %s &lt;br /&gt;&lt;br /&gt;%s &lt;a href='%s'&gt;%s&lt;/a&gt;.&quot;, &nbsp;</div></li><li><div>                      $plugin_info['Name'], &nbsp;</div></li><li><div>                      __( 'requires', 'bestwebsoft' ), &nbsp;</div></li><li><div>                      $require_wp, &nbsp;</div></li><li><div>                      __( 'or higher, that is why it has been deactivated! Please upgrade WordPress and try again.', 'bestwebsoft' ), &nbsp;</div></li><li><div>                      __( 'Back to the WordPress', 'bestwebsoft' ), &nbsp;</div></li><li><div>                      $admin_url, &nbsp;</div></li><li><div>                      __( 'Plugins page', 'bestwebsoft' )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } elseif ( version_compare( $wp_version, $require_wp, &quot;&lt;&quot; ) ) {&nbsp;</div></li><li><div>          $bws_versions_notice_array[] = array( 'name' =&gt; $plugin_info['Name'], 'version' =&gt; $require_wp );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_admin_notices' ) ) {&nbsp;</div></li><li><div>  function bws_admin_notices() {&nbsp;</div></li><li><div>      global $bws_versions_notice_array, $bws_plugin_banner_to_settings;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**  versions notice */</span>&nbsp;</div></li><li><div>      if ( ! empty( $bws_versions_notice_array ) ) {&nbsp;</div></li><li><div>          foreach ( $bws_versions_notice_array as $key =&gt; $value ) { ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;update-nag&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                  echo sprintf(&nbsp;</div></li><li><div>                          &quot;&lt;strong&gt;%s&lt;/strong&gt; %s &lt;strong&gt;WordPress %s&lt;/strong&gt; %s&quot;, &nbsp;</div></li><li><div>                          $value['name'], &nbsp;</div></li><li><div>                          __( 'requires', 'bestwebsoft' ), &nbsp;</div></li><li><div>                          $value['version'], &nbsp;</div></li><li><div>                          __( 'or higher! We do not guarantee that our plugin will work correctly. Please upgrade to WordPress latest version.', 'bestwebsoft' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              ?&gt;&lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**  banner_to_settings notice */</span>&nbsp;</div></li><li><div>      if ( ! empty( $bws_plugin_banner_to_settings ) ) { &nbsp;</div></li><li><div>          if ( 1 == count( $bws_plugin_banner_to_settings ) ) { ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;updated&quot; style=&quot;padding: 0; margin: 0; border: none; background: none;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;bws_banner_on_plugin_page bws_banner_to_settings&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;icon&quot;&gt;&nbsp;</div></li><li><div>                          &lt;img title=&quot;&quot; src=&quot;&lt;?php echo esc_attr( $bws_plugin_banner_to_settings[0]['banner_url'] ); ?&gt;&quot; alt=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;                        &nbsp;</div></li><li><div>                      &lt;div class=&quot;text&quot;&gt;&nbsp;</div></li><li><div>                          &lt;strong&gt;&lt;?php _e( 'Thank you for installing', 'bestwebsoft' ); ?&gt; &lt;?php echo $bws_plugin_banner_to_settings[0]['plugin_info']['Name']; ?&gt; plugin!&lt;/strong&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                          &lt;?php _e( &quot;Let's get started&quot;, 'bestwebsoft' ); ?&gt;: &nbsp;</div></li><li><div>                          &lt;a href=&quot;&lt;?php echo $bws_plugin_banner_to_settings[0]['settings_url']; ?&gt;&quot;&gt;&lt;?php _e( 'Settings', 'bestwebsoft' ); ?&gt;&lt;/a&gt; &nbsp;</div></li><li><div>                          &lt;?php if ( false != $bws_plugin_banner_to_settings[0]['post_type_url'] ) { ?&gt;&nbsp;</div></li><li><div>                              &lt;?php _e( 'or', 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>                              &lt;a href=&quot;&lt;?php echo $bws_plugin_banner_to_settings[0]['post_type_url']; ?&gt;&quot;&gt;&lt;?php _e( 'Add New', 'bestwebsoft' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                          &lt;?php } ?&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>                          &lt;button class=&quot;notice-dismiss bws_hide_settings_notice&quot; title=&quot;&lt;?php _e( 'Close notice', 'bestwebsoft' ); ?&gt;&quot;&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                          &lt;input type=&quot;hidden&quot; name=&quot;bws_hide_settings_notice_&lt;?php echo $bws_plugin_banner_to_settings[0]['plugin_options_name']; ?&gt;&quot; value=&quot;hide&quot; /&gt;&nbsp;</div></li><li><div>                          &lt;?php wp_nonce_field( plugin_basename( __FILE__ ), 'bws_settings_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>                      &lt;/form&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;            &nbsp;</div></li><li><div>          &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;updated&quot; style=&quot;padding: 0; margin: 0; border: none; background: none;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;bws_banner_on_plugin_page bws_banner_to_settings_joint&quot;&gt;    &nbsp;</div></li><li><div>                      &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>                          &lt;button class=&quot;notice-dismiss bws_hide_settings_notice&quot; title=&quot;&lt;?php _e( 'Close notice', 'bestwebsoft' ); ?&gt;&quot;&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                          &lt;div class=&quot;bws-text&quot;&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;icon&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;span class=&quot;dashicons dashicons-admin-plugins&quot;&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                              &lt;/div&gt;                                                            &nbsp;</div></li><li><div>                              &lt;strong&gt;&lt;?php _e( 'Thank you for installing plugins by BestWebSoft!', 'bestwebsoft' ); ?&gt;&lt;/strong&gt;&nbsp;</div></li><li><div>                              &lt;div class=&quot;hide-if-no-js bws-more-links&quot;&gt;&nbsp;</div></li><li><div>                                  &lt;a href=&quot;#&quot; class=&quot;bws-more&quot;&gt;&lt;?php _e( 'More Details', 'bestwebsoft' ); ?&gt;&lt;/a&gt;        &nbsp;</div></li><li><div>                                  &lt;a href=&quot;#&quot; class=&quot;bws-less hidden&quot;&gt;&lt;?php _e( 'Less Details', 'bestwebsoft' ); ?&gt;&lt;/a&gt;    &nbsp;</div></li><li><div>                              &lt;/div&gt;            &nbsp;</div></li><li><div>                              &lt;?php wp_nonce_field( plugin_basename( __FILE__ ), 'bws_settings_nonce_name' ); ?&gt;                                &nbsp;</div></li><li><div>                              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;/div&gt;&nbsp;</div></li><li><div>                          &lt;div class=&quot;bws-details hide-if-js&quot;&gt;&nbsp;</div></li><li><div>                              &lt;?php foreach ( $bws_plugin_banner_to_settings as $value ) { ?&gt;        &nbsp;</div></li><li><div>                                  &lt;div&gt;        &nbsp;</div></li><li><div>                                      &lt;strong&gt;&lt;?php echo str_replace( ' by BestWebSoft', '', $value['plugin_info']['Name'] ); ?&gt;&lt;/strong&gt;&ensp;&lt;a href=&quot;&lt;?php echo $value['settings_url']; ?&gt;&quot;&gt;&lt;?php _e( 'Settings', 'bestwebsoft' ); ?&gt;&lt;/a&gt; &nbsp;</div></li><li><div>                                      &lt;?php if ( false != $value['post_type_url'] ) { ?&gt;&nbsp;</div></li><li><div>                                          &ensp;|&ensp;&lt;a target=&quot;_blank&quot; href=&quot;&lt;?php echo $value['post_type_url']; ?&gt;&quot;&gt;&lt;?php _e( 'Add New', 'bestwebsoft' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                      &lt;?php } ?&gt;&nbsp;</div></li><li><div>                                      &lt;input type=&quot;hidden&quot; name=&quot;bws_hide_settings_notice_&lt;?php echo $value['plugin_options_name']; ?&gt;&quot; value=&quot;hide&quot; /&gt;&nbsp;</div></li><li><div>                                  &lt;/div&gt;        &nbsp;</div></li><li><div>                              &lt;?php } ?&gt;        &nbsp;</div></li><li><div>                          &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/form&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;?php }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_plugin_banner' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_banner( $plugin_info, $this_banner_prefix, $link_slug, $link_key, $link_pn, $banner_url_or_slug ) {&nbsp;</div></li><li><div>      global $wp_version, $bstwbsftwppdtplgns_cookie_add, $bstwbsftwppdtplgns_banner_array;&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      if ( empty( $bstwbsftwppdtplgns_banner_array ) ) {&nbsp;</div></li><li><div>          if ( ! function_exists( 'bws_get_banner_array' ) )&nbsp;</div></li><li><div>              require_once( dirname( __FILE__ ) . '/bws_menu.php' );&nbsp;</div></li><li><div>          bws_get_banner_array();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( false == strrpos( $banner_url_or_slug, '/' ) ) {&nbsp;</div></li><li><div>          $banner_url_or_slug = '<span class="comment"><span class="comment"><span class="comment">//ps.w.org/' . $banner_url_or_slug . '/assets/icon-128x128.png';</span></span></span>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! function_exists( 'is_plugin_active' ) )&nbsp;</div></li><li><div>          require_once( ABSPATH . 'wp-admin/includes/plugin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $all_plugins = get_plugins();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this_banner = $this_banner_prefix . '_hide_banner_on_plugin_page';&nbsp;</div></li><li><div>      foreach ( $bstwbsftwppdtplgns_banner_array as $key =&gt; $value ) {&nbsp;</div></li><li><div>          if ( $this_banner == $value[0] ) {&nbsp;</div></li><li><div>              if ( ! isset( $bstwbsftwppdtplgns_cookie_add ) ) {&nbsp;</div></li><li><div>                  echo '&lt;script type=&quot;text/javascript&quot; src=&quot;' . plugins_url( 'js/c_o_o_k_i_e.js', __FILE__ ) . '&quot;&gt;&lt;/script&gt;';&nbsp;</div></li><li><div>                  $bstwbsftwppdtplgns_cookie_add = true;&nbsp;</div></li><li><div>              } ?&gt;&nbsp;</div></li><li><div>              &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                  (function($) {&nbsp;</div></li><li><div>                      $(document).ready( function() {&nbsp;</div></li><li><div>                          var hide_message = $.cookie( '&lt;?php echo $this_banner_prefix; ?&gt;_hide_banner_on_plugin_page' );&nbsp;</div></li><li><div>                          if ( hide_message == &quot;true&quot; ) {&nbsp;</div></li><li><div>                              $( &quot;.&lt;?php echo $this_banner_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;none&quot; );&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              $( &quot;.&lt;?php echo $this_banner_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;block&quot; );&nbsp;</div></li><li><div>                          };&nbsp;</div></li><li><div>                          $( &quot;.&lt;?php echo $this_banner_prefix; ?&gt;_close_icon&quot; ).click( function() {&nbsp;</div></li><li><div>                              $( &quot;.&lt;?php echo $this_banner_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;none&quot; );&nbsp;</div></li><li><div>                              $.cookie( &quot;&lt;?php echo $this_banner_prefix; ?&gt;_hide_banner_on_plugin_page&quot;, &quot;true&quot;, { expires: 32 } );&nbsp;</div></li><li><div>                          });&nbsp;</div></li><li><div>                      });&nbsp;</div></li><li><div>                  })(jQuery);&nbsp;</div></li><li><div>              &lt;/script&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;updated&quot; style=&quot;padding: 0; margin: 0; border: none; background: none;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;&lt;?php echo $this_banner_prefix; ?&gt;_message bws_banner_on_plugin_page bws_go_pro_banner&quot; style=&quot;display: none;&quot;&gt;&nbsp;</div></li><li><div>                      &lt;button class=&quot;&lt;?php echo $this_banner_prefix; ?&gt;_close_icon close_icon notice-dismiss bws_hide_settings_notice&quot; title=&quot;&lt;?php _e( 'Close notice', 'bestwebsoft' ); ?&gt;&quot;&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;icon&quot;&gt;&nbsp;</div></li><li><div>                          &lt;img title=&quot;&quot; src=&quot;&lt;?php echo esc_attr( $banner_url_or_slug ); ?&gt;&quot; alt=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;                        &nbsp;</div></li><li><div>                      &lt;div class=&quot;text&quot;&gt;&lt;?php&nbsp;</div></li><li><div>                          _e( 'It*s time to upgrade your', 'bestwebsoft' ); ?&gt; &lt;strong&gt;&lt;?php echo $plugin_info['Name']; ?&gt; plugin&lt;/strong&gt; &lt;?php _e( 'to', 'bestwebsoft' ); ?&gt; &lt;strong&gt;Pro&lt;/strong&gt; &lt;?php _e( 'version!', 'bestwebsoft' ); ?&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                          &lt;span&gt;&lt;?php _e( 'Extend standard plugin functionality with new great options.', 'bestwebsoft' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;button_div&quot;&gt;&nbsp;</div></li><li><div>                          &lt;a class=&quot;button&quot; target=&quot;_blank&quot; href=&quot;http:<span class="comment">//bestwebsoft.com/products/&lt;?php echo $link_slug; ?&gt;/?k=&lt;?php echo $link_key; ?&gt;&amp;pn=&lt;?php echo $link_pn; ?&gt;&amp;v=&lt;?php echo $plugin_info[&quot;Version&quot;]; ?&gt;&amp;wp_v=&lt;?php echo $wp_version; ?&gt;&quot;&gt;&lt;?php _e( 'Learn More', 'bestwebsoft' ); ?&gt;&lt;/a&gt;</span>&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;?php break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( isset( $all_plugins[ $value[1] ] ) && $all_plugins[ $value[1] ][&quot;Version&quot;] &gt;= $value[2] && is_plugin_active( $value[1] ) && ! isset( $_COOKIE[ $value[0] ] ) ) {&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_plugin_reviews_block' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_reviews_block( $plugin_name, $plugin_slug ) { ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;bws-plugin-reviews&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;bws-plugin-reviews-rate&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'If you enjoy our plugin, please give it 5 stars on WordPress', 'bestwebsoft' ); ?&gt;:&nbsp;</div></li><li><div>              &lt;a href=&quot;http:<span class="comment">//wordpress.org/support/view/plugin-reviews/&lt;?php echo $plugin_slug; ?&gt;?filter=5&quot; target=&quot;_blank&quot; title=&quot;&lt;?php echo $plugin_name; ?&gt; reviews&quot;&gt;&lt;?php _e( 'Rate the plugin', 'bestwebsoft' ); ?&gt;&lt;/a&gt;</span>&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;bws-plugin-reviews-support&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'If there is something wrong about it, please contact us', 'bestwebsoft' ); ?&gt;:&nbsp;</div></li><li><div>              &lt;a href=&quot;http:<span class="comment">//support.bestwebsoft.com&quot;&gt;http://support.bestwebsoft.com&lt;/a&gt;</span>&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;bws-plugin-reviews-donate&quot;&gt;&nbsp;</div></li><li><div>              &lt;?php _e( 'Donations play an important role in supporting great projects', 'bestwebsoft' ); ?&gt;:&nbsp;</div></li><li><div>              &lt;a href=&quot;https:<span class="comment">//www.2checkout.com/checkout/purchase?sid=1430388&quantity=10&product_id=13&quot;&gt;Donate&lt;/a&gt;</span>&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_go_pro_tab_check' ) ) {&nbsp;</div></li><li><div>  function bws_go_pro_tab_check( $plugin_basename, $plugin_options_name = false, $is_network_option = false ) {&nbsp;</div></li><li><div>      global $wp_version, $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>      $result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bws_license_key = ( isset( $_POST['bws_license_key'] ) ) ? stripslashes( esc_html( trim( $_POST['bws_license_key'] ) ) ) : &quot;&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $plugin_options_name ) && isset( $_POST['bws_hide_premium_options_submit'] ) && check_admin_referer( $plugin_basename, 'bws_license_nonce_name' ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $plugin_options = ( $is_network_option ) ? get_site_option( $plugin_options_name ) : get_option( $plugin_options_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( !empty( $plugin_options['hide_premium_options'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $key = array_search( get_current_user_id(), $plugin_options['hide_premium_options'] );&nbsp;</div></li><li><div>              if ( false !== $key ) {&nbsp;</div></li><li><div>                  unset( $plugin_options['hide_premium_options'][ $key ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>              if ( $is_network_option )&nbsp;</div></li><li><div>                  update_site_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  update_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $result['message'] = __( 'Check premium options on the plugin settings page!', 'bestwebsoft' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_POST['bws_license_submit'] ) && check_admin_referer( $plugin_basename, 'bws_license_nonce_name' ) ) {&nbsp;</div></li><li><div>          if ( '' != $bws_license_key ) { &nbsp;</div></li><li><div>              if ( strlen( $bws_license_key ) != 18 ) {&nbsp;</div></li><li><div>                  $result['error'] = __( &quot;Wrong license key&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $bws_license_plugin = stripslashes( esc_html( $_POST['bws_license_plugin'] ) );&nbsp;</div></li><li><div>                  if ( isset( $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] ) && $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['time'] &gt; ( time() - (24 * 60 * 60) ) ) {&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] = $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] + 1;&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] = 1;&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['time'] = time();&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">/** download Pro */</span>&nbsp;</div></li><li><div>                  if ( ! function_exists( 'get_plugins' ) )&nbsp;</div></li><li><div>                      require_once( ABSPATH . 'wp-admin/includes/plugin.php' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $all_plugins = get_plugins();&nbsp;</div></li><li><div>                  &nbsp;</div></li><li><div>                  if ( ! array_key_exists( $bws_license_plugin, $all_plugins ) ) {&nbsp;</div></li><li><div>                      $current = get_site_transient( 'update_plugins' );&nbsp;</div></li><li><div>                      if ( is_array( $all_plugins ) && !empty( $all_plugins ) && isset( $current ) && is_array( $current-&gt;response ) ) {&nbsp;</div></li><li><div>                          $to_send = array();&nbsp;</div></li><li><div>                          $to_send[&quot;plugins&quot;][ $bws_license_plugin ] = array();&nbsp;</div></li><li><div>                          $to_send[&quot;plugins&quot;][ $bws_license_plugin ][&quot;bws_license_key&quot;] = $bws_license_key;&nbsp;</div></li><li><div>                          $to_send[&quot;plugins&quot;][ $bws_license_plugin ][&quot;bws_illegal_client&quot;] = true;&nbsp;</div></li><li><div>                          $options = array(&nbsp;</div></li><li><div>                              'timeout' =&gt; ( ( defined( 'DOING_CRON' ) && DOING_CRON ) ? 30 : 3 ), &nbsp;</div></li><li><div>                              'body' =&gt; array( 'plugins' =&gt; serialize( $to_send ) ), &nbsp;</div></li><li><div>                              'user-agent' =&gt; 'WordPress/' . $wp_version . '; ' . get_bloginfo( 'url' ) );&nbsp;</div></li><li><div>                          $raw_response = wp_remote_post( 'http:<span class="comment"><span class="comment">//bestwebsoft.com/wp-content/plugins/paid-products/plugins/update-check/1.0/', $options );</span></span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                          if ( is_wp_error( $raw_response ) || 200 != wp_remote_retrieve_response_code( $raw_response ) ) {&nbsp;</div></li><li><div>                              $result['error'] = __( &quot;Something went wrong. Please try again later. If the error appears again, please contact us&quot;, 'bestwebsoft' ) . ' &lt;a href=&quot;http:<span class="comment">//support.bestwebsoft.com&quot;&gt;BestWebSoft&lt;/a&gt;. ' . __( &quot;We are sorry for inconvenience.&quot;, 'bestwebsoft' );</span>&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              $response = maybe_unserialize( wp_remote_retrieve_body( $raw_response ) );&nbsp;</div></li><li><div>                              if ( is_array( $response ) && !empty( $response ) ) {&nbsp;</div></li><li><div>                                  foreach ( $response as $key =&gt; $value ) {&nbsp;</div></li><li><div>                                      if ( &quot;wrong_license_key&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Wrong license key&quot;, 'bestwebsoft' ); &nbsp;</div></li><li><div>                                      } elseif ( &quot;wrong_domain&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;This license key is bind to another site&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                      } elseif ( &quot;you_are_banned&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Unfortunately, you have exceeded the number of available tries per day. Please, upload the plugin manually.&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                      } elseif ( &quot;time_out&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Unfortunately, Your license has expired. To continue getting top-priority support and plugin updates you should extend it in your&quot;, 'bestwebsoft' ) . ' &lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/wp-admin/admin.php?page=client-area&quot;&gt;Client area&lt;/a&gt;';</span>&nbsp;</div></li><li><div>                                      } elseif ( &quot;duplicate_domen_for_trial&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Unfortunately, the Pro licence was already installed to this domain. The Pro Trial license can be installed only once.&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                                  if ( empty( $result['error'] ) ) {&nbsp;</div></li><li><div>                                      $bstwbsftwppdtplgns_options[ $bws_license_plugin ] = $bws_license_key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      $url = 'http:<span class="comment">//bestwebsoft.com/wp-content/plugins/paid-products/plugins/downloads/?bws_first_download=' . $bws_license_plugin . '&bws_license_key=' . $bws_license_key . '&download_from=5';</span>&nbsp;</div></li><li><div>                                      $uploadDir = wp_upload_dir();&nbsp;</div></li><li><div>                                      $zip_name = explode( '/', $bws_license_plugin );&nbsp;</div></li><li><div>                                      &nbsp;</div></li><li><div>                                      if ( !function_exists( 'curl_init' ) ) { &nbsp;</div></li><li><div>                                          $received_content = file_get_contents( $url );&nbsp;</div></li><li><div>                                      } else {&nbsp;</div></li><li><div>                                          $ch = curl_init();&nbsp;</div></li><li><div>                                          curl_setopt( $ch, CURLOPT_URL, $url );&nbsp;</div></li><li><div>                                          curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );&nbsp;</div></li><li><div>                                          $received_content = curl_exec( $ch );&nbsp;</div></li><li><div>                                          curl_close( $ch );&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      if ( ! $received_content ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Failed to download the zip archive. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                      } else {&nbsp;</div></li><li><div>                                          if ( is_writable( $uploadDir[&quot;path&quot;] ) ) {&nbsp;</div></li><li><div>                                              $file_put_contents = $uploadDir[&quot;path&quot;] . &quot;/&quot; . $zip_name[0] . &quot;.zip&quot;;&nbsp;</div></li><li><div>                                              if ( file_put_contents( $file_put_contents, $received_content ) ) {&nbsp;</div></li><li><div>                                                  @chmod( $file_put_contents, octdec( 755 ) );&nbsp;</div></li><li><div>                                                  if ( class_exists( 'ZipArchive' ) ) {&nbsp;</div></li><li><div>                                                      $zip = new ZipArchive();&nbsp;</div></li><li><div>                                                      if ( $zip-&gt;open( $file_put_contents ) === TRUE ) {&nbsp;</div></li><li><div>                                                          $zip-&gt;extractTo( WP_PLUGIN_DIR );&nbsp;</div></li><li><div>                                                          $zip-&gt;close();&nbsp;</div></li><li><div>                                                      } else {&nbsp;</div></li><li><div>                                                          $result['error'] = __( &quot;Failed to open the zip archive. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                                      }&nbsp;</div></li><li><div>                                                  } elseif ( class_exists( 'Phar' ) ) {&nbsp;</div></li><li><div>                                                      $phar = new PharData( $file_put_contents );&nbsp;</div></li><li><div>                                                      $phar-&gt;extractTo( WP_PLUGIN_DIR );&nbsp;</div></li><li><div>                                                  } else {&nbsp;</div></li><li><div>                                                      $result['error'] = __( &quot;Your server does not support either ZipArchive or Phar. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                                  }&nbsp;</div></li><li><div>                                                  @unlink( $file_put_contents );&nbsp;</div></li><li><div>                                              } else {&nbsp;</div></li><li><div>                                                  $result['error'] = __( &quot;Failed to download the zip archive. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                              }&nbsp;</div></li><li><div>                                          } else {&nbsp;</div></li><li><div>                                              $result['error'] = __( &quot;UploadDir is not writable. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                      <span class="comment"><span class="comment">/** activate Pro */</span></span>&nbsp;</div></li><li><div>                                      if ( file_exists( WP_PLUGIN_DIR . '/' . $zip_name[0] ) ) {&nbsp;</div></li><li><div>                                          if ( is_multisite() && is_plugin_active_for_network( plugin_basename( __FILE__ ) ) ) {&nbsp;</div></li><li><div>                                              <span class="comment"><span class="comment">/** if multisite and free plugin is network activated */</span></span>&nbsp;</div></li><li><div>                                              $active_plugins = get_site_option( 'active_sitewide_plugins' );&nbsp;</div></li><li><div>                                              $active_plugins[ $bws_license_plugin ] = time();&nbsp;</div></li><li><div>                                              update_site_option( 'active_sitewide_plugins', $active_plugins );&nbsp;</div></li><li><div>                                          } else {&nbsp;</div></li><li><div>                                              <span class="comment"><span class="comment">/** activate on a single blog */</span></span>&nbsp;</div></li><li><div>                                              $active_plugins = get_option( 'active_plugins' );&nbsp;</div></li><li><div>                                              array_push( $active_plugins, $bws_license_plugin );&nbsp;</div></li><li><div>                                              update_option( 'active_plugins', $active_plugins );&nbsp;</div></li><li><div>                                          }&nbsp;</div></li><li><div>                                          $result['pro_plugin_is_activated'] = true;&nbsp;</div></li><li><div>                                      } elseif ( empty( $result['error'] ) ) {&nbsp;</div></li><li><div>                                          $result['error'] = __( &quot;Failed to download the zip archive. Please, upload the plugin manually&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                              } else {&nbsp;</div></li><li><div>                                  $result['error'] = __( &quot;Something went wrong. Try again later or upload the plugin manually. We are sorry for inconvenience.&quot;, 'bestwebsoft' ); &nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options[ $bws_license_plugin ] = $bws_license_key;&nbsp;</div></li><li><div>                      <span class="comment"><span class="comment">/** activate Pro */</span></span>&nbsp;</div></li><li><div>                      if ( ! is_plugin_active( $bws_license_plugin ) ) {&nbsp;</div></li><li><div>                          if ( is_multisite() && is_plugin_active_for_network( plugin_basename( __FILE__ ) ) ) {&nbsp;</div></li><li><div>                              <span class="comment"><span class="comment">/** if multisite and free plugin is network activated */</span></span>&nbsp;</div></li><li><div>                              $network_wide = true;&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              <span class="comment"><span class="comment">/** activate on a single blog */</span></span>&nbsp;</div></li><li><div>                              $network_wide = false;&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                          activate_plugin( $bws_license_plugin, NULL, $network_wide );&nbsp;</div></li><li><div>                          $result['pro_plugin_is_activated'] = true;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  if ( is_multisite() )&nbsp;</div></li><li><div>                      update_site_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                      update_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if ( ! empty( $result['pro_plugin_is_activated'] ) )&nbsp;</div></li><li><div>                      delete_transient( 'bws_plugins_update' );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $result['error'] = __( &quot;Please, enter Your license key&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return $result;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function display GO PRO tab - for old plugin version</span>&nbsp;</div></li><li><div><span class="comment">* @deprecated 1.7.6</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_go_pro_tab' ) ) {&nbsp;</div></li><li><div>  function bws_go_pro_tab( $plugin_info, $plugin_basename, $page, $pro_page, $bws_license_plugin, $link_slug, $link_key, $link_pn, $pro_plugin_is_activated = false, $trial_days_number = false ) {&nbsp;</div></li><li><div>      bws_go_pro_tab_show( false, $plugin_info, $plugin_basename, $page, $pro_page, $bws_license_plugin, $link_slug, $link_key, $link_pn, $pro_plugin_is_activated, $trial_days_number );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function display GO PRO tab</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_go_pro_tab_show' ) ) {&nbsp;</div></li><li><div>  function bws_go_pro_tab_show( $bws_hide_premium_options_check, $plugin_info, $plugin_basename, $page, $pro_page, $bws_license_plugin, $link_slug, $link_key, $link_pn, $pro_plugin_is_activated = false, $trial_days_number = false ) {&nbsp;</div></li><li><div>      global $wp_version, $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>      $bws_license_key = ( isset( $_POST['bws_license_key'] ) ) ? stripslashes( esc_html( trim( $_POST['bws_license_key'] ) ) ) : &quot;&quot;;&nbsp;</div></li><li><div>      if ( $pro_plugin_is_activated ) { ?&gt;&nbsp;</div></li><li><div>          &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>              window.setTimeout( function() {&nbsp;</div></li><li><div>                  window.location.href = 'admin.php?page=&lt;?php echo $pro_page; ?&gt;';&nbsp;</div></li><li><div>              }, 5000 );&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( &quot;Congratulations! Pro version of the plugin is successfully installed and activated.&quot;, 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&nbsp;</div></li><li><div>              &lt;?php _e( &quot;Please, go to&quot;, 'bestwebsoft' ); ?&gt; &lt;a href=&quot;admin.php?page=&lt;?php echo $pro_page; ?&gt;&quot;&gt;&lt;?php _e( 'the setting page', 'bestwebsoft' ); ?&gt;&lt;/a&gt; &nbsp;</div></li><li><div>              (&lt;?php _e( &quot;You will be redirected automatically in 5 seconds.&quot;, 'bestwebsoft' ); ?&gt;)&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;?php } else {&nbsp;</div></li><li><div>          if ( $bws_hide_premium_options_check ) { ?&gt;&nbsp;</div></li><li><div>              &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;hidden&quot; name=&quot;bws_hide_premium_options_submit&quot; value=&quot;submit&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;submit&quot; class=&quot;button&quot; value=&quot;&lt;?php _e( 'Show Pro features', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;?php wp_nonce_field( $plugin_basename, 'bws_license_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;/form&gt;&nbsp;</div></li><li><div>          &lt;?php } ?&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php _e( 'Enter your license key to install and activate', 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>                  &lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/products/&lt;?php echo $link_slug; ?&gt;/?k=&lt;?php echo $link_key; ?&gt;&amp;pn=&lt;?php echo $link_pn; ?&gt;&amp;v=&lt;?php echo $plugin_info[&quot;Version&quot;]; ?&gt;&amp;wp_v=&lt;?php echo $wp_version; ?&gt;&quot; target=&quot;_blank&quot; title=&quot;&lt;?php echo $plugin_info[&quot;Name&quot;]; ?&gt; Pro&quot;&gt;Pro&lt;/a&gt; </span>&nbsp;</div></li><li><div>                  &lt;?php _e( 'version of the plugin.', 'bestwebsoft' ); ?&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;bws_info&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e( 'License key can be found in the', 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>                      &lt;a href=&quot;http:<span class="comment"><span class="comment">//bestwebsoft.com/wp-login.php&quot;&gt;Client Area&lt;/a&gt; </span></span>&nbsp;</div></li><li><div>                      &lt;?php _e( '(your username is the email address specified during the purchase).', 'bestwebsoft' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php if ( $trial_days_number !== false )&nbsp;</div></li><li><div>                  $trial_days_number = __( 'or', 'bestwebsoft' ) . ' &lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/products/' . $link_slug . '/trial/&quot; target=&quot;_blank&quot;&gt;' . sprintf( __( 'Start Your Free %s-Day Trial Now', 'bestwebsoft' ), $trial_days_number ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>              if ( isset( $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] ) &&&nbsp;</div></li><li><div>                  '5' &lt; $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['count'] &&&nbsp;</div></li><li><div>                  $bstwbsftwppdtplgns_options['go_pro'][ $bws_license_plugin ]['time'] &gt; ( time() - ( 24 * 60 * 60 ) ) ) { ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input disabled=&quot;disabled&quot; type=&quot;text&quot; name=&quot;bws_license_key&quot; value=&quot;&lt;?php echo $bws_license_key; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input disabled=&quot;disabled&quot; type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php _e( 'Activate', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;?php if ( $trial_days_number !== false ) echo $trial_days_number; ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&lt;?php _e( &quot;Unfortunately, you have exceeded the number of available tries per day. Please, upload the plugin manually.&quot;, 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;text&quot; maxlength=&quot;100&quot; name=&quot;bws_license_key&quot; value=&quot;&lt;?php echo $bws_license_key; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;hidden&quot; name=&quot;bws_license_plugin&quot; value=&quot;&lt;?php echo $bws_license_plugin; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;hidden&quot; name=&quot;bws_license_submit&quot; value=&quot;submit&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php _e( 'Activate', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;?php if ( $trial_days_number !== false ) echo $trial_days_number;&nbsp;</div></li><li><div>                      wp_nonce_field( $plugin_basename, 'bws_license_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php } ?&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_go_pro_from_trial_tab' ) ) {&nbsp;</div></li><li><div>  function bws_go_pro_from_trial_tab( $plugin_info, $plugin_basename, $page, $link_slug, $link_key, $link_pn, $trial_license_is_set = true ) {&nbsp;</div></li><li><div>      global $wp_version, $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>      $bws_license_key = ( isset( $_POST['bws_license_key'] ) ) ? stripslashes( esc_html( trim( $_POST['bws_license_key'] ) ) ) : &quot;&quot;;&nbsp;</div></li><li><div>      if ( $trial_license_is_set ) { ?&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php echo sprintf( __( 'In order to continue using the plugin it is necessary to buy a %s license.', 'bestwebsoft' ), '&lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/products/' . $link_slug . '/?k=' . $link_key . '&amp;pn=' . $link_pn . '&amp;v=' . $plugin_info[&quot;Version&quot;] . '&amp;wp_v=' . $wp_version .'&quot; target=&quot;_blank&quot; title=&quot;' . $plugin_info[&quot;Name&quot;] . '&quot;&gt;Pro&lt;/a&gt;' ) . ' ';</span>&nbsp;</div></li><li><div>                  _e( 'After that you can activate it by entering your license key.', 'bestwebsoft' ); ?&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                  &lt;span class=&quot;bws_info&quot;&gt;&nbsp;</div></li><li><div>                      &lt;?php _e( 'License key can be found in the', 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>                      &lt;a href=&quot;http:<span class="comment"><span class="comment">//bestwebsoft.com/wp-login.php&quot;&gt;Client Area&lt;/a&gt; </span></span>&nbsp;</div></li><li><div>                      &lt;?php _e( '(your username is the email address specified during the purchase).', 'bestwebsoft' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/span&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php if ( isset( $bstwbsftwppdtplgns_options['go_pro'][ $plugin_basename ]['count'] ) &&&nbsp;</div></li><li><div>                  '5' &lt; $bstwbsftwppdtplgns_options['go_pro'][ $plugin_basename ]['count'] &&&nbsp;</div></li><li><div>                  $bstwbsftwppdtplgns_options['go_pro'][ $plugin_basename ]['time'] &gt; ( time() - ( 24 * 60 * 60 ) ) ) { ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input disabled=&quot;disabled&quot; type=&quot;text&quot; name=&quot;bws_license_key&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input disabled=&quot;disabled&quot; type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php _e( 'Activate', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&lt;?php _e( &quot;Unfortunately, you have exceeded the number of available tries per day.&quot;, 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>                  &lt;p&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;text&quot; maxlength=&quot;100&quot; name=&quot;bws_license_key&quot; value=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;hidden&quot; name=&quot;bws_license_plugin&quot; value=&quot;&lt;?php echo $plugin_basename; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;hidden&quot; name=&quot;bws_license_submit&quot; value=&quot;submit&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;input type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php _e( 'Activate', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                      &lt;?php wp_nonce_field( $plugin_basename, 'bws_license_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;?php } ?&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>          &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>              window.setTimeout( function() {&nbsp;</div></li><li><div>                  window.location.href = 'admin.php?page=&lt;?php echo $page; ?&gt;';&nbsp;</div></li><li><div>              }, 5000 );&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( &quot;Congratulations! The Pro license of the plugin is successfully activated.&quot;, 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&nbsp;</div></li><li><div>              &lt;?php _e( &quot;Please, go to&quot;, 'bestwebsoft' ); ?&gt; &lt;a href=&quot;admin.php?page=&lt;?php echo $page; ?&gt;&quot;&gt;&lt;?php _e( 'the setting page', 'bestwebsoft' ); ?&gt;&lt;/a&gt; &nbsp;</div></li><li><div>              (&lt;?php _e( &quot;You will be redirected automatically in 5 seconds.&quot;, 'bestwebsoft' ); ?&gt;)&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_check_pro_license' ) ) {&nbsp;</div></li><li><div>  function bws_check_pro_license( $plugin_basename, $trial_plugin = false ) {&nbsp;</div></li><li><div>      global $wp_version, $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>      $result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_POST['bws_license_submit'] ) && check_admin_referer( $plugin_basename, 'bws_license_nonce_name' ) ) {&nbsp;</div></li><li><div>          $license_key = isset( $_POST['bws_license_key'] ) ? stripslashes( esc_html( trim( $_POST['bws_license_key'] ) ) ) : '';&nbsp;</div></li><li><div>          &nbsp;</div></li><li><div>          if ( '' != $license_key ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              delete_transient( 'bws_plugins_update' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! function_exists( 'get_plugins' ) )&nbsp;</div></li><li><div>                  require_once( ABSPATH . 'wp-admin/includes/plugin.php' );&nbsp;</div></li><li><div>              $plugins_all = get_plugins();&nbsp;</div></li><li><div>              $current = get_site_transient( 'update_plugins' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( is_array( $plugins_all ) && !empty( $plugins_all ) && isset( $current ) && is_array( $current-&gt;response ) ) {&nbsp;</div></li><li><div>                  $to_send = array();&nbsp;</div></li><li><div>                  $to_send[&quot;plugins&quot;][ $plugin_basename ] = $plugins_all[ $plugin_basename ];&nbsp;</div></li><li><div>                  $to_send[&quot;plugins&quot;][ $plugin_basename ][&quot;bws_license_key&quot;] = $license_key;&nbsp;</div></li><li><div>                  $to_send[&quot;plugins&quot;][ $plugin_basename ][&quot;bws_illegal_client&quot;] = true;&nbsp;</div></li><li><div>                  $options = array(&nbsp;</div></li><li><div>                          'timeout' =&gt; ( ( defined('DOING_CRON') && DOING_CRON ) ? 30 : 3), &nbsp;</div></li><li><div>                          'body' =&gt; array( 'plugins' =&gt; serialize( $to_send ) ), &nbsp;</div></li><li><div>                          'user-agent' =&gt; 'WordPress/' . $wp_version . '; ' . get_bloginfo( 'url' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                  $raw_response = wp_remote_post( 'http:<span class="comment"><span class="comment">//bestwebsoft.com/wp-content/plugins/paid-products/plugins/update-check/1.0/', $options );</span></span>&nbsp;</div></li><li><div>                  if ( is_wp_error( $raw_response ) || 200 != wp_remote_retrieve_response_code( $raw_response ) ) {&nbsp;</div></li><li><div>                      $result['error'] = __( 'Something went wrong. Please try again later. If the error appears again, please contact us', 'bestwebsoft' ) . ' &lt;a href=http:<span class="comment"><span class="comment">//support.bestwebsoft.com&gt;BestWebSoft&lt;/a&gt;. ' . __( 'We are sorry for inconvenience.', 'bestwebsoft' );</span></span>&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $response = maybe_unserialize( wp_remote_retrieve_body( $raw_response ) );&nbsp;</div></li><li><div>                      if ( is_array( $response ) && !empty( $response ) ) {&nbsp;</div></li><li><div>                          foreach ( $response as $key =&gt; $value ) {&nbsp;</div></li><li><div>                              if ( &quot;wrong_license_key&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                  $result['error'] = __( 'Wrong license key.', 'bestwebsoft' ); &nbsp;</div></li><li><div>                              } else if ( &quot;wrong_domain&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                  $result['error'] = __( 'This license key is bind to another site.', 'bestwebsoft' );&nbsp;</div></li><li><div>                              } else if ( &quot;time_out&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                  $result['message'] = __( 'This license key is valid, but Your license has expired. If you want to update our plugin in future, you should extend the license.', 'bestwebsoft' );&nbsp;</div></li><li><div>                              } elseif ( &quot;you_are_banned&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                  $result['error'] = __( &quot;Unfortunately, you have exceeded the number of available tries.&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                              } elseif ( &quot;duplicate_domen_for_trial&quot; == $value-&gt;package ) {&nbsp;</div></li><li><div>                                  $result['error'] = __( &quot;Unfortunately, the Pro Trial licence was already installed to this domain. The Pro Trial license can be installed only once.&quot;, 'bestwebsoft' );&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                              if ( empty( $result['message'] ) && empty( $result['error'] ) ) {&nbsp;</div></li><li><div>                                  if ( isset( $value-&gt;trial ) )&nbsp;</div></li><li><div>                                      $result['message'] = __( 'The Pro Trial license key is valid.', 'bestwebsoft' );&nbsp;</div></li><li><div>                                  else&nbsp;</div></li><li><div>                                      $result['message'] = __( 'The license key is valid.', 'bestwebsoft' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                  if ( ! empty( $value-&gt;time_out ) )&nbsp;</div></li><li><div>                                      $result['message'] .= ' ' . __( 'Your license will expire on', 'bestwebsoft' ) . ' ' . $value-&gt;time_out . '.';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                  if ( isset( $value-&gt;trial ) && $trial_plugin != false )&nbsp;</div></li><li><div>                                      $result['message'] .= ' ' . sprintf( __( 'In order to continue using the plugin it is necessary to buy a %s license.', 'bestwebsoft' ), '&lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/products/' . $trial_plugin['link_slug'] . '/?k=' . $trial_plugin['link_key'] . '&pn=' . $trial_plugin['link_pn'] . '&v=' . $trial_plugin['plugin_info']['Version'] . '&wp_v=' . $wp_version . '&quot; target=&quot;_blank&quot; title=&quot;' . $trial_plugin['plugin_info']['Name'] . '&quot;&gt;Pro&lt;/a&gt;' );</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                  if ( isset( $value-&gt;trial ) ) {&nbsp;</div></li><li><div>                                      $bstwbsftwppdtplgns_options['trial'][ $plugin_basename ] = 1;&nbsp;</div></li><li><div>                                  } else {&nbsp;</div></li><li><div>                                      unset( $bstwbsftwppdtplgns_options['trial'][ $plugin_basename ] );&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                              if ( empty( $result['error'] ) ) {&nbsp;</div></li><li><div>                                  if ( $bstwbsftwppdtplgns_options[ $plugin_basename ] != $license_key ) {&nbsp;</div></li><li><div>                                      $bstwbsftwppdtplgns_options[ $plugin_basename ] = $license_key;&nbsp;</div></li><li><div>                                      &nbsp;</div></li><li><div>                                      $file = @fopen( dirname( dirname( __FILE__ ) ) . &quot;/license_key.txt&quot; , &quot;w+&quot; );&nbsp;</div></li><li><div>                                      if ( $file ) {&nbsp;</div></li><li><div>                                          @fwrite( $file, $license_key );&nbsp;</div></li><li><div>                                          @fclose( $file );&nbsp;</div></li><li><div>                                      }&nbsp;</div></li><li><div>                                      $update_option = true;&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                                  &nbsp;</div></li><li><div>                                  if ( $bstwbsftwppdtplgns_options['time_out'][ $plugin_basename ] != $value-&gt;time_out ) {&nbsp;</div></li><li><div>                                      $bstwbsftwppdtplgns_options['time_out'][ $plugin_basename ] = $value-&gt;time_out;&nbsp;</div></li><li><div>                                      $update_option = true;&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                                  &nbsp;</div></li><li><div>                                  if ( isset( $update_option ) ) {&nbsp;</div></li><li><div>                                      if ( is_multisite() )&nbsp;</div></li><li><div>                                          update_site_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>                                      else&nbsp;</div></li><li><div>                                          update_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>                                  }&nbsp;</div></li><li><div>                              }&nbsp;</div></li><li><div>                          }&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          $result['error'] = __( 'Something went wrong. Please try again later. If the error appears again, please contact us', 'bestwebsoft' ) . ' &lt;a href=http:<span class="comment"><span class="comment">//support.bestwebsoft.com&gt;BestWebSoft&lt;/a&gt;. ' . __( 'We are sorry for inconvenience.', 'bestwebsoft' );</span></span>&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $result['error'] = __( 'Please, enter your license key', 'bestwebsoft' );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      return $result;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_check_pro_license_form' ) ) {&nbsp;</div></li><li><div>  function bws_check_pro_license_form( $plugin_basename ) {&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>      $license_key = ( isset( $bstwbsftwppdtplgns_options[ $plugin_basename ] ) ) ? $bstwbsftwppdtplgns_options[ $plugin_basename ] : ''; ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php echo _e( 'If needed you can check if the license key is correct or reenter it in the field below. You can find your license key on your personal page - Client area - on our website', 'bestwebsoft' ) . ' &lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/wp-login.php&quot;&gt;http://bestwebsoft.com/wp-login.php&lt;/a&gt; ' . __( '(your username is the email address specified during the purchase). If necessary, please submit &quot;Lost your password?&quot; request.', 'bestwebsoft' ); ?&gt;&lt;/p&gt;</span>&nbsp;</div></li><li><div>          &lt;p&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;text&quot; maxlength=&quot;100&quot; name=&quot;bws_license_key&quot; value=&quot;&lt;?php echo $license_key; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;hidden&quot; name=&quot;bws_license_submit&quot; value=&quot;submit&quot; /&gt;&nbsp;</div></li><li><div>              &lt;input type=&quot;submit&quot; class=&quot;button&quot; value=&quot;&lt;?php _e( 'Check license key', 'bestwebsoft' ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;?php wp_nonce_field( $plugin_basename, 'bws_license_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_plugin_update_row' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_update_row( $plugin_key, $link_slug = false, $free_plugin_name = false ) {&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options, $wp_version;&nbsp;</div></li><li><div>      $wp_list_table = _get_list_table( 'WP_Plugins_List_Table' );&nbsp;</div></li><li><div>      if ( isset( $bstwbsftwppdtplgns_options['wrong_license_key'][ $plugin_key ] ) ) {&nbsp;</div></li><li><div>          $explode_plugin_key = explode( '/', $plugin_key );&nbsp;</div></li><li><div>          $class = ( $wp_version &gt;= 4.6 ) ? 'active' : '';&nbsp;</div></li><li><div>          $style = ( $wp_version &lt; 4.6 ) ? ' style=&quot;background-color: #FFEBE8;border-color: #CC0000;&quot;' : '';&nbsp;</div></li><li><div>          $div_class = ( $wp_version &gt;= 4.6 ) ? ' notice inline notice-warning notice-alt' : '';&nbsp;</div></li><li><div>          echo '&lt;tr class=&quot;bws-plugin-update-tr plugin-update-tr ' . $class . '&quot; id=&quot;' . $explode_plugin_key[0] . '-update&quot; data-slug=&quot;' . $explode_plugin_key[0] . '&quot; data-plugin=&quot;' . $plugin_key . '&quot;&gt;&nbsp;</div></li><li><div>                  &lt;td colspan=&quot;' . $wp_list_table-&gt;get_column_count() . '&quot; class=&quot;plugin-update colspanchange&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;update-message' . $div_class . '&quot;' . $style . '&gt;';&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;p&gt;';&nbsp;</div></li><li><div>                      echo '&lt;strong&gt;' . __( 'WARNING: Illegal use notification', 'bestwebsoft' ) . '.&lt;/strong&gt; ' . __( 'You can use one license of the Pro plugin for one domain only. Please check and edit your license or domain if necessary using you personal Client Area. We strongly recommend you to solve the problem within 24 hours, otherwise the Pro plugin will be deactivated.', 'bestwebsoft' ) . ' &lt;a target=&quot;_blank&quot; href=&quot;http:<span class="comment">//support.bestwebsoft.com/hc/en-us/articles/204240089&quot;&gt;' . __( 'Learn More', 'bestwebsoft' ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;/p&gt;';&nbsp;</div></li><li><div>                      echo '&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/td&gt;&nbsp;</div></li><li><div>              &lt;/tr&gt;';&nbsp;</div></li><li><div>      } elseif ( isset( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) && strtotime( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) &lt; strtotime( date(&quot;m/d/Y&quot;) ) ) {&nbsp;</div></li><li><div>          $explode_plugin_key = explode( '/', $plugin_key );&nbsp;</div></li><li><div>          $class = ( $wp_version &gt;= 4.6 ) ? 'active' : '';&nbsp;</div></li><li><div>          $style = ( $wp_version &lt; 4.6 ) ? ' style=&quot;color: #8C0000;&quot;' : '';&nbsp;</div></li><li><div>          $div_class = ( $wp_version &gt;= 4.6 ) ? ' notice inline notice-warning notice-alt' : '';&nbsp;</div></li><li><div>          echo '&lt;tr class=&quot;bws-plugin-update-tr plugin-update-tr ' . $class . '&quot; id=&quot;' . $explode_plugin_key[0] . '-update&quot; data-slug=&quot;' . $explode_plugin_key[0] . '&quot; data-plugin=&quot;' . $plugin_key . '&quot;&gt;&nbsp;</div></li><li><div>                  &lt;td colspan=&quot;' . $wp_list_table-&gt;get_column_count() . '&quot; class=&quot;plugin-update colspanchange&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;update-message' . $div_class . '&quot;' . $style . '&gt;';&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;p&gt;';&nbsp;</div></li><li><div>                      if ( isset( $bstwbsftwppdtplgns_options['trial'][ $plugin_key ] ) && $link_slug != false ) {&nbsp;</div></li><li><div>                          echo __( 'Notice: Your Pro Trial license has expired. To continue using the plugin you should buy a Pro license', 'bestwebsoft' ) . ' - &lt;a href=&quot;http:<span class="comment">//bestwebsoft.com/products/' . $link_slug .'/&quot;&gt;http://bestwebsoft.com/products/' . $link_slug . '/&lt;/a&gt;';</span>&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          echo __( 'Your license has expired. To continue getting top-priority support and plugin updates you should extend it.', 'bestwebsoft' ) . ' &lt;a target=&quot;_new&quot; href=&quot;http:<span class="comment">//support.bestwebsoft.com/entries/53487136&quot;&gt;' . __( &quot;Learn more&quot;, 'bestwebsoft' ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;/p&gt;';&nbsp;</div></li><li><div>                  echo '&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/td&gt;&nbsp;</div></li><li><div>              &lt;/tr&gt;';&nbsp;</div></li><li><div>      } elseif ( isset( $bstwbsftwppdtplgns_options['trial'][ $plugin_key ] ) ) {&nbsp;</div></li><li><div>          $explode_plugin_key = explode( '/', $plugin_key );&nbsp;</div></li><li><div>          $class = ( $wp_version &gt;= 4.6 ) ? 'active' : '';&nbsp;</div></li><li><div>          $style = ( $wp_version &lt; 4.6 ) ? ' style=&quot;color: #8C0000;&quot;' : '';&nbsp;</div></li><li><div>          $div_class = ( $wp_version &gt;= 4.6 ) ? ' notice inline notice-warning notice-alt' : '';&nbsp;</div></li><li><div>          echo '&lt;tr class=&quot;bws-plugin-update-tr plugin-update-tr ' . $class . '&quot; id=&quot;' . $explode_plugin_key[0] . '-update&quot; data-slug=&quot;' . $explode_plugin_key[0] . '&quot; data-plugin=&quot;' . $plugin_key . '&quot;&gt;&nbsp;</div></li><li><div>                  &lt;td colspan=&quot;' . $wp_list_table-&gt;get_column_count() . '&quot; class=&quot;plugin-update colspanchange&quot;&gt;&nbsp;</div></li><li><div>                      &lt;div class=&quot;update-message' . $div_class . '&quot;' . $style . '&gt;';&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;p&gt;';&nbsp;</div></li><li><div>                      if ( $free_plugin_name != false ) {&nbsp;</div></li><li><div>                          echo sprintf( __( 'Notice: You are using the Pro Trial license of %s plugin.', 'bestwebsoft' ), $free_plugin_name );&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          _e( 'Notice: You are using the Pro Trial license of plugin.', 'bestwebsoft' );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      if ( isset( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) )&nbsp;</div></li><li><div>                          echo ' ' . __( &quot;The Pro Trial license will expire on&quot;, 'bestwebsoft' ) . ' ' . $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] . '.';&nbsp;</div></li><li><div>                      if ( $wp_version &gt;= 4.6 )&nbsp;</div></li><li><div>                          echo '&lt;/p&gt;';&nbsp;</div></li><li><div>                  echo '&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/td&gt;&nbsp;</div></li><li><div>              &lt;/tr&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_plugin_banner_timeout' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_banner_timeout( $plugin_key, $plugin_prefix, $plugin_name, $banner_url = false ) {&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options, $bstwbsftwppdtplgns_cookie_add;&nbsp;</div></li><li><div>      if ( isset( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) && ( strtotime( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) &lt; strtotime( date(&quot;m/d/Y&quot;) . '+1 month' ) ) && ( strtotime( $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] ) &gt; strtotime( date(&quot;m/d/Y&quot;) ) ) ) {&nbsp;</div></li><li><div>          if ( ! isset( $bstwbsftwppdtplgns_cookie_add ) ) {&nbsp;</div></li><li><div>              echo '&lt;script type=&quot;text/javascript&quot; src=&quot;' . plugins_url( 'js/c_o_o_k_i_e.js', __FILE__ ) . '&quot;&gt;&lt;/script&gt;';&nbsp;</div></li><li><div>              $bstwbsftwppdtplgns_cookie_add = true;&nbsp;</div></li><li><div>          } ?&gt;&nbsp;</div></li><li><div>          &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>              (function($) {&nbsp;</div></li><li><div>                  $(document).ready( function() {&nbsp;</div></li><li><div>                      var hide_message = $.cookie( &quot;&lt;?php echo $plugin_prefix; ?&gt;_timeout_hide_banner_on_plugin_page&quot; );&nbsp;</div></li><li><div>                      if ( hide_message == &quot;true&quot; ) {&nbsp;</div></li><li><div>                          $( &quot;.&lt;?php echo $plugin_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;none&quot; );&nbsp;</div></li><li><div>                      } else {&nbsp;</div></li><li><div>                          $( &quot;.&lt;?php echo $plugin_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;block&quot; );&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      $( &quot;.&lt;?php echo $plugin_prefix; ?&gt;_close_icon&quot; ).click( function() {&nbsp;</div></li><li><div>                          $( &quot;.&lt;?php echo $plugin_prefix; ?&gt;_message&quot; ).css( &quot;display&quot;, &quot;none&quot; );&nbsp;</div></li><li><div>                          $.cookie( &quot;&lt;?php echo $plugin_prefix; ?&gt;_timeout_hide_banner_on_plugin_page&quot;, &quot;true&quot;, { expires: 30 } );&nbsp;</div></li><li><div>                      });&nbsp;</div></li><li><div>                  });&nbsp;</div></li><li><div>              })(jQuery);&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;updated&quot; style=&quot;padding: 0; margin: 0; border: none; background: none;&quot;&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;&lt;?php echo $plugin_prefix; ?&gt;_message bws_banner_on_plugin_page bws_banner_timeout&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>                  &lt;button class=&quot;&lt;?php echo $plugin_prefix; ?&gt;_close_icon close_icon notice-dismiss bws_hide_settings_notice&quot; title=&quot;&lt;?php _e( 'Close notice', 'bestwebsoft' ); ?&gt;&quot;&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;icon&quot;&gt;&nbsp;</div></li><li><div>                      &lt;img title=&quot;&quot; src=&quot;&lt;?php echo $banner_url; ?&gt;&quot; alt=&quot;&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;text&quot;&gt;&lt;?php _e( &quot;You license for&quot;, 'bestwebsoft' ); ?&gt; &lt;strong&gt;&lt;?php echo $plugin_name; ?&gt;&lt;/strong&gt; &lt;?php echo __( &quot;expires on&quot;, 'bestwebsoft' ) . ' ' . $bstwbsftwppdtplgns_options['time_out'][ $plugin_key ] . ' ' . __( &quot;and you won't be granted TOP-PRIORITY SUPPORT or UPDATES.&quot;, 'bestwebsoft' ); ?&gt; &lt;a target=&quot;_new&quot; href=&quot;http:<span class="comment">//support.bestwebsoft.com/entries/53487136&quot;&gt;&lt;?php _e( &quot;Learn more&quot;, 'bestwebsoft' ); ?&gt;&lt;/a&gt;&lt;/div&gt;</span>&nbsp;</div></li><li><div>              &lt;/div&gt;  &nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_plugin_banner_to_settings' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_banner_to_settings( $plugin_info, $plugin_options_name, $banner_url_or_slug, $settings_url, $post_type_url = false ) {&nbsp;</div></li><li><div>      global $wp_version, $bws_plugin_banner_to_settings;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $is_network_admin = is_network_admin();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $plugin_options = $is_network_admin ? get_site_option( $plugin_options_name ) : get_option( $plugin_options_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $plugin_options['display_settings_notice'] ) && 0 == $plugin_options['display_settings_notice'] )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      if ( isset( $_POST['bws_hide_settings_notice_' . $plugin_options_name ] ) && check_admin_referer( plugin_basename( __FILE__ ), 'bws_settings_nonce_name' ) ) {&nbsp;</div></li><li><div>          $plugin_options['display_settings_notice'] = 0;&nbsp;</div></li><li><div>          if ( $is_network_admin )&nbsp;</div></li><li><div>              update_site_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              update_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( false == strrpos( $banner_url_or_slug, '/' ) ) {&nbsp;</div></li><li><div>          $banner_url_or_slug = '<span class="comment"><span class="comment"><span class="comment">//ps.w.org/' . $banner_url_or_slug . '/assets/icon-128x128.png';</span></span></span>&nbsp;</div></li><li><div>      } &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $bws_plugin_banner_to_settings[] = array(&nbsp;</div></li><li><div>          'plugin_info' =&gt; $plugin_info, &nbsp;</div></li><li><div>          'plugin_options_name' =&gt; $plugin_options_name, &nbsp;</div></li><li><div>          'banner_url' =&gt; $banner_url_or_slug, &nbsp;</div></li><li><div>          'settings_url' =&gt; $settings_url, &nbsp;</div></li><li><div>          'post_type_url' =&gt; $post_type_url&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_plugin_suggest_feature_banner' ) ) {&nbsp;</div></li><li><div>  function bws_plugin_suggest_feature_banner( $plugin_info, $plugin_options_name, $banner_url_or_slug ) {&nbsp;</div></li><li><div>      global $wp_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $is_network_admin = is_network_admin();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $plugin_options = $is_network_admin ? get_site_option( $plugin_options_name ) : get_option( $plugin_options_name );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $plugin_options['display_suggest_feature_banner'] ) && 0 == $plugin_options['display_suggest_feature_banner'] )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $plugin_options['first_install'] ) ) {&nbsp;</div></li><li><div>          $plugin_options['first_install'] = strtotime( &quot;now&quot; );&nbsp;</div></li><li><div>          $update_option = $return = true;&nbsp;</div></li><li><div>      } elseif ( strtotime( '-2 week' ) &lt; $plugin_options['first_install'] ) {&nbsp;</div></li><li><div>          $return = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $plugin_options['go_settings_counter'] ) ) {&nbsp;</div></li><li><div>          $plugin_options['go_settings_counter'] = 1;&nbsp;</div></li><li><div>          $update_option = $return = true;&nbsp;</div></li><li><div>      } elseif ( 20 &gt; $plugin_options['go_settings_counter'] ) {&nbsp;</div></li><li><div>          $plugin_options['go_settings_counter'] = $plugin_options['go_settings_counter'] + 1;&nbsp;</div></li><li><div>          $update_option = $return = true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $update_option ) ) {&nbsp;</div></li><li><div>          if ( $is_network_admin )&nbsp;</div></li><li><div>              update_site_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              update_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $return ) )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      if ( isset( $_POST['bws_hide_suggest_feature_banner_' . $plugin_options_name ] ) && check_admin_referer( $plugin_info['Name'], 'bws_settings_nonce_name' ) ) {&nbsp;</div></li><li><div>          $plugin_options['display_suggest_feature_banner'] = 0;&nbsp;</div></li><li><div>          if ( $is_network_admin )&nbsp;</div></li><li><div>              update_site_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              update_option( $plugin_options_name, $plugin_options );&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( false == strrpos( $banner_url_or_slug, '/' ) ) {&nbsp;</div></li><li><div>          $banner_url_or_slug = '<span class="comment"><span class="comment"><span class="comment">//ps.w.org/' . $banner_url_or_slug . '/assets/icon-128x128.png';</span></span></span>&nbsp;</div></li><li><div>      } ?&gt;&nbsp;</div></li><li><div>      &lt;div class=&quot;updated&quot; style=&quot;padding: 0; margin: 0; border: none; background: none;&quot;&gt;&nbsp;</div></li><li><div>          &lt;div class=&quot;bws_banner_on_plugin_page bws_suggest_feature_banner&quot;&gt;&nbsp;</div></li><li><div>              &lt;div class=&quot;icon&quot;&gt;&nbsp;</div></li><li><div>                  &lt;img title=&quot;&quot; src=&quot;&lt;?php echo esc_attr( $banner_url_or_slug ); ?&gt;&quot; alt=&quot;&quot; /&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;                        &nbsp;</div></li><li><div>              &lt;div class=&quot;text&quot;&gt;&nbsp;</div></li><li><div>                  &lt;strong&gt;&lt;?php _e( 'Thank you for choosing', 'bestwebsoft' ); ?&gt; &lt;?php echo $plugin_info['Name']; ?&gt; plugin!&lt;/strong&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                  &lt;?php _e( &quot;If you have a feature, suggestion or idea you'd like to see in the plugin, we'd love to hear about it!&quot;, 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>                  &lt;a target=&quot;_blank&quot; href=&quot;http:<span class="comment">//support.bestwebsoft.com/hc/en-us/requests/new&quot;&gt;&lt;?php _e( 'Suggest a Feature', 'bestwebsoft' ); ?&gt;&lt;/a&gt; </span>&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>              &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>                  &lt;button class=&quot;notice-dismiss bws_hide_settings_notice&quot; title=&quot;&lt;?php _e( 'Close notice', 'bestwebsoft' ); ?&gt;&quot;&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;bws_hide_suggest_feature_banner_&lt;?php echo $plugin_options_name; ?&gt;&quot; value=&quot;hide&quot; /&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( $plugin_info['Name'], 'bws_settings_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>              &lt;/form&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_show_settings_notice' ) ) {&nbsp;</div></li><li><div>  function bws_show_settings_notice() { ?&gt;&nbsp;</div></li><li><div>      &lt;div id=&quot;bws_save_settings_notice&quot; class=&quot;updated fade below-h2&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&nbsp;</div></li><li><div>              &lt;strong&gt;&lt;?php _e( 'Notice', 'bestwebsoft' ); ?&gt;&lt;/strong&gt;: &lt;?php _e( &quot;The plugin's settings have been changed.&quot;, 'bestwebsoft' ); ?&gt; &nbsp;</div></li><li><div>              &lt;a class=&quot;bws_save_anchor&quot; href=&quot;#bws-submit-button&quot;&gt;&lt;?php _e( 'Save Changes', 'bestwebsoft' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_hide_premium_options' ) ) {&nbsp;</div></li><li><div>  function bws_hide_premium_options( $options ) {&nbsp;</div></li><li><div>      if ( ! isset( $options['hide_premium_options'] ) || ! is_array( $options['hide_premium_options'] ) )&nbsp;</div></li><li><div>          $options['hide_premium_options'] = array();&nbsp;</div></li><li><div>      &nbsp;</div></li><li><div>      $options['hide_premium_options'][] = get_current_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return array( &nbsp;</div></li><li><div>              'message' =&gt; __( 'You can always look at premium options by clicking on the &quot;Show Pro features&quot; in the &quot;Go PRO&quot; tab', 'bestwebsoft' ), &nbsp;</div></li><li><div>              'options' =&gt; $options );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_hide_premium_options_check' ) ) {&nbsp;</div></li><li><div>  function bws_hide_premium_options_check( $options ) {&nbsp;</div></li><li><div>      if ( ! empty( $options['hide_premium_options'] ) && in_array( get_current_user_id(), $options['hide_premium_options'] ) )&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      else&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_plugins_admin_init' ) ) {&nbsp;</div></li><li><div>  function bws_plugins_admin_init() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_GET['bws_activate_plugin'] ) && check_admin_referer( 'bws_activate_plugin' . $_GET['bws_activate_plugin'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $plugin = isset( $_GET['bws_activate_plugin'] ) ? $_GET['bws_activate_plugin'] : '';                &nbsp;</div></li><li><div>          $result = activate_plugin( $plugin, '', is_network_admin() );                &nbsp;</div></li><li><div>          if ( is_wp_error( $result ) ) {&nbsp;</div></li><li><div>              if ( 'unexpected_output' == $result-&gt;get_error_code() ) {&nbsp;</div></li><li><div>                  $redirect = self_admin_url( 'admin.php?page=bws_panel&error=true&charsout=' . strlen( $result-&gt;get_error_data() ) . '&plugin=' . $plugin );&nbsp;</div></li><li><div>                  wp_redirect( add_query_arg( '_error_nonce', wp_create_nonce( 'plugin-activation-error_' . $plugin ), $redirect ) );&nbsp;</div></li><li><div>                  exit();&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  wp_die( $result );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! is_network_admin() ) {&nbsp;</div></li><li><div>              $recent = (array) get_option( 'recently_activated' );&nbsp;</div></li><li><div>              unset( $recent[ $plugin ] );&nbsp;</div></li><li><div>              update_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $recent = (array) get_site_option( 'recently_activated' );&nbsp;</div></li><li><div>              unset( $recent[ $plugin ] );&nbsp;</div></li><li><div>              update_site_option( 'recently_activated', $recent );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          wp_redirect( self_admin_url( 'admin.php?page=bws_panel&activate=true' ) );&nbsp;</div></li><li><div>          exit();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_GET['page'] ) && $_GET['page'] == 'bws_panel' ) {&nbsp;</div></li><li><div>          if ( ! session_id() )&nbsp;</div></li><li><div>              @session_start();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      bws_add_editor_buttons();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_admin_enqueue_scripts' ) ) {&nbsp;</div></li><li><div>  function bws_admin_enqueue_scripts() {&nbsp;</div></li><li><div>      global $wp_version;&nbsp;</div></li><li><div>      wp_enqueue_style( 'bws-admin-css', plugins_url( 'css/general_style.css', __FILE__ ) );&nbsp;</div></li><li><div>      wp_enqueue_script( 'bws-admin-scripts', plugins_url( 'js/general_script.js', __FILE__ ), array( 'jquery' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_GET['page'] ) && in_array( $_GET['page'], array( 'bws_panel', 'bws_themes', 'bws_system_status' ) ) ) {&nbsp;</div></li><li><div>          wp_enqueue_style( 'bws_menu_style', plugins_url( 'css/style.css', __FILE__ ) );&nbsp;</div></li><li><div>          wp_enqueue_script( 'bws_menu_script', plugins_url( 'js/bws_menu.js' , __FILE__ ) );&nbsp;</div></li><li><div>          wp_enqueue_script( 'theme-install' );&nbsp;</div></li><li><div>          add_thickbox();&nbsp;</div></li><li><div>          wp_enqueue_script( 'plugin-install' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_plugins_admin_head' ) ) {&nbsp;</div></li><li><div>  function bws_plugins_admin_head() {&nbsp;</div></li><li><div>      global $bws_shortcode_list, $wp_version, $post_type;&nbsp;</div></li><li><div>      if ( isset( $_GET['page'] ) && $_GET['page'] == &quot;bws_panel&quot; ) { ?&gt;&nbsp;</div></li><li><div>          &lt;noscript&gt;&nbsp;</div></li><li><div>              &lt;style type=&quot;text/css&quot;&gt;&nbsp;</div></li><li><div>                  .bws_product_button {&nbsp;</div></li><li><div>                      display: inline-block;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              &lt;/style&gt;&nbsp;</div></li><li><div>          &lt;/noscript&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>      if ( 4.2 &gt; $wp_version ) {&nbsp;</div></li><li><div>          $plugin_dir_array = explode( '/', plugin_basename( __FILE__ ) );&nbsp;</div></li><li><div>          $plugin_dir = $plugin_dir_array[0]; ?&gt;&nbsp;</div></li><li><div>          &lt;style type=&quot;text/css&quot;&gt;&nbsp;</div></li><li><div>              .bws_hide_settings_notice, &nbsp;</div></li><li><div>              .bws_hide_premium_options {&nbsp;</div></li><li><div>                  width: 11px;&nbsp;</div></li><li><div>                  height: 11px;&nbsp;</div></li><li><div>                  border: none;&nbsp;</div></li><li><div>                  background: url(&quot;&lt;?php echo plugins_url( $plugin_dir . '/bws_menu/images/close_banner.png' ); ?&gt;&quot;) no-repeat center center;&nbsp;</div></li><li><div>                  box-shadow: none;&nbsp;</div></li><li><div>                  float: right;&nbsp;</div></li><li><div>                  margin: 8px;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              .bws_hide_settings_notice:hover, &nbsp;</div></li><li><div>              .bws_hide_premium_options:hover {&nbsp;</div></li><li><div>                  cursor: pointer;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              .bws_hide_premium_options {&nbsp;</div></li><li><div>                  position: relative;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          &lt;/style&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>      if ( ! empty( $bws_shortcode_list ) ) { ?&gt;&nbsp;</div></li><li><div>          &lt;!-- TinyMCE Shortcode Plugin --&gt;&nbsp;</div></li><li><div>          &lt;script type='text/javascript'&gt;&nbsp;</div></li><li><div>              var bws_shortcode_button = {&nbsp;</div></li><li><div>                  'label': '&lt;?php esc_attr_e( &quot;Add BWS Shortcode&quot;, &quot;bestwebsoft&quot; ); ?&gt;', &nbsp;</div></li><li><div>                  'title': '&lt;?php esc_attr_e( &quot;Add BWS Plugins Shortcode&quot;, &quot;bestwebsoft&quot; ); ?&gt;', &nbsp;</div></li><li><div>                  'icon_url': '&lt;?php echo plugins_url( &quot;images/shortcode-icon.png&quot; , __FILE__ ); ?&gt;', &nbsp;</div></li><li><div>                  'function_name': [&nbsp;</div></li><li><div>                      &lt;?php foreach ( $bws_shortcode_list as $key =&gt; $value ) {&nbsp;</div></li><li><div>                          if ( isset( $value['js_function'] ) )&nbsp;</div></li><li><div>                              echo &quot;'&quot; . $value['js_function'] . &quot;', &quot;;    &nbsp;</div></li><li><div>                      } ?&gt;&nbsp;</div></li><li><div> ], &nbsp;</div></li><li><div>                  'wp_version' : '&lt;?php echo $wp_version; ?&gt;'&nbsp;</div></li><li><div>              };&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>          &lt;!-- TinyMCE Shortcode Plugin --&gt;&nbsp;</div></li><li><div>          &lt;?php if ( isset( $post_type ) && in_array( $post_type, array( 'post', 'page' ) ) ) {&nbsp;</div></li><li><div>              $tooltip_args = array(&nbsp;</div></li><li><div>                  'tooltip_id' =&gt; 'bws_shortcode_button_tooltip', &nbsp;</div></li><li><div>                  'css_selector' =&gt; '.mce-bws_shortcode_button', &nbsp;</div></li><li><div>                  'actions' =&gt; array(&nbsp;</div></li><li><div>                      'click' =&gt; false, &nbsp;</div></li><li><div>                      'onload' =&gt; true&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                  'content' =&gt; '&lt;h3&gt;' . __( 'Add shortcode', 'bestwebsoft' ) . '&lt;/h3&gt;&lt;p&gt;' . __( &quot;Add BestWebSoft plugins' shortcodes using this button.&quot;, 'bestwebsoft' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div>                  'position' =&gt; array( &nbsp;</div></li><li><div>                      'edge' =&gt; 'right'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                  'set_timeout' =&gt; 2000&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>              if ( $wp_version &lt; '3.9' )&nbsp;</div></li><li><div>                  $tooltip_args['css_selector'] = '.mce_add_bws_shortcode';&nbsp;</div></li><li><div>              bws_add_tooltip_in_admin( $tooltip_args );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } &nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_plugins_include_codemirror' ) ) {&nbsp;</div></li><li><div>  function bws_plugins_include_codemirror() {&nbsp;</div></li><li><div>      wp_enqueue_style( 'codemirror.css', plugins_url( 'css/codemirror.css', __FILE__ ) );&nbsp;</div></li><li><div>      wp_enqueue_script( 'codemirror.js', plugins_url( 'js/codemirror.js', __FILE__ ), array( 'jquery' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Tooltip block</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_add_tooltip_in_admin' ) ) {&nbsp;</div></li><li><div>  function bws_add_tooltip_in_admin( $tooltip_args = array() ) {&nbsp;</div></li><li><div>      new BWS_admin_tooltip( $tooltip_args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! class_exists( 'BWS_admin_tooltip' ) ) {&nbsp;</div></li><li><div>  class BWS_admin_tooltip {&nbsp;</div></li><li><div>      private $tooltip_args;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      public function __construct( $tooltip_args ) {&nbsp;</div></li><li><div>          global $wp_version;&nbsp;</div></li><li><div>          if ( 3.3 &gt; $wp_version )&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          <span class="comment">/** Default arguments */</span>&nbsp;</div></li><li><div>          $tooltip_args_default = array( &nbsp;</div></li><li><div>              'tooltip_id' =&gt; false, &nbsp;</div></li><li><div>              'css_selector' =&gt; false, &nbsp;</div></li><li><div>              'actions' =&gt; array(&nbsp;</div></li><li><div>                  'click' =&gt; true, &nbsp;</div></li><li><div>                  'onload' =&gt; false, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'buttons' =&gt; array(&nbsp;</div></li><li><div>                  'close' =&gt; array(&nbsp;</div></li><li><div>                      'type' =&gt; 'dismiss', &nbsp;</div></li><li><div>                      'text' =&gt; __( 'Close', 'bestwebsoft' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'position' =&gt; array(&nbsp;</div></li><li><div>                  'edge' =&gt; 'top', &nbsp;</div></li><li><div>                  'align' =&gt; 'center', &nbsp;</div></li><li><div>                  'pos-left' =&gt; 0, &nbsp;</div></li><li><div>                  'pos-top' =&gt; 0, &nbsp;</div></li><li><div>                  'zindex' =&gt; 10000 &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'set_timeout' =&gt; 0&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>          $tooltip_args = array_merge( $tooltip_args_default, $tooltip_args );&nbsp;</div></li><li><div>          <span class="comment">/** Check that our merged array has default values */</span>&nbsp;</div></li><li><div>          foreach ( $tooltip_args_default as $arg_key =&gt; $arg_value ) {&nbsp;</div></li><li><div>              if ( is_array( $arg_value ) ) {&nbsp;</div></li><li><div>                  foreach ( $arg_value as $key =&gt; $value) {&nbsp;</div></li><li><div>                      if ( ! isset( $tooltip_args[ $arg_key ][ $key ] ) ) {&nbsp;</div></li><li><div>                          $tooltip_args[ $arg_key ][ $key ] = $tooltip_args_default[ $arg_key ][ $key ];&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">/** Check if tooltip is dismissed */</span>&nbsp;</div></li><li><div>          if ( true === $tooltip_args['actions']['onload'] ) {&nbsp;</div></li><li><div>              if ( in_array( $tooltip_args['tooltip_id'], array_filter( explode( ', ', (string) get_user_meta( get_current_user_id(), 'dismissed_wp_pointers', true ) ) ) ) ) {&nbsp;</div></li><li><div>                  $tooltip_args['actions']['onload'] = false;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">/** Check entered data */</span>&nbsp;</div></li><li><div>          if ( false === $tooltip_args['tooltip_id'] || false === $tooltip_args['css_selector'] || ( false === $tooltip_args['actions']['click'] && false === $tooltip_args['actions']['onload'] ) ) {&nbsp;</div></li><li><div>              <span class="comment">/** if not enough data to output a tooltip or both actions (click, onload) are false */</span>&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              <span class="comment">/** check position */</span>&nbsp;</div></li><li><div>              if ( ! in_array( $tooltip_args['position']['edge'], array( 'left', 'right', 'top', 'bottom' ) ) ) {&nbsp;</div></li><li><div>                  $tooltip_args['position']['edge'] = 'top';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if ( ! in_array( $tooltip_args['position']['align'], array( 'top', 'bottom', 'left', 'right', 'center', ) ) ) {&nbsp;</div></li><li><div>                  $tooltip_args['position']['align'] = 'center';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">/** fix position */</span>&nbsp;</div></li><li><div>          switch ( $tooltip_args['position']['edge'] ) {&nbsp;</div></li><li><div>              case 'left':&nbsp;</div></li><li><div>              case 'right':&nbsp;</div></li><li><div>                  switch ( $tooltip_args['position']['align'] ) {&nbsp;</div></li><li><div>                      case 'top':&nbsp;</div></li><li><div>                      case 'bottom':&nbsp;</div></li><li><div>                          $tooltip_args['position']['align'] = 'center';&nbsp;</div></li><li><div>                          break;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              case 'top':&nbsp;</div></li><li><div>              case 'bottom':&nbsp;</div></li><li><div>                  if ( $tooltip_args['position']['align'] == 'left' ) {&nbsp;</div></li><li><div>                      $tooltip_args['position']['pos-left'] -= 65;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $this-&gt;tooltip_args = $tooltip_args;&nbsp;</div></li><li><div>          <span class="comment">/** add styles and scripts */</span>&nbsp;</div></li><li><div>          wp_enqueue_style( 'wp-pointer' );&nbsp;</div></li><li><div>          wp_enqueue_script( 'wp-pointer' );&nbsp;</div></li><li><div>          <span class="comment">/** add script that displays our tooltip */</span>&nbsp;</div></li><li><div>          add_action( 'admin_print_footer_scripts', array( $this, 'add_scripts' ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Display tooltip</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function add_scripts() {&nbsp;</div></li><li><div>          global $bstwbsftwppdtplgns_tooltip_script_add;&nbsp;</div></li><li><div>          if ( ! isset( $bstwbsftwppdtplgns_tooltip_script_add ) ) {&nbsp;</div></li><li><div>              echo '&lt;script type=&quot;text/javascript&quot; src=&quot;' . plugins_url( 'js/bws_tooltip.js', __FILE__ ) . '&quot;&gt;&lt;/script&gt;';&nbsp;</div></li><li><div>              $bstwbsftwppdtplgns_tooltip_script_add = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          $tooltip_args = $this-&gt;tooltip_args; ?&gt;&nbsp;</div></li><li><div>          &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>              (function($) {&nbsp;</div></li><li><div>                  $(document).ready( function() {&nbsp;</div></li><li><div>                      $.bwsTooltip( &lt;?php echo json_encode( $tooltip_args ); ?&gt; );&nbsp;</div></li><li><div>                  })&nbsp;</div></li><li><div>              })(jQuery);&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_form_restore_default_settings' ) ) {&nbsp;</div></li><li><div>  function bws_form_restore_default_settings( $plugin_basename, $change_permission_attr = '' ) { ?&gt;&nbsp;</div></li><li><div>      &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;            &nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Restore all plugin settings to defaults', 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;                    &nbsp;</div></li><li><div>              &lt;input &lt;?php echo $change_permission_attr; ?&gt; type=&quot;submit&quot; class=&quot;button&quot; value=&quot;&lt;?php _e( 'Restore settings', 'bestwebsoft' ); ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>          &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;input type=&quot;hidden&quot; name=&quot;bws_restore_default&quot; value=&quot;submit&quot; /&gt;&nbsp;</div></li><li><div>          &lt;?php wp_nonce_field( $plugin_basename, 'bws_settings_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>      &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists ( 'bws_form_restore_default_confirm' ) ) {&nbsp;</div></li><li><div>  function bws_form_restore_default_confirm( $plugin_basename ) { ?&gt;&nbsp;</div></li><li><div>      &lt;div&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;?php _e( 'Are you sure you want to restore all settings by default?', 'bestwebsoft' ) ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;form method=&quot;post&quot; action=&quot;&quot;&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;button class=&quot;button&quot; name=&quot;bws_restore_confirm&quot;&gt;&lt;?php _e( 'Yes, restore all settings', 'bestwebsoft' ) ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;button class=&quot;button&quot; name=&quot;bws_restore_deny&quot;&gt;&lt;?php _e( 'No, go back to the settings page', 'bestwebsoft' ) ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                  &lt;?php wp_nonce_field( $plugin_basename, 'bws_settings_nonce_name' ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;/form&gt;&nbsp;</div></li><li><div>      &lt;/div&gt;&nbsp;</div></li><li><div>  &lt;?php }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** shortcode */</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_add_editor_buttons' ) ) {&nbsp;</div></li><li><div>  function bws_add_editor_buttons() {&nbsp;</div></li><li><div>      global $bws_shortcode_list, $wp_version;&nbsp;</div></li><li><div>      if ( $wp_version &lt; '3.3' )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      if ( ! empty( $bws_shortcode_list ) && current_user_can( 'edit_posts' ) && current_user_can( 'edit_pages' ) ) {&nbsp;</div></li><li><div>          add_filter( 'mce_external_plugins', 'bws_add_buttons' );&nbsp;</div></li><li><div>          add_filter( 'mce_buttons', 'bws_register_buttons' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_add_buttons' ) ) {&nbsp;</div></li><li><div>  function bws_add_buttons( $plugin_array ) {&nbsp;</div></li><li><div>      $plugin_array['add_bws_shortcode'] = plugins_url( 'js/shortcode-button.js', __FILE__ );&nbsp;</div></li><li><div>      return $plugin_array;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_register_buttons' ) ) {&nbsp;</div></li><li><div>  function bws_register_buttons( $buttons ) {&nbsp;</div></li><li><div>      array_push( $buttons, 'add_bws_shortcode' ); <span class="comment">/** dropcap', 'recentposts */</span>&nbsp;</div></li><li><div>      return $buttons;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** Generate inline content for the popup window when the &quot;bws shortcode&quot; button is clicked */</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_shortcode_media_button_popup' ) ) {&nbsp;</div></li><li><div>  function bws_shortcode_media_button_popup() { &nbsp;</div></li><li><div>      global $bws_shortcode_list, $wp_version;&nbsp;</div></li><li><div>      if ( $wp_version &lt; '3.3' )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bws_shortcode_list ) ) { ?&gt;&nbsp;</div></li><li><div>          &lt;div id=&quot;bws_shortcode_popup&quot; style=&quot;display:none;&quot;&gt;&nbsp;</div></li><li><div>              &lt;div id=&quot;bws_shortcode_popup_block&quot;&gt;&nbsp;</div></li><li><div>                  &lt;div id=&quot;bws_shortcode_select_plugin&quot;&gt;&nbsp;</div></li><li><div>                      &lt;h4&gt;&lt;?php _e( 'Plugin', 'bestwebsoft' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>                      &lt;select name=&quot;bws_shortcode_select&quot; id=&quot;bws_shortcode_select&quot;&gt;&nbsp;</div></li><li><div>                          &lt;?php foreach ( $bws_shortcode_list as $key =&gt; $value ) { ?&gt;&nbsp;</div></li><li><div>                              &lt;option value=&quot;&lt;?php echo $key; ?&gt;&quot;&gt;&lt;?php echo $value['name']; ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                          &lt;?php } ?&gt;&nbsp;</div></li><li><div>                      &lt;/select&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;div id=&quot;bws_shortcode_content&quot;&gt;&nbsp;</div></li><li><div>                      &lt;h4&gt;&lt;?php _e( 'Shortcode settings', 'bestwebsoft' ); ?&gt;&lt;/h4&gt;&nbsp;</div></li><li><div>                      &lt;?php echo apply_filters( 'bws_shortcode_button_content', '' ); ?&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;div id=&quot;bws_shortcode_content_bottom&quot;&gt;&nbsp;</div></li><li><div>                      &lt;p&gt;&lt;?php _e( 'The shortcode will be inserted', 'bestwebsoft' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                      &lt;div id=&quot;bws_shortcode_block&quot;&gt;&lt;div id=&quot;bws_shortcode_display&quot;&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;/div&gt;&nbsp;</div></li><li><div>                  &lt;?php if ( $wp_version &lt; '3.9' ) { ?&gt;&nbsp;</div></li><li><div>                      &lt;p&gt;&nbsp;</div></li><li><div>                          &lt;button class=&quot;button-primary primary bws_shortcode_insert&quot;&gt;&lt;?php _e( 'Insert', 'bestwebsoft' ); ?&gt;&lt;/button&gt;&nbsp;</div></li><li><div>                      &lt;/p&gt;&nbsp;</div></li><li><div>                  &lt;?php } ?&gt;&nbsp;</div></li><li><div>              &lt;/div&gt;&nbsp;</div></li><li><div>          &lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php }&nbsp;</div></li><li><div>      if ( $wp_version &lt; '3.9' ) { ?&gt;&nbsp;</div></li><li><div>          &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>              (function($) {&nbsp;</div></li><li><div>                  $( '.bws_shortcode_insert' ).on( 'click', function() { &nbsp;</div></li><li><div>                      var shortcode = $( '#TB_ajaxContent #bws_shortcode_display' ).text();&nbsp;</div></li><li><div>                      if ( '' != shortcode ) {&nbsp;</div></li><li><div>                          <span class="comment">/* insert shortcode to tinymce */</span>&nbsp;</div></li><li><div>                          if ( !tinyMCE.activeEditor || tinyMCE.activeEditor.isHidden() ) {&nbsp;</div></li><li><div>                              $( 'textarea#content' ).val( shortcode );&nbsp;</div></li><li><div>                          } else {&nbsp;</div></li><li><div>                              tinyMCE.execCommand( 'mceInsertContent', false, shortcode );&nbsp;</div></li><li><div>                          }               &nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                      <span class="comment">/* close the thickbox after adding shortcode to editor */</span>&nbsp;</div></li><li><div>                      self.parent.tb_remove();&nbsp;</div></li><li><div>                  });&nbsp;</div></li><li><div>              })(jQuery);&nbsp;</div></li><li><div>          &lt;/script&gt;&nbsp;</div></li><li><div>      &lt;?php } &nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/** add help tab  */</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_help_tab' ) ) {&nbsp;</div></li><li><div>  function bws_help_tab( $screen, $args ) {&nbsp;</div></li><li><div>      $url = ( ! empty( $args['section'] ) ) ? 'http:<span class="comment">//support.bestwebsoft.com/hc/en-us/sections/' . $args['section'] : 'http://support.bestwebsoft.com/';</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $content = '&lt;p&gt;&lt;a href=&quot;' . $url . '&quot; target=&quot;_blank&quot;&gt;' . __( 'Visit Help Center', 'bestwebsoft' ) . '&lt;/a&gt;&lt;/p&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;add_help_tab( &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              'id' =&gt; $args['id'] . '_help_tab', &nbsp;</div></li><li><div>              'title' =&gt; __( 'FAQ', 'bestwebsoft' ), &nbsp;</div></li><li><div>              'content' =&gt; $content&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;set_help_sidebar(&nbsp;</div></li><li><div>          '&lt;p&gt;&lt;strong&gt;' . __( 'For more information:', 'bestwebsoft' ) . '&lt;/strong&gt;&lt;/p&gt;' .&nbsp;</div></li><li><div>          '&lt;p&gt;&lt;a href=&quot;https:<span class="comment">//drive.google.com/folderview?id=0B5l8lO-CaKt9VGh0a09vUjNFNjA&usp=sharing#list&quot; target=&quot;_blank&quot;&gt;' . __( 'Documentation', 'bestwebsoft' ) . '&lt;/a&gt;&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>          '&lt;p&gt;&lt;a href=&quot;http:<span class="comment">//www.youtube.com/user/bestwebsoft/playlists?flow=grid&sort=da&view=1&quot; target=&quot;_blank&quot;&gt;' . __( 'Video Instructions', 'bestwebsoft' ) . '&lt;/a&gt;&lt;/p&gt;' .</span>&nbsp;</div></li><li><div>          '&lt;p&gt;&lt;a href=&quot;http:<span class="comment">//support.bestwebsoft.com/hc/en-us/requests/new&quot; target=&quot;_blank&quot;&gt;' . __( 'Submit a Request', 'bestwebsoft' ) . '&lt;/a&gt;&lt;/p&gt;'</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">* Function display 'Custom code' tab</span>&nbsp;</div></li><li><div><span class="comment">*/</span>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_custom_code_tab' ) ) {&nbsp;</div></li><li><div>  function bws_custom_code_tab() {&nbsp;</div></li><li><div>      if ( ! current_user_can( 'edit_plugins' ) )&nbsp;</div></li><li><div>          wp_die( __( 'You do not have sufficient permissions to edit plugins for this site.', 'bestwebsoft' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $message = $content = '';&nbsp;</div></li><li><div>      $is_css_active = $is_php_active = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $upload_dir = wp_upload_dir();&nbsp;</div></li><li><div>      $folder = $upload_dir['basedir'] . '/bws-custom-code';&nbsp;</div></li><li><div>      if ( ! $upload_dir[&quot;error&quot;] ) {&nbsp;</div></li><li><div>          if ( ! is_dir( $folder ) )&nbsp;</div></li><li><div>              wp_mkdir_p( $folder, 0755 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $index_file = $upload_dir['basedir'] . '/bws-custom-code/index.php';&nbsp;</div></li><li><div>          if ( ! file_exists( $index_file ) ) {&nbsp;</div></li><li><div>              if ( $f = fopen( $index_file, 'w+' ) )&nbsp;</div></li><li><div>                  fclose( $f );&nbsp;</div></li><li><div>          }                &nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $css_file = 'bws-custom-code.css';&nbsp;</div></li><li><div>      $real_css_file = $folder . '/' . $css_file;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $php_file = 'bws-custom-code.php';    &nbsp;</div></li><li><div>      $real_php_file = $folder . '/' . $php_file;    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $is_multisite = is_multisite();&nbsp;</div></li><li><div>      if ( $is_multisite )&nbsp;</div></li><li><div>          $blog_id = get_current_blog_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $_REQUEST['bws_update_custom_code'] ) && check_admin_referer( 'bws_update_' . $css_file ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** CSS */</span>&nbsp;</div></li><li><div>          $newcontent_css = wp_unslash( $_POST['bws_newcontent_css'] );    &nbsp;</div></li><li><div>          if ( ! empty( $newcontent_css ) && isset( $_REQUEST['bws_custom_css_active'] ) ) {&nbsp;</div></li><li><div>              if ( $is_multisite )&nbsp;</div></li><li><div>                  $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $css_file ] = $upload_dir['baseurl'] . '/bws-custom-code/' . $css_file;&nbsp;</div></li><li><div>              else&nbsp;</div></li><li><div>                  $bstwbsftwppdtplgns_options['custom_code'][ $css_file ] = $upload_dir['baseurl'] . '/bws-custom-code/' . $css_file;&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              if ( $is_multisite ) {&nbsp;</div></li><li><div>                  if ( isset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $css_file ] ) )&nbsp;</div></li><li><div>                      unset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $css_file ] );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  if ( isset( $bstwbsftwppdtplgns_options['custom_code'][ $css_file ] ) )&nbsp;</div></li><li><div>                      unset( $bstwbsftwppdtplgns_options['custom_code'][ $css_file ] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          if ( $f = fopen( $real_css_file, 'w+' ) ) {&nbsp;</div></li><li><div>              fwrite( $f, $newcontent_css );&nbsp;</div></li><li><div>              fclose( $f );&nbsp;</div></li><li><div>              $message .= sprintf( __( 'File %s edited successfully.', 'bestwebsoft' ), '&lt;i&gt;' . $css_file . '&lt;/i&gt;' ) . ' ';&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $error .= __( 'Not enough permissions to create or update the file', 'bestwebsoft' ) . ' ' . $real_css_file . '. ';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** PHP */</span>&nbsp;</div></li><li><div>          $newcontent_php = wp_unslash( trim( $_POST['bws_newcontent_php'] ) );&nbsp;</div></li><li><div>          if ( file_exists( $index_file ) ) {&nbsp;</div></li><li><div>              if ( ! empty( $newcontent_php ) && isset( $_REQUEST['bws_custom_php_active'] ) ) {&nbsp;</div></li><li><div>                  if ( $is_multisite )&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $php_file ] = $real_php_file;&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                      $bstwbsftwppdtplgns_options['custom_code'][ $php_file ] = $real_php_file;&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  if ( $is_multisite ) {&nbsp;</div></li><li><div>                      if ( isset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $php_file ] ) )&nbsp;</div></li><li><div>                          unset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $php_file ] );&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      if ( isset( $bstwbsftwppdtplgns_options['custom_code'][ $php_file ] ) )&nbsp;</div></li><li><div>                          unset( $bstwbsftwppdtplgns_options['custom_code'][ $php_file ] );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( $f = fopen( $real_php_file, 'w+' ) ) {&nbsp;</div></li><li><div>                  $newcontent_php = $newcontent_php;&nbsp;</div></li><li><div>                  fwrite( $f, $newcontent_php );&nbsp;</div></li><li><div>                  fclose( $f );&nbsp;</div></li><li><div>                  $message .= sprintf( __( 'File %s edited successfully.', 'bestwebsoft' ), '&lt;i&gt;' . $php_file . '&lt;/i&gt;' );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  $error .= __( 'Not enough permissions to create or update the file', 'bestwebsoft' ) . ' ' . $real_php_file . '. ';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $error .= __( 'Not enough permissions to create the file', 'bestwebsoft' ) . ' ' . $index_file . '. ';&nbsp;</div></li><li><div>          }                &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $error ) )&nbsp;</div></li><li><div>              $error .= ' &lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Changing_File_Permissions&quot; target=&quot;_blank&quot;&gt;' . __( 'Learn more', 'bestwebsoft' ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $is_multisite )&nbsp;</div></li><li><div>              update_site_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              update_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( file_exists( $real_css_file ) ) {&nbsp;</div></li><li><div>          update_recently_edited( $real_css_file );&nbsp;</div></li><li><div>          $content_css = esc_textarea( file_get_contents( $real_css_file ) );&nbsp;</div></li><li><div>          if ( ( $is_multisite && isset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $css_file ] ) ) ||&nbsp;</div></li><li><div>              ( ! $is_multisite && isset( $bstwbsftwppdtplgns_options['custom_code'][ $css_file ] ) ) ) {&nbsp;</div></li><li><div>              $is_css_active = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      if ( file_exists( $real_php_file ) ) {&nbsp;</div></li><li><div>          update_recently_edited( $real_php_file );&nbsp;</div></li><li><div>          $content_php = esc_textarea( file_get_contents( $real_php_file ) );&nbsp;</div></li><li><div>          if ( ( $is_multisite && isset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ][ $php_file ] ) ) ||&nbsp;</div></li><li><div>              ( ! $is_multisite && isset( $bstwbsftwppdtplgns_options['custom_code'][ $php_file ] ) ) ) {&nbsp;</div></li><li><div>              $is_php_active = true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $content_php = &quot;&lt;?php&quot; . &quot;\n&quot; . &quot;if ( ! defined( 'ABSPATH' ) ) exit;&quot; . &quot;\n&quot; . &quot;if ( ! defined( 'BWS_GLOBAL' ) ) exit;&quot; . &quot;\n\n&quot; . &quot;<span class="comment">/* Start your code here */</span>&quot; . &quot;\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $message ) ) { ?&gt;&nbsp;</div></li><li><div>          &lt;div id=&quot;message&quot; class=&quot;below-h2 updated notice is-dismissible&quot;&gt;&lt;p&gt;&lt;?php echo $message; ?&gt;&lt;/p&gt;&lt;/div&gt;&nbsp;</div></li><li><div>      &lt;?php } ?&gt;        &nbsp;</div></li><li><div>      &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>          &lt;?php foreach ( array( 'css', 'php' ) as $extension ) { ?&gt;                &nbsp;</div></li><li><div>              &lt;p&gt;&nbsp;</div></li><li><div>                  &lt;?php if ( 'css' == $extension )&nbsp;</div></li><li><div>                      _e( 'These styles will be added to the header on all pages of your site.', 'bestwebsoft' );&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                      printf( __( 'This PHP code will be hooked to the %s action and will be printed on front end only.', 'bestwebsoft' ), '&lt;a href=&quot;http:<span class="comment">//codex.wordpress.org/Plugin_API/Action_Reference/init&quot; target=&quot;_blank&quot;&gt;&lt;code&gt;init&lt;/code&gt;&lt;/a&gt;' ); ?&gt;</span>&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&lt;big&gt;&nbsp;</div></li><li><div>                  &lt;?php if ( ! file_exists( ${&quot;real_{$extension}_file&quot;} ) || ( is_writeable( ${&quot;real_{$extension}_file&quot;} ) ) ) {&nbsp;</div></li><li><div>                      echo __( 'Editing', 'bestwebsoft' ) . ' &lt;strong&gt;' . ${&quot;{$extension}_file&quot;} . '&lt;/strong&gt;';&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      echo __( 'Browsing', 'bestwebsoft' ) . ' &lt;strong&gt;' . ${&quot;{$extension}_file&quot;} . '&lt;/strong&gt;';&nbsp;</div></li><li><div>                  } ?&gt;&nbsp;</div></li><li><div>              &lt;/big&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;bws_custom_&lt;?php echo $extension; ?&gt;_active&quot; value=&quot;1&quot; &lt;?php if ( ${&quot;is_{$extension}_active&quot;} ) echo &quot;checked&quot;; ?&gt; /&gt;    &lt;?php _e( 'Activate', 'bestwebsoft' ); ?&gt;&lt;/label&gt;&lt;/p&gt;&nbsp;</div></li><li><div>              &lt;textarea cols=&quot;70&quot; rows=&quot;25&quot; name=&quot;bws_newcontent_&lt;?php echo $extension; ?&gt;&quot; id=&quot;bws_newcontent_&lt;?php echo $extension; ?&gt;&quot;&gt;&lt;?php if ( isset( ${&quot;content_{$extension}&quot;} ) ) echo ${&quot;content_{$extension}&quot;}; ?&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;description&quot;&gt;&nbsp;</div></li><li><div>                  &lt;a href=&quot;&lt;?php echo ( 'css' == $extension ) ? 'https:<span class="comment">//developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started' : 'http://php.net/' ?&gt;&quot; target=&quot;_blank&quot;&gt;</span>&nbsp;</div></li><li><div>                      &lt;?php printf( __( 'Learn more about %s', 'bestwebsoft' ), strtoupper( $extension ) ); ?&gt;                        &nbsp;</div></li><li><div>                  &lt;/a&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;                &nbsp;</div></li><li><div>          &lt;?php }&nbsp;</div></li><li><div>          if ( ( ! file_exists( $real_css_file ) || is_writeable( $real_css_file ) ) && ( ! file_exists( $real_php_file ) || is_writeable( $real_php_file ) ) ) { ?&gt;&nbsp;</div></li><li><div>              &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                  &lt;input type=&quot;hidden&quot; name=&quot;bws_update_custom_code&quot; value=&quot;submit&quot; /&gt;                    &nbsp;</div></li><li><div>                  &lt;?php submit_button( __( 'Save Changes', 'bestwebsoft' ), 'primary', 'submit', false ); &nbsp;</div></li><li><div>                  wp_nonce_field( 'bws_update_' . $css_file ); ?&gt;&nbsp;</div></li><li><div>              &lt;/p&gt;&nbsp;</div></li><li><div>          &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>              &lt;p&gt;&lt;em&gt;&lt;?php printf( __( 'You need to make this files writable before you can save your changes. See %s the Codex %s for more information.', 'bestwebsoft' ), &nbsp;</div></li><li><div>              '&lt;a href=&quot;https:<span class="comment">//codex.wordpress.org/Changing_File_Permissions&quot; target=&quot;_blank&quot;&gt;', </span>&nbsp;</div></li><li><div>              '&lt;/a&gt;' ); ?&gt;&lt;/em&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;?php }    ?&gt;&nbsp;</div></li><li><div>      &lt;/form&gt;&nbsp;</div></li><li><div>  &lt;?php }    &nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_enqueue_custom_code_css' ) ) {&nbsp;</div></li><li><div>  function bws_enqueue_custom_code_css() {&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $bstwbsftwppdtplgns_options ) )&nbsp;</div></li><li><div>          $bstwbsftwppdtplgns_options = ( function_exists( 'is_multisite' ) && is_multisite() ) ? get_site_option( 'bstwbsftwppdtplgns_options' ) : get_option( 'bstwbsftwppdtplgns_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bstwbsftwppdtplgns_options['custom_code'] ) ) {&nbsp;</div></li><li><div>          $is_multisite = is_multisite();&nbsp;</div></li><li><div>          if ( $is_multisite )&nbsp;</div></li><li><div>              $blog_id = get_current_blog_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! $is_multisite && ! empty( $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.css'] ) )&nbsp;</div></li><li><div>              wp_enqueue_style( 'bws-custom-style', $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.css'] );&nbsp;</div></li><li><div>          elseif ( $is_multisite && ! empty( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.css'] ) )&nbsp;</div></li><li><div>              wp_enqueue_style( 'bws-custom-style', $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.css'] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_enqueue_custom_code_php' ) ) {&nbsp;</div></li><li><div>  function bws_enqueue_custom_code_php() {&nbsp;</div></li><li><div>      if ( is_admin() )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $bstwbsftwppdtplgns_options ) )&nbsp;</div></li><li><div>          $bstwbsftwppdtplgns_options = ( function_exists( 'is_multisite' ) && is_multisite() ) ? get_site_option( 'bstwbsftwppdtplgns_options' ) : get_option( 'bstwbsftwppdtplgns_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $bstwbsftwppdtplgns_options['custom_code'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $is_multisite = is_multisite();&nbsp;</div></li><li><div>          if ( $is_multisite )&nbsp;</div></li><li><div>              $blog_id = get_current_blog_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! $is_multisite && ! empty( $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.php'] ) ) {&nbsp;</div></li><li><div>              &nbsp;</div></li><li><div>              if ( file_exists( $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.php'] ) ) {&nbsp;</div></li><li><div>                  if ( ! defined( 'BWS_GLOBAL' ) )&nbsp;</div></li><li><div>                      define( 'BWS_GLOBAL', true );&nbsp;</div></li><li><div>                  require_once( $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.php'] );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  unset( $bstwbsftwppdtplgns_options['custom_code']['bws-custom-code.php'] );&nbsp;</div></li><li><div>                  if ( $is_multisite )&nbsp;</div></li><li><div>                      update_site_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                      update_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } elseif ( $is_multisite && ! empty( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.php'] ) ) {&nbsp;</div></li><li><div>              if ( file_exists( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.php'] ) ) {&nbsp;</div></li><li><div>                  if ( ! defined( 'BWS_GLOBAL' ) )&nbsp;</div></li><li><div>                      define( 'BWS_GLOBAL', true );&nbsp;</div></li><li><div>                  require_once( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.php'] );&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  unset( $bstwbsftwppdtplgns_options['custom_code'][ $blog_id ]['bws-custom-code.php'] );&nbsp;</div></li><li><div>                  if ( $is_multisite )&nbsp;</div></li><li><div>                      update_site_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>                  else&nbsp;</div></li><li><div>                      update_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>if ( ! function_exists( 'bws_delete_plugin' ) ) {&nbsp;</div></li><li><div>  function bws_delete_plugin( $basename ) {&nbsp;</div></li><li><div>      global $bstwbsftwppdtplgns_options;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $is_multisite = is_multisite();&nbsp;</div></li><li><div>      if ( $is_multisite )&nbsp;</div></li><li><div>          $blog_id = get_current_blog_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! isset( $bstwbsftwppdtplgns_options ) )&nbsp;</div></li><li><div>          $bstwbsftwppdtplgns_options = ( $is_multisite ) ? get_site_option( 'bstwbsftwppdtplgns_options' ) : get_option( 'bstwbsftwppdtplgns_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/** remove bws_menu versions */</span>&nbsp;</div></li><li><div>      unset( $bstwbsftwppdtplgns_options['bws_menu']['version'][ $basename ] );&nbsp;</div></li><li><div>      <span class="comment">/** if empty ['bws_menu']['version'] - there is no other bws plugins - delete all */</span>&nbsp;</div></li><li><div>      if ( empty( $bstwbsftwppdtplgns_options['bws_menu']['version'] ) ) {&nbsp;</div></li><li><div>          <span class="comment">/** remove options */</span>&nbsp;</div></li><li><div>          if ( $is_multisite ) &nbsp;</div></li><li><div>              delete_site_option( 'bstwbsftwppdtplgns_options' );&nbsp;</div></li><li><div>          else&nbsp;</div></li><li><div>              delete_option( 'bstwbsftwppdtplgns_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/** remove custom_code */</span>&nbsp;</div></li><li><div>          if ( $is_multisite ) {&nbsp;</div></li><li><div>              global $wpdb;&nbsp;</div></li><li><div>              $old_blog = $wpdb-&gt;blogid;&nbsp;</div></li><li><div>              <span class="comment">/** Get all blog ids */</span>&nbsp;</div></li><li><div>              $blogids = $wpdb-&gt;get_col( &quot;SELECT `blog_id` FROM $wpdb-&gt;blogs&quot; );&nbsp;</div></li><li><div>              foreach ( $blogids as $blog_id ) {&nbsp;</div></li><li><div>                  switch_to_blog( $blog_id );&nbsp;</div></li><li><div>                  $upload_dir = wp_upload_dir();&nbsp;</div></li><li><div>                  $folder = $upload_dir['basedir'] . '/bws-custom-code';&nbsp;</div></li><li><div>                  if ( file_exists( $folder ) && is_dir( $folder ) ) {&nbsp;</div></li><li><div>                      array_map( 'unlink', glob( &quot;$folder/*&quot; ) );&nbsp;</div></li><li><div>                      rmdir( $folder );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              switch_to_blog( $old_blog );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $upload_dir = wp_upload_dir();&nbsp;</div></li><li><div>              $folder = $upload_dir['basedir'] . '/bws-custom-code';&nbsp;</div></li><li><div>              if ( file_exists( $folder ) && is_dir( $folder ) ) {&nbsp;</div></li><li><div>                  array_map( 'unlink', glob( &quot;$folder/*&quot; ) );&nbsp;</div></li><li><div>                  rmdir( $folder );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }    &nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_init', 'bws_plugins_admin_init' );&nbsp;</div></li><li><div>add_action( 'admin_enqueue_scripts', 'bws_admin_enqueue_scripts' );&nbsp;</div></li><li><div>add_action( 'admin_head', 'bws_plugins_admin_head' );&nbsp;</div></li><li><div>add_action( 'admin_footer', 'bws_shortcode_media_button_popup' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_notices', 'bws_admin_notices', 30 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'wp_enqueue_scripts', 'bws_enqueue_custom_code_css', 20 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>bws_enqueue_custom_code_php();&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Google Sitemap by BestWebSoft</li><li><span></span>3.0.9</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>