<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.6.5" data-slug="woocommerce-pdf-invoices-packing-slips" data-type="class" data-id="77111"><head xmlns="http://www.w3.org/1999/xhtml"><title> woocommerce_pdf_invoices_settings | class | Woocommerce Pdf Invoices Packing Slips | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="WooCommerce_PDF_Invoices_Settings, class, plugin, woocommerce-pdf-invoices-packing-slips, 1.6.5" /><meta name="description" content="The WooCommerce PDF Invoices &amp; Packing Slips WooCommerce PDF Invoices Settings class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=e1ea641fe21bdd1538de28886f6fd5c4' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/woo_commerce_pdf_invoices_settings/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwoo_commerce_pdf_invoices_settings%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fwoo_commerce_pdf_invoices_settings%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-woocommerce-pdf-invoices-packing-slips-1.6.5-class-woo_commerce_pdf_invoices_settings","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="woo_commerce_pdf_invoices_settings" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to woocommerce-pdf-invoices-pack&hellip;." href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/" class="plugin"><span property="name">woocommerce-pdf-invoices-pack&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.6.5." href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/" class="H_VERSION"><span property="name">1.6.5</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">woo_commerce_pdf_invoices_set&hellip;</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="269"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/all/" title="All">All <span class="count badge">269</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="132"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/hooks/" title="Hooks">Hooks <span class="count badge">132</span></a></li><li class="" data-id="action" data-count="38"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/actions/" title="Actions">Actions <span class="count badge">38</span></a></li><li class="" data-id="filter" data-count="94"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/filters/" title="Filters">Filters <span class="count badge">94</span></a></li><li class="active" data-id="class" data-count="121"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/classes/" title="Classes">Classes <span class="count badge">121</span></a></li><li class="" data-id="constant" data-count="9"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/constants/" title="Constants">Constants <span class="count badge">9</span></a></li><li class="" data-id="function" data-count="7"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/functions/" title="Functions">Functions <span class="count badge">7</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>WooCommerce_PDF_Invoices_Settings</strong></h1><p>The WooCommerce PDF Invoices &amp; Packing Slips <strong>WooCommerce PDF Invoices Settings</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/files/includes-class-wcpdf-settings/" class="file">/includes/class-wcpdf-settings.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="9" class="block" start="9"><li><div>class WooCommerce_PDF_Invoices_Settings {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public $options_page_hook;&nbsp;</div></li><li><div>    public $general_settings;&nbsp;</div></li><li><div>    public $template_settings;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function __construct() {&nbsp;</div></li><li><div>        add_action( 'admin_menu', array( &$this, 'menu' ) ); // Add menu.&nbsp;</div></li><li><div>        add_action( 'admin_init', array( &$this, 'init_settings' ) ); // Registers settings&nbsp;</div></li><li><div>        add_filter( 'option_page_capability_wpo_wcpdf_template_settings', array( &$this, 'settings_capabilities' ) );&nbsp;</div></li><li><div>        add_filter( 'option_page_capability_wpo_wcpdf_general_settings', array( &$this, 'settings_capabilities' ) );&nbsp;</div></li><li><div>        add_action( 'admin_enqueue_scripts', array( &$this, 'load_scripts_styles' ) ); // Load scripts&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Add links to WordPress plugins page&nbsp;</div></li><li><div>        add_filter( 'plugin_action_links_'.WooCommerce_PDF_Invoices::$plugin_basename, array( &$this, 'wpo_wcpdf_add_settings_link' ) );&nbsp;</div></li><li><div>        add_filter( 'plugin_row_meta', array( $this, 'add_support_links' ), 10, 2 );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;general_settings = get_option('wpo_wcpdf_general_settings');&nbsp;</div></li><li><div>        $this-&gt;template_settings = get_option('wpo_wcpdf_template_settings');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // WooCommerce Order Status & Actions Manager emails compatibility&nbsp;</div></li><li><div>        add_filter( 'wpo_wcpdf_wc_emails', array( $this, 'wc_order_status_actions_emails' ), 10, 1 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function menu() {&nbsp;</div></li><li><div>        $parent_slug = 'woocommerce';&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;options_page_hook = add_submenu_page(&nbsp;</div></li><li><div>            $parent_slug, &nbsp;</div></li><li><div>            __( 'PDF Invoices', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            __( 'PDF Invoices', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            'manage_woocommerce', &nbsp;</div></li><li><div>            'wpo_wcpdf_options_page', &nbsp;</div></li><li><div>            array( $this, 'settings_page' )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Set capability for settings page&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function settings_capabilities() {&nbsp;</div></li><li><div>        return 'manage_woocommerce';&nbsp;</div></li><li><div>    }        &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Styles for settings page&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function load_scripts_styles ( $hook ) {&nbsp;</div></li><li><div>        if( $hook != $this-&gt;options_page_hook ) &nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        wp_enqueue_script(&nbsp;</div></li><li><div>            'wcpdf-upload-js', &nbsp;</div></li><li><div>            plugins_url( 'js/media-upload.js' , dirname(__FILE__) ), &nbsp;</div></li><li><div>            array( 'jquery' ), &nbsp;</div></li><li><div>            WooCommerce_PDF_Invoices::$version&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_enqueue_style(&nbsp;</div></li><li><div>            'wpo-wcpdf', &nbsp;</div></li><li><div>            WooCommerce_PDF_Invoices::$plugin_url . 'css/style.css', &nbsp;</div></li><li><div>            array(), &nbsp;</div></li><li><div>            WooCommerce_PDF_Invoices::$version&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        wp_enqueue_media();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add settings link to plugins page&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function wpo_wcpdf_add_settings_link( $links ) {&nbsp;</div></li><li><div>        $settings_link = '&lt;a href=&quot;admin.php?page=wpo_wcpdf_options_page&quot;&gt;'. __( 'Settings', 'woocommerce' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        array_push( $links, $settings_link );&nbsp;</div></li><li><div>        return $links;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add various support links to plugin page&nbsp;</div></li><li><div>     * after meta (version, authors, site)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function add_support_links( $links, $file ) {&nbsp;</div></li><li><div>        if ( !current_user_can( 'install_plugins' ) ) {&nbsp;</div></li><li><div>            return $links;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( $file == WooCommerce_PDF_Invoices::$plugin_basename ) {&nbsp;</div></li><li><div>            // $links[] = '&lt;a href=&quot;...&quot; target=&quot;_blank&quot; title=&quot;' . __( '...', 'wpo_wcpdf' ) . '&quot;&gt;' . __( '...', 'wpo_wcpdf' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $links;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function settings_page() {&nbsp;</div></li><li><div>        $settings_tabs = apply_filters( 'wpo_wcpdf_settings_tabs', array (&nbsp;</div></li><li><div>                'general' =&gt; __('General', 'wpo_wcpdf'), &nbsp;</div></li><li><div>                'template' =&gt; __('Template', 'wpo_wcpdf'), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // add status tab last in row&nbsp;</div></li><li><div>        $settings_tabs['debug'] = __('Status', 'wpo_wcpdf');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $active_tab = isset( $_GET[ 'tab' ] ) ? $_GET[ 'tab' ] : 'general';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                jQuery( function( $ ) {&nbsp;</div></li><li><div>                    $(&quot;#footer-thankyou&quot;).html(&quot;If you like &lt;strong&gt;WooCommerce PDF Invoices & Packing Slips&lt;/strong&gt; please leave us a &lt;a href='https://wordpress.org/support/view/plugin-reviews/woocommerce-pdf-invoices-packing-slips?rate=5#postform'&gt;*****&lt;/a&gt; rating. A huge thank you in advance!&quot;);&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;icon32&quot; id=&quot;icon-options-general&quot;&gt;&lt;br /&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;h2&gt;&lt;?php _e( 'WooCommerce PDF Invoices', 'wpo_wcpdf' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>                &lt;h2 class=&quot;nav-tab-wrapper&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                foreach ($settings_tabs as $tab_slug =&gt; $tab_title ) {&nbsp;</div></li><li><div>                    printf('&lt;a href=&quot;?page=wpo_wcpdf_options_page&tab=%1$s&quot; class=&quot;nav-tab nav-tab-%1$s %2$s&quot;&gt;%3$s&lt;/a&gt;', $tab_slug, (($active_tab == $tab_slug) ? 'nav-tab-active' : ''), $tab_title);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                do_action( 'wpo_wcpdf_before_settings_page', $active_tab );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // save or check option to hide extensions ad&nbsp;</div></li><li><div>                if ( isset( $_GET['wpo_wcpdf_hide_extensions_ad'] ) ) {&nbsp;</div></li><li><div>                    update_option( 'wpo_wcpdf_hide_extensions_ad', true );&nbsp;</div></li><li><div>                    $hide_ad = true;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $hide_ad = get_option( 'wpo_wcpdf_hide_extensions_ad' );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                if ( !$hide_ad && !( class_exists('WooCommerce_PDF_IPS_Pro') && class_exists('WooCommerce_PDF_IPS_Dropbox') && class_exists('WooCommerce_PDF_IPS_Templates') && class_exists('WooCommerce_Ext_PrintOrders') ) ) {&nbsp;</div></li><li><div>                    include('wcpdf-extensions.php');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;form method=&quot;post&quot; action=&quot;options.php&quot; id=&quot;wpo-wcpdf-settings&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                        do_action( 'wpo_wcpdf_before_settings', $active_tab );&nbsp;</div></li><li><div>                        settings_fields( 'wpo_wcpdf_'.$active_tab.'_settings' );&nbsp;</div></li><li><div>                        do_settings_sections( 'wpo_wcpdf_'.$active_tab.'_settings' );&nbsp;</div></li><li><div>                        do_action( 'wpo_wcpdf_after_settings', $active_tab );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        submit_button();&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;/form&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( $active_tab=='debug' ) {&nbsp;</div></li><li><div>                    $this-&gt;status_page();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                do_action( 'wpo_wcpdf_after_settings_page', $active_tab ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function status_page() {&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;?php include('dompdf-status.php'); ?&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * User settings.&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    public function init_settings() {&nbsp;</div></li><li><div>        global $woocommerce, $wpo_wcpdf;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Whether a third-party plugin claims responsibility for generating invoice numbers&nbsp;</div></li><li><div>        $invoicenumber_thirdparty = apply_filters('woocommerce_invoice_number_by_plugin', false);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>        /*********** GENERAL SETTINGS *********/&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $option = 'wpo_wcpdf_general_settings';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Create option in wp_options.&nbsp;</div></li><li><div>        if ( false === get_option( $option ) ) {&nbsp;</div></li><li><div>            $this-&gt;default_settings( $option );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'general_settings', &nbsp;</div></li><li><div>            __( 'General settings', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'section_options_callback' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'download_display', &nbsp;</div></li><li><div>            __( 'How do you want to view the PDF?', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'select_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'general_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'download_display', &nbsp;</div></li><li><div>                'options' =&gt; array(&nbsp;</div></li><li><div>                    'download' =&gt; __( 'Download the PDF' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                    'display' =&gt; __( 'Open the PDF in a new browser tab/window' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $tmp_path = $wpo_wcpdf-&gt;export-&gt;tmp_path( 'attachments' );&nbsp;</div></li><li><div>        $tmp_path_check = !is_writable( $tmp_path );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $wc_emails = array(&nbsp;</div></li><li><div>            'new_order' =&gt; __( 'Admin New Order email' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            'processing' =&gt; __( 'Customer Processing Order email' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            'completed' =&gt; __( 'Customer Completed Order email' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            'customer_invoice' =&gt; __( 'Customer Invoice email' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // load custom emails&nbsp;</div></li><li><div>        $extra_emails = $this-&gt;get_wc_emails();&nbsp;</div></li><li><div>        $wc_emails = array_merge( $wc_emails, $extra_emails );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'email_pdf', &nbsp;</div></li><li><div>            __( 'Attach invoice to:', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'multiple_checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'general_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'email_pdf', &nbsp;</div></li><li><div>                'options' =&gt; apply_filters( 'wpo_wcpdf_wc_emails', $wc_emails ), &nbsp;</div></li><li><div>                'description' =&gt; $tmp_path_check ? '&lt;span class=&quot;wpo-warning&quot;&gt;' . sprintf( __( 'It looks like the temp folder (&lt;code&gt;%s&lt;/code&gt;) is not writable, check the permissions for this folder! Without having write access to this folder, the plugin will not be able to email invoices.', 'wpo_wcpdf' ), $tmp_path ).'&lt;/span&gt;':'', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'disable_free', &nbsp;</div></li><li><div>            __( 'Disable for free products', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'general_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'disable_free', &nbsp;</div></li><li><div>                'description' =&gt; __( &quot;Disable automatic creation/attachment of invoices when only free products are ordered&quot;, 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'interface', &nbsp;</div></li><li><div>            __( 'Interface', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'section_options_callback' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // $documents = array(&nbsp;</div></li><li><div>        //     'invoice' =&gt; __( 'Invoice', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        //     'packing-slip' =&gt; __( 'Packing Slip', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        // );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // $contexts = array(&nbsp;</div></li><li><div>        //     'orders-list' =&gt; __( 'Orders list', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        //     'orders-bulk' =&gt; __( 'Bulk order actions', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        //     'order-single' =&gt; __( 'Single order page', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        //     'my-account' =&gt; __( 'My Account page', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        // );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // add_settings_field(&nbsp;</div></li><li><div>        //     'buttons', &nbsp;</div></li><li><div>        //     __( 'Show download buttons', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>        //     array( &$this, 'checkbox_table_callback' ), &nbsp;</div></li><li><div>        //     $option, &nbsp;</div></li><li><div>        //     'interface', &nbsp;</div></li><li><div>        //     array(&nbsp;</div></li><li><div>        //         'menu' =&gt; $option, &nbsp;</div></li><li><div>        //         'id' =&gt; 'buttons', &nbsp;</div></li><li><div>        //         'rows' =&gt; $contexts, &nbsp;</div></li><li><div>        //         'columns' =&gt; apply_filters( 'wpo_wcpdf_documents_buttons', $documents ), &nbsp;</div></li><li><div>        // )&nbsp;</div></li><li><div>        // );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // get list of WooCommerce statuses&nbsp;</div></li><li><div>        if ( version_compare( WOOCOMMERCE_VERSION, '2.2', '&lt;' ) ) {&nbsp;</div></li><li><div>            $statuses = (array) get_terms( 'shop_order_status', array( 'hide_empty' =&gt; 0, 'orderby' =&gt; 'id' ) );&nbsp;</div></li><li><div>            foreach ( $statuses as $status ) {&nbsp;</div></li><li><div>                $order_statuses[esc_attr( $status-&gt;slug )] = esc_html__( $status-&gt;name, 'woocommerce' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $statuses = wc_get_order_statuses();&nbsp;</div></li><li><div>            foreach ( $statuses as $status_slug =&gt; $status ) {&nbsp;</div></li><li><div>                $status_slug = 'wc-' === substr( $status_slug, 0, 3 ) ? substr( $status_slug, 3 ) : $status_slug;&nbsp;</div></li><li><div>                $order_statuses[$status_slug] = $status;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'my_account_buttons', &nbsp;</div></li><li><div>            __( 'Allow My Account invoice download', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'select_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'interface', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'my_account_buttons', &nbsp;</div></li><li><div>                'options' =&gt; array(&nbsp;</div></li><li><div>                    'available' =&gt; __( 'Only when an invoice is already created/emailed' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                    'custom' =&gt; __( 'Only for specific order statuses (define below)' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                    'always' =&gt; __( 'Always' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                    'never' =&gt; __( 'Never' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                'custom' =&gt; array(&nbsp;</div></li><li><div>                    'type' =&gt; 'multiple_checkbox_element_callback', &nbsp;</div></li><li><div>                    'args' =&gt; array(&nbsp;</div></li><li><div>                        'menu' =&gt; $option, &nbsp;</div></li><li><div>                        'id' =&gt; 'my_account_restrict', &nbsp;</div></li><li><div>                        'options' =&gt; $order_statuses, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'invoice_number_column', &nbsp;</div></li><li><div>            __( 'Enable invoice number column in the orders list', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'interface', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'invoice_number_column', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register settings.&nbsp;</div></li><li><div>        register_setting( $option, $option, array( &$this, 'validate_options' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $option_values = get_option($option);&nbsp;</div></li><li><div>        // convert old 'statusless' setting to new status array&nbsp;</div></li><li><div>        if ( isset( $option_values['email_pdf'] ) && !is_array( $option_values['email_pdf'] ) ) {&nbsp;</div></li><li><div>            $default_status = apply_filters( 'wpo_wcpdf_attach_to_status', 'completed' );&nbsp;</div></li><li><div>            $option_values['email_pdf'] = array (&nbsp;</div></li><li><div>                    $default_status =&gt; 1, &nbsp;</div></li><li><div>                    'customer_invoice' =&gt; 1, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>            update_option( $option, $option_values );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>        /********** TEMPLATE SETTINGS *********/&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $option = 'wpo_wcpdf_template_settings';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Create option in wp_options.&nbsp;</div></li><li><div>        if ( false === get_option( $option ) ) {&nbsp;</div></li><li><div>            $this-&gt;default_settings( $option );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            __( 'PDF Template settings', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'section_options_callback' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $theme_path = get_stylesheet_directory() . '/' . $wpo_wcpdf-&gt;export-&gt;template_base_path;&nbsp;</div></li><li><div>        $theme_template_path = substr($theme_path, strpos($theme_path, 'wp-content')) . 'yourtemplate';&nbsp;</div></li><li><div>        $plugin_template_path = 'wp-content/plugins/woocommerce-pdf-invoices-packing-slips/templates/pdf/Simple';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'template_path', &nbsp;</div></li><li><div>            __( 'Choose a template', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'template_select_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'template_path', &nbsp;</div></li><li><div>                'options' =&gt; $this-&gt;find_templates(), &nbsp;</div></li><li><div>                'description' =&gt; sprintf( __( 'Want to use your own template? Copy all the files from &lt;code&gt;%s&lt;/code&gt; to your (child) theme in &lt;code&gt;%s&lt;/code&gt; to customize them' , 'wpo_wcpdf' ), $plugin_template_path, $theme_template_path), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'paper_size', &nbsp;</div></li><li><div>            __( 'Paper size', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'select_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'paper_size', &nbsp;</div></li><li><div>                'options' =&gt; apply_filters( 'wpo_wcpdf_template_settings_paper_size', array(&nbsp;</div></li><li><div>                    'a4' =&gt; __( 'A4' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                    'letter' =&gt; __( 'Letter' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> ) ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'header_logo', &nbsp;</div></li><li><div>            __( 'Shop header/logo', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'media_upload_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'header_logo', &nbsp;</div></li><li><div>                'uploader_title' =&gt; __( 'Select or upload your invoice header/logo', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                'uploader_button_text' =&gt; __( 'Set image', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                'remove_button_text' =&gt; __( 'Remove image', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                //'description' =&gt; __( '...', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'shop_name', &nbsp;</div></li><li><div>            __( 'Shop Name', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'text_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'shop_name', &nbsp;</div></li><li><div>                'size' =&gt; '72', &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'shop_address', &nbsp;</div></li><li><div>            __( 'Shop Address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'textarea_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'shop_address', &nbsp;</div></li><li><div>                'width' =&gt; '72', &nbsp;</div></li><li><div>                'height' =&gt; '8', &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div>                //'description' =&gt; __( '...', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'footer', &nbsp;</div></li><li><div>            __( 'Footer: terms & conditions, policies, etc.', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'textarea_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'template_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'footer', &nbsp;</div></li><li><div>                'width' =&gt; '72', &nbsp;</div></li><li><div>                'height' =&gt; '4', &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div>                //'description' =&gt; __( '...', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            __( 'Invoice', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'section_options_callback' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'invoice_shipping_address', &nbsp;</div></li><li><div>            __( 'Display shipping address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'invoice_shipping_address', &nbsp;</div></li><li><div>                'description' =&gt; __( 'Display shipping address on invoice (in addition to the default billing address) if different from billing address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'invoice_email', &nbsp;</div></li><li><div>            __( 'Display email address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'invoice_email', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'invoice_phone', &nbsp;</div></li><li><div>            __( 'Display phone number', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'invoice_phone', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'display_date', &nbsp;</div></li><li><div>            __( 'Display invoice date', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'display_date', &nbsp;</div></li><li><div>                'value' =&gt; 'invoice_date', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($invoicenumber_thirdparty) {&nbsp;</div></li><li><div>            $invoice_number_desc = __( 'Invoice numbers are created by a third-party extension.', 'yith-woocommerce-pdf-invoice');&nbsp;</div></li><li><div>            $config_link = esc_attr(apply_filters('woocommerce_invoice_number_configuration_link', null));&nbsp;</div></li><li><div>            if ($config_link) {&nbsp;</div></li><li><div>                $invoice_number_desc .= ' '.sprintf(__( 'Configure it &lt;a href=&quot;%s&quot;&gt;here&lt;/a&gt;.', 'yith-woocommerce-pdf-invoice'), $config_link);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $invoice_number_desc = '&lt;i&gt;'.$invoice_number_desc.'&lt;/i&gt;';&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $invoice_number_desc = null;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'display_number', &nbsp;</div></li><li><div>            $invoicenumber_thirdparty ? __( 'Display invoice number', 'wpo_wcpdf' ) : __( 'Display built-in sequential invoice number', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'display_number', &nbsp;</div></li><li><div>                'value' =&gt; 'invoice_number', &nbsp;</div></li><li><div>                'description' =&gt; $invoice_number_desc, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (!$invoicenumber_thirdparty) {&nbsp;</div></li><li><div>            // invoice number is stored separately for direct retrieval&nbsp;</div></li><li><div>            register_setting( $option, 'wpo_wcpdf_next_invoice_number', array( &$this, 'validate_options' ) );&nbsp;</div></li><li><div>            add_settings_field(&nbsp;</div></li><li><div>                'next_invoice_number', &nbsp;</div></li><li><div>                __( 'Next invoice number (without prefix/suffix etc.)', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                array( &$this, 'singular_text_element_callback' ), &nbsp;</div></li><li><div>                $option, &nbsp;</div></li><li><div>                'invoice', &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'menu' =&gt; 'wpo_wcpdf_next_invoice_number', &nbsp;</div></li><li><div>                    'id' =&gt; 'next_invoice_number', &nbsp;</div></li><li><div>                    'size' =&gt; '10', &nbsp;</div></li><li><div>                    'description' =&gt; __( 'This is the number that will be used on the next invoice that is created. By default, numbering starts from the WooCommerce Order Number of the first invoice that is created and increases for every new invoice. Note that if you override this and set it lower than the highest (PDF) invoice number, this could create double invoice numbers!', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // first time invoice number&nbsp;</div></li><li><div>            $next_invoice_number = get_option('wpo_wcpdf_next_invoice_number');&nbsp;</div></li><li><div>            // determine highest invoice number if option not set&nbsp;</div></li><li><div>            if ( !isset( $next_invoice_number ) ) {&nbsp;</div></li><li><div>                // Based on code from WooCommerce Sequential Order Numbers&nbsp;</div></li><li><div>                global $wpdb;&nbsp;</div></li><li><div>                // get highest invoice_number in postmeta table&nbsp;</div></li><li><div>                $max_invoice_number = $wpdb-&gt;get_var( 'SELECT max(cast(meta_value as UNSIGNED)) from ' . $wpdb-&gt;postmeta . ' where meta_key=&quot;_wcpdf_invoice_number&quot;' );&nbsp;</div></li><li><div>                &nbsp;</div></li><li><div>                if ( !empty($max_invoice_number) ) {&nbsp;</div></li><li><div>                    $next_invoice_number = $max_invoice_number+1;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $next_invoice_number = '';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                update_option( 'wpo_wcpdf_next_invoice_number', $next_invoice_number );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            add_settings_field(&nbsp;</div></li><li><div>                'invoice_number_formatting', &nbsp;</div></li><li><div>                __( 'Invoice number format', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                array( &$this, 'invoice_number_formatting_callback' ), &nbsp;</div></li><li><div>                $option, &nbsp;</div></li><li><div>                'invoice', &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'menu' =&gt; $option, &nbsp;</div></li><li><div>                    'id' =&gt; 'invoice_number_formatting', &nbsp;</div></li><li><div>                    'fields' =&gt; array(&nbsp;</div></li><li><div>                        'prefix' =&gt; array(&nbsp;</div></li><li><div>                            'title' =&gt; __( 'Prefix' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                            'size' =&gt; 20, &nbsp;</div></li><li><div>                            'description' =&gt; __( 'to use the invoice year and/or month, use [invoice_year] or [invoice_month] respectively' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                        'suffix' =&gt; array(&nbsp;</div></li><li><div>                            'title' =&gt; __( 'Suffix' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                            'size' =&gt; 20, &nbsp;</div></li><li><div>                            'description' =&gt; '', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                        'padding' =&gt; array(&nbsp;</div></li><li><div>                            'title' =&gt; __( 'Padding' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                            'size' =&gt; 2, &nbsp;</div></li><li><div>                            'description' =&gt; __( 'enter the number of digits here - enter &quot;6&quot; to display 42 as 000042' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                    'description' =&gt; __( 'note: if you have already created a custom invoice number format with a filter, the above settings will be ignored' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            add_settings_field(&nbsp;</div></li><li><div>                'yearly_reset_invoice_number', &nbsp;</div></li><li><div>                __( 'Reset invoice number yearly', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>                $option, &nbsp;</div></li><li><div>                'invoice', &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'menu' =&gt; $option, &nbsp;</div></li><li><div>                    'id' =&gt; 'yearly_reset_invoice_number', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        } // End if ($invoicenumber_thirdparty)&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'currency_font', &nbsp;</div></li><li><div>            __( 'Extended currency symbol support', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'invoice', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'currency_font', &nbsp;</div></li><li><div>                'description' =&gt; __( 'Enable this if your currency symbol is not displaying properly' , 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );            &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'packing_slip', &nbsp;</div></li><li><div>            __( 'Packing Slip', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'section_options_callback' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'packing_slip_billing_address', &nbsp;</div></li><li><div>            __( 'Display billing address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'packing_slip', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'packing_slip_billing_address', &nbsp;</div></li><li><div>                'description' =&gt; __( 'Display billing address on packing slip (in addition to the default shipping address) if different from shipping address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'packing_slip_email', &nbsp;</div></li><li><div>            __( 'Display email address', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'packing_slip', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'packing_slip_email', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'packing_slip_phone', &nbsp;</div></li><li><div>            __( 'Display phone number', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'packing_slip', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'packing_slip_phone', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'extra_template_fields', &nbsp;</div></li><li><div>            __( 'Extra template fields', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'custom_fields_section' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'extra_1', &nbsp;</div></li><li><div>            __( 'Extra field 1', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'textarea_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'extra_template_fields', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'extra_1', &nbsp;</div></li><li><div>                'width' =&gt; '72', &nbsp;</div></li><li><div>                'height' =&gt; '8', &nbsp;</div></li><li><div>                'description' =&gt; __( 'This is footer column 1 in the &lt;i&gt;Modern (Premium)&lt;/i&gt; template', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'extra_2', &nbsp;</div></li><li><div>            __( 'Extra field 2', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'textarea_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'extra_template_fields', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'extra_2', &nbsp;</div></li><li><div>                'width' =&gt; '72', &nbsp;</div></li><li><div>                'height' =&gt; '8', &nbsp;</div></li><li><div>                'description' =&gt; __( 'This is footer column 2 in the &lt;i&gt;Modern (Premium)&lt;/i&gt; template', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'extra_3', &nbsp;</div></li><li><div>            __( 'Extra field 3', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'textarea_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'extra_template_fields', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'extra_3', &nbsp;</div></li><li><div>                'width' =&gt; '72', &nbsp;</div></li><li><div>                'height' =&gt; '8', &nbsp;</div></li><li><div>                'description' =&gt; __( 'This is footer column 3 in the &lt;i&gt;Modern (Premium)&lt;/i&gt; template', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>                'translatable' =&gt; true, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register settings.&nbsp;</div></li><li><div>        register_setting( $option, $option, array( &$this, 'validate_options' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>        /******** DEBUG/STATUS SETTINGS *******/&nbsp;</div></li><li><div>        /**************************************/&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $option = 'wpo_wcpdf_debug_settings';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Create option in wp_options.&nbsp;</div></li><li><div>        if ( false === get_option( $option ) ) {&nbsp;</div></li><li><div>            $this-&gt;default_settings( $option );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Section.&nbsp;</div></li><li><div>        add_settings_section(&nbsp;</div></li><li><div>            'debug_settings', &nbsp;</div></li><li><div>            __( 'Debug settings', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'debug_section' ), &nbsp;</div></li><li><div>            $option&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'enable_debug', &nbsp;</div></li><li><div>            __( 'Enable debug output', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'debug_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'enable_debug', &nbsp;</div></li><li><div>                'description' =&gt; __( &quot;Enable this option to output plugin errors if you're getting a blank page or other PDF generation issues&quot;, 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'html_output', &nbsp;</div></li><li><div>            __( 'Output to HTML', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'debug_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'html_output', &nbsp;</div></li><li><div>                'description' =&gt; __( 'Send the template output as HTML to the browser instead of creating a PDF.', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_settings_field(&nbsp;</div></li><li><div>            'old_tmp', &nbsp;</div></li><li><div>            __( 'Use old tmp folder', 'wpo_wcpdf' ), &nbsp;</div></li><li><div>            array( &$this, 'checkbox_element_callback' ), &nbsp;</div></li><li><div>            $option, &nbsp;</div></li><li><div>            'debug_settings', &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'menu' =&gt; $option, &nbsp;</div></li><li><div>                'id' =&gt; 'old_tmp', &nbsp;</div></li><li><div>                'description' =&gt; __( 'Before version 1.5 of PDF Invoices, temporary files were stored in the plugin folder. This setting is only intended for backwards compatibility, not recommended on new installs!', 'wpo_wcpdf' ), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register settings.&nbsp;</div></li><li><div>        register_setting( $option, $option, array( &$this, 'validate_options' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * get all emails registered in WooCommerce&nbsp;</div></li><li><div>     * @param  boolean $remove_defaults switch to remove default woocommerce emails&nbsp;</div></li><li><div>     * @return array   $emails       list of all email ids/slugs and names&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function get_wc_emails ( $remove_defaults = true ) {&nbsp;</div></li><li><div>        // get emails from WooCommerce&nbsp;</div></li><li><div>        global $woocommerce;&nbsp;</div></li><li><div>        $mailer = $woocommerce-&gt;mailer();&nbsp;</div></li><li><div>        $wc_emails = $mailer-&gt;get_emails();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $default_emails = array(&nbsp;</div></li><li><div>            'new_order', &nbsp;</div></li><li><div>            'customer_processing_order', &nbsp;</div></li><li><div>            'customer_completed_order', &nbsp;</div></li><li><div>            'customer_invoice', &nbsp;</div></li><li><div>            'customer_note', &nbsp;</div></li><li><div>            'customer_reset_password', &nbsp;</div></li><li><div>            'customer_new_account'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $emails = array();&nbsp;</div></li><li><div>        foreach ($wc_emails as $name =&gt; $template) {&nbsp;</div></li><li><div>            if ( !( $remove_defaults && in_array( $template-&gt;id, $default_emails ) ) ) {&nbsp;</div></li><li><div>                $emails[$template-&gt;id] = $template-&gt;title;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $emails;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * WooCommerce Order Status & Actions Manager emails compatibility&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function wc_order_status_actions_emails ( $emails ) {&nbsp;</div></li><li><div>        // check if WC_Custom_Status class is loaded!&nbsp;</div></li><li><div>        if (class_exists('WC_Custom_Status')) {&nbsp;</div></li><li><div>            // get list of custom statuses from WooCommerce Custom Order Status & Actions&nbsp;</div></li><li><div>            // status slug =&gt; status name&nbsp;</div></li><li><div>            $custom_statuses = WC_Custom_Status::get_status_list_names();&nbsp;</div></li><li><div>            // append _email to slug (=email_id) and add to emails list&nbsp;</div></li><li><div>            foreach ($custom_statuses as $status_slug =&gt; $status_name) {&nbsp;</div></li><li><div>                $emails[$status_slug.'_email'] = $status_name;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        return $emails;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Set default settings.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function default_settings( $option ) {&nbsp;</div></li><li><div>        global $wpo_wcpdf;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        switch ( $option ) {&nbsp;</div></li><li><div>            case 'wpo_wcpdf_general_settings':&nbsp;</div></li><li><div>                $default = array(&nbsp;</div></li><li><div>                    'download_display' =&gt; 'download', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'wpo_wcpdf_template_settings':&nbsp;</div></li><li><div>                $default = array(&nbsp;</div></li><li><div>                    'paper_size' =&gt; 'a4', &nbsp;</div></li><li><div>                    'template_path' =&gt; $wpo_wcpdf-&gt;export-&gt;template_default_base_path . 'Simple', &nbsp;</div></li><li><div>                    // 'invoice_shipping_address' =&gt; '1', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                $default = array();&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false === get_option( $option ) ) {&nbsp;</div></li><li><div>            add_option( $option, $default );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            update_option( $option, $default );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // Text element callback.&nbsp;</div></li><li><div>    public function text_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>        $size = isset( $args['size'] ) ? $args['size'] : '25';&nbsp;</div></li><li><div>        $class = isset( $args['translatable'] ) && $args['translatable'] === true ? 'translatable' : '';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $html = sprintf( '&lt;input type=&quot;text&quot; id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot; value=&quot;%3$s&quot; size=&quot;%4$s&quot; class=&quot;%5$s&quot;/&gt;', $id, $menu, $current, $size, $class );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Single text option (not part of any settings array)&nbsp;</div></li><li><div>    public function singular_text_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>        $size = isset( $args['size'] ) ? $args['size'] : '25';&nbsp;</div></li><li><div>        $class = isset( $args['translatable'] ) && $args['translatable'] === true ? 'translatable' : '';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $option = get_option( $menu );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $option ) ) {&nbsp;</div></li><li><div>            $current = $option;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $html = sprintf( '&lt;input type=&quot;text&quot; id=&quot;%1$s&quot; name=&quot;%2$s&quot; value=&quot;%3$s&quot; size=&quot;%4$s&quot; class=&quot;%5$s&quot;/&gt;', $id, $menu, $current, $size, $class );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Text element callback.&nbsp;</div></li><li><div>    public function textarea_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>        $width = $args['width'];&nbsp;</div></li><li><div>        $height = $args['height'];&nbsp;</div></li><li><div>        $class = isset( $args['translatable'] ) && $args['translatable'] === true ? 'translatable' : '';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $html = sprintf( '&lt;textarea id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot; cols=&quot;%4$s&quot; rows=&quot;%5$s&quot; class=&quot;%6$s&quot;/&gt;%3$s&lt;/textarea&gt;', $id, $menu, $current, $width, $height, $class );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Checkbox field callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Checkbox field.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function checkbox_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>        $value = isset( $args['value'] ) ? $args['value'] : 1;&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $html = sprintf( '&lt;input type=&quot;checkbox&quot; id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot; value=&quot;%3$s&quot;%4$s /&gt;', $id, $menu, $value, checked( $value, $current, false ) );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Multiple Checkbox field callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Checkbox field.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function multiple_checkbox_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        foreach ( $args['options'] as $key =&gt; $label ) {&nbsp;</div></li><li><div>            $current = ( isset( $options[$id][$key] ) ) ? $options[$id][$key] : '';&nbsp;</div></li><li><div>            printf( '&lt;input type=&quot;checkbox&quot; id=&quot;%1$s[%2$s][%3$s]&quot; name=&quot;%1$s[%2$s][%3$s]&quot; value=&quot;1&quot;%4$s /&gt; %5$s&lt;br/&gt;', $menu, $id, $key, checked( 1, $current, false ), $label );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            printf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Checkbox fields table callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Checkbox field.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function checkbox_table_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $rows = $args['rows'];&nbsp;</div></li><li><div>        $columns = $args['columns'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;table style=&quot;&quot;&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;td style=&quot;padding:0 10px 5px 0;&quot;&gt;&nbsp;&lt;/td&gt;&nbsp;</div></li><li><div>                &lt;?php foreach ( $columns as $column =&gt; $title ) { ?&gt;&nbsp;</div></li><li><div>                &lt;td style=&quot;padding:0 10px 5px 0;&quot;&gt;&lt;?php echo $title; ?&gt;&lt;/td&gt;&nbsp;</div></li><li><div>                &lt;?php } ?&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;td style=&quot;padding: 0;&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php foreach ($rows as $row) {&nbsp;</div></li><li><div>                        echo $row.'&lt;br/&gt;';&nbsp;</div></li><li><div>                    } ?&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>                &lt;?php foreach ( $columns as $column =&gt; $title ) { ?&gt;&nbsp;</div></li><li><div>                &lt;td style=&quot;text-align:center; padding: 0;&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php foreach ( $rows as $row =&gt; $title ) {&nbsp;</div></li><li><div>                        $current = ( isset( $options[$id.'_'.$column][$row] ) ) ? $options[$id.'_'.$column][$row] : '';&nbsp;</div></li><li><div>                        $name = sprintf('%1$s[%2$s_%3$s][%4$s]', $menu, $id, $column, $row);&nbsp;</div></li><li><div>                        printf( '&lt;input type=&quot;checkbox&quot; id=&quot;%1$s&quot; name=&quot;%1$s&quot; value=&quot;1&quot;%2$s /&gt;&lt;br/&gt;', $name, checked( 1, $current, false ) );&nbsp;</div></li><li><div>                    } ?&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>                &lt;?php } ?&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            printf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Select element callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Select field.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function select_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        printf( '&lt;select id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot;&gt;', $id, $menu );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $args['options'] as $key =&gt; $label ) {&nbsp;</div></li><li><div>            printf( '&lt;option value=&quot;%s&quot;%s&gt;%s&lt;/option&gt;', $key, selected( $current, $key, false ), $label );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;/select&gt;';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (isset($args['custom'])) {&nbsp;</div></li><li><div>            $custom = $args['custom'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $custom_id = $id.'_custom';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            printf( '&lt;br/&gt;&lt;br/&gt;&lt;div id=&quot;%s&quot; style=&quot;display:none;&quot;&gt;', $custom_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            switch ($custom['type']) {&nbsp;</div></li><li><div>                case 'text_element_callback':&nbsp;</div></li><li><div>                    $this-&gt;text_element_callback( $custom['args'] );&nbsp;</div></li><li><div>                    break;        &nbsp;</div></li><li><div>                case 'multiple_text_element_callback':&nbsp;</div></li><li><div>                    $this-&gt;multiple_text_element_callback( $custom['args'] );&nbsp;</div></li><li><div>                    break;        &nbsp;</div></li><li><div>                case 'multiple_checkbox_element_callback':&nbsp;</div></li><li><div>                    $this-&gt;multiple_checkbox_element_callback( $custom['args'] );&nbsp;</div></li><li><div>                    break;        &nbsp;</div></li><li><div>                default:&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>            &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>            jQuery(document).ready(function($) {&nbsp;</div></li><li><div>                function check_&lt;?php echo $id; ?&gt;_custom() {&nbsp;</div></li><li><div>                    var custom = $('#&lt;?php echo $id; ?&gt;').val();&nbsp;</div></li><li><div>                    if (custom == 'custom') {&nbsp;</div></li><li><div>                        $( '#&lt;?php echo $custom_id; ?&gt;').show();&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $( '#&lt;?php echo $custom_id; ?&gt;').hide();&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                check_&lt;?php echo $id; ?&gt;_custom();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $( '#&lt;?php echo $id; ?&gt;' ).change(function() {&nbsp;</div></li><li><div>                    check_&lt;?php echo $id; ?&gt;_custom();&nbsp;</div></li><li><div>                });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>            &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            printf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Displays a radio settings field&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array   $args settings field args&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function radio_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html = '';&nbsp;</div></li><li><div>        foreach ( $args['options'] as $key =&gt; $label ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;input type=&quot;radio&quot; class=&quot;radio&quot; id=&quot;%1$s[%2$s][%3$s]&quot; name=&quot;%1$s[%2$s]&quot; value=&quot;%3$s&quot;%4$s /&gt;', $menu, $id, $key, checked( $current, $key, false ) );&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;label for=&quot;%1$s[%2$s][%3$s]&quot;&gt; %4$s&lt;/label&gt;&lt;br&gt;', $menu, $id, $key, $label);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Media upload callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Media upload button & preview.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function media_upload_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $uploader_title = $args['uploader_title'];&nbsp;</div></li><li><div>        $uploader_button_text = $args['uploader_button_text'];&nbsp;</div></li><li><div>        $remove_button_text = $args['remove_button_text'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html = '';&nbsp;</div></li><li><div>        if( !empty($current) ) {&nbsp;</div></li><li><div>            $attachment = wp_get_attachment_image_src( $current, 'full', false );&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $attachment_src = $attachment[0];&nbsp;</div></li><li><div>            $attachment_width = $attachment[1];&nbsp;</div></li><li><div>            $attachment_height = $attachment[2];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $attachment_resolution = round($attachment_height/(3/2.54));&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            $html .= sprintf('&lt;img src=&quot;%1$s&quot; style=&quot;display:block&quot; id=&quot;img-%4$s&quot;/&gt;', $attachment_src, $attachment_width, $attachment_height, $id );&nbsp;</div></li><li><div>            $html .= '&lt;div class=&quot;attachment-resolution&quot;&gt;&lt;p class=&quot;description&quot;&gt;'.__('Image resolution').': '.$attachment_resolution.'dpi (default height = 3cm)&lt;/p&gt;&lt;/div&gt;';&nbsp;</div></li><li><div>            $html .= sprintf('&lt;span class=&quot;button wpo_remove_image_button&quot; data-input_id=&quot;%1$s&quot;&gt;%2$s&lt;/span&gt;', $id, $remove_button_text );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html .= sprintf( '&lt;input id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot; type=&quot;hidden&quot; value=&quot;%3$s&quot; /&gt;', $id, $menu, $current );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $html .= sprintf( '&lt;span class=&quot;button wpo_upload_image_button %4$s&quot; data-uploader_title=&quot;%1$s&quot; data-uploader_button_text=&quot;%2$s&quot; data-remove_button_text=&quot;%3$s&quot; data-input_id=&quot;%4$s&quot;&gt;%2$s&lt;/span&gt;', $uploader_title, $uploader_button_text, $remove_button_text, $id );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Invoice number formatting callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Media upload button & preview.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function invoice_number_formatting_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $fields = $args['fields'];&nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        echo '&lt;table&gt;';&nbsp;</div></li><li><div>        foreach ($fields as $key =&gt; $field) {&nbsp;</div></li><li><div>            $id = $args['id'] . '_' . $key;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>                $current = $options[$id];&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $current = '';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $title = $field['title'];&nbsp;</div></li><li><div>            $size = $field['size'];&nbsp;</div></li><li><div>            $description = isset( $field['description'] ) ? '&lt;span style=&quot;font-style:italic;&quot;&gt;'.$field['description'].'&lt;/span&gt;' : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            echo '&lt;tr&gt;';&nbsp;</div></li><li><div>            printf( '&lt;td style=&quot;padding:0 1em 0 0; &quot;&gt;%1$s:&lt;/td&gt;&lt;td style=&quot;padding:0;&quot;&gt;&lt;input type=&quot;text&quot; id=&quot;%2$s&quot; name=&quot;%3$s[%2$s]&quot; value=&quot;%4$s&quot; size=&quot;%5$s&quot;/&gt;&lt;/td&gt;&lt;td style=&quot;padding:0 0 0 1em;&quot;&gt;%6$s&lt;/td&gt;', $title, $id, $menu, $current, $size, $description );&nbsp;</div></li><li><div>            echo '&lt;/tr&gt;';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        echo '&lt;/table&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            printf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // echo $html;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Template select element callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $args Field arguments.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string      Select field.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function template_select_element_callback( $args ) {&nbsp;</div></li><li><div>        $menu = $args['menu'];&nbsp;</div></li><li><div>        $id = $args['id'];&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $options = get_option( $menu );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        if ( isset( $options[$id] ) ) {&nbsp;</div></li><li><div>            $current = $options[$id];&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $current = isset( $args['default'] ) ? $args['default'] : '';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        $html = sprintf( '&lt;select id=&quot;%1$s&quot; name=&quot;%2$s[%1$s]&quot;&gt;', $id, $menu );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // backwards compatible template path (1.4.4+ uses relative paths instead of absolute)&nbsp;</div></li><li><div>        if (strpos($current, ABSPATH) !== false) {&nbsp;</div></li><li><div>            //  check if folder exists, then strip site base path.&nbsp;</div></li><li><div>            if ( file_exists( $current ) ) {&nbsp;</div></li><li><div>                $current = str_replace( ABSPATH, '', $current );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $args['options'] as $key =&gt; $label ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;option value=&quot;%s&quot;%s&gt;%s&lt;/option&gt;', $key, selected( $current, $key, false ), $label );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $html .= '&lt;/select&gt;';&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Displays option description.&nbsp;</div></li><li><div>        if ( isset( $args['description'] ) ) {&nbsp;</div></li><li><div>            $html .= sprintf( '&lt;p class=&quot;description&quot;&gt;%s&lt;/p&gt;', $args['description'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        echo $html;&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Section null callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function section_options_callback() {&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Debug section callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function debug_section() {&nbsp;</div></li><li><div>        _e( '&lt;b&gt;Warning!&lt;/b&gt; The settings below are meant for debugging/development only. Do not use them on a live website!' , 'wpo_wcpdf' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Custom fields section callback.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function custom_fields_section() {&nbsp;</div></li><li><div>        _e( 'These are used for the (optional) footer columns in the &lt;em&gt;Modern (Premium)&lt;/em&gt; template, but can also be used for other elements in your custom template' , 'wpo_wcpdf' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Validate options.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param  array $input options to valid.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array        validated options.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function validate_options( $input ) {&nbsp;</div></li><li><div>        // Create our array for storing the validated options.&nbsp;</div></li><li><div>        $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (empty($input) || !is_array($input)) {&nbsp;</div></li><li><div>            return $input;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Loop through each of the incoming options.&nbsp;</div></li><li><div>        foreach ( $input as $key =&gt; $value ) {&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>            // Check to see if the current option has a value. If so, process it.&nbsp;</div></li><li><div>            if ( isset( $input[$key] ) ) {&nbsp;</div></li><li><div>                if ( is_array( $input[$key] ) ) {&nbsp;</div></li><li><div>                    foreach ( $input[$key] as $sub_key =&gt; $sub_value ) {&nbsp;</div></li><li><div>                        $output[$key][$sub_key] = $input[$key][$sub_key];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $output[$key] = $input[$key];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>        // Return the array processing any additional functions filtered by this action.&nbsp;</div></li><li><div>        return apply_filters( 'wpo_wcpdf_validate_input', $output, $input );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * List templates in plugin folder, theme folder & child theme folder&nbsp;</div></li><li><div>     * @return array        template path =&gt; template name&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function find_templates() {&nbsp;</div></li><li><div>        global $wpo_wcpdf;&nbsp;</div></li><li><div>        $installed_templates = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // get base paths&nbsp;</div></li><li><div>        $template_paths = array (&nbsp;</div></li><li><div>                // note the order: child-theme before theme, so that array_unique filters out parent doubles&nbsp;</div></li><li><div>                'default' =&gt; $wpo_wcpdf-&gt;export-&gt;template_default_base_path, &nbsp;</div></li><li><div>                'child-theme' =&gt; get_stylesheet_directory() . '/' . $wpo_wcpdf-&gt;export-&gt;template_base_path, &nbsp;</div></li><li><div>                'theme' =&gt; get_template_directory() . '/' . $wpo_wcpdf-&gt;export-&gt;template_base_path, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $template_paths = apply_filters( 'wpo_wcpdf_template_paths', $template_paths );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ($template_paths as $template_source =&gt; $template_path) {&nbsp;</div></li><li><div>            $dirs = (array) glob( $template_path . '*' , GLOB_ONLYDIR);&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            foreach ($dirs as $dir) {&nbsp;</div></li><li><div>                if ( file_exists($dir.&quot;/invoice.php&quot;) && file_exists($dir.&quot;/packing-slip.php&quot;))&nbsp;</div></li><li><div>                    // we're stripping abspath to make the plugin settings more portable&nbsp;</div></li><li><div>                    $installed_templates[ str_replace( ABSPATH, '', $dir )] = basename($dir);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // remove parent doubles&nbsp;</div></li><li><div>        $installed_templates = array_unique($installed_templates);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if (empty($installed_templates)) {&nbsp;</div></li><li><div>            // fallback to Simple template for servers with glob() disabled&nbsp;</div></li><li><div>            $simple_template_path = str_replace( ABSPATH, '', $template_paths['default'] . 'Simple' );&nbsp;</div></li><li><div>            $installed_templates[$simple_template_path] = 'Simple';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return apply_filters( 'wpo_wcpdf_templates', $installed_templates );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} // end class WooCommerce_PDF_Invoices_Settings&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.6.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.5/classes/woo_commerce_pdf_invoices_settings/" class="active">1.6.5</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.4/classes/woo_commerce_pdf_invoices_settings/" class="">1.6.4</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.3/classes/woo_commerce_pdf_invoices_settings/" class="">1.6.3</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.2/classes/woo_commerce_pdf_invoices_settings/" class="">1.6.2</a></li><li><a href="http://hookr.io/plugins/woocommerce-pdf-invoices-packing-slips/1.6.1/classes/woo_commerce_pdf_invoices_settings/" class="">1.6.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>WooCommerce_PDF_Invoices_Settings</li><li><span></span>WooCommerce PDF Invoices &amp; Packing Slips</li><li><span></span>1.6.5</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>