<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.0.2" data-slug="gravity-forms-light-blue-api-add-on" data-type="class" data-id="91942"><head xmlns="http://www.w3.org/1999/xhtml"><title> gflightblueapi | class | Gravity Forms Light Blue Api Add On | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="GFLightBlueAPI, class, plugin, gravity-forms-light-blue-api-add-on, 1.0.2" /><meta name="description" content="The Gravity Forms Light Blue API Add-On GFLightBlueAPI class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=d3ad2911c0f05a958950cb75f1144337' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/gflight_blue_api/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgflight_blue_api%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fgflight_blue_api%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-light-blue-api-add-on-1.0.2-class-gflight_blue_api","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="gflight_blue_api" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms-light-blue-api-&hellip;." href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/" class="plugin"><span property="name">gravity-forms-light-blue-api-&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.0.2." href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/" class="H_VERSION"><span property="name">1.0.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">gflight_blue_api</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="1"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/all/" title="All">All <span class="count badge">1</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/hooks/" title="Hooks">Hooks <span class="count badge">0</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/filters/" title="Filters">Filters <span class="count badge">0</span></a></li><li class="active" data-id="class" data-count="1"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/classes/" title="Classes">Classes <span class="count badge">1</span></a></li><li class="" data-id="constant" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/constants/" title="Constants">Constants <span class="count badge">0</span></a></li><li class="" data-id="function" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/functions/" title="Functions">Functions <span class="count badge">0</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>GFLightBlueAPI</strong></h1><p>The Gravity Forms Light Blue API Add-On <strong>GFLightBlueAPI</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/files/gravity-forms-light-blue/" class="file">/gravity-forms-light-blue.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="51" class="block" start="53"><li><div>class GFLightBlueAPI {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>private static $name = &quot;Gravity Forms Light Blue Add-On&quot;;&nbsp;</div></li><li><div>private static $path = &quot;gravity-forms-light-blue/gravity-forms-light-blue.php&quot;;&nbsp;</div></li><li><div>private static $version = &quot;0.1&quot;;&nbsp;</div></li><li><div>private static $min_gravityforms_version = &quot;1.6&quot;;  // I'm specifying 1.6 in case we decide to change from gform_pre_submission to gform_after_submission&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>//Plugin starting point. Will load appropriate files&nbsp;</div></li><li><div>public static function init() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    add_action(&quot;admin_notices&quot;, array('GFLightBlueAPI', 'display_gravity_forms_status'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>   if( !self::is_gravityforms_supported()) {&nbsp;</div></li><li><div>       return;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    $plugin_file = self::$path;&nbsp;</div></li><li><div>    add_filter( &quot;plugin_action_links_{$plugin_file}&quot;, array('GFLightBlueAPI', 'plugin_settings_link'), 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if(is_admin()) {  //creates a new Settings page on Gravity Forms' settings screen&nbsp;</div></li><li><div>            RGForms::add_settings_page(&quot;Light Blue API&quot;, array(&quot;GFLightBlueAPI&quot;, &quot;lb_settings_page&quot;) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    add_action(&quot;gform_pre_submission&quot;, Array( &quot;GFLightBlueAPI&quot;, &quot;lb_gform_pre_submission&quot; ) );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>}  // end of init()&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function lb_settings_page() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if(!empty($_POST[&quot;uninstall&quot;])) {&nbsp;</div></li><li><div>        check_admin_referer(&quot;deactivate&quot;, &quot;gf_light_blue_deactivate&quot;);&nbsp;</div></li><li><div>        self::deactivate();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;updated fade&quot; style=&quot;padding:20px;&quot;&gt;The Light Blue Gravity Forms add-on has been successfully uninstalled. It can be re-activated from the &lt;a href='plugins.php'&gt;plugins page&lt;/a&gt;.&lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        return;&nbsp;</div></li><li><div>    } elseif(!empty($_POST[&quot;gf_light_blue_submit&quot;])) {&nbsp;</div></li><li><div>        check_admin_referer(&quot;update&quot;, &quot;gf_light_blue_update&quot;);&nbsp;</div></li><li><div>        $settings = array(&nbsp;</div></li><li><div>            &quot;key&quot; =&gt; stripslashes($_POST[&quot;gf_light_blue_api_key&quot;]), &nbsp;</div></li><li><div>            &quot;date_format&quot; =&gt; stripslashes($_POST[&quot;gf_light_blue_date_format&quot;]), &nbsp;</div></li><li><div>            &quot;decimal_separator&quot; =&gt; stripslashes($_POST[&quot;gf_light_blue_decimal_separator&quot;]), &nbsp;</div></li><li><div>            &quot;debug&quot; =&gt; stripslashes($_POST[&quot;gf_light_blue_debug&quot;])&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        update_option(&quot;gf_light_blue_settings&quot;, $settings);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else{&nbsp;</div></li><li><div>        $settings = get_option(&quot;gf_light_blue_settings&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    if ($settings[&quot;key&quot;] == '') {&nbsp;</div></li><li><div>        $api_test_message = &quot;&quot;;&nbsp;</div></li><li><div>    } elseif ( self::lb_test_account( $api_test_message ) ) {&nbsp;</div></li><li><div>        $api_test_message = &quot;&lt;p style='display:block;margin-top:10px;color:green;'&gt;Account confirmed&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        $api_test_message = &quot;&lt;p style='display:block;margin-top:10px;color:red;'&gt;&quot;.$api_test_message.&quot;&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    ?&gt;&nbsp;</div></li><li><div>    &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>    &lt;h2&gt;Light Blue API Setup&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;div class=&quot;hr-divider&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;h3&gt;Using the Gravity Forms Light Blue API add on&lt;/h3&gt;&nbsp;</div></li><li><div>    &lt;p&gt;To send data to the Light Blue API, you need to associate the fields in your forms with parameters that the Light Blue API recognises.&lt;/p&gt;&nbsp;</div></li><li><div>    &lt;p&gt;To do this, you need to set the 'Parameter Name' for each field on your forms. You can find the 'Parameter Name' in the form editor, by clicking the 'Edit' button for a field, going to the 'Advanced' tab, checking the 'Allow field to be populated dynamically' box.&lt;/p&gt;&nbsp;</div></li><li><div>    &lt;p&gt;You can find a list of the parameters that the Light Blue API recognises &lt;a href='http://www.lightbluesoftware.com/api/' target='_blank'&gt;on our website&lt;/a&gt;. Any fields in your forms that do not have their 'Parameter Name' set, or have a 'Parameter Name' that doesn't match a valid Light Blue API paramater, will be ignored but stored in the Gravity Forms entries database as usual.&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;div class=&quot;hr-divider&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;form method=&quot;post&quot; action=&quot;&quot; style=&quot;margin: 30px 0 30px; clear:both;&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php wp_nonce_field(&quot;update&quot;, &quot;gf_light_blue_update&quot;) ?&gt;&nbsp;</div></li><li><div>        &lt;h3&gt;Your Light Blue Account&lt;/h3&gt;&nbsp;</div></li><li><div>        &lt;p&gt;If you don't have a subscription to Light Blue's online services, you can &lt;a href='http://www.lightbluesoftware.com' target='_blank'&gt;sign up for one here&lt;/a&gt;.&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;table class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;gf_light_blue_api_key&quot;&gt;API Key&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;text&quot; size=&quot;75&quot; id=&quot;gf_light_blue_api_key&quot; class=&quot;code pre&quot; name=&quot;gf_light_blue_api_key&quot; value=&quot;&lt;?php echo esc_attr($settings[&quot;key&quot;]) ?&gt;&quot;/&gt;&nbsp;</div></li><li><div>                    &lt;small style=&quot;display:block;&quot;&gt;You can find your Light Blue API key by logging into your account &lt;a href='http://www.lightbluesoftware.com' target='_blank'&gt;on our website&lt;/a&gt;.&lt;/small&gt;&nbsp;</div></li><li><div>                    &lt;?php print $api_test_message;?&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;gf_light_blue_date_format&quot;&gt;Date Format&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;select name=&quot;gf_light_blue_date_format&quot; id=&quot;gf_light_blue_date_format&quot;&gt;&nbsp;</div></li><li><div>                        &lt;option &lt;?php if( $settings[&quot;date_format&quot;] == &quot;dd/mm/yyyy&quot; ) { print &quot;selected='selected'&quot;; } ?&gt; value=&quot;dd/mm/yyyy&quot;&gt;dd/mm/yyyy&lt;/option&gt;&nbsp;</div></li><li><div>                        &lt;option &lt;?php if( $settings[&quot;date_format&quot;] == &quot;d/m/yyyy&quot; ) { print &quot;selected='selected'&quot;; } ?&gt; value=&quot;d/m/yyyy&quot;&gt;d/m/yyyy&lt;/option&gt;&nbsp;</div></li><li><div>                        &lt;option &lt;?php if( $settings[&quot;date_format&quot;] == &quot;mm/dd/yyyy&quot; ) { print &quot;selected='selected'&quot;; } ?&gt; value=&quot;mm/dd/yyyy&quot;&gt;mm/dd/yyyy&lt;/option&gt;&nbsp;</div></li><li><div>                        &lt;option &lt;?php if( $settings[&quot;date_format&quot;] == &quot;m/d/yyyy&quot; ) { print &quot;selected='selected'&quot;; } ?&gt; value=&quot;m/d/yyyy&quot;&gt;m/d/yyyy&lt;/option&gt;&nbsp;</div></li><li><div>                    &lt;/select&gt;&nbsp;</div></li><li><div>                    &lt;small style=&quot;display:block;&quot;&gt;You need to make sure that the format of any date fields in your forms matches the date format you've selected here, or the Light Blue API might not understand dates that you send to it.&lt;/small&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th scope=&quot;row&quot;&gt;Time Format&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;small style=&quot;display:block;&quot;&gt;You don't need to specify a time format, but the format of any time fields in your forms must be one of the following: hh:mm (i.e. a 24-hour time with leading zeros for the hour), h:mm (i.e. a 24-hour time without leading zeros for the hour), hh:mm AM/PM, h:mm AM/PM&lt;/small&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th scope=&quot;row&quot;&gt;&lt;label for=&quot;gf_light_blue_decimal_separator&quot;&gt;Decimal Separator&lt;/label&gt;&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;text&quot; size=&quot;5&quot; id=&quot;gf_light_blue_decimal_separator&quot; class=&quot;code pre&quot; name=&quot;gf_light_blue_decimal_separator&quot; value=&quot;&lt;?php echo esc_attr($settings[&quot;decimal_separator&quot;]) ?&gt;&quot;/&gt;&nbsp;</div></li><li><div>                    &lt;small style=&quot;display:block;&quot;&gt;If you send currency values to the Light Blue API, it will assume that you are using a full stop character as your decimal separator (e.g. $10.00) unless you specify a different decimal separator here.&lt;/small&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            &nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;th scope=&quot;row&quot;&gt;Debugging&lt;/th&gt;&nbsp;</div></li><li><div>                &lt;td&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;gf_light_blue_debug&quot;&gt;&nbsp;</div></li><li><div>                    &lt;?php if( isset($settings[&quot;debug&quot;]) && ($settings[&quot;debug&quot;] == 'on' ) ) { &nbsp;</div></li><li><div>                        print &quot;&lt;input name='gf_light_blue_debug' type='checkbox' id='gf_light_blue_debug' checked&gt;&quot;; &nbsp;</div></li><li><div>                    } else { &nbsp;</div></li><li><div>                        print &quot;&lt;input name='gf_light_blue_debug' type='checkbox' id='gf_light_blue_debug'&gt;&quot;; &nbsp;</div></li><li><div>                    } ?&gt;&nbsp;</div></li><li><div>                    Email debugging logs to your WordPress admin email address.&nbsp;</div></li><li><div>                &lt;/label&gt;&nbsp;</div></li><li><div>                &lt;small style=&quot;display:block;&quot;&gt;(n.b. this option should only be turned on to help Light Blue Software diagnose any problems you have with sending data to the Light Blue API)&lt;/small&gt;&nbsp;</div></li><li><div>                &lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>            &lt;tr&gt;&nbsp;</div></li><li><div>                &lt;td colspan=&quot;2&quot; &gt;&lt;input type=&quot;submit&quot; name=&quot;gf_light_blue_submit&quot; class=&quot;submit button-primary&quot; value=&quot;Update Settings&quot; /&gt;&lt;/td&gt;&nbsp;</div></li><li><div>            &lt;/tr&gt;&nbsp;</div></li><li><div>        &lt;/table&gt;&nbsp;</div></li><li><div>    &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;div class=&quot;hr-divider&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&nbsp;</div></li><li><div>        &lt;?php wp_nonce_field(&quot;deactivate&quot;, &quot;gf_light_blue_deactivate&quot;) ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;h3&gt;Deactivate Light Blue API add-on&lt;/h3&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;delete-alert alert_red&quot;&gt;&nbsp;</div></li><li><div>            &lt;h3&gt;Warning&lt;/h3&gt;&nbsp;</div></li><li><div>            &lt;p&gt;Deactivating the Light Blue API add-on for Gravity Forms will mean that your forms will no longer submit data to the Light Blue API.&lt;/p&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;submit&quot; name=&quot;uninstall&quot; value=&quot;Deactivate Light Blue API Add-On&quot; class=&quot;button&quot; onclick=&quot;return confirm(\'Really deactivate the Light Blue add-on?\');&quot;/&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>    &lt;/form&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    &lt;/div&gt;&nbsp;</div></li><li><div>    &lt;?php&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function lb_test_account( &$message ) {&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    $settings = get_option(&quot;gf_light_blue_settings&quot;);&nbsp;</div></li><li><div>    $submitted_data = Array();&nbsp;</div></li><li><div>    $submitted_data[&quot;Key&quot;] = $settings[&quot;key&quot;];&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // Post the submitted values to the Light Blue API account check script&nbsp;</div></li><li><div>    $response = wp_remote_post( &quot;https://online.lightbluesoftware.com/apiCheck.php&quot;, array(&nbsp;</div></li><li><div>        'method' =&gt; 'POST', &nbsp;</div></li><li><div>        'timeout' =&gt; 45, &nbsp;</div></li><li><div>        'redirection' =&gt; 5, &nbsp;</div></li><li><div>        'body' =&gt; $submitted_data, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    if ( is_wp_error( $response ) ) {&nbsp;</div></li><li><div>        $message = &quot;WordPress error: &quot;.$response-&gt;get_error_message();&nbsp;</div></li><li><div>        Return False;&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        if ( $response[&quot;response&quot;][&quot;code&quot;] == 200 ) {&nbsp;</div></li><li><div>            $status_array = Explode( Chr(13), $response[&quot;body&quot;] );&nbsp;</div></li><li><div>            if( $status_array[0] == 0 ) {&nbsp;</div></li><li><div>                $message = $status_array[1];&nbsp;</div></li><li><div>                Return True;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $message = $status_array[1];&nbsp;</div></li><li><div>                Return False;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function lb_gform_pre_submission( $form ) {&nbsp;</div></li><li><div>    $submitted_data = array();&nbsp;</div></li><li><div>    $settings = get_option(&quot;gf_light_blue_settings&quot;);&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    if( isset($settings[&quot;debug&quot;]) && ($settings[&quot;debug&quot;] == 'on' ) ) {  // Send debugging email&nbsp;</div></li><li><div>        ob_start();&nbsp;</div></li><li><div>        var_dump($form);&nbsp;</div></li><li><div>        mail( get_option('admin_email'), 'Light Blue API for Gravity Forms $form', ob_get_contents() );&nbsp;</div></li><li><div>        ob_end_clean();&nbsp;</div></li><li><div>        ob_start();&nbsp;</div></li><li><div>        var_dump($_POST);&nbsp;</div></li><li><div>        mail( get_option('admin_email'), 'Light Blue API for Gravity Forms $_POST', ob_get_contents() );&nbsp;</div></li><li><div>        ob_end_clean();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Build up an array of values submitted via the form&nbsp;</div></li><li><div>    foreach( $form[&quot;fields&quot;] as $field) {&nbsp;</div></li><li><div>        $label = &quot;&quot;;&nbsp;</div></li><li><div>        $value = &quot;&quot;;&nbsp;</div></li><li><div>        if( is_array( $field[&quot;inputs&quot;] ) ) {  // This is multi-input field, like the name field.&nbsp;</div></li><li><div>            if( $field[&quot;type&quot;] == &quot;checkbox&quot; ) {&nbsp;</div></li><li><div>                if( isset( $field[&quot;inputName&quot;] ) && ($field[&quot;inputName&quot;] != '') ) {&nbsp;</div></li><li><div>                    $label = $field[&quot;inputName&quot;];&nbsp;</div></li><li><div>                    foreach( $field[&quot;inputs&quot;] as $input ) {&nbsp;</div></li><li><div>                        if( isset( $_POST[&quot;input_&quot;.str_replace( '.', '_', $input[&quot;id&quot;] )] ) ) {&nbsp;</div></li><li><div>                            if( $value != '' ) { $value .= Chr(13); }&nbsp;</div></li><li><div>                            $value .= stripslashes( $_POST[&quot;input_&quot;.str_replace('.', '_', $input[&quot;id&quot;] )] );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                   }    &nbsp;</div></li><li><div>                }                &nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                foreach( $field[&quot;inputs&quot;] as $input ) {&nbsp;</div></li><li><div>                    if( isset( $input[&quot;name&quot;] ) && ($input[&quot;name&quot;] != '') ) {&nbsp;</div></li><li><div>                        $label = $input[&quot;name&quot;];&nbsp;</div></li><li><div>                        if( isset( $_POST[&quot;input_&quot;.str_replace( '.', '_', $input[&quot;id&quot;] )] ) ) {&nbsp;</div></li><li><div>                            $value = stripslashes( $_POST[&quot;input_&quot;.str_replace('.', '_', $input[&quot;id&quot;] )] );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    if ($value != '') {&nbsp;</div></li><li><div>                        $submitted_data[$label] = $value;&nbsp;</div></li><li><div>                    }        &nbsp;</div></li><li><div>                    $value = &quot;&quot;;  // Clear $value because we're setting $submitted_data within this loop instead of within the fields loop&nbsp;</div></li><li><div>               }&nbsp;</div></li><li><div>           }&nbsp;</div></li><li><div>        } elseif( $field[&quot;type&quot;] == &quot;multiselect&quot; ) {&nbsp;</div></li><li><div>            if( isset( $field[&quot;inputName&quot;] ) && ($field[&quot;inputName&quot;] != '') ) {&nbsp;</div></li><li><div>                $label = $field[&quot;inputName&quot;];&nbsp;</div></li><li><div>                if( isset( $_POST[&quot;input_&quot; . $field[&quot;id&quot;]] ) ) {&nbsp;</div></li><li><div>                    $value_array = $_POST[&quot;input_&quot; . $field[&quot;id&quot;]];&nbsp;</div></li><li><div>                    foreach( $value_array as $multiselect_value ) {&nbsp;</div></li><li><div>                        if( $value != '' ) { $value .= Chr(13); }&nbsp;</div></li><li><div>                        $value .= stripslashes( $multiselect_value );&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } else {  // This is a single-input field&nbsp;</div></li><li><div>            if( isset( $field[&quot;inputName&quot;] ) && ($field[&quot;inputName&quot;] != '') ) {&nbsp;</div></li><li><div>                $label = $field[&quot;inputName&quot;];&nbsp;</div></li><li><div>                if( isset( $_POST[&quot;input_&quot; . $field[&quot;id&quot;]] ) ) {&nbsp;</div></li><li><div>                    $value = stripslashes( $_POST[&quot;input_&quot; . $field[&quot;id&quot;]] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($value != '') {&nbsp;</div></li><li><div>            $submitted_data[$label] = $value;&nbsp;</div></li><li><div>        }    &nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    if( Count( $submitted_data ) == 0 ) { Return; }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    $submitted_data[&quot;Type&quot;] = &quot;contact form&quot;;&nbsp;</div></li><li><div>    $submitted_data[&quot;Source&quot;] = self::$name;&nbsp;</div></li><li><div>    $submitted_data[&quot;SourceAPIVersion&quot;] = self::$version;&nbsp;</div></li><li><div>    $submitted_data[&quot;Key&quot;] = $settings[&quot;key&quot;];&nbsp;</div></li><li><div>    if( isset( $settings[&quot;date_format&quot;] ) && ($settings[&quot;date_format&quot;] != '') ) {&nbsp;</div></li><li><div>        $submitted_data[&quot;DateFormat&quot;] = $settings[&quot;date_format&quot;];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if( isset( $settings[&quot;decimal_separator&quot;] ) && ($settings[&quot;decimal_separator&quot;] != '') ) {&nbsp;</div></li><li><div>        $submitted_data[&quot;DecimalSeparator&quot;] = $settings[&quot;decimal_separator&quot;];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    if( isset($settings[&quot;debug&quot;]) && ($settings[&quot;debug&quot;] == 'on' ) ) {  // Send debugging email&nbsp;</div></li><li><div>        ob_start();&nbsp;</div></li><li><div>        var_dump($submitted_data);&nbsp;</div></li><li><div>        mail( get_option('admin_email'), 'Light Blue API for Gravity Forms about to send', ob_get_contents() );&nbsp;</div></li><li><div>        ob_end_clean();&nbsp;</div></li><li><div>    }    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    // Post the submitted values to the Light Blue API&nbsp;</div></li><li><div>    $response = wp_remote_post( &quot;https://online.lightbluesoftware.com/api.php&quot;, array(&nbsp;</div></li><li><div>        'method' =&gt; 'POST', &nbsp;</div></li><li><div>        'timeout' =&gt; 45, &nbsp;</div></li><li><div>        'redirection' =&gt; 5, &nbsp;</div></li><li><div>        'body' =&gt; $submitted_data, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    if( isset($settings[&quot;debug&quot;]) && ($settings[&quot;debug&quot;] == 'on' ) ) {  // Send debugging email&nbsp;</div></li><li><div>        if ( is_wp_error( $response ) ) {&nbsp;</div></li><li><div>            $error_message = $response-&gt;get_error_message();&nbsp;</div></li><li><div>            mail( get_option('admin_email'), 'Light Blue API for Gravity Forms sending error', $error_message );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            ob_start();&nbsp;</div></li><li><div>            var_dump($response);&nbsp;</div></li><li><div>            mail( get_option('admin_email'), 'Light Blue API for Gravity Forms sent', ob_get_contents() );&nbsp;</div></li><li><div>            ob_end_clean();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>    &nbsp;</div></li><li><div>}  // end of lb_gform_pre_submission&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function plugin_settings_link( $links, $file ) {  // modify the link by unshifting the array&nbsp;</div></li><li><div>    $settings_link = '&lt;a href=&quot;' . admin_url( 'admin.php?page=gf_settings&subview=Light+Blue+API' ) . '&quot;&gt;Settings&lt;/a&gt;';&nbsp;</div></li><li><div>    array_unshift( $links, $settings_link );&nbsp;</div></li><li><div>    return $links;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function deactivate() {&nbsp;</div></li><li><div>    // Remove stored settings&nbsp;</div></li><li><div>    delete_option(&quot;gf_light_blue_settings&quot;);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    // Deactivate plugin&nbsp;</div></li><li><div>    $plugin = self::$path;&nbsp;</div></li><li><div>    deactivate_plugins($plugin);&nbsp;</div></li><li><div>    update_option('recently_activated', array($plugin =&gt; time()) + (array)get_option('recently_activated'));&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function display_gravity_forms_status() {&nbsp;</div></li><li><div>    if( self::is_gravity_forms_installed( True ) == 1) {  // Installed, so check version requirements&nbsp;</div></li><li><div>        if( self::is_gravityforms_supported() == False ) {&nbsp;</div></li><li><div>            $message = &quot;&lt;p&gt;The &quot;.self::$name.&quot; plugin requires &lt;a href='http://www.gravityforms.com' target='_blank'&gt;Gravity Forms&lt;/a&gt; version &quot;.self::$min_gravityforms_version.&quot;, and you are using version &quot;.GFCommon::$version.&quot;. Please update Gravity Forms.&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>            print &quot;&lt;div id='message' class='updated'&gt;&quot;.$message.&quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>public static function is_gravity_forms_installed( $printStatus = False ) {&nbsp;</div></li><li><div>    $message = '';&nbsp;</div></li><li><div>    $installed = 0;&nbsp;</div></li><li><div>    if(!class_exists('RGForms')) {&nbsp;</div></li><li><div>        if(file_exists(WP_PLUGIN_DIR.'/gravityforms/gravityforms.php')) {&nbsp;</div></li><li><div>            $installed = 2;&nbsp;</div></li><li><div>            $message = &quot;&lt;p&gt;Gravity Forms is installed but not active. Please activate the Gravity Forms plugin on the &lt;a href='&quot;.wp_nonce_url(admin_url('plugins.php')).&quot;'&gt;plugin settins page&lt;/a&gt; to use the &quot;.self::$name.&quot; plugin.&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $installed = 0;&nbsp;</div></li><li><div>            $message = &quot;&lt;p&gt;The &quot;.self::$name.&quot; plugin requires the &lt;a href='http://www.gravityforms.com' target='_blank'&gt;Gravity Forms&lt;/a&gt; plugin.&lt;/p&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    } else {&nbsp;</div></li><li><div>        $installed = 1;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    if(($message != '') && ($printStatus == True)) {&nbsp;</div></li><li><div>            print &quot;&lt;div id='message' class='updated'&gt;&quot;.$message.&quot;&lt;/div&gt;&quot;;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    return $installed;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>private static function is_gravityforms_supported() {&nbsp;</div></li><li><div>    if(class_exists(&quot;GFCommon&quot;)) {&nbsp;</div></li><li><div>        $is_correct_version = version_compare(GFCommon::$version, self::$min_gravityforms_version, &quot;&gt;=&quot;);&nbsp;</div></li><li><div>        return $is_correct_version;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    else{&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 1.0</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0.2/classes/gflight_blue_api/" class="active">1.0.2</a></li><li><a href="http://hookr.io/plugins/gravity-forms-light-blue-api-add-on/1.0/classes/gflight_blue_api/" class="">1.0</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>GFLightBlueAPI</li><li><span></span>Gravity Forms Light Blue API Add-On</li><li><span></span>1.0.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>