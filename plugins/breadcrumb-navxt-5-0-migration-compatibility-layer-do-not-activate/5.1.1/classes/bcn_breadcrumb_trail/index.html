<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="5.1.1" data-slug="breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate" data-type="class" data-id="10270"><head xmlns="http://www.w3.org/1999/xhtml"><title> bcn_breadcrumb_trail | class | Breadcrumb Navxt 5 0 Migration Compatibility Layer Do Not Activate | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="bcn_breadcrumb_trail, class, plugin, breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate, 5.1.1" /><meta name="description" content="The Breadcrumb NavXT 5.0 Migration Compatibility Layer DO NOT ACTIVATE bcn breadcrumb trail class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=1134ee87825e95131f4305573f8f33af' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/bcn_breadcrumb_trail/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fbcn_breadcrumb_trail%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fbcn_breadcrumb_trail%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate-5.1.1-class-bcn_breadcrumb_trail","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="bcn_breadcrumb_trail" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to breadcrumb-navxt-5-0-migratio&hellip;." href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/" class="plugin"><span property="name">breadcrumb-navxt-5-0-migratio&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><span property="name">5.1.1</span><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">bcn_breadcrumb_trail</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="68"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/all/" title="All">All <span class="count badge">68</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="46"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/hooks/" title="Hooks">Hooks <span class="count badge">46</span></a></li><li class="" data-id="action" data-count="22"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/actions/" title="Actions">Actions <span class="count badge">22</span></a></li><li class="" data-id="filter" data-count="24"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/filters/" title="Filters">Filters <span class="count badge">24</span></a></li><li class="active" data-id="class" data-count="9"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/classes/" title="Classes">Classes <span class="count badge">9</span></a></li><li class="" data-id="constant" data-count="1"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/constants/" title="Constants">Constants <span class="count badge">1</span></a></li><li class="" data-id="function" data-count="12"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/functions/" title="Functions">Functions <span class="count badge">12</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>bcn_breadcrumb_trail</strong></h1><p>The Breadcrumb NavXT 5.0 Migration Compatibility Layer DO NOT ACTIVATE <strong>bcn breadcrumb trail</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/files/class-bcn-breadcrumb-trail/" class="file">/class.bcn_breadcrumb_trail.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="21" class="block" start="21"><li><div>class bcn_breadcrumb_trail&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>    //Our member variables&nbsp;</div></li><li><div>    private $version = '5.1.1';&nbsp;</div></li><li><div>    //An array of breadcrumbs&nbsp;</div></li><li><div>    public $breadcrumbs = array();&nbsp;</div></li><li><div>    public $trail = array();&nbsp;</div></li><li><div>    //The options&nbsp;</div></li><li><div>    public $opt;&nbsp;</div></li><li><div>    //Default constructor&nbsp;</div></li><li><div>    public function __construct()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //@see https://core.trac.wordpress.org/ticket/10527&nbsp;</div></li><li><div>        if(!is_textdomain_loaded('breadcrumb-navxt'))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            load_plugin_textdomain('breadcrumb-navxt', false, 'breadcrumb-navxt/languages');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $this-&gt;trail = &$this-&gt;breadcrumbs;&nbsp;</div></li><li><div>        //Load the translation domain as the next part needs it        &nbsp;</div></li><li><div>        //load_plugin_textdomain('breadcrumb-navxt', false, 'breadcrumb-navxt/languages');&nbsp;</div></li><li><div>        //Initilize with default option values&nbsp;</div></li><li><div>        $this-&gt;opt = array(&nbsp;</div></li><li><div>            //Should the mainsite be shown&nbsp;</div></li><li><div>            'bmainsite_display' =&gt; true, &nbsp;</div></li><li><div>            //The breadcrumb template for the main site, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hmainsite_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for the main site, used when an anchor is not needed, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hmainsite_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Should the home page be shown&nbsp;</div></li><li><div>            'bhome_display' =&gt; true, &nbsp;</div></li><li><div>            //The breadcrumb template for the home page, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hhome_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for the home page, used when an anchor is not needed, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hhome_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Should the blog page be shown globally&nbsp;</div></li><li><div>            'bblog_display' =&gt; true, &nbsp;</div></li><li><div>            //The breadcrumb template for the blog page only in static front page mode, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hblog_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for the blog page only in static front page mode, used when an anchor is not needed, this is global, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hblog_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Separator that is placed between each item in the breadcrumb trial, but not placed before&nbsp;</div></li><li><div>            //the first and not after the last breadcrumb&nbsp;</div></li><li><div>            'hseparator' =&gt; ' &gt; ', &nbsp;</div></li><li><div>            //Whether or not we should trim the breadcrumb titles&nbsp;</div></li><li><div>            'blimit_title' =&gt; false, &nbsp;</div></li><li><div>            //The maximum title length&nbsp;</div></li><li><div>            'amax_title_length' =&gt; 20, &nbsp;</div></li><li><div>            //Current item options, really only applies to static pages and posts unless other current items are linked&nbsp;</div></li><li><div>            'bcurrent_item_linked' =&gt; false, &nbsp;</div></li><li><div>            //Static page options&nbsp;</div></li><li><div>            //The anchor template for page breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_page_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The anchor template for page breadcrumbs, used when an anchor is not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_page_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Just a link to the page on front property&nbsp;</div></li><li><div>            'apost_page_root' =&gt; get_option('page_on_front'), &nbsp;</div></li><li><div>            //Paged options&nbsp;</div></li><li><div>            //The template for paged breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpaged_template' =&gt; __('Page %htitle%', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //Should we try filling out paged information&nbsp;</div></li><li><div>            'bpaged_display' =&gt; false, &nbsp;</div></li><li><div>            //The post options previously singleblogpost&nbsp;</div></li><li><div>            //The breadcrumb template for post breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_post_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for post breadcrumbs, used when an anchor is not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_post_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Just a link for the page for posts&nbsp;</div></li><li><div>            'apost_post_root' =&gt; get_option('page_for_posts'), &nbsp;</div></li><li><div>            //Should the trail include the taxonomy of the post&nbsp;</div></li><li><div>            'bpost_post_taxonomy_display' =&gt; true, &nbsp;</div></li><li><div>            //What taxonomy should be shown leading to the post, tag or category&nbsp;</div></li><li><div>            'Spost_post_taxonomy_type' =&gt; 'category', &nbsp;</div></li><li><div>            //Attachment settings&nbsp;</div></li><li><div>            //TODO: Need to move attachments to support via normal post handlers&nbsp;</div></li><li><div>            //The breadcrumb template for attachment breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_attachment_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for attachment breadcrumbs, used when an anchor is not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_attachment_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //404 page settings&nbsp;</div></li><li><div>            //The template for 404 breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'H404_template' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //The text to be shown in the breadcrumb for a 404 page&nbsp;</div></li><li><div>            'S404_title' =&gt; __('404', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //Search page options&nbsp;</div></li><li><div>            //The breadcrumb template for search breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hsearch_template' =&gt; __('Search results for &#39;&lt;a title=&quot;Go to the first page of search results for %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&#39;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for search breadcrumbs, used when an anchor is not necessary, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hsearch_template_no_anchor' =&gt; __('Search results for &#39;%htitle%&#39;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //Tag related stuff&nbsp;</div></li><li><div>            //The breadcrumb template for tag breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Htax_post_tag_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to the %title% tag archives.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for tag breadcrumbs, used when an anchor is not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Htax_post_tag_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Post format related stuff&nbsp;</div></li><li><div>            //The breadcrumb template for post format breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_format_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to the %title% tag archives.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for post format breadcrumbs, used when an anchor is not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hpost_format_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //Author page stuff&nbsp;</div></li><li><div>            //The anchor template for author breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hauthor_template' =&gt; __('Articles by: &lt;a title=&quot;Go to the first page of posts by %title%.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The anchor template for author breadcrumbs, used when anchors are not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hauthor_template_no_anchor' =&gt; __('Articles by: %htitle%', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //Which of the various WordPress display types should the author breadcrumb display&nbsp;</div></li><li><div>            'Sauthor_name' =&gt; 'display_name', &nbsp;</div></li><li><div>            //Category stuff&nbsp;</div></li><li><div>            //The breadcrumb template for category breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Htax_category_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to the %title% category archives.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for category breadcrumbs, used when anchors are not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Htax_category_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;', &nbsp;</div></li><li><div>            //The breadcrumb template for date breadcrumbs, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hdate_template' =&gt; __('&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;a rel=&quot;v:url&quot; property=&quot;v:title&quot; title=&quot;Go to the %title% archives.&quot; href=&quot;%link%&quot; class=&quot;%type%&quot;&gt;%htitle%&lt;/a&gt;&lt;/span&gt;', 'breadcrumb-navxt'), &nbsp;</div></li><li><div>            //The breadcrumb template for date breadcrumbs, used when anchors are not needed, four keywords are available %link%, %title%, %htitle%, and %type%&nbsp;</div></li><li><div>            'Hdate_template_no_anchor' =&gt; '&lt;span typeof=&quot;v:Breadcrumb&quot;&gt;&lt;span property=&quot;v:title&quot;&gt;%htitle%&lt;/span&gt;&lt;/span&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * This returns the internal version&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return string internal version of the Breadcrumb trail&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function get_version()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return $this-&gt;version;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Adds a breadcrumb to the breadcrumb trail&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @return pointer to the just added Breadcrumb&nbsp;</div></li><li><div>     * @param bcn_breadcrumb $object Breadcrumb to add to the trail&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function &add(bcn_breadcrumb $object)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;breadcrumbs[] = $object;&nbsp;</div></li><li><div>        //Return the just added object&nbsp;</div></li><li><div>        return $this-&gt;breadcrumbs[count($this-&gt;breadcrumbs) - 1];&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for a search page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_search()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_search_query(), $this-&gt;opt['Hsearch_template_no_anchor'], array('search', 'current-item')));&nbsp;</div></li><li><div>        //If we're paged, or allowing the current item to be linked, let's link to the first page&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'] || (is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Since we are paged and are linking the root breadcrumb, time to change to the regular template&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hsearch_template']);&nbsp;</div></li><li><div>            //Figure out the hyperlink for the anchor&nbsp;</div></li><li><div>            $url = home_url('?s=' . str_replace(' ', '+', get_search_query()));&nbsp;</div></li><li><div>            //Figure out the anchor for the search&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url($url);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for an author page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_author()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if(get_query_var('author_name'))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $authordata = get_user_by('slug', get_query_var('author_name'));    &nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $authordata = get_userdata(get_query_var('author'));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Setup array of valid author_name values&nbsp;</div></li><li><div>        $valid_author_name = array('display_name', 'nickname', 'first_name', 'last_name');&nbsp;</div></li><li><div>        //Make sure user picks only safe values&nbsp;</div></li><li><div>        if(in_array($this-&gt;opt['Sauthor_name'], $valid_author_name))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_author_meta($this-&gt;opt['Sauthor_name'], $authordata-&gt;ID), $this-&gt;opt['Hauthor_template_no_anchor'], array('author', 'current-item'), NULL, $authordata-&gt;ID));&nbsp;</div></li><li><div>            //If we're paged, or allowing the current item to be linked, let's link to the first page&nbsp;</div></li><li><div>            if($this-&gt;opt['bcurrent_item_linked'] || (is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Set the template to our one containing an anchor&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_template($this-&gt;opt['Hauthor_template']);&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_url(get_author_posts_url($authordata-&gt;ID));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This function fills breadcrumbs for any post taxonomy.&nbsp;</div></li><li><div>     * @param int $id The id of the post to figure out the taxonomy for.&nbsp;</div></li><li><div>     * @param string $type The post type of the post to figure out the taxonomy for.&nbsp;</div></li><li><div>     * @param int $parent (optional) The id of the parent of the current post, used if hiearchal posts will be the &quot;taxonomy&quot; for the current post&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * TODO: Add logic for contextual taxonomy selection&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function post_hierarchy($id, $type, $parent = NULL)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Check to see if breadcrumbs for the taxonomy of the post needs to be generated&nbsp;</div></li><li><div>        if($this-&gt;opt['bpost_' . $type . '_taxonomy_display'])&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Check if we have a date 'taxonomy' request&nbsp;</div></li><li><div>            if($this-&gt;opt['Spost_' . $type . '_taxonomy_type'] == 'date')&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_archive_by_date();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Handle all hierarchical taxonomies, including categories&nbsp;</div></li><li><div>            else if(is_taxonomy_hierarchical($this-&gt;opt['Spost_' . $type . '_taxonomy_type']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Fill a temporary object with the terms&nbsp;</div></li><li><div>                $bcn_object = get_the_terms($id, $this-&gt;opt['Spost_' . $type . '_taxonomy_type']);&nbsp;</div></li><li><div>                if(is_array($bcn_object))&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    //Now find which one has a parent, pick the first one that does&nbsp;</div></li><li><div>                    $bcn_use_term = key($bcn_object);&nbsp;</div></li><li><div>                    foreach($bcn_object as $key=&gt;$object)&nbsp;</div></li><li><div>                    {&nbsp;</div></li><li><div>                        //We want the first term hiearchy&nbsp;</div></li><li><div>                        if($object-&gt;parent &gt; 0)&nbsp;</div></li><li><div>                        {&nbsp;</div></li><li><div>                            $bcn_use_term = $key;&nbsp;</div></li><li><div>                            //We found our first term hiearchy, can exit loop now&nbsp;</div></li><li><div>                            break;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    //Fill out the term hiearchy&nbsp;</div></li><li><div>                    $this-&gt;term_parents($bcn_object[$bcn_use_term]-&gt;term_id, $this-&gt;opt['Spost_' . $type . '_taxonomy_type']);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Handle the use of hierarchical posts as the 'taxonomy'&nbsp;</div></li><li><div>            else if(is_post_type_hierarchical($this-&gt;opt['Spost_' . $type . '_taxonomy_type']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                if($parent == NULL)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    //We have to grab the post to find its parent, can't use $post for this one&nbsp;</div></li><li><div>                    $parent = get_post($id);&nbsp;</div></li><li><div>                    $parent = $parent-&gt;post_parent;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //Done with the current item, now on to the parents&nbsp;</div></li><li><div>                $bcn_frontpage = get_option('page_on_front');&nbsp;</div></li><li><div>                //If there is a parent page let's find it&nbsp;</div></li><li><div>                if($parent && $id != $parent && $bcn_frontpage != $parent)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $this-&gt;post_parents($parent, $bcn_frontpage);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Handle the rest of the taxonomies, including tags&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;post_terms($id, $this-&gt;opt['Spost_' . $type . '_taxonomy_type']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for the terms of a post&nbsp;</div></li><li><div>     * @param int $id The id of the post to find the terms for.&nbsp;</div></li><li><div>     * @param string $taxonomy The name of the taxonomy that the term belongs to&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * TODO Need to implement this cleaner&nbsp;</div></li><li><div>     * TODO This still needs to be updated to the new method of adding breadcrumbs to the trail&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function post_terms($id, $taxonomy)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Fills a temporary object with the terms for the post&nbsp;</div></li><li><div>        $bcn_object = get_the_terms($id, $taxonomy);&nbsp;</div></li><li><div>        //Only process if we have terms&nbsp;</div></li><li><div>        if(is_array($bcn_object))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Add new breadcrumb to the trail&nbsp;</div></li><li><div>            $this-&gt;breadcrumbs[] = new bcn_breadcrumb();&nbsp;</div></li><li><div>            //Figure out where we placed the crumb, make a nice pointer to it&nbsp;</div></li><li><div>            $bcn_breadcrumb = &$this-&gt;breadcrumbs[count($this-&gt;breadcrumbs) - 1];&nbsp;</div></li><li><div>            $is_first = true;&nbsp;</div></li><li><div>            //Loop through all of the term results&nbsp;</div></li><li><div>            foreach($bcn_object as $term)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Everything but the first term needs a comma separator&nbsp;</div></li><li><div>                if($is_first == false)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $bcn_breadcrumb-&gt;set_title($bcn_breadcrumb-&gt;get_title() . ', ');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //This is a bit hackish, but it compiles the term anchor and appends it to the current breadcrumb title&nbsp;</div></li><li><div>                $bcn_breadcrumb-&gt;set_title($bcn_breadcrumb-&gt;get_title() . str_replace(&nbsp;</div></li><li><div>                    array('%title%', '%link%', '%htitle%', '%type%'), &nbsp;</div></li><li><div>                    array($term-&gt;name, get_term_link($term, $taxonomy), $term-&gt;name, $term-&gt;taxonomy), &nbsp;</div></li><li><div>                    $this-&gt;opt['Htax_' . $term-&gt;taxonomy . '_template']));&nbsp;</div></li><li><div>                $is_first = false;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This recursive functions fills the trail with breadcrumbs for parent terms.&nbsp;</div></li><li><div>     * @param int $id The id of the term.&nbsp;</div></li><li><div>     * @param string $taxonomy The name of the taxonomy that the term belongs to&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function term_parents($id, $taxonomy)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Get the current category object, filter applied within this call&nbsp;</div></li><li><div>        $term = get_term($id, $taxonomy);&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, template, and type, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb($term-&gt;name, $this-&gt;opt['Htax_' . $taxonomy . '_template'], array('taxonomy', $taxonomy), get_term_link($term, $taxonomy), $id));&nbsp;</div></li><li><div>        //Make sure the id is valid, and that we won't end up spinning in a loop&nbsp;</div></li><li><div>        if($term-&gt;parent && $term-&gt;parent != $id)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Figure out the rest of the term hiearchy via recursion&nbsp;</div></li><li><div>            $this-&gt;term_parents($term-&gt;parent, $taxonomy);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This recursive functions fills the trail with breadcrumbs for parent posts/pages.&nbsp;</div></li><li><div>     * @param int $id The id of the parent page.&nbsp;</div></li><li><div>     * @param int $frontpage The id of the front page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function post_parents($id, $frontpage)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Use WordPress API, though a bit heavier than the old method, this will ensure compatibility with other plug-ins&nbsp;</div></li><li><div>        $parent = get_post($id);&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, template, and type, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_title($id), $this-&gt;opt['Hpost_' . $parent-&gt;post_type . '_template'], array('post', 'post-' . $parent-&gt;post_type), get_permalink($id), $id));&nbsp;</div></li><li><div>        //Make sure the id is valid, and that we won't end up spinning in a loop&nbsp;</div></li><li><div>        if($parent-&gt;post_parent &gt;= 0 && $parent-&gt;post_parent != false && $id != $parent-&gt;post_parent && $frontpage != $parent-&gt;post_parent)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //If valid, recursively call this function&nbsp;</div></li><li><div>            $this-&gt;post_parents($parent-&gt;post_parent, $frontpage);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for posts&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param $post WP_Post Instance of WP_Post object to create a breadcrumb for&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_post($post)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $page;&nbsp;</div></li><li><div>        //If we did not get a WP_Post object, warn developer and return early&nbsp;</div></li><li><div>        if(!is_object($post) || get_class($post) !== 'WP_Post')&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            _doing_it_wrong(__CLASS__ . '::' . __FUNCTION__, __('$post global is not of type WP_Post', 'breadcrumb-navxt'), '5.1.1');&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the bcn_breadcrumb constructor to set the title, template, and type&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_title($post), $this-&gt;opt['Hpost_' . $post-&gt;post_type . '_template_no_anchor'], array('post', 'post-' . $post-&gt;post_type, 'current-item'), NULL, $post-&gt;ID));&nbsp;</div></li><li><div>        //If the current item is to be linked, or this is a paged post, add in links&nbsp;</div></li><li><div>        if(is_attachment() || $this-&gt;opt['bcurrent_item_linked'] || ($page &gt; 1 && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Change the template over to the normal, linked one&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hpost_' . $post-&gt;post_type . '_template']);&nbsp;</div></li><li><div>            //Add the link&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_permalink($post));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //If we have page, force it to go through the parent tree&nbsp;</div></li><li><div>        if($post-&gt;post_type === 'page')&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Done with the current item, now on to the parents&nbsp;</div></li><li><div>            $frontpage = get_option('page_on_front');&nbsp;</div></li><li><div>            //If there is a parent page let's find it&nbsp;</div></li><li><div>            if($post-&gt;post_parent && $post-&gt;ID != $post-&gt;post_parent && $frontpage != $post-&gt;post_parent)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;post_parents($post-&gt;post_parent, $frontpage);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Otherwise we need the follow the hiearchy tree&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Handle the post's hiearchy&nbsp;</div></li><li><div>            $this-&gt;post_hierarchy($post-&gt;ID, $post-&gt;post_type, $post-&gt;post_parent);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for an attachment page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_attachment()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, template, and type, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_title(), $this-&gt;opt['Hpost_attachment_template_no_anchor'], array('post', 'post-attachment', 'current-item'), NULL, $post-&gt;ID));&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'])&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Change the template over to the normal, linked one&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hpost_attachment_template']);&nbsp;</div></li><li><div>            //Add the link&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_permalink());&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Get the parent's information&nbsp;</div></li><li><div>        $parent = get_post($post-&gt;post_parent);&nbsp;</div></li><li><div>        //Take care of the parent's breadcrumb&nbsp;</div></li><li><div>        $this-&gt;do_post($parent);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This function fills a breadcrumb for any taxonomy archive, was previously two separate functions&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_archive_by_term()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wp_query;&nbsp;</div></li><li><div>        //Simmilar to using $post, but for things $post doesn't cover&nbsp;</div></li><li><div>        $term = $wp_query-&gt;get_queried_object();&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, template, and type, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb($term-&gt;name, $this-&gt;opt['Htax_' . $term-&gt;taxonomy . '_template_no_anchor'], array('archive', 'taxonomy', $term-&gt;taxonomy, 'current-item'), NULL, $term-&gt;term_id));&nbsp;</div></li><li><div>        //If we're paged, let's link to the first page&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'] || (is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Htax_' . $term-&gt;taxonomy . '_template']);&nbsp;</div></li><li><div>            //Figure out the anchor for current category&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_term_link($term, $term-&gt;taxonomy));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Get parents of current category&nbsp;</div></li><li><div>        if($term-&gt;parent)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;term_parents($term-&gt;parent, $term-&gt;taxonomy);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for a date archive.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_archive_by_date()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wp_query;&nbsp;</div></li><li><div>        //First deal with the day breadcrumb&nbsp;</div></li><li><div>        if(is_day() || is_single())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_time('d'), $this-&gt;opt['Hdate_template_no_anchor'], array('archive', 'date-day')));&nbsp;</div></li><li><div>            //If this is a day archive, add current-item type&nbsp;</div></li><li><div>            if(is_day())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $breadcrumb-&gt;add_type('current-item');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //If we're paged, let's link to the first page&nbsp;</div></li><li><div>            if($this-&gt;opt['bcurrent_item_linked'] || is_paged() && $this-&gt;opt['bpaged_display'] || is_single())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //We're linking, so set the linked template&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_template($this-&gt;opt['Hdate_template']);&nbsp;</div></li><li><div>                //Deal with the anchor&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_url(get_day_link(get_the_time('Y'), get_the_time('m'), get_the_time('d')));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Now deal with the month breadcrumb&nbsp;</div></li><li><div>        if(is_month() || is_day() || is_single())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_time('F'), $this-&gt;opt['Hdate_template_no_anchor'], array('archive', 'date-month')));&nbsp;</div></li><li><div>            //If this is a month archive, add current-item type&nbsp;</div></li><li><div>            if(is_month())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $breadcrumb-&gt;add_type('current-item');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //If we're paged, or not in the archive by month let's link to the first archive by month page&nbsp;</div></li><li><div>            if($this-&gt;opt['bcurrent_item_linked'] || is_day() || is_single() || (is_month() && is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //We're linking, so set the linked template&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_template($this-&gt;opt['Hdate_template']);&nbsp;</div></li><li><div>                //Deal with the anchor&nbsp;</div></li><li><div>                $breadcrumb-&gt;set_url(get_month_link(get_the_time('Y'), get_the_time('m')));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Place the year breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_time('Y'), $this-&gt;opt['Hdate_template_no_anchor'], array('archive', 'date-year')));&nbsp;</div></li><li><div>        //If this is a year archive, add current-item type&nbsp;</div></li><li><div>        if(is_year())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $breadcrumb-&gt;add_type('current-item');&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //If we're paged, or not in the archive by year let's link to the first archive by year page&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'] || is_day() || is_month() || is_single() || (is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We're linking, so set the linked template&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hdate_template']);&nbsp;</div></li><li><div>            //Deal with the anchor&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_year_link(get_the_time('Y')));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for a post type archive (WP 3.1 feature)&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_archive_by_post_type()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb(post_type_archive_title('', false), $this-&gt;opt['Hpost_' . get_query_var('post_type') . '_template_no_anchor'], array('archive', 'post-' . get_query_var('post_type') . '-archive', 'current-item')));&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'] || is_paged() && $this-&gt;opt['bpaged_display'])&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hpost_' . get_query_var('post_type') . '_template']);&nbsp;</div></li><li><div>            //Deal with the anchor&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_post_type_archive_link(get_query_var('post_type')));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for the front page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_front_page()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $post, $current_site;&nbsp;</div></li><li><div>        //Get the site name&nbsp;</div></li><li><div>        $site_name = get_option('blogname');&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>        $breadcrumb = $this-&gt;add(new bcn_breadcrumb($site_name, $this-&gt;opt['Hhome_template_no_anchor'], array('home', 'current-item')));&nbsp;</div></li><li><div>        //If we're paged, let's link to the first page&nbsp;</div></li><li><div>        if($this-&gt;opt['bcurrent_item_linked'] || (is_paged() && $this-&gt;opt['bpaged_display']))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_template($this-&gt;opt['Hhome_template']);&nbsp;</div></li><li><div>            //Figure out the anchor for home page&nbsp;</div></li><li><div>            $breadcrumb-&gt;set_url(get_home_url());&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //If we have a multi site and are not on the main site we may need to add a breadcrumb for the main site&nbsp;</div></li><li><div>        if($this-&gt;opt['bmainsite_display'] && !is_main_site())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Get the site name&nbsp;</div></li><li><div>            $site_name = get_site_option('site_name');&nbsp;</div></li><li><div>            //Place the main site breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb($site_name, $this-&gt;opt['Hmainsite_template'], array('main-home'), get_home_url($current_site-&gt;blog_id)));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for the home page.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_home()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $post, $current_site;&nbsp;</div></li><li><div>        //On everything else we need to link, but no current item (pre/suf)fixes&nbsp;</div></li><li><div>        if($this-&gt;opt['bhome_display'])&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Get the site name&nbsp;</div></li><li><div>            $site_name = get_option('blogname');&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb($site_name, $this-&gt;opt['Hhome_template'], array('home'), get_home_url()));&nbsp;</div></li><li><div>            //If we have a multi site and are not on the main site we need to add a breadcrumb for the main site&nbsp;</div></li><li><div>            if($this-&gt;opt['bmainsite_display'] && !is_main_site())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Get the site name&nbsp;</div></li><li><div>                $site_name = get_site_option('site_name');&nbsp;</div></li><li><div>                //Place the main site breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>                $breadcrumb = $this-&gt;add(new bcn_breadcrumb($site_name, $this-&gt;opt['Hmainsite_template'], array('main-home'), get_home_url($current_site-&gt;blog_id)));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A modified version of WordPress' function of the same name&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param object $object the post or taxonomy object used to attempt to find the title&nbsp;</div></li><li><div>     * @return string the title&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function post_type_archive_title($object)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if(isset($object-&gt;labels-&gt;name))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Core filter use here is ok for time being&nbsp;</div></li><li><div>            //TODO: Recheck validitiy prior to each release&nbsp;</div></li><li><div>            return apply_filters('post_type_archive_title', $object-&gt;labels-&gt;name);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Determines if a post type is a built in type or not&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param string $post_type the name of the post type&nbsp;</div></li><li><div>     * @return bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function is_builtin($post_type)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $type = get_post_type_object($post_type);&nbsp;</div></li><li><div>        return $type-&gt;_builtin;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Determines if a post type has archives enabled or not&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param string $post_type the name of the post type&nbsp;</div></li><li><div>     * @return bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function has_archive($post_type)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $type = get_post_type_object($post_type);&nbsp;</div></li><li><div>        return $type-&gt;has_archive;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * This function populates our type_str and root_id variables&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param post $type A post object we are using to figureout the type&nbsp;</div></li><li><div>     * @param string $type_str The type string variable, passed by reference&nbsp;</div></li><li><div>     * @param int $root_id The ID for the post type root&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function find_type($type, &$type_str, &$root_id)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wp_taxonomies;&nbsp;</div></li><li><div>        //We need to do special things for custom post types&nbsp;</div></li><li><div>        if(is_singular() && !$this-&gt;is_builtin($type-&gt;post_type))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We need the type for later, so save it&nbsp;</div></li><li><div>            $type_str = $type-&gt;post_type;&nbsp;</div></li><li><div>            //This will assign a ID for root page of a custom post&nbsp;</div></li><li><div>            if(is_numeric($this-&gt;opt['apost_' . $type_str . '_root']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $root_id = $this-&gt;opt['apost_' . $type_str . '_root'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For CPT archives&nbsp;</div></li><li><div>        else if(is_post_type_archive() && !isset($type-&gt;taxonomy))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We need the type for later, so save it&nbsp;</div></li><li><div>            $type_str = $type-&gt;name;&nbsp;</div></li><li><div>            //This will assign a ID for root page of a custom post's taxonomy archive&nbsp;</div></li><li><div>            if(is_numeric($this-&gt;opt['apost_' . $type_str . '_root']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $root_id = $this-&gt;opt['apost_' . $type_str . '_root'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //We need to do special things for custom post type archives, but not author or date archives&nbsp;</div></li><li><div>        else if(is_archive() && !is_author() && !is_date() && !$this-&gt;is_builtin($wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0]))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We need the type for later, so save it&nbsp;</div></li><li><div>            $type_str = $wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0];&nbsp;</div></li><li><div>            //This will assign a ID for root page of a custom post's taxonomy archive&nbsp;</div></li><li><div>            if(is_numeric($this-&gt;opt['apost_' . $type_str . '_root']))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $root_id = $this-&gt;opt['apost_' . $type_str . '_root'];&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $type_str = 'post';&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function &nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Handles only the root page stuff for post types, including the &quot;page for posts&quot;&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * TODO: this still needs to be cleaned up&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_root()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $post, $wp_query, $wp_taxonomies, $current_site;&nbsp;</div></li><li><div>        //If this is an attachment then we need to change the queried object to the parent post&nbsp;</div></li><li><div>        if(is_attachment())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $type = get_post($post-&gt;post_parent);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Simmilar to using $post, but for things $post doesn't cover&nbsp;</div></li><li><div>            $type = $wp_query-&gt;get_queried_object();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $root_id = -1;&nbsp;</div></li><li><div>        $type_str = '';&nbsp;</div></li><li><div>        //Find our type string and root_id&nbsp;</div></li><li><div>        $this-&gt;find_type($type, $type_str, $root_id);&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * TODO: Split this portion off into its own function&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        //If this is a custom post type with a post type archive, add it&nbsp;</div></li><li><div>        if(isset($type-&gt;post_type) && !$this-&gt;is_builtin($type-&gt;post_type) && $this-&gt;opt['bpost_' . $type-&gt;post_type . '_archive_display'] && $this-&gt;has_archive($type-&gt;post_type))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb($this-&gt;post_type_archive_title(get_post_type_object($type-&gt;post_type)), $this-&gt;opt['Hpost_' . $type-&gt;post_type . '_template'], array('post', 'post-' . $type-&gt;post_type . '-archive'), get_post_type_archive_link($type-&gt;post_type)));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Otherwise, if this is a custom taxonomy with an archive, add it&nbsp;</div></li><li><div>        else if(isset($type-&gt;taxonomy) && isset($wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0]) && !$this-&gt;is_builtin($wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0]) && $this-&gt;opt['bpost_' . $wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0] . '_archive_display'] && $this-&gt;has_archive($wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0]))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We end up using the post type in several places, give it a variable&nbsp;</div></li><li><div>            $post_type = $wp_taxonomies[$type-&gt;taxonomy]-&gt;object_type[0];&nbsp;</div></li><li><div>            //Place the breadcrumb in the trail, uses the constructor to set the title, prefix, and suffix, get a pointer to it in return&nbsp;</div></li><li><div>            $breadcrumb = $this-&gt;add(new bcn_breadcrumb($this-&gt;post_type_archive_title(get_post_type_object($post_type)), $this-&gt;opt['Hpost_' . $post_type . '_template'], array('post', 'post-' . $post_type . '-archive'), get_post_type_archive_link($post_type)));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * End TODO&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        //We only need the &quot;blog&quot; portion on members of the blog, and only if we're in a static frontpage environment&nbsp;</div></li><li><div>        if($root_id &gt; 1 || $this-&gt;opt['bblog_display'] && get_option('show_on_front') == 'page' && (is_home() || is_single() || is_tax() || is_category() || is_tag() || is_date()))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //If we entered here with a posts page, we need to set the id&nbsp;</div></li><li><div>            if($root_id &lt; 0)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $root_id = get_option('page_for_posts');&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            $frontpage_id = get_option('page_on_front');&nbsp;</div></li><li><div>            //We'll have to check if this ID is valid, e.g. user has specified a posts page&nbsp;</div></li><li><div>            if($root_id && $root_id != $frontpage_id)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Place the breadcrumb in the trail, uses the constructor to set the title, template, and type, we get a pointer to it in return&nbsp;</div></li><li><div>                $breadcrumb = $this-&gt;add(new bcn_breadcrumb(get_the_title($root_id), $this-&gt;opt['Hpost_' . $type_str . '_template_no_anchor'], array($type_str . '-root', 'post', 'post-' . $type_str), NULL, $root_id));&nbsp;</div></li><li><div>                //If we are at home, then we need to add the current item type&nbsp;</div></li><li><div>                if(is_home())&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $breadcrumb-&gt;add_type('current-item');&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //If we're not on the current item we need to setup the anchor&nbsp;</div></li><li><div>                if(!is_home() || (is_paged() && $this-&gt;opt['bpaged_display']) || (is_home() && $this-&gt;opt['bcurrent_item_linked']))&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $breadcrumb-&gt;set_template($this-&gt;opt['Hpost_' . $type_str . '_template']);&nbsp;</div></li><li><div>                    //Figure out the anchor for home page&nbsp;</div></li><li><div>                    $breadcrumb-&gt;set_url(get_permalink($root_id));&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                //Done with the &quot;root&quot;, now on to the parents&nbsp;</div></li><li><div>                //Get the blog page&nbsp;</div></li><li><div>                $bcn_post = get_post($root_id);&nbsp;</div></li><li><div>                //If there is a parent post let's find it&nbsp;</div></li><li><div>                if($bcn_post-&gt;post_parent && $bcn_post-&gt;ID != $bcn_post-&gt;post_parent && $frontpage_id != $bcn_post-&gt;post_parent)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $this-&gt;post_parents($bcn_post-&gt;post_parent, $frontpage_id);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for 404 pages.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_404()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the bcn_breadcrumb constructor to set the title, prefix, and suffix&nbsp;</div></li><li><div>        $this-&gt;breadcrumbs[] = new bcn_breadcrumb($this-&gt;opt['S404_title'], $this-&gt;opt['H404_template'], array('404', 'current-item'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills a breadcrumb for paged pages.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function do_paged()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $paged, $page;&nbsp;</div></li><li><div>        //Need to switch between paged and page for archives and singular (posts)&nbsp;</div></li><li><div>        if($paged &gt; 0)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $page_number = $paged;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $page_number = $page;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Place the breadcrumb in the trail, uses the bcn_breadcrumb constructor to set the title, prefix, and suffix&nbsp;</div></li><li><div>        $this-&gt;breadcrumbs[] = new bcn_breadcrumb($page_number, $this-&gt;opt['Hpaged_template'], array('paged'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Breadcrumb Trail Filling Function&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * This functions fills the breadcrumb trail.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function fill()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wpdb, $wp_query, $paged, $page;&nbsp;</div></li><li><div>        //Check to see if the trail is already populated&nbsp;</div></li><li><div>        if(count($this-&gt;breadcrumbs) &gt; 0)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Exit early since we have breadcrumbs in the trail&nbsp;</div></li><li><div>            return NULL;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Do any actions if necessary, we past through the current object instance to keep life simple&nbsp;</div></li><li><div>        do_action('bcn_before_fill', $this);&nbsp;</div></li><li><div>        //Do specific opperations for the various page types&nbsp;</div></li><li><div>        //Check if this isn't the first of a multi paged item&nbsp;</div></li><li><div>        if($this-&gt;opt['bpaged_display'] && (is_paged() || is_singular() && $page &gt; 1))&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;do_paged();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For the front page, as it may also validate as a page, do it first&nbsp;</div></li><li><div>        if(is_front_page())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Must have two seperate branches so that we don't evaluate it as a page&nbsp;</div></li><li><div>            if($this-&gt;opt['bhome_display'])&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_front_page();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For posts&nbsp;</div></li><li><div>        else if(is_singular())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //For attachments&nbsp;</div></li><li><div>            if(is_attachment())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_attachment();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //For all other post types&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_post($GLOBALS['post']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For searches&nbsp;</div></li><li><div>        else if(is_search())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;do_search();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For author pages&nbsp;</div></li><li><div>        else if(is_author())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;do_author();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For archives&nbsp;</div></li><li><div>        else if(is_archive())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $type = $wp_query-&gt;get_queried_object();&nbsp;</div></li><li><div>            //For date based archives&nbsp;</div></li><li><div>            if(is_date())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_archive_by_date();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else if(is_post_type_archive() && !isset($type-&gt;taxonomy))&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_archive_by_post_type();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //For taxonomy based archives&nbsp;</div></li><li><div>            else if(is_category() || is_tag() || is_tax())&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $this-&gt;do_archive_by_term();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //For 404 pages&nbsp;</div></li><li><div>        else if(is_404())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;do_404();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //We always do the home link last, unless on the frontpage&nbsp;</div></li><li><div>        if(!is_front_page())&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $this-&gt;do_root();&nbsp;</div></li><li><div>            $this-&gt;do_home();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Do any actions if necessary, we past through the current object instance to keep life simple&nbsp;</div></li><li><div>        do_action('bcn_after_fill', $this);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * This function will either set the order of the trail to reverse key &nbsp;</div></li><li><div>     * order, or make sure it is forward key ordered.&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * @param bool $reverse[optional] Whether to reverse the trail or not.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    protected function order($reverse = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if($reverse)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Since there may be multiple calls our trail may be in a non-standard order&nbsp;</div></li><li><div>            ksort($this-&gt;breadcrumbs);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //For normal opperation we must reverse the array by key&nbsp;</div></li><li><div>            krsort($this-&gt;breadcrumbs);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * This functions outputs or returns the breadcrumb trail in string form.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void Void if Option to print out breadcrumb trail was chosen.&nbsp;</div></li><li><div>     * @return string String-Data of breadcrumb trail.&nbsp;</div></li><li><div>     * @param bool $return Whether to return data or to echo it.&nbsp;</div></li><li><div>     * @param bool $linked[optional] Whether to allow hyperlinks in the trail or not.&nbsp;</div></li><li><div>     * @param bool $reverse[optional] Whether to reverse the output or not.&nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * TODO: Fold display and display_list together, two functions are very simmilar &nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function display($return = false, $linked = true, $reverse = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Set trail order based on reverse flag&nbsp;</div></li><li><div>        $this-&gt;order($reverse);&nbsp;</div></li><li><div>        //Initilize the string which will hold the assembled trail&nbsp;</div></li><li><div>        $trail_str = '';&nbsp;</div></li><li><div>        //The main compiling loop&nbsp;</div></li><li><div>        foreach($this-&gt;breadcrumbs as $key =&gt; $breadcrumb)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //We do different things for the separator based on the breadcrumb order&nbsp;</div></li><li><div>            if($reverse)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Add in the separator only if we are the 2nd or greater element&nbsp;</div></li><li><div>                if($key &gt; 0)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $trail_str .= $this-&gt;opt['hseparator'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            else&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Only show the separator when necessary&nbsp;</div></li><li><div>                if($key &lt; count($this-&gt;breadcrumbs) - 1)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $trail_str .= $this-&gt;opt['hseparator'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Trim titles, if needed&nbsp;</div></li><li><div>            if($this-&gt;opt['blimit_title'] && $this-&gt;opt['amax_title_length'] &gt; 0)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Trim the breadcrumb's title&nbsp;</div></li><li><div>                $breadcrumb-&gt;title_trim($this-&gt;opt['amax_title_length']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Place in the breadcrumb's assembled elements&nbsp;</div></li><li><div>            $trail_str .= $breadcrumb-&gt;assemble($linked);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Should we return or echo the assembled trail?&nbsp;</div></li><li><div>        if($return)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            return $trail_str;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Helps track issues, please don't remove it&nbsp;</div></li><li><div>            $credits = &quot;&lt;!-- Breadcrumb NavXT &quot; . $this-&gt;version . &quot; --&gt;\n&quot;;&nbsp;</div></li><li><div>            echo $credits . $trail_str;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * This functions outputs or returns the breadcrumb trail in list form.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void Void if option to print out breadcrumb trail was chosen.&nbsp;</div></li><li><div>     * @return string String version of the breadcrumb trail.&nbsp;</div></li><li><div>     * @param bool $return Whether to return data or to echo it.&nbsp;</div></li><li><div>     * @param bool $linked[optional] Whether to allow hyperlinks in the trail or not.&nbsp;</div></li><li><div>     * @param bool $reverse[optional] Whether to reverse the output or not. &nbsp;</div></li><li><div>     * &nbsp;</div></li><li><div>     * TODO: Can probably write this one in a smarter way now&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function display_list($return = false, $linked = true, $reverse = false)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        //Set trail order based on reverse flag&nbsp;</div></li><li><div>        $this-&gt;order($reverse);&nbsp;</div></li><li><div>        //Initilize the string which will hold the assembled trail&nbsp;</div></li><li><div>        $trail_str = '';&nbsp;</div></li><li><div>        //The main compiling loop&nbsp;</div></li><li><div>        foreach($this-&gt;breadcrumbs as $key =&gt; $breadcrumb)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            $li_class = '';&nbsp;</div></li><li><div>            //On the first run we need to add in a class for the home breadcrumb&nbsp;</div></li><li><div>            if($trail_str === '')&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                $li_class .= ' class=&quot;home';&nbsp;</div></li><li><div>                if($key === 0)&nbsp;</div></li><li><div>                {&nbsp;</div></li><li><div>                    $li_class .= ' current_item';&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                $li_class .= '&quot;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //If we are on the current item there are some things that must be done&nbsp;</div></li><li><div>            else if($key === 0)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Add in a class for current_item&nbsp;</div></li><li><div>                $li_class .= ' class=&quot;current_item&quot;';&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Filter li_attributes adding attributes to the li element&nbsp;</div></li><li><div>            $li_attribs = apply_filters('bcn_li_attributes', $li_class, $breadcrumb-&gt;type, $breadcrumb-&gt;get_id());&nbsp;</div></li><li><div>            //Trim titles, if requested&nbsp;</div></li><li><div>            if($this-&gt;opt['blimit_title'] && $this-&gt;opt['amax_title_length'] &gt; 0)&nbsp;</div></li><li><div>            {&nbsp;</div></li><li><div>                //Trim the breadcrumb's title&nbsp;</div></li><li><div>                $breadcrumb-&gt;title_trim($this-&gt;opt['amax_title_length']);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            //Assemble the breadrumb and wrap with li's&nbsp;</div></li><li><div>            $trail_str .= sprintf(&quot;&lt;li%s&gt;%s&lt;/li&gt;\n&quot;, $li_attribs, $breadcrumb-&gt;assemble($linked));&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        //Should we return or echo the assembled trail?&nbsp;</div></li><li><div>        if($return)&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            return $trail_str;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        else&nbsp;</div></li><li><div>        {&nbsp;</div></li><li><div>            //Helps track issues, please don't remove it&nbsp;</div></li><li><div>            $credits = &quot;&lt;!-- Breadcrumb NavXT &quot; . $this-&gt;version . &quot; --&gt;\n&quot;;&nbsp;</div></li><li><div>            echo $credits . $trail_str;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd> <a href="http://hookr.io/plugins/breadcrumb-navxt-5-0-migration-compatibility-layer-do-not-activate/5.1.1/classes/bcn_breadcrumb_trail/">5.1.1</a></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>bcn_breadcrumb_trail</li><li><span></span>Breadcrumb NavXT 5.0 Migration Compatibility Layer DO NOT ACTIVATE</li><li><span></span>5.1.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>