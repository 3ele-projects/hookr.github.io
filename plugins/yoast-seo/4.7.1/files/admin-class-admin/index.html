<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="4.7.1" data-slug="yoast-seo" data-type="file" data-id="10335"><head xmlns="http://www.w3.org/1999/xhtml"><title> admin-class-admin | file | Yoast Seo | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, yoast-seo, 4.7.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=5359308a2a209c8aec6d3c4fd004d520' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/admin-class-admin/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fadmin-class-admin%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fadmin-class-admin%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-yoast-seo-4.7.1-file-admin-class-admin","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="admin-class-admin" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to yoast-seo." href="http://hookr.io/plugins/yoast-seo/" class="plugin"><span property="name">yoast-seo</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.7.1." href="http://hookr.io/plugins/yoast-seo/4.7.1/" class="H_VERSION"><span property="name">4.7.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/yoast-seo/4.7.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">admin-class-admin</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="558"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/all/" title="All">All <span class="count badge">558</span></a></li><li class="" data-id="new" data-count="3"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/new/" title="New">New <span class="count badge">3</span></a></li><li class="" data-id="hooks" data-count="187"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/hooks/" title="Hooks">Hooks <span class="count badge">187</span></a></li><li class="" data-id="action" data-count="44"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/actions/" title="Actions">Actions <span class="count badge">44</span></a></li><li class="" data-id="filter" data-count="143"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/filters/" title="Filters">Filters <span class="count badge">143</span></a></li><li class="" data-id="class" data-count="256"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/classes/" title="Classes">Classes <span class="count badge">256</span></a></li><li class="" data-id="constant" data-count="10"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/constants/" title="Constants">Constants <span class="count badge">10</span></a></li><li class="" data-id="function" data-count="103"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/functions/" title="Functions">Functions <span class="count badge">103</span></a></li><li class="" data-id="shortcode" data-count="2"><a href="http://hookr.io/plugins/yoast-seo/4.7.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">2</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/admin/class-admin.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * @package WPSEO\Admin</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Class that holds most of the admin functionality for Yoast SEO.</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>class WPSEO_Admin {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** The page identifier used in WordPress to register the admin page !DO NOT CHANGE THIS! */</span>&nbsp;</div></li><li><div>  const PAGE_IDENTIFIER = 'wpseo_dashboard';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * @var array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private $options;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Array of classes that add admin functionality</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @var array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  protected $admin_features;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Class constructor</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function __construct() {&nbsp;</div></li><li><div>      global $pagenow;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;options = WPSEO_Options::get_options( array( 'wpseo', 'wpseo_permalinks' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_multisite() ) {&nbsp;</div></li><li><div>          WPSEO_Options::maybe_set_multisite_defaults( false );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;options['stripcategorybase'] === true ) {&nbsp;</div></li><li><div>          add_action( 'created_category', array( $this, 'schedule_rewrite_flush' ) );&nbsp;</div></li><li><div>          add_action( 'edited_category', array( $this, 'schedule_rewrite_flush' ) );&nbsp;</div></li><li><div>          add_action( 'delete_category', array( $this, 'schedule_rewrite_flush' ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;admin_features = array(&nbsp;</div></li><li><div>          <span class="comment">// Google Search Console.</span>&nbsp;</div></li><li><div>          'google_search_console' =&gt; new WPSEO_GSC(), &nbsp;</div></li><li><div>          'dashboard_widget' =&gt; new Yoast_Dashboard_Widget(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPSEO_Metabox::is_post_overview( $pagenow ) || WPSEO_Metabox::is_post_edit( $pagenow ) ) {&nbsp;</div></li><li><div>          $this-&gt;admin_features['primary_category'] = new WPSEO_Primary_Term_Admin();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( filter_input( INPUT_GET, 'page' ) === 'wpseo_tools' && filter_input( INPUT_GET, 'tool' ) === null ) {&nbsp;</div></li><li><div>          new WPSEO_Recalculate_Scores();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Needs the lower than default priority so other plugins can hook underneath it without issue.</span>&nbsp;</div></li><li><div>      add_action( 'admin_menu', array( $this, 'register_settings_page' ), 5 );&nbsp;</div></li><li><div>      add_action( 'network_admin_menu', array( $this, 'register_network_settings_page' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_filter( 'plugin_action_links_' . WPSEO_BASENAME, array( $this, 'add_action_link' ), 10, 2 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'admin_enqueue_scripts', array( $this, 'config_page_scripts' ) );&nbsp;</div></li><li><div>      add_action( 'admin_enqueue_scripts', array( $this, 'enqueue_global_style' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;options['cleanslugs'] === true ) {&nbsp;</div></li><li><div>          add_filter( 'name_save_pre', array( $this, 'remove_stopwords_from_slug' ), 0 );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_filter( 'user_contactmethods', array( $this, 'update_contactmethods' ), 10, 1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'after_switch_theme', array( $this, 'switch_theme' ) );&nbsp;</div></li><li><div>      add_action( 'switch_theme', array( $this, 'switch_theme' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_filter( 'set-screen-option', array( $this, 'save_bulk_edit_options' ), 10, 3 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_action( 'admin_init', array( 'WPSEO_Plugin_Conflict', 'hook_check_for_plugin_conflicts' ), 10, 1 );&nbsp;</div></li><li><div>      add_action( 'admin_init', array( $this, 'import_plugin_hooks' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      add_filter( 'wpseo_submenu_pages', array( $this, 'filter_settings_pages' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      WPSEO_Sitemaps_Cache::register_clear_on_option_update( 'wpseo' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPSEO_Utils::is_yoast_seo_page() ) {&nbsp;</div></li><li><div>          add_action( 'admin_enqueue_scripts', array( $this, 'enqueue_assets' ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPSEO_Utils::is_api_available() ) {&nbsp;</div></li><li><div>          $configuration = new WPSEO_Configuration_Page;&nbsp;</div></li><li><div>          $configuration-&gt;catch_configuration_request();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;set_upsell_notice();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;check_php_version();&nbsp;</div></li><li><div>      $this-&gt;initialize_cornerstone_content();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Setting the hooks for importing data from other plugins</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function import_plugin_hooks() {&nbsp;</div></li><li><div>      if ( current_user_can( $this-&gt;get_manage_options_cap() ) ) {&nbsp;</div></li><li><div>          $plugin_imports = array(&nbsp;</div></li><li><div>              'wpSEO' =&gt; new WPSEO_Import_WPSEO_Hooks(), &nbsp;</div></li><li><div>              'aioseo' =&gt; new WPSEO_Import_AIOSEO_Hooks(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Schedules a rewrite flush to happen at shutdown</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function schedule_rewrite_flush() {&nbsp;</div></li><li><div>      add_action( 'shutdown', 'flush_rewrite_rules' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns all the classes for the admin features</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function get_admin_features() {&nbsp;</div></li><li><div>      return $this-&gt;admin_features;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Register the menu item and its sub menu's.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @global array $submenu used to change the label on the first item.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function register_settings_page() {&nbsp;</div></li><li><div>      if ( WPSEO_Utils::grant_access() !== true ) {&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $admin_page_hooks;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// Base 64 encoded SVG image.</span></span>&nbsp;</div></li><li><div>      $icon_svg = WPSEO_Utils::get_icon_svg();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $manage_options_cap = $this-&gt;get_manage_options_cap();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $notification_center = Yoast_Notification_Center::get();&nbsp;</div></li><li><div>      $notification_count = $notification_center-&gt;get_notification_count();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add main page.</span>&nbsp;</div></li><li><div>      <span class="comment">/** translators: %s: number of notifications */</span>&nbsp;</div></li><li><div>      $counter_screen_reader_text = sprintf( _n( '%s notification', '%s notifications', $notification_count, 'wordpress-seo' ), number_format_i18n( $notification_count ) );&nbsp;</div></li><li><div>      $counter = sprintf( '&lt;span class=&quot;update-plugins count-%1$d&quot;&gt;&lt;span class=&quot;plugin-count&quot; aria-hidden=&quot;true&quot;&gt;%1$d&lt;/span&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;%2$s&lt;/span&gt;&lt;/span&gt;', $notification_count, $counter_screen_reader_text );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $admin_page = add_menu_page( 'Yoast SEO: ' . __( 'Dashboard', 'wordpress-seo' ), __( 'SEO', 'wordpress-seo' ) . ' ' . $counter, $manage_options_cap, self::PAGE_IDENTIFIER, array(&nbsp;</div></li><li><div>          $this, &nbsp;</div></li><li><div>          'load_page', &nbsp;</div></li><li><div> ), $icon_svg, '99.31337' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $admin_page_hooks[ self::PAGE_IDENTIFIER ] = 'seo'; <span class="comment">// Wipe notification bits from hooks. R.</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $license_page_title = defined( 'WPSEO_PREMIUM_PLUGIN_FILE' ) ? __( 'Premium', 'wordpress-seo' ) : __( 'Go Premium', 'wordpress-seo' ) . ' ' . $this-&gt;get_premium_indicator();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Sub menu pages.</span>&nbsp;</div></li><li><div>      $submenu_pages = array(&nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'General', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'Titles &amp; Metas', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_titles', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'Social', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_social', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'XML Sitemaps', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_xml', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'Advanced', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_advanced', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'Tools', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_tools', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              __( 'Search Console', 'wordpress-seo' ), &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_search_console', &nbsp;</div></li><li><div>              array( $this-&gt;admin_features['google_search_console'], 'display' ), &nbsp;</div></li><li><div>              array( array( $this-&gt;admin_features['google_search_console'], 'set_help' ) ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              self::PAGE_IDENTIFIER, &nbsp;</div></li><li><div>              '', &nbsp;</div></li><li><div>              $license_page_title, &nbsp;</div></li><li><div>              $manage_options_cap, &nbsp;</div></li><li><div>              'wpseo_licenses', &nbsp;</div></li><li><div>              array( $this, 'load_page' ), &nbsp;</div></li><li><div>              null, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Allow submenu pages manipulation.</span>&nbsp;</div></li><li><div>      $submenu_pages = apply_filters( 'wpseo_submenu_pages', $submenu_pages );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Loop through submenu pages and add them.</span>&nbsp;</div></li><li><div>      if ( count( $submenu_pages ) ) {&nbsp;</div></li><li><div>          foreach ( $submenu_pages as $submenu_page ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $page_title = $submenu_page[2] . ' - Yoast SEO';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// We cannot use $submenu_page[1] because add-ons define that, so hard-code this value.</span>&nbsp;</div></li><li><div>              if ( 'wpseo_licenses' === $submenu_page[4] ) {&nbsp;</div></li><li><div>                  $page_title = __( 'Premium', 'wordpress-seo' ) . ' - Yoast SEO';&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Add submenu page.</span>&nbsp;</div></li><li><div>              $admin_page = add_submenu_page( $submenu_page[0], $page_title, $submenu_page[2], $submenu_page[3], $submenu_page[4], $submenu_page[5] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Check if we need to hook.</span>&nbsp;</div></li><li><div>              if ( isset( $submenu_page[6] ) && ( is_array( $submenu_page[6] ) && $submenu_page[6] !== array() ) ) {&nbsp;</div></li><li><div>                  foreach ( $submenu_page[6] as $submenu_page_action ) {&nbsp;</div></li><li><div>                      add_action( 'load-' . $admin_page, $submenu_page_action );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      global $submenu;&nbsp;</div></li><li><div>      if ( isset( $submenu[ self::PAGE_IDENTIFIER ] ) && current_user_can( $manage_options_cap ) ) {&nbsp;</div></li><li><div>          $submenu[ self::PAGE_IDENTIFIER ][0][0] = __( 'Dashboard', 'wordpress-seo' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Register assets needed on admin pages</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function enqueue_assets() {&nbsp;</div></li><li><div>      $asset_manager = new WPSEO_Admin_Asset_Manager();&nbsp;</div></li><li><div>      $asset_manager-&gt;enqueue_style( 'help-center' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'wpseo_licenses' === filter_input( INPUT_GET, 'page' ) ) {&nbsp;</div></li><li><div>          $asset_manager-&gt;enqueue_style( 'extensions' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the manage_options cap</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return mixed|void</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private function get_manage_options_cap() {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Filter: 'wpseo_manage_options_capability' - Allow changing the capability users need to view the settings pages</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @api string unsigned The capability</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $manage_options_cap = apply_filters( 'wpseo_manage_options_capability', 'manage_options' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $manage_options_cap;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Adds contextual help to the titles & metas page.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function title_metas_help_tab() {&nbsp;</div></li><li><div>      $screen = get_current_screen();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;set_help_sidebar( '&nbsp;</div></li><li><div>          &lt;p&gt;&lt;strong&gt;' . __( 'For more information:', 'wordpress-seo' ) . '&lt;/strong&gt;&lt;/p&gt;&nbsp;</div></li><li><div>          &lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https:<span class="comment">//yoast.com/wordpress-seo/#titles&quot;&gt;' . __( 'Title optimization', 'wordpress-seo' ) . '&lt;/a&gt;&lt;/p&gt;</span>&nbsp;</div></li><li><div>          &lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https:<span class="comment">//yoast.com/google-page-title/&quot;&gt;' . __( 'Why Google won\'t display the right page title', 'wordpress-seo' ) . '&lt;/a&gt;&lt;/p&gt;'</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;add_help_tab(&nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              'id' =&gt; 'basic-help', &nbsp;</div></li><li><div>              'title' =&gt; __( 'Template explanation', 'wordpress-seo' ), &nbsp;</div></li><li><div>              'content' =&gt; &quot;\n\t\t&lt;h2&gt;&quot; . __( 'Template explanation', 'wordpress-seo' ) . &quot;&lt;/h2&gt;\n\t\t&quot; . '&lt;p&gt;' .&nbsp;</div></li><li><div>                  sprintf(&nbsp;</div></li><li><div>                      <span class="comment">/** translators: %1$s expands to Yoast SEO. */</span>&nbsp;</div></li><li><div>                      __( 'The title &amp; metas settings for %1$s are made up of variables that are replaced by specific values from the page when the page is displayed. The tabs on the left explain the available variables.', 'wordpress-seo' ), &nbsp;</div></li><li><div>                      'Yoast SEO' ) .&nbsp;</div></li><li><div>                  '&lt;/p&gt;&lt;p&gt;' . __( 'Note that not all variables can be used in every template.', 'wordpress-seo' ) . '&lt;/p&gt;', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;add_help_tab(&nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              'id' =&gt; 'title-vars', &nbsp;</div></li><li><div>              'title' =&gt; __( 'Basic Variables', 'wordpress-seo' ), &nbsp;</div></li><li><div>              'content' =&gt; &quot;\n\t\t&lt;h2&gt;&quot; . __( 'Basic Variables', 'wordpress-seo' ) . &quot;&lt;/h2&gt;\n\t\t&quot; . WPSEO_Replace_Vars::get_basic_help_texts(), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $screen-&gt;add_help_tab(&nbsp;</div></li><li><div>          array(&nbsp;</div></li><li><div>              'id' =&gt; 'title-vars-advanced', &nbsp;</div></li><li><div>              'title' =&gt; __( 'Advanced Variables', 'wordpress-seo' ), &nbsp;</div></li><li><div>              'content' =&gt; &quot;\n\t\t&lt;h2&gt;&quot; . __( 'Advanced Variables', 'wordpress-seo' ) . &quot;&lt;/h2&gt;\n\t\t&quot; . WPSEO_Replace_Vars::get_advanced_help_texts(), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Register the settings page for the Network settings.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function register_network_settings_page() {&nbsp;</div></li><li><div>      if ( WPSEO_Utils::grant_access() ) {&nbsp;</div></li><li><div>          <span class="comment"><span class="comment">// Base 64 encoded SVG image.</span></span>&nbsp;</div></li><li><div>          $icon_svg = WPSEO_Utils::get_icon_svg();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_menu_page( 'Yoast SEO: ' . __( 'MultiSite Settings', 'wordpress-seo' ), __( 'SEO', 'wordpress-seo' ), 'delete_users', self::PAGE_IDENTIFIER, array(&nbsp;</div></li><li><div>              $this, &nbsp;</div></li><li><div>              'network_config_page', &nbsp;</div></li><li><div> ), $icon_svg );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( WPSEO_Utils::allow_system_file_edit() === true ) {&nbsp;</div></li><li><div>              add_submenu_page( self::PAGE_IDENTIFIER, 'Yoast SEO: ' . __( 'Edit Files', 'wordpress-seo' ), __( 'Edit Files', 'wordpress-seo' ), 'delete_users', 'wpseo_files', array(&nbsp;</div></li><li><div>                  $this, &nbsp;</div></li><li><div>                  'load_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Add Extension submenu page.</span>&nbsp;</div></li><li><div>          add_submenu_page( self::PAGE_IDENTIFIER, 'Yoast SEO: ' . __( 'Extensions', 'wordpress-seo' ), __( 'Extensions', 'wordpress-seo' ), 'delete_users', 'wpseo_licenses', array(&nbsp;</div></li><li><div>              $this, &nbsp;</div></li><li><div>              'load_page', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Load the form for a WPSEO admin page</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function load_page() {&nbsp;</div></li><li><div>      $page = filter_input( INPUT_GET, 'page' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      switch ( $page ) {&nbsp;</div></li><li><div>          case 'wpseo_advanced':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/advanced.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_tools':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/tools.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_titles':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/metas.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_social':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/social.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_xml':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/xml-sitemaps.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_licenses':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/licenses.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_files':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/views/tool-file-editor.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_tutorial_videos':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/tutorial-videos.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case 'wpseo_configurator':&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/config-ui/class-configuration-page.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          case self::PAGE_IDENTIFIER:&nbsp;</div></li><li><div>          default:&nbsp;</div></li><li><div>              require_once( WPSEO_PATH . 'admin/pages/dashboard.php' );&nbsp;</div></li><li><div>              break;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Loads the form for the network configuration page.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function network_config_page() {&nbsp;</div></li><li><div>      require_once( WPSEO_PATH . 'admin/pages/network.php' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Adds the ability to choose how many posts are displayed per page</span>&nbsp;</div></li><li><div><span class="comment">   * on the bulk edit pages.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function bulk_edit_options() {&nbsp;</div></li><li><div>      $option = 'per_page';&nbsp;</div></li><li><div>      $args = array(&nbsp;</div></li><li><div>          'label' =&gt; __( 'Posts', 'wordpress-seo' ), &nbsp;</div></li><li><div>          'default' =&gt; 10, &nbsp;</div></li><li><div>          'option' =&gt; 'wpseo_posts_per_page', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      add_screen_option( $option, $args );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Saves the posts per page limit for bulk edit pages.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $status Status value to pass through.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $option Option name.</span>&nbsp;</div></li><li><div><span class="comment">   * @param int    $value  Count value to check.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return int</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function save_bulk_edit_options( $status, $option, $value ) {&nbsp;</div></li><li><div>      if ( 'wpseo_posts_per_page' === $option && ( $value &gt; 0 && $value &lt; 1000 ) ) {&nbsp;</div></li><li><div>          return $value;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $status;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Add a link to the settings page to the plugins list</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @staticvar string $this_plugin holds the directory & filename for the plugin</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $links array of links for the plugins, adapted when the current plugin is found.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $file  the filename for the current plugin, which the filter loops through.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array $links</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function add_action_link( $links, $file ) {&nbsp;</div></li><li><div>      if ( WPSEO_BASENAME === $file && WPSEO_Utils::grant_access() ) {&nbsp;</div></li><li><div>          $settings_link = '&lt;a href=&quot;' . esc_url( admin_url( 'admin.php?page=' . self::PAGE_IDENTIFIER ) ) . '&quot;&gt;' . __( 'Settings', 'wordpress-seo' ) . '&lt;/a&gt;';&nbsp;</div></li><li><div>          array_unshift( $links, $settings_link );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( class_exists( 'WPSEO_Product_Premium' ) ) {&nbsp;</div></li><li><div>          $license_manager = new Yoast_Plugin_License_Manager( new WPSEO_Product_Premium() );&nbsp;</div></li><li><div>          if ( $license_manager-&gt;license_is_valid() ) {&nbsp;</div></li><li><div>              return $links;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add link to premium support landing page.</span>&nbsp;</div></li><li><div>      $premium_link = '&lt;a href=&quot;https:<span class="comment">//yoast.com/wordpress/plugins/seo-premium/support/#utm_source=wordpress-seo-settings-link&amp;utm_medium=textlink&amp;utm_campaign=support-link&quot;&gt;' . __( 'Premium Support', 'wordpress-seo' ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>      array_unshift( $links, $premium_link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Add link to docs.</span>&nbsp;</div></li><li><div>      $faq_link = '&lt;a href=&quot;https:<span class="comment">//kb.yoast.com/kb/category/yoast-seo/#utm_source=wordpress-seo-faq-link&amp;utm_medium=textlink&amp;utm_campaign=faq-link&quot;&gt;' . __( 'FAQ', 'wordpress-seo' ) . '&lt;/a&gt;';</span>&nbsp;</div></li><li><div>      array_unshift( $links, $faq_link );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $links;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Enqueues the (tiny) global JS needed for the plugin.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function config_page_scripts() {&nbsp;</div></li><li><div>      if ( WPSEO_Utils::grant_access() ) {&nbsp;</div></li><li><div>          $asset_manager = new WPSEO_Admin_Asset_Manager();&nbsp;</div></li><li><div>          $asset_manager-&gt;enqueue_script( 'admin-global-script' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          wp_localize_script( WPSEO_Admin_Asset_Manager::PREFIX . 'admin-global-script', 'wpseoAdminGlobalL10n', $this-&gt;localize_admin_global_script() );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Enqueues the (tiny) global stylesheet needed for the plugin.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function enqueue_global_style() {&nbsp;</div></li><li><div>      $asset_manager = new WPSEO_Admin_Asset_Manager();&nbsp;</div></li><li><div>      $asset_manager-&gt;enqueue_style( 'admin-global' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filter the $contactmethods array and add Facebook, Google+ and Twitter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * These are used with the Facebook author, rel=&quot;author&quot; and Twitter cards implementation.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $contactmethods currently set contactmethods.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array $contactmethods with added contactmethods.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function update_contactmethods( $contactmethods ) {&nbsp;</div></li><li><div>      <span class="comment">// Add Google+.</span>&nbsp;</div></li><li><div>      $contactmethods['googleplus'] = __( 'Google+', 'wordpress-seo' );&nbsp;</div></li><li><div>      <span class="comment">// Add Twitter.</span>&nbsp;</div></li><li><div>      $contactmethods['twitter'] = __( 'Twitter username (without @)', 'wordpress-seo' );&nbsp;</div></li><li><div>      <span class="comment">// Add Facebook.</span>&nbsp;</div></li><li><div>      $contactmethods['facebook'] = __( 'Facebook profile URL', 'wordpress-seo' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $contactmethods;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Cleans stopwords out of the slug, if the slug hasn't been set yet.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.7</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $slug if this isn't empty, the function will return an unaltered slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string $clean_slug cleaned slug</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function remove_stopwords_from_slug( $slug ) {&nbsp;</div></li><li><div>      return $this-&gt;filter_stopwords_from_slug( $slug, filter_input( INPUT_POST, 'post_title' ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filter the stopwords from the slug</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $slug       The current slug, if not empty there will be done nothing.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $post_title The title which will be used in case of an empty slug.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function filter_stopwords_from_slug( $slug, $post_title ) {&nbsp;</div></li><li><div>      <span class="comment">// Don't change an existing slug.</span>&nbsp;</div></li><li><div>      if ( isset( $slug ) && $slug !== '' ) {&nbsp;</div></li><li><div>          return $slug;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// When the post title is empty, just return the slug.</span>&nbsp;</div></li><li><div>      if ( empty( $post_title ) ) {&nbsp;</div></li><li><div>          return $slug;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Don't change the slug if this is a multisite installation and the site has been switched.</span>&nbsp;</div></li><li><div>      if ( is_multisite() && ms_is_switched() ) {&nbsp;</div></li><li><div>          return $slug;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Don't change slug if the post is a draft, this conflicts with polylang.</span>&nbsp;</div></li><li><div>      <span class="comment">// Doesn't work with filter_input() since need current value, not originally submitted one.</span>&nbsp;</div></li><li><div>      if ( 'draft' === $_POST['post_status'] ) {&nbsp;</div></li><li><div>          return $slug;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">// Lowercase the slug and strip slashes.</span>&nbsp;</div></li><li><div>      $new_slug = sanitize_title( stripslashes( $post_title ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $stop_words = new WPSEO_Admin_Stop_Words();&nbsp;</div></li><li><div>      return $stop_words-&gt;remove_in( $new_slug );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Filters all advanced settings pages from the given pages.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array $pages The pages to filter.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  public function filter_settings_pages( array $pages ) {&nbsp;</div></li><li><div>      if ( wpseo_advanced_settings_enabled( $this-&gt;options ) ) {&nbsp;</div></li><li><div>          return $pages;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pages_to_hide = WPSEO_Advanced_Settings::get_advanced_pages();&nbsp;</div></li><li><div>      $page = filter_input( INPUT_GET, 'page' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPSEO_Advanced_Settings::is_advanced_settings_page( $page ) ) {&nbsp;</div></li><li><div>          $pages_to_hide = $this-&gt;temporarily_enable_page( $pages_to_hide, $page );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $pages as $page_key =&gt; $page ) {&nbsp;</div></li><li><div>          $page_name = $page[4];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( in_array( $page_name, $pages_to_hide ) ) {&nbsp;</div></li><li><div>              unset( $pages[ $page_key ] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $pages;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Given a list of passed pages that will be disabled, removes the given page from the list so that it will no longer be disabled.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param array  $pages The pages to search through.</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $page  The page to temporarily enable.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array The remaining pages that need to be disabled.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private function temporarily_enable_page( $pages, $page ) {&nbsp;</div></li><li><div>      $enable_page = array_search( $page, $pages );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $enable_page !== false ) {&nbsp;</div></li><li><div>          unset( $pages[ $enable_page ] );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $pages;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Log the updated timestamp for user profiles when theme is changed</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function switch_theme() {&nbsp;</div></li><li><div>      $users = get_users( array( 'who' =&gt; 'authors' ) );&nbsp;</div></li><li><div>      if ( is_array( $users ) && $users !== array() ) {&nbsp;</div></li><li><div>          foreach ( $users as $user ) {&nbsp;</div></li><li><div>              update_user_meta( $user-&gt;ID, '_yoast_wpseo_profile_updated', time() );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Localization for the dismiss urls.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private function localize_admin_global_script() {&nbsp;</div></li><li><div>      return array(&nbsp;</div></li><li><div>          'dismiss_about_url' =&gt; $this-&gt;get_dismiss_url( 'wpseo-dismiss-about' ), &nbsp;</div></li><li><div>          'dismiss_tagline_url' =&gt; $this-&gt;get_dismiss_url( 'wpseo-dismiss-tagline-notice' ), &nbsp;</div></li><li><div>          'help_video_iframe_title' =&gt; __( 'Yoast SEO video tutorial', 'wordpress-seo' ), &nbsp;</div></li><li><div>          'scrollable_table_hint' =&gt; __( 'Scroll to see the table content.', 'wordpress-seo' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Extending the current page URL with two params to be able to ignore the notice.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $dismiss_param The param used to dismiss the notification.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private function get_dismiss_url( $dismiss_param ) {&nbsp;</div></li><li><div>      $arr_params = array(&nbsp;</div></li><li><div>          $dismiss_param =&gt; '1', &nbsp;</div></li><li><div>          'nonce' =&gt; wp_create_nonce( $dismiss_param ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return esc_url( add_query_arg( $arr_params ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * @return string</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  private function get_premium_indicator() {&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * The class that will be applied to the premium indicator.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @type array Classes that will be applied tot the premium indicator.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $classes = apply_filters( 'wpseo_premium_indicator_classes', array(&nbsp;</div></li><li><div>          'wpseo-premium-indicator', &nbsp;</div></li><li><div>          'wpseo-premium-indicator--no', &nbsp;</div></li><li><div>          'wpseo-js-premium-indicator', &nbsp;</div></li><li><div>          'update-plugins', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * The text to put inside the premium indicator.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @type string The text to read to screen readers.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      $text = apply_filters( 'wpseo_premium_indicator_text', __( 'Disabled', 'wordpress-seo' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $premium_indicator = sprintf(&nbsp;</div></li><li><div>          &quot;&lt;span class='%s' aria-hidden='true'&gt;&lt;svg width=\&quot;20\&quot; height=\&quot;20\&quot; viewBox=\&quot;0 0 1792 1792\&quot; xmlns=\&quot;http:<span class="comment">//www.w3.org/2000/svg\&quot;&gt;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z\&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span class='screen-reader-text'&gt;%s&lt;/span&gt;&quot;, </span>&nbsp;</div></li><li><div>          esc_attr( implode( ' ', $classes ) ), &nbsp;</div></li><li><div>          esc_html( $text )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $premium_indicator;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Sets the upsell notice.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  protected function set_upsell_notice() {&nbsp;</div></li><li><div>      $upsell = new WPSEO_Product_Upsell_Notice();&nbsp;</div></li><li><div>      $upsell-&gt;dismiss_notice_listener();&nbsp;</div></li><li><div>      $upsell-&gt;initialize();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Initializes Whip to show a notice for outdated PHP versions.</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  protected function check_php_version() {&nbsp;</div></li><li><div>      if ( ! current_user_can( 'manage_options' ) ) {&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $this-&gt;on_dashboard_page() ) {&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      whip_wp_check_versions( array(&nbsp;</div></li><li><div>          'php' =&gt; '&gt;=5.3', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Whether we are on the admin dashboard page.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @returns bool</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  protected function on_dashboard_page() {&nbsp;</div></li><li><div>      return 'index.php' === $GLOBALS['pagenow'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Loads the cornerstone filter</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  protected function initialize_cornerstone_content() {&nbsp;</div></li><li><div>      if ( ! $this-&gt;options['enable_cornerstone_content'] ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $cornerstone = new WPSEO_Cornerstone();&nbsp;</div></li><li><div>      $cornerstone-&gt;register_hooks();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $cornerstone_filter = new WPSEO_Cornerstone_Filter();&nbsp;</div></li><li><div>      $cornerstone_filter-&gt;register_hooks();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/********************** DEPRECATED METHODS **********************/</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// @codeCoverageIgnoreStart</span>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Check whether the current user is allowed to access the configuration.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated use WPSEO_Utils::grant_access()</span>&nbsp;</div></li><li><div><span class="comment">   * @see        WPSEO_Utils::grant_access()</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return boolean</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function grant_access() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 1.5.0', 'WPSEO_Utils::grant_access()' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return WPSEO_Utils::grant_access();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Check whether the current user is allowed to access the configuration.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated use wpseo_do_upgrade()</span>&nbsp;</div></li><li><div><span class="comment">   * @see        WPSEO_Upgrade</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function maybe_upgrade() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 1.5.0', 'wpseo_do_upgrade' );&nbsp;</div></li><li><div>      new WPSEO_Upgrade();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Clears the cache</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated use WPSEO_Utils::clear_cache()</span>&nbsp;</div></li><li><div><span class="comment">   * @see        WPSEO_Utils::clear_cache()</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function clear_cache() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 1.5.0', 'WPSEO_Utils::clear_cache()' );&nbsp;</div></li><li><div>      WPSEO_Utils::clear_cache();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Clear rewrites</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated use WPSEO_Utils::clear_rewrites()</span>&nbsp;</div></li><li><div><span class="comment">   * @see        WPSEO_Utils::clear_rewrites()</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function clear_rewrites() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 1.5.0', 'WPSEO_Utils::clear_rewrites()' );&nbsp;</div></li><li><div>      WPSEO_Utils::clear_rewrites();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Register all the options needed for the configuration pages.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 1.5.0</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated use WPSEO_Option::register_setting() on each individual option</span>&nbsp;</div></li><li><div><span class="comment">   * @see        WPSEO_Option::register_setting()</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function options_init() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 1.5.0', 'WPSEO_Option::register_setting()' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Display an error message when the blog is set to private.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 3.3</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function blog_public_warning() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 3.3.0' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Display an error message when the theme contains a meta description tag.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.4.14</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 3.3</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function meta_description_warning() {&nbsp;</div></li><li><div>      _deprecated_function( __FUNCTION__, 'WPSEO 3.3.0' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Returns the stopwords for the current language</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @since 1.1.7</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 3.1 Use WPSEO_Admin_Stop_Words::list_stop_words() instead.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return array $stopwords array of stop words to check and / or remove from slug</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function stopwords() {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 3.1', 'WPSEO_Admin_Stop_Words::list_stop_words' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $stop_words = new WPSEO_Admin_Stop_Words();&nbsp;</div></li><li><div>      return $stop_words-&gt;list_stop_words();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">   * Check whether the stopword appears in the string</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @deprecated 3.1</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @param string $haystack     The string to be checked for the stopword.</span>&nbsp;</div></li><li><div><span class="comment">   * @param bool   $checking_url Whether or not we're checking a URL.</span>&nbsp;</div></li><li><div><span class="comment">   *</span>&nbsp;</div></li><li><div><span class="comment">   * @return bool|mixed</span>&nbsp;</div></li><li><div><span class="comment">   */</span>&nbsp;</div></li><li><div>  function stopwords_check( $haystack, $checking_url = false ) {&nbsp;</div></li><li><div>      _deprecated_function( __METHOD__, 'WPSEO 3.1' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $stop_words = $this-&gt;stopwords();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_array( $stop_words ) && $stop_words !== array() ) {&nbsp;</div></li><li><div>          foreach ( $stop_words as $stop_word ) {&nbsp;</div></li><li><div>              <span class="comment">// If checking a URL remove the single quotes.</span>&nbsp;</div></li><li><div>              if ( $checking_url ) {&nbsp;</div></li><li><div>                  $stop_word = str_replace( &quot;'&quot;, '', $stop_word );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Check whether the stopword appears as a whole word.</span>&nbsp;</div></li><li><div>              <span class="comment">// @todo [JRF =&gt; whomever] check whether the use of \b (=word boundary) would be more efficient ;-).</span>&nbsp;</div></li><li><div>              $res = preg_match( &quot;`(^|[ \n\r\t\., '\(\)\&quot;\+;!?:])&quot; . preg_quote( $stop_word, '`' ) . &quot;($|[ \n\r\t\., '\(\)\&quot;\+;!?:])`iu&quot;, $haystack );&nbsp;</div></li><li><div>              if ( $res &gt; 0 ) {&nbsp;</div></li><li><div>                  return $stop_word;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// @codeCoverageIgnoreEnd</span>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Yoast SEO</li><li><span></span>4.7.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>