<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="1.0.0" data-slug="metaplate" data-type="class" data-id="92770"><head xmlns="http://www.w3.org/1999/xhtml"><title> handlebarstest | class | Metaplate | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Handlebars\Test, class, plugin, metaplate, 1.0.0" /><meta name="description" content="Class Handlebars_Class" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=417ce7486a7148ffdecaba5fe47d683d' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/handlebars_test/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fhandlebars_test%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fhandlebars_test%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-metaplate-1.0.0-class-handlebars_test","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="handlebars_test" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to metaplate." href="http://hookr.io/plugins/metaplate/" class="plugin"><span property="name">metaplate</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.0.0." href="http://hookr.io/plugins/metaplate/1.0.0/" class="H_VERSION"><span property="name">1.0.0</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/metaplate/1.0.0/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">handlebars_test</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="89"><a href="http://hookr.io/plugins/metaplate/1.0.0/all/" title="All">All <span class="count badge">89</span></a></li><li class="" data-id="new" data-count="2"><a href="http://hookr.io/plugins/metaplate/1.0.0/new/" title="New">New <span class="count badge">2</span></a></li><li class="" data-id="hooks" data-count="6"><a href="http://hookr.io/plugins/metaplate/1.0.0/hooks/" title="Hooks">Hooks <span class="count badge">6</span></a></li><li class="" data-id="action" data-count="0"><a href="http://hookr.io/plugins/metaplate/1.0.0/actions/" title="Actions">Actions <span class="count badge">0</span></a></li><li class="" data-id="filter" data-count="6"><a href="http://hookr.io/plugins/metaplate/1.0.0/filters/" title="Filters">Filters <span class="count badge">6</span></a></li><li class="active" data-id="class" data-count="68"><a href="http://hookr.io/plugins/metaplate/1.0.0/classes/" title="Classes">Classes <span class="count badge">68</span></a></li><li class="" data-id="constant" data-count="6"><a href="http://hookr.io/plugins/metaplate/1.0.0/constants/" title="Constants">Constants <span class="count badge">6</span></a></li><li class="" data-id="function" data-count="8"><a href="http://hookr.io/plugins/metaplate/1.0.0/functions/" title="Functions">Functions <span class="count badge">8</span></a></li><li class="" data-id="shortcode" data-count="1"><a href="http://hookr.io/plugins/metaplate/1.0.0/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">1</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>HandlebarsTest</strong></h1><p>Class Handlebars_Class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(4)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/metaplate/1.0.0/files/vendor-calderawp-metaplate-core-vendor-xamin-handlebars-php-tests-fixture-handlebars-test/" class="file">/vendor/calderawp/metaplate-core/vendor/xamin/handlebars.php/tests/fixture/Handlebars/Test.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="8" class="block" start="8"><li><div>class Test&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd><dt><strong><a href="http://hookr.io/plugins/metaplate/1.0.0/files/vendor-calderawp-metaplate-core-vendor-xamin-handlebars-php-tests-xamin-handlebarstest/" class="file">/vendor/calderawp/metaplate-core/vendor/xamin/handlebars.php/tests/Xamin/HandlebarsTest.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="21" class="block" start="21"><li><div>class HandlebarsTest extends \PHPUnit_Framework_TestCase&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>    public function setUp()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        \Handlebars\Autoloader::register();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test handlebars autoloader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testAutoLoad()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        Handlebars\Autoloader::register(realpath(__DIR__ . '/../fixture/'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('Handlebars\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('\\Handlebars\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('Handlebars\\Example\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('\\Handlebars\\Example\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(class_exists('\\Another\\Example\\Test'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test basic tags&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $src    handlebars source&nbsp;</div></li><li><div>     * @param array  $data   data&nbsp;</div></li><li><div>     * @param string $result expected data&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider simpleTagdataProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testBasicTags($src, $data, $result)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($result, $engine-&gt;render($src, $data));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Simple tag provider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function simpleTagdataProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{! This is comment}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'result'), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.key}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '4'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; (object)array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(&quot;length&quot; =&gt; &quot;15 inches&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;)), &nbsp;</div></li><li><div>                &quot;15 inches&quot;&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.0}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.property.3}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(&quot;property&quot; =&gt; array(1, 2, 3, 4))), &nbsp;</div></li><li><div>                '4'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.unsafe}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('unsafe' =&gt; '&lt;strong&gt;Test&lt;/strong&gt;')), &nbsp;</div></li><li><div>                '&lt;strong&gt;Test&lt;/strong&gt;'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{{data.safe}}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('safe' =&gt; '&lt;strong&gt;Test&lt;/strong&gt;')), &nbsp;</div></li><li><div>                '&lt;strong&gt;Test&lt;/strong&gt;'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                &quot;\{{data}}&quot;, // is equal to \\{{data}}&nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '{{data}}', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\\{{data}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '\\\\foo'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\{{data}}', // is equal to \\\\{{data}} in php&nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '\\\\foo'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\{{{data}}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '{{{data}}}'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\pi', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                '\pi'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\\\\\\qux', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                '\\\\\\\\qux'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                &quot;var jsVar = 'It\'s a phrase in apos';&quot;, &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                &quot;var jsVar = 'It\'s a phrase in apos';&quot;&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'var jsVar = &quot;A \&quot;quoted\&quot; text&quot;;', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'var jsVar = &quot;A \&quot;quoted\&quot; text&quot;;', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if first}}The first{{else}}{{#if second}}The second{{/if}}{{/if}}', &nbsp;</div></li><li><div>                array('first' =&gt; false, 'second' =&gt; true), &nbsp;</div></li><li><div>                'The second'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test helpers (internal helpers)&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $src    handlebars source&nbsp;</div></li><li><div>     * @param array  $data   data&nbsp;</div></li><li><div>     * @param string $result expected data&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider internalHelpersdataProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testSimpleHelpers($src, $data, $result)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader, 'helpers' =&gt; $helpers));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals($result, $engine-&gt;render($src, $data));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Simple helpers provider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function internalHelpersdataProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}Yes{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                'Yes'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            # see the issue #76&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}0{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                '0'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}Yes{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#with data}}{{key}}{{/with}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('the_only_key' =&gt; 1)), &nbsp;</div></li><li><div>                'the_only_key'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}=&gt;{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key1' =&gt; 1, 'key2' =&gt; 2, )), &nbsp;</div></li><li><div>                'key1=&gt;1key2=&gt;2'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}=&gt;{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; new \ArrayIterator(array('key1' =&gt; 1, 'key2' =&gt; 2))), &nbsp;</div></li><li><div>                'key1=&gt;1key2=&gt;2'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@index}}=&gt;{{this}}, {{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key1' =&gt; 1, 'key2' =&gt; 2, )), &nbsp;</div></li><li><div>                '0=&gt;1, 1=&gt;2, '&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @first}}the first is {{this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the first is one'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @last}}the last is {{this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the last is three'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}{{else}}fail{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}fail{{else}}ok{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{else}}fail{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}fail{{else}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#bindAttr data}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'data'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if 1}}ok{{else}}fail{{/if}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if 0}}ok{{else}}fail{{/if}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'fail'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '  {{~#if 1}}OK   {{~else~}} NO {{~/if~}}  END', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'OKEND'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'XX {{~#bindAttr data}} XX', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'XXdata XX'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @last}}the last is&nbsp;</div></li><li><div>                {{~this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the last isthree'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#with data}}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                {{~key~}}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                {{/with}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{= (( )) =}}((#if 1))OK((else))NO((/if))', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'OK'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data~}}    {{this}}    {{~/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}    {{~/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data~}}    {{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array( '{{#if first}}The first{{else}}{{#if second}}The second{{/if}}{{/if}}', &nbsp;</div></li><li><div>                array('first' =&gt; false, 'second' =&gt; true), &nbsp;</div></li><li><div>                'The second'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Management helpers&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelpersManagement()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers(array('test' =&gt; function () {&nbsp;</div></li><li><div>            }), false);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('helpers' =&gt; $helpers));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(is_callable($engine-&gt;getHelper('test')));&nbsp;</div></li><li><div>        $this-&gt;assertTrue($engine-&gt;hasHelper('test'));&nbsp;</div></li><li><div>        $engine-&gt;removeHelper('test');&nbsp;</div></li><li><div>        $this-&gt;assertFalse($engine-&gt;hasHelper('test'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Custom helper test&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCustomHelper()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function () {&nbsp;</div></li><li><div>            return 'Test helper is called';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{#test}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{test}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test2', function ($template, $context, $arg) {&nbsp;</div></li><li><div>            return 'Test helper is called with ' . $arg;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called with a b c', $engine-&gt;render('{{#test2 a b c}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called with a b c', $engine-&gt;render('{{test2 a b c}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('renderme', function () {&nbsp;</div></li><li><div>            return new \Handlebars\String(&quot;{{test}}&quot;);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{#renderme}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('dontrenderme', function () {&nbsp;</div></li><li><div>            return &quot;{{test}}&quot;;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('{{test}}', $engine-&gt;render('{{#dontrenderme}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('markupHelper', function () {&nbsp;</div></li><li><div>            return '&lt;strong&gt;Test&lt;/strong&gt;';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{{markupHelper}}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{markupHelper}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('safeStringTest', function () {&nbsp;</div></li><li><div>            return new \Handlebars\SafeString('&lt;strong&gt;Test&lt;/strong&gt;');&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{safeStringTest}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('argsTest', function ($template, $context, $arg) {&nbsp;</div></li><li><div>            $parsedArgs = $template-&gt;parseArguments($arg);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(' ', $parsedArgs);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;a \&quot;b\&quot; c&quot;, $engine-&gt;render('{{{argsTest &quot;a&quot; &quot;\&quot;b\&quot;&quot; \'c\'}}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // This is just a fun thing to do :)&nbsp;</div></li><li><div>        $that = $this;&nbsp;</div></li><li><div>        $engine-&gt;addHelper('stopToken', &nbsp;</div></li><li><div>            function ($template, $context, $arg) use ($that) {&nbsp;</div></li><li><div>                /** @var $template \Handlebars\Template */&nbsp;</div></li><li><div>                $parsedArgs = $template-&gt;parseArguments($arg);&nbsp;</div></li><li><div>                $first = array_shift($parsedArgs);&nbsp;</div></li><li><div>                $last = array_shift($parsedArgs);&nbsp;</div></li><li><div>                if ($last == 'yes') {&nbsp;</div></li><li><div>                    $template-&gt;setStopToken($first);&nbsp;</div></li><li><div>                    $that-&gt;assertEquals($first, $template-&gt;getStopToken());&nbsp;</div></li><li><div>                    $buffer = $template-&gt;render($context);&nbsp;</div></li><li><div>                    $template-&gt;setStopToken(false);&nbsp;</div></li><li><div>                    $template-&gt;discard($context);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $template-&gt;setStopToken($first);&nbsp;</div></li><li><div>                    $that-&gt;assertEquals($first, $template-&gt;getStopToken());&nbsp;</div></li><li><div>                    $template-&gt;discard($context);&nbsp;</div></li><li><div>                    $template-&gt;setStopToken(false);&nbsp;</div></li><li><div>                    $buffer = $template-&gt;render($context);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return $buffer;&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;Used&quot;, $engine-&gt;render('{{# stopToken fun no}}Not used{{ fun }}Used{{/stopToken }}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;Not used&quot;, $engine-&gt;render('{{# stopToken any yes}}Not used{{ any }}Used{{/stopToken }}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('InvalidArgumentException');&nbsp;</div></li><li><div>        $engine-&gt;getHelpers()-&gt;call('invalid', $engine-&gt;loadTemplate(''), new \Handlebars\Context(), '', '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidHelperMustacheStyle()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#NOTVALID}}XXX{{/NOTVALID}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidHelper()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#NOTVALID argument}}XXX{{/NOTVALID}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test mustache style loop and if&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testMustacheStyle()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('yes', $engine-&gt;render('{{#x}}yes{{/x}}', array('x' =&gt; true)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('', $engine-&gt;render('{{#x}}yes{{/x}}', array('x' =&gt; false)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('yes', $engine-&gt;render('{{^x}}yes{{/x}}', array('x' =&gt; false)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('', $engine-&gt;render('{{^x}}yes{{/x}}', array('x' =&gt; true)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1234', $engine-&gt;render('{{#x}}{{this}}{{/x}}', array('x' =&gt; array(1, 2, 3, 4))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('012', $engine-&gt;render('{{#x}}{{@index}}{{/x}}', array('x' =&gt; array('a', 'b', 'c'))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('abc', $engine-&gt;render('{{#x}}{{@key}}{{/x}}', array('x' =&gt; array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('the_only_key', $engine-&gt;render('{{#x}}{{@key}}{{/x}}', array('x' =&gt; array('the_only_key' =&gt; 1))));&nbsp;</div></li><li><div>        $std = new stdClass();&nbsp;</div></li><li><div>        $std-&gt;value = 1;&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $engine-&gt;render('{{#x}}{{value}}{{/x}}', array('x' =&gt; $std)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $engine-&gt;render('{{{x}}}', array('x' =&gt; 1)));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \LogicException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testParserException()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#test}}{{#test2}}{{/test}}{{/test2}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test add/get/has/clear functions on helper class&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelpersClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $helpers-&gt;add('test', function () {&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;has('test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(isset($helpers-&gt;test));&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>        $helpers-&gt;test2 = function () {&nbsp;</div></li><li><div>        };&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;has('test2'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(isset($helpers-&gt;test2));&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>        unset($helpers-&gt;test2);&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;has('test2'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(isset($helpers-&gt;test2));&nbsp;</div></li><li><div>        $helpers-&gt;clear();&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;has('test'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(isset($helpers-&gt;test));&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongConstructor()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers(&quot;helper&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongCallable()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $helper-&gt;add('test', 1);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongGet()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $x = $helper-&gt;test;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongUnset()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        unset($helper-&gt;test);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * test String class&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testStringClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $string = new \Handlebars\String('test');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $string-&gt;getString());&nbsp;</div></li><li><div>        $string-&gt;setString('new');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new', $string-&gt;getString());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param $dir&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function delTree($dir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $files = array_diff(scandir($dir), array('.', '..'));&nbsp;</div></li><li><div>        foreach ($files as $file) {&nbsp;</div></li><li><div>            (is_dir(&quot;$dir/$file&quot;)) ? $this-&gt;delTree(&quot;$dir/$file&quot;) : unlink(&quot;$dir/$file&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return rmdir($dir);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Its not a good test :) but ok&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCacheSystem()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $path = sys_get_temp_dir() . '/__cache__handlebars';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        @$this-&gt;delTree($path);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $dummy = new \Handlebars\Cache\Disk($path);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('cache' =&gt; $dummy));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(0, count(glob($path . '/*')));&nbsp;</div></li><li><div>        $engine-&gt;render('test', array());&nbsp;</div></li><li><div>        $this-&gt;assertEquals(1, count(glob($path . '/*')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    public function testArrayLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\ArrayLoader(array('test' =&gt; 'HELLO'));&nbsp;</div></li><li><div>        $loader-&gt;addTemplate('another', 'GOODBYE');&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($engine-&gt;render('test', array()), 'HELLO');&nbsp;</div></li><li><div>        $this-&gt;assertEquals($engine-&gt;render('another', array()), 'GOODBYE');&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $engine-&gt;render('invalid-template', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('loader', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderMultipleFolder()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $paths = array(&nbsp;</div></li><li><div>            realpath(__DIR__ . '/../fixture/data'), &nbsp;</div></li><li><div>            realpath(__DIR__ . '/../fixture/another')&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = array(&nbsp;</div></li><li><div>            'prefix' =&gt; '__', &nbsp;</div></li><li><div>            'extension' =&gt; 'hb'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader($paths, $options);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test_extra', $engine-&gt;render('loader', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('another_extra', $engine-&gt;render('another', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderNotFound()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $engine-&gt;render('invalid_file', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @expectedException \RuntimeException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderInvalidFolder()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/') . 'invalid/path');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test partial loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testPartialLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $partialLoader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $engine-&gt;setPartialsLoader($partialLoader);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('{{&gt;loader}}', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testPartial()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $partialLoader = new \Handlebars\Loader\ArrayLoader(array('test' =&gt; '{{key}}', 'bar' =&gt; 'its foo'));&nbsp;</div></li><li><div>        $partialAliasses = array('foo' =&gt; 'bar');&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'loader' =&gt; $loader, &nbsp;</div></li><li><div>                'partials_loader' =&gt; $partialLoader, &nbsp;</div></li><li><div>                'partials_alias' =&gt; $partialAliasses&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('HELLO', $engine-&gt;render('{{&gt;test parameter}}', array('parameter' =&gt; array('key' =&gt; 'HELLO'))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('its foo', $engine-&gt;render('{{&gt;foo}}', array()));&nbsp;</div></li><li><div>        $engine-&gt;registerPartial('foo-again', 'bar');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('its foo', $engine-&gt;render('{{&gt;foo-again}}', array()));&nbsp;</div></li><li><div>        $engine-&gt;unRegisterPartial('foo-again');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $engine-&gt;render('{{&gt;foo-again}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * test variable access&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testVariableAccess()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = \Handlebars\Handlebars::factory();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $var = new \StdClass();&nbsp;</div></li><li><div>        $var-&gt;x = 'var-x';&nbsp;</div></li><li><div>        $var-&gt;y = array(&nbsp;</div></li><li><div>            'z' =&gt; 'var-y-z'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('{{var}}', array('var' =&gt; 'test')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-x', $engine-&gt;render('{{var.x}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-y-z', $engine-&gt;render('{{var.y.z}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        // Access parent context in with helper&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-x', $engine-&gt;render('{{#with var.y}}{{../var.x}}{{/with}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        // Reference array as string&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Array', $engine-&gt;render('{{var}}', array('var' =&gt; array('test'))));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $obj = new DateTime();&nbsp;</div></li><li><div>        $time = $obj-&gt;getTimestamp();&nbsp;</div></li><li><div>        $this-&gt;assertEquals($time, $engine-&gt;render('{{time.getTimestamp}}', array('time' =&gt; $obj)));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testContext()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $test = new stdClass();&nbsp;</div></li><li><div>        $test-&gt;value = 'value';&nbsp;</div></li><li><div>        $test-&gt;array = array(&nbsp;</div></li><li><div>            'a' =&gt; '1', &nbsp;</div></li><li><div>            'b' =&gt; '2', &nbsp;</div></li><li><div>            '!&quot;#%&\'()*+, ./;&lt;=&gt;@[\\^`{|}~ ' =&gt; '3', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $context = new \Handlebars\Context($test);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('[value]', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $context-&gt;get('array.a', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('2', $context-&gt;get('array.b', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('3', $context-&gt;get('array.[!&quot;#%&\'()*+, ./;&lt;=&gt;@[\\^`{|}~ ]', true));&nbsp;</div></li><li><div>        $new = array('value' =&gt; 'new value');&nbsp;</div></li><li><div>        $context-&gt;push($new);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('../value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('../value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;last());&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('.'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('this'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('this.'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($test, $context-&gt;get('../.'));&nbsp;</div></li><li><div>        $context-&gt;pop();&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     * @dataProvider getInvalidData&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testInvalidAccessContext($invalid)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $context = new \Handlebars\Context(array());&nbsp;</div></li><li><div>        $this-&gt;assertEmpty($context-&gt;get($invalid));&nbsp;</div></li><li><div>        $context-&gt;get($invalid, true);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function getInvalidData()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('../../data'), &nbsp;</div></li><li><div>            array('data'), &nbsp;</div></li><li><div>            array(''), &nbsp;</div></li><li><div>            array('data.key.key'), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test for proper handling of the length property&nbsp;</div></li><li><div>     **/&nbsp;</div></li><li><div>    public function testArrayLengthEmulation()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $data = array(&quot;numbers&quot; =&gt; array(1, 2, 3, 4), &nbsp;</div></li><li><div>            &quot;object&quot; =&gt; (object)array(&quot;prop1&quot; =&gt; &quot;val1&quot;, &quot;prop2&quot; =&gt; &quot;val2&quot;), &nbsp;</div></li><li><div>            &quot;object_with_length_property&quot; =&gt; (object)array(&quot;length&quot; =&gt; &quot;15cm&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $context = new \Handlebars\Context($data);&nbsp;</div></li><li><div>        // make sure we are getting the array length when given an array&nbsp;</div></li><li><div>        $this-&gt;assertEquals($context-&gt;get(&quot;numbers.length&quot;), 4);&nbsp;</div></li><li><div>        // make sure we are not getting a length when given an object&nbsp;</div></li><li><div>        $this-&gt;assertEmpty($context-&gt;get(&quot;object.length&quot;));&nbsp;</div></li><li><div>        // make sure we can still get the length property when given an object&nbsp;</div></li><li><div>        $this-&gt;assertEquals($context-&gt;get(&quot;object_with_length_property.length&quot;), &quot;15cm&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function argumentParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('arg1 arg2', array(&quot;arg1&quot;, &quot;arg2&quot;)), &nbsp;</div></li><li><div>            array('&quot;arg1 arg2&quot;', array(&quot;arg1 arg2&quot;)), &nbsp;</div></li><li><div>            array('arg1 arg2 &quot;arg number 3&quot;', array(&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg number 3&quot;)), &nbsp;</div></li><li><div>            array('arg1 &quot;arg\&quot;2&quot; &quot;\&quot;arg3\&quot;&quot;', array(&quot;arg1&quot;, 'arg&quot;2', '&quot;arg3&quot;')), &nbsp;</div></li><li><div>            array(&quot;'arg1 arg2'&quot;, array(&quot;arg1 arg2&quot;)), &nbsp;</div></li><li><div>            array(&quot;arg1 arg2 'arg number 3'&quot;, array(&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg number 3&quot;)), &nbsp;</div></li><li><div>            array('arg1 &quot;arg\&quot;2&quot; &quot;\\\'arg3\\\'&quot;', array(&quot;arg1&quot;, 'arg&quot;2', &quot;'arg3'&quot;)), &nbsp;</div></li><li><div>            array('arg1 arg2.[value\'s &quot;segment&quot;].val', array(&quot;arg1&quot;, 'arg2.[value\'s &quot;segment&quot;].val')), &nbsp;</div></li><li><div>            array('&quot;arg1.[value 1]&quot; arg2', array(&quot;arg1.[value 1]&quot;, 'arg2')), &nbsp;</div></li><li><div>            array('0', array('0')), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Argument Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $expected_array&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider argumentParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testArgumentParser($arg_string, $expected_array)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $template = new \Handlebars\Template($engine, null, null);&nbsp;</div></li><li><div>        // get the string version of the arguments array&nbsp;</div></li><li><div>        $args = $template-&gt;parseArguments($arg_string);&nbsp;</div></li><li><div>        $args = array_map(function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        }, $args);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($args, $expected_array);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function namedArgumentParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('arg1=&quot;value&quot; arg2=&quot;value 2&quot;', array('arg1' =&gt; 'value', 'arg2' =&gt; 'value 2')), &nbsp;</div></li><li><div>            array('arg1=var1', array('arg1' =&gt; 'var1')), &nbsp;</div></li><li><div>            array('[arg &quot;1&quot;]=&quot;arg number 1&quot;', array('arg &quot;1&quot;' =&gt; &quot;arg number 1&quot;)), &nbsp;</div></li><li><div>            array('arg1 =   &quot;value&quot;', array('arg1' =&gt; &quot;value&quot;)), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Named Argument Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $expected_array&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider namedArgumentParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testNamedArgumentsParser($arg_string, $expected_array)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $template = new \Handlebars\Template($engine, null, null);&nbsp;</div></li><li><div>        // get the string version of the arguments array&nbsp;</div></li><li><div>        $args = $template-&gt;parseNamedArguments($arg_string);&nbsp;</div></li><li><div>        $args = array_map(function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        }, $args);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($args, $expected_array);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Combined Arguments Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $positional_args&nbsp;</div></li><li><div>     * @param        $named_args&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider combinedArgumentsParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCombinedArgumentsParser($arg_string, $positional_args, $named_args)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $args = new \Handlebars\Arguments($arg_string);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get the string version of the arguments array&nbsp;</div></li><li><div>        $stringify = function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        };&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($positional_args !== false) {&nbsp;</div></li><li><div>            $this-&gt;assertEquals(&nbsp;</div></li><li><div>                array_map($stringify, $args-&gt;getPositionalArguments()), &nbsp;</div></li><li><div>                $positional_args&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($named_args !== false) {&nbsp;</div></li><li><div>            $this-&gt;assertEquals(&nbsp;</div></li><li><div>                array_map($stringify, $args-&gt;getNamedArguments()), &nbsp;</div></li><li><div>                $named_args&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function combinedArgumentsParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Use data provider for positional arguments parser&nbsp;</div></li><li><div>        foreach ($this-&gt;argumentParserProvider() as $dataSet) {&nbsp;</div></li><li><div>            $result[] = array(&nbsp;</div></li><li><div>                $dataSet[0], &nbsp;</div></li><li><div>                $dataSet[1], &nbsp;</div></li><li><div>                false, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Use data provider for named arguments parser&nbsp;</div></li><li><div>        foreach ($this-&gt;namedArgumentParserProvider() as $dataSet) {&nbsp;</div></li><li><div>            $result[] = array(&nbsp;</div></li><li><div>                $dataSet[0], &nbsp;</div></li><li><div>                false, &nbsp;</div></li><li><div>                $dataSet[1], &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add test cases with combined arguments&nbsp;</div></li><li><div>        return array_merge(&nbsp;</div></li><li><div>            $result, &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'arg1 arg2 arg3=value1 arg4=&quot;value2&quot;', &nbsp;</div></li><li><div>                    array('arg1', 'arg2'), &nbsp;</div></li><li><div>                    array('arg3' =&gt; 'value1', 'arg4' =&gt; 'value2')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    '@first arg=@last', &nbsp;</div></li><li><div>                    array('@first'), &nbsp;</div></li><li><div>                    array('arg' =&gt; '@last')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    '[seg arg1] [seg arg2] = [seg value &quot;1&quot;]', &nbsp;</div></li><li><div>                    array('[seg arg1]'), &nbsp;</div></li><li><div>                    array('seg arg2' =&gt; '[seg value &quot;1&quot;]')&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function stringLiteralInCustomHelperProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('{{#test2 arg1 &quot;Argument 2&quot;}}', array(&quot;arg1&quot; =&gt; &quot;Argument 1&quot;), &quot;Argument 1:Argument 2&quot;), &nbsp;</div></li><li><div>            array('{{#test2 &quot;Argument 1&quot; &quot;Argument 2&quot;}}', array(&quot;arg1&quot; =&gt; &quot;Argument 1&quot;), &quot;Argument 1:Argument 2&quot;), &nbsp;</div></li><li><div>            array('{{#test2 &quot;Argument 1&quot; arg2}}', array(&quot;arg2&quot; =&gt; &quot;Argument 2&quot;), &quot;Argument 1:Argument 2&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test String literals in the context of a helper&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $template template text&nbsp;</div></li><li><div>     * @param array  $data     context data&nbsp;</div></li><li><div>     * @param string $results  The Expected Results&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider stringLiteralInCustomHelperProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testStringLiteralInCustomHelper($template, $data, $results)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test2', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $args = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $args = array_map(function ($a) use ($context) {&nbsp;</div></li><li><div>                return $context-&gt;get($a);&nbsp;</div></li><li><div>            }, $args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(':', $args);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $res = $engine-&gt;render($template, $data);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($res, $results);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function integerLiteralInCustomHelperProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('{{test -5}}', array(), '-5'), &nbsp;</div></li><li><div>            array('{{test 0}}', array(), '0'), &nbsp;</div></li><li><div>            array('{{test 12}}', array(), '12'), &nbsp;</div></li><li><div>            array('{{test 12 [12]}}', array('12' =&gt; 'foo'), '12:foo'), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test integer literals in the context of a helper&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $template template text&nbsp;</div></li><li><div>     * @param array  $data     context data&nbsp;</div></li><li><div>     * @param string $results  The Expected Results&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider integerLiteralInCustomHelperProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testIntegerLiteralInCustomHelper($template, $data, $results)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $args = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $args = array_map(function ($a) use ($context) {&nbsp;</div></li><li><div>                return $context-&gt;get($a);&nbsp;</div></li><li><div>            }, $args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(':', $args);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $res = $engine-&gt;render($template, $data);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($res, $results);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testString()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $string = new \Handlebars\String(&quot;Hello World&quot;);&nbsp;</div></li><li><div>        $this-&gt;assertEquals((string)$string, &quot;Hello World&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidNames()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'loader' =&gt; $loader, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $all = \Handlebars\Context::NOT_VALID_NAME_CHARS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; strlen($all); $i++) {&nbsp;</div></li><li><div>            // Dot in string is valid, its an exception here&nbsp;</div></li><li><div>            if ($all{$i} === '.') {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            try {&nbsp;</div></li><li><div>                $name = 'var' . $all{$i} . 'var';&nbsp;</div></li><li><div>                $engine-&gt;render('{{' . $name . '}}', array($name =&gt; 'VALUE'));&nbsp;</div></li><li><div>                throw new Exception(&quot;Accept the $name :/&quot;);&nbsp;</div></li><li><div>            } catch (Exception $e) {&nbsp;</div></li><li><div>                $this-&gt;assertInstanceOf(&quot;InvalidArgumentException&quot;, $e);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Helper subexpressions test&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperSubexpressions()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $parsedArgs = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return (count($parsedArgs) ? $context-&gt;get($parsedArgs[0]) : '') . 'Test.';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that nested syntax is accepted and sub-helper is run&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test.Test.', $engine-&gt;render('{{test (test)}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('add', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $sum = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($template-&gt;parseArguments($args) as $value) {&nbsp;</div></li><li><div>                $sum += intval($context-&gt;get($value));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $sum;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that subexpression result is inserted correctly as argument to top level helper&nbsp;</div></li><li><div>        $this-&gt;assertEquals('42', $engine-&gt;render('{{add 21 (add 10 (add 5 6))}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that bracketed expressions within string literals are treated correctly&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;(test)Test.&quot;, $engine-&gt;render(&quot;{{test '(test)'}}&quot;, array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;)Test.Test.&quot;, $engine-&gt;render(&quot;{{test (test ')')}}&quot;, array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('concat', function(\Handlebars\Template $template, \Handlebars\Context $context, $args) {&nbsp;</div></li><li><div>            $result = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach($template-&gt;parseArguments($args) as $arg) {&nbsp;</div></li><li><div>                $result .= $context-&gt;get($arg);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $result;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('ACB', $engine-&gt;render('{{concat a (concat c b)}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('ACB', $engine-&gt;render('{{concat (concat a c) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('A-B', $engine-&gt;render('{{concat (concat a &quot;-&quot;) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('A-B', $engine-&gt;render('{{concat (concat a &quot;-&quot;) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'A-' =&gt; '!')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test if and unless adding an extra layer when accessing parent&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testIfUnlessExtraLayer()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        $this-&gt;assertEquals('good', $engine-&gt;render('{{#with b}}{{#if this}}{{../../a}}{{/if}}{{/with}}', array('a' =&gt; 'good', 'b' =&gt; 'stump')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('good', $engine-&gt;render('{{#with b}}{{#unless false}}{{../../a}}{{/unless}}{{/with}}', array('a' =&gt; 'good', 'b' =&gt; 'stump')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test of Arguments to string conversion.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testArgumentsString()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $argsString = 'foo bar [foo bar] baz=&quot;value&quot;';&nbsp;</div></li><li><div>        $args = new \Handlebars\Arguments($argsString);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($argsString, (string)$args);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd><dt><strong><a href="http://hookr.io/plugins/metaplate/1.0.0/files/vendor-xamin-handlebars-php-tests-fixture-handlebars-test/" class="file">/vendor/xamin/handlebars.php/tests/fixture/Handlebars/Test.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="8" class="block" start="8"><li><div>class Test&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd><dt><strong><a href="http://hookr.io/plugins/metaplate/1.0.0/files/vendor-xamin-handlebars-php-tests-xamin-handlebarstest/" class="file">/vendor/xamin/handlebars.php/tests/Xamin/HandlebarsTest.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="21" class="block" start="21"><li><div>class HandlebarsTest extends \PHPUnit_Framework_TestCase&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>    public function setUp()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        \Handlebars\Autoloader::register();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test handlebars autoloader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testAutoLoad()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        Handlebars\Autoloader::register(realpath(__DIR__ . '/../fixture/'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('Handlebars\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('\\Handlebars\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('Handlebars\\Example\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(class_exists('\\Handlebars\\Example\\Test'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(class_exists('\\Another\\Example\\Test'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test basic tags&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $src    handlebars source&nbsp;</div></li><li><div>     * @param array  $data   data&nbsp;</div></li><li><div>     * @param string $result expected data&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider simpleTagdataProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testBasicTags($src, $data, $result)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($result, $engine-&gt;render($src, $data));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Simple tag provider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function simpleTagdataProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{! This is comment}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'result'), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.key}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '4'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; (object)array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.length}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(&quot;length&quot; =&gt; &quot;15 inches&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;)), &nbsp;</div></li><li><div>                &quot;15 inches&quot;&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.0}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.property.3}}', &nbsp;</div></li><li><div>                array(&quot;data&quot; =&gt; array(&quot;property&quot; =&gt; array(1, 2, 3, 4))), &nbsp;</div></li><li><div>                '4'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{data.unsafe}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('unsafe' =&gt; '&lt;strong&gt;Test&lt;/strong&gt;')), &nbsp;</div></li><li><div>                '&lt;strong&gt;Test&lt;/strong&gt;'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{{data.safe}}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('safe' =&gt; '&lt;strong&gt;Test&lt;/strong&gt;')), &nbsp;</div></li><li><div>                '&lt;strong&gt;Test&lt;/strong&gt;'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                &quot;\{{data}}&quot;, // is equal to \\{{data}}&nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '{{data}}', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\\{{data}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '\\\\foo'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\{{data}}', // is equal to \\\\{{data}} in php&nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '\\\\foo'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\{{{data}}}', &nbsp;</div></li><li><div>                array('data' =&gt; 'foo'), &nbsp;</div></li><li><div>                '{{{data}}}'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\pi', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                '\pi'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '\\\\\\\\qux', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                '\\\\\\\\qux'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                &quot;var jsVar = 'It\'s a phrase in apos';&quot;, &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                &quot;var jsVar = 'It\'s a phrase in apos';&quot;&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'var jsVar = &quot;A \&quot;quoted\&quot; text&quot;;', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'var jsVar = &quot;A \&quot;quoted\&quot; text&quot;;', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if first}}The first{{else}}{{#if second}}The second{{/if}}{{/if}}', &nbsp;</div></li><li><div>                array('first' =&gt; false, 'second' =&gt; true), &nbsp;</div></li><li><div>                'The second'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test helpers (internal helpers)&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $src    handlebars source&nbsp;</div></li><li><div>     * @param array  $data   data&nbsp;</div></li><li><div>     * @param string $result expected data&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider internalHelpersdataProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testSimpleHelpers($src, $data, $result)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader, 'helpers' =&gt; $helpers));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals($result, $engine-&gt;render($src, $data));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Simple helpers provider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function internalHelpersdataProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}Yes{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                'Yes'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            # see the issue #76&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}0{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                '0'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if data}}Yes{{/if}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#with data}}{{key}}{{/with}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('the_only_key' =&gt; 1)), &nbsp;</div></li><li><div>                'the_only_key'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}=&gt;{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key1' =&gt; 1, 'key2' =&gt; 2, )), &nbsp;</div></li><li><div>                'key1=&gt;1key2=&gt;2'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@key}}=&gt;{{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; new \ArrayIterator(array('key1' =&gt; 1, 'key2' =&gt; 2))), &nbsp;</div></li><li><div>                'key1=&gt;1key2=&gt;2'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{@index}}=&gt;{{this}}, {{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key1' =&gt; 1, 'key2' =&gt; 2, )), &nbsp;</div></li><li><div>                '0=&gt;1, 1=&gt;2, '&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @first}}the first is {{this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the first is one'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @last}}the last is {{this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the last is three'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}{{else}}fail{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}fail{{else}}ok{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                ''&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}ok{{else}}fail{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; false), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#unless data}}fail{{else}}ok{{/unless}}', &nbsp;</div></li><li><div>                array('data' =&gt; true), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#bindAttr data}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'data'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if 1}}ok{{else}}fail{{/if}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'ok'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#if 0}}ok{{else}}fail{{/if}}', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'fail'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '  {{~#if 1}}OK   {{~else~}} NO {{~/if~}}  END', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'OKEND'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'XX {{~#bindAttr data}} XX', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'XXdata XX'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{#if @last}}the last is&nbsp;</div></li><li><div>                {{~this}}{{/if}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('one', 'two', 'three')), &nbsp;</div></li><li><div>                'the last isthree'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#with data}}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                {{~key~}}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                {{/with}}', &nbsp;</div></li><li><div>                array('data' =&gt; array('key' =&gt; 'result')), &nbsp;</div></li><li><div>                'result'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{= (( )) =}}((#if 1))OK((else))NO((/if))', &nbsp;</div></li><li><div>                array(), &nbsp;</div></li><li><div>                'OK'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data~}}    {{this}}    {{~/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data}}{{this}}    {{~/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                '{{#each data~}}    {{this}}{{/each}}', &nbsp;</div></li><li><div>                array('data' =&gt; array(1, 2, 3, 4)), &nbsp;</div></li><li><div>                '1234'&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>            array('{{#if first}}The first{{else}}{{#if second}}The second{{/if}}{{/if}}', &nbsp;</div></li><li><div>                array('first' =&gt; false, 'second' =&gt; true), &nbsp;</div></li><li><div>                'The second'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Management helpers&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelpersManagement()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers(array('test' =&gt; function () {&nbsp;</div></li><li><div>        }), false);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('helpers' =&gt; $helpers));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(is_callable($engine-&gt;getHelper('test')));&nbsp;</div></li><li><div>        $this-&gt;assertTrue($engine-&gt;hasHelper('test'));&nbsp;</div></li><li><div>        $engine-&gt;removeHelper('test');&nbsp;</div></li><li><div>        $this-&gt;assertFalse($engine-&gt;hasHelper('test'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Custom helper test&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCustomHelper()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function () {&nbsp;</div></li><li><div>            return 'Test helper is called';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{#test}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{test}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test2', function ($template, $context, $arg) {&nbsp;</div></li><li><div>            return 'Test helper is called with ' . $arg;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called with a b c', $engine-&gt;render('{{#test2 a b c}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called with a b c', $engine-&gt;render('{{test2 a b c}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('renderme', function () {&nbsp;</div></li><li><div>            return new \Handlebars\String(&quot;{{test}}&quot;);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test helper is called', $engine-&gt;render('{{#renderme}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('dontrenderme', function () {&nbsp;</div></li><li><div>            return &quot;{{test}}&quot;;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('{{test}}', $engine-&gt;render('{{#dontrenderme}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('markupHelper', function () {&nbsp;</div></li><li><div>            return '&lt;strong&gt;Test&lt;/strong&gt;';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{{markupHelper}}}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{markupHelper}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('safeStringTest', function () {&nbsp;</div></li><li><div>            return new \Handlebars\SafeString('&lt;strong&gt;Test&lt;/strong&gt;');&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals('&lt;strong&gt;Test&lt;/strong&gt;', $engine-&gt;render('{{safeStringTest}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('argsTest', function ($template, $context, $arg) {&nbsp;</div></li><li><div>            $parsedArgs = $template-&gt;parseArguments($arg);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(' ', $parsedArgs);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;a \&quot;b\&quot; c&quot;, $engine-&gt;render('{{{argsTest &quot;a&quot; &quot;\&quot;b\&quot;&quot; \'c\'}}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // This is just a fun thing to do :)&nbsp;</div></li><li><div>        $that = $this;&nbsp;</div></li><li><div>        $engine-&gt;addHelper('stopToken', &nbsp;</div></li><li><div>            function ($template, $context, $arg) use ($that) {&nbsp;</div></li><li><div>                /** @var $template \Handlebars\Template */&nbsp;</div></li><li><div>                $parsedArgs = $template-&gt;parseArguments($arg);&nbsp;</div></li><li><div>                $first = array_shift($parsedArgs);&nbsp;</div></li><li><div>                $last = array_shift($parsedArgs);&nbsp;</div></li><li><div>                if ($last == 'yes') {&nbsp;</div></li><li><div>                    $template-&gt;setStopToken($first);&nbsp;</div></li><li><div>                    $that-&gt;assertEquals($first, $template-&gt;getStopToken());&nbsp;</div></li><li><div>                    $buffer = $template-&gt;render($context);&nbsp;</div></li><li><div>                    $template-&gt;setStopToken(false);&nbsp;</div></li><li><div>                    $template-&gt;discard($context);&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    $template-&gt;setStopToken($first);&nbsp;</div></li><li><div>                    $that-&gt;assertEquals($first, $template-&gt;getStopToken());&nbsp;</div></li><li><div>                    $template-&gt;discard($context);&nbsp;</div></li><li><div>                    $template-&gt;setStopToken(false);&nbsp;</div></li><li><div>                    $buffer = $template-&gt;render($context);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                return $buffer;&nbsp;</div></li><li><div>            });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;Used&quot;, $engine-&gt;render('{{# stopToken fun no}}Not used{{ fun }}Used{{/stopToken }}', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;Not used&quot;, $engine-&gt;render('{{# stopToken any yes}}Not used{{ any }}Used{{/stopToken }}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('InvalidArgumentException');&nbsp;</div></li><li><div>        $engine-&gt;getHelpers()-&gt;call('invalid', $engine-&gt;loadTemplate(''), new \Handlebars\Context(), '', '');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidHelperMustacheStyle()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#NOTVALID}}XXX{{/NOTVALID}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidHelper()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#NOTVALID argument}}XXX{{/NOTVALID}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test mustache style loop and if&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testMustacheStyle()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('yes', $engine-&gt;render('{{#x}}yes{{/x}}', array('x' =&gt; true)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('', $engine-&gt;render('{{#x}}yes{{/x}}', array('x' =&gt; false)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('yes', $engine-&gt;render('{{^x}}yes{{/x}}', array('x' =&gt; false)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('', $engine-&gt;render('{{^x}}yes{{/x}}', array('x' =&gt; true)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1234', $engine-&gt;render('{{#x}}{{this}}{{/x}}', array('x' =&gt; array(1, 2, 3, 4))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('012', $engine-&gt;render('{{#x}}{{@index}}{{/x}}', array('x' =&gt; array('a', 'b', 'c'))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('abc', $engine-&gt;render('{{#x}}{{@key}}{{/x}}', array('x' =&gt; array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('the_only_key', $engine-&gt;render('{{#x}}{{@key}}{{/x}}', array('x' =&gt; array('the_only_key' =&gt; 1))));&nbsp;</div></li><li><div>        $std = new stdClass();&nbsp;</div></li><li><div>        $std-&gt;value = 1;&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $engine-&gt;render('{{#x}}{{value}}{{/x}}', array('x' =&gt; $std)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $engine-&gt;render('{{{x}}}', array('x' =&gt; 1)));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \LogicException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testParserException()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;render('{{#test}}{{#test2}}{{/test}}{{/test2}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test add/addHelpers/get/getAll/has/clear functions on helper class&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelpersClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helpers = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $helpers-&gt;add('test', function () {&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;has('test'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(isset($helpers-&gt;test));&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>        $helpers-&gt;test2 = function () {&nbsp;</div></li><li><div>        };&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;has('test2'));&nbsp;</div></li><li><div>        $this-&gt;assertTrue(isset($helpers-&gt;test2));&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>        unset($helpers-&gt;test2);&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;has('test2'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(isset($helpers-&gt;test2));&nbsp;</div></li><li><div>        $helpers-&gt;clear();&nbsp;</div></li><li><div>        $this-&gt;assertFalse($helpers-&gt;has('test'));&nbsp;</div></li><li><div>        $this-&gt;assertFalse(isset($helpers-&gt;test));&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;isEmpty());&nbsp;</div></li><li><div>        $helpers-&gt;add('test', function () {&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $this-&gt;assertCount(0, array_diff(array_keys($helpers-&gt;getAll()), array('test')));&nbsp;</div></li><li><div>        $extraHelpers = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $extraHelpers-&gt;add('test', function () {&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $extraHelpers-&gt;add('test2', function () {&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $helpers-&gt;addHelpers($extraHelpers);&nbsp;</div></li><li><div>        $this-&gt;assertTrue($helpers-&gt;has('test2'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($helpers-&gt;test, $extraHelpers-&gt;test);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongConstructor()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers(&quot;helper&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongCallable()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $helper-&gt;add('test', 1);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongGet()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        $x = $helper-&gt;test;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperWrongUnset()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $helper = new \Handlebars\Helpers();&nbsp;</div></li><li><div>        unset($helper-&gt;test);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * test String class&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testStringClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $string = new \Handlebars\String('test');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $string-&gt;getString());&nbsp;</div></li><li><div>        $string-&gt;setString('new');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new', $string-&gt;getString());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @param $dir&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return bool&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    private function delTree($dir)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $files = array_diff(scandir($dir), array('.', '..'));&nbsp;</div></li><li><div>        foreach ($files as $file) {&nbsp;</div></li><li><div>            (is_dir(&quot;$dir/$file&quot;)) ? $this-&gt;delTree(&quot;$dir/$file&quot;) : unlink(&quot;$dir/$file&quot;);&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return rmdir($dir);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Its not a good test :) but ok&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCacheSystem()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $path = sys_get_temp_dir() . '/__cache__handlebars';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        @$this-&gt;delTree($path);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $dummy = new \Handlebars\Cache\Disk($path);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('cache' =&gt; $dummy));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(0, count(glob($path . '/*')));&nbsp;</div></li><li><div>        $engine-&gt;render('test', array());&nbsp;</div></li><li><div>        $this-&gt;assertEquals(1, count(glob($path . '/*')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    public function testArrayLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\ArrayLoader(array('test' =&gt; 'HELLO'));&nbsp;</div></li><li><div>        $loader-&gt;addTemplate('another', 'GOODBYE');&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($engine-&gt;render('test', array()), 'HELLO');&nbsp;</div></li><li><div>        $this-&gt;assertEquals($engine-&gt;render('another', array()), 'GOODBYE');&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $engine-&gt;render('invalid-template', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('loader', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test inline loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testInlineLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\InlineLoader(__FILE__, __COMPILER_HALT_OFFSET__);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('This is a inline template.', $loader-&gt;load('template1'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $expected = &lt;&lt;&lt;EOM&nbsp;</div></li><li><div>a&nbsp;</div></li><li><div>b&nbsp;</div></li><li><div>c&nbsp;</div></li><li><div>d&nbsp;</div></li><li><div>EOM;&nbsp;</div></li><li><div>        $this-&gt;assertEquals($expected, $loader-&gt;load('template2'));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderMultipleFolder()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $paths = array(&nbsp;</div></li><li><div>            realpath(__DIR__ . '/../fixture/data'), &nbsp;</div></li><li><div>            realpath(__DIR__ . '/../fixture/another')&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = array(&nbsp;</div></li><li><div>            'prefix' =&gt; '__', &nbsp;</div></li><li><div>            'extension' =&gt; 'hb'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader($paths, $options);&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test_extra', $engine-&gt;render('loader', array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('another_extra', $engine-&gt;render('another', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderNotFound()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $engine-&gt;render('invalid_file', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test file system loader&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @expectedException \RuntimeException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testFileSystemLoaderInvalidFolder()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/') . 'invalid/path');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test partial loader&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testPartialLoader()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $partialLoader = new \Handlebars\Loader\FilesystemLoader(realpath(__DIR__ . '/../fixture/data'));&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>        $engine-&gt;setPartialsLoader($partialLoader);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('{{&gt;loader}}', array()));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testPartial()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $partialLoader = new \Handlebars\Loader\ArrayLoader(array('test' =&gt; '{{key}}', 'bar' =&gt; 'its foo'));&nbsp;</div></li><li><div>        $partialAliasses = array('foo' =&gt; 'bar');&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'loader' =&gt; $loader, &nbsp;</div></li><li><div>                'partials_loader' =&gt; $partialLoader, &nbsp;</div></li><li><div>                'partials_alias' =&gt; $partialAliasses&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('HELLO', $engine-&gt;render('{{&gt;test parameter}}', array('parameter' =&gt; array('key' =&gt; 'HELLO'))));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('its foo', $engine-&gt;render('{{&gt;foo}}', array()));&nbsp;</div></li><li><div>        $engine-&gt;registerPartial('foo-again', 'bar');&nbsp;</div></li><li><div>        $this-&gt;assertEquals('its foo', $engine-&gt;render('{{&gt;foo-again}}', array()));&nbsp;</div></li><li><div>        $engine-&gt;unRegisterPartial('foo-again');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;setExpectedException('RuntimeException');&nbsp;</div></li><li><div>        $engine-&gt;render('{{&gt;foo-again}}', array());&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * test variable access&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testVariableAccess()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = \Handlebars\Handlebars::factory();&nbsp;</div></li><li><div>        $engine-&gt;setLoader($loader);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $var = new \StdClass();&nbsp;</div></li><li><div>        $var-&gt;x = 'var-x';&nbsp;</div></li><li><div>        $var-&gt;y = array(&nbsp;</div></li><li><div>            'z' =&gt; 'var-y-z'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $this-&gt;assertEquals('test', $engine-&gt;render('{{var}}', array('var' =&gt; 'test')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-x', $engine-&gt;render('{{var.x}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-y-z', $engine-&gt;render('{{var.y.z}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        // Access parent context in with helper&nbsp;</div></li><li><div>        $this-&gt;assertEquals('var-x', $engine-&gt;render('{{#with var.y}}{{../var.x}}{{/with}}', array('var' =&gt; $var)));&nbsp;</div></li><li><div>        // Reference array as string&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Array', $engine-&gt;render('{{var}}', array('var' =&gt; array('test'))));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $obj = new DateTime();&nbsp;</div></li><li><div>        $time = $obj-&gt;getTimestamp();&nbsp;</div></li><li><div>        $this-&gt;assertEquals($time, $engine-&gt;render('{{time.getTimestamp}}', array('time' =&gt; $obj)));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testContext()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $test = new stdClass();&nbsp;</div></li><li><div>        $test-&gt;value = 'value';&nbsp;</div></li><li><div>        $test-&gt;array = array(&nbsp;</div></li><li><div>            'a' =&gt; '1', &nbsp;</div></li><li><div>            'b' =&gt; '2', &nbsp;</div></li><li><div>            '!&quot;#%&\'()*+, ./;&lt;=&gt;@[\\^`{|}~ ' =&gt; '3', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $context = new \Handlebars\Context($test);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('[value]', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('1', $context-&gt;get('array.a', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('2', $context-&gt;get('array.b', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('3', $context-&gt;get('array.[!&quot;#%&\'()*+, ./;&lt;=&gt;@[\\^`{|}~ ]', true));&nbsp;</div></li><li><div>        $new = array('value' =&gt; 'new value');&nbsp;</div></li><li><div>        $context-&gt;push($new);&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('new value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('../value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('../value', true));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;last());&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('.'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('this'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($new, $context-&gt;get('this.'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals($test, $context-&gt;get('../.'));&nbsp;</div></li><li><div>        $context-&gt;pop();&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value'));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('value', $context-&gt;get('value', true));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     * @dataProvider getInvalidData&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testInvalidAccessContext($invalid)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $context = new \Handlebars\Context(array());&nbsp;</div></li><li><div>        $this-&gt;assertEmpty($context-&gt;get($invalid));&nbsp;</div></li><li><div>        $context-&gt;get($invalid, true);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function getInvalidData()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('../../data'), &nbsp;</div></li><li><div>            array('data'), &nbsp;</div></li><li><div>            array(''), &nbsp;</div></li><li><div>            array('data.key.key'), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test invalid custom template class&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @expectedException \InvalidArgumentException&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testInvalidCustomTemplateClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array(&nbsp;</div></li><li><div>            'loader' =&gt; $loader, &nbsp;</div></li><li><div>            'template_class' =&gt; 'stdclass'&nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test custom template class&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testValidCustomTemplateClass()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        Handlebars\Autoloader::register(realpath(__DIR__ . '/../fixture/'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array(&nbsp;</div></li><li><div>            'loader' =&gt; $loader, &nbsp;</div></li><li><div>            'template_class' =&gt; 'Handlebars\CustomTemplate'&nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $render = $engine-&gt;render('Original Template', array());&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals($render, 'Altered Template');&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test for proper handling of the length property&nbsp;</div></li><li><div>     **/&nbsp;</div></li><li><div>    public function testArrayLengthEmulation()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $data = array(&quot;numbers&quot; =&gt; array(1, 2, 3, 4), &nbsp;</div></li><li><div>            &quot;object&quot; =&gt; (object)array(&quot;prop1&quot; =&gt; &quot;val1&quot;, &quot;prop2&quot; =&gt; &quot;val2&quot;), &nbsp;</div></li><li><div>            &quot;object_with_length_property&quot; =&gt; (object)array(&quot;length&quot; =&gt; &quot;15cm&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $context = new \Handlebars\Context($data);&nbsp;</div></li><li><div>        // make sure we are getting the array length when given an array&nbsp;</div></li><li><div>        $this-&gt;assertEquals($context-&gt;get(&quot;numbers.length&quot;), 4);&nbsp;</div></li><li><div>        // make sure we are not getting a length when given an object&nbsp;</div></li><li><div>        $this-&gt;assertEmpty($context-&gt;get(&quot;object.length&quot;));&nbsp;</div></li><li><div>        // make sure we can still get the length property when given an object&nbsp;</div></li><li><div>        $this-&gt;assertEquals($context-&gt;get(&quot;object_with_length_property.length&quot;), &quot;15cm&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function argumentParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('arg1 arg2', array(&quot;arg1&quot;, &quot;arg2&quot;)), &nbsp;</div></li><li><div>            array('&quot;arg1 arg2&quot;', array(&quot;arg1 arg2&quot;)), &nbsp;</div></li><li><div>            array('arg1 arg2 &quot;arg number 3&quot;', array(&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg number 3&quot;)), &nbsp;</div></li><li><div>            array('arg1 &quot;arg\&quot;2&quot; &quot;\&quot;arg3\&quot;&quot;', array(&quot;arg1&quot;, 'arg&quot;2', '&quot;arg3&quot;')), &nbsp;</div></li><li><div>            array(&quot;'arg1 arg2'&quot;, array(&quot;arg1 arg2&quot;)), &nbsp;</div></li><li><div>            array(&quot;arg1 arg2 'arg number 3'&quot;, array(&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg number 3&quot;)), &nbsp;</div></li><li><div>            array('arg1 &quot;arg\&quot;2&quot; &quot;\\\'arg3\\\'&quot;', array(&quot;arg1&quot;, 'arg&quot;2', &quot;'arg3'&quot;)), &nbsp;</div></li><li><div>            array('arg1 arg2.[value\'s &quot;segment&quot;].val', array(&quot;arg1&quot;, 'arg2.[value\'s &quot;segment&quot;].val')), &nbsp;</div></li><li><div>            array('&quot;arg1.[value 1]&quot; arg2', array(&quot;arg1.[value 1]&quot;, 'arg2')), &nbsp;</div></li><li><div>            array('0', array('0')), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Argument Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $expected_array&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider argumentParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testArgumentParser($arg_string, $expected_array)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $template = new \Handlebars\Template($engine, null, null);&nbsp;</div></li><li><div>        // get the string version of the arguments array&nbsp;</div></li><li><div>        $args = $template-&gt;parseArguments($arg_string);&nbsp;</div></li><li><div>        $args = array_map(function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        }, $args);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($args, $expected_array);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function namedArgumentParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('arg1=&quot;value&quot; arg2=&quot;value 2&quot;', array('arg1' =&gt; 'value', 'arg2' =&gt; 'value 2')), &nbsp;</div></li><li><div>            array('arg1=var1', array('arg1' =&gt; 'var1')), &nbsp;</div></li><li><div>            array('[arg &quot;1&quot;]=&quot;arg number 1&quot;', array('arg &quot;1&quot;' =&gt; &quot;arg number 1&quot;)), &nbsp;</div></li><li><div>            array('arg1 =   &quot;value&quot;', array('arg1' =&gt; &quot;value&quot;)), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Named Argument Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $expected_array&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider namedArgumentParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testNamedArgumentsParser($arg_string, $expected_array)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $template = new \Handlebars\Template($engine, null, null);&nbsp;</div></li><li><div>        // get the string version of the arguments array&nbsp;</div></li><li><div>        $args = $template-&gt;parseNamedArguments($arg_string);&nbsp;</div></li><li><div>        $args = array_map(function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        }, $args);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($args, $expected_array);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test Combined Arguments Parser&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $arg_string argument text&nbsp;</div></li><li><div>     * @param        $positional_args&nbsp;</div></li><li><div>     * @param        $named_args&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider combinedArgumentsParserProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testCombinedArgumentsParser($arg_string, $positional_args, $named_args)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $args = new \Handlebars\Arguments($arg_string);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get the string version of the arguments array&nbsp;</div></li><li><div>        $stringify = function ($a) {&nbsp;</div></li><li><div>            return (string)$a;&nbsp;</div></li><li><div>        };&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ($positional_args !== false) {&nbsp;</div></li><li><div>            $this-&gt;assertEquals(&nbsp;</div></li><li><div>                array_map($stringify, $args-&gt;getPositionalArguments()), &nbsp;</div></li><li><div>                $positional_args&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ($named_args !== false) {&nbsp;</div></li><li><div>            $this-&gt;assertEquals(&nbsp;</div></li><li><div>                array_map($stringify, $args-&gt;getNamedArguments()), &nbsp;</div></li><li><div>                $named_args&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function combinedArgumentsParserProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $result = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Use data provider for positional arguments parser&nbsp;</div></li><li><div>        foreach ($this-&gt;argumentParserProvider() as $dataSet) {&nbsp;</div></li><li><div>            $result[] = array(&nbsp;</div></li><li><div>                $dataSet[0], &nbsp;</div></li><li><div>                $dataSet[1], &nbsp;</div></li><li><div>                false, &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Use data provider for named arguments parser&nbsp;</div></li><li><div>        foreach ($this-&gt;namedArgumentParserProvider() as $dataSet) {&nbsp;</div></li><li><div>            $result[] = array(&nbsp;</div></li><li><div>                $dataSet[0], &nbsp;</div></li><li><div>                false, &nbsp;</div></li><li><div>                $dataSet[1], &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add test cases with combined arguments&nbsp;</div></li><li><div>        return array_merge(&nbsp;</div></li><li><div>            $result, &nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'arg1 arg2 arg3=value1 arg4=&quot;value2&quot;', &nbsp;</div></li><li><div>                    array('arg1', 'arg2'), &nbsp;</div></li><li><div>                    array('arg3' =&gt; 'value1', 'arg4' =&gt; 'value2')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    '@first arg=@last', &nbsp;</div></li><li><div>                    array('@first'), &nbsp;</div></li><li><div>                    array('arg' =&gt; '@last')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    '[seg arg1] [seg arg2] = [seg value &quot;1&quot;]', &nbsp;</div></li><li><div>                    array('[seg arg1]'), &nbsp;</div></li><li><div>                    array('seg arg2' =&gt; '[seg value &quot;1&quot;]')&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function stringLiteralInCustomHelperProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('{{#test2 arg1 &quot;Argument 2&quot;}}', array(&quot;arg1&quot; =&gt; &quot;Argument 1&quot;), &quot;Argument 1:Argument 2&quot;), &nbsp;</div></li><li><div>            array('{{#test2 &quot;Argument 1&quot; &quot;Argument 2&quot;}}', array(&quot;arg1&quot; =&gt; &quot;Argument 1&quot;), &quot;Argument 1:Argument 2&quot;), &nbsp;</div></li><li><div>            array('{{#test2 &quot;Argument 1&quot; arg2}}', array(&quot;arg2&quot; =&gt; &quot;Argument 2&quot;), &quot;Argument 1:Argument 2&quot;)&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test String literals in the context of a helper&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $template template text&nbsp;</div></li><li><div>     * @param array  $data     context data&nbsp;</div></li><li><div>     * @param string $results  The Expected Results&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider stringLiteralInCustomHelperProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testStringLiteralInCustomHelper($template, $data, $results)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test2', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $args = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $args = array_map(function ($a) use ($context) {&nbsp;</div></li><li><div>                return $context-&gt;get($a);&nbsp;</div></li><li><div>            }, $args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(':', $args);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $res = $engine-&gt;render($template, $data);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($res, $results);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function integerLiteralInCustomHelperProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            array('{{test -5}}', array(), '-5'), &nbsp;</div></li><li><div>            array('{{test 0}}', array(), '0'), &nbsp;</div></li><li><div>            array('{{test 12}}', array(), '12'), &nbsp;</div></li><li><div>            array('{{test 12 [12]}}', array('12' =&gt; 'foo'), '12:foo'), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test integer literals in the context of a helper&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $template template text&nbsp;</div></li><li><div>     * @param array  $data     context data&nbsp;</div></li><li><div>     * @param string $results  The Expected Results&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider integerLiteralInCustomHelperProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testIntegerLiteralInCustomHelper($template, $data, $results)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $args = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $args = array_map(function ($a) use ($context) {&nbsp;</div></li><li><div>                return $context-&gt;get($a);&nbsp;</div></li><li><div>            }, $args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return implode(':', $args);&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>        $res = $engine-&gt;render($template, $data);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($res, $results);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testString()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $string = new \Handlebars\String(&quot;Hello World&quot;);&nbsp;</div></li><li><div>        $this-&gt;assertEquals((string)$string, &quot;Hello World&quot;);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function testInvalidNames()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(&nbsp;</div></li><li><div>            array(&nbsp;</div></li><li><div>                'loader' =&gt; $loader, &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        $all = \Handlebars\Context::NOT_VALID_NAME_CHARS;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        for ($i = 0; $i &lt; strlen($all); $i++) {&nbsp;</div></li><li><div>            // Dot in string is valid, its an exception here&nbsp;</div></li><li><div>            if ($all{$i} === '.') {&nbsp;</div></li><li><div>                continue;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            try {&nbsp;</div></li><li><div>                $name = 'var' . $all{$i} . 'var';&nbsp;</div></li><li><div>                $engine-&gt;render('{{' . $name . '}}', array($name =&gt; 'VALUE'));&nbsp;</div></li><li><div>                throw new Exception(&quot;Accept the $name :/&quot;);&nbsp;</div></li><li><div>            } catch (Exception $e) {&nbsp;</div></li><li><div>                $this-&gt;assertInstanceOf(&quot;InvalidArgumentException&quot;, $e);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Helper subexpressions test&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testHelperSubexpressions()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>        $engine-&gt;addHelper('test', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $parsedArgs = $template-&gt;parseArguments($args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return (count($parsedArgs) ? $context-&gt;get($parsedArgs[0]) : '') . 'Test.';&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that nested syntax is accepted and sub-helper is run&nbsp;</div></li><li><div>        $this-&gt;assertEquals('Test.Test.', $engine-&gt;render('{{test (test)}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('add', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $sum = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($template-&gt;parseArguments($args) as $value) {&nbsp;</div></li><li><div>                $sum += intval($context-&gt;get($value));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $sum;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that subexpression result is inserted correctly as argument to top level helper&nbsp;</div></li><li><div>        $this-&gt;assertEquals('42', $engine-&gt;render('{{add 21 (add 10 (add 5 6))}}', array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assert that bracketed expressions within string literals are treated correctly&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;(test)Test.&quot;, $engine-&gt;render(&quot;{{test '(test)'}}&quot;, array()));&nbsp;</div></li><li><div>        $this-&gt;assertEquals(&quot;)Test.Test.&quot;, $engine-&gt;render(&quot;{{test (test ')')}}&quot;, array()));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('concat', function (\Handlebars\Template $template, \Handlebars\Context $context, $args) {&nbsp;</div></li><li><div>            $result = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($template-&gt;parseArguments($args) as $arg) {&nbsp;</div></li><li><div>                $result .= $context-&gt;get($arg);&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $result;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('ACB', $engine-&gt;render('{{concat a (concat c b)}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('ACB', $engine-&gt;render('{{concat (concat a c) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('A-B', $engine-&gt;render('{{concat (concat a &quot;-&quot;) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('A-B', $engine-&gt;render('{{concat (concat a &quot;-&quot;) b}}', array('a' =&gt; 'A', 'b' =&gt; 'B', 'A-' =&gt; '!')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test if and unless adding an extra layer when accessing parent&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testIfUnlessExtraLayer()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $loader = new \Handlebars\Loader\StringLoader();&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars(array('loader' =&gt; $loader));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;assertEquals('good', $engine-&gt;render('{{#with b}}{{#if this}}{{../../a}}{{/if}}{{/with}}', array('a' =&gt; 'good', 'b' =&gt; 'stump')));&nbsp;</div></li><li><div>        $this-&gt;assertEquals('good', $engine-&gt;render('{{#with b}}{{#unless false}}{{../../a}}{{/unless}}{{/with}}', array('a' =&gt; 'good', 'b' =&gt; 'stump')));&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test of Arguments to string conversion.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testArgumentsString()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $argsString = 'foo bar [foo bar] baz=&quot;value&quot;';&nbsp;</div></li><li><div>        $args = new \Handlebars\Arguments($argsString);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($argsString, (string)$args);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public function stringLiteralsInIfAndUnlessHelpersProvider()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            // IfHelper&nbsp;</div></li><li><div>            array('{{#if &quot;truthyString&quot;}}true{{else}}false{{/if}}', array(), &quot;true&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#if 'truthyStringSingleQuotes'}}true{{else}}false{{/if}}&quot;, array(), &quot;true&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#if ''}}true{{else}}false{{/if}}&quot;, array(), &quot;false&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#if '0'}}true{{else}}false{{/if}}&quot;, array(), &quot;false&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#if (add 0 1)}}true{{else}}false{{/if}}&quot;, array(), &quot;true&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#if (add 1 -1)}}true{{else}}false{{/if}}&quot;, array(), &quot;false&quot;), &nbsp;</div></li><li><div>            // UnlessHelper&nbsp;</div></li><li><div>            array('{{#unless &quot;truthyString&quot;}}true{{else}}false{{/unless}}', array(), &quot;false&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#unless 'truthyStringSingleQuotes'}}true{{else}}false{{/unless}}&quot;, array(), &quot;false&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#unless ''}}true{{else}}false{{/unless}}&quot;, array(), &quot;true&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#unless '0'}}true{{else}}false{{/unless}}&quot;, array(), &quot;true&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#unless (add 0 1)}}true{{else}}false{{/unless}}&quot;, array(), &quot;false&quot;), &nbsp;</div></li><li><div>            array(&quot;{{#unless (add 1 -1)}}true{{else}}false{{/unless}}&quot;, array(), &quot;true&quot;), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Test string literals in the context of if and unless helpers&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $template template text&nbsp;</div></li><li><div>     * @param array  $data     context data&nbsp;</div></li><li><div>     * @param string $results  The Expected Results&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @dataProvider stringLiteralsInIfAndUnlessHelpersProvider&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public function testStringLiteralsInIfAndUnlessHelpers($template, $data, $results)&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $engine = new \Handlebars\Handlebars();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $engine-&gt;addHelper('add', function ($template, $context, $args) {&nbsp;</div></li><li><div>            $sum = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($template-&gt;parseArguments($args) as $value) {&nbsp;</div></li><li><div>                $sum += intval($context-&gt;get($value));&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            return $sum;&nbsp;</div></li><li><div>        });&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $res = $engine-&gt;render($template, $data);&nbsp;</div></li><li><div>        $this-&gt;assertEquals($res, $results);&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 0.3.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/metaplate/1.0.0/classes/handlebars_test/" class="active">1.0.0</a></li><li><a href="http://hookr.io/plugins/metaplate/0.4.2/classes/handlebars_test/" class="">0.4.2</a></li><li><a href="http://hookr.io/plugins/metaplate/0.4.1/classes/handlebars_test/" class="">0.4.1</a></li><li><a href="http://hookr.io/plugins/metaplate/0.4.0/classes/handlebars_test/" class="">0.4.0</a></li><li><a href="http://hookr.io/plugins/metaplate/0.3.1/classes/handlebars_test/" class="">0.3.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Handlebars\Test</li><li><span></span>Metaplate</li><li><span></span>1.0.0</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>