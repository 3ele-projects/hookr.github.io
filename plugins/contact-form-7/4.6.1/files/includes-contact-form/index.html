<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="4.6.1" data-slug="contact-form-7" data-type="file" data-id="15156"><head xmlns="http://www.w3.org/1999/xhtml"><title> includes-contact-form | file | Contact Form 7 | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, contact-form-7, 4.6.1" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.18"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=a777d81bb5749a7844770c885ccb06d2' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.18' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/includes-contact-form/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-contact-form%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Fincludes-contact-form%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-contact-form-7-4.6.1-file-includes-contact-form","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="includes-contact-form" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to contact-form-7." href="http://hookr.io/plugins/contact-form-7/" class="plugin"><span property="name">contact-form-7</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 4.6.1." href="http://hookr.io/plugins/contact-form-7/4.6.1/" class="H_VERSION"><span property="name">4.6.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/contact-form-7/4.6.1/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">includes-contact-form</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="345"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/all/" title="All">All <span class="count badge">345</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="78"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/hooks/" title="Hooks">Hooks <span class="count badge">78</span></a></li><li class="" data-id="action" data-count="24"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/actions/" title="Actions">Actions <span class="count badge">24</span></a></li><li class="" data-id="filter" data-count="54"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/filters/" title="Filters">Filters <span class="count badge">54</span></a></li><li class="" data-id="class" data-count="21"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/classes/" title="Classes">Classes <span class="count badge">21</span></a></li><li class="" data-id="constant" data-count="17"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/constants/" title="Constants">Constants <span class="count badge">17</span></a></li><li class="" data-id="function" data-count="227"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/functions/" title="Functions">Functions <span class="count badge">227</span></a></li><li class="" data-id="shortcode" data-count="2"><a href="http://hookr.io/plugins/contact-form-7/4.6.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">2</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/includes/contact-form.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>class WPCF7_ContactForm {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  const post_type = 'wpcf7_contact_form';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private static $found_items = 0;&nbsp;</div></li><li><div>  private static $current = null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private $id;&nbsp;</div></li><li><div>  private $name;&nbsp;</div></li><li><div>  private $title;&nbsp;</div></li><li><div>  private $properties = array();&nbsp;</div></li><li><div>  private $unit_tag;&nbsp;</div></li><li><div>  private $responses_count = 0;&nbsp;</div></li><li><div>  private $scanned_form_tags;&nbsp;</div></li><li><div>  private $shortcode_atts = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function count() {&nbsp;</div></li><li><div>      return self::$found_items;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function get_current() {&nbsp;</div></li><li><div>      return self::$current;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function register_post_type() {&nbsp;</div></li><li><div>      register_post_type( self::post_type, array(&nbsp;</div></li><li><div>          'labels' =&gt; array(&nbsp;</div></li><li><div>              'name' =&gt; __( 'Contact Forms', 'contact-form-7' ), &nbsp;</div></li><li><div>              'singular_name' =&gt; __( 'Contact Form', 'contact-form-7' ) ), &nbsp;</div></li><li><div>          'rewrite' =&gt; false, &nbsp;</div></li><li><div>          'query_var' =&gt; false ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function find( $args = '' ) {&nbsp;</div></li><li><div>      $defaults = array(&nbsp;</div></li><li><div>          'post_status' =&gt; 'any', &nbsp;</div></li><li><div>          'posts_per_page' =&gt; -1, &nbsp;</div></li><li><div>          'offset' =&gt; 0, &nbsp;</div></li><li><div>          'orderby' =&gt; 'ID', &nbsp;</div></li><li><div>          'order' =&gt; 'ASC' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $args['post_type'] = self::post_type;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $q = new WP_Query();&nbsp;</div></li><li><div>      $posts = $q-&gt;query( $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      self::$found_items = $q-&gt;found_posts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $objs = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( (array) $posts as $post )&nbsp;</div></li><li><div>          $objs[] = new self( $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $objs;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function get_template( $args = '' ) {&nbsp;</div></li><li><div>      global $l10n;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $defaults = array( 'locale' =&gt; null, 'title' =&gt; '' );&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $locale = $args['locale'];&nbsp;</div></li><li><div>      $title = $args['title'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $locale ) {&nbsp;</div></li><li><div>          $mo_orig = $l10n['contact-form-7'];&nbsp;</div></li><li><div>          wpcf7_load_textdomain( $locale );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      self::$current = $contact_form = new self;&nbsp;</div></li><li><div>      $contact_form-&gt;title =&nbsp;</div></li><li><div>          ( $title ? $title : __( 'Untitled', 'contact-form-7' ) );&nbsp;</div></li><li><div>      $contact_form-&gt;locale = ( $locale ? $locale : get_locale() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $properties = $contact_form-&gt;get_properties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $properties as $key =&gt; $value ) {&nbsp;</div></li><li><div>          $properties[$key] = WPCF7_ContactFormTemplate::get_default( $key );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $contact_form-&gt;properties = $properties;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $contact_form = apply_filters( 'wpcf7_contact_form_default_pack', &nbsp;</div></li><li><div>          $contact_form, $args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( isset( $mo_orig ) ) {&nbsp;</div></li><li><div>          $l10n['contact-form-7'] = $mo_orig;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $contact_form;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public static function get_instance( $post ) {&nbsp;</div></li><li><div>      $post = get_post( $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $post || self::post_type != get_post_type( $post ) ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return self::$current = new self( $post );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private static function get_unit_tag( $id = 0 ) {&nbsp;</div></li><li><div>      static $global_count = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $global_count += 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( in_the_loop() ) {&nbsp;</div></li><li><div>          $unit_tag = sprintf( 'wpcf7-f%1$d-p%2$d-o%3$d', &nbsp;</div></li><li><div>              absint( $id ), get_the_ID(), $global_count );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $unit_tag = sprintf( 'wpcf7-f%1$d-o%2$d', &nbsp;</div></li><li><div>              absint( $id ), $global_count );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $unit_tag;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private function __construct( $post = null ) {&nbsp;</div></li><li><div>      $post = get_post( $post );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $post && self::post_type == get_post_type( $post ) ) {&nbsp;</div></li><li><div>          $this-&gt;id = $post-&gt;ID;&nbsp;</div></li><li><div>          $this-&gt;name = $post-&gt;post_name;&nbsp;</div></li><li><div>          $this-&gt;title = $post-&gt;post_title;&nbsp;</div></li><li><div>          $this-&gt;locale = get_post_meta( $post-&gt;ID, '_locale', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $properties = $this-&gt;get_properties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          foreach ( $properties as $key =&gt; $value ) {&nbsp;</div></li><li><div>              if ( metadata_exists( 'post', $post-&gt;ID, '_' . $key ) ) {&nbsp;</div></li><li><div>                  $properties[$key] = get_post_meta( $post-&gt;ID, '_' . $key, true );&nbsp;</div></li><li><div>              } elseif ( metadata_exists( 'post', $post-&gt;ID, $key ) ) {&nbsp;</div></li><li><div>                  $properties[$key] = get_post_meta( $post-&gt;ID, $key, true );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;properties = $properties;&nbsp;</div></li><li><div>          $this-&gt;upgrade();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      do_action( 'wpcf7_contact_form', $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function __get( $name ) {&nbsp;</div></li><li><div>      $message = __( '&lt;code&gt;%1$s&lt;/code&gt; property of a &lt;code&gt;WPCF7_ContactForm&lt;/code&gt; object is &lt;strong&gt;no longer accessible&lt;/strong&gt;. Use &lt;code&gt;%2$s&lt;/code&gt; method instead.', 'contact-form-7' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'id' == $name ) {&nbsp;</div></li><li><div>          if ( WP_DEBUG ) {&nbsp;</div></li><li><div>              trigger_error( sprintf( $message, 'id', 'id()' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $this-&gt;id;&nbsp;</div></li><li><div>      } elseif ( 'title' == $name ) {&nbsp;</div></li><li><div>          if ( WP_DEBUG ) {&nbsp;</div></li><li><div>              trigger_error( sprintf( $message, 'title', 'title()' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $this-&gt;title;&nbsp;</div></li><li><div>      } elseif ( $prop = $this-&gt;prop( $name ) ) {&nbsp;</div></li><li><div>          if ( WP_DEBUG ) {&nbsp;</div></li><li><div>              trigger_error(&nbsp;</div></li><li><div>                  sprintf( $message, $name, 'prop(\'' . $name . '\')' ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $prop;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function initial() {&nbsp;</div></li><li><div>      return empty( $this-&gt;id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function prop( $name ) {&nbsp;</div></li><li><div>      $props = $this-&gt;get_properties();&nbsp;</div></li><li><div>      return isset( $props[$name] ) ? $props[$name] : null;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function get_properties() {&nbsp;</div></li><li><div>      $properties = (array) $this-&gt;properties;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $properties = wp_parse_args( $properties, array(&nbsp;</div></li><li><div>          'form' =&gt; '', &nbsp;</div></li><li><div>          'mail' =&gt; array(), &nbsp;</div></li><li><div>          'mail_2' =&gt; array(), &nbsp;</div></li><li><div>          'messages' =&gt; array(), &nbsp;</div></li><li><div>          'additional_settings' =&gt; '' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $properties = (array) apply_filters( 'wpcf7_contact_form_properties', &nbsp;</div></li><li><div>          $properties, $this );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $properties;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function set_properties( $properties ) {&nbsp;</div></li><li><div>      $defaults = $this-&gt;get_properties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $properties = wp_parse_args( $properties, $defaults );&nbsp;</div></li><li><div>      $properties = array_intersect_key( $properties, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;properties = $properties;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function id() {&nbsp;</div></li><li><div>      return $this-&gt;id;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function name() {&nbsp;</div></li><li><div>      return $this-&gt;name;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function title() {&nbsp;</div></li><li><div>      return $this-&gt;title;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function set_title( $title ) {&nbsp;</div></li><li><div>      $title = trim( $title );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( '' === $title ) {&nbsp;</div></li><li><div>          $title = __( 'Untitled', 'contact-form-7' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;title = $title;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function shortcode_attr( $name ) {&nbsp;</div></li><li><div>      if ( isset( $this-&gt;shortcode_atts[$name] ) ) {&nbsp;</div></li><li><div>          return (string) $this-&gt;shortcode_atts[$name];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Return true if this form is the same one as currently POSTed.</span>&nbsp;</div></li><li><div>  public function is_posted() {&nbsp;</div></li><li><div>      if ( ! WPCF7_Submission::get_instance() ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $_POST['_wpcf7_unit_tag'] ) ) {&nbsp;</div></li><li><div>          return false;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $this-&gt;unit_tag == $_POST['_wpcf7_unit_tag'];&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Generating Form HTML */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function form_html( $args = '' ) {&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'html_id' =&gt; '', &nbsp;</div></li><li><div>          'html_name' =&gt; '', &nbsp;</div></li><li><div>          'html_class' =&gt; '', &nbsp;</div></li><li><div>          'output' =&gt; 'form' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;shortcode_atts = $args;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( 'raw_form' == $args['output'] ) {&nbsp;</div></li><li><div>          return '&lt;pre class=&quot;wpcf7-raw-form&quot;&gt;&lt;code&gt;'&nbsp;</div></li><li><div>              . esc_html( $this-&gt;prop( 'form' ) ) . '&lt;/code&gt;&lt;/pre&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;unit_tag = self::get_unit_tag( $this-&gt;id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $lang_tag = str_replace( '_', '-', $this-&gt;locale );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( preg_match( '/^([a-z]+-[a-z]+)-/i', $lang_tag, $matches ) ) {&nbsp;</div></li><li><div>          $lang_tag = $matches[1];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $html = sprintf( '&lt;div %s&gt;', wpcf7_format_atts( array(&nbsp;</div></li><li><div>          'role' =&gt; 'form', &nbsp;</div></li><li><div>          'class' =&gt; 'wpcf7', &nbsp;</div></li><li><div>          'id' =&gt; $this-&gt;unit_tag, &nbsp;</div></li><li><div>          ( get_option( 'html_type' ) == 'text/html' ) ? 'lang' : 'xml:lang'&nbsp;</div></li><li><div> =&gt; $lang_tag, &nbsp;</div></li><li><div>          'dir' =&gt; wpcf7_is_rtl( $this-&gt;locale ) ? 'rtl' : 'ltr' ) ) ) . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $html .= $this-&gt;screen_reader_response() . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $url = wpcf7_get_request_uri();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $frag = strstr( $url, '#' ) ) {&nbsp;</div></li><li><div>          $url = substr( $url, 0, -strlen( $frag ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $url .= '#' . $this-&gt;unit_tag;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $url = apply_filters( 'wpcf7_form_action_url', $url );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $id_attr = apply_filters( 'wpcf7_form_id_attr', &nbsp;</div></li><li><div>          preg_replace( '/[^A-Za-z0-9:._-]/', '', $args['html_id'] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $name_attr = apply_filters( 'wpcf7_form_name_attr', &nbsp;</div></li><li><div>          preg_replace( '/[^A-Za-z0-9:._-]/', '', $args['html_name'] ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $class = 'wpcf7-form';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;is_posted() ) {&nbsp;</div></li><li><div>          $submission = WPCF7_Submission::get_instance();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $submission-&gt;is( 'validation_failed' ) ) {&nbsp;</div></li><li><div>              $class .= ' invalid';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'spam' ) ) {&nbsp;</div></li><li><div>              $class .= ' spam';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'mail_sent' ) ) {&nbsp;</div></li><li><div>              $class .= ' sent';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'mail_failed' ) ) {&nbsp;</div></li><li><div>              $class .= ' failed';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $args['html_class'] ) {&nbsp;</div></li><li><div>          $class .= ' ' . $args['html_class'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;in_demo_mode() ) {&nbsp;</div></li><li><div>          $class .= ' demo';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $class = explode( ' ', $class );&nbsp;</div></li><li><div>      $class = array_map( 'sanitize_html_class', $class );&nbsp;</div></li><li><div>      $class = array_filter( $class );&nbsp;</div></li><li><div>      $class = array_unique( $class );&nbsp;</div></li><li><div>      $class = implode( ' ', $class );&nbsp;</div></li><li><div>      $class = apply_filters( 'wpcf7_form_class_attr', $class );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $enctype = apply_filters( 'wpcf7_form_enctype', '' );&nbsp;</div></li><li><div>      $autocomplete = apply_filters( 'wpcf7_form_autocomplete', '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $novalidate = apply_filters( 'wpcf7_form_novalidate', &nbsp;</div></li><li><div>          wpcf7_support_html5() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = array(&nbsp;</div></li><li><div>          'action' =&gt; esc_url( $url ), &nbsp;</div></li><li><div>          'method' =&gt; 'post', &nbsp;</div></li><li><div>          'class' =&gt; $class, &nbsp;</div></li><li><div>          'enctype' =&gt; wpcf7_enctype_value( $enctype ), &nbsp;</div></li><li><div>          'autocomplete' =&gt; $autocomplete, &nbsp;</div></li><li><div>          'novalidate' =&gt; $novalidate ? 'novalidate' : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( '' !== $id_attr ) {&nbsp;</div></li><li><div>          $atts['id'] = $id_attr;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( '' !== $name_attr ) {&nbsp;</div></li><li><div>          $atts['name'] = $name_attr;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = wpcf7_format_atts( $atts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $html .= sprintf( '&lt;form %s&gt;', $atts ) . &quot;\n&quot;;&nbsp;</div></li><li><div>      $html .= $this-&gt;form_hidden_fields();&nbsp;</div></li><li><div>      $html .= $this-&gt;form_elements();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $this-&gt;responses_count ) {&nbsp;</div></li><li><div>          $html .= $this-&gt;form_response_output();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $html .= '&lt;/form&gt;';&nbsp;</div></li><li><div>      $html .= '&lt;/div&gt;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $html;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private function form_hidden_fields() {&nbsp;</div></li><li><div>      $hidden_fields = array(&nbsp;</div></li><li><div>          '_wpcf7' =&gt; $this-&gt;id, &nbsp;</div></li><li><div>          '_wpcf7_version' =&gt; WPCF7_VERSION, &nbsp;</div></li><li><div>          '_wpcf7_locale' =&gt; $this-&gt;locale, &nbsp;</div></li><li><div>          '_wpcf7_unit_tag' =&gt; $this-&gt;unit_tag );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPCF7_VERIFY_NONCE ) {&nbsp;</div></li><li><div>          $hidden_fields['_wpnonce'] = wpcf7_create_nonce( $this-&gt;id );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $hidden_fields += (array) apply_filters(&nbsp;</div></li><li><div>          'wpcf7_form_hidden_fields', array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $content = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $hidden_fields as $name =&gt; $value ) {&nbsp;</div></li><li><div>          $content .= sprintf(&nbsp;</div></li><li><div>              '&lt;input type=&quot;hidden&quot; name=&quot;%1$s&quot; value=&quot;%2$s&quot; /&gt;', &nbsp;</div></li><li><div>              esc_attr( $name ), esc_attr( $value ) ) . &quot;\n&quot;;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return '&lt;div style=&quot;display: none;&quot;&gt;' . &quot;\n&quot; . $content . '&lt;/div&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function form_response_output() {&nbsp;</div></li><li><div>      $class = 'wpcf7-response-output';&nbsp;</div></li><li><div>      $role = '';&nbsp;</div></li><li><div>      $content = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;is_posted() ) { <span class="comment"><span class="comment">// Post response output for non-AJAX</span></span>&nbsp;</div></li><li><div>          $role = 'alert';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $submission = WPCF7_Submission::get_instance();&nbsp;</div></li><li><div>          $content = $submission-&gt;get_response();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $submission-&gt;is( 'validation_failed' ) ) {&nbsp;</div></li><li><div>              $class .= ' wpcf7-validation-errors';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'spam' ) ) {&nbsp;</div></li><li><div>              $class .= ' wpcf7-spam-blocked';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'mail_sent' ) ) {&nbsp;</div></li><li><div>              $class .= ' wpcf7-mail-sent-ok';&nbsp;</div></li><li><div>          } elseif ( $submission-&gt;is( 'mail_failed' ) ) {&nbsp;</div></li><li><div>              $class .= ' wpcf7-mail-sent-ng';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $class .= ' wpcf7-display-none';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = array(&nbsp;</div></li><li><div>          'class' =&gt; trim( $class ), &nbsp;</div></li><li><div>          'role' =&gt; trim( $role ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = wpcf7_format_atts( $atts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = sprintf( '&lt;div %1$s&gt;%2$s&lt;/div&gt;', &nbsp;</div></li><li><div>          $atts, esc_html( $content ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = apply_filters( 'wpcf7_form_response_output', &nbsp;</div></li><li><div>          $output, $class, $content, $this );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;responses_count += 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function screen_reader_response() {&nbsp;</div></li><li><div>      $class = 'screen-reader-response';&nbsp;</div></li><li><div>      $role = '';&nbsp;</div></li><li><div>      $content = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;is_posted() ) { <span class="comment"><span class="comment">// Post response output for non-AJAX</span></span>&nbsp;</div></li><li><div>          $role = 'alert';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $submission = WPCF7_Submission::get_instance();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $response = $submission-&gt;get_response() ) {&nbsp;</div></li><li><div>              $content = esc_html( $response );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $invalid_fields = $submission-&gt;get_invalid_fields() ) {&nbsp;</div></li><li><div>              $content .= &quot;\n&quot; . '&lt;ul&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ( (array) $invalid_fields as $name =&gt; $field ) {&nbsp;</div></li><li><div>                  if ( $field['idref'] ) {&nbsp;</div></li><li><div>                      $link = sprintf( '&lt;a href=&quot;#%1$s&quot;&gt;%2$s&lt;/a&gt;', &nbsp;</div></li><li><div>                          esc_attr( $field['idref'] ), &nbsp;</div></li><li><div>                          esc_html( $field['reason'] ) );&nbsp;</div></li><li><div>                      $content .= sprintf( '&lt;li&gt;%s&lt;/li&gt;', $link );&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $content .= sprintf( '&lt;li&gt;%s&lt;/li&gt;', &nbsp;</div></li><li><div>                          esc_html( $field['reason'] ) );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  $content .= &quot;\n&quot;;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $content .= '&lt;/ul&gt;' . &quot;\n&quot;;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = array(&nbsp;</div></li><li><div>          'class' =&gt; trim( $class ), &nbsp;</div></li><li><div>          'role' =&gt; trim( $role ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $atts = wpcf7_format_atts( $atts );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $output = sprintf( '&lt;div %1$s&gt;%2$s&lt;/div&gt;', &nbsp;</div></li><li><div>          $atts, $content );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $output;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function validation_error( $name ) {&nbsp;</div></li><li><div>      $error = '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;is_posted() ) {&nbsp;</div></li><li><div>          $submission = WPCF7_Submission::get_instance();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $invalid_field = $submission-&gt;get_invalid_field( $name ) ) {&nbsp;</div></li><li><div>              $error = trim( $invalid_field['reason'] );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $error ) {&nbsp;</div></li><li><div>          return $error;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $error = sprintf(&nbsp;</div></li><li><div>          '&lt;span role=&quot;alert&quot; class=&quot;wpcf7-not-valid-tip&quot;&gt;%s&lt;/span&gt;', &nbsp;</div></li><li><div>          esc_html( $error ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'wpcf7_validation_error', $error, $name, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Form Elements */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function replace_all_form_tags() {&nbsp;</div></li><li><div>      $manager = WPCF7_FormTagsManager::get_instance();&nbsp;</div></li><li><div>      $form = $this-&gt;prop( 'form' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( WPCF7_AUTOP ) {&nbsp;</div></li><li><div>          $form = $manager-&gt;normalize( $form );&nbsp;</div></li><li><div>          $form = wpcf7_autop( $form );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $form = $manager-&gt;replace_all( $form );&nbsp;</div></li><li><div>      $this-&gt;scanned_form_tags = $manager-&gt;get_scanned_tags();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $form;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function form_do_shortcode() {&nbsp;</div></li><li><div>      wpcf7_deprecated_function( __METHOD__, '4.6', &nbsp;</div></li><li><div>          'WPCF7_ContactForm::replace_all_form_tags' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $this-&gt;replace_all_form_tags();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function scan_form_tags( $cond = null ) {&nbsp;</div></li><li><div>      $manager = WPCF7_FormTagsManager::get_instance();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! empty( $this-&gt;scanned_form_tags ) ) {&nbsp;</div></li><li><div>          $scanned = $this-&gt;scanned_form_tags;&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $scanned = $manager-&gt;scan( $this-&gt;prop( 'form' ) );&nbsp;</div></li><li><div>          $this-&gt;scanned_form_tags = $scanned;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( empty( $scanned ) ) {&nbsp;</div></li><li><div>          return array();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! is_array( $cond ) || empty( $cond ) ) {&nbsp;</div></li><li><div>          return $scanned;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      for ( $i = 0, $size = count( $scanned ); $i &lt; $size; $i++ ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $cond['type'] ) ) {&nbsp;</div></li><li><div>              if ( is_string( $cond['type'] ) && ! empty( $cond['type'] ) ) {&nbsp;</div></li><li><div>                  if ( $scanned[$i]['type'] != $cond['type'] ) {&nbsp;</div></li><li><div>                      unset( $scanned[$i] );&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } elseif ( is_array( $cond['type'] ) ) {&nbsp;</div></li><li><div>                  if ( ! in_array( $scanned[$i]['type'], $cond['type'] ) ) {&nbsp;</div></li><li><div>                      unset( $scanned[$i] );&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( isset( $cond['name'] ) ) {&nbsp;</div></li><li><div>              if ( is_string( $cond['name'] ) && ! empty( $cond['name'] ) ) {&nbsp;</div></li><li><div>                  if ( $scanned[$i]['name'] != $cond['name'] ) {&nbsp;</div></li><li><div>                      unset ( $scanned[$i] );&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              } elseif ( is_array( $cond['name'] ) ) {&nbsp;</div></li><li><div>                  if ( ! in_array( $scanned[$i]['name'], $cond['name'] ) ) {&nbsp;</div></li><li><div>                      unset( $scanned[$i] );&nbsp;</div></li><li><div>                      continue;&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return array_values( $scanned );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function form_scan_shortcode( $cond = null ) {&nbsp;</div></li><li><div>      wpcf7_deprecated_function( __METHOD__, '4.6', &nbsp;</div></li><li><div>          'WPCF7_ContactForm::scan_form_tags' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $this-&gt;scan_form_tags( $cond );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function form_elements() {&nbsp;</div></li><li><div>      return apply_filters( 'wpcf7_form_elements', &nbsp;</div></li><li><div>          $this-&gt;replace_all_form_tags() );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function collect_mail_tags( $args = '' ) {&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'include' =&gt; array(), &nbsp;</div></li><li><div>          'exclude' =&gt; array(&nbsp;</div></li><li><div>              'acceptance', 'captchac', 'captchar', 'quiz', 'count' ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $tags = $this-&gt;scan_form_tags();&nbsp;</div></li><li><div>      $mailtags = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( (array) $tags as $tag ) {&nbsp;</div></li><li><div>          $type = trim( $tag['type'], ' *' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( empty( $type ) ) {&nbsp;</div></li><li><div>              continue;&nbsp;</div></li><li><div>          } elseif ( ! empty( $args['include'] ) ) {&nbsp;</div></li><li><div>              if ( ! in_array( $type, $args['include'] ) ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          } elseif ( ! empty( $args['exclude'] ) ) {&nbsp;</div></li><li><div>              if ( in_array( $type, $args['exclude'] ) ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $mailtags[] = $tag['name'];&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $mailtags = array_unique( array_filter( $mailtags ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'wpcf7_collect_mail_tags', $mailtags );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function suggest_mail_tags( $for = 'mail' ) {&nbsp;</div></li><li><div>      $mail = wp_parse_args( $this-&gt;prop( $for ), array(&nbsp;</div></li><li><div>          'active' =&gt; false, 'recipient' =&gt; '', 'sender' =&gt; '', &nbsp;</div></li><li><div>          'subject' =&gt; '', 'body' =&gt; '', 'additional_headers' =&gt; '', &nbsp;</div></li><li><div>          'attachments' =&gt; '', 'use_html' =&gt; false, 'exclude_blank' =&gt; false ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $mail = array_filter( $mail );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( (array) $this-&gt;collect_mail_tags() as $mail_tag ) {&nbsp;</div></li><li><div>          $pattern = sprintf( '/\[(_[a-z]+_)?%s([ \t]+[^]]+)?\]/', &nbsp;</div></li><li><div>              preg_quote( $mail_tag, '/' ) );&nbsp;</div></li><li><div>          $used = preg_grep( $pattern, $mail );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          echo sprintf(&nbsp;</div></li><li><div>              '&lt;span class=&quot;%1$s&quot;&gt;[%2$s]&lt;/span&gt;', &nbsp;</div></li><li><div>              'mailtag code ' . ( $used ? 'used' : 'unused' ), &nbsp;</div></li><li><div>              esc_html( $mail_tag ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function submit( $ajax = false ) {&nbsp;</div></li><li><div>      $submission = WPCF7_Submission::get_instance( $this );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $result = array(&nbsp;</div></li><li><div>          'status' =&gt; $submission-&gt;get_status(), &nbsp;</div></li><li><div>          'message' =&gt; $submission-&gt;get_response(), &nbsp;</div></li><li><div>          'demo_mode' =&gt; $this-&gt;in_demo_mode() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $submission-&gt;is( 'validation_failed' ) ) {&nbsp;</div></li><li><div>          $result['invalid_fields'] = $submission-&gt;get_invalid_fields();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $submission-&gt;is( 'mail_sent' ) ) {&nbsp;</div></li><li><div>          if ( $ajax ) {&nbsp;</div></li><li><div>              $on_sent_ok = $this-&gt;additional_setting( 'on_sent_ok', false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! empty( $on_sent_ok ) ) {&nbsp;</div></li><li><div>                  $result['scripts_on_sent_ok'] = array_map(&nbsp;</div></li><li><div>                      'wpcf7_strip_quote', $on_sent_ok );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $ajax ) {&nbsp;</div></li><li><div>          $on_submit = $this-&gt;additional_setting( 'on_submit', false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( ! empty( $on_submit ) ) {&nbsp;</div></li><li><div>              $result['scripts_on_submit'] = array_map(&nbsp;</div></li><li><div>                  'wpcf7_strip_quote', $on_submit );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      do_action( 'wpcf7_submit', $this, $result );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $result;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Message */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function message( $status, $filter = true ) {&nbsp;</div></li><li><div>      $messages = $this-&gt;prop( 'messages' );&nbsp;</div></li><li><div>      $message = isset( $messages[$status] ) ? $messages[$status] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $filter ) {&nbsp;</div></li><li><div>          $message = wp_strip_all_tags( $message );&nbsp;</div></li><li><div>          $message = wpcf7_mail_replace_tags( $message, array( 'html' =&gt; true ) );&nbsp;</div></li><li><div>          $message = apply_filters( 'wpcf7_display_message', $message, $status );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $message;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Additional settings */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function additional_setting( $name, $max = 1 ) {&nbsp;</div></li><li><div>      $settings = (array) explode( &quot;\n&quot;, $this-&gt;prop( 'additional_settings' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $pattern = '/^([a-zA-Z0-9_]+)[\t ]*:(.*)$/';&nbsp;</div></li><li><div>      $count = 0;&nbsp;</div></li><li><div>      $values = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $settings as $setting ) {&nbsp;</div></li><li><div>          if ( preg_match( $pattern, $setting, $matches ) ) {&nbsp;</div></li><li><div>              if ( $matches[1] != $name ) {&nbsp;</div></li><li><div>                  continue;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if ( ! $max || $count &lt; (int) $max ) {&nbsp;</div></li><li><div>                  $values[] = trim( $matches[2] );&nbsp;</div></li><li><div>                  $count += 1;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $values;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function is_true( $name ) {&nbsp;</div></li><li><div>      $settings = $this-&gt;additional_setting( $name, false );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      foreach ( $settings as $setting ) {&nbsp;</div></li><li><div>          if ( in_array( $setting, array( 'on', 'true', '1' ) ) ) {&nbsp;</div></li><li><div>              return true;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function in_demo_mode() {&nbsp;</div></li><li><div>      return $this-&gt;is_true( 'demo_mode' );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Upgrade */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  private function upgrade() {&nbsp;</div></li><li><div>      $mail = $this-&gt;prop( 'mail' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_array( $mail ) && ! isset( $mail['recipient'] ) ) {&nbsp;</div></li><li><div>          $mail['recipient'] = get_option( 'admin_email' );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;properties['mail'] = $mail;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $messages = $this-&gt;prop( 'messages' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( is_array( $messages ) ) {&nbsp;</div></li><li><div>          foreach ( wpcf7_messages() as $key =&gt; $arr ) {&nbsp;</div></li><li><div>              if ( ! isset( $messages[$key] ) ) {&nbsp;</div></li><li><div>                  $messages[$key] = $arr['default'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $this-&gt;properties['messages'] = $messages;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">/** Save */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function save() {&nbsp;</div></li><li><div>      $props = $this-&gt;get_properties();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $post_content = implode( &quot;\n&quot;, wpcf7_array_flatten( $props ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $this-&gt;initial() ) {&nbsp;</div></li><li><div>          $post_id = wp_insert_post( array(&nbsp;</div></li><li><div>              'post_type' =&gt; self::post_type, &nbsp;</div></li><li><div>              'post_status' =&gt; 'publish', &nbsp;</div></li><li><div>              'post_title' =&gt; $this-&gt;title, &nbsp;</div></li><li><div>              'post_content' =&gt; trim( $post_content ) ) );&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $post_id = wp_update_post( array(&nbsp;</div></li><li><div>              'ID' =&gt; (int) $this-&gt;id, &nbsp;</div></li><li><div>              'post_status' =&gt; 'publish', &nbsp;</div></li><li><div>              'post_title' =&gt; $this-&gt;title, &nbsp;</div></li><li><div>              'post_content' =&gt; trim( $post_content ) ) );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $post_id ) {&nbsp;</div></li><li><div>          foreach ( $props as $prop =&gt; $value ) {&nbsp;</div></li><li><div>              update_post_meta( $post_id, '_' . $prop, &nbsp;</div></li><li><div>                  wpcf7_normalize_newline_deep( $value ) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( wpcf7_is_valid_locale( $this-&gt;locale ) ) {&nbsp;</div></li><li><div>              update_post_meta( $post_id, '_locale', $this-&gt;locale );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $this-&gt;initial() ) {&nbsp;</div></li><li><div>              $this-&gt;id = $post_id;&nbsp;</div></li><li><div>              do_action( 'wpcf7_after_create', $this );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              do_action( 'wpcf7_after_update', $this );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          do_action( 'wpcf7_after_save', $this );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return $post_id;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function copy() {&nbsp;</div></li><li><div>      $new = new self;&nbsp;</div></li><li><div>      $new-&gt;title = $this-&gt;title . '_copy';&nbsp;</div></li><li><div>      $new-&gt;locale = $this-&gt;locale;&nbsp;</div></li><li><div>      $new-&gt;properties = $this-&gt;properties;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'wpcf7_copy', $new, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function delete() {&nbsp;</div></li><li><div>      if ( $this-&gt;initial() )&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( wp_delete_post( $this-&gt;id, true ) ) {&nbsp;</div></li><li><div>          $this-&gt;id = 0;&nbsp;</div></li><li><div>          return true;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  public function shortcode( $args = '' ) {&nbsp;</div></li><li><div>      $args = wp_parse_args( $args, array(&nbsp;</div></li><li><div>          'use_old_format' =&gt; false ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $title = str_replace( array( '&quot;', '[', ']' ), '', $this-&gt;title );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( $args['use_old_format'] ) {&nbsp;</div></li><li><div>          $old_unit_id = (int) get_post_meta( $this-&gt;id, '_old_cf7_unit_id', true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if ( $old_unit_id ) {&nbsp;</div></li><li><div>              $shortcode = sprintf( '[contact-form %1$d &quot;%2$s&quot;]', $old_unit_id, $title );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $shortcode = '';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>      } else {&nbsp;</div></li><li><div>          $shortcode = sprintf( '[contact-form-7 id=&quot;%1$d&quot; title=&quot;%2$s&quot;]', &nbsp;</div></li><li><div>              $this-&gt;id, $title );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      return apply_filters( 'wpcf7_contact_form_shortcode', $shortcode, $args, $this );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_contact_form( $id ) {&nbsp;</div></li><li><div>  return WPCF7_ContactForm::get_instance( $id );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_contact_form_by_old_id( $old_id ) {&nbsp;</div></li><li><div>  global $wpdb;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $q = &quot;SELECT post_id FROM $wpdb-&gt;postmeta WHERE meta_key = '_old_cf7_unit_id'&quot;&nbsp;</div></li><li><div>      . $wpdb-&gt;prepare( &quot; AND meta_value = %d&quot;, $old_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $new_id = $wpdb-&gt;get_var( $q ) ) {&nbsp;</div></li><li><div>      return wpcf7_contact_form( $new_id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_contact_form_by_title( $title ) {&nbsp;</div></li><li><div>  $page = get_page_by_title( $title, OBJECT, WPCF7_ContactForm::post_type );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $page ) {&nbsp;</div></li><li><div>      return wpcf7_contact_form( $page-&gt;ID );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return null;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_current_contact_form() {&nbsp;</div></li><li><div>  if ( $current = WPCF7_ContactForm::get_current() ) {&nbsp;</div></li><li><div>      return $current;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_is_posted() {&nbsp;</div></li><li><div>  if ( ! $contact_form = wpcf7_get_current_contact_form() ) {&nbsp;</div></li><li><div>      return false;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $contact_form-&gt;is_posted();&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_hangover( $name, $default = null ) {&nbsp;</div></li><li><div>  if ( ! wpcf7_is_posted() ) {&nbsp;</div></li><li><div>      return $default;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $submission = WPCF7_Submission::get_instance();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $submission || $submission-&gt;is( 'mail_sent' ) ) {&nbsp;</div></li><li><div>      return $default;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return isset( $_POST[$name] ) ? wp_unslash( $_POST[$name] ) : $default;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_validation_error( $name ) {&nbsp;</div></li><li><div>  if ( ! $contact_form = wpcf7_get_current_contact_form() ) {&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $contact_form-&gt;validation_error( $name );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_get_message( $status ) {&nbsp;</div></li><li><div>  if ( ! $contact_form = wpcf7_get_current_contact_form() ) {&nbsp;</div></li><li><div>      return '';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $contact_form-&gt;message( $status );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_form_controls_class( $type, $default = '' ) {&nbsp;</div></li><li><div>  $type = trim( $type );&nbsp;</div></li><li><div>  $default = array_filter( explode( ' ', $default ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes = array_merge( array( 'wpcf7-form-control' ), $default );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $typebase = rtrim( $type, '*' );&nbsp;</div></li><li><div>  $required = ( '*' == substr( $type, -1 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes[] = 'wpcf7-' . $typebase;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( $required ) {&nbsp;</div></li><li><div>      $classes[] = 'wpcf7-validates-as-required';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $classes = array_unique( $classes );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return implode( ' ', $classes );&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>function wpcf7_contact_form_tag_func( $atts, $content = null, $code = '' ) {&nbsp;</div></li><li><div>  if ( is_feed() ) {&nbsp;</div></li><li><div>      return '[contact-form-7]';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( 'contact-form-7' == $code ) {&nbsp;</div></li><li><div>      $atts = shortcode_atts( array(&nbsp;</div></li><li><div>          'id' =&gt; 0, &nbsp;</div></li><li><div>          'title' =&gt; '', &nbsp;</div></li><li><div>          'html_id' =&gt; '', &nbsp;</div></li><li><div>          'html_name' =&gt; '', &nbsp;</div></li><li><div>          'html_class' =&gt; '', &nbsp;</div></li><li><div>          'output' =&gt; 'form' ), $atts, 'wpcf7' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $id = (int) $atts['id'];&nbsp;</div></li><li><div>      $title = trim( $atts['title'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      if ( ! $contact_form = wpcf7_contact_form( $id ) ) {&nbsp;</div></li><li><div>          $contact_form = wpcf7_get_contact_form_by_title( $title );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  } else {&nbsp;</div></li><li><div>      if ( is_string( $atts ) ) {&nbsp;</div></li><li><div>          $atts = explode( ' ', $atts, 2 );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $id = (int) array_shift( $atts );&nbsp;</div></li><li><div>      $contact_form = wpcf7_get_contact_form_by_old_id( $id );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $contact_form ) {&nbsp;</div></li><li><div>      return '[contact-form-7 404 &quot;Not Found&quot;]';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  return $contact_form-&gt;form_html( $atts );&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Contact Form 7</li><li><span></span>4.7</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2019 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>