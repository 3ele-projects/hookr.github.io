<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="3.1.2" data-slug="gravity-forms-salesforce-add-on" data-type="file" data-id="37401"><head xmlns="http://www.w3.org/1999/xhtml"><title> inc-web-to-lead | file | Gravity Forms Salesforce Add On | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, gravity-forms-salesforce-add-on, 3.1.2" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=3785d232707c2072c52f70b1c7028c0b' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/inc-web-to-lead/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Finc-web-to-lead%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Finc-web-to-lead%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-gravity-forms-salesforce-add-on-3.1.2-file-inc-web-to-lead","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="inc-web-to-lead" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to gravity-forms-salesforce-add-&hellip;." href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/" class="plugin"><span property="name">gravity-forms-salesforce-add-&hellip;</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.1.2." href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/" class="H_VERSION"><span property="name">3.1.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">inc-web-to-lead</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="290"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/all/" title="All">All <span class="count badge">290</span></a></li><li class="" data-id="new" data-count="5"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/new/" title="New">New <span class="count badge">5</span></a></li><li class="" data-id="hooks" data-count="44"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/hooks/" title="Hooks">Hooks <span class="count badge">44</span></a></li><li class="" data-id="action" data-count="4"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/actions/" title="Actions">Actions <span class="count badge">4</span></a></li><li class="" data-id="filter" data-count="40"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/filters/" title="Filters">Filters <span class="count badge">40</span></a></li><li class="" data-id="class" data-count="234"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/classes/" title="Classes">Classes <span class="count badge">234</span></a></li><li class="" data-id="constant" data-count="5"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/constants/" title="Constants">Constants <span class="count badge">5</span></a></li><li class="" data-id="function" data-count="7"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/functions/" title="Functions">Functions <span class="count badge">7</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/gravity-forms-salesforce-add-on/3.1.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/inc/web-to-lead.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Copyright 2014 Katz Web Services, Inc.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This program is free software; you can redistribute it and/or modify</span>&nbsp;</div></li><li><div><span class="comment"> * it under the terms of the GNU General Public License as published by</span>&nbsp;</div></li><li><div><span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>&nbsp;</div></li><li><div><span class="comment"> * (at your option) any later version.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This program is distributed in the hope that it will be useful, </span>&nbsp;</div></li><li><div><span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>&nbsp;</div></li><li><div><span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>&nbsp;</div></li><li><div><span class="comment"> * GNU General Public License for more details.</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * You should have received a copy of the GNU General Public License</span>&nbsp;</div></li><li><div><span class="comment"> * along with this program; if not, write to the Free Software</span>&nbsp;</div></li><li><div><span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">//------------------------------------------</span>&nbsp;</div></li><li><div>if (class_exists(&quot;GFForms&quot;)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  class KWSGFWebToLeadAddon extends KWSGFAddOn2_2 {&nbsp;</div></li><li><div>      protected $_version;&nbsp;</div></li><li><div>      protected $_min_gravityforms_version = &quot;1.7&quot;;&nbsp;</div></li><li><div>      protected $_slug = &quot;sf-web-to-lead&quot;;&nbsp;</div></li><li><div>      protected $_path = &quot;gravity-forms-salesforce/inc/web-to-lead.php&quot;;&nbsp;</div></li><li><div>      protected $_full_path = __FILE__;&nbsp;</div></li><li><div>      protected $_title = &quot;Gravity Forms Salesforce Web-to-Lead Add-On&quot;;&nbsp;</div></li><li><div>      protected $_short_title = &quot;Salesforce:  Web-to-Lead&quot;; <span class="comment">// Two spaces make it above DA</span>&nbsp;</div></li><li><div>      protected $_service_name = &quot;Salesforce&quot;;&nbsp;</div></li><li><div>      protected $_custom_field_placeholder = &quot;Salesforce API ID&quot;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      function __construct() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;_version = KWS_GF_Salesforce::version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          add_action('kwsgfwebtoleadaddon_log_debug', array( $this, 'log_debug' ));&nbsp;</div></li><li><div>          add_action('kwsgfwebtoleadaddon_log_error', array( $this, 'log_error' ));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          parent::__construct();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Add the logo for the Feeds page</span>&nbsp;</div></li><li><div><span class="comment">       * @return string IMG HTML tag</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function get_service_icon() {&nbsp;</div></li><li><div>          return '&lt;img src=&quot;'.plugins_url( 'assets/images/salesforce-256x256.png', KWS_GF_Salesforce::$file ).'&quot; class=&quot;alignleft&quot; width=&quot;84&quot; style=&quot;margin:0 10px 10px 0&quot; /&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      public function get_service_favicon_path() {&nbsp;</div></li><li><div>          return plugins_url( 'assets/images/salesforce-16x16.png', KWS_GF_Salesforce::$file );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Columns to show on the list of Feeds.</span>&nbsp;</div></li><li><div><span class="comment">       * @return array Array of columns</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      function feed_list_columns() {&nbsp;</div></li><li><div>          $lists = parent::feed_list_columns();&nbsp;</div></li><li><div>          unset($lists['lists']);&nbsp;</div></li><li><div>          return $lists;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * @inheritDoc</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function plugin_settings_fields() {&nbsp;</div></li><li><div>          return array(&nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  &quot;title&quot; =&gt; sprintf(__(&quot;%s Account Information&quot;, 'gravity-forms-salesforce'), $this-&gt;get_service_name()), &nbsp;</div></li><li><div>                  &quot;fields&quot; =&gt; array(&nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'type' =&gt; 'html', &nbsp;</div></li><li><div>                          'class' =&gt; 'error', &nbsp;</div></li><li><div>                          'value' =&gt; $this-&gt;invalid_api_message(), &nbsp;</div></li><li><div>                          'dependency' =&gt; array(&$this, 'is_invalid_api'), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'type' =&gt; 'html', &nbsp;</div></li><li><div>                          'class' =&gt; 'updated', &nbsp;</div></li><li><div>                          'value' =&gt; $this-&gt;valid_api_message(), &nbsp;</div></li><li><div>                          'dependency' =&gt; array(&$this, 'is_valid_api'), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          &quot;name&quot; =&gt; &quot;org_id&quot;, &nbsp;</div></li><li><div>                          &quot;label&quot; =&gt; __(&quot;Salesforce Org. ID&quot;, &quot;gravity-forms-salesforce&quot;), &nbsp;</div></li><li><div>                          &quot;type&quot; =&gt; &quot;text&quot;, &nbsp;</div></li><li><div>                          &quot;class&quot; =&gt; &quot;medium code&quot;, &nbsp;</div></li><li><div>                          &quot;tooltip&quot; =&gt; sprintf(__(&quot;To find your Salesforce.com Organization ID, in your Salesforce.com account, go to [Your Name] &raquo; Setup &raquo; Company Profile (near the bottom of the left sidebar) &raquo; Company Information. It will look like %s&quot;, 'gravity-forms-salesforce'), '&lt;code&gt;00AB0000000Z9kR&lt;/code&gt;')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          &quot;name&quot; =&gt; &quot;date_format&quot;, &nbsp;</div></li><li><div>                          &quot;label&quot; =&gt; __(&quot;Date Format&quot;, &quot;gravity-forms-salesforce&quot;), &nbsp;</div></li><li><div>                          &quot;type&quot; =&gt; &quot;radio&quot;, &nbsp;</div></li><li><div>                          &quot;horizontal&quot; =&gt; true, &nbsp;</div></li><li><div>                          &quot;default_value&quot; =&gt; $this-&gt;get_default_date_format(), &nbsp;</div></li><li><div>                          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">                           * Modify the options for date formats available in the settings</span>&nbsp;</div></li><li><div><span class="comment">                           * @since 3.1.2</span>&nbsp;</div></li><li><div><span class="comment">                           */</span>&nbsp;</div></li><li><div>                          'choices' =&gt; apply_filters('gravityforms/salesforce/date_format_choices', array(&nbsp;</div></li><li><div>                              array(&nbsp;</div></li><li><div>                                  'value' =&gt; 'm/d/Y', &nbsp;</div></li><li><div>                                  'label' =&gt; 'mm/dd/yyyy', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                              array(&nbsp;</div></li><li><div>                                  'value' =&gt; 'd/m/Y', &nbsp;</div></li><li><div>                                  'label' =&gt; 'dd/mm/yyyy', &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> )), &nbsp;</div></li><li><div>                          'tooltip' =&gt; &quot;&lt;h6&gt;&quot; . __(&quot;Date Format&quot;, &quot;gravity-forms-salesforce&quot;) . &quot;&lt;/h6&gt;&quot; . __(&quot;The format dates are stored for your Salesforce Organization. If you are in the United States of America, the date format will be mm/dd/yyyy. Most of the rest of the world disagrees.&quot;, 'gravity-forms-salesforce'), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          &quot;name&quot; =&gt; &quot;debug&quot;, &nbsp;</div></li><li><div>                          &quot;label&quot; =&gt; __(&quot;Receive Salesforce Debugging Emails &lt;p class='howto'&gt;&lt;span&gt;For full plugin logs, install the &lt;a href='http:<span class="comment">//gravityhelp.com/downloads/#Gravity_Forms_Logging_Tool' target='_blank'&gt;Gravity Forms Logging Tool&lt;/a&gt;.&lt;/span&gt;&lt;/p&gt;&quot;, &quot;gravity-forms-salesforce&quot;), </span>&nbsp;</div></li><li><div>                          &quot;type&quot; =&gt; &quot;checkbox&quot;, &nbsp;</div></li><li><div>                          &quot;class&quot; =&gt; &quot;checkbox&quot;, &nbsp;</div></li><li><div>                          'dependency' =&gt; array(&$this, 'is_valid_api'), &nbsp;</div></li><li><div>                          &quot;choices&quot; =&gt; array(&nbsp;</div></li><li><div>                              array(&nbsp;</div></li><li><div>                                  'label' =&gt; __('Enable Salesforce debugging emails. The site administrator will be emailed by Salesforce with import status for each form submission.', 'gravity-forms-salesforce'), &nbsp;</div></li><li><div>                                  'value' =&gt; 'debug_email', &nbsp;</div></li><li><div>                                  'name' =&gt; 'debug_email'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'name' =&gt; 'Save', &nbsp;</div></li><li><div>                          'type' =&gt; 'save', &nbsp;</div></li><li><div>                          'messages' =&gt; array(&nbsp;</div></li><li><div>                              'success' =&gt; 'Settings updated successfully.', &nbsp;</div></li><li><div>                              'error' =&gt; 'Settings failed to update successfully.'&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      protected function valid_api_message() {&nbsp;</div></li><li><div>          return '&lt;span class=&quot;gf_keystatus_valid_text&quot;&gt;'.sprintf(__(&quot;%s Success: Your Org ID. is properly configured.&quot;, 'gravity-forms-salesforce'), '&lt;i class=&quot;fa fa-check gf_keystatus_valid&quot;&gt;&lt;/i&gt;').'&lt;/span&gt;';&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      protected function invalid_api_message() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $oid = $this-&gt;get_plugin_setting('org_id');&nbsp;</div></li><li><div>          $tofind = sprintf(__('To find your Salesforce.com Organization ID, in your Salesforce.com account, go to:%1$s %2$s[Your Name] &raquo; Setup &raquo; Company Profile%3$s (near the bottom of the left sidebar) %2$s&raquo; Company Information%3$s (it is buried in the table of information). It will look like %4$s.', 'gravity-forms-salesforce'), '&lt;br /&gt;', &quot;&lt;span class='code'&gt;&quot;, '&lt;/span&gt;', '&lt;code&gt;00AB0000000Z9kR&lt;/code&gt;');&nbsp;</div></li><li><div>          if(empty($oid)) {&nbsp;</div></li><li><div>              $message = __(&quot;Please enter your Salesforce Organization ID.&quot;, 'gravity-forms-salesforce');&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $message = '&lt;span class=&quot;gf_keystatus_invalid_text&quot;&gt;'.sprintf(__(&quot;%s Invalid Org ID. - Please confirm your setting. Try re-saving the form.&quot;, 'gravity-forms-salesforce'), '&lt;i class=&quot;fa fa-times gf_keystatus_invalid&quot;&gt;&lt;/i&gt;').'&lt;/span&gt;';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return '&lt;h4&gt;'.$message.'&lt;/h4&gt;'.$tofind;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * We don't need lists. Take the standard fields from KWSAddon and remove the lists option.</span>&nbsp;</div></li><li><div><span class="comment">       * @return array Array of fields for the feed settings.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function feed_settings_fields() {&nbsp;</div></li><li><div>          return array(&nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  &quot;title&quot; =&gt; sprintf(__(&quot;Map your fields for export to %s.&quot;, 'gravity-forms-salesforce'), $this-&gt;get_service_name()), &nbsp;</div></li><li><div>                  &quot;fields&quot; =&gt; array(&nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'label' =&gt; __('Feed Name', 'gravity-forms-salesforce'), &nbsp;</div></li><li><div>                          'name' =&gt; 'name', &nbsp;</div></li><li><div>                          'type' =&gt; 'text', &nbsp;</div></li><li><div>                          'value' =&gt; '', &nbsp;</div></li><li><div>                          'placeholder' =&gt; __('Feed Name (optional)', 'gravity-forms-salesforce'), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'type' =&gt; 'select', &nbsp;</div></li><li><div>                          'label' =&gt; __('Pick an export type.', 'gravity-forms-salesforce'), &nbsp;</div></li><li><div>                          'name' =&gt; 'type', &nbsp;</div></li><li><div>                          'default_value' =&gt; 'Lead', &nbsp;</div></li><li><div>                          'choices' =&gt; array(&nbsp;</div></li><li><div>                              array(&nbsp;</div></li><li><div>                                  'name' =&gt; 'lead', &nbsp;</div></li><li><div>                                  'value' =&gt; 'Lead', &nbsp;</div></li><li><div>                                  'label' =&gt; __('Lead', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                              array(&nbsp;</div></li><li><div>                                  'name' =&gt; 'case', &nbsp;</div></li><li><div>                                  'value' =&gt; 'Case', &nbsp;</div></li><li><div>                                  'label' =&gt; __('Case', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                          'tooltip' =&gt; sprintf(&quot;&lt;h6&gt;&quot; . __(&quot;Object to Create in Salesforce&quot;, &quot;gravity-forms-salesforce&quot;) . &quot;&lt;/h6&gt;&quot; . __(&quot;When the form is exported to Salesforce, do you want to have the entry become a Lead or a Case?&quot;, 'gravity-forms-salesforce')), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'type' =&gt; 'field_map', &nbsp;</div></li><li><div>                          'label' =&gt; __('Map your fields.', 'gravity-forms-salesforce'), &nbsp;</div></li><li><div>                          'tooltip' =&gt; &quot;&lt;h6&gt;&quot; . __(&quot;Map Fields&quot;, &quot;gravity-forms-salesforce&quot;) . &quot;&lt;/h6&gt;&quot; . sprintf(__(&quot;Associate your %s merge variables to the appropriate Gravity Form fields by selecting.&quot;, 'gravity-forms-salesforce'), $this-&gt;get_service_name()), &nbsp;</div></li><li><div>                          'name' =&gt; null, &nbsp;</div></li><li><div>                          'field_map' =&gt; $this-&gt;map_custom_fields($this-&gt;feed_settings_fields_field_map())&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'type' =&gt; 'custom_fields', &nbsp;</div></li><li><div>                          'label' =&gt; __(&quot;Custom Fields&quot;, 'gravity-forms-salesforce'), &nbsp;</div></li><li><div>                          'tooltip' =&gt; sprintf(__(&quot;If you don&#8217;t see the Salesforce field you want to send data to, add a custom field. You can map any Salesforce Field using the Salesforce Field \&quot;API Name, \&quot; which look like %sCustom_Field_Example__c%s.&quot;, 'gravity-forms-salesforce'), '&lt;code&gt;', '&lt;/code&gt;'), &nbsp;</div></li><li><div>                          'name' =&gt; null&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>                      array(&nbsp;</div></li><li><div>                          'label' =&gt; 'Opt-in Condition', &nbsp;</div></li><li><div>                          'name' =&gt; 'feed_condition', &nbsp;</div></li><li><div>                          'type' =&gt; 'feed_condition', &nbsp;</div></li><li><div>                          'tooltip' =&gt; sprintf(&quot;&lt;h6&gt;&quot; . __(&quot;Opt-In Condition&quot;, &quot;gravity-forms-salesforce&quot;) . &quot;&lt;/h6&gt;&quot; . __(&quot;When the opt-in condition is enabled, form submissions will only be exported to %s when the condition is met. When disabled all form submissions will be exported.&quot;, 'gravity-forms-salesforce'), $this-&gt;get_service_name()), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $fields;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Set up the feed forms.</span>&nbsp;</div></li><li><div><span class="comment">       * @return array Array of feed fields</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      protected function feed_settings_fields_field_map() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $fields = array(&nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'email', &nbsp;</div></li><li><div>                  'required' =&gt; true, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Email&quot;), &nbsp;</div></li><li><div>                  'error_message' =&gt; __(&quot;You must set an Email Address&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'salutation', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Salutation&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'first_name', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Name (First)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'last_name', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Name (Last)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'title', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Title&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'company', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Company&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'phone', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Phone&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'mobile', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Mobile&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'fax', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Fax&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'street', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (Street Address)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'street2', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (Address Line 2)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'city', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (City)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'state', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (State / Province)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'country', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (Country)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'zip', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __(&quot;Address (Zip / Postal Code)&quot;, 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'URL', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Website', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'twitter', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Twitter Username', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'message', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Message', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'lead_source', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; apply_filters('gf_salesforce_lead_source_label', __('Lead Source', 'gravity-forms-salesforce')), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'description', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Message', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'industry', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Industry', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'rating', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Rating', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'revenue', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Annual Revenue', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'employees', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('# of Employees', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'Campaign_ID', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Campaign ID', 'gravity-forms-salesforce') . '&lt;div style=&quot;max-width:350px;&quot;&gt;&lt;span class=&quot;description&quot;&gt;' . sprintf(__('To associate an entry with a Campaign, you must also set the &quot;Member Status&quot;. %sRead the Salesforce help article.%s', 'gravity-forms-salesforce'), '&lt;a href=&quot;http:<span class="comment">//help.salesforce.com/apex/HTViewSolution?id=000006417&quot; target=&quot;_blank&quot;&gt;', '&lt;/a&gt;') . '&lt;/span&gt;&lt;/div&gt;'</span>&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'member_status', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Member Status', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'emailOptOut', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Opt Out of Emails', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'faxOptOut', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Opt Out of Faxes', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'doNotCall', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Do Not Call', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'retURL', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Return URL', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'Priority', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Priority', 'gravity-forms-salesforce')&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'name' =&gt; 'recordType', &nbsp;</div></li><li><div>                  'required' =&gt; false, &nbsp;</div></li><li><div>                  'label' =&gt; __('Lead Record Type ID'), &nbsp;</div></li><li><div>                  'desc' =&gt; __(&quot;The ID of the record type that should be created. You can get the ID by going to setup-&gt;customize -&gt; lead -&gt; record types&quot;), &nbsp;</div></li><li><div>                  'help' =&gt; __(&quot;Make sure that the profile assigned to the owner of the leads has the particular record type you're trying to assign visible to that profile. You can add it as follows: Setup -&gt; manage users -&gt; profiles -&gt; edit profileName.&quot;), &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Get the default date format by guessing where you are.</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.1.2</span>&nbsp;</div></li><li><div><span class="comment">       * @return string d/m/Y or m/d/Y</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private function get_default_date_format() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          switch( get_locale() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              case 'en_US':&nbsp;</div></li><li><div>              case 'en_CA':&nbsp;</div></li><li><div>                  $format = 'm/d/Y';&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              default:&nbsp;</div></li><li><div>                  $format = 'd/m/Y';&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $format;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Get the formatted date based on locale.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @since 3.1.2</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $value</span>&nbsp;</div></li><li><div><span class="comment">       * @param string $key</span>&nbsp;</div></li><li><div><span class="comment">       * @param array $additional_info Associative array with form, entry, field, feed data</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private function get_date_format( $value = '', $key = '', $additional_info = array() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Add a datetime instead of date.</span>&nbsp;</div></li><li><div><span class="comment">           * @link https://gist.github.com/zackkatz/ae3924779157261b80e3 See example</span>&nbsp;</div></li><li><div><span class="comment">           * @param boolean $use_datetime Whether to use DateTime instead of Date (default: false, except for KWS testing)</span>&nbsp;</div></li><li><div><span class="comment">           * @param string $key The Field Name (or API Name if a custom field) used in Salesforce</span>&nbsp;</div></li><li><div><span class="comment">           * @param array $additional_info Associative array with form, entry, field, feed data</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $use_datetime = apply_filters( 'gf_salesforce_use_datetime', ($key === 'KWS__Date_and_Time__c'), $key, $additional_info );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $date_format = $this-&gt;get_addon_setting( 'date_format' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          if( ! $date_format ) {&nbsp;</div></li><li><div>              $date_format = $this-&gt;get_default_date_format();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Modify how date formats are added</span>&nbsp;</div></li><li><div><span class="comment">           * @since 3.1.2</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $date_format = apply_filters('gravityforms/salesforce/date_format', $date_format );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Modify how datetime formats are added</span>&nbsp;</div></li><li><div><span class="comment">           * @since 3.1.2</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          $datetime_format = apply_filters('gravityforms/salesforce/datetime_format', 'Y-m-d H:i:s');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">           * Format the date in Salesforce-recognized format.</span>&nbsp;</div></li><li><div><span class="comment">           * These formats are US-style, even though Salesforce recommends `Y-m-d\'\T\'H:i:s`</span>&nbsp;</div></li><li><div><span class="comment">           * For some reason, that didn't work.</span>&nbsp;</div></li><li><div><span class="comment">           *</span>&nbsp;</div></li><li><div><span class="comment">           * @link https://success.salesforce.com/answers?id=90630000000gl7rAAA</span>&nbsp;</div></li><li><div><span class="comment">           */</span>&nbsp;</div></li><li><div>          if( $use_datetime ) {&nbsp;</div></li><li><div>              $value = apply_filters( 'gf_salesforce_format_datetime', date( $datetime_format, strtotime( $value ) ), $key, $value, $additional_info );&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>              $value = apply_filters( 'gf_salesforce_format_date', date( $date_format, strtotime( $value ) ), $key, $value, $additional_info );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $value;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Export the entry on submit.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @filter gf_salesforce_implode_glue Change how array values are passed to Salesforce. By default they're sent using `;` (semicolons) to separate the items. You may want to convert that to using `, ` (commas) instead. The filter passes the existing &quot;glue&quot; and the name of the input (for example, `Multiple_Picklist__c`)</span>&nbsp;</div></li><li><div><span class="comment">       * @param  array $feed  Feed array</span>&nbsp;</div></li><li><div><span class="comment">       * @param  array $entry Entry array</span>&nbsp;</div></li><li><div><span class="comment">       * @param  array $form  Form array</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function process_feed( $feed, $entry, $form ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// The settings are only normally available on the admin page.</span>&nbsp;</div></li><li><div>          <span class="comment">// We want it available everywhere.</span>&nbsp;</div></li><li><div>          $this-&gt;set_settings( $feed['meta'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          self::log_debug( sprintf(&quot;Opt-in condition met; adding entry {$entry[&quot;id&quot;]} to %s&quot;, $this-&gt;_service_name) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          try {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              foreach ($feed['meta'] as $key =&gt; $value) {&nbsp;</div></li><li><div>                  <span class="comment">// The field names have a trailing underscore for some reason.</span>&nbsp;</div></li><li><div>                  $trimmed_key = ltrim($key, '_');&nbsp;</div></li><li><div>                  $feed['meta'][ $trimmed_key ] = $value;&nbsp;</div></li><li><div>                  unset( $feed['meta'][$key] );&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $temp_merge_vars = $this-&gt;get_merge_vars_from_entry($feed, $entry, $form);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              self::log_debug( sprintf(&quot;Temp Merge Vars: %s&quot;, print_r( $temp_merge_vars, true )) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $merge_vars = array();&nbsp;</div></li><li><div>              foreach($temp_merge_vars as $key =&gt; $value) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Get the field ID for the current value</span>&nbsp;</div></li><li><div>                  $field_id = $feed['meta'][$key];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// We need to specially format some data going to Salesforce</span>&nbsp;</div></li><li><div>                  <span class="comment">// If it's a field ID, get the field data</span>&nbsp;</div></li><li><div>                  if(is_numeric($field_id) && !empty($value)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $field = RGFormsModel::get_field($form, $field_id);&nbsp;</div></li><li><div>                      $field_type = RGFormsModel::get_input_type($field);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Right now, we only have special cases for dates.</span>&nbsp;</div></li><li><div>                      switch ($field_type) {&nbsp;</div></li><li><div>                          case 'date':&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              $value = $this-&gt;get_date_format( $value, $key, compact('form', 'entry', 'field', 'feed') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                              break;&nbsp;</div></li><li><div>                      }&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  if(is_array($value)) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Filter the implode glue</span>&nbsp;</div></li><li><div>                      $glue = apply_filters('gf_salesforce_implode_glue', ';', $key);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      $value = implode($glue, $value);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      <span class="comment">// Get rid of empty array values that would result in</span>&nbsp;</div></li><li><div>                      <span class="comment">// List Item 1;;List Item 2 - that causes weird things to happen in</span>&nbsp;</div></li><li><div>                      <span class="comment">// Salesforce</span>&nbsp;</div></li><li><div>                      $value = preg_replace('/'.preg_quote($glue).'+/', $glue, $data[$label]);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                      unset($glue);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      $value = GFCommon::trim_all($value);&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// If the value is empty, don't send it.</span>&nbsp;</div></li><li><div>                  if(empty($value) && $value !== '0') {&nbsp;</div></li><li><div>                      unset($merge_vars[$key]);&nbsp;</div></li><li><div>                  } else {&nbsp;</div></li><li><div>                      <span class="comment">// Add the value to the data being sent</span>&nbsp;</div></li><li><div>                      $merge_vars[$key] = GFCommon::replace_variables($value, $form, $entry, false, false, false );&nbsp;</div></li><li><div>                  }&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Process Boolean opt-out fields</span>&nbsp;</div></li><li><div>              if(isset($merge_vars['emailOptOut'])) {&nbsp;</div></li><li><div>                  $merge_vars['emailOptOut'] = !empty($merge_vars['emailOptOut']);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if(isset($merge_vars['faxOptOut'])) {&nbsp;</div></li><li><div>                  $merge_vars['faxOptOut'] = !empty($merge_vars['faxOptOut']);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>              if(isset($merge_vars['doNotCall'])) {&nbsp;</div></li><li><div>                  $merge_vars['doNotCall'] = !empty($merge_vars['doNotCall']);&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Add Address Line 2 to the street address</span>&nbsp;</div></li><li><div>              if(!empty($merge_vars['street2'])) {&nbsp;</div></li><li><div>                  $merge_vars['street'] .= &quot;\n&quot;.$merge_vars['street2'];&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// You can tap into the data and filter it.</span>&nbsp;</div></li><li><div>              $merge_vars = apply_filters( 'gf_salesforce_push_data', $merge_vars, $form, $entry );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Remove any empty items</span>&nbsp;</div></li><li><div>              $merge_vars = array_filter( $merge_vars );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $return = $this-&gt;send_request($merge_vars);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// If it returns false, there was an error.</span>&nbsp;</div></li><li><div>              if(empty($return)) {&nbsp;</div></li><li><div>                  self::log_error( sprintf(&quot;There was an error adding {$entry['id']} to Salesforce. Here's what was sent: %s&quot;, print_r($merge_vars, true)));&nbsp;</div></li><li><div>                  return false;&nbsp;</div></li><li><div>              } else {&nbsp;</div></li><li><div>                  <span class="comment"><span class="comment">// Otherwise, it was a success.</span></span>&nbsp;</div></li><li><div>                  self::log_debug( sprintf(&quot;Entry {$entry['id']} was added to Salesforce. Here's the available data:\n%s&quot;, print_r($return, true)));&nbsp;</div></li><li><div>                  return true;&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          } catch(Exception $e) {&nbsp;</div></li><li><div>              <span class="comment"><span class="comment">// Otherwise, it was a success.</span></span>&nbsp;</div></li><li><div>              self::log_error( sprintf(&quot;Error: %s&quot;, $e-&gt;getMessage()) );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Is the API valid?</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * Stores validity in `$_service_api_valid` and re-checks if the form has been submitted.</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return boolean True: Org ID is valid; False: Org ID is invalid.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function is_valid_api() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If the form hasn't just been saved, then use the stored value.</span>&nbsp;</div></li><li><div>          <span class="comment">// Otherwise, we should check again if the settings are valid.</span>&nbsp;</div></li><li><div>          if(!is_null($this-&gt;_service_api_valid) && !$this-&gt;is_save_postback() ) {&nbsp;</div></li><li><div>              return $this-&gt;_service_api_valid;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Transient key. Don't check over and over if not necessary.</span>&nbsp;</div></li><li><div>          $key = 'oidv'.sha1($this-&gt;get_plugin_setting('org_id'));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $cached = get_transient( $key );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// If there was a response from the cache, and it's not a newly saved form.</span>&nbsp;</div></li><li><div>          if($cached !== false && !$this-&gt;is_save_postback() ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              self::log_debug(sprintf('Org ID. was cached with key %s and value %s', $key, (boolean)!empty($cached)));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $valid = $cached;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $valid = $this-&gt;send_request(array(), true);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">// Set the cache</span>&nbsp;</div></li><li><div>              set_transient( $key, $valid, DAY_IN_SECONDS );&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $this-&gt;_service_api_valid = $valid;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $this-&gt;_service_api_valid;&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Send data to Salesforce using wp_remote_post()</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @filter gf_salesforce_salesforce_debug_email Disable debug emails (even if you have debugging enabled) by returning false.</span>&nbsp;</div></li><li><div><span class="comment">       * @filter gf_salesforce_salesforce_debug_email_address Modify the email address Salesforce sends debug information to</span>&nbsp;</div></li><li><div><span class="comment">       * @param  array  $post  Data to send to Salesforce</span>&nbsp;</div></li><li><div><span class="comment">       * @param  boolean $test Is this just testing the OID configuration and not actually sendinghelpful data?</span>&nbsp;</div></li><li><div><span class="comment">       * @return array|false         If the Salesforce server returns a non-standard code, an empty array is returned. If there is an error, `false` is returned. Otherwise, the `wp_remote_request` results array is returned.</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      public function send_request($post, $test = false) {&nbsp;</div></li><li><div>          global $wp_version;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Get submission type: Lead or Case</span>&nbsp;</div></li><li><div>          $type = $this-&gt;get_setting('type', 'Lead');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Web-to-Lead uses `oid` and Web to Case uses `orgid`</span>&nbsp;</div></li><li><div>          switch($type) {&nbsp;</div></li><li><div>              case 'Case':&nbsp;</div></li><li><div>                  $post['orgid'] = $this-&gt;get_plugin_setting('org_id');&nbsp;</div></li><li><div>                  break;&nbsp;</div></li><li><div>              default:&nbsp;</div></li><li><div>              case 'Lead':&nbsp;</div></li><li><div>                  $post['oid'] = $this-&gt;get_plugin_setting('org_id');&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// We need an Org ID to post to Salesforce successfully.</span>&nbsp;</div></li><li><div>          if(empty($post['oid']) && empty($post['orgid'])) {&nbsp;</div></li><li><div>              self::log_error( __(&quot;No Salesforce Org. ID was specified.&quot;, 'gravity-forms-salesforce') );&nbsp;</div></li><li><div>              return NULL;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Debug is 0 by default.</span>&nbsp;</div></li><li><div>          $post['debug'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Is this a live request?</span>&nbsp;</div></li><li><div>          if(!$test) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              $post['debug_email'] = isset($post['debug_email']) ? $post['debug_email'] : $this-&gt;get_plugin_setting('debug_email');&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              if( !empty($post['debug_email']) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Don't want to pass this to Salesforce.</span>&nbsp;</div></li><li><div>                  unset($post['debug_email']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Enable debug.</span>&nbsp;</div></li><li><div>                  $post['debug'] = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// The default debugging email is the WordPress admin email address, </span>&nbsp;</div></li><li><div>                  <span class="comment">// unless overridden by passed args.</span>&nbsp;</div></li><li><div>                  $post['debugEmail'] = isset($post['debugEmail']) ? $post['debugEmail'] : get_option( 'admin_email' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// Salesforce</span> will send debug emails to this email address.&nbsp;</div></li><li><div>                  $post['debugEmail'] = apply_filters( 'gf_salesforce_salesforce_debug_email_address', $post['debugEmail']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                  <span class="comment">// If the filter passes an invalid email address, then don't use it.</span>&nbsp;</div></li><li><div>                  $post['debugEmail'] = is_email( $post['debugEmail'] ) ? $post['debugEmail'] : NULL;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              }&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          unset($post['debugEmail']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Redirect back to current page.</span>&nbsp;</div></li><li><div>          $post['retURL'] = add_query_arg(array());&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Set SSL verify to false because of server issues.</span>&nbsp;</div></li><li><div>          $args = array(&nbsp;</div></li><li><div>              'body' =&gt; $post, &nbsp;</div></li><li><div>              'headers' =&gt; array(&nbsp;</div></li><li><div>                  'user-agent' =&gt; 'Gravity Forms Salesforce Add-on plugin - WordPress/'.$wp_version.'; '.get_bloginfo('url'), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'sslverify' =&gt; false, &nbsp;</div></li><li><div>              'timeout' =&gt; MINUTE_IN_SECONDS&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $args = apply_filters( 'gf_salesforce_request_args', $args, $test );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Use test/www subdomain based on whether this is a test or live</span>&nbsp;</div></li><li><div>          $sub = apply_filters( 'gf_salesforce_request_subdomain', ($test ? 'test' : 'www'), $test );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Use (test|www) subdomain and WebTo(Lead|Case) based on setting</span>&nbsp;</div></li><li><div>          $url = apply_filters( 'gf_salesforce_request_url', sprintf('https:<span class="comment">//%s.salesforce.com/servlet/servlet.WebTo%s?encoding=UTF-8', $sub, $type), $args);</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          self::log_debug( sprintf(&quot;This is the data sent to %s (at %s:\n%s)&quot;, $this-&gt;_service_name, $url, print_r($args, true)) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// POST the data to Salesforce</span>&nbsp;</div></li><li><div>          $result = wp_remote_post($url, $args);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          return $this-&gt;handle_response( $result );&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment">       * Determine whether the response was valid or not.</span>&nbsp;</div></li><li><div><span class="comment">       * @param $result</span>&nbsp;</div></li><li><div><span class="comment">       *</span>&nbsp;</div></li><li><div><span class="comment">       * @return array|null NULL if there's an error. Array if</span>&nbsp;</div></li><li><div><span class="comment">       */</span>&nbsp;</div></li><li><div>      private function handle_response( $result ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// There was an error</span>&nbsp;</div></li><li><div>          if(is_wp_error( $result )) {&nbsp;</div></li><li><div>              self::log_error( sprintf(&quot;There was an error adding the entry to Salesforce: %s&quot;, $result-&gt;get_error_message()));&nbsp;</div></li><li><div>              return array();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Find out what the response code is</span>&nbsp;</div></li><li><div>          $code = wp_remote_retrieve_response_code( $result );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Salesforce</span> should ALWAYS return 200, even if there's an error.&nbsp;</div></li><li><div>          <span class="comment">// Otherwise, their server may be down.</span>&nbsp;</div></li><li><div>          if( intval( $code ) !== 200) {&nbsp;</div></li><li><div>              self::log_error( sprintf(&quot;The Salesforce server may be down, since it should always return '200'. The code it returned was: %s&quot;, $code));&nbsp;</div></li><li><div>              return array();&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// If `is-processed` isn't set, then there's no error.</span>&nbsp;</div></li><li><div>          elseif(!isset($result['headers']['is-processed'])) {&nbsp;</div></li><li><div>              self::log_debug(&quot;The `is-processed` header isn't set. This means there were no errors adding the entry.&quot;);&nbsp;</div></li><li><div>              return $result;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// If `is-processed` is &quot;true&quot;, then there's no error.</span>&nbsp;</div></li><li><div>          else if ($result['headers']['is-processed'] === &quot;true&quot;) {&nbsp;</div></li><li><div>              self::log_debug(&quot;The `is-processed` header is set to 'true'. This means there were no errors adding the entry.&quot;);&nbsp;</div></li><li><div>              return $result;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>          <span class="comment">// But if there's the word &quot;Exception&quot;, there's an error.</span>&nbsp;</div></li><li><div>          else if(strpos($result['headers']['is-processed'], 'Exception')) {&nbsp;</div></li><li><div>              self::log_error(sprintf(__('The `is-processed` header shows an Exception: %s. This means there was an error adding the entry.', 'gravity-forms-salesforce'), $result['headers']['is-processed']));&nbsp;</div></li><li><div>              return NULL;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// Don't know how you get here, but if you do, here's an array</span>&nbsp;</div></li><li><div>          return array();&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Gravity Forms Salesforce Add-On</li><li><span></span>3.1.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>