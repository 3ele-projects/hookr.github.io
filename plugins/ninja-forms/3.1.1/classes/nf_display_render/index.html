<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="3.1.1" data-slug="ninja-forms" data-type="class" data-id="38560"><head xmlns="http://www.w3.org/1999/xhtml"><title> nf_display_render | class | Ninja Forms | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="NF_Display_Render, class, plugin, ninja-forms, 3.1.1" /><meta name="description" content="The Ninja Forms NF Display Render class." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.10"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=0b8ef9251d9d418ea3669910ae044f45' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.10' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/nf_display_render/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fnf_display_render%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fnf_display_render%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-ninja-forms-3.1.1-class-nf_display_render","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="nf_display_render" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to ninja-forms." href="http://hookr.io/plugins/ninja-forms/" class="plugin"><span property="name">ninja-forms</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.1.1." href="http://hookr.io/plugins/ninja-forms/3.1.1/" class="H_VERSION"><span property="name">3.1.1</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/ninja-forms/3.1.1/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">nf_display_render</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="1326"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/all/" title="All">All <span class="count badge">1326</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="573"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/hooks/" title="Hooks">Hooks <span class="count badge">573</span></a></li><li class="" data-id="action" data-count="122"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/actions/" title="Actions">Actions <span class="count badge">122</span></a></li><li class="" data-id="filter" data-count="451"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/filters/" title="Filters">Filters <span class="count badge">451</span></a></li><li class="active" data-id="class" data-count="193"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/classes/" title="Classes">Classes <span class="count badge">193</span></a></li><li class="" data-id="constant" data-count="31"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/constants/" title="Constants">Constants <span class="count badge">31</span></a></li><li class="" data-id="function" data-count="515"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/functions/" title="Functions">Functions <span class="count badge">515</span></a></li><li class="" data-id="shortcode" data-count="14"><a href="http://hookr.io/plugins/ninja-forms/3.1.1/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">14</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>NF_Display_Render</strong></h1><p>The Ninja Forms <strong>NF Display Render</strong> class.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/ninja-forms/3.1.1/files/includes-display-render/" class="file">/includes/Display/Render.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="3" class="block" start="3"><li><div>final class NF_Display_Render&nbsp;</div></li><li><div>{&nbsp;</div></li><li><div>    protected static $loaded_templates = array(&nbsp;</div></li><li><div>        'app-layout', &nbsp;</div></li><li><div>        'app-before-form', &nbsp;</div></li><li><div>        'app-after-form', &nbsp;</div></li><li><div>        'app-before-fields', &nbsp;</div></li><li><div>        'app-after-fields', &nbsp;</div></li><li><div>        'app-before-field', &nbsp;</div></li><li><div>        'app-after-field', &nbsp;</div></li><li><div>        'form-layout', &nbsp;</div></li><li><div>        'form-hp', &nbsp;</div></li><li><div>        'field-layout', &nbsp;</div></li><li><div>        'field-before', &nbsp;</div></li><li><div>        'field-after', &nbsp;</div></li><li><div>        'fields-wrap', &nbsp;</div></li><li><div>        'fields-wrap-no-label', &nbsp;</div></li><li><div>        'fields-wrap-no-container', &nbsp;</div></li><li><div>        'fields-label', &nbsp;</div></li><li><div>        'fields-error', &nbsp;</div></li><li><div>        'form-error', &nbsp;</div></li><li><div>        'field-input-limit', &nbsp;</div></li><li><div>        'field-null'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected static $use_test_values = FALSE;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected static $form_uses_recaptcha = array();&nbsp;</div></li><li><div>    protected static $form_uses_datepicker = array();&nbsp;</div></li><li><div>    protected static $form_uses_inputmask = array();&nbsp;</div></li><li><div>    protected static $form_uses_rte = array();&nbsp;</div></li><li><div>    protected static $form_uses_textarea_media = array();&nbsp;</div></li><li><div>    protected static $form_uses_helptext = array();&nbsp;</div></li><li><div>    protected static $form_uses_starrating = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function localize( $form_id )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wp_locale;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $capability = apply_filters( 'ninja_forms_display_test_values_capabilities', 'read' );&nbsp;</div></li><li><div>        if( isset( $_GET[ 'ninja_forms_test_values' ] ) && current_user_can( $capability ) ) {&nbsp;</div></li><li><div>            self::$use_test_values = TRUE;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( ! has_action( 'wp_footer', 'NF_Display_Render::output_templates', 9999 ) ) {&nbsp;</div></li><li><div>            add_action( 'wp_footer', 'NF_Display_Render::output_templates', 9999 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        $form = Ninja_Forms()-&gt;form( $form_id )-&gt;get();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = $form-&gt;get_settings();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( $settings as $name =&gt; $value ) {&nbsp;</div></li><li><div>            if( ! in_array(&nbsp;</div></li><li><div>                    $name, &nbsp;</div></li><li><div>                    array(&nbsp;</div></li><li><div>                        'changeEmailErrorMsg', &nbsp;</div></li><li><div>                        'confirmFieldErrorMsg', &nbsp;</div></li><li><div>                        'fieldNumberNumMinError', &nbsp;</div></li><li><div>                        'fieldNumberNumMaxError', &nbsp;</div></li><li><div>                        'fieldNumberIncrementBy', &nbsp;</div></li><li><div>                        'formErrorsCorrectErrors', &nbsp;</div></li><li><div>                        'validateRequiredField', &nbsp;</div></li><li><div>                        'honeypotHoneypotError', &nbsp;</div></li><li><div>                        'fieldsMarkedRequired', &nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> ) ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( $value ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            unset( $settings[ $name ] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = array_merge( Ninja_Forms::config( 'i18nFrontEnd' ), $settings );        &nbsp;</div></li><li><div>        $settings = apply_filters( 'ninja_forms_display_form_settings', $settings, $form_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form-&gt;update_settings( $settings );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $form-&gt;get_setting( 'logged_in' ) && ! is_user_logged_in() ) {&nbsp;</div></li><li><div>            echo do_shortcode( $form-&gt;get_setting( 'not_logged_in_msg' ));&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $form-&gt;get_setting( 'sub_limit_number' ) ) {&nbsp;</div></li><li><div>            $subs = Ninja_Forms()-&gt;form( $form_id )-&gt;get_subs();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // TODO: Optimize Query&nbsp;</div></li><li><div>            global $wpdb;&nbsp;</div></li><li><div>            $count = 0;&nbsp;</div></li><li><div>            $subs = $wpdb-&gt;get_results( &quot;SELECT post_id FROM &quot; . $wpdb-&gt;postmeta . &quot; WHERE `meta_key` = '_form_id' AND `meta_value` = $form_id&quot; );&nbsp;</div></li><li><div>            foreach( $subs as $sub ) {&nbsp;</div></li><li><div>                if( 'publish' == get_post_status( $sub-&gt;post_id ) ) $count++;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( $count &gt;= $form-&gt;get_setting( 'sub_limit_number' ) ) {&nbsp;</div></li><li><div>                echo do_shortcode( apply_filters( 'nf_sub_limit_reached_msg', $form-&gt;get_setting( 'sub_limit_msg' ), $form_id ));&nbsp;</div></li><li><div>                return;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( ! apply_filters( 'ninja_forms_display_show_form', true, $form_id, $form ) ) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $currency = $form-&gt;get_setting( 'currency', Ninja_Forms()-&gt;get_setting( 'currency' ) );&nbsp;</div></li><li><div>        $currency_symbol = Ninja_Forms::config( 'CurrencySymbol' );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'currency_symbol', ( isset( $currency_symbol[ $currency ] ) ) ? $currency_symbol[ $currency ] : '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $title = apply_filters( 'ninja_forms_form_title', $form-&gt;get_setting( 'title' ), $form_id );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'title', $title );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $before_form = apply_filters( 'ninja_forms_display_before_form', '', $form_id );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'beforeForm', $before_form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $before_fields = apply_filters( 'ninja_forms_display_before_fields', '', $form_id );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'beforeFields', $before_fields );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $after_fields = apply_filters( 'ninja_forms_display_after_fields', '', $form_id );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'afterFields', $after_fields );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $after_form = apply_filters( 'ninja_forms_display_after_form', '', $form_id );&nbsp;</div></li><li><div>        $form-&gt;update_setting( 'afterForm', $after_form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form_fields = Ninja_Forms()-&gt;form( $form_id )-&gt;get_fields();&nbsp;</div></li><li><div>        $fields = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( empty( $form_fields ) ) {&nbsp;</div></li><li><div>            echo __( 'No Fields Found.', 'ninja-forms' );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // TODO: Replace unique field key checks with a refactored model/factory.&nbsp;</div></li><li><div>            $unique_field_keys = array();&nbsp;</div></li><li><div>            $cache_updated = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach ($form_fields as $field) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( is_object( $field ) ) {&nbsp;</div></li><li><div>                    $field = array(&nbsp;</div></li><li><div>                        'id' =&gt; $field-&gt;get_id(), &nbsp;</div></li><li><div>                        'settings' =&gt; $field-&gt;get_settings()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_id = $field[ 'id' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /**&nbsp;</div></li><li><div>                 * Duplicate field check.&nbsp;</div></li><li><div>                 * TODO: Replace unique field key checks with a refactored model/factory.&nbsp;</div></li><li><div>                 */&nbsp;</div></li><li><div>                $field_key = $field[ 'settings' ][ 'key' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( in_array( $field_key, $unique_field_keys ) || '' == $field_key ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Delete the field.&nbsp;</div></li><li><div>                    Ninja_Forms()-&gt;request( 'delete-field' )-&gt;data( array( 'field_id' =&gt; $field_id ) )-&gt;dispatch();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // Remove the field from cache.&nbsp;</div></li><li><div>                    if( $form_cache ) {&nbsp;</div></li><li><div>                        if( isset( $form_cache[ 'fields' ] ) ) {&nbsp;</div></li><li><div>                            foreach( $form_cache[ 'fields' ] as $cached_field_key =&gt; $cached_field ) {&nbsp;</div></li><li><div>                                if( ! isset( $cached_field[ 'id' ] ) ) continue;&nbsp;</div></li><li><div>                                if( $field_id != $cached_field[ 'id' ] ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                // Flag cache to update.&nbsp;</div></li><li><div>                                $cache_updated = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                unset( $form_cache[ 'fields' ][ $cached_field_key ] ); // Remove the field.&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    continue; // Skip the duplicate field.&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                array_push( $unique_field_keys, $field_key ); // Log unique key.&nbsp;</div></li><li><div>                /** END Duplicate field check. */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_type = $field[ 'settings' ][ 'type' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( ! is_string( $field_type ) ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( ! isset( Ninja_Forms()-&gt;fields[ $field_type ] ) ) {&nbsp;</div></li><li><div>                    $unknown_field = NF_Fields_Unknown::create( $field );&nbsp;</div></li><li><div>                    $field = array(&nbsp;</div></li><li><div>                        'settings' =&gt; $unknown_field-&gt;get_settings(), &nbsp;</div></li><li><div>                        'id' =&gt; $unknown_field-&gt;get_id()&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                    $field_type = $field[ 'settings' ][ 'type' ];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field = apply_filters('ninja_forms_localize_fields', $field);&nbsp;</div></li><li><div>                $field = apply_filters('ninja_forms_localize_field_' . $field_type, $field);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_class = Ninja_Forms()-&gt;fields[$field_type];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (self::$use_test_values) {&nbsp;</div></li><li><div>                    $field[ 'value' ] = $field_class-&gt;get_test_value();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // Copy field ID into the field settings array for use in localized data.&nbsp;</div></li><li><div>                $field[ 'settings' ][ 'id' ] = $field[ 'id' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                /**&nbsp;</div></li><li><div>                 * TODO: For backwards compatibility, run the original action, get contents from the output buffer, and return the contents through the filter. Also display a PHP Notice for a deprecate filter.&nbsp;</div></li><li><div>                 */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $display_before = apply_filters( 'ninja_forms_display_before_field_type_' . $field[ 'settings' ][ 'type' ], '' );&nbsp;</div></li><li><div>                $display_before = apply_filters( 'ninja_forms_display_before_field_key_' . $field[ 'settings' ][ 'key' ], $display_before );&nbsp;</div></li><li><div>                $field[ 'settings' ][ 'beforeField' ] = $display_before;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $display_after = apply_filters( 'ninja_forms_display_after_field_type_' . $field[ 'settings' ][ 'type' ], '' );&nbsp;</div></li><li><div>                $display_after = apply_filters( 'ninja_forms_display_after_field_key_' . $field[ 'settings' ][ 'key' ], $display_after );&nbsp;</div></li><li><div>                $field[ 'settings' ][ 'afterField' ] = $display_after;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $templates = $field_class-&gt;get_templates();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (!array($templates)) {&nbsp;</div></li><li><div>                    $templates = array($templates);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ($templates as $template) {&nbsp;</div></li><li><div>                    self::load_template('fields-' . $template);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $settings = $field[ 'settings' ];&nbsp;</div></li><li><div>                foreach ($settings as $key =&gt; $setting) {&nbsp;</div></li><li><div>                    if (is_numeric($setting)) $settings[$key] = floatval($setting);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( ! isset( $settings[ 'label_pos' ] ) || 'default' == $settings[ 'label_pos' ] ) {&nbsp;</div></li><li><div>                    $settings[ 'label_pos' ] = $form-&gt;get_setting( 'default_label_pos' );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $settings[ 'parentType' ] = $field_class-&gt;get_parent_type();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( 'list' == $settings[ 'parentType' ] && isset( $settings[ 'options' ] ) && is_array( $settings[ 'options' ] ) ) {&nbsp;</div></li><li><div>                    $settings[ 'options' ] = apply_filters( 'ninja_forms_render_options', $settings[ 'options' ], $settings );&nbsp;</div></li><li><div>                    $settings[ 'options' ] = apply_filters( 'ninja_forms_render_options_' . $field_type, $settings[ 'options' ], $settings );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $default_value = ( isset( $settings[ 'default' ] ) ) ? $settings[ 'default' ] : null;&nbsp;</div></li><li><div>                $default_value = apply_filters('ninja_forms_render_default_value', $default_value, $field_type, $settings);&nbsp;</div></li><li><div>                if ( $default_value ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $default_value = preg_replace( '/{.*}/', '', $default_value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($default_value) {&nbsp;</div></li><li><div>                        $settings['value'] = $default_value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        ob_start();&nbsp;</div></li><li><div>                        do_shortcode( $settings['value'] );&nbsp;</div></li><li><div>                        $ob = ob_get_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if( ! $ob ) {&nbsp;</div></li><li><div>                            $settings['value'] = do_shortcode( $settings['value'] );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $thousands_sep = $wp_locale-&gt;number_format[ 'thousands_sep'];&nbsp;</div></li><li><div>                $decimal_point = $wp_locale-&gt;number_format[ 'decimal_point' ];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // TODO: Find a better way to do this.&nbsp;</div></li><li><div>                if ('shipping' == $settings['type']) {&nbsp;</div></li><li><div>                    $settings[ 'shipping_cost' ] = preg_replace ('/[^\d, \.]/', '', $settings[ 'shipping_cost' ] );&nbsp;</div></li><li><div>                    $settings[ 'shipping_cost' ] = str_replace( Ninja_Forms()-&gt;get_setting( 'currency_symbol' ), '', $settings[ 'shipping_cost' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $settings[ 'shipping_cost' ] = str_replace( $decimal_point, '||', $settings[ 'shipping_cost' ] );&nbsp;</div></li><li><div>                    $settings[ 'shipping_cost' ] = str_replace( $thousands_sep, '', $settings[ 'shipping_cost' ] );&nbsp;</div></li><li><div>                    $settings[ 'shipping_cost' ] = str_replace( '||', '.', $settings[ 'shipping_cost' ] );&nbsp;</div></li><li><div>                } elseif ('product' == $settings['type']) {&nbsp;</div></li><li><div>                    $settings['product_price'] = preg_replace ('/[^\d, \.]/', '', $settings[ 'product_price' ] );&nbsp;</div></li><li><div>                    $settings['product_price'] = str_replace( Ninja_Forms()-&gt;get_setting( 'currency_symbol' ), '', $settings['product_price']);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $settings[ 'product_price' ] = str_replace( $decimal_point, '||', $settings[ 'product_price' ] );&nbsp;</div></li><li><div>                    $settings[ 'product_price' ] = str_replace( $thousands_sep, '', $settings[ 'product_price' ] );&nbsp;</div></li><li><div>                    $settings[ 'product_price' ] = str_replace( '||', '.', $settings[ 'product_price' ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                } elseif ('total' == $settings['type'] && isset($settings['value'])) {&nbsp;</div></li><li><div>                    $settings['value'] = number_format($settings['value'], 2);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $settings['element_templates'] = $templates;&nbsp;</div></li><li><div>                $settings['old_classname'] = $field_class-&gt;get_old_classname();&nbsp;</div></li><li><div>                $settings['wrap_template'] = $field_class-&gt;get_wrap_template();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $fields[] = apply_filters( 'ninja_forms_localize_field_settings_' . $field_type, $settings, $form );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( 'recaptcha' == $field[ 'settings' ][ 'type' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_recaptcha, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( 'date' == $field[ 'settings' ][ 'type' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_datepicker, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( 'starrating' == $field[ 'settings' ][ 'type' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_starrating, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( isset( $field[ 'settings' ][ 'mask' ] ) && $field[ 'settings' ][ 'mask' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_inputmask, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( isset( $field[ 'settings' ][ 'textarea_rte' ] ) && $field[ 'settings' ][ 'textarea_rte' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_rte, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( isset( $field[ 'settings' ][ 'textarea_media' ] ) && $field[ 'settings' ][ 'textarea_media' ] ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_textarea_media, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>                if( isset( $field[ 'settings' ][ 'help_text' ] ) && strip_tags( $field[ 'settings' ][ 'help_text' ] ) ) {&nbsp;</div></li><li><div>                    array_push( self::$form_uses_helptext, $form_id );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if( $cache_updated ) {&nbsp;</div></li><li><div>                update_option('nf_form_' . $form_id, $form_cache); // Update form cache without duplicate fields.&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $fields = apply_filters( 'ninja_forms_display_fields', $fields );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Output Form Container&nbsp;</div></li><li><div>        do_action( 'ninja_forms_before_container', $form_id, $form-&gt;get_settings(), $form_fields );&nbsp;</div></li><li><div>        Ninja_Forms::template( 'display-form-container.html.php', compact( 'form_id' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;!-- TODO: Move to Template File. --&gt;&nbsp;</div></li><li><div>        &lt;script&gt;&nbsp;</div></li><li><div>            var formDisplay = 1;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /* Maybe initialize nfForms object */&nbsp;</div></li><li><div>            var nfForms = nfForms || [];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /* Build Form Data */&nbsp;</div></li><li><div>            var form = [];&nbsp;</div></li><li><div>            form.id = '&lt;?php echo $form_id; ?&gt;';&nbsp;</div></li><li><div>            form.settings = &lt;?php echo wp_json_encode( $form-&gt;get_settings() ); ?&gt;;&nbsp;</div></li><li><div>            form.fields = &lt;?php echo wp_json_encode( $fields ); ?&gt;;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /* Add Form Data to nfForms object */&nbsp;</div></li><li><div>            nfForms.push( form );&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        self::enqueue_scripts( $form_id );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function localize_preview( $form_id )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        $capability = apply_filters( 'ninja_forms_display_test_values_capabilities', 'read' );&nbsp;</div></li><li><div>        if( isset( $_GET[ 'ninja_forms_test_values' ] ) && current_user_can( $capability ) ) {&nbsp;</div></li><li><div>            self::$use_test_values = TRUE;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_action( 'wp_footer', 'NF_Display_Render::output_templates', 9999 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form = get_user_option( 'nf_form_preview_' . $form_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( ! $form ) {&nbsp;</div></li><li><div>            self::localize( $form_id );&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( isset( $form[ 'settings' ][ 'logged_in' ] ) && $form[ 'settings' ][ 'logged_in' ] && ! is_user_logged_in() ) {&nbsp;</div></li><li><div>            echo do_shortcode( $form[ 'settings' ][ 'not_logged_in_msg' ]);&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form[ 'settings' ] = array_merge( Ninja_Forms::config( 'i18nFrontEnd' ), $form[ 'settings' ] );&nbsp;</div></li><li><div>        $form[ 'settings' ] = apply_filters( 'ninja_forms_display_form_settings', $form[ 'settings' ], $form_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'is_preview' ] = TRUE;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $currency = ( isset( $form[ 'settings' ][ 'currency' ] ) && $form[ 'settings' ][ 'currency' ] ) ? $form[ 'settings' ][ 'currency' ] : Ninja_Forms()-&gt;get_setting( 'currency' ) ;&nbsp;</div></li><li><div>        $currency_symbol = Ninja_Forms::config( 'CurrencySymbol' );&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'currency_symbol' ] = ( isset( $currency_symbol[ $currency ] ) ) ? $currency_symbol[ $currency ] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $before_form = apply_filters( 'ninja_forms_display_before_form', '', $form_id, TRUE );&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'beforeForm'] = $before_form;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $before_fields = apply_filters( 'ninja_forms_display_before_fields', '', $form_id, TRUE );&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'beforeFields'] = $before_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $after_fields = apply_filters( 'ninja_forms_display_after_fields', '', $form_id, TRUE );&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'afterFields'] = $after_fields;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $after_form = apply_filters( 'ninja_forms_display_after_form', '', $form_id, TRUE );&nbsp;</div></li><li><div>        $form[ 'settings' ][ 'afterForm'] = $after_form;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $fields = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( empty( $form['fields'] ) ) {&nbsp;</div></li><li><div>            echo __( 'No Fields Found.', 'ninja-forms' );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            foreach ($form['fields'] as $field_id =&gt; $field) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_type = $field['settings']['type'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( ! isset( Ninja_Forms()-&gt;fields[ $field_type ] ) ) continue;&nbsp;</div></li><li><div>                if( ! apply_filters( 'ninja_forms_preview_display_type_' . $field_type, TRUE ) ) continue;&nbsp;</div></li><li><div>                if( ! apply_filters( 'ninja_forms_preview_display_field', $field ) ) continue;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field['settings']['id'] = $field_id;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field = apply_filters('ninja_forms_localize_fields_preview', $field);&nbsp;</div></li><li><div>                $field = apply_filters('ninja_forms_localize_field_' . $field_type . '_preview', $field);&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $display_before = apply_filters( 'ninja_forms_display_before_field_type_' . $field['settings'][ 'type' ], '' );&nbsp;</div></li><li><div>                $display_before = apply_filters( 'ninja_forms_display_before_field_key_' . $field['settings'][ 'key' ], $display_before );&nbsp;</div></li><li><div>                $field['settings'][ 'beforeField' ] = $display_before;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $display_after = apply_filters( 'ninja_forms_display_after_field_type_' . $field['settings'][ 'type' ], '' );&nbsp;</div></li><li><div>                $display_after = apply_filters( 'ninja_forms_display_after_field_key_' . $field['settings'][ 'key' ], $display_after );&nbsp;</div></li><li><div>                $field['settings'][ 'afterField' ] = $display_after;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ($field['settings'] as $key =&gt; $setting) {&nbsp;</div></li><li><div>                    if (is_numeric($setting)) $field['settings'][$key] = floatval($setting);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( ! isset( $field['settings'][ 'label_pos' ] ) || 'default' == $field['settings'][ 'label_pos' ] ) {&nbsp;</div></li><li><div>                    if( isset( $form[ 'settings' ][ 'default_label_pos' ] ) ) {&nbsp;</div></li><li><div>                        $field['settings'][ 'label_pos' ] = $form[ 'settings' ][ 'default_label_pos' ];&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field_class = Ninja_Forms()-&gt;fields[$field_type];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $templates = $field_class-&gt;get_templates();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (!array($templates)) {&nbsp;</div></li><li><div>                    $templates = array($templates);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                foreach ($templates as $template) {&nbsp;</div></li><li><div>                    self::load_template('fields-' . $template);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if (self::$use_test_values) {&nbsp;</div></li><li><div>                    $field['settings']['value'] = $field_class-&gt;get_test_value();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field[ 'settings' ][ 'parentType' ] = $field_class-&gt;get_parent_type();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( 'list' == $field[ 'settings' ][ 'parentType' ] && isset( $field['settings'][ 'options' ] ) && is_array( $field['settings'][ 'options' ] ) ) {&nbsp;</div></li><li><div>                    $field['settings'][ 'options' ] = apply_filters( 'ninja_forms_render_options', $field['settings'][ 'options' ], $field['settings'] );&nbsp;</div></li><li><div>                    $field['settings'][ 'options' ] = apply_filters( 'ninja_forms_render_options_' . $field['settings'][ 'type' ], $field['settings'][ 'options' ], $field['settings'] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $default_value = ( isset( $field[ 'settings' ][ 'default' ] ) ) ? $field[ 'settings' ][ 'default' ] : null;&nbsp;</div></li><li><div>                $default_value = apply_filters( 'ninja_forms_render_default_value', $default_value, $field_type, $field[ 'settings' ]);&nbsp;</div></li><li><div>                if( $default_value ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $default_value = preg_replace( '/{.*}/', '', $default_value );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ($default_value) {&nbsp;</div></li><li><div>                        $field['settings']['value'] = $default_value;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        ob_start();&nbsp;</div></li><li><div>                        do_shortcode( $field['settings']['value'] );&nbsp;</div></li><li><div>                        $ob = ob_get_clean();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        if( ! $ob ) {&nbsp;</div></li><li><div>                            $field['settings']['value'] = do_shortcode( $field['settings']['value'] );&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                // TODO: Find a better way to do this.&nbsp;</div></li><li><div>                if ('shipping' == $field['settings']['type']) {&nbsp;</div></li><li><div>                    $field['settings']['shipping_cost'] = preg_replace ('/[^\d, \.]/', '', $field['settings']['shipping_cost'] );&nbsp;</div></li><li><div>                    $field['settings']['shipping_cost'] = str_replace( Ninja_Forms()-&gt;get_setting( 'currency_symbol' ), '', $field['settings']['shipping_cost'] );&nbsp;</div></li><li><div>                    $field['settings']['shipping_cost'] = number_format($field['settings']['shipping_cost'], 2);&nbsp;</div></li><li><div>                } elseif ('product' == $field['settings']['type']) {&nbsp;</div></li><li><div>                    // TODO: Does the currency marker need to stripped here?&nbsp;</div></li><li><div>                    $field['settings']['product_price'] = preg_replace ('/[^\d, \.]/', '', $field['settings']['product_price'] );&nbsp;</div></li><li><div>                    $field['settings']['product_price'] = str_replace( Ninja_Forms()-&gt;get_setting( 'currency_symbol' ), '', $field['settings']['product_price'] );&nbsp;</div></li><li><div>                    $field['settings']['product_price'] = number_format($field['settings']['product_price'], 2);&nbsp;</div></li><li><div>                } elseif ('total' == $field['settings']['type']) {&nbsp;</div></li><li><div>                    if( ! isset( $field[ 'settings' ][ 'value' ] ) ) $field[ 'settings' ][ 'value' ] = 0;&nbsp;</div></li><li><div>                    $field['settings']['value'] = number_format($field['settings']['value'], 2);&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $field['settings']['element_templates'] = $templates;&nbsp;</div></li><li><div>                $field['settings']['old_classname'] = $field_class-&gt;get_old_classname();&nbsp;</div></li><li><div>                $field['settings']['wrap_template'] = $field_class-&gt;get_wrap_template();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $fields[] = apply_filters( 'ninja_forms_localize_field_settings_' . $field_type, $field['settings'], $form );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Output Form Container&nbsp;</div></li><li><div>        do_action( 'ninja_forms_before_container_preview', $form_id, $form[ 'settings' ], $fields );&nbsp;</div></li><li><div>        Ninja_Forms::template( 'display-form-container.html.php', compact( 'form_id' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;!-- TODO: Move to Template File. --&gt;&nbsp;</div></li><li><div>        &lt;script&gt;&nbsp;</div></li><li><div>            // Maybe initialize nfForms object&nbsp;</div></li><li><div>            var nfForms = nfForms || [];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Build Form Data&nbsp;</div></li><li><div>            var form = [];&nbsp;</div></li><li><div>            form.id = '&lt;?php echo $form['id']; ?&gt;';&nbsp;</div></li><li><div>            form.settings = JSON.parse( '&lt;?php echo WPN_Helper::addslashes( wp_json_encode( $form['settings'] ) ); ?&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            form.fields = JSON.parse( '&lt;?php echo WPN_Helper::addslashes( wp_json_encode(  $fields ) ); ?&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Add Form Data to nfForms object&nbsp;</div></li><li><div>            nfForms.push( form );&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>        self::enqueue_scripts( $form_id, true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function enqueue_scripts( $form_id, $is_preview = false )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        global $wp_locale;&nbsp;</div></li><li><div>        $form = Ninja_Forms()-&gt;form( $form_id )-&gt;get();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $ver = Ninja_Forms::VERSION;&nbsp;</div></li><li><div>        $js_dir = Ninja_Forms::$url . 'assets/js/min/';&nbsp;</div></li><li><div>        $css_dir = Ninja_Forms::$url . 'assets/css/';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::enqueue_styles_display( $css_dir );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $is_preview || in_array( $form_id, self::$form_uses_recaptcha ) ) {&nbsp;</div></li><li><div>            $recaptcha_lang = Ninja_Forms()-&gt;get_setting('recaptcha_lang');&nbsp;</div></li><li><div>            wp_enqueue_script('nf-google-recaptcha', 'https://www.google.com/recaptcha/api.js?hl=' . $recaptcha_lang . '&onload=nfRenderRecaptcha&render=explicit', array( 'jquery', 'nf-front-end-deps' ), $ver, TRUE );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $is_preview || in_array( $form_id, self::$form_uses_datepicker ) ) {&nbsp;</div></li><li><div>            wp_enqueue_style( 'pikaday-responsive', $css_dir . 'pikaday-package.css', $ver );&nbsp;</div></li><li><div>            wp_enqueue_script('nf-front-end--datepicker', $js_dir . 'front-end--datepicker.min.js', array( 'jquery' ), $ver );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $is_preview || in_array( $form_id, self::$form_uses_inputmask ) ) {&nbsp;</div></li><li><div>            wp_enqueue_script('nf-front-end--inputmask', $js_dir . 'front-end--inputmask.min.js', array( 'jquery' ), $ver );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>         if( $is_preview || in_array( $form_id, self::$form_uses_rte ) ) {&nbsp;</div></li><li><div>             if( $is_preview || in_array( $form_id, self::$form_uses_textarea_media ) ) {&nbsp;</div></li><li><div>                wp_enqueue_media();&nbsp;</div></li><li><div>             }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wp_enqueue_style( 'summernote', $css_dir . 'summernote.css' , $ver );&nbsp;</div></li><li><div>            wp_enqueue_style( 'codemirror', $css_dir . 'codemirror.css' , $ver );&nbsp;</div></li><li><div>            wp_enqueue_style( 'codemirror-monokai', $css_dir . 'monokai-theme.css', $ver );&nbsp;</div></li><li><div>            wp_enqueue_script('nf-front-end--rte', $js_dir . 'front-end--rte.min.js', array( 'jquery' ), $ver );&nbsp;</div></li><li><div>         }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $is_preview || in_array( $form_id, self::$form_uses_helptext ) ) {&nbsp;</div></li><li><div>            wp_enqueue_style( 'jBox', $css_dir . 'jBox.css', $ver );&nbsp;</div></li><li><div>            wp_enqueue_script('nf-front-end--helptext', $js_dir . 'front-end--helptext.min.js', array( 'jquery' ), $ver );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( $is_preview || in_array( $form_id, self::$form_uses_starrating ) ) {&nbsp;</div></li><li><div>            wp_enqueue_style( 'rating', $css_dir . 'rating.css', Ninja_Forms::VERSION );&nbsp;</div></li><li><div>            wp_enqueue_script('nf-front-end--starrating', $js_dir . 'front-end--starrating.min.js', array( 'jquery' ), $ver );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_enqueue_script( 'nf-front-end-deps', $js_dir . 'front-end-deps.js', array( 'jquery', 'backbone' ), $ver );&nbsp;</div></li><li><div>        wp_enqueue_script( 'nf-front-end', $js_dir . 'front-end.js', array( 'nf-front-end-deps' ), $ver );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_localize_script( 'nf-front-end', 'nfi18n', Ninja_Forms::config( 'i18nFrontEnd' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $data = apply_filters( 'ninja_forms_render_localize_script_data', array(&nbsp;</div></li><li><div>            'ajaxNonce' =&gt; wp_create_nonce( 'ninja_forms_display_nonce' ), &nbsp;</div></li><li><div>            'adminAjax' =&gt; admin_url( 'admin-ajax.php' ), &nbsp;</div></li><li><div>            'requireBaseUrl' =&gt; Ninja_Forms::$url . 'assets/js/', &nbsp;</div></li><li><div>            'use_merge_tags' =&gt; array(), &nbsp;</div></li><li><div>            'opinionated_styles' =&gt; Ninja_Forms()-&gt;get_setting( 'opinionated_styles' )&nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach( Ninja_Forms()-&gt;fields as $field ) {&nbsp;</div></li><li><div>            foreach( $field-&gt;use_merge_tags() as $merge_tag ) {&nbsp;</div></li><li><div>                $data[ 'use_merge_tags' ][ $merge_tag ][ $field-&gt;get_type() ] = $field-&gt;get_type();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_localize_script( 'nf-front-end', 'nfFrontEnd', $data );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        do_action( 'ninja_forms_enqueue_scripts', array( 'form_id' =&gt; $form_id ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        do_action( 'nf_display_enqueue_scripts' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Enqueue NF frontend basic display styles.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $css_dir&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function enqueue_styles_display( $css_dir ) {&nbsp;</div></li><li><div>        switch( Ninja_Forms()-&gt;get_setting( 'opinionated_styles' ) ) {&nbsp;</div></li><li><div>            case 'light':&nbsp;</div></li><li><div>                wp_enqueue_style( 'nf-display', $css_dir . 'display-opinions-light.css', array( 'dashicons' ) );&nbsp;</div></li><li><div>                wp_enqueue_style( 'nf-font-awesome', $css_dir . 'font-awesome.min.css' );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            case 'dark':&nbsp;</div></li><li><div>                wp_enqueue_style( 'nf-display', $css_dir . 'display-opinions-dark.css', array( 'dashicons' ) );&nbsp;</div></li><li><div>                wp_enqueue_style( 'nf-font-awesome', $css_dir . 'font-awesome.min.css' );&nbsp;</div></li><li><div>                break;&nbsp;</div></li><li><div>            default:&nbsp;</div></li><li><div>                wp_enqueue_style( 'nf-display', $css_dir . 'display-structure.css', array( 'dashicons' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected static function load_template( $file_name = '' )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        if( ! $file_name ) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if( self::is_template_loaded( $file_name ) ) return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::$loaded_templates[] = $file_name;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function output_templates()&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        // Build File Path Hierarchy&nbsp;</div></li><li><div>        $file_paths = apply_filters( 'ninja_forms_field_template_file_paths', array(&nbsp;</div></li><li><div>            get_template_directory() . '/ninja-forms/templates/', &nbsp;</div></li><li><div> ));&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $file_paths[] = Ninja_Forms::$dir . 'includes/Templates/';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Search for and Output File Templates&nbsp;</div></li><li><div>        foreach( self::$loaded_templates as $file_name ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            foreach( $file_paths as $path ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if( file_exists( $path . &quot;$file_name.html&quot; ) ) {&nbsp;</div></li><li><div>                    echo file_get_contents( $path . &quot;$file_name.html&quot; );&nbsp;</div></li><li><div>                    break;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;script&gt;&nbsp;</div></li><li><div>            var post_max_size = '&lt;?php echo WPN_Helper::string_to_bytes( ini_get('post_max_size') ); ?&gt;';&nbsp;</div></li><li><div>            var upload_max_filesize = '&lt;?php echo WPN_Helper::string_to_bytes( ini_get( 'upload_max_filesize' ) ); ?&gt;';&nbsp;</div></li><li><div>            var wp_memory_limit = '&lt;?php echo WPN_Helper::string_to_bytes( WP_MEMORY_LIMIT ); ?&gt;';&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Action to Output Custom Templates&nbsp;</div></li><li><div>        do_action( 'ninja_forms_output_templates' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * UTILITY&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    protected static function is_template_loaded( $template_name )&nbsp;</div></li><li><div>    {&nbsp;</div></li><li><div>        return ( in_array( $template_name, self::$loaded_templates ) ) ? TRUE : FALSE ;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} // End Class NF_Display_Render&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 3.0.5</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/ninja-forms/3.1.1/classes/nf_display_render/" class="active">3.1.1</a></li><li><a href="http://hookr.io/plugins/ninja-forms/3.1/classes/nf_display_render/" class="">3.1</a></li><li><a href="http://hookr.io/plugins/ninja-forms/3.0.7/classes/nf_display_render/" class="">3.0.7</a></li><li><a href="http://hookr.io/plugins/ninja-forms/3.0.6/classes/nf_display_render/" class="">3.0.6</a></li><li><a href="http://hookr.io/plugins/ninja-forms/3.0.5/classes/nf_display_render/" class="">3.0.5</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>NF_Display_Render</li><li><span></span>Ninja Forms</li><li><span></span>3.1.1</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2017 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer> <script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>