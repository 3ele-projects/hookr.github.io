<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="3.8.0" data-slug="jetpack-by-wordpress-com" data-type="class" data-id="11534"><head xmlns="http://www.w3.org/1999/xhtml"><title> featured_content | class | Jetpack By WordPress Com | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Featured_Content, class, plugin, jetpack-by-wordpress-com, 3.8.0" /><meta name="description" content="Featured Content." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=0c8fd4ff396cf3d46cb62a3e6125694d' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/featured_content/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ffeatured_content%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Ffeatured_content%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-jetpack-by-wordpress-com-3.8.0-class-featured_content","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="featured_content" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to jetpack-by-wordpress-com." href="http://hookr.io/plugins/jetpack-by-wordpress-com/" class="plugin"><span property="name">jetpack-by-wordpress-com</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.8.0." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/" class="H_VERSION"><span property="name">3.8.0</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">featured_content</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="1499"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/all/" title="All">All <span class="count badge">1499</span></a></li><li class="" data-id="new" data-count="17"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/new/" title="New">New <span class="count badge">17</span></a></li><li class="" data-id="hooks" data-count="599"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/hooks/" title="Hooks">Hooks <span class="count badge">599</span></a></li><li class="" data-id="action" data-count="195"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/actions/" title="Actions">Actions <span class="count badge">195</span></a></li><li class="" data-id="filter" data-count="404"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/filters/" title="Filters">Filters <span class="count badge">404</span></a></li><li class="active" data-id="class" data-count="262"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/" title="Classes">Classes <span class="count badge">262</span></a></li><li class="" data-id="constant" data-count="62"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/constants/" title="Constants">Constants <span class="count badge">62</span></a></li><li class="" data-id="function" data-count="530"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/functions/" title="Functions">Functions <span class="count badge">530</span></a></li><li class="" data-id="shortcode" data-count="46"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">46</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>Featured_Content</strong></h1><p>Featured Content.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/files/modules-theme-tools-featured-content/" class="file">/modules/theme-tools/featured-content.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="26" class="block" start="26"><li><div>class Featured_Content {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The maximum number of posts that a Featured Content area can contain. We&nbsp;</div></li><li><div>     * define a default value here but themes can override this by defining a&nbsp;</div></li><li><div>     * &quot;max_posts&quot; entry in the second parameter passed in the call to&nbsp;</div></li><li><div>     * add_theme_support( 'featured-content' ).&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see Featured_Content::init()&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static $max_posts = 15;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * The registered post types supported by Featured Content. Themes can add&nbsp;</div></li><li><div>     * Featured Content support for registered post types by defining a&nbsp;</div></li><li><div>     * 'post_types' argument (string|array) in the call to&nbsp;</div></li><li><div>     * add_theme_support( 'featured-content' ).&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @see Featured_Content::init()&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static $post_types = array( 'post' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Instantiate.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * All custom functionality will be hooked into the &quot;init&quot; action.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function setup() {&nbsp;</div></li><li><div>        add_action( 'init', array( __CLASS__, 'init' ), 30 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Conditionally hook into WordPress.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Themes must declare that they support this module by adding&nbsp;</div></li><li><div>     * add_theme_support( 'featured-content' ); during after_setup_theme.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * If no theme support is found there is no need to hook into WordPress. We'll&nbsp;</div></li><li><div>     * just return early instead.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::$max_posts&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function init() {&nbsp;</div></li><li><div>        $theme_support = get_theme_support( 'featured-content' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Return early if theme does not support featured content.&nbsp;</div></li><li><div>        if ( ! $theme_support ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * An array of named arguments must be passed as the second parameter&nbsp;</div></li><li><div>         * of add_theme_support().&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        if ( ! isset( $theme_support[0] ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $theme_support[0]['featured_content_filter'] ) ) {&nbsp;</div></li><li><div>            $theme_support[0]['filter'] = $theme_support[0]['featured_content_filter'];&nbsp;</div></li><li><div>            unset( $theme_support[0]['featured_content_filter'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Return early if &quot;filter&quot; has not been defined.&nbsp;</div></li><li><div>        if ( ! isset( $theme_support[0]['filter'] ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Theme can override the number of max posts.&nbsp;</div></li><li><div>        if ( isset( $theme_support[0]['max_posts'] ) ) {&nbsp;</div></li><li><div>            self::$max_posts = absint( $theme_support[0]['max_posts'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( $theme_support[0]['filter'], array( __CLASS__, 'get_featured_posts' )    );&nbsp;</div></li><li><div>        add_action( 'customize_register', array( __CLASS__, 'customize_register' ), 9 );&nbsp;</div></li><li><div>        add_action( 'admin_init', array( __CLASS__, 'register_setting' )    );&nbsp;</div></li><li><div>        add_action( 'save_post', array( __CLASS__, 'delete_transient' )    );&nbsp;</div></li><li><div>        add_action( 'delete_post_tag', array( __CLASS__, 'delete_post_tag' )    );&nbsp;</div></li><li><div>        add_action( 'customize_controls_enqueue_scripts', array( __CLASS__, 'enqueue_scripts' )    );&nbsp;</div></li><li><div>        add_action( 'pre_get_posts', array( __CLASS__, 'pre_get_posts' )    );&nbsp;</div></li><li><div>        add_action( 'switch_theme', array( __CLASS__, 'switch_theme' )    );&nbsp;</div></li><li><div>        add_action( 'switch_theme', array( __CLASS__, 'delete_transient' )    );&nbsp;</div></li><li><div>        add_action( 'wp_loaded', array( __CLASS__, 'wp_loaded' )    );&nbsp;</div></li><li><div>        add_action( 'split_shared_term', array( __CLASS__, 'jetpack_update_featured_content_for_split_terms', 10, 4 ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $theme_support[0]['additional_post_types'] ) ) {&nbsp;</div></li><li><div>            $theme_support[0]['post_types'] = array_merge( array( 'post' ), (array) $theme_support[0]['additional_post_types'] );&nbsp;</div></li><li><div>            unset( $theme_support[0]['additional_post_types'] );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Themes can allow Featured Content pages&nbsp;</div></li><li><div>        if ( isset( $theme_support[0]['post_types'] ) ) {&nbsp;</div></li><li><div>            self::$post_types = array_merge( self::$post_types, (array) $theme_support[0]['post_types'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // register post_tag support for each post type&nbsp;</div></li><li><div>            foreach ( self::$post_types as $post_type ) {&nbsp;</div></li><li><div>                register_taxonomy_for_object_type( 'post_tag', $post_type );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide &quot;featured&quot; tag from the front-end.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Has to run on wp_loaded so that the preview filters of the customizer&nbsp;</div></li><li><div>     * have a chance to alter the value.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function wp_loaded() {&nbsp;</div></li><li><div>        if ( self::get_setting( 'hide-tag' ) ) {&nbsp;</div></li><li><div>            add_filter( 'get_terms', array( __CLASS__, 'hide_featured_term' ), 10, 3 );&nbsp;</div></li><li><div>            add_filter( 'get_the_terms', array( __CLASS__, 'hide_the_featured_term' ), 10, 3 );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get featured posts&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * This method is not intended to be called directly. Theme developers should&nbsp;</div></li><li><div>     * place a filter directly in their theme and then pass its name as a value of&nbsp;</div></li><li><div>     * the &quot;filter&quot; key in the array passed as the $args parameter during the call&nbsp;</div></li><li><div>     * to: add_theme_support( 'featured-content', $args ).&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::get_featured_post_ids()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function get_featured_posts() {&nbsp;</div></li><li><div>        $post_ids = self::get_featured_post_ids();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // No need to query if there is are no featured posts.&nbsp;</div></li><li><div>        if ( empty( $post_ids ) ) {&nbsp;</div></li><li><div>            return array();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $featured_posts = get_posts( array(&nbsp;</div></li><li><div>            'include' =&gt; $post_ids, &nbsp;</div></li><li><div>            'posts_per_page' =&gt; count( $post_ids ), &nbsp;</div></li><li><div>            'post_type' =&gt; self::$post_types, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $featured_posts;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get featured post IDs&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * This function will return the an array containing the post IDs of all&nbsp;</div></li><li><div>     * featured posts.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Sets the &quot;featured_content_ids&quot; transient.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return array Array of post IDs.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function get_featured_post_ids() {&nbsp;</div></li><li><div>        // Return array of cached results if they exist.&nbsp;</div></li><li><div>        $featured_ids = get_transient( 'featured_content_ids' );&nbsp;</div></li><li><div>        if ( ! empty( $featured_ids ) ) {&nbsp;</div></li><li><div>            return array_map(&nbsp;</div></li><li><div>                'absint', &nbsp;</div></li><li><div>                /**&nbsp;</div></li><li><div>                 * Filter the list of Featured Posts IDs.&nbsp;</div></li><li><div>                 *&nbsp;</div></li><li><div>                 * @module theme-tools&nbsp;</div></li><li><div>                 *&nbsp;</div></li><li><div>                 * @since 2.7.0&nbsp;</div></li><li><div>                 *&nbsp;</div></li><li><div>                 * @param array $featured_ids Array of post IDs.&nbsp;</div></li><li><div>                 */&nbsp;</div></li><li><div>                apply_filters( 'featured_content_post_ids', (array) $featured_ids )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = self::get_setting();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Return empty array if no tag name is set.&nbsp;</div></li><li><div>        $term = get_term_by( 'name', $settings['tag-name'], 'post_tag' );&nbsp;</div></li><li><div>        if ( ! $term ) {&nbsp;</div></li><li><div>            $term = get_term_by( 'id', $settings['tag-id'], 'post_tag' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        if ( $term ) {&nbsp;</div></li><li><div>            $tag = $term-&gt;term_id;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            /** This action is documented in modules/theme-tools/featured-content.php */&nbsp;</div></li><li><div>            return apply_filters( 'featured_content_post_ids', array() );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Back compat for installs that have the quantity option still set.&nbsp;</div></li><li><div>        $quantity = isset( $settings['quantity'] ) ? $settings['quantity'] : self::$max_posts;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Query for featured posts.&nbsp;</div></li><li><div>        $featured = get_posts( array(&nbsp;</div></li><li><div>            'numberposts' =&gt; $quantity, &nbsp;</div></li><li><div>            'post_type' =&gt; self::$post_types, &nbsp;</div></li><li><div>            'tax_query' =&gt; array(&nbsp;</div></li><li><div>                array(&nbsp;</div></li><li><div>                    'field' =&gt; 'term_id', &nbsp;</div></li><li><div>                    'taxonomy' =&gt; 'post_tag', &nbsp;</div></li><li><div>                    'terms' =&gt; $tag, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Return empty array if no featured content exists.&nbsp;</div></li><li><div>        if ( ! $featured ) {&nbsp;</div></li><li><div>            /** This action is documented in modules/theme-tools/featured-content.php */&nbsp;</div></li><li><div>            return apply_filters( 'featured_content_post_ids', array() );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Ensure correct format before save/return.&nbsp;</div></li><li><div>        $featured_ids = wp_list_pluck( (array) $featured, 'ID' );&nbsp;</div></li><li><div>        $featured_ids = array_map( 'absint', $featured_ids );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        set_transient( 'featured_content_ids', $featured_ids );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** This action is documented in modules/theme-tools/featured-content.php */&nbsp;</div></li><li><div>        return apply_filters( 'featured_content_post_ids', $featured_ids );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Delete Transient.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Hooks in the &quot;save_post&quot; action.&nbsp;</div></li><li><div>     * @see Featured_Content::validate_settings().&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function delete_transient() {&nbsp;</div></li><li><div>        delete_transient( 'featured_content_ids' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Exclude featured posts from the blog query when the blog is the front-page, &nbsp;</div></li><li><div>     * and user has not checked the &quot;Display tag content in all listings&quot; checkbox.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Filter the home page posts, and remove any featured post ID's from it.&nbsp;</div></li><li><div>     * Hooked onto the 'pre_get_posts' action, this changes the parameters of the&nbsp;</div></li><li><div>     * query before it gets any posts.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::get_featured_post_ids();&nbsp;</div></li><li><div>     * @uses Featured_Content::get_setting();&nbsp;</div></li><li><div>     * @param WP_Query $query&nbsp;</div></li><li><div>     * @return WP_Query Possibly modified WP_Query&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function pre_get_posts( $query ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if not home or not main query.&nbsp;</div></li><li><div>        if ( ! $query-&gt;is_home() || ! $query-&gt;is_main_query() ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if the blog page is not the front page.&nbsp;</div></li><li><div>        if ( 'posts' !== get_option( 'show_on_front' ) ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $featured = self::get_featured_post_ids();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if no featured posts.&nbsp;</div></li><li><div>        if ( ! $featured ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = self::get_setting();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if the user wants featured posts always displayed.&nbsp;</div></li><li><div>        if ( true == $settings['show-all'] ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // We need to respect post ids already in the blacklist.&nbsp;</div></li><li><div>        $post__not_in = $query-&gt;get( 'post__not_in' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! empty( $post__not_in ) ) {&nbsp;</div></li><li><div>            $featured = array_merge( (array) $post__not_in, $featured );&nbsp;</div></li><li><div>            $featured = array_unique( $featured );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $query-&gt;set( 'post__not_in', $featured );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Reset tag option when the saved tag is deleted.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * It's important to mention that the transient needs to be deleted, too.&nbsp;</div></li><li><div>     * While it may not be obvious by looking at the function alone, the transient&nbsp;</div></li><li><div>     * is deleted by Featured_Content::validate_settings().&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Hooks in the &quot;delete_post_tag&quot; action.&nbsp;</div></li><li><div>     * @see Featured_Content::validate_settings().&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param int $tag_id The term_id of the tag that has been deleted.&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function delete_post_tag( $tag_id ) {&nbsp;</div></li><li><div>        $settings = self::get_setting();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $settings['tag-id'] ) || $tag_id != $settings['tag-id'] ) {&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings['tag-id'] = 0;&nbsp;</div></li><li><div>        $settings = self::validate_settings( $settings );&nbsp;</div></li><li><div>        update_option( 'featured-content', $settings );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide featured tag from displaying when global terms are queried from&nbsp;</div></li><li><div>     * the front-end.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Hooks into the &quot;get_terms&quot; filter.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::get_setting()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $terms A list of term objects. This is the return value of get_terms().&nbsp;</div></li><li><div>     * @param array $taxonomies An array of taxonomy slugs.&nbsp;</div></li><li><div>     * @return array $terms&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function hide_featured_term( $terms, $taxonomies, $args ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // This filter is only appropriate on the front-end.&nbsp;</div></li><li><div>        if ( is_admin() ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // We only want to hide the featured tag.&nbsp;</div></li><li><div>        if ( ! in_array( 'post_tag', $taxonomies ) ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if no terms were returned.&nbsp;</div></li><li><div>        if ( empty( $terms ) ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Bail if term objects are unavailable.&nbsp;</div></li><li><div>        if ( 'all' != $args['fields'] ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = self::get_setting();&nbsp;</div></li><li><div>        $tag = get_term_by( 'name', $settings['tag-name'], 'post_tag' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false !== $tag ) {&nbsp;</div></li><li><div>            foreach ( $terms as $order =&gt; $term ) {&nbsp;</div></li><li><div>                if ( is_object( $term ) && ( $settings['tag-id'] === $term-&gt;term_id || $settings['tag-name'] === $term-&gt;name ) ) {&nbsp;</div></li><li><div>                    unset( $terms[ $order ] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $terms;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Hide featured tag from displaying when terms associated with a post object&nbsp;</div></li><li><div>     * are queried from the front-end.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Hooks into the &quot;get_the_terms&quot; filter.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::get_setting()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $terms A list of term objects. This is the return value of get_the_terms().&nbsp;</div></li><li><div>     * @param int $id The ID field for the post object that terms are associated with.&nbsp;</div></li><li><div>     * @param array $taxonomy An array of taxonomy slugs.&nbsp;</div></li><li><div>     * @return array $terms&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function hide_the_featured_term( $terms, $id, $taxonomy ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // This filter is only appropriate on the front-end.&nbsp;</div></li><li><div>        if ( is_admin() ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Make sure we are in the correct taxonomy.&nbsp;</div></li><li><div>        if ( 'post_tag' != $taxonomy ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // No terms? Return early!&nbsp;</div></li><li><div>        if ( empty( $terms ) ) {&nbsp;</div></li><li><div>            return $terms;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $settings = self::get_setting();&nbsp;</div></li><li><div>        $tag = get_term_by( 'name', $settings['tag-name'], 'post_tag' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false !== $tag ) {&nbsp;</div></li><li><div>            foreach ( $terms as $order =&gt; $term ) {&nbsp;</div></li><li><div>                if ( $settings['tag-id'] === $term-&gt;term_id || $settings['tag-name'] === $term-&gt;name ) {&nbsp;</div></li><li><div>                    unset( $terms[ $order ] );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $terms;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register custom setting on the Settings -&gt; Reading screen.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::render_form()&nbsp;</div></li><li><div>     * @uses Featured_Content::validate_settings()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function register_setting() {&nbsp;</div></li><li><div>        add_settings_field( 'featured-content', __( 'Featured Content', 'jetpack' ), array( __class__, 'render_form' ), 'reading' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Register sanitization callback for the Customizer.&nbsp;</div></li><li><div>        register_setting( 'featured-content', 'featured-content', array( __class__, 'validate_settings' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Add settings to the Customizer.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param WP_Customize_Manager $wp_customize Theme Customizer object.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function customize_register( $wp_customize ) {&nbsp;</div></li><li><div>        $wp_customize-&gt;add_section( 'featured_content', array(&nbsp;</div></li><li><div>            'title' =&gt; __( 'Featured Content', 'jetpack' ), &nbsp;</div></li><li><div>            'description' =&gt; sprintf( __( 'Easily feature all posts with the &lt;a href=&quot;%1$s&quot;&gt;&quot;featured&quot; tag&lt;/a&gt; or a tag of your choice. Your theme supports up to %2$s posts in its featured content area.', 'jetpack' ), admin_url( '/edit.php?tag=featured' ), absint( self::$max_posts ) ), &nbsp;</div></li><li><div>            'priority' =&gt; 130, &nbsp;</div></li><li><div>            'theme_supports' =&gt; 'featured-content', &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /** Add Featured Content settings.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * Sanitization callback registered in Featured_Content::validate_settings().&nbsp;</div></li><li><div>         * See http://themeshaper.com/2013/04/29/validation-sanitization-in-customizer/comment-page-1/#comment-12374&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $wp_customize-&gt;add_setting( 'featured-content[tag-name]', array(&nbsp;</div></li><li><div>            'type' =&gt; 'option', &nbsp;</div></li><li><div>            'sanitize_js_callback' =&gt; array( __CLASS__, 'delete_transient' ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        $wp_customize-&gt;add_setting( 'featured-content[hide-tag]', array(&nbsp;</div></li><li><div>            'default' =&gt; true, &nbsp;</div></li><li><div>            'type' =&gt; 'option', &nbsp;</div></li><li><div>            'sanitize_js_callback' =&gt; array( __CLASS__, 'delete_transient' ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        $wp_customize-&gt;add_setting( 'featured-content[show-all]', array(&nbsp;</div></li><li><div>            'default' =&gt; false, &nbsp;</div></li><li><div>            'type' =&gt; 'option', &nbsp;</div></li><li><div>            'sanitize_js_callback' =&gt; array( __CLASS__, 'delete_transient' ), &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Add Featured Content controls.&nbsp;</div></li><li><div>        $wp_customize-&gt;add_control( 'featured-content[tag-name]', array(&nbsp;</div></li><li><div>            'label' =&gt; __( 'Tag name', 'jetpack' ), &nbsp;</div></li><li><div>            'section' =&gt; 'featured_content', &nbsp;</div></li><li><div>            'theme_supports' =&gt; 'featured-content', &nbsp;</div></li><li><div>            'priority' =&gt; 20, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        $wp_customize-&gt;add_control( 'featured-content[hide-tag]', array(&nbsp;</div></li><li><div>            'label' =&gt; __( 'Hide tag from displaying in post meta and tag clouds.', 'jetpack' ), &nbsp;</div></li><li><div>            'section' =&gt; 'featured_content', &nbsp;</div></li><li><div>            'theme_supports' =&gt; 'featured-content', &nbsp;</div></li><li><div>            'type' =&gt; 'checkbox', &nbsp;</div></li><li><div>            'priority' =&gt; 30, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        $wp_customize-&gt;add_control( 'featured-content[show-all]', array(&nbsp;</div></li><li><div>            'label' =&gt; __( 'Display tag content in all listings.', 'jetpack' ), &nbsp;</div></li><li><div>            'section' =&gt; 'featured_content', &nbsp;</div></li><li><div>            'theme_supports' =&gt; 'featured-content', &nbsp;</div></li><li><div>            'type' =&gt; 'checkbox', &nbsp;</div></li><li><div>            'priority' =&gt; 40, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Enqueue the tag suggestion script.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function enqueue_scripts() {&nbsp;</div></li><li><div>        wp_enqueue_script( 'featured-content-suggest', plugins_url( 'js/suggest.js', __FILE__ ), array( 'suggest' ), '20131022', true );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Renders all form fields on the Settings -&gt; Reading screen.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function render_form() {&nbsp;</div></li><li><div>        printf( __( 'The settings for Featured Content have &lt;a href=&quot;%s&quot;&gt;moved to Appearance &rarr; Customize&lt;/a&gt;.', 'jetpack' ), admin_url( 'customize.php?#accordion-section-featured_content' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get settings&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Get all settings recognized by this module. This function will return all&nbsp;</div></li><li><div>     * settings whether or not they have been stored in the database yet. This&nbsp;</div></li><li><div>     * ensures that all keys are available at all times.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * In the event that you only require one setting, you may pass its name as the&nbsp;</div></li><li><div>     * first parameter to the function and only that value will be returned.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param string $key The key of a recognized setting.&nbsp;</div></li><li><div>     * @return mixed Array of all settings by default. A single value if passed as first parameter.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function get_setting( $key = 'all' ) {&nbsp;</div></li><li><div>        $saved = (array) get_option( 'featured-content' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Filter Featured Content's default settings.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @module theme-tools&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.7.0&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @param array $args {&nbsp;</div></li><li><div>         * Array of Featured Content Settings&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         *     @type int hide-tag Default is 1.&nbsp;</div></li><li><div>         *     @type int tag-id Default is 0.&nbsp;</div></li><li><div>         *     @type string tag-name Default is empty.&nbsp;</div></li><li><div>         *     @type int show-all Default is 0.&nbsp;</div></li><li><div>         * }&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        $defaults = apply_filters( 'featured_content_default_settings', array(&nbsp;</div></li><li><div>            'hide-tag' =&gt; 1, &nbsp;</div></li><li><div>            'tag-id' =&gt; 0, &nbsp;</div></li><li><div>            'tag-name' =&gt; '', &nbsp;</div></li><li><div>            'show-all' =&gt; 0, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = wp_parse_args( $saved, $defaults );&nbsp;</div></li><li><div>        $options = array_intersect_key( $options, $defaults );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'all' != $key ) {&nbsp;</div></li><li><div>            return isset( $options[ $key ] ) ? $options[ $key ] : false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $options;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Validate settings&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Make sure that all user supplied content is in an expected format before&nbsp;</div></li><li><div>     * saving to the database. This function will also delete the transient set in&nbsp;</div></li><li><div>     * Featured_Content::get_featured_content().&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @uses Featured_Content::delete_transient()&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @param array $input&nbsp;</div></li><li><div>     * @return array $output&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function validate_settings( $input ) {&nbsp;</div></li><li><div>        $output = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( empty( $input['tag-name'] ) ) {&nbsp;</div></li><li><div>            $output['tag-id'] = 0;&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            $term = get_term_by( 'name', $input['tag-name'], 'post_tag' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( $term ) {&nbsp;</div></li><li><div>                $output['tag-id'] = $term-&gt;term_id;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $new_tag = wp_create_tag( $input['tag-name'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( ! is_wp_error( $new_tag ) && isset( $new_tag['term_id'] ) ) {&nbsp;</div></li><li><div>                    $output['tag-id'] = $new_tag['term_id'];&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $output['tag-name'] = $input['tag-name'];&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $output['hide-tag'] = isset( $input['hide-tag'] ) && $input['hide-tag'] ? 1 : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $output['show-all'] = isset( $input['show-all'] ) && $input['show-all'] ? 1 : 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        self::delete_transient();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $output;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Removes the quantity setting from the options array.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return void&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function switch_theme() {&nbsp;</div></li><li><div>        $option = (array) get_option( 'featured-content' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( isset( $option['quantity'] ) ) {&nbsp;</div></li><li><div>            unset( $option['quantity'] );&nbsp;</div></li><li><div>            update_option( 'featured-content', $option );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function jetpack_update_featured_content_for_split_terms( $old_term_id, $new_term_id, $term_taxonomy_id, $taxonomy ) {&nbsp;</div></li><li><div>        $featured_content_settings = get_option( 'featured-content', array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Check to see whether the stored tag ID is the one that's just been split.&nbsp;</div></li><li><div>        if ( isset( $featured_content_settings['tag-id'] ) && $old_term_id == $featured_content_settings['tag-id'] && 'post_tag' == $taxonomy ) {&nbsp;</div></li><li><div>            // We have a match, so we swap out the old tag ID for the new one and resave the option.&nbsp;</div></li><li><div>            $featured_content_settings['tag-id'] = $new_term_id;&nbsp;</div></li><li><div>            update_option( 'featured-content', $featured_content_settings );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 3.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.2/classes/featured_content/" class="">3.8.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.1/classes/featured_content/" class="">3.8.1</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/featured_content/" class="active">3.8.0</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/classes/featured_content/" class="">3.7.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.1/classes/featured_content/" class="">3.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Featured_Content</li><li><span></span>Jetpack by WordPress.com</li><li><span></span>3.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>