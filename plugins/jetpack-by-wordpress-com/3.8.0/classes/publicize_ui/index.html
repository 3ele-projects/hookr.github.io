<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="3.8.0" data-slug="jetpack-by-wordpress-com" data-type="class" data-id="13351"><head xmlns="http://www.w3.org/1999/xhtml"><title> publicize_ui | class | Jetpack By WordPress Com | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Publicize_UI, class, plugin, jetpack-by-wordpress-com, 3.8.0" /><meta name="description" content="Only user facing pieces of Publicize are found here." /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=c96d322781300046ce9ea6e365ade9a4' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/publicize_ui/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpublicize_ui%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fpublicize_ui%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-jetpack-by-wordpress-com-3.8.0-class-publicize_ui","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="publicize_ui" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to jetpack-by-wordpress-com." href="http://hookr.io/plugins/jetpack-by-wordpress-com/" class="plugin"><span property="name">jetpack-by-wordpress-com</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.8.0." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/" class="H_VERSION"><span property="name">3.8.0</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">publicize_ui</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="1499"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/all/" title="All">All <span class="count badge">1499</span></a></li><li class="" data-id="new" data-count="17"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/new/" title="New">New <span class="count badge">17</span></a></li><li class="" data-id="hooks" data-count="599"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/hooks/" title="Hooks">Hooks <span class="count badge">599</span></a></li><li class="" data-id="action" data-count="195"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/actions/" title="Actions">Actions <span class="count badge">195</span></a></li><li class="" data-id="filter" data-count="404"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/filters/" title="Filters">Filters <span class="count badge">404</span></a></li><li class="active" data-id="class" data-count="262"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/" title="Classes">Classes <span class="count badge">262</span></a></li><li class="" data-id="constant" data-count="62"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/constants/" title="Constants">Constants <span class="count badge">62</span></a></li><li class="" data-id="function" data-count="530"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/functions/" title="Functions">Functions <span class="count badge">530</span></a></li><li class="" data-id="shortcode" data-count="46"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">46</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>Publicize_UI</strong></h1><p>Only user facing pieces of Publicize are found here.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/files/modules-publicize-ui/" class="file">/modules/publicize/ui.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="6" class="block" start="6"><li><div>class Publicize_UI {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Contains an instance of class 'publicize' which loads Keyring, sets up services, etc.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    public $publicize;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Hooks into WordPress to display the various pieces of UI and load our assets&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function __construct() {&nbsp;</div></li><li><div>        global $publicize;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;publicize = $publicize = new Publicize;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // assets (css, js)&nbsp;</div></li><li><div>        add_action( 'load-settings_page_sharing', array( &$this, 'load_assets' ) );&nbsp;</div></li><li><div>        add_action( 'admin_head-post.php', array( &$this, 'post_page_metabox_assets' ) );&nbsp;</div></li><li><div>        add_action( 'admin_head-post-new.php', array( &$this, 'post_page_metabox_assets' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // management of publicize (sharing screen, ajax/lightbox popup, and metabox on post screen)&nbsp;</div></li><li><div>        add_action( 'pre_admin_screen_sharing', array( &$this, 'admin_page' ) );&nbsp;</div></li><li><div>        add_action( 'post_submitbox_misc_actions', array( &$this, 'post_page_metabox' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * If the ShareDaddy plugin is not active we need to add the sharing settings page to the menu still&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function sharing_menu() {&nbsp;</div></li><li><div>        add_submenu_page( 'options-general.php', __( 'Sharing Settings', 'jetpack' ), __( 'Sharing', 'jetpack' ), 'publish_posts', 'sharing', array( &$this, 'management_page' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Management page to load if Sharedaddy is not active so the 'pre_admin_screen_sharing' action exists.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function management_page() { ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;wrap&quot;&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;icon32&quot; id=&quot;icon-options-general&quot;&gt;&lt;br /&gt;&lt;/div&gt;&nbsp;</div></li><li><div>            &lt;h1&gt;&lt;?php _e( 'Sharing Settings', 'jetpack' ); ?&gt;&lt;/h1&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                /** This action is documented in modules/sharedaddy/sharing.php */&nbsp;</div></li><li><div>                do_action( 'pre_admin_screen_sharing' );&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt; &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * styling for the sharing screen and popups&nbsp;</div></li><li><div>    * JS for the options and switching&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function load_assets() {&nbsp;</div></li><li><div>        wp_enqueue_script(&nbsp;</div></li><li><div>            'publicize', &nbsp;</div></li><li><div>            plugins_url( 'assets/publicize.js', __FILE__ ), &nbsp;</div></li><li><div>            array( 'jquery', 'thickbox' ), &nbsp;</div></li><li><div>            '20121019'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>        if( is_rtl() ) {&nbsp;</div></li><li><div>            wp_enqueue_style( 'publicize', plugins_url( 'assets/rtl/publicize-rtl.css', __FILE__ ), array(), '20120925' );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            wp_enqueue_style( 'publicize', plugins_url( 'assets/publicize.css', __FILE__ ), array(), '20120925' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_thickbox();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function connected_notice( $service_name ) { ?&gt;&nbsp;</div></li><li><div>        &lt;div class='updated'&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( defined( 'IS_WPCOM' ) && IS_WPCOM ) {&nbsp;</div></li><li><div>                $platform =  __( 'WordPress.com', 'jetpack' );&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $platform = __( 'Jetpack', 'jetpack' );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            printf(&nbsp;</div></li><li><div>                __( 'You have successfully connected your %1$s account with %2$s.', '1: Service Name (Facebook, Twitter, ...), 2. WordPress.com or Jetpack', 'jetpack' ), &nbsp;</div></li><li><div>                Publicize::get_service_label( $service_name ), &nbsp;</div></li><li><div>                $platform&nbsp;</div></li><li><div> ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function denied_notice() { ?&gt;&nbsp;</div></li><li><div>        &lt;div class='updated'&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&lt;?php _e ( &quot;You have chosen not to connect your blog. Please click 'accept' when prompted if you wish to connect your accounts.&quot;, 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Lists the current user's publicized accounts for the blog&nbsp;</div></li><li><div>    * looks exactly like Publicize v1 for now, UI and functionality updates will come after the move to keyring&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function admin_page() {&nbsp;</div></li><li><div>        $_blog_id = get_current_blog_id();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;form action=&quot;&quot; id=&quot;publicize-form&quot;&gt;&nbsp;</div></li><li><div>            &lt;h2 id=&quot;publicize&quot;&gt;&lt;?php _e( 'Publicize', 'jetpack' ) ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>                if ( ! empty( $_GET['action'] ) && 'deny' == $_GET['action'] ) {&nbsp;</div></li><li><div>                    $this-&gt;denied_notice();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&nbsp;</div></li><li><div>                &lt;?php esc_html_e( 'Connect your blog to popular social networking sites and automatically share new posts with your friends.', 'jetpack' ) ?&gt;&nbsp;</div></li><li><div>                &lt;?php esc_html_e( 'You can make a connection for just yourself or for all users on your blog. Shared connections are marked with the (Shared) text.', 'jetpack' ); ?&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            if ( $this-&gt;in_jetpack ) {&nbsp;</div></li><li><div>                $doc_link = &quot;http://jetpack.me/support/publicize/&quot;;&nbsp;</div></li><li><div>            } else {&nbsp;</div></li><li><div>                $doc_link = &quot;http://en.support.wordpress.com/publicize/&quot;;&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p&gt;&rarr; &lt;a href=&quot;&lt;?php echo esc_url( $doc_link ); ?&gt;&quot; target=&quot;_blank&quot;&gt;&lt;?php esc_html_e( 'More information on using Publicize.', 'jetpack' ); ?&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;div id=&quot;publicize-services-block&quot;&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                $services = $this-&gt;publicize-&gt;get_services( 'all' );&nbsp;</div></li><li><div>                $total_num_of_services = count ( $services );&nbsp;</div></li><li><div>                $service_num = 0;?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div class='left'&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                foreach ( $services as $name =&gt; $service ) :&nbsp;</div></li><li><div>                    $connect_url = $this-&gt;publicize-&gt;connect_url( $name );&nbsp;</div></li><li><div>                    if ( $service_num == ( round ( ( $total_num_of_services / 2 ), 0 ) ) )&nbsp;</div></li><li><div>                        echo &quot;&lt;/div&gt;&lt;div class='right'&gt;&quot;;&nbsp;</div></li><li><div>                    $service_num++;&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>                    &lt;div class=&quot;publicize-service-entry&quot; &lt;?php if ( $service_num &gt; 0 ): ?&gt;class=&quot;connected&quot;&lt;?php endif; ?&gt; &gt;&nbsp;</div></li><li><div>                        &lt;div id=&quot;&lt;?php echo esc_attr( $name ); ?&gt;&quot; class=&quot;publicize-service-left&quot;&gt;&nbsp;</div></li><li><div>                            &lt;a href=&quot;&lt;?php echo esc_url( $connect_url ); ?&gt;&quot; id=&quot;service-link-&lt;?php echo esc_attr( $name ); ?&gt;&quot; target=&quot;_top&quot;&gt;&lt;?php echo $this-&gt;publicize-&gt;get_service_label( $name ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                        &lt;div class=&quot;publicize-service-right&quot;&gt;&nbsp;</div></li><li><div>                            &lt;?php if ( $this-&gt;publicize-&gt;is_enabled( $name ) && $connections = $this-&gt;publicize-&gt;get_connections( $name ) ) : ?&gt;&nbsp;</div></li><li><div>                                &lt;ul&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    foreach( $connections as $c ) :&nbsp;</div></li><li><div>                                        $id = $this-&gt;publicize-&gt;get_connection_id( $c );&nbsp;</div></li><li><div>                                        $disconnect_url = $this-&gt;publicize-&gt;disconnect_url( $name, $id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                        $cmeta = $this-&gt;publicize-&gt;get_connection_meta( $c );&nbsp;</div></li><li><div>                                        $profile_link = $this-&gt;publicize-&gt;get_profile_link( $name, $c );&nbsp;</div></li><li><div>                                        $connection_display = $this-&gt;publicize-&gt;get_display_name( $name, $c );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                        $options_nonce = wp_create_nonce( 'options_page_' . $name . '_' . $id ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                        &lt;?php if ( $this-&gt;publicize-&gt;show_options_popup( $name, $c ) ): ?&gt;&nbsp;</div></li><li><div>                                        &lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>                                        jQuery(document).ready( function($) {&nbsp;</div></li><li><div>                                            showOptionsPage.call(&nbsp;</div></li><li><div>                                            this, &nbsp;</div></li><li><div>                                            '&lt;?php echo esc_js( $name ); ?&gt;', &nbsp;</div></li><li><div>                                            '&lt;?php echo esc_js( $options_nonce ); ?&gt;', &nbsp;</div></li><li><div>                                            '&lt;?php echo esc_js( $id ); ?&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                                        } );&nbsp;</div></li><li><div>                                        &lt;/script&gt;&nbsp;</div></li><li><div>                                        &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                        &lt;li class=&quot;publicize-connection&quot; data-connection-id=&quot;&lt;?php echo esc_attr( $id ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                                            &lt;?php esc_html_e( 'Connected as:', 'jetpack' ); ?&gt;&nbsp;</div></li><li><div>                                            &lt;?php&nbsp;</div></li><li><div>                                            if ( !empty( $profile_link ) ) : ?&gt;&nbsp;</div></li><li><div>                                                &lt;a class=&quot;publicize-profile-link&quot; href=&quot;&lt;?php echo esc_url( $profile_link ); ?&gt;&quot; target=&quot;_top&quot;&gt;&nbsp;</div></li><li><div>                                                    &lt;?php echo esc_html( $connection_display ); ?&gt;&nbsp;</div></li><li><div>                                                &lt;/a&gt;&lt;?php&nbsp;</div></li><li><div>                                            else :&nbsp;</div></li><li><div>                                                echo esc_html( $connection_display );&nbsp;</div></li><li><div>                                            endif;&nbsp;</div></li><li><div>                                            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                            &lt;?php if ( 0 == $cmeta['connection_data']['user_id'] ) : ?&gt;&nbsp;</div></li><li><div>                                                &lt;small&gt;(&lt;?php esc_html_e( 'Shared', 'jetpack' ); ?&gt;)&lt;/small&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                                &lt;?php if ( current_user_can( $this-&gt;publicize-&gt;GLOBAL_CAP ) ) : ?&gt;&nbsp;</div></li><li><div>                                                    &lt;a class=&quot;pub-disconnect-button&quot; title=&quot;&lt;?php esc_html_e( 'Disconnect', 'jetpack' ); ?&gt;&quot; href=&quot;&lt;?php echo esc_url( $disconnect_url ); ?&gt;&quot; target=&quot;_top&quot;&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                                &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                            &lt;?php else : ?&gt;&nbsp;</div></li><li><div>                                                &lt;a class=&quot;pub-disconnect-button&quot; title=&quot;&lt;?php esc_html_e( 'Disconnect', 'jetpack' ); ?&gt;&quot; href=&quot;&lt;?php echo esc_url( $disconnect_url ); ?&gt;&quot; target=&quot;_top&quot;&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                            &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                            &lt;br/&gt;&nbsp;</div></li><li><div>                                            &lt;div class=&quot;pub-connection-test test-in-progress&quot; id=&quot;pub-connection-test-&lt;?php echo esc_attr( $id ); ?&gt;&quot; &gt;&nbsp;</div></li><li><div>                                            &lt;/div&gt;&nbsp;</div></li><li><div>                                        &lt;/li&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                                        &lt;?php&nbsp;</div></li><li><div>                                    endforeach;&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                &lt;/ul&gt;&nbsp;</div></li><li><div>                            &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                                $connections = $this-&gt;publicize-&gt;get_connections( $name );&nbsp;</div></li><li><div>                                if ( empty ( $connections ) ) { ?&gt;&nbsp;</div></li><li><div>                                    &lt;a id=&quot;&lt;?php echo esc_attr( $name ); ?&gt;&quot; class=&quot;publicize-add-connection button&quot; href=&quot;&lt;?php echo esc_url( $connect_url ); ?&gt;&quot; target=&quot;_top&quot;&gt;&lt;?php echo esc_html( __( 'Connect', 'jetpack' ) ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                &lt;?php } else { ?&gt;&nbsp;</div></li><li><div>                                    &lt;a id=&quot;&lt;?php echo esc_attr( $name ); ?&gt;&quot; class=&quot;publicize-add-connection button add-new&quot; href=&quot;&lt;?php echo esc_url( $connect_url ); ?&gt;&quot; target=&quot;_top&quot;&gt;&lt;?php echo esc_html( __( 'Add New', 'jetpack' ) ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                                  &lt;?php } ?&gt;&nbsp;</div></li><li><div>                          &lt;/div&gt;&nbsp;</div></li><li><div>                      &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;script&gt;&nbsp;</div></li><li><div>                (function($) {&nbsp;</div></li><li><div>                    $('.pub-disconnect-button').on('click', function(e) { if ( confirm( '&lt;?php echo esc_js( __( 'Are you sure you want to stop Publicizing posts to this connection?', 'jetpack' ) ); ?&gt;' ) ) {&nbsp;</div></li><li><div>                                return true;&nbsp;</div></li><li><div>                            } else {&nbsp;</div></li><li><div>                            e.preventDefault();&nbsp;</div></li><li><div>                            return false;&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    })&nbsp;</div></li><li><div>                })(jQuery);&nbsp;</div></li><li><div>                &lt;/script&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php wp_nonce_field( &quot;wpas_posts_{$_blog_id}&quot;, &quot;_wpas_posts_{$_blog_id}_nonce&quot; ); ?&gt;&nbsp;</div></li><li><div>            &lt;input type=&quot;hidden&quot; id=&quot;wpas_ajax_blog_id&quot; name=&quot;wpas_ajax_blog_id&quot; value=&quot;&lt;?php echo $_blog_id; ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>        &lt;/form&gt;&lt;?php&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function global_checkbox( $service_name, $id ) {&nbsp;</div></li><li><div>        global $publicize;&nbsp;</div></li><li><div>        if ( current_user_can( $publicize-&gt;GLOBAL_CAP ) ) : ?&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&nbsp;</div></li><li><div>                &lt;input id=&quot;globalize_&lt;?php echo $service_name; ?&gt;&quot; type=&quot;checkbox&quot; name=&quot;global&quot; value=&quot;&lt;?php echo wp_create_nonce( 'publicize-globalize-' . $id ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;globalize_&lt;?php echo $service_name; ?&gt;&quot;&gt;&lt;?php _e( 'Make this connection available to all users of this blog?', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>            &lt;/p&gt;&nbsp;</div></li><li><div>        &lt;?php endif;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function broken_connection( $service_name, $id ) { ?&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;thickbox-content&quot;&gt;&nbsp;</div></li><li><div>            &lt;div class='error'&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&lt;?php printf( __( 'There was a problem connecting to %s. Please disconnect and try again.', 'jetpack' ), Publicize::get_service_label( $service_name ) ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    public static function options_page_other( $service_name ) {&nbsp;</div></li><li><div>        // Nonce check&nbsp;</div></li><li><div>        check_admin_referer( &quot;options_page_{$service_name}_&quot; . $_REQUEST['connection'] );&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div id=&quot;thickbox-content&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            ob_start();&nbsp;</div></li><li><div>            Publicize_UI::connected_notice( $service_name );&nbsp;</div></li><li><div>            $update_notice = ob_get_clean();&nbsp;</div></li><li><div>            if ( ! empty( $update_notice ) )&nbsp;</div></li><li><div>                echo $update_notice;&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php Publicize_UI::global_checkbox( $service_name, $_REQUEST['connection'] ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;p style=&quot;text-align: center;&quot;&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;submit&quot; value=&quot;&lt;?php esc_attr_e( 'OK', 'jetpack' ) ?&gt;&quot; class=&quot;button &lt;?php echo $service_name; ?&gt;-options save-options&quot; name=&quot;save&quot; data-connection=&quot;&lt;?php echo esc_attr( $_REQUEST['connection'] ); ?&gt;&quot; rel=&quot;&lt;?php echo wp_create_nonce( 'save_'.$service_name.'_token_' . $_REQUEST['connection'] ) ?&gt;&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/p&gt; &lt;br /&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * CSS for styling the publicize message box and counter that displays on the post page.&nbsp;</div></li><li><div>    * There is also some Javascript for length counting and some basic display effects.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function post_page_metabox_assets() {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>        $user_id = empty( $post-&gt;post_author ) ? $GLOBALS['user_ID'] : $post-&gt;post_author;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $default_prefix = $this-&gt;publicize-&gt;default_prefix;&nbsp;</div></li><li><div>        $default_prefix = preg_replace( '/%([0-9])\$s/', &quot;' + %\\1\$s + '&quot;, esc_js( $default_prefix ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $default_message = $this-&gt;publicize-&gt;default_message;&nbsp;</div></li><li><div>        $default_message = preg_replace( '/%([0-9])\$s/', &quot;' + %\\1\$s + '&quot;, esc_js( $default_message ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $default_suffix = $this-&gt;publicize-&gt;default_suffix;&nbsp;</div></li><li><div>        $default_suffix = preg_replace( '/%([0-9])\$s/', &quot;' + %\\1\$s + '&quot;, esc_js( $default_suffix ) ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;script type=&quot;text/javascript&quot;&gt;&nbsp;</div></li><li><div>jQuery( function($) {&nbsp;</div></li><li><div>    var wpasTitleCounter = $( '#wpas-title-counter' ), &nbsp;</div></li><li><div>        wpasTwitterCheckbox = $( '.wpas-submit-twitter' ).size(), &nbsp;</div></li><li><div>        wpasTitle = $('#wpas-title').keyup( function() {&nbsp;</div></li><li><div>        var length = wpasTitle.val().length;&nbsp;</div></li><li><div>        wpasTitleCounter.text( length );&nbsp;</div></li><li><div>        if ( wpasTwitterCheckbox && length &gt; 140 ) {&nbsp;</div></li><li><div>            wpasTitleCounter.addClass( 'wpas-twitter-length-limit' );&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            wpasTitleCounter.removeClass( 'wpas-twitter-length-limit' );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        } ), &nbsp;</div></li><li><div>        authClick = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $('#publicize-disconnected-form-show').click( function() {&nbsp;</div></li><li><div>        $('#publicize-form').slideDown( 'fast' );&nbsp;</div></li><li><div>        $(this).hide();&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $('#publicize-disconnected-form-hide').click( function() {&nbsp;</div></li><li><div>        $('#publicize-form').slideUp( 'fast' );&nbsp;</div></li><li><div>        $('#publicize-disconnected-form-show').show();&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $('#publicize-form-edit').click( function() {&nbsp;</div></li><li><div>        $('#publicize-form').slideDown( 'fast', function() {&nbsp;</div></li><li><div>            wpasTitle.focus();&nbsp;</div></li><li><div>            if ( !wpasTitle.text() ) {&nbsp;</div></li><li><div>                var url = $('#shortlink').size() ? $('#shortlink').val() : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var defaultMessage = $.trim( '&lt;?php printf( $default_prefix, 'url' ); printf( $default_message, '$(&quot;#title&quot;).val()', 'url' ); printf( $default_suffix, 'url' ); ?&gt;' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                wpasTitle.append( defaultMessage.replace( /&lt;[^&gt;]+&gt;/g, '') );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var selBeg = defaultMessage.indexOf( $(&quot;#title&quot;).val() );&nbsp;</div></li><li><div>                if ( selBeg &lt; 0 ) {&nbsp;</div></li><li><div>                    selBeg = 0;&nbsp;</div></li><li><div>                    selEnd = 0;&nbsp;</div></li><li><div>                } else {&nbsp;</div></li><li><div>                    selEnd = selBeg + $(&quot;#title&quot;).val().length;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                var domObj = wpasTitle.get(0);&nbsp;</div></li><li><div>                if ( domObj.setSelectionRange ) {&nbsp;</div></li><li><div>                    domObj.setSelectionRange( selBeg, selEnd );&nbsp;</div></li><li><div>                } else if ( domObj.createTextRange ) {&nbsp;</div></li><li><div>                    var r = domObj.createTextRange();&nbsp;</div></li><li><div>                    r.moveStart( 'character', selBeg );&nbsp;</div></li><li><div>                    r.moveEnd( 'character', selEnd );&nbsp;</div></li><li><div>                    r.select();&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>            wpasTitle.keyup();&nbsp;</div></li><li><div>        } );&nbsp;</div></li><li><div>        $('#publicize-defaults').hide();&nbsp;</div></li><li><div>        $(this).hide();&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $('#publicize-form-hide').click( function() {&nbsp;</div></li><li><div>        var newList = $.map( $('#publicize-form').slideUp( 'fast' ).find( ':checked' ), function( el ) {&nbsp;</div></li><li><div>            return $.trim( $(el).parent( 'label' ).text() );&nbsp;</div></li><li><div>        } );&nbsp;</div></li><li><div>        $('#publicize-defaults').html( '&lt;strong&gt;' + newList.join( '&lt;/strong&gt;, &lt;strong&gt;' ) + '&lt;/strong&gt;' ).show();&nbsp;</div></li><li><div>        $('#publicize-form-edit').show();&nbsp;</div></li><li><div>        return false;&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $('.authorize-link').click( function() {&nbsp;</div></li><li><div>        if ( authClick ) {&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>        authClick = true;&nbsp;</div></li><li><div>        $(this).after( '&lt;img src=&quot;images/loading.gif&quot; class=&quot;alignleft&quot; style=&quot;margin: 0 .5em&quot; /&gt;' );&nbsp;</div></li><li><div>        $.ajaxSetup( { async: false } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( window.wp && window.wp.autosave ) {&nbsp;</div></li><li><div>            window.wp.autosave.server.triggerSave();&nbsp;</div></li><li><div>        } else {&nbsp;</div></li><li><div>            autosave();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $( '.pub-service' ).click( function() {&nbsp;</div></li><li><div>        var service = $(this).data( 'service' ), &nbsp;</div></li><li><div>            fakebox = '&lt;input id=&quot;wpas-submit-' + service + '&quot; type=&quot;hidden&quot; value=&quot;1&quot; name=&quot;wpas[submit][' + service + ']&quot; /&gt;';&nbsp;</div></li><li><div>        $( '#add-publicize-check' ).append( fakebox );&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    publicizeConnTestStart = function() {&nbsp;</div></li><li><div>        $( '#pub-connection-tests' )&nbsp;</div></li><li><div>            .removeClass( 'below-h2' )&nbsp;</div></li><li><div>            .removeClass( 'error' )&nbsp;</div></li><li><div>            .removeClass( 'publicize-token-refresh-message' )&nbsp;</div></li><li><div>            .addClass( 'test-in-progress' )&nbsp;</div></li><li><div>            .html( '' );&nbsp;</div></li><li><div>        $.post( ajaxurl, { action: 'test_publicize_conns' }, publicizeConnTestComplete );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    publicizeConnRefreshClick = function( event ) {&nbsp;</div></li><li><div>        event.preventDefault();&nbsp;</div></li><li><div>        var popupURL = event.currentTarget.href;&nbsp;</div></li><li><div>        var popupTitle = event.currentTarget.title;&nbsp;</div></li><li><div>        // open a popup window&nbsp;</div></li><li><div>        // when it is closed, kick off the tests again&nbsp;</div></li><li><div>        var popupWin = window.open( popupURL, popupTitle, '' );&nbsp;</div></li><li><div>        var popupWinTimer= window.setInterval( function() {&nbsp;</div></li><li><div>            if ( popupWin.closed !== false ) {&nbsp;</div></li><li><div>                window.clearInterval( popupWinTimer );&nbsp;</div></li><li><div>                publicizeConnTestStart();&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }, 500 );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    publicizeConnTestComplete = function( response ) {&nbsp;</div></li><li><div>        var testsSelector = $( '#pub-connection-tests' );&nbsp;</div></li><li><div>        testsSelector&nbsp;</div></li><li><div>            .removeClass( 'test-in-progress' )&nbsp;</div></li><li><div>            .removeClass( 'below-h2' )&nbsp;</div></li><li><div>            .removeClass( 'error' )&nbsp;</div></li><li><div>            .removeClass( 'publicize-token-refresh-message' )&nbsp;</div></li><li><div>            .html( '' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If any of the tests failed, show some stuff&nbsp;</div></li><li><div>        var somethingShownAlready = false;&nbsp;</div></li><li><div>        $.each( response.data, function( index, testResult ) {&nbsp;</div></li><li><div>            // find the li for this connection&nbsp;</div></li><li><div>            if ( ! testResult.connectionTestPassed ) {&nbsp;</div></li><li><div>                if ( ! somethingShownAlready ) {&nbsp;</div></li><li><div>                    testsSelector&nbsp;</div></li><li><div>                        .addClass( 'below-h2' )&nbsp;</div></li><li><div>                        .addClass( 'error' )&nbsp;</div></li><li><div>                        .addClass( 'publicize-token-refresh-message' )&nbsp;</div></li><li><div>                        .append( &quot;&lt;p&gt;&lt;?php echo esc_html( __( 'Before you hit Publish, please refresh the following connection(s) to make sure we can Publicize your post:', 'jetpack' ) ); ?&gt;&lt;/p&gt;&quot; );&nbsp;</div></li><li><div>                    somethingShownAlready = true;&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                if ( testResult.userCanRefresh ) {&nbsp;</div></li><li><div>                    testsSelector.append( '&lt;p/&gt;' );&nbsp;</div></li><li><div>                    $( '&lt;a/&gt;', {&nbsp;</div></li><li><div>                        'class'  : 'pub-refresh-button button', &nbsp;</div></li><li><div>                        'title'  : testResult.refreshText, &nbsp;</div></li><li><div>                        'href'   : testResult.refreshURL, &nbsp;</div></li><li><div>                        'text'   : testResult.refreshText, &nbsp;</div></li><li><div>                        'target' : '_refresh_' + testResult.serviceName&nbsp;</div></li><li><div>                    } )&nbsp;</div></li><li><div>                        .appendTo( testsSelector.children().last() )&nbsp;</div></li><li><div>                        .click( publicizeConnRefreshClick );&nbsp;</div></li><li><div>                }&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        } );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    $( document ).ready( function() {&nbsp;</div></li><li><div>        // If we have the #pub-connection-tests div present, kick off the connection test&nbsp;</div></li><li><div>        if ( $( '#pub-connection-tests' ).length ) {&nbsp;</div></li><li><div>            publicizeConnTestStart();&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    } );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>} );&nbsp;</div></li><li><div>&lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&lt;style type=&quot;text/css&quot;&gt;&nbsp;</div></li><li><div>#publicize {&nbsp;</div></li><li><div>    line-height: 1.5;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>#publicize ul {&nbsp;</div></li><li><div>    margin: 4px 0 4px 6px;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>#publicize li {&nbsp;</div></li><li><div>    margin: 0;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>#publicize textarea {&nbsp;</div></li><li><div>    margin: 4px 0 0;&nbsp;</div></li><li><div>    width: 100%&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>#publicize ul.not-connected {&nbsp;</div></li><li><div>    list-style: square;&nbsp;</div></li><li><div>    padding-left: 1em;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>.post-new-php .authorize-link, .post-php .authorize-link {&nbsp;</div></li><li><div>    line-height: 1.5em;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>.post-new-php .authorize-message, .post-php .authorize-message {&nbsp;</div></li><li><div>    margin-bottom: 0;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>#poststuff #publicize .updated p {&nbsp;</div></li><li><div>    margin: .5em 0;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>.wpas-twitter-length-limit {&nbsp;</div></li><li><div>    color: red;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&lt;/style&gt;&lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>    * Controls the metabox that is displayed on the post page&nbsp;</div></li><li><div>    * Allows the user to customize the message that will be sent out to the social network, as well as pick which&nbsp;</div></li><li><div>    * networks to publish to. Also displays the character counter and some other information.&nbsp;</div></li><li><div>    */&nbsp;</div></li><li><div>    function post_page_metabox() {&nbsp;</div></li><li><div>        global $post;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;publicize-&gt;post_type_is_publicizeable( $post-&gt;post_type ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $user_id = empty( $post-&gt;post_author ) ? $GLOBALS['user_ID'] : $post-&gt;post_author;&nbsp;</div></li><li><div>        $services = $this-&gt;publicize-&gt;get_services( 'connected' );&nbsp;</div></li><li><div>        $available_services = $this-&gt;publicize-&gt;get_services( 'all' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $available_services ) )&nbsp;</div></li><li><div>            $available_services = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_array( $services ) )&nbsp;</div></li><li><div>            $services = array();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $active = array(); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;div id=&quot;publicize&quot; class=&quot;misc-pub-section misc-pub-section-last&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            _e( 'Publicize:', 'jetpack' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( 0 &lt; count( $services ) ) :&nbsp;</div></li><li><div>                    ob_start();&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;publicize-form&quot; class=&quot;hide-if-js&quot;&gt;&nbsp;</div></li><li><div>                    &lt;ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;?php&nbsp;</div></li><li><div>                    // We can set an _all flag to indicate that this post is completely done as&nbsp;</div></li><li><div>                    // far as Publicize is concerned. Jetpack uses this approach. All published posts in Jetpack&nbsp;</div></li><li><div>                    // have Publicize disabled.&nbsp;</div></li><li><div>                    $all_done = get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_DONE . 'all', true ) || ( $this-&gt;in_jetpack && 'publish' == $post-&gt;post_status );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    // We don't allow Publicizing to the same external id twice, to prevent spam&nbsp;</div></li><li><div>                    $service_id_done = (array) get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_SERVICE_DONE, true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    foreach ( $services as $name =&gt; $connections ) {&nbsp;</div></li><li><div>                        foreach ( $connections as $connection ) {&nbsp;</div></li><li><div>                            $connection_data = '';&nbsp;</div></li><li><div>                            if ( method_exists( $connection, 'get_meta' ) )&nbsp;</div></li><li><div>                                $connection_data = $connection-&gt;get_meta( 'connection_data' );&nbsp;</div></li><li><div>                            elseif ( ! empty( $connection['connection_data'] ) )&nbsp;</div></li><li><div>                                $connection_data = $connection['connection_data'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            /**&nbsp;</div></li><li><div>                             * Filter whether a post should be publicized to a given service.&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @module publicize&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @since 2.0.0&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @param bool true Should the post be publicized to a given service? Default to true.&nbsp;</div></li><li><div>                             * @param int $post-&gt;ID Post ID.&nbsp;</div></li><li><div>                             * @param string $name Service name.&nbsp;</div></li><li><div>                             * @param array $connection_data Array of information about all Publicize details for the site.&nbsp;</div></li><li><div>                             */&nbsp;</div></li><li><div>                            if ( ! $continue = apply_filters( 'wpas_submit_post?', true, $post-&gt;ID, $name, $connection_data ) ) {&nbsp;</div></li><li><div>                                continue;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            if ( ! empty( $connection-&gt;unique_id ) ) {&nbsp;</div></li><li><div>                                $unique_id = $connection-&gt;unique_id;&nbsp;</div></li><li><div>                            } else if ( ! empty( $connection['connection_data']['token_id'] ) ) {&nbsp;</div></li><li><div>                                $unique_id = $connection['connection_data']['token_id'];&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // Should we be skipping this one?&nbsp;</div></li><li><div>                            $skip = (&nbsp;</div></li><li><div>                                (&nbsp;</div></li><li><div>                                    in_array( $post-&gt;post_status, array( 'publish', 'draft', 'future' ) )&nbsp;</div></li><li><div>                                    &&&nbsp;</div></li><li><div>                                    get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_SKIP . $unique_id, true )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div>                                ||&nbsp;</div></li><li><div>                                (&nbsp;</div></li><li><div>                                    is_array( $connection )&nbsp;</div></li><li><div>                                    &&&nbsp;</div></li><li><div>                                    (&nbsp;</div></li><li><div>                                        ( isset( $connection['meta']['external_id'] ) && ! empty( $service_id_done[ $name ][ $connection['meta']['external_id'] ] ) )&nbsp;</div></li><li><div>                                        ||&nbsp;</div></li><li><div>                                        // Jetpack's connection data looks a little different.&nbsp;</div></li><li><div>                                        ( isset( $connection['external_id'] ) && ! empty( $service_id_done[ $name ][ $connection['external_id'] ] ) )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // Was this connections (OR, old-format service) already Publicized to?&nbsp;</div></li><li><div>                            $done = ( 1 == get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_DONE . $unique_id, true ) ||  1 == get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_DONE . $name, true ) ); // New and old style flags&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // If this one has already been publicized to, don't let it happen again&nbsp;</div></li><li><div>                            $disabled = '';&nbsp;</div></li><li><div>                            if ( $done )&nbsp;</div></li><li><div>                                $disabled = ' disabled=&quot;disabled&quot;';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // If this is a global connection and this user doesn't have enough permissions to modify&nbsp;</div></li><li><div>                            // those connections, don't let them change it&nbsp;</div></li><li><div>                            $cmeta = $this-&gt;publicize-&gt;get_connection_meta( $connection );&nbsp;</div></li><li><div>                            $hidden_checkbox = false;&nbsp;</div></li><li><div>                            if ( !$done && ( 0 == $cmeta['connection_data']['user_id'] && !current_user_can( $this-&gt;publicize-&gt;GLOBAL_CAP ) ) ) {&nbsp;</div></li><li><div>                                $disabled = ' disabled=&quot;disabled&quot;';&nbsp;</div></li><li><div>                                /**&nbsp;</div></li><li><div>                                 * Filters the checkboxes for global connections with non-prilvedged users.&nbsp;</div></li><li><div>                                 *&nbsp;</div></li><li><div>                                 * @module publicize&nbsp;</div></li><li><div>                                 *&nbsp;</div></li><li><div>                                 * @since 3.7.0&nbsp;</div></li><li><div>                                 *&nbsp;</div></li><li><div>                                 * @param bool   $checked Indicates if this connection should be enabled. Default true.&nbsp;</div></li><li><div>                                 * @param int    $post-&gt;ID ID of the current post&nbsp;</div></li><li><div>                                 * @param string $name Name of the connection (Facebook, Twitter, etc)&nbsp;</div></li><li><div>                                 * @param array  $connection Array of data about the connection.&nbsp;</div></li><li><div>                                 */&nbsp;</div></li><li><div>                                $hidden_checkbox = apply_filters( 'publicize_checkbox_global_default', true, $post-&gt;ID, $name, $connection );&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // Determine the state of the checkbox (on/off) and allow filtering&nbsp;</div></li><li><div>                            $checked = $skip != 1 || $done;&nbsp;</div></li><li><div>                            /**&nbsp;</div></li><li><div>                             * Filter the checkbox state of each Publicize connection appearing in the post editor.&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @module publicize&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @since 2.0.1&nbsp;</div></li><li><div>                             *&nbsp;</div></li><li><div>                             * @param bool $checked Should the Publicize checkbox be enabled for a given service.&nbsp;</div></li><li><div>                             * @param int $post-&gt;ID Post ID.&nbsp;</div></li><li><div>                             * @param string $name Service name.&nbsp;</div></li><li><div>                             * @param array $connection Array of connection details.&nbsp;</div></li><li><div>                             */&nbsp;</div></li><li><div>                            $checked = apply_filters( 'publicize_checkbox_default', $checked, $post-&gt;ID, $name, $connection );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // Force the checkbox to be checked if the post was DONE, regardless of what the filter does&nbsp;</div></li><li><div>                            if ( $done ) {&nbsp;</div></li><li><div>                                $checked = true;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            // This post has been handled, so disable everything&nbsp;</div></li><li><div>                            if ( $all_done ) {&nbsp;</div></li><li><div>                                $disabled = ' disabled=&quot;disabled&quot;';&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            $label = sprintf(&nbsp;</div></li><li><div>                                _x( '%1$s: %2$s', 'Service: Account connected as', 'jetpack' ), &nbsp;</div></li><li><div>                                esc_html( $this-&gt;publicize-&gt;get_service_label( $name ) ), &nbsp;</div></li><li><div>                                esc_html( $this-&gt;publicize-&gt;get_display_name( $name, $connection ) )&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>                            if ( !$skip || $done ) {&nbsp;</div></li><li><div>                                $active[] = $label;&nbsp;</div></li><li><div>                            }&nbsp;</div></li><li><div>                            ?&gt;&nbsp;</div></li><li><div>                            &lt;li&gt;&nbsp;</div></li><li><div>                                &lt;label for=&quot;wpas-submit-&lt;?php echo esc_attr( $unique_id ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                                    &lt;input type=&quot;checkbox&quot; name=&quot;wpas[submit][&lt;?php echo $unique_id; ?&gt;]&quot; id=&quot;wpas-submit-&lt;?php echo $unique_id; ?&gt;&quot; class=&quot;wpas-submit-&lt;?php echo $name; ?&gt;&quot; value=&quot;1&quot; &lt;?php&nbsp;</div></li><li><div>                                        checked( true, $checked );&nbsp;</div></li><li><div>                                        echo $disabled;&nbsp;</div></li><li><div>                                    ?&gt; /&gt;&nbsp;</div></li><li><div>                                    &lt;?php&nbsp;</div></li><li><div>                                    if ( $hidden_checkbox ) {&nbsp;</div></li><li><div>                                        // Need to submit a value to force a global connection to post&nbsp;</div></li><li><div>                                        echo '&lt;input type=&quot;hidden&quot; name=&quot;wpas[submit][' . $unique_id . ']&quot; value=&quot;1&quot; /&gt;';&nbsp;</div></li><li><div>                                    }&nbsp;</div></li><li><div>                                    echo esc_html( $label );&nbsp;</div></li><li><div>                                    ?&gt;&nbsp;</div></li><li><div>                                &lt;/label&gt;&nbsp;</div></li><li><div>                            &lt;/li&gt;&nbsp;</div></li><li><div>                            &lt;?php&nbsp;</div></li><li><div>                        }&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( $title = get_post_meta( $post-&gt;ID, $this-&gt;publicize-&gt;POST_MESS, true ) ) {&nbsp;</div></li><li><div>                        $title = esc_html( $title );&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $title = '';&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                    ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;label for=&quot;wpas-title&quot;&gt;&lt;?php _e( 'Custom Message:', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                    &lt;span id=&quot;wpas-title-counter&quot; class=&quot;alignright hide-if-no-js&quot;&gt;0&lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;textarea name=&quot;wpas_title&quot; id=&quot;wpas-title&quot;&lt;?php disabled( $all_done ); ?&gt;&gt;&lt;?php echo $title; ?&gt;&lt;/textarea&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;a href=&quot;#&quot; class=&quot;hide-if-no-js&quot; id=&quot;publicize-form-hide&quot;&gt;&lt;?php _e( 'Hide', 'jetpack' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;input type=&quot;hidden&quot; name=&quot;wpas[0]&quot; value=&quot;1&quot; /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;/div&gt;&nbsp;</div></li><li><div>                &lt;div id=&quot;pub-connection-tests&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;?php // #publicize-form&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $publicize_form = ob_get_clean();&nbsp;</div></li><li><div>            else :&nbsp;</div></li><li><div>                echo &quot;&nbsp;&quot; . __( 'Not Connected', 'jetpack' );&nbsp;</div></li><li><div>                    ob_start();&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;div id=&quot;publicize-form&quot; class=&quot;hide-if-js&quot;&gt;&nbsp;</div></li><li><div>                    &lt;div id=&quot;add-publicize-check&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;strong&gt;&lt;?php _e( 'Connect to', 'jetpack' ); ?&gt;:&lt;/strong&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;ul class=&quot;not-connected&quot;&gt;&nbsp;</div></li><li><div>                        &lt;?php foreach ( $available_services as $service_name =&gt; $service ) : ?&gt;&nbsp;</div></li><li><div>                        &lt;li&gt;&nbsp;</div></li><li><div>                            &lt;a class=&quot;pub-service&quot; data-service=&quot;&lt;?php echo esc_attr( $service_name ); ?&gt;&quot; title=&quot;&lt;?php echo esc_attr( sprintf( __( 'Connect and share your posts on %s', 'jetpack' ), $this-&gt;publicize-&gt;get_service_label( $service_name ) ) ); ?&gt;&quot; target=&quot;_blank&quot; href=&quot;&lt;?php echo $this-&gt;publicize-&gt;connect_url( $service_name ); ?&gt;&quot;&gt;&nbsp;</div></li><li><div>                                &lt;?php echo esc_html( $this-&gt;publicize-&gt;get_service_label( $service_name ) ); ?&gt;&nbsp;</div></li><li><div>                            &lt;/a&gt;&nbsp;</div></li><li><div>                        &lt;/li&gt;&nbsp;</div></li><li><div>                        &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                    &lt;/ul&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    &lt;?php if ( 0 &lt; count( $services ) ) : ?&gt;&nbsp;</div></li><li><div>                        &lt;a href=&quot;#&quot; class=&quot;hide-if-no-js&quot; id=&quot;publicize-form-hide&quot;&gt;&lt;?php _e( 'Hide', 'jetpack' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;?php else : ?&gt;&nbsp;</div></li><li><div>                        &lt;a href=&quot;#&quot; class=&quot;hide-if-no-js&quot; id=&quot;publicize-disconnected-form-hide&quot;&gt;&lt;?php _e( 'Hide', 'jetpack' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                    &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>                &lt;/div&gt; &lt;?php // #publicize-form&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                $publicize_form = ob_get_clean();&nbsp;</div></li><li><div>            endif;&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;span id=&quot;publicize-defaults&quot;&gt;&lt;strong&gt;&lt;?php echo join( '&lt;/strong&gt;, &lt;strong&gt;', array_map( 'esc_html', $active ) ); ?&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php if ( 0 &lt; count( $services ) ) : ?&gt;&nbsp;</div></li><li><div>                &lt;a href=&quot;#&quot; id=&quot;publicize-form-edit&quot;&gt;&lt;?php _e( 'Edit Details', 'jetpack' ); ?&gt;&lt;/a&gt;&nbsp;&lt;a href=&quot;&lt;?php echo admin_url( 'options-general.php?page=sharing' ); ?&gt;&quot; target=&quot;_blank&quot;&gt;&lt;?php _e( 'Settings', 'jetpack' ); ?&gt;&lt;/a&gt;&lt;br /&gt;&nbsp;</div></li><li><div>            &lt;?php else : ?&gt;&nbsp;</div></li><li><div>                &lt;a href=&quot;#&quot; id=&quot;publicize-disconnected-form-show&quot;&gt;&lt;?php _e( 'Show', 'jetpack' ); ?&gt;&lt;/a&gt;&lt;br /&gt;&nbsp;</div></li><li><div>            &lt;?php endif; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;?php&nbsp;</div></li><li><div>            /**&nbsp;</div></li><li><div>             * Filter the Publicize details form.&nbsp;</div></li><li><div>             *&nbsp;</div></li><li><div>             * @module publicize&nbsp;</div></li><li><div>             *&nbsp;</div></li><li><div>             * @since 2.0.0&nbsp;</div></li><li><div>             *&nbsp;</div></li><li><div>             * @param string $publicize_form Publicize Details form appearing above Publish button in the editor.&nbsp;</div></li><li><div>             */&nbsp;</div></li><li><div>            echo apply_filters( 'publicize_form', $publicize_form );&nbsp;</div></li><li><div>            ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;/div&gt; &lt;?php // #publicize&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 3.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.2/classes/publicize_ui/" class="">3.8.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.1/classes/publicize_ui/" class="">3.8.1</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/publicize_ui/" class="active">3.8.0</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/classes/publicize_ui/" class="">3.7.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.1/classes/publicize_ui/" class="">3.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Publicize_UI</li><li><span></span>Jetpack by WordPress.com</li><li><span></span>3.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>