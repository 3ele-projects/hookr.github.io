<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr class lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr class lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr class lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr class ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr class gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr class" data-site="plugin" data-version="3.7.2" data-slug="jetpack-by-wordpress-com" data-type="class" data-id="12735"><head xmlns="http://www.w3.org/1999/xhtml"><title> jetpack_videopress | class | Jetpack By WordPress Com | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="Jetpack_VideoPress, class, plugin, jetpack-by-wordpress-com, 3.7.2" /><meta name="description" content="VideoPress in Jetpack" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=0441b34babadcb8a00889ef435c14796' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.16' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/classes/jetpack_video_press/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fjetpack_video_press%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Fclasses%2Fjetpack_video_press%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-jetpack-by-wordpress-com-3.7.2-class-jetpack_video_press","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="jetpack_video_press" class="single single-class single-format-standard"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to jetpack-by-wordpress-com." href="http://hookr.io/plugins/jetpack-by-wordpress-com/" class="plugin"><span property="name">jetpack-by-wordpress-com</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 3.7.2." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/" class="H_VERSION"><span property="name">3.7.2</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to classes." href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/classes/" class=""><span property="name">classes</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">jetpack_video_press</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="class"><ul role="navigation"><li class="" data-id="all" data-count="1480"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/all/" title="All">All <span class="count badge">1480</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="587"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/hooks/" title="Hooks">Hooks <span class="count badge">587</span></a></li><li class="" data-id="action" data-count="194"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/actions/" title="Actions">Actions <span class="count badge">194</span></a></li><li class="" data-id="filter" data-count="393"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/filters/" title="Filters">Filters <span class="count badge">393</span></a></li><li class="active" data-id="class" data-count="259"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/classes/" title="Classes">Classes <span class="count badge">259</span></a></li><li class="" data-id="constant" data-count="62"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/constants/" title="Constants">Constants <span class="count badge">62</span></a></li><li class="" data-id="function" data-count="528"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/functions/" title="Functions">Functions <span class="count badge">528</span></a></li><li class="" data-id="shortcode" data-count="44"><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">44</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hookrio" id="_carbonads_js"></script><noscript>derpy.</noscript> <section><h1><strong>Jetpack_VideoPress</strong></h1><p>VideoPress in Jetpack.</p> </section> <section id="defined" class="source"><h2>Defined <span class="count">(1)</span></h2><p>The class is defined in the following location(s).</p><dl><dt><strong><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/files/modules-videopress-videopress/" class="file">/modules/videopress/videopress.php <span>&nbsp;</span></a></strong></dt><dd><pre><ol data-line="6" class="block" start="6"><li><div>class Jetpack_VideoPress {&nbsp;</div></li><li><div>    public $module = 'videopress';&nbsp;</div></li><li><div>    public $option_name = 'videopress';&nbsp;</div></li><li><div>    public $version = 4;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Singleton&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    public static function init() {&nbsp;</div></li><li><div>        static $instance = false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $instance )&nbsp;</div></li><li><div>            $instance = new Jetpack_VideoPress;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $instance;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function __construct() {&nbsp;</div></li><li><div>        $this-&gt;version = time(); // &lt;s&gt;ghost&lt;/s&gt; cache busters!&nbsp;</div></li><li><div>        add_action( 'jetpack_modules_loaded', array( $this, 'jetpack_modules_loaded' ) );&nbsp;</div></li><li><div>        add_action( 'jetpack_activate_module_videopress', array( $this, 'jetpack_module_activated' ) );&nbsp;</div></li><li><div>        add_action( 'jetpack_deactivate_module_videopress', array( $this, 'jetpack_module_deactivated' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        require_once( dirname( __FILE__ ) . '/shortcode.php' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * After all modules have been loaded.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function jetpack_modules_loaded() {&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Only the connection owner can configure this module.&nbsp;</div></li><li><div>        if ( $this-&gt;is_connection_owner() ) {&nbsp;</div></li><li><div>            Jetpack::enable_module_configurable( $this-&gt;module );&nbsp;</div></li><li><div>            Jetpack::module_configuration_load( $this-&gt;module, array( $this, 'jetpack_configuration_load' ) );&nbsp;</div></li><li><div>            Jetpack::module_configuration_screen( $this-&gt;module, array( $this, 'jetpack_configuration_screen' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Only if the current user can manage the VideoPress library and one has been connected.&nbsp;</div></li><li><div>        if ( $this-&gt;can( 'read_videos' ) && $options['blog_id'] ) {&nbsp;</div></li><li><div>            add_action( 'wp_enqueue_media', array( $this, 'enqueue_admin_scripts' ) );&nbsp;</div></li><li><div>            add_action( 'print_media_templates', array( $this, 'print_media_templates' ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Load these at priority -1 so they're fired before Core's are.&nbsp;</div></li><li><div>            add_action( 'wp_ajax_query-attachments', array( $this, 'wp_ajax_query_attachments' ), -1 );&nbsp;</div></li><li><div>            add_action( 'wp_ajax_save-attachment', array( $this, 'wp_ajax_save_attachment' ), -1 );&nbsp;</div></li><li><div>            add_action( 'wp_ajax_save-attachment-compat', array( $this, 'wp_ajax_save_attachment' ), -1 );&nbsp;</div></li><li><div>            add_action( 'wp_ajax_delete-post', array( $this, 'wp_ajax_delete_post' ), -1 );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            add_action( 'admin_menu', array( $this, 'admin_menu' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $this-&gt;can( 'upload_videos' ) && $options['blog_id'] ) {&nbsp;</div></li><li><div>            add_action( 'wp_ajax_videopress-get-upload-token', array( $this, 'wp_ajax_videopress_get_upload_token' ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        add_filter( 'videopress_shortcode_options', array( $this, 'videopress_shortcode_options' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function wp_ajax_videopress_get_upload_token() {&nbsp;</div></li><li><div>        if ( ! $this-&gt;can( 'upload_videos' ) )&nbsp;</div></li><li><div>            return wp_send_json_error();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $result = $this-&gt;query( 'jetpack.vpGetUploadToken' );&nbsp;</div></li><li><div>        if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>            return wp_send_json_error( array( 'message' =&gt; __( 'Could not obtain a VideoPress upload token. Please try again later.', 'jetpack' ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $response = $result;&nbsp;</div></li><li><div>        if ( empty( $response['videopress_blog_id'] ) || empty( $response['videopress_token'] ) || empty( $response[ 'videopress_action_url' ] ) )&nbsp;</div></li><li><div>            return wp_send_json_error( array( 'message' =&gt; __( 'Could not obtain a VideoPress upload token. Please try again later.', 'jetpack' ) ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return wp_send_json_success( $response );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get VideoPress options&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function get_options() {&nbsp;</div></li><li><div>        $defaults = array(&nbsp;</div></li><li><div>            'blogs' =&gt; array(), &nbsp;</div></li><li><div>            'blog_id' =&gt; 0, &nbsp;</div></li><li><div>            'access' =&gt; '', &nbsp;</div></li><li><div>            'allow-upload' =&gt; false, &nbsp;</div></li><li><div>            'freedom' =&gt; false, &nbsp;</div></li><li><div>            'hd' =&gt; false, &nbsp;</div></li><li><div>            'meta' =&gt; array(&nbsp;</div></li><li><div>                'max_upload_size' =&gt; 0, &nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = Jetpack_Options::get_option( $this-&gt;option_name, array() );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If options have not been saved yet, check for older VideoPress plugin options.&nbsp;</div></li><li><div>        if ( empty( $options ) ) {&nbsp;</div></li><li><div>            $options['freedom'] = (bool) get_option( 'video_player_freedom', false );&nbsp;</div></li><li><div>            $options['hd'] = (bool) get_option( 'video_player_high_quality', false );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = array_merge( $defaults, $options );&nbsp;</div></li><li><div>        return $options;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Update VideoPress options&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function update_options( $options ) {&nbsp;</div></li><li><div>        Jetpack_Options::update_option( $this-&gt;option_name, $options );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Runs when the VideoPress module is activated.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function jetpack_module_activated() {&nbsp;</div></li><li><div>        if ( ! $this-&gt;is_connection_owner() )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Ask WordPress.com for a list of VideoPress blogs&nbsp;</div></li><li><div>        $result = $this-&gt;query( 'jetpack.vpGetBlogs' );&nbsp;</div></li><li><div>        if ( ! is_wp_error( $result ) )&nbsp;</div></li><li><div>            $options['blogs'] = $result;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If there's at least one available blog, let's use it.&nbsp;</div></li><li><div>        if ( is_array( $options['blogs'] ) && count( $options['blogs'] ) &gt; 0 )&nbsp;</div></li><li><div>            $options['blog_id'] = $options['blogs'][0]['blog_id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $this-&gt;update_options( $options );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Runs when the VideoPress module is deactivated.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function jetpack_module_deactivated() {&nbsp;</div></li><li><div>        Jetpack_Options::delete_option( $this-&gt;option_name );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Remote Query&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Performs a remote XML-RPC query using Jetpack's IXR Client. And also&nbsp;</div></li><li><div>     * appends some useful stuff about this setup to the query.&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * @return the Jetpack_IXR_Client object after querying.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function query( $method, $args = null ) {&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>        Jetpack::load_xml_rpc_client();&nbsp;</div></li><li><div>        $xml = new Jetpack_IXR_Client( array(&nbsp;</div></li><li><div>            'user_id' =&gt; JETPACK_MASTER_USER, // All requests are on behalf of the connection owner.&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $params = array(&nbsp;</div></li><li><div>            'args' =&gt; $args, &nbsp;</div></li><li><div>            'video_blog_id' =&gt; $options['blog_id'], &nbsp;</div></li><li><div>            'caps' =&gt; array(), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Let Jetpack know about our local caps.&nbsp;</div></li><li><div>        foreach ( array( 'read_videos', 'edit_videos', 'delete_videos', 'upload_videos' ) as $cap )&nbsp;</div></li><li><div>            if ( $this-&gt;can( $cap ) )&nbsp;</div></li><li><div>                $params['caps'][] = $cap;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $xml-&gt;query( $method, $params );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( $xml-&gt;isError() )&nbsp;</div></li><li><div>            return new WP_Error( 'xml_rpc_error', 'An XML-RPC error has occurred.' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $response = $xml-&gt;getResponse();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // If there's any metadata with the response, save it for future use.&nbsp;</div></li><li><div>        if ( is_array( $response ) && isset( $response['meta'] ) ) {&nbsp;</div></li><li><div>            $options = $this-&gt;get_options();&nbsp;</div></li><li><div>            if ( $response['meta'] !== $options['meta'] ) {&nbsp;</div></li><li><div>                $options['meta'] = array_merge( $options['meta'], $response['meta'] );&nbsp;</div></li><li><div>                $this-&gt;update_options( $options );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_array( $response ) && isset( $response['result'] ) )&nbsp;</div></li><li><div>            return $response['result'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $response;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Runs before the VideoPress Configuration screen loads, useful&nbsp;</div></li><li><div>     * to update options and yield errors.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function jetpack_configuration_load() {&nbsp;</div></li><li><div>        $this-&gt;enqueue_admin_scripts();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Save configuration&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        if ( ! empty( $_POST['action'] ) && $_POST['action'] == 'videopress-save' ) {&nbsp;</div></li><li><div>            check_admin_referer( 'videopress-settings' );&nbsp;</div></li><li><div>            $options = $this-&gt;get_options();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( isset( $_POST['blog_id'] ) && in_array( $_POST['blog_id'], wp_list_pluck( $options['blogs'], 'blog_id' ) ) )&nbsp;</div></li><li><div>                $options['blog_id'] = $_POST['blog_id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Allow the None setting too.&nbsp;</div></li><li><div>            if ( isset( $_POST['blog_id'] ) && $_POST['blog_id'] == 0 )&nbsp;</div></li><li><div>                $options['blog_id'] = 0;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            /**&nbsp;</div></li><li><div>             * @see $this-&gt;can()&nbsp;</div></li><li><div>             */&nbsp;</div></li><li><div>            if ( isset( $_POST['videopress-access'] ) && in_array( $_POST['videopress-access'], array( '', 'read', 'edit', 'delete' ) ) )&nbsp;</div></li><li><div>                $options['access'] = $_POST['videopress-access'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $options['freedom'] = isset( $_POST['videopress-freedom'] );&nbsp;</div></li><li><div>            $options['hd'] = isset( $_POST['videopress-hd'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Allow upload only if some level of access has been granted, and uploads were allowed.&nbsp;</div></li><li><div>            $options['allow-upload'] = false;&nbsp;</div></li><li><div>            if ( ! empty( $options['access'] ) && isset( $_POST['videopress-upload'] ) )&nbsp;</div></li><li><div>                $options['allow-upload'] = true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $this-&gt;update_options( $options );&nbsp;</div></li><li><div>            Jetpack::state( 'message', 'module_configured' );&nbsp;</div></li><li><div>            wp_safe_redirect( Jetpack::module_configuration_url( $this-&gt;module ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Refresh the list of available WordPress.com blogs&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        if ( ! empty( $_GET['videopress'] ) && $_GET['videopress'] == 'refresh-blogs' ) {&nbsp;</div></li><li><div>            check_admin_referer( 'videopress-settings' );&nbsp;</div></li><li><div>            $options = $this-&gt;get_options();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $result = $this-&gt;query( 'jetpack.vpGetBlogs' );&nbsp;</div></li><li><div>            if ( ! is_wp_error( $result ) ) {&nbsp;</div></li><li><div>                $options['blogs'] = $result;&nbsp;</div></li><li><div>                $this-&gt;update_options( $options );&nbsp;</div></li><li><div>            }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            wp_safe_redirect( Jetpack::module_configuration_url( $this-&gt;module ) );&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Renders the VideoPress Configuration screen in Jetpack.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function jetpack_configuration_screen() {&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>        $refresh_url = wp_nonce_url( add_query_arg( 'videopress', 'refresh-blogs' ), 'videopress-settings' );&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;narrow&quot;&gt;&nbsp;</div></li><li><div>            &lt;form method=&quot;post&quot; id=&quot;videopress-settings&quot;&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;videopress-save&quot; /&gt;&nbsp;</div></li><li><div>                &lt;?php wp_nonce_field( 'videopress-settings' ); ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;table id=&quot;menu&quot; class=&quot;form-table&quot;&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;th scope=&quot;row&quot; colspan=&quot;2&quot;&gt;&nbsp;</div></li><li><div>                            &lt;p&gt;&lt;?php _e( 'Please note that the VideoPress module requires a WordPress.com account with an active &lt;a href=&quot;http://store.wordpress.com/premium-upgrades/videopress/&quot; target=&quot;_blank&quot;&gt;VideoPress subscription&lt;/a&gt;.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/th&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;?php _e( 'Connected WordPress.com Blog', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                        &lt;/th&gt;&nbsp;</div></li><li><div>                        &lt;td&gt;&nbsp;</div></li><li><div>                            &lt;select name=&quot;blog_id&quot;&gt;&nbsp;</div></li><li><div>                                &lt;option value=&quot;0&quot; &lt;?php selected( $options['blog_id'], 0 ); ?&gt;&gt; &lt;?php esc_html_e( 'None', 'jetpack' ); ?&gt;&lt;/option&gt;&nbsp;</div></li><li><div>                                &lt;?php foreach ( $options['blogs'] as $blog ) : ?&gt;&nbsp;</div></li><li><div>                                &lt;option value=&quot;&lt;?php echo absint( $blog['blog_id'] ); ?&gt;&quot; &lt;?php selected( $options['blog_id'], $blog['blog_id'] ); ?&gt;&gt;&lt;?php echo esc_html( $blog['name'] ); ?&gt; (&lt;?php echo esc_html( $blog['domain'] ); ?&gt;)&lt;/option&gt;&nbsp;</div></li><li><div>                                &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>                            &lt;/select&gt;&nbsp;</div></li><li><div>                            &lt;p class=&quot;description&quot;&gt;&lt;?php _e( 'Only videos from the selected blog will be available in your media library.', 'jetpack' ); ?&gt;&nbsp;</div></li><li><div>                                &lt;?php printf( __( '&lt;a href=&quot;%s&quot;&gt;Click here&lt;/a&gt; to refresh this list.', 'jetpack' ), esc_url( $refresh_url ) ); ?&gt;&nbsp;</div></li><li><div>                            &lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;?php _e( 'Video Library Access', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                        &lt;/th&gt;&nbsp;</div></li><li><div>                        &lt;td&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;videopress-access&quot; value=&quot;&quot; &lt;?php checked( '', $options['access'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Do not allow other users to access my VideoPress library', 'jetpack' ); ?&gt;&lt;/label&gt;&lt;br/&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;videopress-access&quot; value=&quot;read&quot; &lt;?php checked( 'read', $options['access'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Allow users to access my videos', 'jetpack' ); ?&gt;&lt;/label&gt;&lt;br/&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;videopress-access&quot; value=&quot;edit&quot; &lt;?php checked( 'edit', $options['access'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Allow users to access and edit my videos', 'jetpack' ); ?&gt;&lt;/label&gt;&lt;br/&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;videopress-access&quot; value=&quot;delete&quot; &lt;?php checked( 'delete', $options['access'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Allow users to access, edit, and delete my videos', 'jetpack' ); ?&gt;&lt;/label&gt;&lt;br/&gt;&lt;br /&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;videopress-upload&quot; value=&quot;1&quot; &lt;?php checked( $options['allow-upload'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Allow users to upload videos', 'jetpack' ); ?&gt;&lt;/label&gt;&lt;br /&gt;&nbsp;</div></li><li><div>                        &lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>                            &lt;label for=&quot;videopress-freedom&quot;&gt;&lt;?php _e( 'Free formats', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                        &lt;/th&gt;&nbsp;</div></li><li><div>                        &lt;td&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;videopress-freedom&quot; id=&quot;videopress-freedom&quot; &lt;?php checked( $options['freedom'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Only display videos in free software formats', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                            &lt;p class=&quot;description&quot;&gt;&lt;?php _e( 'Ogg file container with Theora video and Vorbis audio. Note that some browsers are unable to play free software video formats, including Internet Explorer and Safari.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                    &lt;tr&gt;&nbsp;</div></li><li><div>                        &lt;th scope=&quot;row&quot;&gt;&nbsp;</div></li><li><div>                            &lt;label for=&quot;videopress-hd&quot;&gt;&lt;?php _e( 'Default quality', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                        &lt;/th&gt;&nbsp;</div></li><li><div>                        &lt;td&gt;&nbsp;</div></li><li><div>                            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;videopress-hd&quot; id=&quot;videopress-hd&quot; &lt;?php checked( $options['hd'] ); ?&gt; /&gt;&nbsp;</div></li><li><div>                                &lt;?php _e( 'Display higher quality video by default.', 'jetpack' ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                            &lt;p class=&quot;description&quot;&gt;&lt;?php _e( 'This setting may be overridden for individual videos.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                        &lt;/td&gt;&nbsp;</div></li><li><div>                    &lt;/tr&gt;&nbsp;</div></li><li><div>                &lt;/table&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php submit_button(); ?&gt;&nbsp;</div></li><li><div>            &lt;/form&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function admin_menu() {&nbsp;</div></li><li><div>        add_media_page( __( 'VideoPress Library', 'jetpack' ), __( 'VideoPress', 'jetpack' ), 'upload_files', 'videopress-library', array( $this, 'admin_menu_library' ) );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    function admin_menu_library() {&nbsp;</div></li><li><div>        wp_enqueue_media();&nbsp;</div></li><li><div>        $this-&gt;enqueue_admin_scripts();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;div class=&quot;wrap&quot; style=&quot;max-width: 600px;&quot;&gt;&nbsp;</div></li><li><div>            &lt;?php screen_icon(); ?&gt;&nbsp;</div></li><li><div>            &lt;h2&gt;&lt;?php _e( 'VideoPress Library', 'jetpack' ); ?&gt;&lt;/h2&gt;&nbsp;</div></li><li><div>            &lt;p&gt;&lt;?php _e( 'Use the button below to browse your VideoPress Library. Note that you can also browse your VideoPress Library while editing a post or page by using the &lt;strong&gt;Add Media&lt;/strong&gt; button in the post editor.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>            &lt;p class=&quot;hide-if-no-js&quot;&gt;&lt;a href=&quot;#&quot; id=&quot;videopress-browse&quot; class=&quot;button&quot;&gt;&lt;?php _e( 'Browse Your VideoPress Library', 'jetpack' ); ?&gt;&lt;/a&gt;&lt;/p&gt;&nbsp;</div></li><li><div>            &lt;p class=&quot;hide-if-js description&quot;&gt;&lt;?php _e( 'Please enable JavaScript support in your browser to use VideoPress.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>        &lt;/div&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * A can of coke&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * Similar to current_user_can, but internal to VideoPress. Returns&nbsp;</div></li><li><div>     * true if the given VideoPress capability is allowed by the given user.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function can( $cap, $user_id = false ) {&nbsp;</div></li><li><div>        if ( ! $user_id )&nbsp;</div></li><li><div>            $user_id = get_current_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Connection owners are allowed to do all the things.&nbsp;</div></li><li><div>        if ( $this-&gt;is_connection_owner( $user_id ) )&nbsp;</div></li><li><div>            return true;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * The access setting can be set by the connection owner, to allow sets&nbsp;</div></li><li><div>         * of operations to other site users. Each access value corresponds to&nbsp;</div></li><li><div>         * an array of things they can do.&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>        $map = array(&nbsp;</div></li><li><div>            'read' =&gt; array( 'read_videos' ), &nbsp;</div></li><li><div>            'edit' =&gt; array( 'read_videos', 'edit_videos' ), &nbsp;</div></li><li><div>            'delete' =&gt; array( 'read_videos', 'edit_videos', 'delete_videos' ), &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! array_key_exists( $options['access'], $map ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! in_array( $cap, $map[ $options['access'] ] ) && 'upload_videos' != $cap )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Additional and intrenal caps checks&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! user_can( $user_id, 'upload_files' ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'edit_videos' == $cap && ! user_can( $user_id, 'edit_others_posts' ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'delete_videos' == $cap && ! user_can( $user_id, 'delete_others_posts' ) )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( 'upload_videos' == $cap && ! $options['allow-upload'] )&nbsp;</div></li><li><div>            return false;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return true;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Returns true if the provided user is the Jetpack connection owner.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function is_connection_owner( $user_id = false ) {&nbsp;</div></li><li><div>        if ( ! $user_id )&nbsp;</div></li><li><div>            $user_id = get_current_user_id();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $user_token = Jetpack_Data::get_access_token( JETPACK_MASTER_USER );&nbsp;</div></li><li><div>        return $user_token && is_object( $user_token ) && isset( $user_token-&gt;external_user_id ) && $user_id === $user_token-&gt;external_user_id;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Our custom AJAX callback for the query-attachments action&nbsp;</div></li><li><div>     * used in the media modal. By-passed if not for VideoPress.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function wp_ajax_query_attachments() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Watch for VideoPress calls&nbsp;</div></li><li><div>        if ( ! isset( $_POST['query']['videopress'] ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;can( 'read_videos' ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'permission denied' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Get and sanitize query arguments.&nbsp;</div></li><li><div>        $query_args = $this-&gt;sanitize_wp_query_args( $_POST['query'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Fire a remote WP_Query&nbsp;</div></li><li><div>        $result = $this-&gt;query( 'jetpack.vpQuery', $query_args );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'xml rpc request error' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $items = $result;&nbsp;</div></li><li><div>        $shortcode_handler = Jetpack_VideoPress_Shortcode::init();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        foreach ( $items as $key =&gt; $item ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Check local permissions&nbsp;</div></li><li><div>            if ( ! $this-&gt;can( 'edit_videos' ) )&nbsp;</div></li><li><div>                unset( $item['vp_nonces']['update'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! $this-&gt;can( 'delete_videos' ) )&nbsp;</div></li><li><div>                unset( $item['vp_nonces']['delete'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            // Add a second pair of nonces for the .org blog.&nbsp;</div></li><li><div>            $item['nonces'] = array();&nbsp;</div></li><li><div>            if ( ! empty( $item['vp_nonces']['update'] ) )&nbsp;</div></li><li><div>                $item['nonces']['update'] = wp_create_nonce( 'update-videopress-post_' . $item['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            if ( ! empty( $item['vp_nonces']['delete'] ) )&nbsp;</div></li><li><div>                $item['nonces']['delete'] = wp_create_nonce( 'delete-videopress-post_' . $item['id'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $item['vp_embed'] = $shortcode_handler-&gt;shortcode_callback( array(&nbsp;</div></li><li><div>                $item['vp_guid'], &nbsp;</div></li><li><div>                'autoplay' =&gt; true, &nbsp;</div></li><li><div>                'flashonly' =&gt; true, &nbsp;</div></li><li><div>                'w' =&gt; 440, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            $items[ $key ] = $item;&nbsp;</div></li><li><div>        }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_send_json_success( $items );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Sanitize user-provided WP_Query arguments&nbsp;</div></li><li><div>     *&nbsp;</div></li><li><div>     * These might be sent to the VideoPress server, for a remote WP_Query&nbsp;</div></li><li><div>     * call so let's make sure they're sanitized and safe to send.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function sanitize_wp_query_args( $args ) {&nbsp;</div></li><li><div>        $args = shortcode_atts( array(&nbsp;</div></li><li><div>            'posts_per_page' =&gt; 40, &nbsp;</div></li><li><div>            'orderby' =&gt; 'date', &nbsp;</div></li><li><div>            'order' =&gt; 'desc', &nbsp;</div></li><li><div>            'paged' =&gt; 1, &nbsp;</div></li><li><div>            's' =&gt; '', &nbsp;</div></li><li><div> ), (array) $args, 'wpvideo' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args['posts_per_page'] = absint( $args['posts_per_page'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args['orderby'] = strtolower( $args['orderby'] );&nbsp;</div></li><li><div>        $args['orderby'] = ( in_array( $args['orderby'], array( 'date' ) ) ) ? $args['orderby'] : 'date';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args['order'] = strtolower( $args['order'] );&nbsp;</div></li><li><div>        $args['order'] = ( in_array( $args['order'], array( 'asc', 'desc' ) ) ) ? $args['order'] : 'desc';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $args['paged'] = absint( $args['paged'] );&nbsp;</div></li><li><div>        $args['s'] = sanitize_text_field( $args['s'] );&nbsp;</div></li><li><div>        return $args;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Custom AJAX callback for the save-attachment action. If the request was&nbsp;</div></li><li><div>     * not for a VideoPress object, core's fallback action will kick in.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function wp_ajax_save_attachment() {&nbsp;</div></li><li><div>        if ( ! isset( $_POST['is_videopress'] ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;can( 'edit_videos' ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'permission denied' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_id = 0;&nbsp;</div></li><li><div>        if ( ! isset( $_POST['id'] ) || ! $post_id = absint( $_POST['id'] ) )&nbsp;</div></li><li><div>            wp_send_json_error();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! isset( $_POST['vp_nonces']['update'] ) )&nbsp;</div></li><li><div>            wp_send_json_error();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        check_ajax_referer( 'update-videopress-post_' . $post_id, 'nonce' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $changes = ( ! empty( $_POST['changes'] ) ) ? (array) $_POST['changes'] : array();&nbsp;</div></li><li><div>        $changes = shortcode_atts( array(&nbsp;</div></li><li><div>            'title' =&gt; null, &nbsp;</div></li><li><div>            'caption' =&gt; null, &nbsp;</div></li><li><div>            'description' =&gt; null, &nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            'vp_share' =&gt; null, &nbsp;</div></li><li><div>            'vp_rating' =&gt; null, &nbsp;</div></li><li><div> ), $changes, 'wpvideo' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_null( $changes['vp_share'] ) )&nbsp;</div></li><li><div>            $changes['vp_share'] = (bool) $changes['vp_share'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! is_null( $changes['vp_rating'] ) )&nbsp;</div></li><li><div>            $changes['vp_rating'] = ( array_key_exists( $changes['vp_rating'], $this-&gt;get_available_ratings() ) ) ? $changes['vp_rating'] : null;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        // Remove null-values&nbsp;</div></li><li><div>        foreach ( $changes as $key =&gt; $value )&nbsp;</div></li><li><div>            if ( is_null( $value ) )&nbsp;</div></li><li><div>                unset( $changes[ $key ] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $result = $this-&gt;query( 'jetpack.vpSaveAttachment', array(&nbsp;</div></li><li><div>            'post_id' =&gt; $post_id, &nbsp;</div></li><li><div>            'changes' =&gt; $changes, &nbsp;</div></li><li><div>            'nonce' =&gt; $_POST['vp_nonces']['update'], &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'xml rpc request error' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_send_json_success();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Custom AJAX callback for the delete-post action, only for VideoPress objects.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function wp_ajax_delete_post() {&nbsp;</div></li><li><div>        if ( ! isset( $_POST['is_videopress'] ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! $this-&gt;can( 'delete_videos' ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'permission denied' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $post_id = 0;&nbsp;</div></li><li><div>        if ( ! isset( $_POST['id'] ) || ! $post_id = absint( $_POST['id'] ) )&nbsp;</div></li><li><div>            wp_send_json_error();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( ! isset( $_POST['vp_nonces']['delete'] ) )&nbsp;</div></li><li><div>            wp_send_json_error();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        check_ajax_referer( 'delete-videopress-post_' . $post_id );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $result = $this-&gt;query( 'jetpack.vpDeleteAttachment', array(&nbsp;</div></li><li><div>            'post_id' =&gt; $post_id, &nbsp;</div></li><li><div>            'nonce' =&gt; $_POST['vp_nonces']['delete'], &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( is_wp_error( $result ) )&nbsp;</div></li><li><div>            return wp_send_json_error( 'xml rpc request error' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_send_json_success();&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Register VideoPress admin scripts.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function enqueue_admin_scripts() {&nbsp;</div></li><li><div>        if ( did_action( 'videopress_enqueue_admin_scripts' ) )&nbsp;</div></li><li><div>            return;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_enqueue_script( 'videopress-admin', plugins_url( 'videopress-admin.js', __FILE__ ), array( 'jquery', 'media-views', 'media-models' ), $this-&gt;version );&nbsp;</div></li><li><div>        wp_enqueue_style( 'videopress-admin', plugins_url( 'videopress-admin.css', __FILE__ ), array(), $this-&gt;version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $caps = array();&nbsp;</div></li><li><div>        foreach( array( 'read_videos', 'edit_videos', 'delete_videos', 'upload_videos' ) as $cap )&nbsp;</div></li><li><div>            $caps[ $cap ] = $this-&gt;can( $cap );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $l10n = array(&nbsp;</div></li><li><div>            'selectVideoFile' =&gt; __( 'Please select a video file to upload.', 'jetpack' ), &nbsp;</div></li><li><div>            'videoUploading' =&gt; __( 'Your video is uploading... Please do not close this window.', 'jetpack' ), &nbsp;</div></li><li><div>            'unknownError' =&gt; __( 'An unknown error has occurred. Please try again later.', 'jetpack' ), &nbsp;</div></li><li><div>            'videoUploaded' =&gt; __( 'Your video has successfully been uploaded. It will appear in your VideoPress Library shortly.', 'jetpack' ), &nbsp;</div></li><li><div>            'VideoPressLibraryRouter' =&gt; __( 'VideoPress Library', 'jetpack' ), &nbsp;</div></li><li><div>            'uploadVideoRouter' =&gt; __( 'Upload a Video', 'jetpack' ), &nbsp;</div></li><li><div>            'insertVideoButton' =&gt; __( 'Insert Video', 'jetpack' ), &nbsp;</div></li><li><div>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        wp_localize_script( 'videopress-admin', 'VideoPressAdminSettings', array(&nbsp;</div></li><li><div>            'caps' =&gt; $caps, &nbsp;</div></li><li><div>            'l10n' =&gt; $l10n, &nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>        &nbsp;</div></li><li><div>        /**&nbsp;</div></li><li><div>         * Fires after VideoPress scripts are enqueued in the dashboard.&nbsp;</div></li><li><div>         *&nbsp;</div></li><li><div>         * @since 2.5.0&nbsp;</div></li><li><div>         */&nbsp;</div></li><li><div>        do_action( 'videopress_enqueue_admin_scripts' );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Get an array of available ratings. Keys are options, values are labels.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function get_available_ratings() {&nbsp;</div></li><li><div>        return array(&nbsp;</div></li><li><div>            'G' =&gt; 'G', &nbsp;</div></li><li><div>            'PG-13' =&gt; 'PG-13', &nbsp;</div></li><li><div>            'R-17' =&gt; 'R', &nbsp;</div></li><li><div>            'X-18' =&gt; 'X', &nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Additional VideoPress media templates.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function print_media_templates() {&nbsp;</div></li><li><div>        $options = $this-&gt;get_options();&nbsp;</div></li><li><div>        ?&gt;&nbsp;</div></li><li><div>        &lt;script type=&quot;text/html&quot; id=&quot;tmpl-videopress-attachment&quot;&gt;&nbsp;</div></li><li><div>            &lt;# if ( data.vp_ogg_url ) { #&gt;&nbsp;</div></li><li><div>            &lt;label class=&quot;setting vp-setting&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php _e( 'Ogg File URL', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; value=&quot;{{ data.vp_ogg_url }}&quot; onclick=&quot;this.focus();this.select();&quot; readonly /&gt;&nbsp;</div></li><li><div>                &lt;p class=&quot;help&quot;&gt;&lt;?php _e( 'Location of the Ogg video file.', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>            &lt;# } #&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;label class=&quot;setting vp-setting&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php _e( 'Share', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;input class=&quot;vp-checkbox&quot; type=&quot;checkbox&quot; &lt;# if ( '1' === data.vp_share ) { #&gt;checked&lt;# } #&gt; &lt;# if ( ! data.can.save ) { #&gt;disabled&lt;# } #&gt; /&gt;&nbsp;</div></li><li><div>                &lt;label&gt;&nbsp;</div></li><li><div>                    &lt;?php _e( 'Display share menu and allow viewers to embed or download this video', 'jetpack' ); ?&gt;&nbsp;</div></li><li><div>                &lt;/label&gt;&nbsp;</div></li><li><div>                &lt;input class=&quot;vp-checkbox-text&quot; type=&quot;text&quot; value=&quot;{{ data.vp_share }}&quot; data-setting=&quot;vp_share&quot; style=&quot;display:none;&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;label class=&quot;setting vp-setting&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php _e( 'Rating', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;?php foreach ( $this-&gt;get_available_ratings() as $value =&gt; $label ) : ?&gt;&nbsp;</div></li><li><div>                &lt;input class=&quot;vp-radio&quot; type=&quot;radio&quot; name=&quot;vp-radio-group&quot; id=&quot;vp-rating-&lt;?php echo sanitize_html_class( $value ); ?&gt;&quot; value=&quot;&lt;?php echo esc_attr( $value ); ?&gt;&quot;&nbsp;</div></li><li><div>                    &lt;# if ( '&lt;?php echo esc_attr( $value ); ?&gt;' === data.vp_rating ) { #&gt;checked&lt;# } #&gt;&nbsp;</div></li><li><div>                    &lt;# if ( ! data.can.save ) { #&gt;disabled&lt;# } #&gt; /&gt;&nbsp;</div></li><li><div>                &lt;label for=&quot;vp-rating-&lt;?php echo sanitize_html_class( $value ); ?&gt;&quot;&gt;&lt;?php echo esc_html( $label ); ?&gt;&lt;/label&gt;&nbsp;</div></li><li><div>                &lt;?php endforeach; ?&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;input class=&quot;vp-radio-text&quot; type=&quot;text&quot; value=&quot;{{ data.vp_rating }}&quot; data-setting=&quot;vp_rating&quot; style=&quot;display:none;&quot; /&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;label class=&quot;setting vp-setting&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php _e( 'Shortcode', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;text&quot; value=&quot;[wpvideo {{ data.vp_guid }}]&quot; onclick=&quot;this.focus();this.select();&quot; readonly /&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>            &lt;label class=&quot;setting vp-setting vp-preview&quot;&gt;&nbsp;</div></li><li><div>                &lt;span&gt;&lt;?php _e( 'Preview', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;# if ( ! data.vp_thumbnail_url ) { #&gt;&nbsp;</div></li><li><div>                    &lt;span class=&quot;videopress-preview-unavailable&quot;&gt;&lt;?php esc_html_e( 'The preview is unavailable while this video is being processed.', 'jetpack' ); ?&gt;&lt;/span&gt;&nbsp;</div></li><li><div>                &lt;# } else { #&gt;&nbsp;</div></li><li><div>                &lt;a href=&quot;#&quot; class=&quot;videopress-preview&quot; id=&quot;videopress-thumbnail-{{ data.vp_guid }}&quot; data-videopress-guid=&quot;{{ data.vp_guid }}&quot;&gt;&lt;img src=&quot;{{ data.vp_thumbnail_url }}&quot; /&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                &lt;# } #&gt;&nbsp;</div></li><li><div>            &lt;/label&gt;&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/html&quot; id=&quot;tmpl-videopress-media-modal&quot;&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;videopress-modal&quot;&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&lt;?php _e( 'Video Preview:', 'jetpack' ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>                &lt;div class=&quot;videopress-video-container&quot;&gt;{{{ data.video }}}&lt;/div&gt;&nbsp;</div></li><li><div>                &lt;p class=&quot;submit&quot;&gt;&nbsp;</div></li><li><div>                    &lt;a class=&quot;videopress-modal-close button&quot; href=&quot;#&quot;&gt;&lt;?php _e( 'Close', 'jetpack' ); ?&gt;&lt;/a&gt;&nbsp;</div></li><li><div>                &lt;/p&gt;&nbsp;</div></li><li><div>            &lt;/div&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;videopress-modal-backdrop&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        &lt;script type=&quot;text/html&quot; id=&quot;tmpl-videopress-uploader&quot;&gt;&nbsp;</div></li><li><div>            &lt;div class=&quot;videopress-errors&quot;&gt;&lt;/div&gt;&nbsp;</div></li><li><div>            &lt;form class=&quot;videopress-upload-form&quot; action=&quot;&quot; method=&quot;post&quot; target=&quot;videopress_upload_frame&quot; enctype=&quot;multipart/form-data&quot;&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;videopress_upload&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; name=&quot;videopress_blog_id&quot; value=&quot;0&quot; /&gt;&nbsp;</div></li><li><div>                &lt;input type=&quot;hidden&quot; name=&quot;videopress_token&quot; value=&quot;0&quot; /&gt;&nbsp;</div></li><li><div>                &lt;?php $formats = 'ogv, mp4, m4v, mov, wmv, avi, mpg, 3gp, 3g2'; ?&gt;&nbsp;</div></li><li><div>                &lt;?php&nbsp;</div></li><li><div>                    $max_upload_size = 0;&nbsp;</div></li><li><div>                    if ( ! empty( $options['meta']['max_upload_size'] ) )&nbsp;</div></li><li><div>                        $max_upload_size = absint( $options['meta']['max_upload_size'] );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    $upload_size_unit = $max_upload_size;&nbsp;</div></li><li><div>                    $byte_sizes = array( 'KB', 'MB', 'GB' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    for ( $u = -1; $upload_size_unit &gt; 1024 && $u &lt; count( $byte_sizes ) - 1; $u++ )&nbsp;</div></li><li><div>                        $upload_size_unit /= 1024;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                    if ( $u &lt; 0 ) {&nbsp;</div></li><li><div>                        $upload_size_unit = 0;&nbsp;</div></li><li><div>                        $u = 0;&nbsp;</div></li><li><div>                    } else {&nbsp;</div></li><li><div>                        $upload_size_unit = (int) $upload_size_unit;&nbsp;</div></li><li><div>                    }&nbsp;</div></li><li><div>                ?&gt;&nbsp;</div></li><li><div>                &lt;p&gt;&lt;?php printf( __( 'Use the form below to upload a video to your VideoPress Library. The following video formats are supported: %s. Maximum upload file size is %d%s.', 'jetpack' ), esc_html( $formats ), esc_html( $upload_size_unit ), esc_html( $byte_sizes[ $u ] ) ); ?&gt;&lt;/p&gt;&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>                &lt;input type=&quot;file&quot; name=&quot;videopress_file&quot; /&gt;&nbsp;</div></li><li><div>                &lt;?php submit_button( __( 'Upload Video', 'jetpack' ) ); ?&gt;&nbsp;</div></li><li><div>            &lt;/form&gt;&nbsp;</div></li><li><div>            &lt;iframe width=&quot;0&quot; height=&quot;0&quot; name=&quot;videopress_upload_frame&quot;&gt;&lt;/iframe&gt;&nbsp;</div></li><li><div>        &lt;/script&gt;&nbsp;</div></li><li><div>        &lt;?php&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>    /**&nbsp;</div></li><li><div>     * Filters the VideoPress shortcode options, makes sure that&nbsp;</div></li><li><div>     * the settings set in Jetpack's VideoPress module are applied.&nbsp;</div></li><li><div>     */&nbsp;</div></li><li><div>    function videopress_shortcode_options( $options ) {&nbsp;</div></li><li><div>        $videopress_options = $this-&gt;get_options();&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        if ( false === $options['freedom'] )&nbsp;</div></li><li><div>            $options['freedom'] = $videopress_options['freedom'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        $options['hd'] = $videopress_options['hd'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>        return $options;&nbsp;</div></li><li><div>    }&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre></dd></dl> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"><dl><dt>Version(s)</dt><dd><dl><dt>Since</dt><dd> 3.7.1</dd><dt>Others</dt><dd><ul><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.2/classes/jetpack_video_press/" class="">3.8.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.1/classes/jetpack_video_press/" class="">3.8.1</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.8.0/classes/jetpack_video_press/" class="">3.8.0</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.2/classes/jetpack_video_press/" class="active">3.7.2</a></li><li><a href="http://hookr.io/plugins/jetpack-by-wordpress-com/3.7.1/classes/jetpack_video_press/" class="">3.7.1</a></li></ul></dd></dl></dd></dl></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>class</li><li><span></span>Jetpack_VideoPress</li><li><span></span>Jetpack by WordPress.com</li><li><span></span>3.8.2</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2018 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>