<!DOCTYPE html> <!--[if lt IE 7]><html class="hookr file lt-ie9 lt-ie8 lt-ie7 ie"><![endif]--> <!--[if IE 7]><html class="hookr file lt-ie9 lt-ie8 ie7 ie"><![endif]--> <!--[if IE 8]><html class="hookr file lt-ie9 ie8 ie"><![endif]--> <!--[if IE 9]><html class="hookr file ie9 ie"><![endif]--> <!--[if gt IE 9]><html class="hookr file gt-ie9 ie"><![endif]--><html lang="en-US" id="single" class="hookr file" data-site="plugin" data-version="1.4.3" data-slug="google-places-reviews" data-type="file" data-id="80943"><head xmlns="http://www.w3.org/1999/xhtml"><title> inc-upgrades-upgrade-functions | file | Google Places Reviews | hookr.io</title><meta charset="UTF-8"><meta name="author" content="thepassionofthechris \m/," /><meta name="keywords" content="file, plugin, google-places-reviews, 1.4.3" /><meta name="description" content="The WordPress Hook/API Index" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel="shortcut icon" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.ico" /><link rel="icon" type="image/png" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.png"><link rel="icon" type="image/gif" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.gif"><link rel="icon" type="image/jpeg" href="http://hookr.io/wp-content/themes/hookr/assets/images/favicon.jpg"><meta name="google-site-verification" content="Q5dnl0YziNqRLCBxFtc2Rd8vUuueYAt6VIUYZItvEL4" /><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/hookr.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.25"}};!function(e,n,t){var a;function i(e){var t=n.createElement("canvas"),a=t.getContext&&t.getContext("2d"),i=String.fromCharCode;return!(!a||!a.fillText)&&(a.textBaseline="top",a.font="600 32px Arial","flag"===e?(a.fillText(i(55356,56806,55356,56826),0,0),3e3<t.toDataURL().length):"diversity"===e?(a.fillText(i(55356,57221),0,0),t=a.getImageData(16,16,1,1).data,a.fillText(i(55356,57221,55356,57343),0,0),(t=a.getImageData(16,16,1,1).data)[0],t[1],t[2],t[3],!0):("simple"===e?a.fillText(i(55357,56835),0,0):a.fillText(i(55356,57135),0,0),0!==a.getImageData(16,16,1,1).data[0]))}function o(e){var t=n.createElement("script");t.src=e,t.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(t)}t.supports={simple:i("simple"),flag:i("flag"),unicode8:i("unicode8"),diversity:i("diversity")},t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.simple&&t.supports.flag&&t.supports.unicode8&&t.supports.diversity||(a=function(){t.readyCallback()},n.addEventListener?(n.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1)):(e.attachEvent("onload",a),n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&t.readyCallback()})),(a=t.source||{}).concatemoji?o(a.concatemoji):a.wpemoji&&a.twemoji&&(o(a.twemoji),o(a.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel='stylesheet' id='screen-css'  href='http://hookr.io/wp-content/themes/hookr/assets/css/hookr.css?ver=bb79a50df38673ec31cc37539360193b' type='text/css' media='screen' /><link rel='stylesheet' id='qtip-css'  href='http://hookr.io/wp-content/themes/hookr/assets/vendor/jquery.qtip.custom/jquery.qtip.min.css?ver=4.4.25' type='text/css' media='screen' /><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fU9dGoIwDLsQW_XbHbyAXmCMAsNBsS2otxcYvqFP_UmaJg66x4T8LtzemD427BVtH4fiBC3RncGLoAp0AqWYRDS2lA4ZMw4VMZREKsp-NM46e14PlShpHJc_UwSsawz6R6CbURX38oNzDUwp3egSX1iZ3osif0PIhinVK3YQI9NsWNYRs6dAnCNt0zNWDW4OPw.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdTPzS8tTtXLzcwDAA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/fZBBDsIwDAQ_RG1Kn8AvuKWJUQ1JHBIXVF5PKOoFKZV8Gc_KK3nAmVHNWCBwPAxfKp4d5ZWPOIncM5pSSAve6jxmygskbyxN4mvwP_Sk6KRSSJ6vS9dDD6eNGkdXbu3hV9nUs7JvSpNqrzXK0uwFKyFJpKg7V3jPwZPp1XjDm7JYz2kUk10XTFHK6LgoXqo5b-YD.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9DPyM_PLtJPLC5OLSnWL0vNS8kv0s8qLE0tqtQrLMks0EsuLS7Jz0URys3MAwA.js"></script><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9YvzdRPTUtLTS7RzchMz8gB4hK93Mw8HQP9jPz87CL9xOLi1JJi_axiCF8vsSBTrzgzLz0nFQA.js"></script><link rel='https://api.w.org/' href='http://hookr.io/wp-json/' /><link rel="canonical" href="http://hookr.io/files/inc-upgrades-upgrade-functions/" /><link rel="alternate" type="application/json+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Finc-upgrades-upgrade-functions%2F" /><link rel="alternate" type="text/xml+oembed" href="http://hookr.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhookr.io%2Ffiles%2Finc-upgrades-upgrade-functions%2F&#038;format=xml" /><script>/*<![CDATA[*/if('undefined'===typeof Hookr)
var Hookr={};if('undefined'===typeof Hookr.Util)
Hookr.Util={};Hookr.Util=jQuery&&jQuery.extend(Hookr.Util,{"adminAjax":"http:\/\/hookr.io\/wp-admin\/admin-ajax.php","themeUrl":"http:\/\/hookr.io\/wp-content\/themes\/hookr\/","apiKey":"plugin-google-places-reviews-1.4.3-file-inc-upgrades-upgrade-functions","actions":{"popover":0,"range":1,"search":2,"stat":3}});/*]]>*/</script><!--[if lt IE 9]><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv.js"></script><script src="http://hookr.io/wp-content/themes/hookr/assets/js/html5shiv-printshiv.js"></script><![endif]--></head><body id="inc-upgrades-upgrade-functions" class="single single-file"><div id="gutter"><div><ul id="nav-breadcrumb" role="navigation" class="pivot clear fix"><li class="home"><a title="Go to hookr.io." href="http://hookr.io" class="home">hookr.io</a></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to plugins." href="http://hookr.io/plugins/" class=""><span property="name">plugins</span></a><meta property="position" content="2"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to google-places-reviews." href="http://hookr.io/plugins/google-places-reviews/" class="plugin"><span property="name">google-places-reviews</span></a><meta property="position" content="3"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to 1.4.3." href="http://hookr.io/plugins/google-places-reviews/1.4.3/" class="H_VERSION"><span property="name">1.4.3</span></a><meta property="position" content="4"></span></li><li>/</li><li><span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to files." href="http://hookr.io/plugins/google-places-reviews/1.4.3/files/" class=""><span property="name">files</span></a><meta property="position" content="5"></span></li><li>/</li><li class="current_item"><span property="itemListElement" typeof="ListItem"><span property="name">inc-upgrades-upgrade-functions</span><meta property="position" content="6"></span></li></ul></div></div><header class="jv-fixed"><div> <button class="btn" data-jv-trigger="left"><span></span></button><h1 title="hookr.io"><a href="http://hookr.io" title="hookr.io"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/hookr.svg" title="The WordPress Hook/API Index" alt="The WordPress Hook/API Index"/></a></h1> <nav id="nav-api-types" class="pivot clearfix" data-jv-order="0" data-jv-content="left" data-active="file"><ul role="navigation"><li class="" data-id="all" data-count="20"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/all/" title="All">All <span class="count badge">20</span></a></li><li class="" data-id="new" data-count="0"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/new/" title="New">New <span class="count badge">0</span></a></li><li class="" data-id="hooks" data-count="5"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/hooks/" title="Hooks">Hooks <span class="count badge">5</span></a></li><li class="" data-id="action" data-count="2"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/actions/" title="Actions">Actions <span class="count badge">2</span></a></li><li class="" data-id="filter" data-count="3"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/filters/" title="Filters">Filters <span class="count badge">3</span></a></li><li class="" data-id="class" data-count="3"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/classes/" title="Classes">Classes <span class="count badge">3</span></a></li><li class="" data-id="constant" data-count="3"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/constants/" title="Constants">Constants <span class="count badge">3</span></a></li><li class="" data-id="function" data-count="9"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/functions/" title="Functions">Functions <span class="count badge">9</span></a></li><li class="" data-id="shortcode" data-count="0"><a href="http://hookr.io/plugins/google-places-reviews/1.4.3/shortcodes/" title="Shortcodes">Shortcodes <span class="count badge">0</span></a></li></ul> </nav> <nav id="nav-main" class="pivot" data-jv-order="1" data-jv-content="left"><ul role="navigation"><li class=""><a href="http://hookr.io/all/" title="Core">Core</a></li><li class="active"><a href="http://hookr.io/plugins/" title="Plugins">Plugins</a></li><li class=""><a href="http://hookr.io/themes/" title="Themes">Themes</a></li><li class=""><a href="http://hookr.io/features/" title="Features">Features</a></li><li class=""><a href="http://hookr.io/plugin/" title="Plugin">Plugin</a></li><li class=""><a href="http://hookr.io/about/" title="About">About</a></li><li class=""><a href="http://hookr.io/contact/" title="Contact">Contact</a></li></ul> </nav></div> </header><div role="main" id="middle"><div><div id="mainbar"> <article> <section><h1>/inc/upgrades/upgrade-functions.php</h1><p><pre><ol  class="block" start="1"><li><div>&lt;?php&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> *  Handles Upgrade Functionality</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @description : This is the Reference ID that Place ID</span>&nbsp;</div></li><li><div><span class="comment"> * @copyright   Copyright (c) 2016, WordImpress</span>&nbsp;</div></li><li><div><span class="comment"> * @since       : 1.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">// Exit if accessed directly</span>&nbsp;</div></li><li><div>if ( ! defined( 'ABSPATH' ) ) {&nbsp;</div></li><li><div>  exit;&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Display Upgrade Notices</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function gpr_show_upgrade_notices() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//Uncomment for testing ONLY - Never leave uncommented unless testing:</span>&nbsp;</div></li><li><div>  <span class="comment">//delete_option( 'gpr_refid_upgraded' );</span>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">// Don't show notices on the upgrades page</span>&nbsp;</div></li><li><div>  if ( isset( $_GET['page'] ) && $_GET['page'] == 'gpr-upgrades' ) {&nbsp;</div></li><li><div>      return;&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $gpr_widget_version = get_option( 'gpr_widget_version' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $gpr_widget_version ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// 1.3 is the first version to use this option so we must add it</span></span>&nbsp;</div></li><li><div>      $gpr_widget_version = '1.3';&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $gpr_widget_version = preg_replace( '/[^0-9.].*/', '', $gpr_widget_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( version_compare( $gpr_widget_version, '1.3', '&lt;=' ) && ! get_option( 'gpr_refid_upgraded' ) && is_active_widget( false, false, 'gpr_widget', true ) ) {&nbsp;</div></li><li><div>      printf(&nbsp;</div></li><li><div>          '&lt;div class=&quot;updated&quot;&gt;&lt;p&gt;&lt;strong&gt;Google Places Reviews Notice:&lt;/strong&gt; ' . esc_html__( 'Hey there! We noticed you have active Google Places Reviews widget(s). Google has updated their API to use the new Google Places ID rather than previous Reference ID, which will soon be deprecated and eventually go offline. We are being proactive and would like to update your widgets to use the new Places ID for you. Once you upgrade, your widgets should work just fine. If you choose not to upgrade Google will eventually take the old reference ID offline (no date has been given). Please contact %1sWordImpress support%2s if you have any further questions or issues. %3sClick here to upgrade your widgets to use the new Places ID%4s.', 'google-places-reviews' ) . '&lt;/p&gt;&lt;/div&gt;', &nbsp;</div></li><li><div>          '&lt;a href=&quot;http:<span class="comment">//wordpress.org/support/plugin/google-places-reviews&quot; target=&quot;_blank&quot;&gt;', </span>&nbsp;</div></li><li><div>          '&lt;/a&gt;', &nbsp;</div></li><li><div>          '&lt;br&gt;&lt;br&gt;&lt;strong&gt;&lt;a href=&quot;' . esc_url( admin_url( 'options.php?page=gpr-upgrades' ) ) . '&quot;&gt;', &nbsp;</div></li><li><div>          '&lt;/a&gt;&lt;/strong&gt;'&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  update_option( 'gpr_widget_version', GPR_VERSION );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_notices', 'gpr_show_upgrade_notices' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Creates the upgrade page</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * links to global variables</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function gpr_add_upgrade_submenu_page() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $gpr_upgrades_screen = add_submenu_page( null, __( 'Google Places Reviews Upgrades', 'google-places-reviews' ), __( 'Google Places Reviews Upgrades', 'google-places-reviews' ), 'activate_plugins', 'gpr-upgrades', 'gpr_upgrades_screen' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'admin_menu', 'gpr_add_upgrade_submenu_page', 10 );&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Triggers all upgrade functions</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * This function is usually triggered via AJAX</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function gpr_trigger_upgrades() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! current_user_can( 'activate_plugins' ) ) {&nbsp;</div></li><li><div>      wp_die( __( 'You do not have permission to do plugin upgrades', 'google-places-reviews' ), __( 'Error', 'google-places-reviews' ), array( 'response' =&gt; 403 ) );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  $gpr_widget_version = get_option( 'gpr_widget_version' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( ! $gpr_widget_version ) {&nbsp;</div></li><li><div>      <span class="comment"><span class="comment">// 1.3 is the first version to use this option so we must add it</span></span>&nbsp;</div></li><li><div>      $gpr_widget_version = '1.3';&nbsp;</div></li><li><div>      add_option( 'gpr_widget_version', $gpr_widget_version );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( version_compare( GPR_VERSION, $gpr_widget_version, '&gt;=' ) && ! get_option( 'gpr_refid_upgraded' ) ) {&nbsp;</div></li><li><div>      gpr_v13_upgrades();&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  update_option( 'gpr_widget_version', $gpr_widget_version );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  if ( DOING_AJAX ) {&nbsp;</div></li><li><div>      die( 'complete' );&nbsp;</div></li><li><div>  } <span class="comment">// Let AJAX know that the upgrade is complete</span>&nbsp;</div></li><li><div>}&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>add_action( 'wp_ajax_gpr_trigger_upgrades', 'gpr_trigger_upgrades' );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div><span class="comment">/**</span>&nbsp;</div></li><li><div><span class="comment"> * Upgrade from Google Reference ID to Places ID</span>&nbsp;</div></li><li><div><span class="comment"> *</span>&nbsp;</div></li><li><div><span class="comment"> * @since 1.3</span>&nbsp;</div></li><li><div><span class="comment"> * @uses  WP_Query</span>&nbsp;</div></li><li><div><span class="comment"> * @return void</span>&nbsp;</div></li><li><div><span class="comment"> */</span>&nbsp;</div></li><li><div>function gpr_v13_upgrades() {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//Upgrade the Reference ID</span>&nbsp;</div></li><li><div>  $gpr_widget_options = get_option( 'widget_gpr_widget' );&nbsp;</div></li><li><div>  $plugin_options = get_option( 'googleplacesreviews_options' );&nbsp;</div></li><li><div>  $google_api_key = $plugin_options['google_places_api_key'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//Loop through widgets' options</span>&nbsp;</div></li><li><div>  foreach ( $gpr_widget_options as $key =&gt; $widget ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      $ref_id = isset( $widget['reference'] ) ? $widget['reference'] : '';&nbsp;</div></li><li><div>      $place_id = isset( $widget['place_id'] ) ? $widget['place_id'] : '';&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      <span class="comment">//If no place AND there's a ref ID proceed</span>&nbsp;</div></li><li><div>      if ( empty( $place_id ) && ! empty( $ref_id ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//cURL the Google API for the Google Place ID</span>&nbsp;</div></li><li><div>          $google_places_url = add_query_arg(&nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'reference' =&gt; $ref_id, &nbsp;</div></li><li><div>                  'key' =&gt; $google_api_key&nbsp;</div></li><li><div> ), &nbsp;</div></li><li><div>              'https:<span class="comment">//maps.googleapis.com/maps/api/place/details/json'</span>&nbsp;</div></li><li><div> );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          $response = wp_remote_get( $google_places_url, &nbsp;</div></li><li><div>              array(&nbsp;</div></li><li><div>                  'timeout' =&gt; 15, &nbsp;</div></li><li><div>                  'sslverify' =&gt; false&nbsp;</div></li><li><div> ) );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// make sure the response came back okay</span>&nbsp;</div></li><li><div>          if ( is_wp_error( $response ) ) {&nbsp;</div></li><li><div>              return;&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">// decode the license data</span>&nbsp;</div></li><li><div>          $response = json_decode( $response['body'], true );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          <span class="comment">//Place ID is there, now let's update the widget data</span>&nbsp;</div></li><li><div>          if ( isset( $response['result']['place_id'] ) ) {&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>              <span class="comment">//Add Place ID to GPR widgets options array</span>&nbsp;</div></li><li><div>              $gpr_widget_options[ $key ]['place_id'] = $response['result']['place_id'];&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>          }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>      }&nbsp;</div></li><li><div>      <span class="comment">//Pause for 3 seconds so we don't overwhelm the Google API with requests</span>&nbsp;</div></li><li><div>      sleep( 2 );&nbsp;</div></li><li><div>  }&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>  <span class="comment">//Update our options and GTF out</span>&nbsp;</div></li><li><div>  update_option( 'gpr_refid_upgraded', 'upgraded' );&nbsp;</div></li><li><div>  update_option( 'widget_gpr_widget', $gpr_widget_options );&nbsp;</div></li><li><div>&nbsp;</div></li><li><div>}&nbsp;</div></li></ol></pre>.</p> </section> </article></div><div id="sidebar"><ul class="widgets"><li> <a href="http://hookr.io/plugin/"><img src="http://hookr.io/wp-content/themes/hookr/assets/images/plugin-download.jpg" /></a></li><li id="versions"></li><li id="tags"><dl><dt>Tags</dt><dd><ul><li><span></span>plugin</li><li><span></span>file</li><li><span></span></li><li><span></span>Google Places Reviews</li><li><span></span>1.4.3</li></ul></dd></dl></li></ul></div></div></div><script>Hookr.View.init();Hookr.Single.init();</script><footer><div><ul id="nav-social" class="pivot" role="navigation"><li id="twitter"><a href="http://twitter.com/hookr_io" title="Follow me!"></a></li></ul><div> &copy; 2021 hookr.io <strong>(beta)</strong> | <a href="http://hookr.io/privacy/" title="Privacy">Privacy</a> | Proudly Powered by WordPress</div></div> </footer><script type="text/javascript" src="http://hookr.io/wp-content/cache/minify/000000/M9EvL9BNzU1KTdHLzcwDAA.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49583310-1','hookr.io');ga('send','pageview');</script></body></html>